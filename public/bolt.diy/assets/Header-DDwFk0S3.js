const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CDr9ewzR.js","assets/index-C3f7dkqv.js","assets/components-DOpQnLEK.js","assets/angular-html-LfdN0zeE.js","assets/html-C2L_23MC.js","assets/javascript-ySlJ1b_l.js","assets/css-BPhBrDlE.js","assets/angular-ts-CKsD7JZE.js","assets/scss-C31hgJw-.js","assets/apl-BBq3IX1j.js","assets/xml-e3z08dGr.js","assets/java-xI-RfyKK.js","assets/json-BQoSv7ci.js","assets/astro-CqkE3fuf.js","assets/typescript-Dj6nwHGl.js","assets/postcss-B3ZDOciz.js","assets/blade-a8OxSdnT.js","assets/sql-COK4E0Yg.js","assets/bsl-Dgyn0ogV.js","assets/sdbl-BLhTXw86.js","assets/cairo--RitsXJZ.js","assets/python-DhUJRlN_.js","assets/cobol-PTqiYgYu.js","assets/coffee-dyiR41kL.js","assets/cpp-BksuvNSY.js","assets/regexp-DWJ3fJO_.js","assets/glsl-DBO2IWDn.js","assets/c-C3t2pwGQ.js","assets/crystal-DtDmRg-F.js","assets/shellscript-atvbtKCR.js","assets/edge-D5gP-w-T.js","assets/html-derivative-CSfWNPLT.js","assets/elixir-CLiX3zqd.js","assets/elm-CmHSxxaM.js","assets/erb-BYTLMnw6.js","assets/ruby-DeZ3UC14.js","assets/haml-B2EZWmdv.js","assets/graphql-cDcHW_If.js","assets/jsx-BAng5TT0.js","assets/tsx-B6W0miNI.js","assets/lua-CvWAzNxB.js","assets/yaml-CVw76BM1.js","assets/fortran-fixed-form-TqA4NnZg.js","assets/fortran-free-form-DKXYxT9g.js","assets/fsharp-XplgxFYe.js","assets/markdown-UIAJJxZW.js","assets/gdresource-BHYsBjWJ.js","assets/gdshader-SKMF96pI.js","assets/gdscript-DfxzS6Rs.js","assets/git-commit-i4q6IMui.js","assets/diff-BgYniUM_.js","assets/git-rebase-B-v9cOL2.js","assets/glimmer-js-D-cwc0-E.js","assets/glimmer-ts-pgjy16dm.js","assets/hack-D1yCygmZ.js","assets/handlebars-BQGss363.js","assets/http-FRrOvY1W.js","assets/hxml-TIA70rKU.js","assets/haxe-C5wWYbrZ.js","assets/imba-bv_oIlVt.js","assets/jinja-DGy0s7-h.js","assets/jison-BqZprYcd.js","assets/julia-BBuGR-5E.js","assets/r-CwjWoCRV.js","assets/latex-C-cWTeAZ.js","assets/tex-rYs2v40G.js","assets/liquid-D3W5UaiH.js","assets/marko-z0MBrx5-.js","assets/less-BfCpw3nA.js","assets/mdc-DB_EDNY_.js","assets/nginx-D_VnBJ67.js","assets/nim-ZlGxZxc3.js","assets/perl-CHQXSrWU.js","assets/php-B5ebYQev.js","assets/pug-CM9l7STV.js","assets/qml-D8XfuvdV.js","assets/razor-CNLDkMZG.js","assets/csharp-D9R-vmeu.js","assets/rst-4NLicBqY.js","assets/cmake-DbXoA79R.js","assets/sas-BmTFh92c.js","assets/shaderlab-B7qAK45m.js","assets/hlsl-ifBTmRxC.js","assets/shellsession-C_rIy8kc.js","assets/soy-C-lX7w71.js","assets/sparql-bYkjHRlG.js","assets/turtle-BMR_PYu6.js","assets/stata-DorPZHa4.js","assets/svelte-MSaWC3Je.js","assets/templ-dwX3ZSMB.js","assets/go-B1SYOhNW.js","assets/ts-tags-CipyTH0X.js","assets/twig-NC5TFiHP.js","assets/vue-BuYVFjOK.js","assets/vue-html-xdeiXROB.js","assets/xsl-Dd0NUgwM.js","assets/index-D18qpNJ5.js","assets/index-CDArbnrH.js","assets/index-DIhQc7aX.js","assets/index-B3Lg-fVh.js","assets/index-Du7OXBm3.js","assets/index-DaPVH0pc.js","assets/index-ChTepeN2.js","assets/index-BUepXmvw.js","assets/index-CTU6qCCA.js","assets/index-Dw48G5d-.js","assets/index-BCaZpILw.js"])))=>i.map(i=>d[i]);
import{r as N,j as y,z as ht,A as Yg,p as Jg,B as Tye,y as yi,x as Ws,C as Pye,u as Nye,a as dY,D as Iye,t as Rye,F as Oye}from"./components-DOpQnLEK.js";import{a as yr,u as Bt,t as i1,b as hY,p as Sn,c as uD,d as po,m as Ph,e as Zn,l as Ut,s as Lye,g as FF,r as W0}from"./index-C3f7dkqv.js";const Dye=5,I_=6,R_=10;let Mye=(t,e,n,r)=>(t.events=t.events||{},t.events[n+R_]||(t.events[n+R_]=r(s=>{t.events[n].reduceRight((i,o)=>(o(i),i),{shared:{},...s})})),t.events[n]=t.events[n]||[],t.events[n].push(e),()=>{let s=t.events[n],i=s.indexOf(e);s.splice(i,1),s.length||(delete t.events[n],t.events[n+R_](),delete t.events[n+R_])}),jye=1e3,Fye=(t,e)=>Mye(t,r=>{let s=e(r);s&&t.events[I_].push(s)},Dye,r=>{let s=t.listen;t.listen=(...o)=>(!t.lc&&!t.active&&(t.active=!0,r()),s(...o));let i=t.off;return t.events[I_]=[],t.off=()=>{i(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let o of t.events[I_])o();t.events[I_]=[]}},jye)},()=>{t.listen=s,t.off=i}}),Bye=(t,e,n)=>{Array.isArray(t)||(t=[t]);let r,s=0,i=()=>{let l=t.map(c=>c.get());if(r===void 0||l.some((c,u)=>c!==r[u])){let c=++s;r=l;let u=e(...l);u&&u.then&&u.t?u.then(d=>{c===s&&o.set(d)}):o.set(u)}},o=yr(void 0,Math.max(...t.map(l=>l.l))+1),a=i;return Fye(o,()=>{let l=t.map(c=>c.listen(a,-1/o.l));return i(),()=>{for(let c of l)c()}}),o},dD=(t,e)=>Bye(t,e);function Yn(t){"@babel/helpers - typeof";return Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yn(t)}function $ye(){return()=>{}}function Uye(){return N.useSyncExternalStore($ye,()=>!0,()=>!1)}function lu({children:t,fallback:e=null}){return Uye()?N.createElement(N.Fragment,null,t()):N.createElement(N.Fragment,null,e)}const hD=N.createContext({});function o1(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const ZC=N.createContext(null),fD=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Hye extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function zye({children:t,isPresent:e}){const n=N.useId(),r=N.useRef(null),s=N.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=N.useContext(fD);return N.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),y.jsx(Hye,{isPresent:e,childRef:r,sizeRef:s,children:N.cloneElement(t,{ref:r})})}const Vye=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=o1(Wye),l=N.useId(),c=N.useCallback(d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},[a,r]),u=N.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),i?[Math.random(),c]:[n,c]);return N.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[n]),N.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=y.jsx(zye,{isPresent:n,children:t})),y.jsx(ZC.Provider,{value:u,children:t})};function Wye(){return new Map}function fY(t=!0){const e=N.useContext(ZC);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=N.useId();N.useEffect(()=>{t&&s(i)},[t]);const o=N.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const O_=t=>t.key||"";function BF(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const pD=typeof window<"u",pY=pD?N.useLayoutEffect:N.useEffect,Ic=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=fY(o),c=N.useMemo(()=>BF(t),[t]),u=o&&!a?[]:c.map(O_),d=N.useRef(!0),h=N.useRef(c),f=o1(()=>new Map),[p,m]=N.useState(c),[g,b]=N.useState(c);pY(()=>{d.current=!1,h.current=c;for(let _=0;_<g.length;_++){const S=O_(g[_]);u.includes(S)?f.delete(S):f.get(S)!==!0&&f.set(S,!1)}},[g,u.length,u.join("-")]);const v=[];if(c!==p){let _=[...c];for(let S=0;S<g.length;S++){const E=g[S],k=O_(E);u.includes(k)||(_.splice(S,0,E),v.push(E))}i==="wait"&&v.length&&(_=v),b(BF(_)),m(c);return}const{forceRender:w}=N.useContext(hD);return y.jsx(y.Fragment,{children:g.map(_=>{const S=O_(_),E=o&&!a?!1:c===g||u.includes(S),k=()=>{if(f.has(S))f.set(S,!0);else return;let x=!0;f.forEach(I=>{I||(x=!1)}),x&&(w?.(),b(h.current),o&&l?.(),r&&r())};return y.jsx(Vye,{isPresent:E,initial:!d.current||n?void 0:!1,custom:E?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:E?void 0:k,children:_},S)})})},Ho=t=>t;let mY=Ho;function mD(t){let e;return()=>(e===void 0&&(e=t()),e)}const ap=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Sc=t=>t*1e3,Ec=t=>t/1e3,Gye={useManualTiming:!1};function qye(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const f=d&&r?e:n;return u&&i.add(c),f.has(c)||f.add(c),c},cancel:c=>{n.delete(c),i.delete(c)},process:c=>{if(o=c,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(c))}};return l}const L_=["read","resolveKeyframes","update","preRender","render","postRender"],Kye=40;function gY(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=L_.reduce((b,v)=>(b[v]=qye(i),b),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=o,f=()=>{const b=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(b-s.timestamp,Kye),1),s.timestamp=b,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(f))},p=()=>{n=!0,r=!0,s.isProcessing||t(f)};return{schedule:L_.reduce((b,v)=>{const w=o[v];return b[v]=(_,S=!1,E=!1)=>(n||p(),w.schedule(_,S,E)),b},{}),cancel:b=>{for(let v=0;v<L_.length;v++)o[L_[v]].cancel(b)},state:s,steps:o}}const{schedule:vr,cancel:rh,state:Hs,steps:$5}=gY(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ho,!0),bY=N.createContext({strict:!1}),$F={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xg={};for(const t in $F)Xg[t]={isEnabled:e=>$F[t].some(n=>!!e[n])};function Yye(t){for(const e in t)Xg[e]={...Xg[e],...t[e]}}const Jye=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yE(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Jye.has(t)}let yY=t=>!yE(t);function Xye(t){t&&(yY=e=>e.startsWith("on")?!yE(e):t(e))}try{Xye(require("@emotion/is-prop-valid").default)}catch{}function Zye(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(yY(s)||n===!0&&yE(s)||!e&&!yE(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function Qye(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const QC=N.createContext({});function a1(t){return typeof t=="string"||Array.isArray(t)}function eA(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const gD=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bD=["initial",...gD];function tA(t){return eA(t.animate)||bD.some(e=>a1(t[e]))}function vY(t){return!!(tA(t)||t.variants)}function eve(t,e){if(tA(t)){const{initial:n,animate:r}=t;return{initial:n===!1||a1(n)?n:void 0,animate:a1(r)?r:void 0}}return t.inherit!==!1?e:{}}function tve(t){const{initial:e,animate:n}=eve(t,N.useContext(QC));return N.useMemo(()=>({initial:e,animate:n}),[UF(e),UF(n)])}function UF(t){return Array.isArray(t)?t.join(" "):t}const nve=Symbol.for("motionComponentSymbol");function ng(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rve(t,e,n){return N.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ng(n)&&(n.current=r))},[e])}const yD=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sve="framerAppearId",wY="data-"+yD(sve),{schedule:vD}=gY(queueMicrotask,!1),xY=N.createContext({});function ive(t,e,n,r,s){var i,o;const{visualElement:a}=N.useContext(QC),l=N.useContext(bY),c=N.useContext(ZC),u=N.useContext(fD).reducedMotion,d=N.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,f=N.useContext(xY);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&ove(d.current,n,s,f);const p=N.useRef(!1);N.useInsertionEffect(()=>{h&&p.current&&h.update(n,c)});const m=n[wY],g=N.useRef(!!m&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,m))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,m)));return pY(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),vD.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),N.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,m)}),g.current=!1))}),h}function ove(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:_Y(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&ng(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function _Y(t){if(t)return t.options.allowProjection!==!1?t.projection:_Y(t.parent)}function ave({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&Yye(t);function a(c,u){let d;const h={...N.useContext(fD),...c,layoutId:lve(c)},{isStatic:f}=h,p=tve(c),m=r(c,f);if(!f&&pD){cve();const g=uve(h);d=g.MeasureLayout,p.visualElement=ive(s,m,h,e,g.ProjectionNode)}return y.jsxs(QC.Provider,{value:p,children:[d&&p.visualElement?y.jsx(d,{visualElement:p.visualElement,...h}):null,n(s,c,rve(m,p.visualElement,u),m,f,p.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=N.forwardRef(a);return l[nve]=s,l}function lve({layoutId:t}){const e=N.useContext(hD).id;return e&&t!==void 0?e+"-"+t:t}function cve(t,e){N.useContext(bY).strict}function uve(t){const{drag:e,layout:n}=Xg;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const dve=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function wD(t){return typeof t!="string"||t.includes("-")?!1:!!(dve.indexOf(t)>-1||/[A-Z]/u.test(t))}function HF(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function xD(t,e,n,r){if(typeof e=="function"){const[s,i]=HF(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=HF(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const mI=t=>Array.isArray(t),hve=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),fve=t=>mI(t)?t[t.length-1]||0:t,Ns=t=>!!(t&&t.getVelocity);function AS(t){const e=Ns(t)?t.get():t;return hve(e)?e.toValue():e}function pve({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:mve(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const SY=t=>(e,n)=>{const r=N.useContext(QC),s=N.useContext(ZC),i=()=>pve(t,e,r,s);return n?i():o1(i)};function mve(t,e,n,r){const s={},i=r(t,{});for(const h in i)s[h]=AS(i[h]);let{initial:o,animate:a}=t;const l=tA(t),c=vY(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!eA(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const p=xD(t,h[f]);if(p){const{transitionEnd:m,transition:g,...b}=p;for(const v in b){let w=b[v];if(Array.isArray(w)){const _=u?w.length-1:0;w=w[_]}w!==null&&(s[v]=w)}for(const v in m)s[v]=m[v]}}}return s}const G0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rp=new Set(G0),EY=t=>e=>typeof e=="string"&&e.startsWith(t),kY=EY("--"),gve=EY("var(--"),_D=t=>gve(t)?bve.test(t.split("/*")[0].trim()):!1,bve=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,CY=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Bu=(t,e,n)=>n>e?e:n<t?t:n,q0={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},l1={...q0,transform:t=>Bu(0,1,t)},D_={...q0,default:1},Rw=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_d=Rw("deg"),kc=Rw("%"),Gt=Rw("px"),yve=Rw("vh"),vve=Rw("vw"),zF={...kc,parse:t=>kc.parse(t)/100,transform:t=>kc.transform(t*100)},wve={borderWidth:Gt,borderTopWidth:Gt,borderRightWidth:Gt,borderBottomWidth:Gt,borderLeftWidth:Gt,borderRadius:Gt,radius:Gt,borderTopLeftRadius:Gt,borderTopRightRadius:Gt,borderBottomRightRadius:Gt,borderBottomLeftRadius:Gt,width:Gt,maxWidth:Gt,height:Gt,maxHeight:Gt,top:Gt,right:Gt,bottom:Gt,left:Gt,padding:Gt,paddingTop:Gt,paddingRight:Gt,paddingBottom:Gt,paddingLeft:Gt,margin:Gt,marginTop:Gt,marginRight:Gt,marginBottom:Gt,marginLeft:Gt,backgroundPositionX:Gt,backgroundPositionY:Gt},xve={rotate:_d,rotateX:_d,rotateY:_d,rotateZ:_d,scale:D_,scaleX:D_,scaleY:D_,scaleZ:D_,skew:_d,skewX:_d,skewY:_d,distance:Gt,translateX:Gt,translateY:Gt,translateZ:Gt,x:Gt,y:Gt,z:Gt,perspective:Gt,transformPerspective:Gt,opacity:l1,originX:zF,originY:zF,originZ:Gt},VF={...q0,transform:Math.round},SD={...wve,...xve,zIndex:VF,size:Gt,fillOpacity:l1,strokeOpacity:l1,numOctaves:VF},_ve={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Sve=G0.length;function Eve(t,e,n){let r="",s=!0;for(let i=0;i<Sve;i++){const o=G0[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=CY(a,SD[o]);if(!l){s=!1;const u=_ve[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function ED(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Rp.has(l)){o=!0;continue}else if(kY(l)){s[l]=c;continue}else{const u=CY(c,SD[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=Eve(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const kve={offset:"stroke-dashoffset",array:"stroke-dasharray"},Cve={offset:"strokeDashoffset",array:"strokeDasharray"};function Ave(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?kve:Cve;t[i.offset]=Gt.transform(-r);const o=Gt.transform(e),a=Gt.transform(n);t[i.array]=`${o} ${a}`}function WF(t,e,n){return typeof t=="string"?t:Gt.transform(e+n*t)}function Tve(t,e,n){const r=WF(e,t.x,t.width),s=WF(n,t.y,t.height);return`${r} ${s}`}function kD(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(ED(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f,dimensions:p}=t;h.transform&&(p&&(f.transform=h.transform),delete h.transform),p&&(s!==void 0||i!==void 0||f.transform)&&(f.transformOrigin=Tve(p,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&Ave(h,o,a,l,!1)}const CD=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),AY=()=>({...CD(),attrs:{}}),AD=t=>typeof t=="string"&&t.toLowerCase()==="svg";function TY(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const PY=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NY(t,e,n,r){TY(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(PY.has(s)?s:yD(s),e.attrs[s])}const vE={};function Pve(t){Object.assign(vE,t)}function IY(t,{layout:e,layoutId:n}){return Rp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vE[t]||t==="opacity")}function TD(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(Ns(s[o])||e.style&&Ns(e.style[o])||IY(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function RY(t,e,n){const r=TD(t,e,n);for(const s in t)if(Ns(t[s])||Ns(e[s])){const i=G0.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function Nve(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const GF=["x","y","width","height","cx","cy","r"],Ive={useVisualState:SY({scrapeMotionValuesFromProps:RY,createRenderState:AY,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(Rp.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<GF.length;a++){const l=GF[a];t[l]!==e[l]&&(o=!0)}o&&vr.read(()=>{Nve(n,r),vr.render(()=>{kD(r,s,AD(n.tagName),t.transformTemplate),NY(n,r)})})}})},Rve={useVisualState:SY({scrapeMotionValuesFromProps:TD,createRenderState:CD})};function OY(t,e,n){for(const r in e)!Ns(e[r])&&!IY(r,n)&&(t[r]=e[r])}function Ove({transformTemplate:t},e){return N.useMemo(()=>{const n=CD();return ED(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Lve(t,e){const n=t.style||{},r={};return OY(r,n,t),Object.assign(r,Ove(t,e)),r}function Dve(t,e){const n={},r=Lve(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function Mve(t,e,n,r){const s=N.useMemo(()=>{const i=AY();return kD(i,e,AD(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};OY(i,t.style,t),s.style={...i,...s.style}}return s}function jve(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(wD(n)?Mve:Dve)(r,i,o,n),c=Zye(r,typeof n=="string",t),u=n!==N.Fragment?{...c,...l,ref:s}:{},{children:d}=r,h=N.useMemo(()=>Ns(d)?d.get():d,[d]);return N.createElement(n,{...u,children:h})}}function Fve(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...wD(r)?Ive:Rve,preloadedFeatures:t,useRender:jve(s),createVisualElement:e,Component:r};return ave(o)}}function LY(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function nA(t,e,n){const r=t.getProps();return xD(r,e,n!==void 0?n:r.custom,t)}const Bve=mD(()=>window.ScrollTimeline!==void 0);class $ve{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(Bve()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class DY extends $ve{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function PD(t,e){return t?t[e]||t.default||t:void 0}const wE=2e4;function ND(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<wE;)e+=n,r=t.next(e);return e>=wE?1/0:e}function Uve(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(ND(r),wE);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Ec(s)}}function rA(t){return typeof t=="function"}function qF(t,e){t.timeline=e,t.onfinish=null}const ID=t=>Array.isArray(t)&&typeof t[0]=="number",Hve={linearEasing:void 0};function zve(t,e){const n=mD(t);return()=>{var r;return(r=Hve[e])!==null&&r!==void 0?r:n()}}const xE=zve(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),MY=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(ap(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function jY(t){return!!(typeof t=="function"&&xE()||!t||typeof t=="string"&&(t in gI||xE())||ID(t)||Array.isArray(t)&&t.every(jY))}const Uy=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,gI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uy([0,.65,.55,1]),circOut:Uy([.55,0,1,.45]),backIn:Uy([.31,.01,.66,-.59]),backOut:Uy([.33,1.53,.69,.99])};function FY(t,e){if(t)return typeof t=="function"&&xE()?MY(t,e):ID(t)?Uy(t):Array.isArray(t)?t.map(n=>FY(n,e)||gI.easeOut):gI[t]}const nl={x:!1,y:!1};function BY(){return nl.x||nl.y}function $Y(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;e&&(s=e.current);const i=(r=n?.[t])!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function UY(t,e){const n=$Y(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function KF(t){return e=>{e.pointerType==="touch"||BY()||t(e)}}function Vve(t,e,n={}){const[r,s,i]=UY(t,n),o=KF(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=KF(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const HY=(t,e)=>e?t===e?!0:HY(t,e.parentElement):!1,RD=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Wve=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Gve(t){return Wve.has(t.tagName)||t.tabIndex!==-1}const Hy=new WeakSet;function YF(t){return e=>{e.key==="Enter"&&t(e)}}function U5(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const qve=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=YF(()=>{if(Hy.has(n))return;U5(n,"down");const s=YF(()=>{U5(n,"up")}),i=()=>U5(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function JF(t){return RD(t)&&!BY()}function Kve(t,e,n={}){const[r,s,i]=UY(t,n),o=a=>{const l=a.currentTarget;if(!JF(a)||Hy.has(l))return;Hy.add(l);const c=e(a),u=(f,p)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!JF(f)||!Hy.has(l))&&(Hy.delete(l),typeof c=="function"&&c(f,{success:p}))},d=f=>{u(f,n.useGlobalTarget||HY(l,f.target))},h=f=>{u(f,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",h,s)};return r.forEach(a=>{!Gve(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>qve(c,s),s)}),i}function Yve(t){return t==="x"||t==="y"?nl[t]?null:(nl[t]=!0,()=>{nl[t]=!1}):nl.x||nl.y?null:(nl.x=nl.y=!0,()=>{nl.x=nl.y=!1})}const zY=new Set(["width","height","top","left","right","bottom",...G0]);let TS;function Jve(){TS=void 0}const Cc={now:()=>(TS===void 0&&Cc.set(Hs.isProcessing||Gye.useManualTiming?Hs.timestamp:performance.now()),TS),set:t=>{TS=t,queueMicrotask(Jve)}};function OD(t,e){t.indexOf(e)===-1&&t.push(e)}function sA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class LD{constructor(){this.subscriptions=[]}add(e){return OD(this.subscriptions,e),()=>sA(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function VY(t,e){return e?t*(1e3/e):0}const XF=30,Xve=t=>!isNaN(parseFloat(t));class Zve{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=Cc.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Cc.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Xve(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new LD);const r=this.events[e].add(n);return e==="change"?()=>{r(),vr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Cc.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>XF)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,XF);return VY(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function c1(t,e){return new Zve(t,e)}function Qve(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,c1(n))}function e1e(t,e){const n=nA(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=fve(i[o]);Qve(t,o,a)}}function t1e(t){return!!(Ns(t)&&t.add)}function bI(t,e){const n=t.getValue("willChange");if(t1e(n))return n.add(e)}function WY(t){return t.props[wY]}const GY=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,n1e=1e-7,r1e=12;function s1e(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=GY(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>n1e&&++a<r1e);return o}function Op(t,e,n,r){if(t===e&&n===r)return Ho;const s=i=>s1e(i,0,1,t,n);return i=>i===0||i===1?i:GY(s(i),e,r)}const qY=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,KY=t=>e=>1-t(1-e),YY=Op(.33,1.53,.69,.99),DD=KY(YY),JY=qY(DD),XY=t=>(t*=2)<1?.5*DD(t):.5*(2-Math.pow(2,-10*(t-1))),MD=t=>1-Math.sin(Math.acos(t)),ZY=KY(MD),QY=qY(MD),eJ=t=>/^0[^.\s]+$/u.test(t);function i1e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||eJ(t):!0}const fv=t=>Math.round(t*1e5)/1e5,jD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function o1e(t){return t==null}const a1e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,FD=(t,e)=>n=>!!(typeof n=="string"&&a1e.test(n)&&n.startsWith(t)||e&&!o1e(n)&&Object.prototype.hasOwnProperty.call(n,e)),tJ=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(jD);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},l1e=t=>Bu(0,255,t),H5={...q0,transform:t=>Math.round(l1e(t))},kf={test:FD("rgb","red"),parse:tJ("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+H5.transform(t)+", "+H5.transform(e)+", "+H5.transform(n)+", "+fv(l1.transform(r))+")"};function c1e(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const yI={test:FD("#"),parse:c1e,transform:kf.transform},rg={test:FD("hsl","hue"),parse:tJ("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+kc.transform(fv(e))+", "+kc.transform(fv(n))+", "+fv(l1.transform(r))+")"},ai={test:t=>kf.test(t)||yI.test(t)||rg.test(t),parse:t=>kf.test(t)?kf.parse(t):rg.test(t)?rg.parse(t):yI.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?kf.transform(t):rg.transform(t)},u1e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function d1e(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(jD))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(u1e))===null||n===void 0?void 0:n.length)||0)>0}const nJ="number",rJ="color",h1e="var",f1e="var(",ZF="${}",p1e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function u1(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(p1e,l=>(ai.test(l)?(r.color.push(i),s.push(rJ),n.push(ai.parse(l))):l.startsWith(f1e)?(r.var.push(i),s.push(h1e),n.push(l)):(r.number.push(i),s.push(nJ),n.push(parseFloat(l))),++i,ZF)).split(ZF);return{values:n,split:a,indexes:r,types:s}}function sJ(t){return u1(t).values}function iJ(t){const{split:e,types:n}=u1(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===nJ?i+=fv(s[o]):a===rJ?i+=ai.transform(s[o]):i+=s[o]}return i}}const m1e=t=>typeof t=="number"?0:t;function g1e(t){const e=sJ(t);return iJ(t)(e.map(m1e))}const sh={test:d1e,parse:sJ,createTransformer:iJ,getAnimatableNone:g1e},b1e=new Set(["brightness","contrast","saturate","opacity"]);function y1e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(jD)||[];if(!r)return t;const s=n.replace(r,"");let i=b1e.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const v1e=/\b([a-z-]*)\(.*?\)/gu,vI={...sh,getAnimatableNone:t=>{const e=t.match(v1e);return e?e.map(y1e).join(" "):t}},w1e={...SD,color:ai,backgroundColor:ai,outlineColor:ai,fill:ai,stroke:ai,borderColor:ai,borderTopColor:ai,borderRightColor:ai,borderBottomColor:ai,borderLeftColor:ai,filter:vI,WebkitFilter:vI},BD=t=>w1e[t];function oJ(t,e){let n=BD(t);return n!==vI&&(n=sh),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const x1e=new Set(["auto","none","0"]);function _1e(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!x1e.has(i)&&u1(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=oJ(n,s)}const QF=t=>t===q0||t===Gt,eB=(t,e)=>parseFloat(t.split(", ")[e]),tB=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return eB(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?eB(i[1],t):0}},S1e=new Set(["x","y","z"]),E1e=G0.filter(t=>!S1e.has(t));function k1e(t){const e=[];return E1e.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Zg={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:tB(4,13),y:tB(5,14)};Zg.translateX=Zg.x;Zg.translateY=Zg.y;const Vf=new Set;let wI=!1,xI=!1;function aJ(){if(xI){const t=Array.from(Vf).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=k1e(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}xI=!1,wI=!1,Vf.forEach(t=>t.complete()),Vf.clear()}function lJ(){Vf.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(xI=!0)})}function C1e(){lJ(),aJ()}class $D{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Vf.add(this),wI||(wI=!0,vr.read(lJ),vr.resolveKeyframes(aJ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Vf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Vf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const cJ=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),A1e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function T1e(t){const e=A1e.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function uJ(t,e,n=1){const[r,s]=T1e(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return cJ(o)?parseFloat(o):o}return _D(s)?uJ(s,e,n+1):s}const dJ=t=>e=>e.test(t),P1e={test:t=>t==="auto",parse:t=>t},hJ=[q0,Gt,kc,_d,vve,yve,P1e],nB=t=>hJ.find(dJ(t));class fJ extends $D{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),_D(c))){const u=uJ(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!zY.has(r)||e.length!==2)return;const[s,i]=e,o=nB(s),a=nB(i);if(o!==a)if(QF(o)&&QF(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)i1e(e[s])&&r.push(s);r.length&&_1e(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zg[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Zg[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const rB=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(sh.test(t)||t==="0")&&!t.startsWith("url("));function N1e(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function I1e(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=rB(s,e),a=rB(i,e);return!o||!a?!1:N1e(t)||(n==="spring"||rA(n))&&r}const R1e=t=>t!==null;function iA(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(R1e),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const O1e=40;class pJ{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Cc.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>O1e?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&C1e(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Cc.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!I1e(e,r,s,i))if(o)this.options.duration=0;else{l&&l(iA(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Sr=(t,e,n)=>t+(e-t)*n;function z5(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function L1e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=z5(l,a,t+1/3),i=z5(l,a,t),o=z5(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function _E(t,e){return n=>n>0?e:t}const V5=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},D1e=[yI,kf,rg],M1e=t=>D1e.find(e=>e.test(t));function sB(t){const e=M1e(t);if(!e)return!1;let n=e.parse(t);return e===rg&&(n=L1e(n)),n}const iB=(t,e)=>{const n=sB(t),r=sB(e);if(!n||!r)return _E(t,e);const s={...n};return i=>(s.red=V5(n.red,r.red,i),s.green=V5(n.green,r.green,i),s.blue=V5(n.blue,r.blue,i),s.alpha=Sr(n.alpha,r.alpha,i),kf.transform(s))},j1e=(t,e)=>n=>e(t(n)),Ow=(...t)=>t.reduce(j1e),_I=new Set(["none","hidden"]);function F1e(t,e){return _I.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function B1e(t,e){return n=>Sr(t,e,n)}function UD(t){return typeof t=="number"?B1e:typeof t=="string"?_D(t)?_E:ai.test(t)?iB:H1e:Array.isArray(t)?mJ:typeof t=="object"?ai.test(t)?iB:$1e:_E}function mJ(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>UD(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function $1e(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=UD(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function U1e(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const H1e=(t,e)=>{const n=sh.createTransformer(e),r=u1(t),s=u1(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?_I.has(t)&&!s.values.length||_I.has(e)&&!r.values.length?F1e(t,e):Ow(mJ(U1e(r,s),s.values),n):_E(t,e)};function gJ(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Sr(t,e,n):UD(t)(t,e)}const z1e=5;function bJ(t,e,n){const r=Math.max(e-z1e,0);return VY(n-t(r),e-r)}const Dr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oB=.001;function V1e({duration:t=Dr.duration,bounce:e=Dr.bounce,velocity:n=Dr.velocity,mass:r=Dr.mass}){let s,i,o=1-e;o=Bu(Dr.minDamping,Dr.maxDamping,o),t=Bu(Dr.minDuration,Dr.maxDuration,Ec(t)),o<1?(s=c=>{const u=c*o,d=u*t,h=u-n,f=SI(c,o),p=Math.exp(-d);return oB-h/f*p},i=c=>{const d=c*o*t,h=d*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-d),m=SI(Math.pow(c,2),o);return(-s(c)+oB>0?-1:1)*((h-f)*p)/m}):(s=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-.001+u*d},i=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=G1e(s,i,a);if(t=Sc(t),isNaN(l))return{stiffness:Dr.stiffness,damping:Dr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const W1e=12;function G1e(t,e,n){let r=n;for(let s=1;s<W1e;s++)r=r-t(r)/e(r);return r}function SI(t,e){return t*Math.sqrt(1-e*e)}const q1e=["duration","bounce"],K1e=["stiffness","damping","mass"];function aB(t,e){return e.some(n=>t[n]!==void 0)}function Y1e(t){let e={velocity:Dr.velocity,stiffness:Dr.stiffness,damping:Dr.damping,mass:Dr.mass,isResolvedFromDuration:!1,...t};if(!aB(t,K1e)&&aB(t,q1e))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Bu(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Dr.mass,stiffness:s,damping:i}}else{const n=V1e(t);e={...e,...n,mass:Dr.mass},e.isResolvedFromDuration=!0}return e}function HD(t=Dr.visualDuration,e=Dr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=Y1e({...n,velocity:-Ec(n.velocity||0)}),p=h||0,m=c/(2*Math.sqrt(l*u)),g=o-i,b=Ec(Math.sqrt(l/u)),v=Math.abs(g)<5;r||(r=v?Dr.restSpeed.granular:Dr.restSpeed.default),s||(s=v?Dr.restDelta.granular:Dr.restDelta.default);let w;if(m<1){const S=SI(b,m);w=E=>{const k=Math.exp(-m*b*E);return o-k*((p+m*b*g)/S*Math.sin(S*E)+g*Math.cos(S*E))}}else if(m===1)w=S=>o-Math.exp(-b*S)*(g+(p+b*g)*S);else{const S=b*Math.sqrt(m*m-1);w=E=>{const k=Math.exp(-m*b*E),x=Math.min(S*E,300);return o-k*((p+m*b*g)*Math.sinh(x)+S*g*Math.cosh(x))/S}}const _={calculatedDuration:f&&d||null,next:S=>{const E=w(S);if(f)a.done=S>=d;else{let k=0;m<1&&(k=S===0?Sc(p):bJ(w,S,E));const x=Math.abs(k)<=r,I=Math.abs(o-E)<=s;a.done=x&&I}return a.value=a.done?o:E,a},toString:()=>{const S=Math.min(ND(_),wE),E=MY(k=>_.next(S*k).value,S,30);return S+"ms "+E}};return _}function lB({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=x=>a!==void 0&&x<a||l!==void 0&&x>l,p=x=>a===void 0?l:l===void 0||Math.abs(a-x)<Math.abs(l-x)?a:l;let m=n*e;const g=d+m,b=o===void 0?g:o(g);b!==g&&(m=b-d);const v=x=>-m*Math.exp(-x/r),w=x=>b+v(x),_=x=>{const I=v(x),R=w(x);h.done=Math.abs(I)<=c,h.value=h.done?b:R};let S,E;const k=x=>{f(h.value)&&(S=x,E=HD({keyframes:[h.value,p(h.value)],velocity:bJ(w,x,h.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:x=>{let I=!1;return!E&&S===void 0&&(I=!0,_(x),k(x)),S!==void 0&&x>=S?E.next(x-S):(!I&&_(x),h)}}}const J1e=Op(.42,0,1,1),X1e=Op(0,0,.58,1),yJ=Op(.42,0,.58,1),vJ=t=>Array.isArray(t)&&typeof t[0]!="number",Z1e={linear:Ho,easeIn:J1e,easeInOut:yJ,easeOut:X1e,circIn:MD,circInOut:QY,circOut:ZY,backIn:DD,backInOut:JY,backOut:YY,anticipate:XY},cB=t=>{if(ID(t)){mY(t.length===4);const[e,n,r,s]=t;return Op(e,n,r,s)}else if(typeof t=="string")return Z1e[t];return t};function Q1e(t,e,n){const r=[],s=n||gJ,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ho:e;a=Ow(l,a)}r.push(a)}return r}function ewe(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(mY(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Q1e(e,r,s),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=ap(t[d],t[d+1],u);return a[d](h)};return n?u=>c(Bu(t[0],t[i-1],u)):c}function wJ(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=ap(0,e,r);t.push(Sr(n,1,s))}}function xJ(t){const e=[0];return wJ(e,t.length-1),e}function twe(t,e){return t.map(n=>n*e)}function nwe(t,e){return t.map(()=>e||yJ).splice(0,t.length-1)}function SE({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=vJ(r)?r.map(cB):cB(r),i={done:!1,value:e[0]},o=twe(n&&n.length===e.length?n:xJ(e),t),a=ewe(o,e,{ease:Array.isArray(s)?s:nwe(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const rwe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>vr.update(e,!0),stop:()=>rh(e),now:()=>Hs.isProcessing?Hs.timestamp:Cc.now()}},swe={decay:lB,inertia:lB,tween:SE,keyframes:SE,spring:HD},iwe=t=>t/100;class zD extends pJ{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=s?.KeyframeResolver||$D,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=rA(n)?n:swe[n]||SE;let l,c;a!==SE&&typeof e[0]!="number"&&(l=Ow(iwe,gJ(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=ND(u));const{calculatedDuration:d}=u,h=d+s,f=h*(r+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:x}=this.options;return{done:!0,value:x[x.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return i.next(0);const{delay:h,repeat:f,repeatType:p,repeatDelay:m,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-h*(this.speed>=0?1:-1),v=this.speed>=0?b<0:b>u;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let w=this.currentTime,_=i;if(f){const x=Math.min(this.currentTime,u)/d;let I=Math.floor(x),R=x%1;!R&&x>=1&&(R=1),R===1&&I--,I=Math.min(I,f+1),!!(I%2)&&(p==="reverse"?(R=1-R,m&&(R-=m/d)):p==="mirror"&&(_=o)),w=Bu(0,1,R)*d}const S=v?{done:!1,value:l[0]}:_.next(w);a&&(S.value=a(S.value));let{done:E}=S;!v&&c!==null&&(E=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return k&&s!==void 0&&(S.value=iA(l,this.options,s)),g&&g(S.value),k&&this.finish(),S}get duration(){const{resolved:e}=this;return e?Ec(e.calculatedDuration):0}get time(){return Ec(this.currentTime)}set time(e){e=Sc(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ec(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=rwe,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const owe=new Set(["opacity","clipPath","filter","transform"]);function awe(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=FY(a,s);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const lwe=mD(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),EE=10,cwe=2e4;function uwe(t){return rA(t.type)||t.type==="spring"||!jY(t.ease)}function dwe(t,e){const n=new zD({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<cwe;)r=n.sample(i),s.push(r.value),i+=EE;return{times:void 0,keyframes:s,duration:i-EE,ease:"linear"}}const _J={anticipate:XY,backInOut:JY,circInOut:QY};function hwe(t){return t in _J}class uB extends pJ{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new fJ(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&xE()&&hwe(i)&&(i=_J[i]),uwe(this.options)){const{onComplete:d,onUpdate:h,motionValue:f,element:p,...m}=this.options,g=dwe(e,m);e=g.keyframes,e.length===1&&(e[1]=e[0]),r=g.duration,s=g.times,i=g.ease,o="keyframes"}const u=awe(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(qF(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(iA(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ec(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ec(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Sc(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ho;const{animation:r}=n;qF(r,e)}return Ho}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:h,...f}=this.options,p=new zD({...f,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),m=Sc(this.time);c.setWithVelocity(p.sample(m-EE).value,p.sample(m).value,EE)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return lwe()&&r&&owe.has(r)&&!l&&!c&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const fwe={type:"spring",stiffness:500,damping:25,restSpeed:10},pwe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),mwe={type:"keyframes",duration:.8},gwe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bwe=(t,{keyframes:e})=>e.length>2?mwe:Rp.has(t)?t.startsWith("scale")?pwe(e[1]):fwe:gwe;function ywe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const VD=(t,e,n,r={},s,i)=>o=>{const a=PD(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Sc(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};ywe(a)||(u={...u,...bwe(t,u)}),u.duration&&(u.duration=Sc(u.duration)),u.repeatDelay&&(u.repeatDelay=Sc(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!i&&e.get()!==void 0){const h=iA(u.keyframes,a);if(h!==void 0)return vr.update(()=>{u.onUpdate(h),u.onComplete()}),new DY([])}return!i&&uB.supports(u)?new uB(u):new zD(u)};function vwe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function WD(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const h=t.getValue(d,(i=t.latestValues[d])!==null&&i!==void 0?i:null),f=l[d];if(f===void 0||u&&vwe(u,d))continue;const p={delay:n,...PD(o||{},d)};let m=!1;if(window.MotionHandoffAnimation){const b=WY(t);if(b){const v=window.MotionHandoffAnimation(b,d,vr);v!==null&&(p.startTime=v,m=!0)}}bI(t,d),h.start(VD(d,h,f,t.shouldReduceMotion&&zY.has(d)?{type:!1}:p,t,m));const g=h.animation;g&&c.push(g)}return a&&Promise.all(c).then(()=>{vr.update(()=>{a&&e1e(t,a)})}),c}function EI(t,e,n={}){var r;const s=nA(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(WD(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return wwe(t,e,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function wwe(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(xwe).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(EI(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function xwe(t,e){return t.sortNodePosition(e)}function _we(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>EI(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=EI(t,e,n);else{const s=typeof e=="function"?nA(t,e,n.custom):e;r=Promise.all(WD(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Swe=bD.length;function SJ(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?SJ(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Swe;n++){const r=bD[n],s=t.props[r];(a1(s)||s===!1)&&(e[r]=s)}return e}const Ewe=[...gD].reverse(),kwe=gD.length;function Cwe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>_we(t,n,r)))}function Awe(t){let e=Cwe(t),n=dB(),r=!0;const s=l=>(c,u)=>{var d;const h=nA(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:p,...m}=h;c={...c,...m,...p}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,u=SJ(t.parent)||{},d=[],h=new Set;let f={},p=1/0;for(let g=0;g<kwe;g++){const b=Ewe[g],v=n[b],w=c[b]!==void 0?c[b]:u[b],_=a1(w),S=b===l?v.isActive:null;S===!1&&(p=g);let E=w===u[b]&&w!==c[b]&&_;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),v.protectedKeys={...f},!v.isActive&&S===null||!w&&!v.prevProp||eA(w)||typeof w=="boolean")continue;const k=Twe(v.prevProp,w);let x=k||b===l&&v.isActive&&!E&&_||g>p&&_,I=!1;const R=Array.isArray(w)?w:[w];let C=R.reduce(s(b),{});S===!1&&(C={});const{prevResolvedValues:T={}}=v,O={...T,...C},P=X=>{x=!0,h.has(X)&&(I=!0,h.delete(X)),v.needsAnimating[X]=!0;const Z=t.getValue(X);Z&&(Z.liveStyle=!1)};for(const X in O){const Z=C[X],F=T[X];if(f.hasOwnProperty(X))continue;let M=!1;mI(Z)&&mI(F)?M=!LY(Z,F):M=Z!==F,M?Z!=null?P(X):h.add(X):Z!==void 0&&h.has(X)?P(X):v.protectedKeys[X]=!0}v.prevProp=w,v.prevResolvedValues=C,v.isActive&&(f={...f,...C}),r&&t.blockInitialAnimation&&(x=!1),x&&(!(E&&k)||I)&&d.push(...R.map(X=>({animation:X,options:{type:b}})))}if(h.size){const g={};h.forEach(b=>{const v=t.getBaseTarget(b),w=t.getValue(b);w&&(w.liveStyle=!0),g[b]=v??null}),d.push({animation:g})}let m=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var f;return(f=h.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=dB(),r=!0}}}function Twe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!LY(e,t):!1}function Xh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dB(){return{animate:Xh(!0),whileInView:Xh(),whileHover:Xh(),whileTap:Xh(),whileDrag:Xh(),whileFocus:Xh(),exit:Xh()}}class Nh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Pwe extends Nh{constructor(e){super(e),e.animationState||(e.animationState=Awe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();eA(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Nwe=0;class Iwe extends Nh{constructor(){super(...arguments),this.id=Nwe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Rwe={animation:{Feature:Pwe},exit:{Feature:Iwe}};function d1(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Lw(t){return{point:{x:t.pageX,y:t.pageY}}}const Owe=t=>e=>RD(e)&&t(e,Lw(e));function pv(t,e,n,r){return d1(t,e,Owe(n),r)}const hB=(t,e)=>Math.abs(t-e);function Lwe(t,e){const n=hB(t.x,e.x),r=hB(t.y,e.y);return Math.sqrt(n**2+r**2)}class EJ{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=G5(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=Lwe(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:p}=d,{timestamp:m}=Hs;this.history.push({...p,timestamp:m});const{onStart:g,onMove:b}=this.handlers;h||(g&&g(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=W5(h,this.transformPagePoint),vr.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=G5(d.type==="pointercancel"?this.lastMoveEventInfo:W5(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,g),p&&p(d,g)},!RD(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Lw(e),a=W5(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Hs;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,G5(a,this.history)),this.removeListeners=Ow(pv(this.contextWindow,"pointermove",this.handlePointerMove),pv(this.contextWindow,"pointerup",this.handlePointerUp),pv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),rh(this.updatePoint)}}function W5(t,e){return e?{point:e(t.point)}:t}function fB(t,e){return{x:t.x-e.x,y:t.y-e.y}}function G5({point:t},e){return{point:t,delta:fB(t,kJ(e)),offset:fB(t,Dwe(e)),velocity:Mwe(e,.1)}}function Dwe(t){return t[0]}function kJ(t){return t[t.length-1]}function Mwe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=kJ(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Sc(e)));)n--;if(!r)return{x:0,y:0};const i=Ec(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const CJ=1e-4,jwe=1-CJ,Fwe=1+CJ,AJ=.01,Bwe=0-AJ,$we=0+AJ;function Wo(t){return t.max-t.min}function Uwe(t,e,n){return Math.abs(t-e)<=n}function pB(t,e,n,r=.5){t.origin=r,t.originPoint=Sr(e.min,e.max,t.origin),t.scale=Wo(n)/Wo(e),t.translate=Sr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=jwe&&t.scale<=Fwe||isNaN(t.scale))&&(t.scale=1),(t.translate>=Bwe&&t.translate<=$we||isNaN(t.translate))&&(t.translate=0)}function mv(t,e,n,r){pB(t.x,e.x,n.x,r?r.originX:void 0),pB(t.y,e.y,n.y,r?r.originY:void 0)}function mB(t,e,n){t.min=n.min+e.min,t.max=t.min+Wo(e)}function Hwe(t,e,n){mB(t.x,e.x,n.x),mB(t.y,e.y,n.y)}function gB(t,e,n){t.min=e.min-n.min,t.max=t.min+Wo(e)}function gv(t,e,n){gB(t.x,e.x,n.x),gB(t.y,e.y,n.y)}function zwe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Sr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Sr(n,t,r.max):Math.min(t,n)),t}function bB(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Vwe(t,{top:e,left:n,bottom:r,right:s}){return{x:bB(t.x,n,s),y:bB(t.y,e,r)}}function yB(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Wwe(t,e){return{x:yB(t.x,e.x),y:yB(t.y,e.y)}}function Gwe(t,e){let n=.5;const r=Wo(t),s=Wo(e);return s>r?n=ap(e.min,e.max-r,t.min):r>s&&(n=ap(t.min,t.max-s,e.min)),Bu(0,1,n)}function qwe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const kI=.35;function Kwe(t=kI){return t===!1?t=0:t===!0&&(t=kI),{x:vB(t,"left","right"),y:vB(t,"top","bottom")}}function vB(t,e,n){return{min:wB(t,e),max:wB(t,n)}}function wB(t,e){return typeof t=="number"?t:t[e]||0}const xB=()=>({translate:0,scale:1,origin:0,originPoint:0}),sg=()=>({x:xB(),y:xB()}),_B=()=>({min:0,max:0}),Or=()=>({x:_B(),y:_B()});function ca(t){return[t("x"),t("y")]}function TJ({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Ywe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Jwe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function q5(t){return t===void 0||t===1}function CI({scale:t,scaleX:e,scaleY:n}){return!q5(t)||!q5(e)||!q5(n)}function cf(t){return CI(t)||PJ(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function PJ(t){return SB(t.x)||SB(t.y)}function SB(t){return t&&t!=="0%"}function kE(t,e,n){const r=t-n,s=e*r;return n+s}function EB(t,e,n,r,s){return s!==void 0&&(t=kE(t,s,r)),kE(t,n,r)+e}function AI(t,e=0,n=1,r,s){t.min=EB(t.min,e,n,r,s),t.max=EB(t.max,e,n,r,s)}function NJ(t,{x:e,y:n}){AI(t.x,e.translate,e.scale,e.originPoint),AI(t.y,n.translate,n.scale,n.originPoint)}const kB=.999999999999,CB=1.0000000000001;function Xwe(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&og(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,NJ(t,o)),r&&cf(i.latestValues)&&og(t,i.latestValues))}e.x<CB&&e.x>kB&&(e.x=1),e.y<CB&&e.y>kB&&(e.y=1)}function ig(t,e){t.min=t.min+e,t.max=t.max+e}function AB(t,e,n,r,s=.5){const i=Sr(t.min,t.max,s);AI(t,e,n,i,r)}function og(t,e){AB(t.x,e.x,e.scaleX,e.scale,e.originX),AB(t.y,e.y,e.scaleY,e.scale,e.originY)}function IJ(t,e){return TJ(Jwe(t.getBoundingClientRect(),e))}function Zwe(t,e,n){const r=IJ(t,n),{scroll:s}=e;return s&&(ig(r.x,s.offset.x),ig(r.y,s.offset.y)),r}const RJ=({current:t})=>t?t.ownerDocument.defaultView:null,Qwe=new WeakMap;class exe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Or(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Lw(u).point)},i=(u,d)=>{const{drag:h,dragPropagation:f,onDragStart:p}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Yve(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ca(g=>{let b=this.getAxisMotionValue(g).get()||0;if(kc.test(b)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[g];w&&(b=Wo(w)*(parseFloat(b)/100))}}this.originPoint[g]=b}),p&&vr.postRender(()=>p(u,d)),bI(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:p,onDrag:m}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:g}=d;if(f&&this.currentDirection===null){this.currentDirection=txe(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),m&&m(u,d)},a=(u,d)=>this.stop(u,d),l=()=>ca(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new EJ(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:RJ(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&vr.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!M_(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=zwe(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&ng(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=Vwe(s.layoutBox,n):this.constraints=!1,this.elastic=Kwe(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&ca(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=qwe(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ng(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Zwe(r,s.root,this.visualElement.getTransformPagePoint());let o=Wwe(s.layout.layoutBox,i);if(n){const a=n(Ywe(o));this.hasMutatedConstraints=!!a,a&&(o=TJ(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ca(u=>{if(!M_(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=s?200:1e6,f=s?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return bI(this.visualElement,e),r.start(VD(e,r,0,n,this.visualElement,!1))}stopAnimation(){ca(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ca(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ca(n=>{const{drag:r}=this.getProps();if(!M_(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Sr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ng(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ca(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=Gwe({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ca(o=>{if(!M_(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Sr(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;Qwe.set(this.visualElement,this);const e=this.visualElement.current,n=pv(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ng(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),vr.read(r);const o=d1(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ca(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=kI,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function M_(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function txe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class nxe extends Nh{constructor(e){super(e),this.removeGroupControls=Ho,this.removeListeners=Ho,this.controls=new exe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ho}unmount(){this.removeGroupControls(),this.removeListeners()}}const TB=t=>(e,n)=>{t&&vr.postRender(()=>t(e,n))};class rxe extends Nh{constructor(){super(...arguments),this.removePointerDownListener=Ho}onPointerDown(e){this.session=new EJ(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:RJ(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:TB(e),onStart:TB(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&vr.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=pv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PS={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PB(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const oy={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Gt.test(t))t=parseFloat(t);else return t;const n=PB(t,e.target.x),r=PB(t,e.target.y);return`${n}% ${r}%`}},sxe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=sh.parse(t);if(s.length>5)return r;const i=sh.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Sr(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class ixe extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;Pve(oxe),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),PS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||vr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),vD.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function OJ(t){const[e,n]=fY(),r=N.useContext(hD);return y.jsx(ixe,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(xY),isPresent:e,safeToRemove:n})}const oxe={borderRadius:{...oy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:oy,borderTopRightRadius:oy,borderBottomLeftRadius:oy,borderBottomRightRadius:oy,boxShadow:sxe};function LJ(t,e,n){const r=Ns(t)?t:c1(t);return r.start(VD("",r,e,n)),r.animation}function DJ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const axe=(t,e)=>t.depth-e.depth;class lxe{constructor(){this.children=[],this.isDirty=!1}add(e){OD(this.children,e),this.isDirty=!0}remove(e){sA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(axe),this.isDirty=!1,this.children.forEach(e)}}function cxe(t,e){const n=Cc.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(rh(r),t(i-e))};return vr.read(r,!0),()=>rh(r)}const MJ=["TopLeft","TopRight","BottomLeft","BottomRight"],uxe=MJ.length,NB=t=>typeof t=="string"?parseFloat(t):t,IB=t=>typeof t=="number"||Gt.test(t);function dxe(t,e,n,r,s,i){s?(t.opacity=Sr(0,n.opacity!==void 0?n.opacity:1,hxe(r)),t.opacityExit=Sr(e.opacity!==void 0?e.opacity:1,0,fxe(r))):i&&(t.opacity=Sr(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<uxe;o++){const a=`border${MJ[o]}Radius`;let l=RB(e,a),c=RB(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||IB(l)===IB(c)?(t[a]=Math.max(Sr(NB(l),NB(c),r),0),(kc.test(c)||kc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Sr(e.rotate||0,n.rotate||0,r))}function RB(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const hxe=jJ(0,.5,ZY),fxe=jJ(.5,.95,Ho);function jJ(t,e,n){return r=>r<t?0:r>e?1:n(ap(t,e,r))}function OB(t,e){t.min=e.min,t.max=e.max}function oa(t,e){OB(t.x,e.x),OB(t.y,e.y)}function LB(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function DB(t,e,n,r,s){return t-=e,t=kE(t,1/n,r),s!==void 0&&(t=kE(t,1/s,r)),t}function pxe(t,e=0,n=1,r=.5,s,i=t,o=t){if(kc.test(e)&&(e=parseFloat(e),e=Sr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Sr(i.min,i.max,r);t===i&&(a-=e),t.min=DB(t.min,e,n,a,s),t.max=DB(t.max,e,n,a,s)}function MB(t,e,[n,r,s],i,o){pxe(t,e[n],e[r],e[s],e.scale,i,o)}const mxe=["x","scaleX","originX"],gxe=["y","scaleY","originY"];function jB(t,e,n,r){MB(t.x,e,mxe,n?n.x:void 0,r?r.x:void 0),MB(t.y,e,gxe,n?n.y:void 0,r?r.y:void 0)}function FB(t){return t.translate===0&&t.scale===1}function FJ(t){return FB(t.x)&&FB(t.y)}function BB(t,e){return t.min===e.min&&t.max===e.max}function bxe(t,e){return BB(t.x,e.x)&&BB(t.y,e.y)}function $B(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function BJ(t,e){return $B(t.x,e.x)&&$B(t.y,e.y)}function UB(t){return Wo(t.x)/Wo(t.y)}function HB(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class yxe{constructor(){this.members=[]}add(e){OD(this.members,e),e.scheduleRender()}remove(e){if(sA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vxe(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=n?.z||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:f,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const uf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},zy=typeof window<"u"&&window.MotionDebug!==void 0,K5=["","X","Y","Z"],wxe={visibility:"hidden"},zB=1e3;let xxe=0;function Y5(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function $J(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=WY(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",vr,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&$J(r)}function UJ({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e?.()){this.id=xxe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,zy&&(uf.totalNodes=uf.resolvedTargetDeltas=uf.recalculatedProjection=0),this.nodes.forEach(Exe),this.nodes.forEach(Pxe),this.nodes.forEach(Nxe),this.nodes.forEach(kxe),zy&&window.MotionDebug.record(uf)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new lxe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new LD),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=DJ(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=cxe(h,250),PS.hasAnimatedSinceResize&&(PS.hasAnimatedSinceResize=!1,this.nodes.forEach(WB))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||Dxe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=u.getProps(),v=!this.targetLayout||!BJ(this.targetLayout,p)||f,w=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const _={...PD(m,"layout"),onPlay:g,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else h||WB(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,rh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ixe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$J(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(VB);return}this.isUpdating||this.nodes.forEach(Axe),this.isUpdating=!1,this.nodes.forEach(Txe),this.nodes.forEach(_xe),this.nodes.forEach(Sxe),this.clearAllSnapshots();const a=Cc.now();Hs.delta=Bu(0,1e3/60,a-Hs.timestamp),Hs.timestamp=a,Hs.isProcessing=!0,$5.update.process(Hs),$5.preRender.process(Hs),$5.render.process(Hs),Hs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vD.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Cxe),this.sharedNodes.forEach(Rxe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Or(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!FJ(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||cf(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Mxe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Or();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(jxe))){const{scroll:u}=this.root;u&&(ig(l.x,u.offset.x),ig(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Or();if(oa(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&oa(l,o),ig(l.x,d.offset.x),ig(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Or();oa(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&og(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),cf(u.latestValues)&&og(l,u.latestValues)}return cf(this.latestValues)&&og(l,this.latestValues),l}removeTransform(o){const a=Or();oa(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!cf(c.latestValues))continue;CI(c.latestValues)&&c.updateSnapshot();const u=Or(),d=c.measurePageBox();oa(u,d),jB(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return cf(this.latestValues)&&jB(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Hs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Hs.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Or(),this.relativeTargetOrigin=Or(),gv(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),oa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Or(),this.targetWithTransforms=Or()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hwe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):oa(this.target,this.layout.layoutBox),NJ(this.target,this.targetDelta)):oa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Or(),this.relativeTargetOrigin=Or(),gv(this.relativeTargetOrigin,this.target,f.target),oa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}zy&&uf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||CI(this.parent.latestValues)||PJ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Hs.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;oa(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Xwe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Or());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LB(this.prevProjectionDelta.x,this.projectionDelta.x),LB(this.prevProjectionDelta.y,this.projectionDelta.y)),mv(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!HB(this.projectionDelta.x,this.prevProjectionDelta.x)||!HB(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),zy&&uf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sg(),this.projectionDelta=sg(),this.projectionDeltaWithTransform=sg()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=sg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Or(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,g=this.getStack(),b=!g||g.members.length<=1,v=!!(m&&!b&&this.options.crossfade===!0&&!this.path.some(Lxe));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const S=_/1e3;GB(d.x,o.x,S),GB(d.y,o.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gv(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Oxe(this.relativeTarget,this.relativeTargetOrigin,h,S),w&&bxe(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Or()),oa(w,this.relativeTarget)),m&&(this.animationValues=u,dxe(u,c,this.latestValues,S,v,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(rh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vr.update(()=>{PS.hasAnimatedSinceResize=!0,this.currentAnimation=LJ(0,zB,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&HJ(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Or();const d=Wo(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=Wo(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}oa(a,l),og(a,u),mv(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new yxe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Y5("z",o,c,this.animationValues);for(let u=0;u<K5.length;u++)Y5(`rotate${K5[u]}`,o,c,this.animationValues),Y5(`skew${K5[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return wxe;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=AS(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=AS(o?.pointerEvents)||""),this.hasProjected&&!cf(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=vxe(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:f,y:p}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const m in vE){if(h[m]===void 0)continue;const{correct:g,applyTo:b}=vE[m],v=c.transform==="none"?h[m]:g(h[m],d);if(b){const w=b.length;for(let _=0;_<w;_++)c[b[_]]=v}else c[m]=v}return this.options.layoutId&&(c.pointerEvents=d===this?AS(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(VB),this.root.sharedNodes.clear()}}}function _xe(t){t.updateLayout()}function Sxe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?ca(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],f=Wo(h);h.min=r[d].min,h.max=h.min+f}):HJ(i,n.layoutBox,r)&&ca(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],f=Wo(r[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const a=sg();mv(a,r,n.layoutBox);const l=sg();o?mv(l,t.applyTransform(s,!0),n.measuredBox):mv(l,r,n.layoutBox);const c=!FJ(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const p=Or();gv(p,n.layoutBox,h.layoutBox);const m=Or();gv(m,r,f.layoutBox),BJ(p,m)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Exe(t){zy&&uf.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function kxe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Cxe(t){t.clearSnapshot()}function VB(t){t.clearMeasurements()}function Axe(t){t.isLayoutDirty=!1}function Txe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function WB(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Pxe(t){t.resolveTargetDelta()}function Nxe(t){t.calcProjection()}function Ixe(t){t.resetSkewAndRotation()}function Rxe(t){t.removeLeadSnapshot()}function GB(t,e,n){t.translate=Sr(e.translate,0,n),t.scale=Sr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qB(t,e,n,r){t.min=Sr(e.min,n.min,r),t.max=Sr(e.max,n.max,r)}function Oxe(t,e,n,r){qB(t.x,e.x,n.x,r),qB(t.y,e.y,n.y,r)}function Lxe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Dxe={duration:.45,ease:[.4,0,.1,1]},KB=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),YB=KB("applewebkit/")&&!KB("chrome/")?Math.round:Ho;function JB(t){t.min=YB(t.min),t.max=YB(t.max)}function Mxe(t){JB(t.x),JB(t.y)}function HJ(t,e,n){return t==="position"||t==="preserve-aspect"&&!Uwe(UB(e),UB(n),.2)}function jxe(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Fxe=UJ({attachResizeListener:(t,e)=>d1(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),J5={current:void 0},zJ=UJ({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!J5.current){const t=new Fxe({});t.mount(window),t.setOptions({layoutScroll:!0}),J5.current=t}return J5.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Bxe={pan:{Feature:rxe},drag:{Feature:nxe,ProjectionNode:zJ,MeasureLayout:OJ}};function XB(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&vr.postRender(()=>i(e,Lw(e)))}class $xe extends Nh{mount(){const{current:e}=this.node;e&&(this.unmount=Vve(e,n=>(XB(this.node,n,"Start"),r=>XB(this.node,r,"End"))))}unmount(){}}class Uxe extends Nh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ow(d1(this.node.current,"focus",()=>this.onFocus()),d1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ZB(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&vr.postRender(()=>i(e,Lw(e)))}class Hxe extends Nh{mount(){const{current:e}=this.node;e&&(this.unmount=Kve(e,n=>(ZB(this.node,n,"Start"),(r,{success:s})=>ZB(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const TI=new WeakMap,X5=new WeakMap,zxe=t=>{const e=TI.get(t.target);e&&e(t)},Vxe=t=>{t.forEach(zxe)};function Wxe({root:t,...e}){const n=t||document;X5.has(n)||X5.set(n,{});const r=X5.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Vxe,{root:t,...e})),r[s]}function Gxe(t,e,n){const r=Wxe(e);return TI.set(t,n),r.observe(t),()=>{TI.delete(t),r.unobserve(t)}}const qxe={some:0,all:1};class Kxe extends Nh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:qxe[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return Gxe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Yxe(e,n))&&this.startObserver()}unmount(){}}function Yxe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Jxe={inView:{Feature:Kxe},tap:{Feature:Hxe},focus:{Feature:Uxe},hover:{Feature:$xe}},Xxe={layout:{ProjectionNode:zJ,MeasureLayout:OJ}},PI={current:null},VJ={current:!1};function Zxe(){if(VJ.current=!0,!!pD)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>PI.current=t.matches;t.addListener(e),e()}else PI.current=!1}const Qxe=[...hJ,ai,sh],e_e=t=>Qxe.find(dJ(t)),Qg=new WeakMap;function t_e(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Ns(s))t.addValue(r,s);else if(Ns(i))t.addValue(r,c1(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,c1(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const QB=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class WJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$D,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Cc.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,vr.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=tA(n),this.isVariantNode=vY(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&Ns(p)&&p.set(l[f],!1)}}mount(e){this.current=e,Qg.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),VJ.current||Zxe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:PI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Qg.delete(this.current),this.projection&&this.projection.unmount(),rh(this.notifyUpdate),rh(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Rp.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&vr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Xg){const n=Xg[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Or()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<QB.length;r++){const s=QB[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=t_e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=c1(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(cJ(s)||eJ(s))?s=parseFloat(s):!e_e(s)&&sh.test(n)&&(s=oJ(e,n)),this.setBaseTarget(e,Ns(s)?s.get():s)),Ns(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=xD(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ns(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new LD),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class GJ extends WJ{constructor(){super(...arguments),this.KeyframeResolver=fJ}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ns(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function n_e(t){return window.getComputedStyle(t)}class qJ extends GJ{constructor(){super(...arguments),this.type="html",this.renderInstance=TY}readValueFromInstance(e,n){if(Rp.has(n)){const r=BD(n);return r&&r.default||0}else{const r=n_e(e),s=(kY(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return IJ(e,n)}build(e,n,r){ED(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return TD(e,n,r)}}class KJ extends GJ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Or}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Rp.has(n)){const r=BD(n);return r&&r.default||0}return n=PY.has(n)?n:yD(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return RY(e,n,r)}build(e,n,r){kD(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){NY(e,n,r,s)}mount(e){this.isSVGTag=AD(e.tagName),super.mount(e)}}const r_e=(t,e)=>wD(t)?new KJ(e):new qJ(e,{allowProjection:t!==N.Fragment}),s_e=Fve({...Rwe,...Jxe,...Bxe,...Xxe},r_e),lt=Qye(s_e);function i_e(t){return N.useEffect(()=>()=>t(),[])}const o_e=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function YJ(t,e){return vJ(t)?t[o_e(0,t.length,e)]:t}function GD(t){return typeof t=="object"&&!Array.isArray(t)}function JJ(t,e,n,r){return typeof t=="string"&&GD(e)?$Y(t,n,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function a_e(t,e,n){return t*(e+1)}function e7(t,e,n,r){var s;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(s=r.get(e))!==null&&s!==void 0?s:t}function l_e(t,e,n){for(let r=0;r<t.length;r++){const s=t[r];s.at>e&&s.at<n&&(sA(t,s),r--)}}function c_e(t,e,n,r,s,i){l_e(t,s,i);for(let o=0;o<e.length;o++)t.push({value:e[o],at:Sr(s,i,r[o]),easing:YJ(n,o)})}function u_e(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function d_e(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const h_e="easeInOut";function f_e(t,{defaultTransition:e={},...n}={},r,s){const i=e.duration||.3,o=new Map,a=new Map,l={},c=new Map;let u=0,d=0,h=0;for(let f=0;f<t.length;f++){const p=t[f];if(typeof p=="string"){c.set(p,d);continue}else if(!Array.isArray(p)){c.set(p.name,e7(d,p.at,u,c));continue}let[m,g,b={}]=p;b.at!==void 0&&(d=e7(d,b.at,u,c));let v=0;const w=(_,S,E,k=0,x=0)=>{const I=p_e(_),{delay:R=0,times:C=xJ(I),type:T="keyframes",repeat:O,repeatType:P,repeatDelay:U=0,...ee}=S;let{ease:X=e.ease||"easeOut",duration:Z}=S;const F=typeof R=="function"?R(k,x):R,M=I.length,G=rA(T)?T:s?.[T];if(M<=2&&G){let q=100;if(M===2&&b_e(I)){const Y=I[1]-I[0];q=Math.abs(Y)}const ne={...ee};Z!==void 0&&(ne.duration=Sc(Z));const te=Uve(ne,q,G);X=te.ease,Z=te.duration}Z??(Z=i);const D=d+F;C.length===1&&C[0]===0&&(C[1]=1);const j=C.length-I.length;if(j>0&&wJ(C,j),I.length===1&&I.unshift(null),O){Z=a_e(Z,O);const q=[...I],ne=[...C];X=Array.isArray(X)?[...X]:[X];const te=[...X];for(let Y=0;Y<O;Y++){I.push(...q);for(let de=0;de<q.length;de++)C.push(ne[de]+(Y+1)),X.push(de===0?"linear":YJ(te,de-1))}u_e(C,O)}const W=D+Z;c_e(E,I,X,C,D,W),v=Math.max(F+Z,v),h=Math.max(W,h)};if(Ns(m)){const _=t7(m,a);w(g,b,n7("default",_))}else{const _=JJ(m,g,r,l),S=_.length;for(let E=0;E<S;E++){g=g,b=b;const k=_[E],x=t7(k,a);for(const I in g)w(g[I],m_e(b,I),n7(I,x),E,S)}}u=d,d+=v}return a.forEach((f,p)=>{for(const m in f){const g=f[m];g.sort(d_e);const b=[],v=[],w=[];for(let S=0;S<g.length;S++){const{at:E,value:k,easing:x}=g[S];b.push(k),v.push(ap(0,h,E)),w.push(x||"easeOut")}v[0]!==0&&(v.unshift(0),b.unshift(b[0]),w.unshift(h_e)),v[v.length-1]!==1&&(v.push(1),b.push(null)),o.has(p)||o.set(p,{keyframes:{},transition:{}});const _=o.get(p);_.keyframes[m]=b,_.transition[m]={...e,duration:h,ease:w,times:v,...n}}}),o}function t7(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function n7(t,e){return e[t]||(e[t]=[]),e[t]}function p_e(t){return Array.isArray(t)?t:[t]}function m_e(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const g_e=t=>typeof t=="number",b_e=t=>t.every(g_e);function y_e(t,e){return t in e}class v_e extends WJ{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(y_e(n,e)){const r=e[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return Or()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function w_e(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=DJ(t)?new KJ(e):new qJ(e);n.mount(t),Qg.set(t,n)}function x_e(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new v_e(e);n.mount(t),Qg.set(t,n)}function __e(t,e){return Ns(t)||typeof t=="number"||typeof t=="string"&&!GD(e)}function XJ(t,e,n,r){const s=[];if(__e(t,e))s.push(LJ(t,GD(e)&&e.default||e,n&&(n.default||n)));else{const i=JJ(t,e,r),o=i.length;for(let a=0;a<o;a++){const l=i[a],c=l instanceof Element?w_e:x_e;Qg.has(l)||c(l);const u=Qg.get(l),d={...n};"delay"in d&&typeof d.delay=="function"&&(d.delay=d.delay(a,o)),s.push(...WD(u,{...e,transition:d},{}))}}return s}function S_e(t,e,n){const r=[];return f_e(t,e,n,{spring:HD}).forEach(({keyframes:i,transition:o},a)=>{r.push(...XJ(a,i,o))}),r}function E_e(t){return Array.isArray(t)&&t.some(Array.isArray)}function k_e(t){function e(n,r,s){let i=[];E_e(n)?i=S_e(n,r,t):i=XJ(n,r,s,t);const o=new DY(i);return t&&t.animations.push(o),o}return e}function C_e(){const t=o1(()=>({current:null,animations:[]})),e=o1(()=>k_e(t));return i_e(()=>{t.animations.forEach(n=>n.stop())}),[t,e]}function ZJ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=ZJ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Nu(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=ZJ(t))&&(r&&(r+=" "),r+=e);return r}const h1=t=>typeof t=="number"&&!isNaN(t),Wf=t=>typeof t=="string",Mo=t=>typeof t=="function",NS=t=>Wf(t)||Mo(t)?t:null,NI=t=>N.isValidElement(t)||Wf(t)||Mo(t)||h1(t);function A_e(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function Dw(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:i=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:f}=o;const p=r?`${e}--${l}`:e,m=r?`${n}--${l}`:n,g=N.useRef(0);return N.useLayoutEffect(()=>{const b=d.current,v=p.split(" "),w=_=>{_.target===d.current&&(f(),b.removeEventListener("animationend",w),b.removeEventListener("animationcancel",w),g.current===0&&_.type!=="animationcancel"&&b.classList.remove(...v))};b.classList.add(...v),b.addEventListener("animationend",w),b.addEventListener("animationcancel",w)},[]),N.useEffect(()=>{const b=d.current,v=()=>{b.removeEventListener("animationend",v),s?A_e(b,u,i):u()};h||(c?v():(g.current=1,b.className+=` ${m}`,b.addEventListener("animationend",v)))},[h]),ht.createElement(ht.Fragment,null,a)}}function r7(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Ri=new Map;let f1=[];const II=new Set,T_e=t=>II.forEach(e=>e(t)),QJ=()=>Ri.size>0;function eX(t,e){var n;if(e)return!((n=Ri.get(e))==null||!n.isToastActive(t));let r=!1;return Ri.forEach(s=>{s.isToastActive(t)&&(r=!0)}),r}function tX(t,e){NI(t)&&(QJ()||f1.push({content:t,options:e}),Ri.forEach(n=>{n.buildToast(t,e)}))}function s7(t,e){Ri.forEach(n=>{e!=null&&e!=null&&e.containerId?e?.containerId===n.id&&n.toggle(t,e?.id):n.toggle(t,e?.id)})}function P_e(t){const{subscribe:e,getSnapshot:n,setProps:r}=N.useRef(function(i){const o=i.containerId||1;return{subscribe(a){const l=function(u,d,h){let f=1,p=0,m=[],g=[],b=[],v=d;const w=new Map,_=new Set,S=()=>{b=Array.from(w.values()),_.forEach(x=>x())},E=x=>{g=x==null?[]:g.filter(I=>I!==x),S()},k=x=>{const{toastId:I,onOpen:R,updateId:C,children:T}=x.props,O=C==null;x.staleId&&w.delete(x.staleId),w.set(I,x),g=[...g,x.props.toastId].filter(P=>P!==x.staleId),S(),h(r7(x,O?"added":"updated")),O&&Mo(R)&&R(N.isValidElement(T)&&T.props)};return{id:u,props:v,observe:x=>(_.add(x),()=>_.delete(x)),toggle:(x,I)=>{w.forEach(R=>{I!=null&&I!==R.props.toastId||Mo(R.toggle)&&R.toggle(x)})},removeToast:E,toasts:w,clearQueue:()=>{p-=m.length,m=[]},buildToast:(x,I)=>{if((D=>{let{containerId:j,toastId:W,updateId:q}=D;const ne=j?j!==u:u!==1,te=w.has(W)&&q==null;return ne||te})(I))return;const{toastId:R,updateId:C,data:T,staleId:O,delay:P}=I,U=()=>{E(R)},ee=C==null;ee&&p++;const X={...v,style:v.toastStyle,key:f++,...Object.fromEntries(Object.entries(I).filter(D=>{let[j,W]=D;return W!=null})),toastId:R,updateId:C,data:T,closeToast:U,isIn:!1,className:NS(I.className||v.toastClassName),bodyClassName:NS(I.bodyClassName||v.bodyClassName),progressClassName:NS(I.progressClassName||v.progressClassName),autoClose:!I.isLoading&&(Z=I.autoClose,F=v.autoClose,Z===!1||h1(Z)&&Z>0?Z:F),deleteToast(){const D=w.get(R),{onClose:j,children:W}=D.props;Mo(j)&&j(N.isValidElement(W)&&W.props),h(r7(D,"removed")),w.delete(R),p--,p<0&&(p=0),m.length>0?k(m.shift()):S()}};var Z,F;X.closeButton=v.closeButton,I.closeButton===!1||NI(I.closeButton)?X.closeButton=I.closeButton:I.closeButton===!0&&(X.closeButton=!NI(v.closeButton)||v.closeButton);let M=x;N.isValidElement(x)&&!Wf(x.type)?M=N.cloneElement(x,{closeToast:U,toastProps:X,data:T}):Mo(x)&&(M=x({closeToast:U,toastProps:X,data:T}));const G={content:M,props:X,staleId:O};v.limit&&v.limit>0&&p>v.limit&&ee?m.push(G):h1(P)?setTimeout(()=>{k(G)},P):k(G)},setProps(x){v=x},setToggle:(x,I)=>{w.get(x).toggle=I},isToastActive:x=>g.some(I=>I===x),getSnapshot:()=>b}}(o,i,T_e);Ri.set(o,l);const c=l.observe(a);return f1.forEach(u=>tX(u.content,u.options)),f1=[],()=>{c(),Ri.delete(o)}},setProps(a){var l;(l=Ri.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=Ri.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const s=N.useSyncExternalStore(e,n,n);return{getToastToRender:function(i){if(!s)return[];const o=new Map;return t.newestOnTop&&s.reverse(),s.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>i(a[0],a[1]))},isToastActive:eX,count:s?.length}}function N_e(t){const[e,n]=N.useState(!1),[r,s]=N.useState(!1),i=N.useRef(null),o=N.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:d}=t;var h,f;function p(){n(!0)}function m(){n(!1)}function g(w){const _=i.current;o.canDrag&&_&&(o.didMove=!0,e&&m(),o.delta=t.draggableDirection==="x"?w.clientX-o.start:w.clientY-o.start,o.start!==w.clientX&&(o.canCloseOnClick=!1),_.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,_.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function b(){document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",b);const w=i.current;if(o.canDrag&&o.didMove&&w){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),t.closeToast(),void t.collapseAll();w.style.transition="transform 0.2s, opacity 0.2s",w.style.removeProperty("transform"),w.style.removeProperty("opacity")}}(f=Ri.get((h={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||f.setToggle(h.id,h.fn),N.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",p),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",m)}},[t.pauseOnFocusLoss]);const v={onPointerDown:function(w){if(t.draggable===!0||t.draggable===w.pointerType){o.didMove=!1,document.addEventListener("pointermove",g),document.addEventListener("pointerup",b);const _=i.current;o.canCloseOnClick=!0,o.canDrag=!0,_.style.transition="none",t.draggableDirection==="x"?(o.start=w.clientX,o.removalDistance=_.offsetWidth*(t.draggablePercent/100)):(o.start=w.clientY,o.removalDistance=_.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(w){const{top:_,bottom:S,left:E,right:k}=i.current.getBoundingClientRect();w.nativeEvent.type!=="touchend"&&t.pauseOnHover&&w.clientX>=E&&w.clientX<=k&&w.clientY>=_&&w.clientY<=S?m():p()}};return a&&l&&(v.onMouseEnter=m,t.stacked||(v.onMouseLeave=p)),d&&(v.onClick=w=>{u&&u(w),o.canCloseOnClick&&c()}),{playToast:p,pauseToast:m,isRunning:e,preventExitTransition:r,toastRef:i,eventHandlers:v}}function I_e(t){let{delay:e,isRunning:n,closeToast:r,type:s="default",hide:i,className:o,style:a,controlledProgress:l,progress:c,rtl:u,isIn:d,theme:h}=t;const f=i||l&&c===0,p={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(p.transform=`scaleX(${c})`);const m=Nu("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":u}),g=Mo(o)?o({rtl:u,type:s,defaultClassName:m}):Nu(m,o),b={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&r()}};return ht.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},ht.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${s}`}),ht.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:g,style:p,...b}))}let R_e=1;const nX=()=>""+R_e++;function O_e(t){return t&&(Wf(t.toastId)||h1(t.toastId))?t.toastId:nX()}function bv(t,e){return tX(t,e),e.toastId}function CE(t,e){return{...e,type:e&&e.type||t,toastId:O_e(e)}}function j_(t){return(e,n)=>bv(e,CE(t,n))}function Ve(t,e){return bv(t,CE("default",e))}Ve.loading=(t,e)=>bv(t,CE("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Ve.promise=function(t,e,n){let r,{pending:s,error:i,success:o}=e;s&&(r=Wf(s)?Ve.loading(s,n):Ve.loading(s.render,{...n,...s}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,d,h)=>{if(d==null)return void Ve.dismiss(r);const f={type:u,...a,...n,data:h},p=Wf(d)?{render:d}:d;return r?Ve.update(r,{...f,...p}):Ve(p.render,{...f,...p}),h},c=Mo(t)?t():t;return c.then(u=>l("success",o,u)).catch(u=>l("error",i,u)),c},Ve.success=j_("success"),Ve.info=j_("info"),Ve.error=j_("error"),Ve.warning=j_("warning"),Ve.warn=Ve.warning,Ve.dark=(t,e)=>bv(t,CE("default",{theme:"dark",...e})),Ve.dismiss=function(t){(function(e){var n;if(QJ()){if(e==null||Wf(n=e)||h1(n))Ri.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=Ri.get(e.containerId);r?r.removeToast(e.id):Ri.forEach(s=>{s.removeToast(e.id)})}}else f1=f1.filter(r=>e!=null&&r.options.toastId!==e)})(t)},Ve.clearWaitingQueue=function(t){t===void 0&&(t={}),Ri.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},Ve.isActive=eX,Ve.update=function(t,e){e===void 0&&(e={});const n=((r,s)=>{var i;let{containerId:o}=s;return(i=Ri.get(o||1))==null?void 0:i.toasts.get(r)})(t,e);if(n){const{props:r,content:s}=n,i={delay:100,...r,...e,toastId:e.toastId||t,updateId:nX()};i.toastId!==t&&(i.staleId=t);const o=i.render||s;delete i.render,bv(o,i)}},Ve.done=t=>{Ve.update(t,{progress:1})},Ve.onChange=function(t){return II.add(t),()=>{II.delete(t)}},Ve.play=t=>s7(!0,t),Ve.pause=t=>s7(!1,t);const L_e=typeof window<"u"?N.useLayoutEffect:N.useEffect,F_=t=>{let{theme:e,type:n,isLoading:r,...s}=t;return ht.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},Z5={info:function(t){return ht.createElement(F_,{...t},ht.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ht.createElement(F_,{...t},ht.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ht.createElement(F_,{...t},ht.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ht.createElement(F_,{...t},ht.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ht.createElement("div",{className:"Toastify__spinner"})}},D_e=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:i}=N_e(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:u,hideProgressBar:d,closeToast:h,transition:f,position:p,className:m,style:g,bodyClassName:b,bodyStyle:v,progressClassName:w,progressStyle:_,updateId:S,role:E,progress:k,rtl:x,toastId:I,deleteToast:R,isIn:C,isLoading:T,closeOnClick:O,theme:P}=t,U=Nu("Toastify__toast",`Toastify__toast-theme--${P}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":x},{"Toastify__toast--close-on-click":O}),ee=Mo(m)?m({rtl:x,position:p,type:u,defaultClassName:U}):Nu(U,m),X=function(G){let{theme:D,type:j,isLoading:W,icon:q}=G,ne=null;const te={theme:D,type:j};return q===!1||(Mo(q)?ne=q({...te,isLoading:W}):N.isValidElement(q)?ne=N.cloneElement(q,te):W?ne=Z5.spinner():(Y=>Y in Z5)(j)&&(ne=Z5[j](te))),ne}(t),Z=!!k||!l,F={closeToast:h,type:u,theme:P};let M=null;return o===!1||(M=Mo(o)?o(F):N.isValidElement(o)?N.cloneElement(o,F):function(G){let{closeToast:D,theme:j,ariaLabel:W="close"}=G;return ht.createElement("button",{className:`Toastify__close-button Toastify__close-button--${j}`,type:"button",onClick:q=>{q.stopPropagation(),D(q)},"aria-label":W},ht.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ht.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(F)),ht.createElement(f,{isIn:C,done:R,position:p,preventExitTransition:n,nodeRef:r,playToast:i},ht.createElement("div",{id:I,onClick:c,"data-in":C,className:ee,...s,style:g,ref:r},ht.createElement("div",{...C&&{role:E},className:Mo(b)?b({type:u}):Nu("Toastify__toast-body",b),style:v},X!=null&&ht.createElement("div",{className:Nu("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},X),ht.createElement("div",null,a)),M,ht.createElement(I_e,{...S&&!Z?{key:`pb-${S}`}:{},rtl:x,theme:P,delay:l,isRunning:e,isIn:C,closeToast:h,hide:d,type:u,style:_,className:w,controlledProgress:Z,progress:k||0})))},oA=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},M_e=Dw(oA("bounce",!0));Dw(oA("slide",!0));Dw(oA("zoom"));Dw(oA("flip"));const j_e={position:"top-right",transition:M_e,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function F_e(t){let e={...j_e,...t};const n=t.stacked,[r,s]=N.useState(!0),i=N.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=P_e(e),{className:c,style:u,rtl:d,containerId:h}=e;function f(m){const g=Nu("Toastify__toast-container",`Toastify__toast-container--${m}`,{"Toastify__toast-container--rtl":d});return Mo(c)?c({position:m,rtl:d,defaultClassName:g}):Nu(g,NS(c))}function p(){n&&(s(!0),Ve.play())}return L_e(()=>{if(n){var m;const g=i.current.querySelectorAll('[data-in="true"]'),b=12,v=(m=e.position)==null?void 0:m.includes("top");let w=0,_=0;Array.from(g).reverse().forEach((S,E)=>{const k=S;k.classList.add("Toastify__toast--stacked"),E>0&&(k.dataset.collapsed=`${r}`),k.dataset.pos||(k.dataset.pos=v?"top":"bot");const x=w*(r?.2:1)+(r?0:b*E);k.style.setProperty("--y",`${v?x:-1*x}px`),k.style.setProperty("--g",`${b}`),k.style.setProperty("--s",""+(1-(r?_:0))),w+=k.offsetHeight,_+=.025})}},[r,l,n]),ht.createElement("div",{ref:i,className:"Toastify",id:h,onMouseEnter:()=>{n&&(s(!1),Ve.pause())},onMouseLeave:p},o((m,g)=>{const b=g.length?{...u}:{...u,pointerEvents:"none"};return ht.createElement("div",{className:f(m),style:b,key:`container-${m}`},g.map(v=>{let{content:w,props:_}=v;return ht.createElement(D_e,{..._,stacked:n,collapseAll:p,isIn:a(_.toastId,_.containerId),style:_.style,key:`toast-${_.key}`},w)}))}))}function Mt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function i7(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function aA(...t){return e=>{let n=!1;const r=t.map(s=>{const i=i7(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():i7(t[s],null)}}}}function Jn(...t){return N.useCallback(aA(...t),t)}function B_e(t,e){const n=N.createContext(e),r=i=>{const{children:o,...a}=i,l=N.useMemo(()=>a,Object.values(a));return y.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=N.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Fa(t,e=[]){let n=[];function r(i,o){const a=N.createContext(o),l=n.length;n=[...n,o];const c=d=>{const{scope:h,children:f,...p}=d,m=h?.[t]?.[l]||a,g=N.useMemo(()=>p,Object.values(p));return y.jsx(m.Provider,{value:g,children:f})};c.displayName=i+"Provider";function u(d,h){const f=h?.[t]?.[l]||a,p=N.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>N.createContext(o));return function(a){const l=a?.[t]||i;return N.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,$_e(s,...e)]}function $_e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var $u=globalThis?.document?N.useLayoutEffect:()=>{},U_e=Yg.useId||(()=>{}),H_e=0;function Lu(t){const[e,n]=N.useState(U_e());return $u(()=>{n(r=>r??String(H_e++))},[t]),t||(e?`radix-${e}`:"")}function ps(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...n)=>e.current?.(...n),[])}function Lp({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=z_e({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=ps(n),l=N.useCallback(c=>{if(i){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[i,t,s,a]);return[o,l]}function z_e({defaultProp:t,onChange:e}){const n=N.useState(t),[r]=n,s=N.useRef(r),i=ps(e);return N.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var lp=N.forwardRef((t,e)=>{const{children:n,...r}=t,s=N.Children.toArray(n),i=s.find(V_e);if(i){const o=i.props.children,a=s.map(l=>l===i?N.Children.count(o)>1?N.Children.only(null):N.isValidElement(o)?o.props.children:null:l);return y.jsx(RI,{...r,ref:e,children:N.isValidElement(o)?N.cloneElement(o,void 0,a):null})}return y.jsx(RI,{...r,ref:e,children:n})});lp.displayName="Slot";var RI=N.forwardRef((t,e)=>{const{children:n,...r}=t;if(N.isValidElement(n)){const s=G_e(n),i=W_e(r,n.props);return n.type!==N.Fragment&&(i.ref=e?aA(e,s):s),N.cloneElement(n,i)}return N.Children.count(n)>1?N.Children.only(null):null});RI.displayName="SlotClone";var rX=({children:t})=>y.jsx(y.Fragment,{children:t});function V_e(t){return N.isValidElement(t)&&t.type===rX}function W_e(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function G_e(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var q_e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],En=q_e.reduce((t,e)=>{const n=N.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?lp:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function sX(t,e){t&&Jg.flushSync(()=>t.dispatchEvent(e))}function K_e(t,e=globalThis?.document){const n=ps(t);N.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Y_e="DismissableLayer",OI="dismissableLayer.update",J_e="dismissableLayer.pointerDownOutside",X_e="dismissableLayer.focusOutside",o7,iX=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mw=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=N.useContext(iX),[u,d]=N.useState(null),h=u?.ownerDocument??globalThis?.document,[,f]=N.useState({}),p=Jn(e,k=>d(k)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=m.indexOf(g),v=u?m.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,_=v>=b,S=e2e(k=>{const x=k.target,I=[...c.branches].some(R=>R.contains(x));!_||I||(s?.(k),o?.(k),k.defaultPrevented||a?.())},h),E=t2e(k=>{const x=k.target;[...c.branches].some(R=>R.contains(x))||(i?.(k),o?.(k),k.defaultPrevented||a?.())},h);return K_e(k=>{v===c.layers.size-1&&(r?.(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),N.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(o7=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),a7(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=o7)}},[u,h,n,c]),N.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),a7())},[u,c]),N.useEffect(()=>{const k=()=>f({});return document.addEventListener(OI,k),()=>document.removeEventListener(OI,k)},[]),y.jsx(En.div,{...l,ref:p,style:{pointerEvents:w?_?"auto":"none":void 0,...t.style},onFocusCapture:Mt(t.onFocusCapture,E.onFocusCapture),onBlurCapture:Mt(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Mt(t.onPointerDownCapture,S.onPointerDownCapture)})});Mw.displayName=Y_e;var Z_e="DismissableLayerBranch",Q_e=N.forwardRef((t,e)=>{const n=N.useContext(iX),r=N.useRef(null),s=Jn(e,r);return N.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(En.div,{...t,ref:s})});Q_e.displayName=Z_e;function e2e(t,e=globalThis?.document){const n=ps(t),r=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){oX(J_e,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function t2e(t,e=globalThis?.document){const n=ps(t),r=N.useRef(!1);return N.useEffect(()=>{const s=i=>{i.target&&!r.current&&oX(X_e,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function a7(){const t=new CustomEvent(OI);document.dispatchEvent(t)}function oX(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?sX(s,i):s.dispatchEvent(i)}var Q5="focusScope.autoFocusOnMount",e3="focusScope.autoFocusOnUnmount",l7={bubbles:!1,cancelable:!0},n2e="FocusScope",lA=N.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=N.useState(null),c=ps(s),u=ps(i),d=N.useRef(null),h=Jn(e,m=>l(m)),f=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let m=function(w){if(f.paused||!a)return;const _=w.target;a.contains(_)?d.current=_:Sd(d.current,{select:!0})},g=function(w){if(f.paused||!a)return;const _=w.relatedTarget;_!==null&&(a.contains(_)||Sd(d.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&Sd(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const v=new MutationObserver(b);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),v.disconnect()}}},[r,a,f.paused]),N.useEffect(()=>{if(a){u7.add(f);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(Q5,l7);a.addEventListener(Q5,c),a.dispatchEvent(b),b.defaultPrevented||(r2e(l2e(aX(a)),{select:!0}),document.activeElement===m&&Sd(a))}return()=>{a.removeEventListener(Q5,c),setTimeout(()=>{const b=new CustomEvent(e3,l7);a.addEventListener(e3,u),a.dispatchEvent(b),b.defaultPrevented||Sd(m??document.body,{select:!0}),a.removeEventListener(e3,u),u7.remove(f)},0)}}},[a,c,u,f]);const p=N.useCallback(m=>{if(!n&&!r||f.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(g&&b){const v=m.currentTarget,[w,_]=s2e(v);w&&_?!m.shiftKey&&b===_?(m.preventDefault(),n&&Sd(w,{select:!0})):m.shiftKey&&b===w&&(m.preventDefault(),n&&Sd(_,{select:!0})):b===v&&m.preventDefault()}},[n,r,f.paused]);return y.jsx(En.div,{tabIndex:-1,...o,ref:h,onKeyDown:p})});lA.displayName=n2e;function r2e(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Sd(r,{select:e}),document.activeElement!==n)return}function s2e(t){const e=aX(t),n=c7(e,t),r=c7(e.reverse(),t);return[n,r]}function aX(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function c7(t,e){for(const n of t)if(!i2e(n,{upTo:e}))return n}function i2e(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function o2e(t){return t instanceof HTMLInputElement&&"select"in t}function Sd(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&o2e(t)&&e&&t.select()}}var u7=a2e();function a2e(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=d7(t,e),t.unshift(e)},remove(e){t=d7(t,e),t[0]?.resume()}}}function d7(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function l2e(t){return t.filter(e=>e.tagName!=="A")}var c2e="Portal",jw=N.forwardRef((t,e)=>{const{container:n,...r}=t,[s,i]=N.useState(!1);$u(()=>i(!0),[]);const o=n||s&&globalThis?.document?.body;return o?Tye.createPortal(y.jsx(En.div,{...r,ref:e}),o):null});jw.displayName=c2e;function u2e(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var Js=t=>{const{present:e,children:n}=t,r=d2e(e),s=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),i=Jn(r.ref,h2e(s));return typeof n=="function"||r.isPresent?N.cloneElement(s,{ref:i}):null};Js.displayName="Presence";function d2e(t){const[e,n]=N.useState(),r=N.useRef({}),s=N.useRef(t),i=N.useRef("none"),o=t?"mounted":"unmounted",[a,l]=u2e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const c=B_(r.current);i.current=a==="mounted"?c:"none"},[a]),$u(()=>{const c=r.current,u=s.current;if(u!==t){const h=i.current,f=B_(c);t?l("MOUNT"):f==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),$u(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=f=>{const m=B_(r.current).includes(f.animationName);if(f.target===e&&m&&(l("ANIMATION_END"),!s.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},h=f=>{f.target===e&&(i.current=B_(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:N.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function B_(t){return t?.animationName||"none"}function h2e(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var t3=0;function qD(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??h7()),document.body.insertAdjacentElement("beforeend",t[1]??h7()),t3++,()=>{t3===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),t3--}},[])}function h7(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var oc=function(){return oc=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},oc.apply(this,arguments)};function lX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function f2e(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function p2e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function m2e(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g2e(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var IS="right-scroll-bar-position",RS="width-before-scroll-bar",b2e="with-scroll-bars-hidden",y2e="--removed-body-scroll-bar-size";function n3(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function v2e(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var w2e=typeof window<"u"?N.useLayoutEffect:N.useEffect,f7=new WeakMap;function x2e(t,e){var n=v2e(null,function(r){return t.forEach(function(s){return n3(s,r)})});return w2e(function(){var r=f7.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||n3(a,null)}),i.forEach(function(a){s.has(a)||n3(a,o)})}f7.set(n,t)},[t]),n}function _2e(t){return t}function S2e(t,e){e===void 0&&(e=_2e);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function E2e(t){t===void 0&&(t={});var e=S2e(null);return e.options=oc({async:!0,ssr:!1},t),e}var cX=function(t){var e=t.sideCar,n=lX(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,oc({},n))};cX.isSideCarExport=!0;function k2e(t,e){return t.useMedium(e),cX}var uX=E2e(),r3=function(){},cA=N.forwardRef(function(t,e){var n=N.useRef(null),r=N.useState({onScrollCapture:r3,onWheelCapture:r3,onTouchMoveCapture:r3}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,m=t.allowPinchZoom,g=t.as,b=g===void 0?"div":g,v=t.gapMode,w=lX(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,S=x2e([n,e]),E=oc(oc({},w),s);return N.createElement(N.Fragment,null,u&&N.createElement(_,{sideCar:uX,removeScrollBar:c,shards:d,noIsolation:f,inert:p,setCallbacks:i,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?N.cloneElement(N.Children.only(a),oc(oc({},E),{ref:S})):N.createElement(b,oc({},E,{className:l,ref:S}),a))});cA.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};cA.classNames={fullWidth:RS,zeroRight:IS};var C2e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function A2e(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=C2e();return e&&t.setAttribute("nonce",e),t}function T2e(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function P2e(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var N2e=function(){var t=0,e=null;return{add:function(n){t==0&&(e=A2e())&&(T2e(e,n),P2e(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},I2e=function(){var t=N2e();return function(e,n){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},dX=function(){var t=I2e(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},R2e={left:0,top:0,right:0,gap:0},s3=function(t){return parseInt(t||"",10)||0},O2e=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[s3(n),s3(r),s3(s)]},L2e=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return R2e;var e=O2e(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},D2e=dX(),wg="data-scroll-locked",M2e=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(b2e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(wg,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(IS,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(RS,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(IS," .").concat(IS,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(RS," .").concat(RS,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wg,`] {
    `).concat(y2e,": ").concat(a,`px;
  }
`)},p7=function(){var t=parseInt(document.body.getAttribute(wg)||"0",10);return isFinite(t)?t:0},j2e=function(){N.useEffect(function(){return document.body.setAttribute(wg,(p7()+1).toString()),function(){var t=p7()-1;t<=0?document.body.removeAttribute(wg):document.body.setAttribute(wg,t.toString())}},[])},F2e=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;j2e();var i=N.useMemo(function(){return L2e(s)},[s]);return N.createElement(D2e,{styles:M2e(i,!e,s,n?"":"!important")})},LI=!1;if(typeof window<"u")try{var $_=Object.defineProperty({},"passive",{get:function(){return LI=!0,!0}});window.addEventListener("test",$_,$_),window.removeEventListener("test",$_,$_)}catch{LI=!1}var Nm=LI?{passive:!1}:!1,B2e=function(t){return t.tagName==="TEXTAREA"},hX=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!B2e(t)&&n[e]==="visible")},$2e=function(t){return hX(t,"overflowY")},U2e=function(t){return hX(t,"overflowX")},m7=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=fX(t,r);if(s){var i=pX(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},H2e=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},z2e=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},fX=function(t,e){return t==="v"?$2e(e):U2e(e)},pX=function(t,e){return t==="v"?H2e(e):z2e(e)},V2e=function(t,e){return t==="h"&&e==="rtl"?-1:1},W2e=function(t,e,n,r,s){var i=V2e(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{var f=pX(t,a),p=f[0],m=f[1],g=f[2],b=m-g-i*p;(p||b)&&fX(t,a)&&(d+=b,h+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},U_=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},g7=function(t){return[t.deltaX,t.deltaY]},b7=function(t){return t&&"current"in t?t.current:t},G2e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},q2e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},K2e=0,Im=[];function Y2e(t){var e=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),s=N.useState(K2e++)[0],i=N.useState(dX)[0],o=N.useRef(t);N.useEffect(function(){o.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=g2e([t.lockRef.current],(t.shards||[]).map(b7),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var b=U_(m),v=n.current,w="deltaX"in m?m.deltaX:v[0]-b[0],_="deltaY"in m?m.deltaY:v[1]-b[1],S,E=m.target,k=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in m&&k==="h"&&E.type==="range")return!1;var x=m7(k,E);if(!x)return!0;if(x?S=k:(S=k==="v"?"h":"v",x=m7(k,E)),!x)return!1;if(!r.current&&"changedTouches"in m&&(w||_)&&(r.current=S),!S)return!0;var I=r.current||S;return W2e(I,g,m,I==="h"?w:_)},[]),l=N.useCallback(function(m){var g=m;if(!(!Im.length||Im[Im.length-1]!==i)){var b="deltaY"in g?g7(g):U_(g),v=e.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&G2e(S.delta,b)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var w=(o.current.shards||[]).map(b7).filter(Boolean).filter(function(S){return S.contains(g.target)}),_=w.length>0?a(g,w[0]):!o.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),c=N.useCallback(function(m,g,b,v){var w={name:m,delta:g,target:b,should:v,shadowParent:J2e(b)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(_){return _!==w})},1)},[]),u=N.useCallback(function(m){n.current=U_(m),r.current=void 0},[]),d=N.useCallback(function(m){c(m.type,g7(m),m.target,a(m,t.lockRef.current))},[]),h=N.useCallback(function(m){c(m.type,U_(m),m.target,a(m,t.lockRef.current))},[]);N.useEffect(function(){return Im.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Nm),document.addEventListener("touchmove",l,Nm),document.addEventListener("touchstart",u,Nm),function(){Im=Im.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,Nm),document.removeEventListener("touchmove",l,Nm),document.removeEventListener("touchstart",u,Nm)}},[]);var f=t.removeScrollBar,p=t.inert;return N.createElement(N.Fragment,null,p?N.createElement(i,{styles:q2e(s)}):null,f?N.createElement(F2e,{gapMode:t.gapMode}):null)}function J2e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const X2e=k2e(uX,Y2e);var uA=N.forwardRef(function(t,e){return N.createElement(cA,oc({},t,{ref:e,sideCar:X2e}))});uA.classNames=cA.classNames;var Z2e=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Rm=new WeakMap,H_=new WeakMap,z_={},i3=0,mX=function(t){return t&&(t.host||mX(t.parentNode))},Q2e=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=mX(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},eSe=function(t,e,n,r){var s=Q2e(e,Array.isArray(t)?t:[t]);z_[n]||(z_[n]=new WeakMap);var i=z_[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var f=h.getAttribute(r),p=f!==null&&f!=="false",m=(Rm.get(h)||0)+1,g=(i.get(h)||0)+1;Rm.set(h,m),i.set(h,g),o.push(h),m===1&&p&&H_.set(h,!0),g===1&&h.setAttribute(n,"true"),p||h.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return u(e),a.clear(),i3++,function(){o.forEach(function(d){var h=Rm.get(d)-1,f=i.get(d)-1;Rm.set(d,h),i.set(d,f),h||(H_.has(d)||d.removeAttribute(r),H_.delete(d)),f||d.removeAttribute(n)}),i3--,i3||(Rm=new WeakMap,Rm=new WeakMap,H_=new WeakMap,z_={})}},KD=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Z2e(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),eSe(r,s,n,"aria-hidden")):function(){return null}},YD="Dialog",[gX,OCt]=Fa(YD),[tSe,wl]=gX(YD),bX=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=N.useRef(null),l=N.useRef(null),[c=!1,u]=Lp({prop:r,defaultProp:s,onChange:i});return y.jsx(tSe,{scope:e,triggerRef:a,contentRef:l,contentId:Lu(),titleId:Lu(),descriptionId:Lu(),open:c,onOpenChange:u,onOpenToggle:N.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};bX.displayName=YD;var yX="DialogTrigger",vX=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wl(yX,n),i=Jn(e,s.triggerRef);return y.jsx(En.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ZD(s.open),...r,ref:i,onClick:Mt(t.onClick,s.onOpenToggle)})});vX.displayName=yX;var JD="DialogPortal",[nSe,wX]=gX(JD,{forceMount:void 0}),xX=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=wl(JD,e);return y.jsx(nSe,{scope:e,forceMount:n,children:N.Children.map(r,o=>y.jsx(Js,{present:n||i.open,children:y.jsx(jw,{asChild:!0,container:s,children:o})}))})};xX.displayName=JD;var AE="DialogOverlay",_X=N.forwardRef((t,e)=>{const n=wX(AE,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=wl(AE,t.__scopeDialog);return i.modal?y.jsx(Js,{present:r||i.open,children:y.jsx(rSe,{...s,ref:e})}):null});_X.displayName=AE;var rSe=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wl(AE,n);return y.jsx(uA,{as:lp,allowPinchZoom:!0,shards:[s.contentRef],children:y.jsx(En.div,{"data-state":ZD(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),cp="DialogContent",SX=N.forwardRef((t,e)=>{const n=wX(cp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=wl(cp,t.__scopeDialog);return y.jsx(Js,{present:r||i.open,children:i.modal?y.jsx(sSe,{...s,ref:e}):y.jsx(iSe,{...s,ref:e})})});SX.displayName=cp;var sSe=N.forwardRef((t,e)=>{const n=wl(cp,t.__scopeDialog),r=N.useRef(null),s=Jn(e,n.contentRef,r);return N.useEffect(()=>{const i=r.current;if(i)return KD(i)},[]),y.jsx(EX,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mt(t.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Mt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Mt(t.onFocusOutside,i=>i.preventDefault())})}),iSe=N.forwardRef((t,e)=>{const n=wl(cp,t.__scopeDialog),r=N.useRef(!1),s=N.useRef(!1);return y.jsx(EX,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),EX=N.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=wl(cp,n),l=N.useRef(null),c=Jn(e,l);return qD(),y.jsxs(y.Fragment,{children:[y.jsx(lA,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:y.jsx(Mw,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":ZD(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(oSe,{titleId:a.titleId}),y.jsx(lSe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),XD="DialogTitle",kX=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wl(XD,n);return y.jsx(En.h2,{id:s.titleId,...r,ref:e})});kX.displayName=XD;var CX="DialogDescription",AX=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wl(CX,n);return y.jsx(En.p,{id:s.descriptionId,...r,ref:e})});AX.displayName=CX;var TX="DialogClose",PX=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=wl(TX,n);return y.jsx(En.button,{type:"button",...r,ref:e,onClick:Mt(t.onClick,()=>s.onOpenChange(!1))})});PX.displayName=TX;function ZD(t){return t?"open":"closed"}var NX="DialogTitleWarning",[LCt,IX]=B_e(NX,{contentName:cp,titleName:XD,docsSlug:"dialog"}),oSe=({titleId:t})=>{const e=IX(NX),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},aSe="DialogDescriptionWarning",lSe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${IX(aSe).contentName}}.`;return N.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Ea=bX,cSe=vX,Gf=xX,qf=_X,Kf=SX,QD=kX,uSe=AX,e0=PX;function Ne(...t){let e="";for(const n of t)e=RX(e,dSe(n));return e}function dSe(t){if(typeof t=="string"||typeof t=="number")return t;if(typeof t!="object")return"";if(Array.isArray(t))return Ne(...t);let e="";for(const n in t)t[n]&&(e=RX(e,n));return e}function RX(t,e){return e?t?t+" "+e:t+e:t}const Go=Op(.4,0,.2,1),Pr=N.memo(N.forwardRef(({icon:t,size:e="xl",className:n,iconClassName:r,disabledClassName:s,disabled:i=!1,title:o,onClick:a,children:l},c)=>y.jsx("button",{ref:c,className:Ne("flex items-center text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive rounded-md p-1 enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[Ne("opacity-30",s)]:i},n),title:o,disabled:i,onClick:u=>{i||a?.(u)},children:l||y.jsx("div",{className:Ne(t,hSe(e),r)})})));function hSe(t){return t==="sm"?"text-sm":t==="md"?"text-md":t==="lg"?"text-lg":t==="xl"?"text-xl":"text-2xl"}const TE=N.memo(({type:t,children:e,onClick:n,disabled:r})=>y.jsx("button",{className:Ne("inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-colors",{"bg-purple-500 text-white hover:bg-purple-600 dark:bg-purple-500 dark:hover:bg-purple-600":t==="primary","bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100":t==="secondary","bg-transparent text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-500/10":t==="danger"}),onClick:n,disabled:r,children:e})),up=N.memo(({className:t,children:e,...n})=>y.jsx(QD,{className:Ne("text-lg font-medium text-bolt-elements-textPrimary","flex items-center gap-2",t),...n,children:e})),OX=N.memo(({className:t,children:e,...n})=>y.jsx(uSe,{className:Ne("text-sm text-bolt-elements-textSecondary","mt-1",t),...n,children:e})),PE={duration:.15,ease:Go},fSe={closed:{opacity:0,transition:PE},open:{opacity:1,transition:PE}},pSe={closed:{x:"-50%",y:"-40%",scale:.96,opacity:0,transition:PE},open:{x:"-50%",y:"-50%",scale:1,opacity:1,transition:PE}},t0=N.memo(({children:t,className:e,showCloseButton:n=!0,onClose:r,onBackdrop:s})=>y.jsxs(Gf,{children:[y.jsx(qf,{asChild:!0,children:y.jsx(lt.div,{className:Ne("fixed inset-0 z-[9999]","bg-[#FAFAFA]/80 dark:bg-[#0A0A0A]/80","backdrop-blur-[2px]"),initial:"closed",animate:"open",exit:"closed",variants:fSe,onClick:s})}),y.jsx(Kf,{asChild:!0,children:y.jsx(lt.div,{className:Ne("fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","bg-[#FAFAFA] dark:bg-[#0A0A0A]","rounded-lg shadow-lg","border border-[#E5E5E5] dark:border-[#1A1A1A]","z-[9999] w-[520px]",e),initial:"closed",animate:"open",exit:"closed",variants:pSe,children:y.jsxs("div",{className:"flex flex-col",children:[t,n&&y.jsx(e0,{asChild:!0,onClick:r,children:y.jsx(Pr,{icon:"i-ph:x",className:"absolute top-3 right-3 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary"})})]})})})]})),mSe=N.memo(({className:t})=>{const e=Bt(i1),[n,r]=N.useState(!1);return N.useEffect(()=>{r(!0)},[]),n&&y.jsx(Pr,{className:t,icon:e==="dark"?"i-ph-sun-dim-duotone":"i-ph-moon-stars-duotone",size:"xl",title:"Toggle Theme",onClick:hY})});function gSe(t){const e=N.useRef({value:t,previous:t});return N.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function LX(t){const[e,n]=N.useState(void 0);return $u(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var e6="Switch",[bSe,DCt]=Fa(e6),[ySe,vSe]=bSe(e6),t6=N.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[h,f]=N.useState(null),p=Jn(e,w=>f(w)),m=N.useRef(!1),g=h?u||!!h.closest("form"):!0,[b=!1,v]=Lp({prop:s,defaultProp:i,onChange:c});return y.jsxs(ySe,{scope:n,checked:b,disabled:a,children:[y.jsx(En.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":jX(b),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onClick:Mt(t.onClick,w=>{v(_=>!_),g&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),g&&y.jsx(wSe,{control:h,bubbles:!m.current,name:r,value:l,checked:b,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});t6.displayName=e6;var DX="SwitchThumb",MX=N.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=vSe(DX,n);return y.jsx(En.span,{"data-state":jX(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});MX.displayName=DX;var wSe=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=N.useRef(null),o=gSe(n),a=LX(e);return N.useEffect(()=>{const l=i.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(h)}},[o,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function jX(t){return t?"checked":"unchecked"}var xSe=t6,_Se=MX;const ka=N.memo(({className:t,onCheckedChange:e,checked:n})=>y.jsx(xSe,{className:Ne("relative h-6 w-11 cursor-pointer rounded-full bg-bolt-elements-button-primary-background","transition-colors duration-200 ease-in-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-bolt-elements-item-contentAccent",t),checked:n,onCheckedChange:r=>e?.(r),children:y.jsx(_Se,{className:Ne("block h-5 w-5 rounded-full bg-white","shadow-lg shadow-black/20","transition-transform duration-200 ease-in-out","translate-x-0.5","data-[state=checked]:translate-x-[1.375rem]","will-change-transform")})}));var FX="vercel.ai.error",SSe=Symbol.for(FX),BX,ESe=class $X extends Error{constructor({name:e,message:n,cause:r}){super(n),this[BX]=!0,this.name=e,this.cause=r}static isInstance(e){return $X.hasMarker(e,FX)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};BX=SSe;var cs=ESe,UX="AI_APICallError",HX=`vercel.ai.error.${UX}`,kSe=Symbol.for(HX),zX,pu=class extends cs{constructor({message:e,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:o,cause:a,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:UX,message:e,cause:a}),this[zX]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=c}static isInstance(e){return cs.hasMarker(e,HX)}};zX=kSe;var VX="AI_EmptyResponseBodyError",WX=`vercel.ai.error.${VX}`,CSe=Symbol.for(WX),GX,ASe=class extends cs{constructor({message:e="Empty response body"}={}){super({name:VX,message:e}),this[GX]=!0}static isInstance(e){return cs.hasMarker(e,WX)}};GX=CSe;function qX(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var KX="AI_InvalidArgumentError",YX=`vercel.ai.error.${KX}`,TSe=Symbol.for(YX),JX,PSe=class extends cs{constructor({message:e,cause:n,argument:r}){super({name:KX,message:e,cause:n}),this[JX]=!0,this.argument=r}static isInstance(e){return cs.hasMarker(e,YX)}};JX=TSe;var XX="AI_InvalidPromptError",ZX=`vercel.ai.error.${XX}`,NSe=Symbol.for(ZX),QX,ISe=class extends cs{constructor({prompt:e,message:n,cause:r}){super({name:XX,message:`Invalid prompt: ${n}`,cause:r}),this[QX]=!0,this.prompt=e}static isInstance(e){return cs.hasMarker(e,ZX)}};QX=NSe;var eZ="AI_InvalidResponseDataError",tZ=`vercel.ai.error.${eZ}`,RSe=Symbol.for(tZ),nZ,o3=class extends cs{constructor({data:e,message:n=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:eZ,message:n}),this[nZ]=!0,this.data=e}static isInstance(e){return cs.hasMarker(e,tZ)}};nZ=RSe;var rZ="AI_JSONParseError",sZ=`vercel.ai.error.${rZ}`,OSe=Symbol.for(sZ),iZ,NE=class extends cs{constructor({text:e,cause:n}){super({name:rZ,message:`JSON parsing failed: Text: ${e}.
Error message: ${qX(n)}`,cause:n}),this[iZ]=!0,this.text=e}static isInstance(e){return cs.hasMarker(e,sZ)}};iZ=OSe;var oZ="AI_LoadAPIKeyError",aZ=`vercel.ai.error.${oZ}`,LSe=Symbol.for(aZ),lZ,V_=class extends cs{constructor({message:e}){super({name:oZ,message:e}),this[lZ]=!0}static isInstance(e){return cs.hasMarker(e,aZ)}};lZ=LSe;var cZ="AI_TooManyEmbeddingValuesForCallError",uZ=`vercel.ai.error.${cZ}`,DSe=Symbol.for(uZ),dZ,MSe=class extends cs{constructor(e){super({name:cZ,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[dZ]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return cs.hasMarker(e,uZ)}};dZ=DSe;var hZ="AI_TypeValidationError",fZ=`vercel.ai.error.${hZ}`,jSe=Symbol.for(fZ),pZ,FSe=class DI extends cs{constructor({value:e,cause:n}){super({name:hZ,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${qX(n)}`,cause:n}),this[pZ]=!0,this.value=e}static isInstance(e){return cs.hasMarker(e,fZ)}static wrap({value:e,cause:n}){return DI.isInstance(n)&&n.value===e?n:new DI({value:e,cause:n})}};pZ=jSe;var IE=FSe,mZ="AI_UnsupportedFunctionalityError",gZ=`vercel.ai.error.${mZ}`,BSe=Symbol.for(gZ),bZ,ro=class extends cs{constructor({functionality:e,message:n=`'${e}' functionality not supported.`}){super({name:mZ,message:n}),this[bZ]=!0,this.functionality=e}static isInstance(e){return cs.hasMarker(e,gZ)}};bZ=BSe;let Dp=(t,e=21)=>(n=e)=>{let r="",s=n|0;for(;s--;)r+=t[Math.random()*t.length|0];return r};var bs={},dA={};dA.byteLength=HSe;dA.toByteArray=VSe;dA.fromByteArray=qSe;var ac=[],ua=[],$Se=typeof Uint8Array<"u"?Uint8Array:Array,a3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Om=0,USe=a3.length;Om<USe;++Om)ac[Om]=a3[Om],ua[a3.charCodeAt(Om)]=Om;ua[45]=62;ua[95]=63;function yZ(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function HSe(t){var e=yZ(t),n=e[0],r=e[1];return(n+r)*3/4-r}function zSe(t,e,n){return(e+n)*3/4-n}function VSe(t){var e,n=yZ(t),r=n[0],s=n[1],i=new $Se(zSe(t,r,s)),o=0,a=s>0?r-4:r,l;for(l=0;l<a;l+=4)e=ua[t.charCodeAt(l)]<<18|ua[t.charCodeAt(l+1)]<<12|ua[t.charCodeAt(l+2)]<<6|ua[t.charCodeAt(l+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=ua[t.charCodeAt(l)]<<2|ua[t.charCodeAt(l+1)]>>4,i[o++]=e&255),s===1&&(e=ua[t.charCodeAt(l)]<<10|ua[t.charCodeAt(l+1)]<<4|ua[t.charCodeAt(l+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function WSe(t){return ac[t>>18&63]+ac[t>>12&63]+ac[t>>6&63]+ac[t&63]}function GSe(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(WSe(r));return s.join("")}function qSe(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(GSe(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(ac[e>>2]+ac[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(ac[e>>10]+ac[e>>4&63]+ac[e<<2&63]+"=")),s.join("")}var n6={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n6.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?s-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=i*256+t[e+d],d+=h,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=h,u-=8);if(i===0)i=1-c;else{if(i===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(f?-1:1)*o*Math.pow(2,i-r)};n6.write=function(t,e,n,r,s,i){var o,a,l,c=i*8-s-1,u=(1<<c)-1,d=u>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?e+=h/l:e+=h*Math.pow(2,1-d),e*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*l-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[n+f]=o&255,f+=p,o/=256,c-=8);t[n+f-p]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=dA,n=n6,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ie=new i(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,i.prototype),Object.setPrototypeOf(ie,z),ie.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(ie){if(ie>s)throw new RangeError('The value "'+ie+'" is invalid for option "size"');const z=new i(ie);return Object.setPrototypeOf(z,u.prototype),z}function u(ie,z,J){if(typeof ie=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(ie)}return d(ie,z,J)}u.poolSize=8192;function d(ie,z,J){if(typeof ie=="string")return m(ie,z);if(o.isView(ie))return b(ie);if(ie==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(Be(ie,o)||ie&&Be(ie.buffer,o)||typeof a<"u"&&(Be(ie,a)||ie&&Be(ie.buffer,a)))return v(ie,z,J);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=ie.valueOf&&ie.valueOf();if(pe!=null&&pe!==ie)return u.from(pe,z,J);const Oe=w(ie);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return u.from(ie[Symbol.toPrimitive]("string"),z,J);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}u.from=function(ie,z,J){return d(ie,z,J)},Object.setPrototypeOf(u.prototype,i.prototype),Object.setPrototypeOf(u,i);function h(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function f(ie,z,J){return h(ie),ie<=0?c(ie):z!==void 0?typeof J=="string"?c(ie).fill(z,J):c(ie).fill(z):c(ie)}u.alloc=function(ie,z,J){return f(ie,z,J)};function p(ie){return h(ie),c(ie<0?0:_(ie)|0)}u.allocUnsafe=function(ie){return p(ie)},u.allocUnsafeSlow=function(ie){return p(ie)};function m(ie,z){if((typeof z!="string"||z==="")&&(z="utf8"),!u.isEncoding(z))throw new TypeError("Unknown encoding: "+z);const J=E(ie,z)|0;let pe=c(J);const Oe=pe.write(ie,z);return Oe!==J&&(pe=pe.slice(0,Oe)),pe}function g(ie){const z=ie.length<0?0:_(ie.length)|0,J=c(z);for(let pe=0;pe<z;pe+=1)J[pe]=ie[pe]&255;return J}function b(ie){if(Be(ie,i)){const z=new i(ie);return v(z.buffer,z.byteOffset,z.byteLength)}return g(ie)}function v(ie,z,J){if(z<0||ie.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<z+(J||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return z===void 0&&J===void 0?pe=new i(ie):J===void 0?pe=new i(ie,z):pe=new i(ie,z,J),Object.setPrototypeOf(pe,u.prototype),pe}function w(ie){if(u.isBuffer(ie)){const z=_(ie.length)|0,J=c(z);return J.length===0||ie.copy(J,0,0,z),J}if(ie.length!==void 0)return typeof ie.length!="number"||ke(ie.length)?c(0):g(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return g(ie.data)}function _(ie){if(ie>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return ie|0}function S(ie){return+ie!=ie&&(ie=0),u.alloc(+ie)}u.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==u.prototype},u.compare=function(z,J){if(Be(z,i)&&(z=u.from(z,z.offset,z.byteLength)),Be(J,i)&&(J=u.from(J,J.offset,J.byteLength)),!u.isBuffer(z)||!u.isBuffer(J))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===J)return 0;let pe=z.length,Oe=J.length;for(let He=0,Ge=Math.min(pe,Oe);He<Ge;++He)if(z[He]!==J[He]){pe=z[He],Oe=J[He];break}return pe<Oe?-1:Oe<pe?1:0},u.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(z,J){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return u.alloc(0);let pe;if(J===void 0)for(J=0,pe=0;pe<z.length;++pe)J+=z[pe].length;const Oe=u.allocUnsafe(J);let He=0;for(pe=0;pe<z.length;++pe){let Ge=z[pe];if(Be(Ge,i))He+Ge.length>Oe.length?(u.isBuffer(Ge)||(Ge=u.from(Ge)),Ge.copy(Oe,He)):i.prototype.set.call(Oe,Ge,He);else if(u.isBuffer(Ge))Ge.copy(Oe,He);else throw new TypeError('"list" argument must be an Array of Buffers');He+=Ge.length}return Oe};function E(ie,z){if(u.isBuffer(ie))return ie.length;if(o.isView(ie)||Be(ie,o))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);const J=ie.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&J===0)return 0;let Oe=!1;for(;;)switch(z){case"ascii":case"latin1":case"binary":return J;case"utf8":case"utf-8":return Ce(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J*2;case"hex":return J>>>1;case"base64":return Ue(ie).length;default:if(Oe)return pe?-1:Ce(ie).length;z=(""+z).toLowerCase(),Oe=!0}}u.byteLength=E;function k(ie,z,J){let pe=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((J===void 0||J>this.length)&&(J=this.length),J<=0)||(J>>>=0,z>>>=0,J<=z))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return D(this,z,J);case"utf8":case"utf-8":return X(this,z,J);case"ascii":return M(this,z,J);case"latin1":case"binary":return G(this,z,J);case"base64":return ee(this,z,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,z,J);default:if(pe)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),pe=!0}}u.prototype._isBuffer=!0;function x(ie,z,J){const pe=ie[z];ie[z]=ie[J],ie[J]=pe}u.prototype.swap16=function(){const z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let J=0;J<z;J+=2)x(this,J,J+1);return this},u.prototype.swap32=function(){const z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let J=0;J<z;J+=4)x(this,J,J+3),x(this,J+1,J+2);return this},u.prototype.swap64=function(){const z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let J=0;J<z;J+=8)x(this,J,J+7),x(this,J+1,J+6),x(this,J+2,J+5),x(this,J+3,J+4);return this},u.prototype.toString=function(){const z=this.length;return z===0?"":arguments.length===0?X(this,0,z):k.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(z){if(!u.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:u.compare(this,z)===0},u.prototype.inspect=function(){let z="";const J=t.INSPECT_MAX_BYTES;return z=this.toString("hex",0,J).replace(/(.{2})/g,"$1 ").trim(),this.length>J&&(z+=" ... "),"<Buffer "+z+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(z,J,pe,Oe,He){if(Be(z,i)&&(z=u.from(z,z.offset,z.byteLength)),!u.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(J===void 0&&(J=0),pe===void 0&&(pe=z?z.length:0),Oe===void 0&&(Oe=0),He===void 0&&(He=this.length),J<0||pe>z.length||Oe<0||He>this.length)throw new RangeError("out of range index");if(Oe>=He&&J>=pe)return 0;if(Oe>=He)return-1;if(J>=pe)return 1;if(J>>>=0,pe>>>=0,Oe>>>=0,He>>>=0,this===z)return 0;let Ge=He-Oe,$t=pe-J;const Lt=Math.min(Ge,$t),kn=this.slice(Oe,He),Yt=z.slice(J,pe);for(let rn=0;rn<Lt;++rn)if(kn[rn]!==Yt[rn]){Ge=kn[rn],$t=Yt[rn];break}return Ge<$t?-1:$t<Ge?1:0};function I(ie,z,J,pe,Oe){if(ie.length===0)return-1;if(typeof J=="string"?(pe=J,J=0):J>2147483647?J=2147483647:J<-2147483648&&(J=-2147483648),J=+J,ke(J)&&(J=Oe?0:ie.length-1),J<0&&(J=ie.length+J),J>=ie.length){if(Oe)return-1;J=ie.length-1}else if(J<0)if(Oe)J=0;else return-1;if(typeof z=="string"&&(z=u.from(z,pe)),u.isBuffer(z))return z.length===0?-1:R(ie,z,J,pe,Oe);if(typeof z=="number")return z=z&255,typeof i.prototype.indexOf=="function"?Oe?i.prototype.indexOf.call(ie,z,J):i.prototype.lastIndexOf.call(ie,z,J):R(ie,[z],J,pe,Oe);throw new TypeError("val must be string, number or Buffer")}function R(ie,z,J,pe,Oe){let He=1,Ge=ie.length,$t=z.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(ie.length<2||z.length<2)return-1;He=2,Ge/=2,$t/=2,J/=2}function Lt(Yt,rn){return He===1?Yt[rn]:Yt.readUInt16BE(rn*He)}let kn;if(Oe){let Yt=-1;for(kn=J;kn<Ge;kn++)if(Lt(ie,kn)===Lt(z,Yt===-1?0:kn-Yt)){if(Yt===-1&&(Yt=kn),kn-Yt+1===$t)return Yt*He}else Yt!==-1&&(kn-=kn-Yt),Yt=-1}else for(J+$t>Ge&&(J=Ge-$t),kn=J;kn>=0;kn--){let Yt=!0;for(let rn=0;rn<$t;rn++)if(Lt(ie,kn+rn)!==Lt(z,rn)){Yt=!1;break}if(Yt)return kn}return-1}u.prototype.includes=function(z,J,pe){return this.indexOf(z,J,pe)!==-1},u.prototype.indexOf=function(z,J,pe){return I(this,z,J,pe,!0)},u.prototype.lastIndexOf=function(z,J,pe){return I(this,z,J,pe,!1)};function C(ie,z,J,pe){J=Number(J)||0;const Oe=ie.length-J;pe?(pe=Number(pe),pe>Oe&&(pe=Oe)):pe=Oe;const He=z.length;pe>He/2&&(pe=He/2);let Ge;for(Ge=0;Ge<pe;++Ge){const $t=parseInt(z.substr(Ge*2,2),16);if(ke($t))return Ge;ie[J+Ge]=$t}return Ge}function T(ie,z,J,pe){return Fe(Ce(z,ie.length-J),ie,J,pe)}function O(ie,z,J,pe){return Fe(Ie(z),ie,J,pe)}function P(ie,z,J,pe){return Fe(Ue(z),ie,J,pe)}function U(ie,z,J,pe){return Fe(we(z,ie.length-J),ie,J,pe)}u.prototype.write=function(z,J,pe,Oe){if(J===void 0)Oe="utf8",pe=this.length,J=0;else if(pe===void 0&&typeof J=="string")Oe=J,pe=this.length,J=0;else if(isFinite(J))J=J>>>0,isFinite(pe)?(pe=pe>>>0,Oe===void 0&&(Oe="utf8")):(Oe=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const He=this.length-J;if((pe===void 0||pe>He)&&(pe=He),z.length>0&&(pe<0||J<0)||J>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let Ge=!1;for(;;)switch(Oe){case"hex":return C(this,z,J,pe);case"utf8":case"utf-8":return T(this,z,J,pe);case"ascii":case"latin1":case"binary":return O(this,z,J,pe);case"base64":return P(this,z,J,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,z,J,pe);default:if(Ge)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),Ge=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(ie,z,J){return z===0&&J===ie.length?e.fromByteArray(ie):e.fromByteArray(ie.slice(z,J))}function X(ie,z,J){J=Math.min(ie.length,J);const pe=[];let Oe=z;for(;Oe<J;){const He=ie[Oe];let Ge=null,$t=He>239?4:He>223?3:He>191?2:1;if(Oe+$t<=J){let Lt,kn,Yt,rn;switch($t){case 1:He<128&&(Ge=He);break;case 2:Lt=ie[Oe+1],(Lt&192)===128&&(rn=(He&31)<<6|Lt&63,rn>127&&(Ge=rn));break;case 3:Lt=ie[Oe+1],kn=ie[Oe+2],(Lt&192)===128&&(kn&192)===128&&(rn=(He&15)<<12|(Lt&63)<<6|kn&63,rn>2047&&(rn<55296||rn>57343)&&(Ge=rn));break;case 4:Lt=ie[Oe+1],kn=ie[Oe+2],Yt=ie[Oe+3],(Lt&192)===128&&(kn&192)===128&&(Yt&192)===128&&(rn=(He&15)<<18|(Lt&63)<<12|(kn&63)<<6|Yt&63,rn>65535&&rn<1114112&&(Ge=rn))}}Ge===null?(Ge=65533,$t=1):Ge>65535&&(Ge-=65536,pe.push(Ge>>>10&1023|55296),Ge=56320|Ge&1023),pe.push(Ge),Oe+=$t}return F(pe)}const Z=4096;function F(ie){const z=ie.length;if(z<=Z)return String.fromCharCode.apply(String,ie);let J="",pe=0;for(;pe<z;)J+=String.fromCharCode.apply(String,ie.slice(pe,pe+=Z));return J}function M(ie,z,J){let pe="";J=Math.min(ie.length,J);for(let Oe=z;Oe<J;++Oe)pe+=String.fromCharCode(ie[Oe]&127);return pe}function G(ie,z,J){let pe="";J=Math.min(ie.length,J);for(let Oe=z;Oe<J;++Oe)pe+=String.fromCharCode(ie[Oe]);return pe}function D(ie,z,J){const pe=ie.length;(!z||z<0)&&(z=0),(!J||J<0||J>pe)&&(J=pe);let Oe="";for(let He=z;He<J;++He)Oe+=Je[ie[He]];return Oe}function j(ie,z,J){const pe=ie.slice(z,J);let Oe="";for(let He=0;He<pe.length-1;He+=2)Oe+=String.fromCharCode(pe[He]+pe[He+1]*256);return Oe}u.prototype.slice=function(z,J){const pe=this.length;z=~~z,J=J===void 0?pe:~~J,z<0?(z+=pe,z<0&&(z=0)):z>pe&&(z=pe),J<0?(J+=pe,J<0&&(J=0)):J>pe&&(J=pe),J<z&&(J=z);const Oe=this.subarray(z,J);return Object.setPrototypeOf(Oe,u.prototype),Oe};function W(ie,z,J){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+z>J)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(z,J,pe){z=z>>>0,J=J>>>0,pe||W(z,J,this.length);let Oe=this[z],He=1,Ge=0;for(;++Ge<J&&(He*=256);)Oe+=this[z+Ge]*He;return Oe},u.prototype.readUintBE=u.prototype.readUIntBE=function(z,J,pe){z=z>>>0,J=J>>>0,pe||W(z,J,this.length);let Oe=this[z+--J],He=1;for(;J>0&&(He*=256);)Oe+=this[z+--J]*He;return Oe},u.prototype.readUint8=u.prototype.readUInt8=function(z,J){return z=z>>>0,J||W(z,1,this.length),this[z]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(z,J){return z=z>>>0,J||W(z,2,this.length),this[z]|this[z+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(z,J){return z=z>>>0,J||W(z,2,this.length),this[z]<<8|this[z+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(z,J){return z=z>>>0,J||W(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(z,J){return z=z>>>0,J||W(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},u.prototype.readBigUInt64LE=Xe(function(z){z=z>>>0,re(z,"offset");const J=this[z],pe=this[z+7];(J===void 0||pe===void 0)&&le(z,this.length-8);const Oe=J+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24,He=this[++z]+this[++z]*2**8+this[++z]*2**16+pe*2**24;return BigInt(Oe)+(BigInt(He)<<BigInt(32))}),u.prototype.readBigUInt64BE=Xe(function(z){z=z>>>0,re(z,"offset");const J=this[z],pe=this[z+7];(J===void 0||pe===void 0)&&le(z,this.length-8);const Oe=J*2**24+this[++z]*2**16+this[++z]*2**8+this[++z],He=this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+pe;return(BigInt(Oe)<<BigInt(32))+BigInt(He)}),u.prototype.readIntLE=function(z,J,pe){z=z>>>0,J=J>>>0,pe||W(z,J,this.length);let Oe=this[z],He=1,Ge=0;for(;++Ge<J&&(He*=256);)Oe+=this[z+Ge]*He;return He*=128,Oe>=He&&(Oe-=Math.pow(2,8*J)),Oe},u.prototype.readIntBE=function(z,J,pe){z=z>>>0,J=J>>>0,pe||W(z,J,this.length);let Oe=J,He=1,Ge=this[z+--Oe];for(;Oe>0&&(He*=256);)Ge+=this[z+--Oe]*He;return He*=128,Ge>=He&&(Ge-=Math.pow(2,8*J)),Ge},u.prototype.readInt8=function(z,J){return z=z>>>0,J||W(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},u.prototype.readInt16LE=function(z,J){z=z>>>0,J||W(z,2,this.length);const pe=this[z]|this[z+1]<<8;return pe&32768?pe|4294901760:pe},u.prototype.readInt16BE=function(z,J){z=z>>>0,J||W(z,2,this.length);const pe=this[z+1]|this[z]<<8;return pe&32768?pe|4294901760:pe},u.prototype.readInt32LE=function(z,J){return z=z>>>0,J||W(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},u.prototype.readInt32BE=function(z,J){return z=z>>>0,J||W(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},u.prototype.readBigInt64LE=Xe(function(z){z=z>>>0,re(z,"offset");const J=this[z],pe=this[z+7];(J===void 0||pe===void 0)&&le(z,this.length-8);const Oe=this[z+4]+this[z+5]*2**8+this[z+6]*2**16+(pe<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(J+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24)}),u.prototype.readBigInt64BE=Xe(function(z){z=z>>>0,re(z,"offset");const J=this[z],pe=this[z+7];(J===void 0||pe===void 0)&&le(z,this.length-8);const Oe=(J<<24)+this[++z]*2**16+this[++z]*2**8+this[++z];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+pe)}),u.prototype.readFloatLE=function(z,J){return z=z>>>0,J||W(z,4,this.length),n.read(this,z,!0,23,4)},u.prototype.readFloatBE=function(z,J){return z=z>>>0,J||W(z,4,this.length),n.read(this,z,!1,23,4)},u.prototype.readDoubleLE=function(z,J){return z=z>>>0,J||W(z,8,this.length),n.read(this,z,!0,52,8)},u.prototype.readDoubleBE=function(z,J){return z=z>>>0,J||W(z,8,this.length),n.read(this,z,!1,52,8)};function q(ie,z,J,pe,Oe,He){if(!u.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>Oe||z<He)throw new RangeError('"value" argument is out of bounds');if(J+pe>ie.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(z,J,pe,Oe){if(z=+z,J=J>>>0,pe=pe>>>0,!Oe){const $t=Math.pow(2,8*pe)-1;q(this,z,J,pe,$t,0)}let He=1,Ge=0;for(this[J]=z&255;++Ge<pe&&(He*=256);)this[J+Ge]=z/He&255;return J+pe},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(z,J,pe,Oe){if(z=+z,J=J>>>0,pe=pe>>>0,!Oe){const $t=Math.pow(2,8*pe)-1;q(this,z,J,pe,$t,0)}let He=pe-1,Ge=1;for(this[J+He]=z&255;--He>=0&&(Ge*=256);)this[J+He]=z/Ge&255;return J+pe},u.prototype.writeUint8=u.prototype.writeUInt8=function(z,J,pe){return z=+z,J=J>>>0,pe||q(this,z,J,1,255,0),this[J]=z&255,J+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(z,J,pe){return z=+z,J=J>>>0,pe||q(this,z,J,2,65535,0),this[J]=z&255,this[J+1]=z>>>8,J+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(z,J,pe){return z=+z,J=J>>>0,pe||q(this,z,J,2,65535,0),this[J]=z>>>8,this[J+1]=z&255,J+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(z,J,pe){return z=+z,J=J>>>0,pe||q(this,z,J,4,4294967295,0),this[J+3]=z>>>24,this[J+2]=z>>>16,this[J+1]=z>>>8,this[J]=z&255,J+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(z,J,pe){return z=+z,J=J>>>0,pe||q(this,z,J,4,4294967295,0),this[J]=z>>>24,this[J+1]=z>>>16,this[J+2]=z>>>8,this[J+3]=z&255,J+4};function ne(ie,z,J,pe,Oe){ge(z,pe,Oe,ie,J,7);let He=Number(z&BigInt(4294967295));ie[J++]=He,He=He>>8,ie[J++]=He,He=He>>8,ie[J++]=He,He=He>>8,ie[J++]=He;let Ge=Number(z>>BigInt(32)&BigInt(4294967295));return ie[J++]=Ge,Ge=Ge>>8,ie[J++]=Ge,Ge=Ge>>8,ie[J++]=Ge,Ge=Ge>>8,ie[J++]=Ge,J}function te(ie,z,J,pe,Oe){ge(z,pe,Oe,ie,J,7);let He=Number(z&BigInt(4294967295));ie[J+7]=He,He=He>>8,ie[J+6]=He,He=He>>8,ie[J+5]=He,He=He>>8,ie[J+4]=He;let Ge=Number(z>>BigInt(32)&BigInt(4294967295));return ie[J+3]=Ge,Ge=Ge>>8,ie[J+2]=Ge,Ge=Ge>>8,ie[J+1]=Ge,Ge=Ge>>8,ie[J]=Ge,J+8}u.prototype.writeBigUInt64LE=Xe(function(z,J=0){return ne(this,z,J,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Xe(function(z,J=0){return te(this,z,J,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(z,J,pe,Oe){if(z=+z,J=J>>>0,!Oe){const Lt=Math.pow(2,8*pe-1);q(this,z,J,pe,Lt-1,-Lt)}let He=0,Ge=1,$t=0;for(this[J]=z&255;++He<pe&&(Ge*=256);)z<0&&$t===0&&this[J+He-1]!==0&&($t=1),this[J+He]=(z/Ge>>0)-$t&255;return J+pe},u.prototype.writeIntBE=function(z,J,pe,Oe){if(z=+z,J=J>>>0,!Oe){const Lt=Math.pow(2,8*pe-1);q(this,z,J,pe,Lt-1,-Lt)}let He=pe-1,Ge=1,$t=0;for(this[J+He]=z&255;--He>=0&&(Ge*=256);)z<0&&$t===0&&this[J+He+1]!==0&&($t=1),this[J+He]=(z/Ge>>0)-$t&255;return J+pe},u.prototype.writeInt8=function(z,J,pe){return z=+z,J=J>>>0,pe||q(this,z,J,1,127,-128),z<0&&(z=255+z+1),this[J]=z&255,J+1},u.prototype.writeInt16LE=function(z,J,pe){return z=+z,J=J>>>0,pe||q(this,z,J,2,32767,-32768),this[J]=z&255,this[J+1]=z>>>8,J+2},u.prototype.writeInt16BE=function(z,J,pe){return z=+z,J=J>>>0,pe||q(this,z,J,2,32767,-32768),this[J]=z>>>8,this[J+1]=z&255,J+2},u.prototype.writeInt32LE=function(z,J,pe){return z=+z,J=J>>>0,pe||q(this,z,J,4,2147483647,-2147483648),this[J]=z&255,this[J+1]=z>>>8,this[J+2]=z>>>16,this[J+3]=z>>>24,J+4},u.prototype.writeInt32BE=function(z,J,pe){return z=+z,J=J>>>0,pe||q(this,z,J,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[J]=z>>>24,this[J+1]=z>>>16,this[J+2]=z>>>8,this[J+3]=z&255,J+4},u.prototype.writeBigInt64LE=Xe(function(z,J=0){return ne(this,z,J,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Xe(function(z,J=0){return te(this,z,J,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Y(ie,z,J,pe,Oe,He){if(J+pe>ie.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("Index out of range")}function de(ie,z,J,pe,Oe){return z=+z,J=J>>>0,Oe||Y(ie,z,J,4),n.write(ie,z,J,pe,23,4),J+4}u.prototype.writeFloatLE=function(z,J,pe){return de(this,z,J,!0,pe)},u.prototype.writeFloatBE=function(z,J,pe){return de(this,z,J,!1,pe)};function Se(ie,z,J,pe,Oe){return z=+z,J=J>>>0,Oe||Y(ie,z,J,8),n.write(ie,z,J,pe,52,8),J+8}u.prototype.writeDoubleLE=function(z,J,pe){return Se(this,z,J,!0,pe)},u.prototype.writeDoubleBE=function(z,J,pe){return Se(this,z,J,!1,pe)},u.prototype.copy=function(z,J,pe,Oe){if(!u.isBuffer(z))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Oe&&Oe!==0&&(Oe=this.length),J>=z.length&&(J=z.length),J||(J=0),Oe>0&&Oe<pe&&(Oe=pe),Oe===pe||z.length===0||this.length===0)return 0;if(J<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),z.length-J<Oe-pe&&(Oe=z.length-J+pe);const He=Oe-pe;return this===z&&typeof i.prototype.copyWithin=="function"?this.copyWithin(J,pe,Oe):i.prototype.set.call(z,this.subarray(pe,Oe),J),He},u.prototype.fill=function(z,J,pe,Oe){if(typeof z=="string"){if(typeof J=="string"?(Oe=J,J=0,pe=this.length):typeof pe=="string"&&(Oe=pe,pe=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!u.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(z.length===1){const Ge=z.charCodeAt(0);(Oe==="utf8"&&Ge<128||Oe==="latin1")&&(z=Ge)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(J<0||this.length<J||this.length<pe)throw new RangeError("Out of range index");if(pe<=J)return this;J=J>>>0,pe=pe===void 0?this.length:pe>>>0,z||(z=0);let He;if(typeof z=="number")for(He=J;He<pe;++He)this[He]=z;else{const Ge=u.isBuffer(z)?z:u.from(z,Oe),$t=Ge.length;if($t===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(He=0;He<pe-J;++He)this[He+J]=Ge[He%$t]}return this};const xe={};function Ae(ie,z,J){xe[ie]=class extends J{constructor(){super(),Object.defineProperty(this,"message",{value:z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ie}]`,this.stack,delete this.name}get code(){return ie}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${ie}]: ${this.message}`}}}Ae("ERR_BUFFER_OUT_OF_BOUNDS",function(ie){return ie?`${ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ae("ERR_INVALID_ARG_TYPE",function(ie,z){return`The "${ie}" argument must be of type number. Received type ${typeof z}`},TypeError),Ae("ERR_OUT_OF_RANGE",function(ie,z,J){let pe=`The value of "${ie}" is out of range.`,Oe=J;return Number.isInteger(J)&&Math.abs(J)>2**32?Oe=Pe(String(J)):typeof J=="bigint"&&(Oe=String(J),(J>BigInt(2)**BigInt(32)||J<-(BigInt(2)**BigInt(32)))&&(Oe=Pe(Oe)),Oe+="n"),pe+=` It must be ${z}. Received ${Oe}`,pe},RangeError);function Pe(ie){let z="",J=ie.length;const pe=ie[0]==="-"?1:0;for(;J>=pe+4;J-=3)z=`_${ie.slice(J-3,J)}${z}`;return`${ie.slice(0,J)}${z}`}function K(ie,z,J){re(z,"offset"),(ie[z]===void 0||ie[z+J]===void 0)&&le(z,ie.length-(J+1))}function ge(ie,z,J,pe,Oe,He){if(ie>J||ie<z){const Ge=typeof z=="bigint"?"n":"";let $t;throw z===0||z===BigInt(0)?$t=`>= 0${Ge} and < 2${Ge} ** ${(He+1)*8}${Ge}`:$t=`>= -(2${Ge} ** ${(He+1)*8-1}${Ge}) and < 2 ** ${(He+1)*8-1}${Ge}`,new xe.ERR_OUT_OF_RANGE("value",$t,ie)}K(pe,Oe,He)}function re(ie,z){if(typeof ie!="number")throw new xe.ERR_INVALID_ARG_TYPE(z,"number",ie)}function le(ie,z,J){throw Math.floor(ie)!==ie?(re(ie,J),new xe.ERR_OUT_OF_RANGE("offset","an integer",ie)):z<0?new xe.ERR_BUFFER_OUT_OF_BOUNDS:new xe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${z}`,ie)}const se=/[^+/0-9A-Za-z-_]/g;function fe(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(se,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function Ce(ie,z){z=z||1/0;let J;const pe=ie.length;let Oe=null;const He=[];for(let Ge=0;Ge<pe;++Ge){if(J=ie.charCodeAt(Ge),J>55295&&J<57344){if(!Oe){if(J>56319){(z-=3)>-1&&He.push(239,191,189);continue}else if(Ge+1===pe){(z-=3)>-1&&He.push(239,191,189);continue}Oe=J;continue}if(J<56320){(z-=3)>-1&&He.push(239,191,189),Oe=J;continue}J=(Oe-55296<<10|J-56320)+65536}else Oe&&(z-=3)>-1&&He.push(239,191,189);if(Oe=null,J<128){if((z-=1)<0)break;He.push(J)}else if(J<2048){if((z-=2)<0)break;He.push(J>>6|192,J&63|128)}else if(J<65536){if((z-=3)<0)break;He.push(J>>12|224,J>>6&63|128,J&63|128)}else if(J<1114112){if((z-=4)<0)break;He.push(J>>18|240,J>>12&63|128,J>>6&63|128,J&63|128)}else throw new Error("Invalid code point")}return He}function Ie(ie){const z=[];for(let J=0;J<ie.length;++J)z.push(ie.charCodeAt(J)&255);return z}function we(ie,z){let J,pe,Oe;const He=[];for(let Ge=0;Ge<ie.length&&!((z-=2)<0);++Ge)J=ie.charCodeAt(Ge),pe=J>>8,Oe=J%256,He.push(Oe),He.push(pe);return He}function Ue(ie){return e.toByteArray(fe(ie))}function Fe(ie,z,J,pe){let Oe;for(Oe=0;Oe<pe&&!(Oe+J>=z.length||Oe>=ie.length);++Oe)z[Oe+J]=ie[Oe];return Oe}function Be(ie,z){return ie instanceof z||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===z.name}function ke(ie){return ie!==ie}const Je=function(){const ie="0123456789abcdef",z=new Array(256);for(let J=0;J<16;++J){const pe=J*16;for(let Oe=0;Oe<16;++Oe)z[pe+Oe]=ie[J]+ie[Oe]}return z}();function Xe(ie){return typeof BigInt>"u"?nt:ie}function nt(){throw new Error("BigInt not supported")}})(bs);const _t=bs.Buffer,KSe=bs.Blob,YSe=bs.BlobOptions,vZ=bs.Buffer,JSe=bs.File,XSe=bs.FileOptions,ZSe=bs.INSPECT_MAX_BYTES,QSe=bs.SlowBuffer,eEe=bs.TranscodeEncoding,tEe=bs.atob,nEe=bs.btoa,rEe=bs.constants,sEe=bs.isAscii,iEe=bs.isUtf8,oEe=bs.kMaxLength,aEe=bs.kStringMaxLength,lEe=bs.resolveObjectURL,cEe=bs.transcode,uEe=Object.freeze(Object.defineProperty({__proto__:null,Blob:KSe,BlobOptions:YSe,Buffer:vZ,File:JSe,FileOptions:XSe,INSPECT_MAX_BYTES:ZSe,SlowBuffer:QSe,TranscodeEncoding:eEe,atob:tEe,btoa:nEe,constants:rEe,default:_t,isAscii:sEe,isUtf8:iEe,kMaxLength:oEe,kStringMaxLength:aEe,resolveObjectURL:lEe,transcode:cEe},Symbol.toStringTag,{value:"Module"}));var K0={exports:{}};const dEe=typeof _t<"u",y7=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,v7=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function wZ(t,e,n){n==null&&e!==null&&typeof e=="object"&&(n=e,e=void 0),dEe&&_t.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));const r=JSON.parse(t,e);if(r===null||typeof r!="object")return r;const s=n&&n.protoAction||"error",i=n&&n.constructorAction||"error";if(s==="ignore"&&i==="ignore")return r;if(s!=="ignore"&&i!=="ignore"){if(y7.test(t)===!1&&v7.test(t)===!1)return r}else if(s!=="ignore"&&i==="ignore"){if(y7.test(t)===!1)return r}else if(v7.test(t)===!1)return r;return xZ(r,{protoAction:s,constructorAction:i,safe:n&&n.safe})}function xZ(t,{protoAction:e="error",constructorAction:n="error",safe:r}={}){let s=[t];for(;s.length;){const i=s;s=[];for(const o of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(r===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(n!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(r===!0)return null;if(n==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(const a in o){const l=o[a];l&&typeof l=="object"&&s.push(l)}}}return t}function r6(t,e,n){const r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return wZ(t,e,n)}finally{Error.stackTraceLimit=r}}function hEe(t,e){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return wZ(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=n}}K0.exports=r6;K0.exports.default=r6;K0.exports.parse=r6;K0.exports.safeParse=hEe;K0.exports.scan=xZ;var fEe=K0.exports;const Jr=yi(fEe);var pEe=Object.defineProperty,mEe=(t,e,n)=>e in t?pEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W_=(t,e,n)=>mEe(t,typeof e!="symbol"?e+"":e,n);let w7=class extends Error{constructor(e,n){super(e),W_(this,"type"),W_(this,"field"),W_(this,"value"),W_(this,"line"),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function l3(t){}function gEe(t){const{onEvent:e=l3,onError:n=l3,onRetry:r=l3,onComment:s}=t;let i="",o=!0,a,l="",c="";function u(m){const g=o?m.replace(/^\xEF\xBB\xBF/,""):m,[b,v]=bEe(`${i}${g}`);for(const w of b)d(w);i=v,o=!1}function d(m){if(m===""){f();return}if(m.startsWith(":")){s&&s(m.slice(m.startsWith(": ")?2:1));return}const g=m.indexOf(":");if(g!==-1){const b=m.slice(0,g),v=m[g+1]===" "?2:1,w=m.slice(g+v);h(b,w,m);return}h(m,"",m)}function h(m,g,b){switch(m){case"event":c=g;break;case"data":l=`${l}${g}
`;break;case"id":a=g.includes("\0")?void 0:g;break;case"retry":/^\d+$/.test(g)?r(parseInt(g,10)):n(new w7(`Invalid \`retry\` value: "${g}"`,{type:"invalid-retry",value:g,line:b}));break;default:n(new w7(`Unknown field "${m.length>20?`${m.slice(0,20)}`:m}"`,{type:"unknown-field",field:m,value:g,line:b}));break}}function f(){l.length>0&&e({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function p(m={}){i&&m.consume&&d(i),a=void 0,l="",c="",i=""}return{feed:u,reset:p}}function bEe(t){const e=[];let n="";const r=t.length;for(let s=0;s<r;s++){const i=t[s];i==="\r"&&t[s+1]===`
`?(e.push(n),n="",s++):i==="\r"||i===`
`?(e.push(n),n=""):n+=i}return[e,n]}let s6=class extends TransformStream{constructor({onError:e,onRetry:n,onComment:r}={}){let s;super({start(i){s=gEe({onEvent:o=>{i.enqueue(o)},onError(o){e==="terminate"?i.error(o):typeof e=="function"&&e(o)},onRetry:n,onComment:r})},transform(i){s.feed(i)}})}};var yEe={};function n0(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function hA(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var vEe=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=Dp(n,e);if(t==null)return s;if(n.includes(r))throw new PSe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${t}${r}${s(i)}`},ay=vEe();function wEe(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}function c3(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function xEe({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new V_({message:`${r} API key must be a string.`});if(typeof Sn>"u")throw new V_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=yEe[e],t==null)throw new V_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new V_({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var MI=Symbol.for("vercel.ai.validator");function _Ee(t){return{[MI]:!0,validate:t}}function SEe(t){return typeof t=="object"&&t!==null&&MI in t&&t[MI]===!0&&"validate"in t}function EEe(t){return SEe(t)?t:kEe(t)}function kEe(t){return _Ee(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function CEe({value:t,schema:e}){const n=_Z({value:t,schema:e});if(!n.success)throw IE.wrap({value:t,cause:n.error});return n.value}function _Z({value:t,schema:e}){const n=EEe(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:IE.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:IE.wrap({value:t,cause:r})}}}function AEe({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?n:CEe({value:n,schema:e})}catch(n){throw NE.isInstance(n)||IE.isInstance(n)?n:new NE({text:t,cause:n})}}function SZ({text:t,schema:e}){try{const n=Jr.parse(t);if(e==null)return{success:!0,value:n,rawValue:n};const r=_Z({value:n,schema:e});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:NE.isInstance(n)?n:new NE({text:t,cause:n})}}}function x7(t){try{return Jr.parse(t),!0}catch{return!1}}var TEe=()=>globalThis.fetch,r0=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>PEe({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),PEe=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=TEe()})=>{try{const a=await o(t,{method:"POST",headers:wEe(e),body:n.content,signal:i}),l=hA(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw c3(u)||pu.isInstance(u)?u:new pu({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(c3(c)||pu.isInstance(c))?c:new pu({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(c3(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new pu({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},NEe=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=hA(r);if(o.trim()==="")return{responseHeaders:a,value:new pu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=AEe({text:o,schema:t});return{responseHeaders:a,value:new pu({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new pu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},EZ=t=>async({response:e})=>{const n=hA(e);if(e.body==null)throw new ASe({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new s6).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(SZ({text:r,schema:t}))}}))}},fA=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=SZ({text:s,schema:t}),o=hA(e);if(!i.success)throw new pu({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:IEe}=globalThis;function REe(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return IEe(e)}function OEe(t){return t?.replace(/\/$/,"")}var Nn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Nn||(Nn={}));var jI;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(jI||(jI={}));const Nt=Nn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),cu=t=>{switch(typeof t){case"undefined":return Nt.undefined;case"string":return Nt.string;case"number":return isNaN(t)?Nt.nan:Nt.number;case"boolean":return Nt.boolean;case"function":return Nt.function;case"bigint":return Nt.bigint;case"symbol":return Nt.symbol;case"object":return Array.isArray(t)?Nt.array:t===null?Nt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Nt.promise:typeof Map<"u"&&t instanceof Map?Nt.map:typeof Set<"u"&&t instanceof Set?Nt.set:typeof Date<"u"&&t instanceof Date?Nt.date:Nt.object;default:return Nt.unknown}},pt=Nn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),LEe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class zo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof zo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Nn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}zo.create=t=>new zo(t);const s0=(t,e)=>{let n;switch(t.code){case pt.invalid_type:t.received===Nt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case pt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Nn.jsonStringifyReplacer)}`;break;case pt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Nn.joinValues(t.keys,", ")}`;break;case pt.invalid_union:n="Invalid input";break;case pt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Nn.joinValues(t.options)}`;break;case pt.invalid_enum_value:n=`Invalid enum value. Expected ${Nn.joinValues(t.options)}, received '${t.received}'`;break;case pt.invalid_arguments:n="Invalid function arguments";break;case pt.invalid_return_type:n="Invalid function return type";break;case pt.invalid_date:n="Invalid date";break;case pt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Nn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case pt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case pt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case pt.custom:n="Invalid input";break;case pt.invalid_intersection_types:n="Intersection results could not be merged";break;case pt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case pt.not_finite:n="Number must be finite";break;default:n=e.defaultError,Nn.assertNever(t)}return{message:n}};let kZ=s0;function DEe(t){kZ=t}function RE(){return kZ}const OE=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},MEe=[];function Ct(t,e){const n=RE(),r=OE({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===s0?void 0:s0].filter(s=>!!s)});t.common.issues.push(r)}class mi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Kt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return mi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Kt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Kt=Object.freeze({status:"aborted"}),ag=t=>({status:"dirty",value:t}),ji=t=>({status:"valid",value:t}),FI=t=>t.status==="aborted",BI=t=>t.status==="dirty",dp=t=>t.status==="valid",p1=t=>typeof Promise<"u"&&t instanceof Promise;function LE(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function CZ(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Ft;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ft||(Ft={}));var Vy,Wy;class Rc{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _7=(t,e)=>{if(dp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new zo(t.common.issues);return this._error=n,this._error}}};function dn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var l,c;const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??n)!==null&&c!==void 0?c:a.defaultError}},description:s}}class pn{get description(){return this._def.description}_getType(e){return cu(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:cu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new mi,ctx:{common:e.parent.common,data:e.data,parsedType:cu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(p1(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:cu(e)},i=this._parseSync({data:e,path:s.path,parent:s});return _7(s,i)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:cu(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return dp(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>dp(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:cu(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(p1(s)?s:Promise.resolve(s));return _7(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:pt.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new fl({schema:this,typeName:xt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ul.create(this,this._def)}nullable(){return lh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return cl.create(this)}promise(){return o0.create(this,this._def)}or(e){return y1.create([this,e],this._def)}and(e){return v1.create(this,e,this._def)}transform(e){return new fl({...dn(this._def),schema:this,typeName:xt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new E1({...dn(this._def),innerType:this,defaultValue:n,typeName:xt.ZodDefault})}brand(){return new i6({typeName:xt.ZodBranded,type:this,...dn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new k1({...dn(this._def),innerType:this,catchValue:n,typeName:xt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Fw.create(this,e)}readonly(){return C1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const jEe=/^c[^\s-]{8,}$/i,FEe=/^[0-9a-z]+$/,BEe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,$Ee=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,UEe=/^[a-z0-9_-]{21}$/i,HEe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,zEe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,VEe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,WEe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let u3;const GEe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qEe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,KEe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,YEe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,JEe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,XEe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,AZ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ZEe=new RegExp(`^${AZ}$`);function TZ(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function QEe(t){return new RegExp(`^${TZ(t)}$`)}function PZ(t){let e=`${AZ}T${TZ(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function eke(t,e){return!!((e==="v4"||!e)&&GEe.test(t)||(e==="v6"||!e)&&KEe.test(t))}function tke(t,e){if(!HEe.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function nke(t,e){return!!((e==="v4"||!e)&&qEe.test(t)||(e==="v6"||!e)&&YEe.test(t))}class il extends pn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Nt.string){const i=this._getOrReturnCtx(e);return Ct(i,{code:pt.invalid_type,expected:Nt.string,received:i.parsedType}),Kt}const r=new mi;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ct(s,{code:pt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ct(s,{code:pt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ct(s,{code:pt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ct(s,{code:pt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")VEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"email",code:pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")u3||(u3=new RegExp(WEe,"u")),u3.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"emoji",code:pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")$Ee.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"uuid",code:pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")UEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"nanoid",code:pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")jEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"cuid",code:pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")FEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"cuid2",code:pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")BEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"ulid",code:pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ct(s,{validation:"url",code:pt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"regex",code:pt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ct(s,{code:pt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ct(s,{code:pt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ct(s,{code:pt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?PZ(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{code:pt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?ZEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{code:pt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?QEe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{code:pt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?zEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"duration",code:pt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?eke(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"ip",code:pt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?tke(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"jwt",code:pt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?nke(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"cidr",code:pt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?JEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"base64",code:pt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?XEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ct(s,{validation:"base64url",code:pt.invalid_string,message:i.message}),r.dirty()):Nn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:pt.invalid_string,...Ft.errToObj(r)})}_addCheck(e){return new il({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ft.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ft.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ft.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ft.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ft.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ft.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ft.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ft.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ft.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ft.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ft.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ft.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ft.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Ft.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Ft.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Ft.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ft.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Ft.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ft.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ft.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ft.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ft.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ft.errToObj(n)})}nonempty(e){return this.min(1,Ft.errToObj(e))}trim(){return new il({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new il({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new il({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}il.create=t=>{var e;return new il({checks:[],typeName:xt.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...dn(t)})};function rke(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class ih extends pn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Nt.number){const i=this._getOrReturnCtx(e);return Ct(i,{code:pt.invalid_type,expected:Nt.number,received:i.parsedType}),Kt}let r;const s=new mi;for(const i of this._def.checks)i.kind==="int"?Nn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ct(r,{code:pt.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:pt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:pt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?rke(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:pt.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ct(r,{code:pt.not_finite,message:i.message}),s.dirty()):Nn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ft.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ft.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ft.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ft.toString(n))}setLimit(e,n,r,s){return new ih({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ft.toString(s)}]})}_addCheck(e){return new ih({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ft.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ft.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ft.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ft.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ft.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ft.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Nn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ih.create=t=>new ih({checks:[],typeName:xt.ZodNumber,coerce:t?.coerce||!1,...dn(t)});class oh extends pn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Nt.bigint)return this._getInvalidInput(e);let r;const s=new mi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:pt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:pt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:pt.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Nn.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ct(n,{code:pt.invalid_type,expected:Nt.bigint,received:n.parsedType}),Kt}gte(e,n){return this.setLimit("min",e,!0,Ft.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ft.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ft.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ft.toString(n))}setLimit(e,n,r,s){return new oh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ft.toString(s)}]})}_addCheck(e){return new oh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ft.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ft.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}oh.create=t=>{var e;return new oh({checks:[],typeName:xt.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...dn(t)})};class m1 extends pn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Nt.boolean){const r=this._getOrReturnCtx(e);return Ct(r,{code:pt.invalid_type,expected:Nt.boolean,received:r.parsedType}),Kt}return ji(e.data)}}m1.create=t=>new m1({typeName:xt.ZodBoolean,coerce:t?.coerce||!1,...dn(t)});class hp extends pn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Nt.date){const i=this._getOrReturnCtx(e);return Ct(i,{code:pt.invalid_type,expected:Nt.date,received:i.parsedType}),Kt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ct(i,{code:pt.invalid_date}),Kt}const r=new mi;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ct(s,{code:pt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ct(s,{code:pt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Nn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new hp({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ft.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ft.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}hp.create=t=>new hp({checks:[],coerce:t?.coerce||!1,typeName:xt.ZodDate,...dn(t)});class DE extends pn{_parse(e){if(this._getType(e)!==Nt.symbol){const r=this._getOrReturnCtx(e);return Ct(r,{code:pt.invalid_type,expected:Nt.symbol,received:r.parsedType}),Kt}return ji(e.data)}}DE.create=t=>new DE({typeName:xt.ZodSymbol,...dn(t)});class g1 extends pn{_parse(e){if(this._getType(e)!==Nt.undefined){const r=this._getOrReturnCtx(e);return Ct(r,{code:pt.invalid_type,expected:Nt.undefined,received:r.parsedType}),Kt}return ji(e.data)}}g1.create=t=>new g1({typeName:xt.ZodUndefined,...dn(t)});class b1 extends pn{_parse(e){if(this._getType(e)!==Nt.null){const r=this._getOrReturnCtx(e);return Ct(r,{code:pt.invalid_type,expected:Nt.null,received:r.parsedType}),Kt}return ji(e.data)}}b1.create=t=>new b1({typeName:xt.ZodNull,...dn(t)});class i0 extends pn{constructor(){super(...arguments),this._any=!0}_parse(e){return ji(e.data)}}i0.create=t=>new i0({typeName:xt.ZodAny,...dn(t)});class Yf extends pn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ji(e.data)}}Yf.create=t=>new Yf({typeName:xt.ZodUnknown,...dn(t)});class Uu extends pn{_parse(e){const n=this._getOrReturnCtx(e);return Ct(n,{code:pt.invalid_type,expected:Nt.never,received:n.parsedType}),Kt}}Uu.create=t=>new Uu({typeName:xt.ZodNever,...dn(t)});class ME extends pn{_parse(e){if(this._getType(e)!==Nt.undefined){const r=this._getOrReturnCtx(e);return Ct(r,{code:pt.invalid_type,expected:Nt.void,received:r.parsedType}),Kt}return ji(e.data)}}ME.create=t=>new ME({typeName:xt.ZodVoid,...dn(t)});class cl extends pn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Nt.array)return Ct(n,{code:pt.invalid_type,expected:Nt.array,received:n.parsedType}),Kt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Ct(n,{code:o?pt.too_big:pt.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ct(n,{code:pt.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ct(n,{code:pt.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Rc(n,o,n.path,a)))).then(o=>mi.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Rc(n,o,n.path,a)));return mi.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new cl({...this._def,minLength:{value:e,message:Ft.toString(n)}})}max(e,n){return new cl({...this._def,maxLength:{value:e,message:Ft.toString(n)}})}length(e,n){return new cl({...this._def,exactLength:{value:e,message:Ft.toString(n)}})}nonempty(e){return this.min(1,e)}}cl.create=(t,e)=>new cl({type:t,minLength:null,maxLength:null,exactLength:null,typeName:xt.ZodArray,...dn(e)});function Ym(t){if(t instanceof Tr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ul.create(Ym(r))}return new Tr({...t._def,shape:()=>e})}else return t instanceof cl?new cl({...t._def,type:Ym(t.element)}):t instanceof ul?ul.create(Ym(t.unwrap())):t instanceof lh?lh.create(Ym(t.unwrap())):t instanceof Oc?Oc.create(t.items.map(e=>Ym(e))):t}class Tr extends pn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Nn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Nt.object){const c=this._getOrReturnCtx(e);return Ct(c,{code:pt.invalid_type,expected:Nt.object,received:c.parsedType}),Kt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Uu&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],d=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Rc(s,d,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Uu){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(Ct(s,{code:pt.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Rc(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,h=await u.value;c.push({key:d,value:h,alwaysSet:u.alwaysSet})}return c}).then(c=>mi.mergeObjectSync(r,c)):mi.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Ft.errToObj,new Tr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ft.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Tr({...this._def,unknownKeys:"strip"})}passthrough(){return new Tr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Tr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Tr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:xt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Tr({...this._def,catchall:e})}pick(e){const n={};return Nn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Tr({...this._def,shape:()=>n})}omit(e){const n={};return Nn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Tr({...this._def,shape:()=>n})}deepPartial(){return Ym(this)}partial(e){const n={};return Nn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Tr({...this._def,shape:()=>n})}required(e){const n={};return Nn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ul;)i=i._def.innerType;n[r]=i}}),new Tr({...this._def,shape:()=>n})}keyof(){return NZ(Nn.objectKeys(this.shape))}}Tr.create=(t,e)=>new Tr({shape:()=>t,unknownKeys:"strip",catchall:Uu.create(),typeName:xt.ZodObject,...dn(e)});Tr.strictCreate=(t,e)=>new Tr({shape:()=>t,unknownKeys:"strict",catchall:Uu.create(),typeName:xt.ZodObject,...dn(e)});Tr.lazycreate=(t,e)=>new Tr({shape:t,unknownKeys:"strip",catchall:Uu.create(),typeName:xt.ZodObject,...dn(e)});class y1 extends pn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new zo(a.ctx.common.issues));return Ct(n,{code:pt.invalid_union,unionErrors:o}),Kt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new zo(l));return Ct(n,{code:pt.invalid_union,unionErrors:a}),Kt}}get options(){return this._def.options}}y1.create=(t,e)=>new y1({options:t,typeName:xt.ZodUnion,...dn(e)});const iu=t=>t instanceof x1?iu(t.schema):t instanceof fl?iu(t.innerType()):t instanceof _1?[t.value]:t instanceof ah?t.options:t instanceof S1?Nn.objectValues(t.enum):t instanceof E1?iu(t._def.innerType):t instanceof g1?[void 0]:t instanceof b1?[null]:t instanceof ul?[void 0,...iu(t.unwrap())]:t instanceof lh?[null,...iu(t.unwrap())]:t instanceof i6||t instanceof C1?iu(t.unwrap()):t instanceof k1?iu(t._def.innerType):[];class pA extends pn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Nt.object)return Ct(n,{code:pt.invalid_type,expected:Nt.object,received:n.parsedType}),Kt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ct(n,{code:pt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Kt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=iu(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new pA({typeName:xt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...dn(r)})}}function $I(t,e){const n=cu(t),r=cu(e);if(t===e)return{valid:!0,data:t};if(n===Nt.object&&r===Nt.object){const s=Nn.objectKeys(e),i=Nn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=$I(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Nt.array&&r===Nt.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=$I(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===Nt.date&&r===Nt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class v1 extends pn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(FI(i)||FI(o))return Kt;const a=$I(i.value,o.value);return a.valid?((BI(i)||BI(o))&&n.dirty(),{status:n.value,value:a.data}):(Ct(r,{code:pt.invalid_intersection_types}),Kt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}v1.create=(t,e,n)=>new v1({left:t,right:e,typeName:xt.ZodIntersection,...dn(n)});class Oc extends pn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Nt.array)return Ct(r,{code:pt.invalid_type,expected:Nt.array,received:r.parsedType}),Kt;if(r.data.length<this._def.items.length)return Ct(r,{code:pt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Kt;!this._def.rest&&r.data.length>this._def.items.length&&(Ct(r,{code:pt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Rc(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>mi.mergeArray(n,o)):mi.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Oc({...this._def,rest:e})}}Oc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Oc({items:t,typeName:xt.ZodTuple,rest:null,...dn(e)})};class w1 extends pn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Nt.object)return Ct(r,{code:pt.invalid_type,expected:Nt.object,received:r.parsedType}),Kt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Rc(r,a,r.path,a)),value:o._parse(new Rc(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?mi.mergeObjectAsync(n,s):mi.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof pn?new w1({keyType:e,valueType:n,typeName:xt.ZodRecord,...dn(r)}):new w1({keyType:il.create(),valueType:e,typeName:xt.ZodRecord,...dn(n)})}}class jE extends pn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Nt.map)return Ct(r,{code:pt.invalid_type,expected:Nt.map,received:r.parsedType}),Kt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new Rc(r,a,r.path,[c,"key"])),value:i._parse(new Rc(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Kt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Kt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}jE.create=(t,e,n)=>new jE({valueType:e,keyType:t,typeName:xt.ZodMap,...dn(n)});class fp extends pn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Nt.set)return Ct(r,{code:pt.invalid_type,expected:Nt.set,received:r.parsedType}),Kt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ct(r,{code:pt.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ct(r,{code:pt.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Kt;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new Rc(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new fp({...this._def,minSize:{value:e,message:Ft.toString(n)}})}max(e,n){return new fp({...this._def,maxSize:{value:e,message:Ft.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}fp.create=(t,e)=>new fp({valueType:t,minSize:null,maxSize:null,typeName:xt.ZodSet,...dn(e)});class xg extends pn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Nt.function)return Ct(n,{code:pt.invalid_type,expected:Nt.function,received:n.parsedType}),Kt;function r(a,l){return OE({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,RE(),s0].filter(c=>!!c),issueData:{code:pt.invalid_arguments,argumentsError:l}})}function s(a,l){return OE({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,RE(),s0].filter(c=>!!c),issueData:{code:pt.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof o0){const a=this;return ji(async function(...l){const c=new zo([]),u=await a._def.args.parseAsync(l,i).catch(f=>{throw c.addIssue(r(l,f)),c}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw c.addIssue(s(d,f)),c})})}else{const a=this;return ji(function(...l){const c=a._def.args.safeParse(l,i);if(!c.success)throw new zo([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new zo([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new xg({...this._def,args:Oc.create(e).rest(Yf.create())})}returns(e){return new xg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new xg({args:e||Oc.create([]).rest(Yf.create()),returns:n||Yf.create(),typeName:xt.ZodFunction,...dn(r)})}}class x1 extends pn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}x1.create=(t,e)=>new x1({getter:t,typeName:xt.ZodLazy,...dn(e)});class _1 extends pn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ct(n,{received:n.data,code:pt.invalid_literal,expected:this._def.value}),Kt}return{status:"valid",value:e.data}}get value(){return this._def.value}}_1.create=(t,e)=>new _1({value:t,typeName:xt.ZodLiteral,...dn(e)});function NZ(t,e){return new ah({values:t,typeName:xt.ZodEnum,...dn(e)})}class ah extends pn{constructor(){super(...arguments),Vy.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ct(n,{expected:Nn.joinValues(r),received:n.parsedType,code:pt.invalid_type}),Kt}if(LE(this,Vy)||CZ(this,Vy,new Set(this._def.values)),!LE(this,Vy).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ct(n,{received:n.data,code:pt.invalid_enum_value,options:r}),Kt}return ji(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ah.create(e,{...this._def,...n})}exclude(e,n=this._def){return ah.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Vy=new WeakMap;ah.create=NZ;class S1 extends pn{constructor(){super(...arguments),Wy.set(this,void 0)}_parse(e){const n=Nn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Nt.string&&r.parsedType!==Nt.number){const s=Nn.objectValues(n);return Ct(r,{expected:Nn.joinValues(s),received:r.parsedType,code:pt.invalid_type}),Kt}if(LE(this,Wy)||CZ(this,Wy,new Set(Nn.getValidEnumValues(this._def.values))),!LE(this,Wy).has(e.data)){const s=Nn.objectValues(n);return Ct(r,{received:r.data,code:pt.invalid_enum_value,options:s}),Kt}return ji(e.data)}get enum(){return this._def.values}}Wy=new WeakMap;S1.create=(t,e)=>new S1({values:t,typeName:xt.ZodNativeEnum,...dn(e)});class o0 extends pn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Nt.promise&&n.common.async===!1)return Ct(n,{code:pt.invalid_type,expected:Nt.promise,received:n.parsedType}),Kt;const r=n.parsedType===Nt.promise?n.data:Promise.resolve(n.data);return ji(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}o0.create=(t,e)=>new o0({type:t,typeName:xt.ZodPromise,...dn(e)});class fl extends pn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===xt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ct(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Kt;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Kt:l.status==="dirty"||n.value==="dirty"?ag(l.value):l});{if(n.value==="aborted")return Kt;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Kt:a.status==="dirty"||n.value==="dirty"?ag(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Kt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Kt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!dp(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>dp(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Nn.assertNever(s)}}fl.create=(t,e,n)=>new fl({schema:t,typeName:xt.ZodEffects,effect:e,...dn(n)});fl.createWithPreprocess=(t,e,n)=>new fl({schema:e,effect:{type:"preprocess",transform:t},typeName:xt.ZodEffects,...dn(n)});class ul extends pn{_parse(e){return this._getType(e)===Nt.undefined?ji(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ul.create=(t,e)=>new ul({innerType:t,typeName:xt.ZodOptional,...dn(e)});class lh extends pn{_parse(e){return this._getType(e)===Nt.null?ji(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}lh.create=(t,e)=>new lh({innerType:t,typeName:xt.ZodNullable,...dn(e)});class E1 extends pn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Nt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}E1.create=(t,e)=>new E1({innerType:t,typeName:xt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...dn(e)});class k1 extends pn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return p1(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zo(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new zo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}k1.create=(t,e)=>new k1({innerType:t,typeName:xt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...dn(e)});class FE extends pn{_parse(e){if(this._getType(e)!==Nt.nan){const r=this._getOrReturnCtx(e);return Ct(r,{code:pt.invalid_type,expected:Nt.nan,received:r.parsedType}),Kt}return{status:"valid",value:e.data}}}FE.create=t=>new FE({typeName:xt.ZodNaN,...dn(t)});const ske=Symbol("zod_brand");class i6 extends pn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Fw extends pn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Kt:i.status==="dirty"?(n.dirty(),ag(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Kt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Fw({in:e,out:n,typeName:xt.ZodPipeline})}}class C1 extends pn{_parse(e){const n=this._def.innerType._parse(e),r=s=>(dp(s)&&(s.value=Object.freeze(s.value)),s);return p1(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}C1.create=(t,e)=>new C1({innerType:t,typeName:xt.ZodReadonly,...dn(e)});function S7(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function IZ(t,e={},n){return t?i0.create().superRefine((r,s)=>{var i,o;const a=t(r);if(a instanceof Promise)return a.then(l=>{var c,u;if(!l){const d=S7(e,r),h=(u=(c=d.fatal)!==null&&c!==void 0?c:n)!==null&&u!==void 0?u:!0;s.addIssue({code:"custom",...d,fatal:h})}});if(!a){const l=S7(e,r),c=(o=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;s.addIssue({code:"custom",...l,fatal:c})}}):i0.create()}const ike={object:Tr.lazycreate};var xt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(xt||(xt={}));const oke=(t,e={message:`Input not instance of ${t.name}`})=>IZ(n=>n instanceof t,e),RZ=il.create,OZ=ih.create,ake=FE.create,lke=oh.create,LZ=m1.create,cke=hp.create,uke=DE.create,dke=g1.create,hke=b1.create,fke=i0.create,pke=Yf.create,mke=Uu.create,gke=ME.create,bke=cl.create,yke=Tr.create,vke=Tr.strictCreate,wke=y1.create,xke=pA.create,_ke=v1.create,Ske=Oc.create,Eke=w1.create,kke=jE.create,Cke=fp.create,Ake=xg.create,Tke=x1.create,Pke=_1.create,Nke=ah.create,Ike=S1.create,Rke=o0.create,E7=fl.create,Oke=ul.create,Lke=lh.create,Dke=fl.createWithPreprocess,Mke=Fw.create,jke=()=>RZ().optional(),Fke=()=>OZ().optional(),Bke=()=>LZ().optional(),$ke={string:t=>il.create({...t,coerce:!0}),number:t=>ih.create({...t,coerce:!0}),boolean:t=>m1.create({...t,coerce:!0}),bigint:t=>oh.create({...t,coerce:!0}),date:t=>hp.create({...t,coerce:!0})},Uke=Kt;var V=Object.freeze({__proto__:null,defaultErrorMap:s0,setErrorMap:DEe,getErrorMap:RE,makeIssue:OE,EMPTY_PATH:MEe,addIssueToContext:Ct,ParseStatus:mi,INVALID:Kt,DIRTY:ag,OK:ji,isAborted:FI,isDirty:BI,isValid:dp,isAsync:p1,get util(){return Nn},get objectUtil(){return jI},ZodParsedType:Nt,getParsedType:cu,ZodType:pn,datetimeRegex:PZ,ZodString:il,ZodNumber:ih,ZodBigInt:oh,ZodBoolean:m1,ZodDate:hp,ZodSymbol:DE,ZodUndefined:g1,ZodNull:b1,ZodAny:i0,ZodUnknown:Yf,ZodNever:Uu,ZodVoid:ME,ZodArray:cl,ZodObject:Tr,ZodUnion:y1,ZodDiscriminatedUnion:pA,ZodIntersection:v1,ZodTuple:Oc,ZodRecord:w1,ZodMap:jE,ZodSet:fp,ZodFunction:xg,ZodLazy:x1,ZodLiteral:_1,ZodEnum:ah,ZodNativeEnum:S1,ZodPromise:o0,ZodEffects:fl,ZodTransformer:fl,ZodOptional:ul,ZodNullable:lh,ZodDefault:E1,ZodCatch:k1,ZodNaN:FE,BRAND:ske,ZodBranded:i6,ZodPipeline:Fw,ZodReadonly:C1,custom:IZ,Schema:pn,ZodSchema:pn,late:ike,get ZodFirstPartyTypeKind(){return xt},coerce:$ke,any:fke,array:bke,bigint:lke,boolean:LZ,date:cke,discriminatedUnion:xke,effect:E7,enum:Nke,function:Ake,instanceof:oke,intersection:_ke,lazy:Tke,literal:Pke,map:kke,nan:ake,nativeEnum:Ike,never:mke,null:hke,nullable:Lke,number:OZ,object:yke,oboolean:Bke,onumber:Fke,optional:Oke,ostring:jke,pipeline:Mke,preprocess:Dke,promise:Rke,record:Eke,set:Cke,strictObject:vke,string:RZ,symbol:uke,transformer:E7,tuple:Ske,undefined:dke,union:wke,unknown:pke,void:gke,NEVER:Uke,ZodIssueCode:pt,quotelessJson:LEe,ZodError:zo});function Hke({prompt:t,useLegacyFunctionCalling:e=!1,systemMessageMode:n="system"}){const r=[];for(const{role:s,content:i}of t)switch(s){case"system":{switch(n){case"system":{r.push({role:"system",content:i});break}case"developer":{r.push({role:"developer",content:i});break}case"remove":break;default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(i.length===1&&i[0].type==="text"){r.push({role:"user",content:i[0].text});break}r.push({role:"user",content:i.map(o=>{var a,l,c;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(a=o.mimeType)!=null?a:"image/jpeg"};base64,${REe(o.image)}`,detail:(c=(l=o.providerMetadata)==null?void 0:l.openai)==null?void 0:c.imageDetail}};case"file":{if(o.data instanceof URL)throw new ro({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};default:throw new ro({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const a=[];for(const l of i)switch(l.type){case"text":{o+=l.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{a.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)}});break}default:{const c=l;throw new Error(`Unsupported part: ${c}`)}}if(e){if(a.length>1)throw new ro({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:a.length>0?a[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:a.length>0?a:void 0});break}case"tool":{for(const o of i)e?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=s;throw new Error(`Unsupported role: ${o}`)}}return r}function k7(t){var e,n;return(n=(e=t?.content)==null?void 0:e.map(({token:r,logprob:s,top_logprobs:i})=>({token:r,logprob:s,topLogprobs:i?i.map(({token:o,logprob:a})=>({token:o,logprob:a})):[]})))!=null?n:void 0}function BE(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var o6=V.object({error:V.object({message:V.string(),type:V.string().nullish(),param:V.any().nullish(),code:V.union([V.string(),V.number()]).nullish()})}),a0=NEe({errorSchema:o6,errorToMessage:t=>t.error.message});function $E({id:t,model:e,created:n}){return{id:t??void 0,modelId:e??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function zke({mode:t,useLegacyFunctionCalling:e=!1,structuredOutputs:n}){var r;const s=(r=t.tools)!=null&&r.length?t.tools:void 0,i=[];if(s==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=t.toolChoice;if(e){const c=[];for(const d of s)d.type==="provider-defined"?i.push({type:"unsupported-tool",tool:d}):c.push({name:d.name,description:d.description,parameters:d.parameters});if(o==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new ro({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:o.toolName},toolWarnings:i}}}const a=[];for(const c of s)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):a.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(o==null)return{tools:a,tool_choice:void 0,toolWarnings:i};const l=o.type;switch(l){case"auto":case"none":case"required":return{tools:a,tool_choice:l,toolWarnings:i};case"tool":return{tools:a,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const c=l;throw new ro({functionality:`Unsupported tool choice type: ${c}`})}}}var Vke=class{constructor(t,e,n){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=n}get supportsStructuredOutputs(){var t;return(t=this.settings.structuredOutputs)!=null?t:UI(this.modelId)}get defaultObjectGenerationMode(){return qke(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u,providerMetadata:d}){var h,f,p,m,g,b,v,w;const _=t.type,S=[];i!=null&&S.push({type:"unsupported-setting",setting:"topK"}),c?.type==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&S.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const E=this.settings.useLegacyFunctionCalling;if(E&&this.settings.parallelToolCalls===!0)throw new ro({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(E&&this.supportsStructuredOutputs)throw new ro({functionality:"structuredOutputs with useLegacyFunctionCalling"});C7(this.modelId)==="remove"&&e.some(x=>x.role==="system")&&S.push({type:"other",message:"system messages are removed for this model"});const k={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:s,frequency_penalty:o,presence_penalty:a,response_format:c?.type==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(h=c.name)!=null?h:"response",description:c.description}}:{type:"json_object"}:void 0,stop:l,seed:u,max_completion_tokens:(f=d?.openai)==null?void 0:f.maxCompletionTokens,store:(p=d?.openai)==null?void 0:p.store,metadata:(m=d?.openai)==null?void 0:m.metadata,prediction:(g=d?.openai)==null?void 0:g.prediction,reasoning_effort:(v=(b=d?.openai)==null?void 0:b.reasoningEffort)!=null?v:this.settings.reasoningEffort,messages:Hke({prompt:e,useLegacyFunctionCalling:E,systemMessageMode:C7(this.modelId)})};switch(UI(this.modelId)&&(k.temperature!=null&&(k.temperature=void 0,S.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),k.top_p!=null&&(k.top_p=void 0,S.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),k.frequency_penalty!=null&&(k.frequency_penalty=void 0,S.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),k.presence_penalty!=null&&(k.presence_penalty=void 0,S.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),k.logit_bias!=null&&(k.logit_bias=void 0,S.push({type:"other",message:"logitBias is not supported for reasoning models"})),k.logprobs!=null&&(k.logprobs=void 0,S.push({type:"other",message:"logprobs is not supported for reasoning models"})),k.top_logprobs!=null&&(k.top_logprobs=void 0,S.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),k.max_tokens!=null&&(k.max_completion_tokens==null&&(k.max_completion_tokens=k.max_tokens),k.max_tokens=void 0)),_){case"regular":{const{tools:x,tool_choice:I,functions:R,function_call:C,toolWarnings:T}=zke({mode:t,useLegacyFunctionCalling:E,structuredOutputs:this.supportsStructuredOutputs});return{args:{...k,tools:x,tool_choice:I,functions:R,function_call:C},warnings:[...S,...T]}}case"object-json":return{args:{...k,response_format:this.supportsStructuredOutputs&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,strict:!0,name:(w=t.name)!=null?w:"response",description:t.description}}:{type:"json_object"}},warnings:S};case"object-tool":return{args:E?{...k,function_call:{name:t.tool.name},functions:[{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}]}:{...k,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:S};default:{const x=_;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(t){var e,n,r,s,i,o,a,l;const{args:c,warnings:u}=this.getArgs(t),{responseHeaders:d,value:h,rawValue:f}=await r0({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:n0(this.config.headers(),t.headers),body:c,failedResponseHandler:a0,successfulResponseHandler:fA(Wke),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:p,...m}=c,g=h.choices[0],b=(e=h.usage)==null?void 0:e.completion_tokens_details,v=(n=h.usage)==null?void 0:n.prompt_tokens_details,w={openai:{}};return b?.reasoning_tokens!=null&&(w.openai.reasoningTokens=b?.reasoning_tokens),b?.accepted_prediction_tokens!=null&&(w.openai.acceptedPredictionTokens=b?.accepted_prediction_tokens),b?.rejected_prediction_tokens!=null&&(w.openai.rejectedPredictionTokens=b?.rejected_prediction_tokens),v?.cached_tokens!=null&&(w.openai.cachedPromptTokens=v?.cached_tokens),{text:(r=g.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&g.message.function_call?[{toolCallType:"function",toolCallId:ay(),toolName:g.message.function_call.name,args:g.message.function_call.arguments}]:(s=g.message.tool_calls)==null?void 0:s.map(_=>{var S;return{toolCallType:"function",toolCallId:(S=_.id)!=null?S:ay(),toolName:_.function.name,args:_.function.arguments}}),finishReason:BE(g.finish_reason),usage:{promptTokens:(o=(i=h.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(l=(a=h.usage)==null?void 0:a.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:p,rawSettings:m},rawResponse:{headers:d,body:f},request:{body:JSON.stringify(c)},response:$E(h),warnings:u,logprobs:k7(g.logprobs),providerMetadata:w}}async doStream(t){if(this.settings.simulateStreaming){const m=await this.doGenerate(t);return{stream:new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...m.response}),m.text&&b.enqueue({type:"text-delta",textDelta:m.text}),m.toolCalls)for(const v of m.toolCalls)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:v.toolCallId,toolName:v.toolName,argsTextDelta:v.args}),b.enqueue({type:"tool-call",...v});b.enqueue({type:"finish",finishReason:m.finishReason,usage:m.usage,logprobs:m.logprobs,providerMetadata:m.providerMetadata}),b.close()}}),rawCall:m.rawCall,rawResponse:m.rawResponse,warnings:m.warnings}}const{args:e,warnings:n}=this.getArgs(t),r={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:s,value:i}=await r0({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:n0(this.config.headers(),t.headers),body:r,failedResponseHandler:a0,successfulResponseHandler:EZ(Gke),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:o,...a}=e,l=[];let c="unknown",u={promptTokens:void 0,completionTokens:void 0},d,h=!0;const{useLegacyFunctionCalling:f}=this.settings,p={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(m,g){var b,v,w,_,S,E,k,x,I,R,C,T;if(!m.success){c="error",g.enqueue({type:"error",error:m.error});return}const O=m.value;if("error"in O){c="error",g.enqueue({type:"error",error:O.error});return}if(h&&(h=!1,g.enqueue({type:"response-metadata",...$E(O)})),O.usage!=null){const{prompt_tokens:Z,completion_tokens:F,prompt_tokens_details:M,completion_tokens_details:G}=O.usage;u={promptTokens:Z??void 0,completionTokens:F??void 0},G?.reasoning_tokens!=null&&(p.openai.reasoningTokens=G?.reasoning_tokens),G?.accepted_prediction_tokens!=null&&(p.openai.acceptedPredictionTokens=G?.accepted_prediction_tokens),G?.rejected_prediction_tokens!=null&&(p.openai.rejectedPredictionTokens=G?.rejected_prediction_tokens),M?.cached_tokens!=null&&(p.openai.cachedPromptTokens=M?.cached_tokens)}const P=O.choices[0];if(P?.finish_reason!=null&&(c=BE(P.finish_reason)),P?.delta==null)return;const U=P.delta;U.content!=null&&g.enqueue({type:"text-delta",textDelta:U.content});const ee=k7(P?.logprobs);ee?.length&&(d===void 0&&(d=[]),d.push(...ee));const X=f&&U.function_call!=null?[{type:"function",id:ay(),function:U.function_call,index:0}]:U.tool_calls;if(X!=null)for(const Z of X){const F=Z.index;if(l[F]==null){if(Z.type!=="function")throw new o3({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new o3({data:Z,message:"Expected 'id' to be a string."});if(((b=Z.function)==null?void 0:b.name)==null)throw new o3({data:Z,message:"Expected 'function.name' to be a string."});l[F]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},hasFinished:!1};const G=l[F];((w=G.function)==null?void 0:w.name)!=null&&((_=G.function)==null?void 0:_.arguments)!=null&&(G.function.arguments.length>0&&g.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:G.function.arguments}),x7(G.function.arguments)&&(g.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(S=G.id)!=null?S:ay(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0));continue}const M=l[F];M.hasFinished||(((E=Z.function)==null?void 0:E.arguments)!=null&&(M.function.arguments+=(x=(k=Z.function)==null?void 0:k.arguments)!=null?x:""),g.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:M.id,toolName:M.function.name,argsTextDelta:(I=Z.function.arguments)!=null?I:""}),((R=M.function)==null?void 0:R.name)!=null&&((C=M.function)==null?void 0:C.arguments)!=null&&x7(M.function.arguments)&&(g.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(T=M.id)!=null?T:ay(),toolName:M.function.name,args:M.function.arguments}),M.hasFinished=!0))}},flush(m){var g,b;m.enqueue({type:"finish",finishReason:c,logprobs:d,usage:{promptTokens:(g=u.promptTokens)!=null?g:NaN,completionTokens:(b=u.completionTokens)!=null?b:NaN},...p!=null?{providerMetadata:p}:{}})}})),rawCall:{rawPrompt:o,rawSettings:a},rawResponse:{headers:s},request:{body:JSON.stringify(r)},warnings:n}}},DZ=V.object({prompt_tokens:V.number().nullish(),completion_tokens:V.number().nullish(),prompt_tokens_details:V.object({cached_tokens:V.number().nullish()}).nullish(),completion_tokens_details:V.object({reasoning_tokens:V.number().nullish(),accepted_prediction_tokens:V.number().nullish(),rejected_prediction_tokens:V.number().nullish()}).nullish()}).nullish(),Wke=V.object({id:V.string().nullish(),created:V.number().nullish(),model:V.string().nullish(),choices:V.array(V.object({message:V.object({role:V.literal("assistant").nullish(),content:V.string().nullish(),function_call:V.object({arguments:V.string(),name:V.string()}).nullish(),tool_calls:V.array(V.object({id:V.string().nullish(),type:V.literal("function"),function:V.object({name:V.string(),arguments:V.string()})})).nullish()}),index:V.number(),logprobs:V.object({content:V.array(V.object({token:V.string(),logprob:V.number(),top_logprobs:V.array(V.object({token:V.string(),logprob:V.number()}))})).nullable()}).nullish(),finish_reason:V.string().nullish()})),usage:DZ}),Gke=V.union([V.object({id:V.string().nullish(),created:V.number().nullish(),model:V.string().nullish(),choices:V.array(V.object({delta:V.object({role:V.enum(["assistant"]).nullish(),content:V.string().nullish(),function_call:V.object({name:V.string().optional(),arguments:V.string().optional()}).nullish(),tool_calls:V.array(V.object({index:V.number(),id:V.string().nullish(),type:V.literal("function").optional(),function:V.object({name:V.string().nullish(),arguments:V.string().nullish()})})).nullish()}).nullish(),logprobs:V.object({content:V.array(V.object({token:V.string(),logprob:V.number(),top_logprobs:V.array(V.object({token:V.string(),logprob:V.number()}))})).nullable()}).nullish(),finish_reason:V.string().nullable().optional(),index:V.number()})),usage:DZ}),o6]);function UI(t){return t==="o1"||t.startsWith("o1-")||t==="o3"||t.startsWith("o3-")}function qke(t){return t.startsWith("gpt-4o-audio-preview")}function C7(t){var e,n;return UI(t)?(n=(e=Kke[t])==null?void 0:e.systemMessageMode)!=null?n:"developer":"system"}var Kke={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function Yke({prompt:t,inputFormat:e,user:n="user",assistant:r="assistant"}){if(e==="prompt"&&t.length===1&&t[0].role==="user"&&t[0].content.length===1&&t[0].content[0].type==="text")return{prompt:t[0].content[0].text};let s="";t[0].role==="system"&&(s+=`${t[0].content}

`,t=t.slice(1));for(const{role:i,content:o}of t)switch(i){case"system":throw new ISe({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{const a=o.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new ro({functionality:"images"})}}).join("");s+=`${n}:
${a}

`;break}case"assistant":{const a=o.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new ro({functionality:"tool-call messages"})}}).join("");s+=`${r}:
${a}

`;break}case"tool":throw new ro({functionality:"tool messages"});default:{const a=i;throw new Error(`Unsupported role: ${a}`)}}return s+=`${r}:
`,{prompt:s,stopSequences:[`
${n}:`]}}function A7(t){return t?.tokens.map((e,n)=>({token:e,logprob:t.token_logprobs[n],topLogprobs:t.top_logprobs?Object.entries(t.top_logprobs[n]).map(([r,s])=>({token:r,logprob:s})):[]}))}var Jke=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}getArgs({mode:t,inputFormat:e,prompt:n,maxTokens:r,temperature:s,topP:i,topK:o,frequencyPenalty:a,presencePenalty:l,stopSequences:c,responseFormat:u,seed:d}){var h;const f=t.type,p=[];o!=null&&p.push({type:"unsupported-setting",setting:"topK"}),u!=null&&u.type!=="text"&&p.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:m,stopSequences:g}=Yke({prompt:n,inputFormat:e}),b=[...g??[],...c??[]],v={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:s,top_p:i,frequency_penalty:a,presence_penalty:l,seed:d,prompt:m,stop:b.length>0?b:void 0};switch(f){case"regular":{if((h=t.tools)!=null&&h.length)throw new ro({functionality:"tools"});if(t.toolChoice)throw new ro({functionality:"toolChoice"});return{args:v,warnings:p}}case"object-json":throw new ro({functionality:"object-json mode"});case"object-tool":throw new ro({functionality:"object-tool mode"});default:{const w=f;throw new Error(`Unsupported type: ${w}`)}}}async doGenerate(t){const{args:e,warnings:n}=this.getArgs(t),{responseHeaders:r,value:s,rawValue:i}=await r0({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:n0(this.config.headers(),t.headers),body:e,failedResponseHandler:a0,successfulResponseHandler:fA(Xke),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:o,...a}=e,l=s.choices[0];return{text:l.text,usage:{promptTokens:s.usage.prompt_tokens,completionTokens:s.usage.completion_tokens},finishReason:BE(l.finish_reason),logprobs:A7(l.logprobs),rawCall:{rawPrompt:o,rawSettings:a},rawResponse:{headers:r,body:i},response:$E(s),warnings:n,request:{body:JSON.stringify(e)}}}async doStream(t){const{args:e,warnings:n}=this.getArgs(t),r={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:s,value:i}=await r0({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:n0(this.config.headers(),t.headers),body:r,failedResponseHandler:a0,successfulResponseHandler:EZ(Zke),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:o,...a}=e;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u,d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,f){if(!h.success){l="error",f.enqueue({type:"error",error:h.error});return}const p=h.value;if("error"in p){l="error",f.enqueue({type:"error",error:p.error});return}d&&(d=!1,f.enqueue({type:"response-metadata",...$E(p)})),p.usage!=null&&(c={promptTokens:p.usage.prompt_tokens,completionTokens:p.usage.completion_tokens});const m=p.choices[0];m?.finish_reason!=null&&(l=BE(m.finish_reason)),m?.text!=null&&f.enqueue({type:"text-delta",textDelta:m.text});const g=A7(m?.logprobs);g?.length&&(u===void 0&&(u=[]),u.push(...g))},flush(h){h.enqueue({type:"finish",finishReason:l,logprobs:u,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:a},rawResponse:{headers:s},warnings:n,request:{body:JSON.stringify(r)}}}},Xke=V.object({id:V.string().nullish(),created:V.number().nullish(),model:V.string().nullish(),choices:V.array(V.object({text:V.string(),finish_reason:V.string(),logprobs:V.object({tokens:V.array(V.string()),token_logprobs:V.array(V.number()),top_logprobs:V.array(V.record(V.string(),V.number())).nullable()}).nullish()})),usage:V.object({prompt_tokens:V.number(),completion_tokens:V.number()})}),Zke=V.union([V.object({id:V.string().nullish(),created:V.number().nullish(),model:V.string().nullish(),choices:V.array(V.object({text:V.string(),finish_reason:V.string().nullish(),index:V.number(),logprobs:V.object({tokens:V.array(V.string()),token_logprobs:V.array(V.number()),top_logprobs:V.array(V.record(V.string(),V.number())).nullable()}).nullish()})),usage:V.object({prompt_tokens:V.number(),completion_tokens:V.number()}).nullish()}),o6]),Qke=class{constructor(t,e,n){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var t;return(t=this.settings.maxEmbeddingsPerCall)!=null?t:2048}get supportsParallelCalls(){var t;return(t=this.settings.supportsParallelCalls)!=null?t:!0}async doEmbed({values:t,headers:e,abortSignal:n}){if(t.length>this.maxEmbeddingsPerCall)throw new MSe({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});const{responseHeaders:r,value:s}=await r0({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:n0(this.config.headers(),e),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:a0,successfulResponseHandler:fA(eCe),abortSignal:n,fetch:this.config.fetch});return{embeddings:s.data.map(i=>i.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},eCe=V.object({data:V.array(V.object({embedding:V.array(V.number())})),usage:V.object({prompt_tokens:V.number()}).nullish()}),tCe={"dall-e-3":1,"dall-e-2":10},nCe=class{constructor(t,e,n){this.modelId=t,this.settings=e,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var t,e;return(e=(t=this.settings.maxImagesPerCall)!=null?t:tCe[this.modelId])!=null?e:1}get provider(){return this.config.provider}async doGenerate({prompt:t,n:e,size:n,aspectRatio:r,seed:s,providerOptions:i,headers:o,abortSignal:a}){var l,c,u,d;const h=[];r!=null&&h.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&h.push({type:"unsupported-setting",setting:"seed"});const f=(u=(c=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:c.call(l))!=null?u:new Date,{value:p,responseHeaders:m}=await r0({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:n0(this.config.headers(),o),body:{model:this.modelId,prompt:t,n:e,size:n,...(d=i.openai)!=null?d:{},response_format:"b64_json"},failedResponseHandler:a0,successfulResponseHandler:fA(rCe),abortSignal:a,fetch:this.config.fetch});return{images:p.data.map(g=>g.b64_json),warnings:h,response:{timestamp:f,modelId:this.modelId,headers:m}}}},rCe=V.object({data:V.array(V.object({b64_json:V.string()}))});function Fc(t={}){var e,n,r;const s=(e=OEe(t.baseURL))!=null?e:"https://api.openai.com/v1",i=(n=t.compatibility)!=null?n:"compatible",o=(r=t.name)!=null?r:"openai",a=()=>({Authorization:`Bearer ${xEe({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers}),l=(p,m={})=>new Vke(p,m,{provider:`${o}.chat`,url:({path:g})=>`${s}${g}`,headers:a,compatibility:i,fetch:t.fetch}),c=(p,m={})=>new Jke(p,m,{provider:`${o}.completion`,url:({path:g})=>`${s}${g}`,headers:a,compatibility:i,fetch:t.fetch}),u=(p,m={})=>new Qke(p,m,{provider:`${o}.embedding`,url:({path:g})=>`${s}${g}`,headers:a,fetch:t.fetch}),d=(p,m={})=>new nCe(p,m,{provider:`${o}.image`,url:({path:g})=>`${s}${g}`,headers:a,fetch:t.fetch}),h=(p,m)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return p==="gpt-3.5-turbo-instruct"?c(p,m):l(p,m)},f=function(p,m){return h(p,m)};return f.languageModel=h,f.chat=l,f.completion=c,f.embedding=u,f.textEmbedding=u,f.textEmbeddingModel=u,f.image=d,f.imageModel=d,f}Fc({compatibility:"strict"});class ys{cachedDynamicModels;getApiKeyLink;labelForGetApiKey;icon;getProviderBaseUrlAndKey(e){const{apiKeys:n,providerSettings:r,serverEnv:s,defaultBaseUrlKey:i,defaultApiTokenKey:o}=e;let a=r?.baseUrl;const l=Cf.getInstance();a&&a.length==0&&(a=void 0);const c=this.config.baseUrlKey||i;let u=a||s?.[c]||Sn?.env?.[c]||l.env?.[c]||this.config.baseUrl;u&&u.endsWith("/")&&(u=u.slice(0,-1));const d=this.config.apiTokenKey||o,h=n?.[this.name]||s?.[d]||Sn?.env?.[d]||l.env?.[d];return{baseUrl:u,apiKey:h}}getModelsFromCache(e){if(!this.cachedDynamicModels)return null;const n=this.cachedDynamicModels.cacheId,r=this.getDynamicModelsCacheKey(e);return n!==r?(this.cachedDynamicModels=void 0,null):this.cachedDynamicModels.models}getDynamicModelsCacheKey(e){return JSON.stringify({apiKeys:e.apiKeys?.[this.name],providerSettings:e.providerSettings?.[this.name],serverEnv:e.serverEnv})}storeDynamicModels(e,n){const r=this.getDynamicModelsCacheKey(e);this.cachedDynamicModels={cacheId:r,models:n}}}function MZ(t,e,n){return Fc({baseURL:t,apiKey:e})(n)}var jZ="vercel.ai.error",sCe=Symbol.for(jZ),FZ,iCe=class BZ extends Error{constructor({name:e,message:n,cause:r}){super(n),this[FZ]=!0,this.name=e,this.cause=r}static isInstance(e){return BZ.hasMarker(e,jZ)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}toJSON(){return{name:this.name,message:this.message}}};FZ=sCe;var Ia=iCe,HI="AI_APICallError",$Z=`vercel.ai.error.${HI}`,oCe=Symbol.for($Z),UZ,mu=class extends Ia{constructor({message:e,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:o,cause:a,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:HI,message:e,cause:a}),this[UZ]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=c}static isInstance(e){return Ia.hasMarker(e,$Z)}static isAPICallError(e){return e instanceof Error&&e.name===HI&&typeof e.url=="string"&&typeof e.requestBodyValues=="object"&&(e.statusCode==null||typeof e.statusCode=="number")&&(e.responseHeaders==null||typeof e.responseHeaders=="object")&&(e.responseBody==null||typeof e.responseBody=="string")&&(e.cause==null||typeof e.cause=="object")&&typeof e.isRetryable=="boolean"&&(e.data==null||typeof e.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};UZ=oCe;var zI="AI_EmptyResponseBodyError",HZ=`vercel.ai.error.${zI}`,aCe=Symbol.for(HZ),zZ,lCe=class extends Ia{constructor({message:e="Empty response body"}={}){super({name:zI,message:e}),this[zZ]=!0}static isInstance(e){return Ia.hasMarker(e,HZ)}static isEmptyResponseBodyError(e){return e instanceof Error&&e.name===zI}};zZ=aCe;function VZ(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var VI="AI_JSONParseError",WZ=`vercel.ai.error.${VI}`,cCe=Symbol.for(WZ),GZ,UE=class extends Ia{constructor({text:e,cause:n}){super({name:VI,message:`JSON parsing failed: Text: ${e}.
Error message: ${VZ(n)}`,cause:n}),this[GZ]=!0,this.text=e}static isInstance(e){return Ia.hasMarker(e,WZ)}static isJSONParseError(e){return e instanceof Error&&e.name===VI&&typeof e.text=="string"&&typeof e.cause=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};GZ=cCe;var WI="AI_LoadAPIKeyError",qZ=`vercel.ai.error.${WI}`,uCe=Symbol.for(qZ),KZ,G_=class extends Ia{constructor({message:e}){super({name:WI,message:e}),this[KZ]=!0}static isInstance(e){return Ia.hasMarker(e,qZ)}static isLoadAPIKeyError(e){return e instanceof Error&&e.name===WI}};KZ=uCe;var GI="AI_TypeValidationError",YZ=`vercel.ai.error.${GI}`,dCe=Symbol.for(YZ),JZ,yv=class extends Ia{constructor({value:e,cause:n}){super({name:GI,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${VZ(n)}`,cause:n}),this[JZ]=!0,this.value=e}static isInstance(e){return Ia.hasMarker(e,YZ)}static isTypeValidationError(e){return e instanceof Error&&e.name===GI}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};JZ=dCe;var qI="AI_UnsupportedFunctionalityError",XZ=`vercel.ai.error.${qI}`,hCe=Symbol.for(XZ),ZZ,KI=class extends Ia{constructor({functionality:e}){super({name:qI,message:`'${e}' functionality not supported.`}),this[ZZ]=!0,this.functionality=e}static isInstance(e){return Ia.hasMarker(e,XZ)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===qI&&typeof e.functionality=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};ZZ=hCe;function fCe(t){let e,n,r,s,i,o,a;return l(),{feed:c,reset:l};function l(){e=!0,n="",r=0,s=-1,i=void 0,o=void 0,a=""}function c(d){n=n?n+d:d,e&&pCe(n)&&(n=n.slice(QZ.length)),e=!1;const h=n.length;let f=0,p=!1;for(;f<h;){p&&(n[f]===`
`&&++f,p=!1);let m=-1,g=s,b;for(let v=r;m<0&&v<h;++v)b=n[v],b===":"&&g<0?g=v-f:b==="\r"?(p=!0,m=v-f):b===`
`&&(m=v-f);if(m<0){r=h-f,s=g;break}else r=0,s=-1;u(n,f,g,m),f+=m+1}f===h?n="":f>0&&(n=n.slice(f))}function u(d,h,f,p){if(p===0){a.length>0&&(t({type:"event",id:i,event:o||void 0,data:a.slice(0,-1)}),a="",i=void 0),o=void 0;return}const m=f<0,g=d.slice(h,h+(m?p:f));let b=0;m?b=p:d[h+f+1]===" "?b=f+2:b=f+1;const v=h+b,w=p-b,_=d.slice(v,v+w).toString();if(g==="data")a+=_?"".concat(_,`
`):`
`;else if(g==="event")o=_;else if(g==="id"&&!_.includes("\0"))i=_;else if(g==="retry"){const S=parseInt(_,10);Number.isNaN(S)||t({type:"reconnect-interval",value:S})}}}const QZ=[239,187,191];function pCe(t){return QZ.every((e,n)=>t.charCodeAt(n)===e)}let mCe=class extends TransformStream{constructor(){let e;super({start(n){e=fCe(r=>{r.type==="event"&&n.enqueue(r)})},transform(n){e.feed(n)}})}};var gCe={};function T7(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function mA(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}function d3(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function bCe({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new G_({message:`${r} API key must be a string.`});if(typeof Sn>"u")throw new G_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=gCe[e],t==null)throw new G_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new G_({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var YI=Symbol.for("vercel.ai.validator");function yCe(t){return{[YI]:!0,validate:t}}function vCe(t){return typeof t=="object"&&t!==null&&YI in t&&t[YI]===!0&&"validate"in t}function wCe(t){return yCe(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function xCe({value:t,schema:e}){const n=eQ({value:t,schema:e});if(!n.success)throw new yv({value:t,cause:n.error});return n.value}function eQ({value:t,schema:e}){const n=vCe(e)?e:wCe(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:new yv({value:t,cause:r.error})}}catch(r){return{success:!1,error:yv.isTypeValidationError(r)?r:new yv({value:t,cause:r})}}}function _Ce({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?n:xCe({value:n,schema:e})}catch(n){throw UE.isJSONParseError(n)||yv.isTypeValidationError(n)?n:new UE({text:t,cause:n})}}function tQ({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?{success:!0,value:n}:eQ({value:n,schema:e})}catch(n){return{success:!1,error:UE.isJSONParseError(n)?n:new UE({text:t,cause:n})}}}function SCe(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}var ECe=()=>fetch,P7=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>kCe({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),kCe=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=ECe()})=>{try{const a=await o(t,{method:"POST",headers:SCe(e),body:n.content,signal:i}),l=mA(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw d3(u)||mu.isAPICallError(u)?u:new mu({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(d3(c)||mu.isAPICallError(c))?c:new mu({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(d3(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new mu({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},CCe=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=mA(r);if(o.trim()==="")return{responseHeaders:a,value:new mu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=_Ce({text:o,schema:t});return{responseHeaders:a,value:new mu({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new mu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},ACe=t=>async({response:e})=>{const n=mA(e);if(e.body==null)throw new lCe({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new mCe).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(tQ({text:r,schema:t}))}}))}},TCe=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=tQ({text:s,schema:t}),o=mA(e);if(!i.success)throw new mu({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value}};function PCe(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return globalThis.btoa(e)}function NCe(t){return t?.replace(/\/$/,"")}var ICe=V.object({type:V.literal("error"),error:V.object({type:V.string(),message:V.string()})}),N7=CCe({errorSchema:ICe,errorToMessage:t=>t.error.message});function RCe(t){var e;const n=OCe(t);let r;const s=[];for(let i=0;i<n.length;i++){const o=n[i],a=o.type;switch(a){case"system":{if(r!=null)throw new KI({functionality:"Multiple system messages that are separated by user/assistant messages"});r=o.messages.map(({content:l})=>l).join(`
`);break}case"user":{const l=[];for(const{role:c,content:u}of o.messages)switch(c){case"user":{for(const d of u)switch(d.type){case"text":{l.push({type:"text",text:d.text});break}case"image":{if(d.image instanceof URL)throw new KI({functionality:"Image URLs in user messages"});l.push({type:"image",source:{type:"base64",media_type:(e=d.mimeType)!=null?e:"image/jpeg",data:PCe(d.image)}});break}}break}case"tool":{for(const d of u)l.push({type:"tool_result",tool_use_id:d.toolCallId,content:JSON.stringify(d.result),is_error:d.isError});break}default:{const d=c;throw new Error(`Unsupported role: ${d}`)}}s.push({role:"user",content:l});break}case"assistant":{const l=[];for(const{content:c}of o.messages)for(let u=0;u<c.length;u++){const d=c[u];switch(d.type){case"text":{l.push({type:"text",text:i===n.length-1&&u===o.messages.length-1?d.text.trim():d.text});break}case"tool-call":{l.push({type:"tool_use",id:d.toolCallId,name:d.toolName,input:d.args});break}}}s.push({role:"assistant",content:l});break}default:{const l=a;throw new Error(`Unsupported type: ${l}`)}}}return{system:r,messages:s}}function OCe(t){const e=[];let n;for(const{role:r,content:s}of t)switch(r){case"system":{n?.type!=="system"&&(n={type:"system",messages:[]},e.push(n)),n.messages.push({role:r,content:s});break}case"assistant":{n?.type!=="assistant"&&(n={type:"assistant",messages:[]},e.push(n)),n.messages.push({role:r,content:s});break}case"user":{n?.type!=="user"&&(n={type:"user",messages:[]},e.push(n)),n.messages.push({role:r,content:s});break}case"tool":{n?.type!=="user"&&(n={type:"user",messages:[]},e.push(n)),n.messages.push({role:r,content:s});break}default:{const i=r;throw new Error(`Unsupported role: ${i}`)}}return e}function I7(t){switch(t){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"other"}}var LCe=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u}){const d=t.type,h=[];o!=null&&h.push({type:"unsupported-setting",setting:"frequencyPenalty"}),a!=null&&h.push({type:"unsupported-setting",setting:"presencePenalty"}),u!=null&&h.push({type:"unsupported-setting",setting:"seed"}),c!=null&&c.type!=="text"&&h.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const f=RCe(e),p={model:this.modelId,top_k:i??this.settings.topK,max_tokens:n??4096,temperature:r,top_p:s,stop_sequences:l,system:f.system,messages:f.messages};switch(d){case"regular":return{args:{...p,...jCe(t)},warnings:h};case"object-json":throw new KI({functionality:"json-mode object generation"});case"object-tool":{const{name:m,description:g,parameters:b}=t.tool;return{args:{...p,tools:[{name:m,description:g,input_schema:b}],tool_choice:{type:"tool",name:m}},warnings:h}}default:{const m=d;throw new Error(`Unsupported type: ${m}`)}}}async doGenerate(t){const{args:e,warnings:n}=await this.getArgs(t),{responseHeaders:r,value:s}=await P7({url:`${this.config.baseURL}/messages`,headers:T7(this.config.headers(),t.headers),body:e,failedResponseHandler:N7,successfulResponseHandler:TCe(DCe),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:i,...o}=e;let a="";for(const c of s.content)c.type==="text"&&(a+=c.text);let l;if(s.content.some(c=>c.type==="tool_use")){l=[];for(const c of s.content)c.type==="tool_use"&&l.push({toolCallType:"function",toolCallId:c.id,toolName:c.name,args:JSON.stringify(c.input)})}return{text:a,toolCalls:l,finishReason:I7(s.stop_reason),usage:{promptTokens:s.usage.input_tokens,completionTokens:s.usage.output_tokens},rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:r},warnings:n}}async doStream(t){const{args:e,warnings:n}=await this.getArgs(t),{responseHeaders:r,value:s}=await P7({url:`${this.config.baseURL}/messages`,headers:T7(this.config.headers(),t.headers),body:{...e,stream:!0},failedResponseHandler:N7,successfulResponseHandler:ACe(MCe),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:i,...o}=e;let a="other";const l={promptTokens:Number.NaN,completionTokens:Number.NaN},c={};return{stream:s.pipeThrough(new TransformStream({transform(u,d){if(!u.success){d.enqueue({type:"error",error:u.error});return}const h=u.value;switch(h.type){case"ping":return;case"content_block_start":{const f=h.content_block.type;switch(f){case"text":return;case"tool_use":{c[h.index]={toolCallId:h.content_block.id,toolName:h.content_block.name,jsonText:""};return}default:{const p=f;throw new Error(`Unsupported content block type: ${p}`)}}}case"content_block_stop":{if(c[h.index]!=null){const f=c[h.index];d.enqueue({type:"tool-call",toolCallType:"function",toolCallId:f.toolCallId,toolName:f.toolName,args:f.jsonText}),delete c[h.index]}return}case"content_block_delta":{const f=h.delta.type;switch(f){case"text_delta":{d.enqueue({type:"text-delta",textDelta:h.delta.text});return}case"input_json_delta":{const p=c[h.index];d.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:p.toolCallId,toolName:p.toolName,argsTextDelta:h.delta.partial_json}),p.jsonText+=h.delta.partial_json;return}default:{const p=f;throw new Error(`Unsupported delta type: ${p}`)}}}case"message_start":{l.promptTokens=h.message.usage.input_tokens,l.completionTokens=h.message.usage.output_tokens;return}case"message_delta":{l.completionTokens=h.usage.output_tokens,a=I7(h.delta.stop_reason);return}case"message_stop":{d.enqueue({type:"finish",finishReason:a,usage:l});return}case"error":{d.enqueue({type:"error",error:h.error});return}default:{const f=h;throw new Error(`Unsupported chunk type: ${f}`)}}}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:r},warnings:n}}},DCe=V.object({type:V.literal("message"),content:V.array(V.discriminatedUnion("type",[V.object({type:V.literal("text"),text:V.string()}),V.object({type:V.literal("tool_use"),id:V.string(),name:V.string(),input:V.unknown()})])),stop_reason:V.string().optional().nullable(),usage:V.object({input_tokens:V.number(),output_tokens:V.number()})}),MCe=V.discriminatedUnion("type",[V.object({type:V.literal("message_start"),message:V.object({usage:V.object({input_tokens:V.number(),output_tokens:V.number()})})}),V.object({type:V.literal("content_block_start"),index:V.number(),content_block:V.discriminatedUnion("type",[V.object({type:V.literal("text"),text:V.string()}),V.object({type:V.literal("tool_use"),id:V.string(),name:V.string()})])}),V.object({type:V.literal("content_block_delta"),index:V.number(),delta:V.discriminatedUnion("type",[V.object({type:V.literal("input_json_delta"),partial_json:V.string()}),V.object({type:V.literal("text_delta"),text:V.string()})])}),V.object({type:V.literal("content_block_stop"),index:V.number()}),V.object({type:V.literal("error"),error:V.object({type:V.string(),message:V.string()})}),V.object({type:V.literal("message_delta"),delta:V.object({stop_reason:V.string().optional().nullable()}),usage:V.object({output_tokens:V.number()})}),V.object({type:V.literal("message_stop")}),V.object({type:V.literal("ping")})]);function jCe(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>({name:o.name,description:o.description,input_schema:o.parameters})),s=t.toolChoice;if(s==null)return{tools:r,tool_choice:void 0};const i=s.type;switch(i){case"auto":return{tools:r,tool_choice:{type:"auto"}};case"required":return{tools:r,tool_choice:{type:"any"}};case"none":return{tools:void 0,tool_choice:void 0};case"tool":return{tools:r,tool_choice:{type:"tool",name:s.toolName}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function nQ(t={}){var e,n;const r=(n=NCe((e=t.baseURL)!=null?e:t.baseUrl))!=null?n:"https://api.anthropic.com/v1",s=()=>({"anthropic-version":"2023-06-01","x-api-key":bCe({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers}),i=(a,l={})=>new LCe(a,l,{provider:"anthropic.messages",baseURL:r,headers:s,fetch:t.fetch}),o=function(a,l){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return i(a,l)};return o.languageModel=i,o.chat=i,o.messages=i,o}nQ();class FCe extends ys{name="Anthropic";getApiKeyLink="https://console.anthropic.com/settings/keys";config={apiTokenKey:"ANTHROPIC_API_KEY"};staticModels=[{name:"claude-3-7-sonnet-20250219",label:"Claude 3.7 Sonnet",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-5-sonnet-latest",label:"Claude 3.5 Sonnet (new)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-5-sonnet-20240620",label:"Claude 3.5 Sonnet (old)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-5-haiku-latest",label:"Claude 3.5 Haiku (new)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-opus-latest",label:"Claude 3 Opus",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-sonnet-20240229",label:"Claude 3 Sonnet",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-haiku-20240307",label:"Claude 3 Haiku",provider:"Anthropic",maxTokenAllowed:8e3}];async getDynamicModels(e,n,r){const{apiKey:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"ANTHROPIC_API_KEY"});if(!s)throw`Missing Api Key configuration for ${this.name} provider`;const o=await(await fetch("https://api.anthropic.com/v1/models",{headers:{"x-api-key":`${s}`,"anthropic-version":"2023-06-01"}})).json(),a=this.staticModels.map(c=>c.name);return o.data.filter(c=>c.type==="model"&&!a.includes(c.id)).map(c=>({name:c.id,label:`${c.display_name}`,provider:this.name,maxTokenAllowed:32e3}))}getModelInstance=e=>{const{apiKeys:n,providerSettings:r,serverEnv:s,model:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:n,providerSettings:r,serverEnv:s,defaultBaseUrlKey:"",defaultApiTokenKey:"ANTHROPIC_API_KEY"});return nQ({apiKey:o})(i)}}var rQ="vercel.ai.error",BCe=Symbol.for(rQ),sQ,$Ce=class iQ extends Error{constructor({name:e,message:n,cause:r}){super(n),this[sQ]=!0,this.name=e,this.cause=r}static isInstance(e){return iQ.hasMarker(e,rQ)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};sQ=BCe;var gi=$Ce,oQ="AI_APICallError",aQ=`vercel.ai.error.${oQ}`,UCe=Symbol.for(aQ),lQ,gu=class extends gi{constructor({message:e,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:o,cause:a,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:oQ,message:e,cause:a}),this[lQ]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=c}static isInstance(e){return gi.hasMarker(e,aQ)}};lQ=UCe;var cQ="AI_EmptyResponseBodyError",uQ=`vercel.ai.error.${cQ}`,HCe=Symbol.for(uQ),dQ,zCe=class extends gi{constructor({message:e="Empty response body"}={}){super({name:cQ,message:e}),this[dQ]=!0}static isInstance(e){return gi.hasMarker(e,uQ)}};dQ=HCe;function hQ(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var fQ="AI_InvalidArgumentError",pQ=`vercel.ai.error.${fQ}`,VCe=Symbol.for(pQ),mQ,WCe=class extends gi{constructor({message:e,cause:n,argument:r}){super({name:fQ,message:e,cause:n}),this[mQ]=!0,this.argument=r}static isInstance(e){return gi.hasMarker(e,pQ)}};mQ=VCe;var gQ="AI_JSONParseError",bQ=`vercel.ai.error.${gQ}`,GCe=Symbol.for(bQ),yQ,HE=class extends gi{constructor({text:e,cause:n}){super({name:gQ,message:`JSON parsing failed: Text: ${e}.
Error message: ${hQ(n)}`,cause:n}),this[yQ]=!0,this.text=e}static isInstance(e){return gi.hasMarker(e,bQ)}};yQ=GCe;var vQ="AI_LoadAPIKeyError",wQ=`vercel.ai.error.${vQ}`,qCe=Symbol.for(wQ),xQ,q_=class extends gi{constructor({message:e}){super({name:vQ,message:e}),this[xQ]=!0}static isInstance(e){return gi.hasMarker(e,wQ)}};xQ=qCe;var _Q="AI_TooManyEmbeddingValuesForCallError",SQ=`vercel.ai.error.${_Q}`,KCe=Symbol.for(SQ),EQ,YCe=class extends gi{constructor(e){super({name:_Q,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[EQ]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return gi.hasMarker(e,SQ)}};EQ=KCe;var kQ="AI_TypeValidationError",CQ=`vercel.ai.error.${kQ}`,JCe=Symbol.for(CQ),AQ,XCe=class JI extends gi{constructor({value:e,cause:n}){super({name:kQ,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${hQ(n)}`,cause:n}),this[AQ]=!0,this.value=e}static isInstance(e){return gi.hasMarker(e,CQ)}static wrap({value:e,cause:n}){return JI.isInstance(n)&&n.value===e?n:new JI({value:e,cause:n})}};AQ=JCe;var zE=XCe,TQ="AI_UnsupportedFunctionalityError",PQ=`vercel.ai.error.${TQ}`,ZCe=Symbol.for(PQ),NQ,_g=class extends gi{constructor({functionality:e,message:n=`'${e}' functionality not supported.`}){super({name:TQ,message:n}),this[NQ]=!0,this.functionality=e}static isInstance(e){return gi.hasMarker(e,PQ)}};NQ=ZCe;var QCe={};function XI(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function gA(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var eAe=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=Dp(n,e);if(t==null)return s;if(n.includes(r))throw new WCe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${t}${r}${s(i)}`};eAe();function tAe(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}function h3(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function nAe({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new q_({message:`${r} API key must be a string.`});if(typeof Sn>"u")throw new q_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=QCe[e],t==null)throw new q_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new q_({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var ZI=Symbol.for("vercel.ai.validator");function rAe(t){return{[ZI]:!0,validate:t}}function sAe(t){return typeof t=="object"&&t!==null&&ZI in t&&t[ZI]===!0&&"validate"in t}function iAe(t){return sAe(t)?t:oAe(t)}function oAe(t){return rAe(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function aAe({value:t,schema:e}){const n=IQ({value:t,schema:e});if(!n.success)throw zE.wrap({value:t,cause:n.error});return n.value}function IQ({value:t,schema:e}){const n=iAe(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:zE.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:zE.wrap({value:t,cause:r})}}}function lAe({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?n:aAe({value:n,schema:e})}catch(n){throw HE.isInstance(n)||zE.isInstance(n)?n:new HE({text:t,cause:n})}}function RQ({text:t,schema:e}){try{const n=Jr.parse(t);if(e==null)return{success:!0,value:n,rawValue:n};const r=IQ({value:n,schema:e});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:HE.isInstance(n)?n:new HE({text:t,cause:n})}}}var cAe=()=>globalThis.fetch,QI=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>uAe({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),uAe=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=cAe()})=>{try{const a=await o(t,{method:"POST",headers:tAe(e),body:n.content,signal:i}),l=gA(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw h3(u)||gu.isInstance(u)?u:new gu({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(h3(c)||gu.isInstance(c))?c:new gu({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(h3(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new gu({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},dAe=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=gA(r);if(o.trim()==="")return{responseHeaders:a,value:new gu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=lAe({text:o,schema:t});return{responseHeaders:a,value:new gu({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new gu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},hAe=t=>async({response:e})=>{const n=gA(e);if(e.body==null)throw new zCe({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new s6).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(RQ({text:r,schema:t}))}}))}},OQ=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=RQ({text:s,schema:t}),o=gA(e);if(!i.success)throw new gu({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}};function fAe(t){return t?.replace(/\/$/,"")}var pAe=V.object({message:V.string()}),e4=dAe({errorSchema:pAe,errorToMessage:t=>t.message});function mAe(t){const e=[];for(const{role:n,content:r}of t)switch(n){case"system":{e.push({role:"system",content:r});break}case"user":{e.push({role:"user",content:r.map(s=>{switch(s.type){case"text":return s.text;case"image":throw new _g({functionality:"image-part"})}}).join("")});break}case"assistant":{let s="";const i=[];for(const o of r)switch(o.type){case"text":{s+=o.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{i.push({id:o.toolCallId,type:"function",function:{name:o.toolName,arguments:JSON.stringify(o.args)}});break}default:{const a=o;throw new Error(`Unsupported part: ${a}`)}}e.push({role:"assistant",content:s!==""?s:"call tool",tool_calls:i.length>0?i:void 0,tool_plan:void 0});break}case"tool":{e.push(...r.map(s=>({role:"tool",content:JSON.stringify(s.result),tool_call_id:s.toolCallId})));break}default:{const s=n;throw new Error(`Unsupported role: ${s}`)}}return e}function R7(t){switch(t){case"COMPLETE":case"STOP_SEQUENCE":return"stop";case"MAX_TOKENS":return"length";case"ERROR":case"ERROR_LIMIT":return"error";case"ERROR_TOXIC":return"content-filter";case"USER_CANCEL":return"other";default:return"unknown"}}function gAe(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0,r=[];if(n==null)return{tools:void 0,tool_choice:void 0,toolWarnings:r};const s=[];for(const a of n)a.type==="provider-defined"?r.push({type:"unsupported-tool",tool:a}):s.push({type:"function",function:{name:a.name,description:a.description,parameters:a.parameters}});const i=t.toolChoice;if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:r};const o=i.type;switch(o){case"auto":return{tools:s,tool_choice:o,toolWarnings:r};case"none":return{tools:void 0,tool_choice:"any",toolWarnings:r};case"required":case"tool":throw new _g({functionality:`Unsupported tool choice type: ${o}`});default:{const a=o;throw new _g({functionality:`Unsupported tool choice type: ${a}`})}}}var bAe=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u}){const d=t.type,h=mAe(e),f={model:this.modelId,frequency_penalty:o,presence_penalty:a,max_tokens:n,temperature:r,p:s,k:i,seed:u,stop_sequences:l,response_format:c?.type==="json"?{type:"json_object",schema:c.schema}:void 0,messages:h};switch(d){case"regular":{const{tools:p,tool_choice:m,toolWarnings:g}=gAe(t);return{...f,tools:p,warnings:g}}case"object-json":throw new _g({functionality:"object-json mode"});case"object-tool":throw new _g({functionality:"object-tool mode"});default:{const p=d;throw new _g({functionality:`Unsupported mode: ${p}`})}}}concatenateMessageText(t){return t.filter(e=>"content"in e).map(e=>e.content).join("")}removeJsonSchemaExtras(t){return t.map(e=>{if(e.type==="function"&&e.function.parameters&&typeof e.function.parameters=="object"){const{additionalProperties:n,$schema:r,...s}=e.function.parameters;return{...e,function:{...e.function,parameters:s}}}return e})}async doGenerate(t){var e,n,r,s;const{warnings:i,...o}=this.getArgs(t);o.tools=o.tools&&this.removeJsonSchemaExtras(o.tools);const{responseHeaders:a,value:l,rawValue:c}=await QI({url:`${this.config.baseURL}/chat`,headers:XI(this.config.headers(),t.headers),body:o,failedResponseHandler:e4,successfulResponseHandler:OQ(yAe),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:u,...d}=o;return{text:(r=(n=(e=l.message.content)==null?void 0:e[0])==null?void 0:n.text)!=null?r:"",toolCalls:l.message.tool_calls?l.message.tool_calls.map(f=>({toolCallId:f.id,toolName:f.function.name,args:f.function.arguments.replace(/^null$/,"{}"),toolCallType:"function"})):[],finishReason:R7(l.finish_reason),usage:{promptTokens:l.usage.tokens.input_tokens,completionTokens:l.usage.tokens.output_tokens},rawCall:{rawPrompt:{messages:u},rawSettings:d},response:{id:(s=l.generation_id)!=null?s:void 0},rawResponse:{headers:a,body:c},warnings:i,request:{body:JSON.stringify(o)}}}async doStream(t){const{warnings:e,...n}=this.getArgs(t);n.tools=n.tools&&this.removeJsonSchemaExtras(n.tools);const r={...n,stream:!0},{responseHeaders:s,value:i}=await QI({url:`${this.config.baseURL}/chat`,headers:XI(this.config.headers(),t.headers),body:r,failedResponseHandler:e4,successfulResponseHandler:hAe(vAe),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:o,...a}=n;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u={toolCallId:"",toolName:"",argsTextDelta:""};return{stream:i.pipeThrough(new TransformStream({transform(d,h){var f,p;if(!d.success){l="error",h.enqueue({type:"error",error:d.error});return}const m=d.value;switch(m.type){case"content-delta":{h.enqueue({type:"text-delta",textDelta:m.delta.message.content.text});return}case"tool-call-start":{u={toolCallId:m.delta.message.tool_calls.id,toolName:m.delta.message.tool_calls.function.name,argsTextDelta:m.delta.message.tool_calls.function.arguments},h.enqueue({type:"tool-call-delta",toolCallId:u.toolCallId,toolName:u.toolName,toolCallType:"function",argsTextDelta:u.argsTextDelta});return}case"tool-call-delta":{u.argsTextDelta+=m.delta.message.tool_calls.function.arguments,h.enqueue({type:"tool-call-delta",toolCallId:u.toolCallId,toolName:u.toolName,toolCallType:"function",argsTextDelta:m.delta.message.tool_calls.function.arguments});return}case"tool-call-end":{h.enqueue({type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,toolCallType:"function",args:JSON.stringify(JSON.parse(((f=u.argsTextDelta)==null?void 0:f.trim())||"{}"))}),u={toolCallId:"",toolName:"",argsTextDelta:""};return}case"message-start":{h.enqueue({type:"response-metadata",id:(p=m.id)!=null?p:void 0});return}case"message-end":{l=R7(m.delta.finish_reason);const b=m.delta.usage.tokens;c={promptTokens:b.input_tokens,completionTokens:b.output_tokens}}default:return}},flush(d){d.enqueue({type:"finish",finishReason:l,usage:c})}})),rawCall:{rawPrompt:{messages:o},rawSettings:a},rawResponse:{headers:s},warnings:e,request:{body:JSON.stringify(r)}}}},yAe=V.object({generation_id:V.string().nullish(),message:V.object({role:V.string(),content:V.array(V.object({type:V.string(),text:V.string()})).nullish(),tool_plan:V.string().nullish(),tool_calls:V.array(V.object({id:V.string(),type:V.literal("function"),function:V.object({name:V.string(),arguments:V.string()})})).nullish()}),finish_reason:V.string(),usage:V.object({billed_units:V.object({input_tokens:V.number(),output_tokens:V.number()}),tokens:V.object({input_tokens:V.number(),output_tokens:V.number()})})}),vAe=V.discriminatedUnion("type",[V.object({type:V.literal("citation-start")}),V.object({type:V.literal("citation-end")}),V.object({type:V.literal("content-start")}),V.object({type:V.literal("content-delta"),delta:V.object({message:V.object({content:V.object({text:V.string()})})})}),V.object({type:V.literal("content-end")}),V.object({type:V.literal("message-start"),id:V.string().nullish()}),V.object({type:V.literal("message-end"),delta:V.object({finish_reason:V.string(),usage:V.object({tokens:V.object({input_tokens:V.number(),output_tokens:V.number()})})})}),V.object({type:V.literal("tool-plan-delta"),delta:V.object({message:V.object({tool_plan:V.string()})})}),V.object({type:V.literal("tool-call-start"),delta:V.object({message:V.object({tool_calls:V.object({id:V.string(),type:V.literal("function"),function:V.object({name:V.string(),arguments:V.string()})})})})}),V.object({type:V.literal("tool-call-delta"),delta:V.object({message:V.object({tool_calls:V.object({function:V.object({arguments:V.string()})})})})}),V.object({type:V.literal("tool-call-end")})]),wAe=class{constructor(t,e,n){this.specificationVersion="v1",this.maxEmbeddingsPerCall=96,this.supportsParallelCalls=!0,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}async doEmbed({values:t,headers:e,abortSignal:n}){var r;if(t.length>this.maxEmbeddingsPerCall)throw new YCe({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});const{responseHeaders:s,value:i}=await QI({url:`${this.config.baseURL}/embed`,headers:XI(this.config.headers(),e),body:{model:this.modelId,embedding_types:["float"],texts:t,input_type:(r=this.settings.inputType)!=null?r:"search_query",truncate:this.settings.truncate},failedResponseHandler:e4,successfulResponseHandler:OQ(xAe),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.float,usage:{tokens:i.meta.billed_units.input_tokens},rawResponse:{headers:s}}}},xAe=V.object({embeddings:V.object({float:V.array(V.array(V.number()))}),meta:V.object({billed_units:V.object({input_tokens:V.number()})})});function LQ(t={}){var e;const n=(e=fAe(t.baseURL))!=null?e:"https://api.cohere.com/v2",r=()=>({Authorization:`Bearer ${nAe({apiKey:t.apiKey,environmentVariableName:"COHERE_API_KEY",description:"Cohere"})}`,...t.headers}),s=(a,l={})=>new bAe(a,l,{provider:"cohere.chat",baseURL:n,headers:r,fetch:t.fetch}),i=(a,l={})=>new wAe(a,l,{provider:"cohere.textEmbedding",baseURL:n,headers:r,fetch:t.fetch}),o=function(a,l){if(new.target)throw new Error("The Cohere model function cannot be called with the new keyword.");return s(a,l)};return o.languageModel=s,o.embedding=i,o.textEmbeddingModel=i,o}LQ();class _Ae extends ys{name="Cohere";getApiKeyLink="https://dashboard.cohere.com/api-keys";config={apiTokenKey:"COHERE_API_KEY"};staticModels=[{name:"command-r-plus-08-2024",label:"Command R plus Latest",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r-08-2024",label:"Command R Latest",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r-plus",label:"Command R plus",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r",label:"Command R",provider:"Cohere",maxTokenAllowed:4096},{name:"command",label:"Command",provider:"Cohere",maxTokenAllowed:4096},{name:"command-nightly",label:"Command Nightly",provider:"Cohere",maxTokenAllowed:4096},{name:"command-light",label:"Command Light",provider:"Cohere",maxTokenAllowed:4096},{name:"command-light-nightly",label:"Command Light Nightly",provider:"Cohere",maxTokenAllowed:4096},{name:"c4ai-aya-expanse-8b",label:"c4AI Aya Expanse 8b",provider:"Cohere",maxTokenAllowed:4096},{name:"c4ai-aya-expanse-32b",label:"c4AI Aya Expanse 32b",provider:"Cohere",maxTokenAllowed:4096}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"COHERE_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return LQ({apiKey:o})(n)}}var DQ="vercel.ai.error",SAe=Symbol.for(DQ),MQ,EAe=class jQ extends Error{constructor({name:e,message:n,cause:r}){super(n),this[MQ]=!0,this.name=e,this.cause=r}static isInstance(e){return jQ.hasMarker(e,DQ)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};MQ=SAe;var lo=EAe,FQ="AI_APICallError",BQ=`vercel.ai.error.${FQ}`,kAe=Symbol.for(BQ),$Q,bu=class extends lo{constructor({message:e,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:o,cause:a,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:FQ,message:e,cause:a}),this[$Q]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=c}static isInstance(e){return lo.hasMarker(e,BQ)}};$Q=kAe;var UQ="AI_EmptyResponseBodyError",HQ=`vercel.ai.error.${UQ}`,CAe=Symbol.for(HQ),zQ,AAe=class extends lo{constructor({message:e="Empty response body"}={}){super({name:UQ,message:e}),this[zQ]=!0}static isInstance(e){return lo.hasMarker(e,HQ)}};zQ=CAe;function VQ(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var WQ="AI_InvalidArgumentError",GQ=`vercel.ai.error.${WQ}`,TAe=Symbol.for(GQ),qQ,PAe=class extends lo{constructor({message:e,cause:n,argument:r}){super({name:WQ,message:e,cause:n}),this[qQ]=!0,this.argument=r}static isInstance(e){return lo.hasMarker(e,GQ)}};qQ=TAe;var KQ="AI_InvalidResponseDataError",YQ=`vercel.ai.error.${KQ}`,NAe=Symbol.for(YQ),JQ,f3=class extends lo{constructor({data:e,message:n=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:KQ,message:n}),this[JQ]=!0,this.data=e}static isInstance(e){return lo.hasMarker(e,YQ)}};JQ=NAe;var XQ="AI_JSONParseError",ZQ=`vercel.ai.error.${XQ}`,IAe=Symbol.for(ZQ),QQ,VE=class extends lo{constructor({text:e,cause:n}){super({name:XQ,message:`JSON parsing failed: Text: ${e}.
Error message: ${VQ(n)}`,cause:n}),this[QQ]=!0,this.text=e}static isInstance(e){return lo.hasMarker(e,ZQ)}};QQ=IAe;var eee="AI_TypeValidationError",tee=`vercel.ai.error.${eee}`,RAe=Symbol.for(tee),nee,OAe=class t4 extends lo{constructor({value:e,cause:n}){super({name:eee,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${VQ(n)}`,cause:n}),this[nee]=!0,this.value=e}static isInstance(e){return lo.hasMarker(e,tee)}static wrap({value:e,cause:n}){return t4.isInstance(n)&&n.value===e?n:new t4({value:e,cause:n})}};nee=RAe;var WE=OAe,ree="AI_UnsupportedFunctionalityError",see=`vercel.ai.error.${ree}`,LAe=Symbol.for(see),iee,oee=class extends lo{constructor({functionality:e,message:n=`'${e}' functionality not supported.`}){super({name:ree,message:n}),this[iee]=!0,this.functionality=e}static isInstance(e){return lo.hasMarker(e,see)}};iee=LAe;function O7(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function bA(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var DAe=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=Dp(n,e);if(t==null)return s;if(n.includes(r))throw new PAe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${t}${r}${s(i)}`},p3=DAe();function MAe(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}function m3(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}var n4=Symbol.for("vercel.ai.validator");function jAe(t){return{[n4]:!0,validate:t}}function FAe(t){return typeof t=="object"&&t!==null&&n4 in t&&t[n4]===!0&&"validate"in t}function BAe(t){return FAe(t)?t:$Ae(t)}function $Ae(t){return jAe(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function UAe({value:t,schema:e}){const n=aee({value:t,schema:e});if(!n.success)throw WE.wrap({value:t,cause:n.error});return n.value}function aee({value:t,schema:e}){const n=BAe(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:WE.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:WE.wrap({value:t,cause:r})}}}function HAe({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?n:UAe({value:n,schema:e})}catch(n){throw VE.isInstance(n)||WE.isInstance(n)?n:new VE({text:t,cause:n})}}function lee({text:t,schema:e}){try{const n=Jr.parse(t);if(e==null)return{success:!0,value:n,rawValue:n};const r=aee({value:n,schema:e});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:VE.isInstance(n)?n:new VE({text:t,cause:n})}}}function L7(t){try{return Jr.parse(t),!0}catch{return!1}}var zAe=()=>globalThis.fetch,D7=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>VAe({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),VAe=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=zAe()})=>{try{const a=await o(t,{method:"POST",headers:MAe(e),body:n.content,signal:i}),l=bA(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw m3(u)||bu.isInstance(u)?u:new bu({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(m3(c)||bu.isInstance(c))?c:new bu({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(m3(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new bu({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},WAe=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=bA(r);if(o.trim()==="")return{responseHeaders:a,value:new bu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=HAe({text:o,schema:t});return{responseHeaders:a,value:new bu({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new bu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},GAe=t=>async({response:e})=>{const n=bA(e);if(e.body==null)throw new AAe({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new s6).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(lee({text:r,schema:t}))}}))}},qAe=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=lee({text:s,schema:t}),o=bA(e);if(!i.success)throw new bu({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:KAe}=globalThis;function YAe(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return KAe(e)}function ly(t){var e,n;return(n=(e=t?.providerMetadata)==null?void 0:e.openaiCompatible)!=null?n:{}}function JAe(t){const e=[];for(const{role:n,content:r,...s}of t){const i=ly({...s});switch(n){case"system":{e.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){e.push({role:"user",content:r[0].text,...ly(r[0])});break}e.push({role:"user",content:r.map(o=>{var a;const l=ly(o);switch(o.type){case"text":return{type:"text",text:o.text,...l};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(a=o.mimeType)!=null?a:"image/jpeg"};base64,${YAe(o.image)}`},...l};case"file":throw new oee({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const a=[];for(const l of r){const c=ly(l);switch(l.type){case"text":{o+=l.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{a.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...c});break}default:{const u=l;throw new Error(`Unsupported part: ${u}`)}}}e.push({role:"assistant",content:o,tool_calls:a.length>0?a:void 0,...i});break}case"tool":{for(const o of r){const a=ly(o);e.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...a})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return e}function M7({id:t,model:e,created:n}){return{id:t??void 0,modelId:e??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function j7(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var XAe=V.object({error:V.object({message:V.string(),type:V.string().nullish(),param:V.any().nullish(),code:V.union([V.string(),V.number()]).nullish()})}),ZAe={errorSchema:XAe,errorToMessage:t=>t.error.message};function QAe({mode:t,structuredOutputs:e}){var n;const r=(n=t.tools)!=null&&n.length?t.tools:void 0,s=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:s};const i=t.toolChoice,o=[];for(const l of r)l.type==="provider-defined"?s.push({type:"unsupported-tool",tool:l}):o.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:s};const a=i.type;switch(a){case"auto":case"none":case"required":return{tools:o,tool_choice:a,toolWarnings:s};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:s};default:{const l=a;throw new oee({functionality:`Unsupported tool choice type: ${l}`})}}}var eTe=class{constructor(t,e,n){this.specificationVersion="v1";var r,s;this.modelId=t,this.settings=e,this.config=n;const i=(r=n.errorStructure)!=null?r:ZAe;this.chunkSchema=nTe(i.errorSchema),this.failedResponseHandler=WAe(i),this.supportsStructuredOutputs=(s=n.supportsStructuredOutputs)!=null?s:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,providerMetadata:l,stopSequences:c,responseFormat:u,seed:d}){var h,f;const p=t.type,m=[];i!=null&&m.push({type:"unsupported-setting",setting:"topK"}),u?.type==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&m.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const g={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:s,frequency_penalty:o,presence_penalty:a,response_format:u?.type==="json"?this.supportsStructuredOutputs===!0&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,name:(h=u.name)!=null?h:"response",description:u.description}}:{type:"json_object"}:void 0,stop:c,seed:d,...l?.[this.providerOptionsName],messages:JAe(e)};switch(p){case"regular":{const{tools:b,tool_choice:v,toolWarnings:w}=QAe({mode:t,structuredOutputs:this.supportsStructuredOutputs});return{args:{...g,tools:b,tool_choice:v},warnings:[...m,...w]}}case"object-json":return{args:{...g,response_format:this.supportsStructuredOutputs===!0&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,name:(f=t.name)!=null?f:"response",description:t.description}}:{type:"json_object"}},warnings:m};case"object-tool":return{args:{...g,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}}]},warnings:m};default:{const b=p;throw new Error(`Unsupported type: ${b}`)}}}async doGenerate(t){var e,n,r,s,i,o,a,l,c;const{args:u,warnings:d}=this.getArgs({...t}),h=JSON.stringify(u),{responseHeaders:f,value:p,rawValue:m}=await D7({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:O7(this.config.headers(),t.headers),body:u,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:qAe(tTe),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:g,...b}=u,v=p.choices[0],w=(n=(e=this.config.metadataExtractor)==null?void 0:e.extractMetadata)==null?void 0:n.call(e,{parsedBody:m});return{text:(r=v.message.content)!=null?r:void 0,reasoning:(s=v.message.reasoning_content)!=null?s:void 0,toolCalls:(i=v.message.tool_calls)==null?void 0:i.map(_=>{var S;return{toolCallType:"function",toolCallId:(S=_.id)!=null?S:p3(),toolName:_.function.name,args:_.function.arguments}}),finishReason:j7(v.finish_reason),usage:{promptTokens:(a=(o=p.usage)==null?void 0:o.prompt_tokens)!=null?a:NaN,completionTokens:(c=(l=p.usage)==null?void 0:l.completion_tokens)!=null?c:NaN},...w&&{providerMetadata:w},rawCall:{rawPrompt:g,rawSettings:b},rawResponse:{headers:f,body:m},response:M7(p),warnings:d,request:{body:h}}}async doStream(t){var e;if(this.settings.simulateStreaming){const p=await this.doGenerate(t);return{stream:new ReadableStream({start(g){if(g.enqueue({type:"response-metadata",...p.response}),p.reasoning)if(Array.isArray(p.reasoning))for(const b of p.reasoning)b.type==="text"&&g.enqueue({type:"reasoning",textDelta:b.text});else g.enqueue({type:"reasoning",textDelta:p.reasoning});if(p.text&&g.enqueue({type:"text-delta",textDelta:p.text}),p.toolCalls)for(const b of p.toolCalls)g.enqueue({type:"tool-call",...b});g.enqueue({type:"finish",finishReason:p.finishReason,usage:p.usage,logprobs:p.logprobs,providerMetadata:p.providerMetadata}),g.close()}}),rawCall:p.rawCall,rawResponse:p.rawResponse,warnings:p.warnings}}const{args:n,warnings:r}=this.getArgs({...t}),s=JSON.stringify({...n,stream:!0}),i=(e=this.config.metadataExtractor)==null?void 0:e.createStreamExtractor(),{responseHeaders:o,value:a}=await D7({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:O7(this.config.headers(),t.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:GAe(this.chunkSchema),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:l,...c}=n,u=[];let d="unknown",h={promptTokens:void 0,completionTokens:void 0},f=!0;return{stream:a.pipeThrough(new TransformStream({transform(p,m){var g,b,v,w,_,S,E,k,x,I,R,C,T,O;if(!p.success){d="error",m.enqueue({type:"error",error:p.error});return}const P=p.value;if(i?.processChunk(p.rawValue),"error"in P){d="error",m.enqueue({type:"error",error:P.error.message});return}f&&(f=!1,m.enqueue({type:"response-metadata",...M7(P)})),P.usage!=null&&(h={promptTokens:(g=P.usage.prompt_tokens)!=null?g:void 0,completionTokens:(b=P.usage.completion_tokens)!=null?b:void 0});const U=P.choices[0];if(U?.finish_reason!=null&&(d=j7(U.finish_reason)),U?.delta==null)return;const ee=U.delta;if(ee.reasoning_content!=null&&m.enqueue({type:"reasoning",textDelta:ee.reasoning_content}),ee.content!=null&&m.enqueue({type:"text-delta",textDelta:ee.content}),ee.tool_calls!=null)for(const X of ee.tool_calls){const Z=X.index;if(u[Z]==null){if(X.type!=="function")throw new f3({data:X,message:"Expected 'function' type."});if(X.id==null)throw new f3({data:X,message:"Expected 'id' to be a string."});if(((v=X.function)==null?void 0:v.name)==null)throw new f3({data:X,message:"Expected 'function.name' to be a string."});u[Z]={id:X.id,type:"function",function:{name:X.function.name,arguments:(w=X.function.arguments)!=null?w:""},hasFinished:!1};const M=u[Z];((_=M.function)==null?void 0:_.name)!=null&&((S=M.function)==null?void 0:S.arguments)!=null&&(M.function.arguments.length>0&&m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:M.id,toolName:M.function.name,argsTextDelta:M.function.arguments}),L7(M.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(E=M.id)!=null?E:p3(),toolName:M.function.name,args:M.function.arguments}),M.hasFinished=!0));continue}const F=u[Z];F.hasFinished||(((k=X.function)==null?void 0:k.arguments)!=null&&(F.function.arguments+=(I=(x=X.function)==null?void 0:x.arguments)!=null?I:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:F.id,toolName:F.function.name,argsTextDelta:(R=X.function.arguments)!=null?R:""}),((C=F.function)==null?void 0:C.name)!=null&&((T=F.function)==null?void 0:T.arguments)!=null&&L7(F.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=F.id)!=null?O:p3(),toolName:F.function.name,args:F.function.arguments}),F.hasFinished=!0))}},flush(p){var m,g;const b=i?.buildMetadata();p.enqueue({type:"finish",finishReason:d,usage:{promptTokens:(m=h.promptTokens)!=null?m:NaN,completionTokens:(g=h.completionTokens)!=null?g:NaN},...b&&{providerMetadata:b}})}})),rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:o},warnings:r,request:{body:s}}}},tTe=V.object({id:V.string().nullish(),created:V.number().nullish(),model:V.string().nullish(),choices:V.array(V.object({message:V.object({role:V.literal("assistant").nullish(),content:V.string().nullish(),reasoning_content:V.string().nullish(),tool_calls:V.array(V.object({id:V.string().nullish(),type:V.literal("function"),function:V.object({name:V.string(),arguments:V.string()})})).nullish()}),finish_reason:V.string().nullish()})),usage:V.object({prompt_tokens:V.number().nullish(),completion_tokens:V.number().nullish()}).nullish()}),nTe=t=>V.union([V.object({id:V.string().nullish(),created:V.number().nullish(),model:V.string().nullish(),choices:V.array(V.object({delta:V.object({role:V.enum(["assistant"]).nullish(),content:V.string().nullish(),reasoning_content:V.string().nullish(),tool_calls:V.array(V.object({index:V.number(),id:V.string().nullish(),type:V.literal("function").optional(),function:V.object({name:V.string().nullish(),arguments:V.string().nullish()})})).nullish()}).nullish(),finish_reason:V.string().nullish()})),usage:V.object({prompt_tokens:V.number().nullish(),completion_tokens:V.number().nullish()}).nullish()}),t]);V.object({id:V.string().nullish(),created:V.number().nullish(),model:V.string().nullish(),choices:V.array(V.object({text:V.string(),finish_reason:V.string()})),usage:V.object({prompt_tokens:V.number(),completion_tokens:V.number()}).nullish()});V.object({data:V.array(V.object({embedding:V.array(V.number())})),usage:V.object({prompt_tokens:V.number()}).nullish()});var cee="vercel.ai.error",rTe=Symbol.for(cee),uee,sTe=class dee extends Error{constructor({name:e,message:n,cause:r}){super(n),this[uee]=!0,this.name=e,this.cause=r}static isInstance(e){return dee.hasMarker(e,cee)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};uee=rTe;var ch=sTe;function iTe(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var hee="AI_InvalidArgumentError",fee=`vercel.ai.error.${hee}`,oTe=Symbol.for(fee),pee,aTe=class extends ch{constructor({message:e,cause:n,argument:r}){super({name:hee,message:e,cause:n}),this[pee]=!0,this.argument=r}static isInstance(e){return ch.hasMarker(e,fee)}};pee=oTe;var mee="AI_LoadAPIKeyError",gee=`vercel.ai.error.${mee}`,lTe=Symbol.for(gee),bee,K_=class extends ch{constructor({message:e}){super({name:mee,message:e}),this[bee]=!0}static isInstance(e){return ch.hasMarker(e,gee)}};bee=lTe;var yee="AI_NoSuchModelError",vee=`vercel.ai.error.${yee}`,cTe=Symbol.for(vee),wee,uTe=class extends ch{constructor({errorName:t=yee,modelId:e,modelType:n,message:r=`No such ${n}: ${e}`}){super({name:t,message:r}),this[wee]=!0,this.modelId=e,this.modelType=n}static isInstance(t){return ch.hasMarker(t,vee)}};wee=cTe;var xee="AI_TypeValidationError",_ee=`vercel.ai.error.${xee}`,dTe=Symbol.for(_ee),See,hTe=class r4 extends ch{constructor({value:e,cause:n}){super({name:xee,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${iTe(n)}`,cause:n}),this[See]=!0,this.value=e}static isInstance(e){return ch.hasMarker(e,_ee)}static wrap({value:e,cause:n}){return r4.isInstance(n)&&n.value===e?n:new r4({value:e,cause:n})}};See=dTe;var F7=hTe,fTe={},pTe=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=Dp(n,e);if(t==null)return s;if(n.includes(r))throw new aTe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${t}${r}${s(i)}`};pTe();function mTe({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new K_({message:`${r} API key must be a string.`});if(typeof Sn>"u")throw new K_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=fTe[e],t==null)throw new K_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new K_({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var s4=Symbol.for("vercel.ai.validator");function gTe(t){return{[s4]:!0,validate:t}}function bTe(t){return typeof t=="object"&&t!==null&&s4 in t&&t[s4]===!0&&"validate"in t}function yTe(t){return bTe(t)?t:vTe(t)}function vTe(t){return gTe(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function B7({value:t,schema:e}){const n=yTe(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:F7.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:F7.wrap({value:t,cause:r})}}}function wTe(t){return t?.replace(/\/$/,"")}var $7=t=>{var e,n;return t==null?void 0:{deepseek:{promptCacheHitTokens:(e=t.prompt_cache_hit_tokens)!=null?e:NaN,promptCacheMissTokens:(n=t.prompt_cache_miss_tokens)!=null?n:NaN}}},xTe={extractMetadata:({parsedBody:t})=>{const e=B7({value:t,schema:_Te});return!e.success||e.value.usage==null?void 0:$7(e.value.usage)},createStreamExtractor:()=>{let t;return{processChunk:e=>{var n,r;const s=B7({value:e,schema:STe});s.success&&((r=(n=s.value.choices)==null?void 0:n[0])==null?void 0:r.finish_reason)==="stop"&&s.value.usage&&(t=s.value.usage)},buildMetadata:()=>$7(t)}}},Eee=V.object({prompt_cache_hit_tokens:V.number().nullish(),prompt_cache_miss_tokens:V.number().nullish()}),_Te=V.object({usage:Eee.nullish()}),STe=V.object({choices:V.array(V.object({finish_reason:V.string().nullish()})).nullish(),usage:Eee.nullish()});function kee(t={}){var e;const n=wTe((e=t.baseURL)!=null?e:"https://api.deepseek.com/v1"),r=()=>({Authorization:`Bearer ${mTe({apiKey:t.apiKey,environmentVariableName:"DEEPSEEK_API_KEY",description:"DeepSeek API key"})}`,...t.headers}),s=(o,a={})=>new eTe(o,a,{provider:"deepseek.chat",url:({path:l})=>`${n}${l}`,headers:r,fetch:t.fetch,defaultObjectGenerationMode:"json",metadataExtractor:xTe}),i=(o,a)=>s(o,a);return i.languageModel=s,i.chat=s,i.textEmbeddingModel=o=>{throw new uTe({modelId:o,modelType:"textEmbeddingModel"})},i}kee();class ETe extends ys{name="Deepseek";getApiKeyLink="https://platform.deepseek.com/apiKeys";config={apiTokenKey:"DEEPSEEK_API_KEY"};staticModels=[{name:"deepseek-coder",label:"Deepseek-Coder",provider:"Deepseek",maxTokenAllowed:8e3},{name:"deepseek-chat",label:"Deepseek-Chat",provider:"Deepseek",maxTokenAllowed:8e3},{name:"deepseek-reasoner",label:"Deepseek-Reasoner",provider:"Deepseek",maxTokenAllowed:8e3}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"DEEPSEEK_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return kee({apiKey:o})(n,{})}}let kTe=(t,e=21)=>(n=e)=>{let r="",s=n;for(;s--;)r+=t[Math.random()*t.length|0];return r};var Cee="vercel.ai.error",CTe=Symbol.for(Cee),Aee,ATe=class Tee extends Error{constructor({name:e,message:n,cause:r}){super(n),this[Aee]=!0,this.name=e,this.cause=r}static isInstance(e){return Tee.hasMarker(e,Cee)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}toJSON(){return{name:this.name,message:this.message}}};Aee=CTe;var co=ATe,i4="AI_APICallError",Pee=`vercel.ai.error.${i4}`,TTe=Symbol.for(Pee),Nee,yu=class extends co{constructor({message:e,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:o,cause:a,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:i4,message:e,cause:a}),this[Nee]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=c}static isInstance(e){return co.hasMarker(e,Pee)}static isAPICallError(e){return e instanceof Error&&e.name===i4&&typeof e.url=="string"&&typeof e.requestBodyValues=="object"&&(e.statusCode==null||typeof e.statusCode=="number")&&(e.responseHeaders==null||typeof e.responseHeaders=="object")&&(e.responseBody==null||typeof e.responseBody=="string")&&(e.cause==null||typeof e.cause=="object")&&typeof e.isRetryable=="boolean"&&(e.data==null||typeof e.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};Nee=TTe;var o4="AI_EmptyResponseBodyError",Iee=`vercel.ai.error.${o4}`,PTe=Symbol.for(Iee),Ree,NTe=class extends co{constructor({message:e="Empty response body"}={}){super({name:o4,message:e}),this[Ree]=!0}static isInstance(e){return co.hasMarker(e,Iee)}static isEmptyResponseBodyError(e){return e instanceof Error&&e.name===o4}};Ree=PTe;function Oee(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var a4="AI_JSONParseError",Lee=`vercel.ai.error.${a4}`,ITe=Symbol.for(Lee),Dee,GE=class extends co{constructor({text:e,cause:n}){super({name:a4,message:`JSON parsing failed: Text: ${e}.
Error message: ${Oee(n)}`,cause:n}),this[Dee]=!0,this.text=e}static isInstance(e){return co.hasMarker(e,Lee)}static isJSONParseError(e){return e instanceof Error&&e.name===a4&&"text"in e&&typeof e.text=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};Dee=ITe;var l4="AI_LoadAPIKeyError",Mee=`vercel.ai.error.${l4}`,RTe=Symbol.for(Mee),jee,Y_=class extends co{constructor({message:e}){super({name:l4,message:e}),this[jee]=!0}static isInstance(e){return co.hasMarker(e,Mee)}static isLoadAPIKeyError(e){return e instanceof Error&&e.name===l4}};jee=RTe;var c4="AI_TooManyEmbeddingValuesForCallError",Fee=`vercel.ai.error.${c4}`,OTe=Symbol.for(Fee),Bee,LTe=class extends co{constructor(e){super({name:c4,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Bee]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return co.hasMarker(e,Fee)}static isTooManyEmbeddingValuesForCallError(e){return e instanceof Error&&e.name===c4&&"provider"in e&&typeof e.provider=="string"&&"modelId"in e&&typeof e.modelId=="string"&&"maxEmbeddingsPerCall"in e&&typeof e.maxEmbeddingsPerCall=="number"&&"values"in e&&Array.isArray(e.values)}toJSON(){return{name:this.name,message:this.message,stack:this.stack,provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:this.values}}};Bee=OTe;var u4="AI_TypeValidationError",$ee=`vercel.ai.error.${u4}`,DTe=Symbol.for($ee),Uee,MTe=class d4 extends co{constructor({value:e,cause:n}){super({name:u4,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${Oee(n)}`,cause:n}),this[Uee]=!0,this.value=e}static isInstance(e){return co.hasMarker(e,$ee)}static wrap({value:e,cause:n}){return d4.isInstance(n)&&n.value===e?n:new d4({value:e,cause:n})}static isTypeValidationError(e){return e instanceof Error&&e.name===u4}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};Uee=DTe;var qE=MTe,h4="AI_UnsupportedFunctionalityError",Hee=`vercel.ai.error.${h4}`,jTe=Symbol.for(Hee),zee,g3=class extends co{constructor({functionality:e}){super({name:h4,message:`'${e}' functionality not supported.`}),this[zee]=!0,this.functionality=e}static isInstance(e){return co.hasMarker(e,Hee)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===h4&&typeof e.functionality=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};zee=jTe;function FTe(t){let e,n,r,s,i,o,a;return l(),{feed:c,reset:l};function l(){e=!0,n="",r=0,s=-1,i=void 0,o=void 0,a=""}function c(d){n=n?n+d:d,e&&BTe(n)&&(n=n.slice(Vee.length)),e=!1;const h=n.length;let f=0,p=!1;for(;f<h;){p&&(n[f]===`
`&&++f,p=!1);let m=-1,g=s,b;for(let v=r;m<0&&v<h;++v)b=n[v],b===":"&&g<0?g=v-f:b==="\r"?(p=!0,m=v-f):b===`
`&&(m=v-f);if(m<0){r=h-f,s=g;break}else r=0,s=-1;u(n,f,g,m),f+=m+1}f===h?n="":f>0&&(n=n.slice(f))}function u(d,h,f,p){if(p===0){a.length>0&&(t({type:"event",id:i,event:o||void 0,data:a.slice(0,-1)}),a="",i=void 0),o=void 0;return}const m=f<0,g=d.slice(h,h+(m?p:f));let b=0;m?b=p:d[h+f+1]===" "?b=f+2:b=f+1;const v=h+b,w=p-b,_=d.slice(v,v+w).toString();if(g==="data")a+=_?"".concat(_,`
`):`
`;else if(g==="event")o=_;else if(g==="id"&&!_.includes("\0"))i=_;else if(g==="retry"){const S=parseInt(_,10);Number.isNaN(S)||t({type:"reconnect-interval",value:S})}}}const Vee=[239,187,191];function BTe(t){return Vee.every((e,n)=>t.charCodeAt(n)===e)}let $Te=class extends TransformStream{constructor(){let e;super({start(n){e=FTe(r=>{r.type==="event"&&n.enqueue(r)})},transform(n){e.feed(n)}})}};var UTe={};function f4(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function yA(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var HTe=({prefix:t="",size:e=7,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}={})=>{const r=kTe(n,e);return s=>`${t}${r(s)}`},zTe=HTe();function b3(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function VTe({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new Y_({message:`${r} API key must be a string.`});if(typeof Sn>"u")throw new Y_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=UTe[e],t==null)throw new Y_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new Y_({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var p4=Symbol.for("vercel.ai.validator");function WTe(t){return{[p4]:!0,validate:t}}function GTe(t){return typeof t=="object"&&t!==null&&p4 in t&&t[p4]===!0&&"validate"in t}function qTe(t){return GTe(t)?t:KTe(t)}function KTe(t){return WTe(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function YTe({value:t,schema:e}){const n=Wee({value:t,schema:e});if(!n.success)throw qE.wrap({value:t,cause:n.error});return n.value}function Wee({value:t,schema:e}){const n=qTe(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:qE.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:qE.wrap({value:t,cause:r})}}}function JTe({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?n:YTe({value:n,schema:e})}catch(n){throw GE.isJSONParseError(n)||qE.isTypeValidationError(n)?n:new GE({text:t,cause:n})}}function Gee({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?{success:!0,value:n}:Wee({value:n,schema:e})}catch(n){return{success:!1,error:GE.isJSONParseError(n)?n:new GE({text:t,cause:n})}}}function XTe(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}var ZTe=()=>globalThis.fetch,m4=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>QTe({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),QTe=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=ZTe()})=>{try{const a=await o(t,{method:"POST",headers:XTe(e),body:n.content,signal:i}),l=yA(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw b3(u)||yu.isAPICallError(u)?u:new yu({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(b3(c)||yu.isAPICallError(c))?c:new yu({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(b3(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new yu({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},e5e=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=yA(r);if(o.trim()==="")return{responseHeaders:a,value:new yu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=JTe({text:o,schema:t});return{responseHeaders:a,value:new yu({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new yu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},t5e=t=>async({response:e})=>{const n=yA(e);if(e.body==null)throw new NTe({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new $Te).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(Gee({text:r,schema:t}))}}))}},qee=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=Gee({text:s,schema:t}),o=yA(e);if(!i.success)throw new yu({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value}},{btoa:n5e}=globalThis;function r5e(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return n5e(e)}function s5e(t){return t?.replace(/\/$/,"")}function sc(t){if(typeof t=="boolean")return{type:"boolean",properties:{}};const{type:e,description:n,required:r,properties:s,items:i,allOf:o,anyOf:a,oneOf:l,format:c,const:u,minLength:d}=t,h={};return n&&(h.description=n),r&&(h.required=r),c&&(h.format=c),u!==void 0&&(h.enum=[u]),e&&(Array.isArray(e)?e.includes("null")?(h.type=e.filter(f=>f!=="null")[0],h.nullable=!0):h.type=e:e==="null"?h.type="null":h.type=e),s&&(h.properties=Object.entries(s).reduce((f,[p,m])=>(f[p]=sc(m),f),{})),i&&(h.items=Array.isArray(i)?i.map(sc):sc(i)),o&&(h.allOf=o.map(sc)),a&&(h.anyOf=a.map(sc)),l&&(h.oneOf=l.map(sc)),d!==void 0&&(h.minLength=d),h}function i5e(t){var e;const n=[],r=[];let s=!0;for(const{role:i,content:o}of t)switch(i){case"system":{if(!s)throw new g3({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:o});break}case"user":{s=!1;const a=[];for(const l of o)switch(l.type){case"text":{a.push({text:l.text});break}case"image":{if(l.image instanceof URL)throw new g3({functionality:"Image URLs in user messages"});a.push({inlineData:{mimeType:(e=l.mimeType)!=null?e:"image/jpeg",data:r5e(l.image)}});break}case"file":{if(l.data instanceof URL)throw new g3({functionality:"File URLs in user messages"});a.push({inlineData:{mimeType:l.mimeType,data:l.data}});break}}r.push({role:"user",parts:a});break}case"assistant":{s=!1,r.push({role:"model",parts:o.map(a=>{switch(a.type){case"text":return a.text.length===0?void 0:{text:a.text};case"tool-call":return{functionCall:{name:a.toolName,args:a.args}}}}).filter(a=>a!==void 0)});break}case"tool":{s=!1,r.push({role:"user",parts:o.map(a=>({functionResponse:{name:a.toolName,response:a.result}}))});break}default:{const a=i;throw new Error(`Unsupported role: ${a}`)}}return{systemInstruction:n.length>0?{parts:n}:void 0,contents:r}}function U7(t){return t.includes("/")?t:`models/${t}`}var o5e=V.object({error:V.object({code:V.number().nullable(),message:V.string(),status:V.string()})}),g4=e5e({errorSchema:o5e,errorToMessage:t=>t.error.message});function H7({finishReason:t,hasToolCalls:e}){switch(t){case"STOP":return e?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"RECITATION":case"SAFETY":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";default:return"unknown"}}var a5e=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=n}get supportsObjectGeneration(){return this.settings.structuredOutputs!==!1}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u}){var d;const h=t.type,f=[];u!=null&&f.push({type:"unsupported-setting",setting:"seed"});const p={maxOutputTokens:n,temperature:r,topK:i??this.settings.topK,topP:s,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseMimeType:c?.type==="json"?"application/json":void 0,responseSchema:c?.type==="json"&&c.schema!=null&&this.supportsObjectGeneration?sc(c.schema):void 0},{contents:m,systemInstruction:g}=i5e(e);switch(h){case"regular":return{args:{generationConfig:p,contents:m,systemInstruction:g,safetySettings:this.settings.safetySettings,...u5e(t),cachedContent:this.settings.cachedContent},warnings:f};case"object-json":return{args:{generationConfig:{...p,responseMimeType:"application/json",responseSchema:t.schema!=null&&this.supportsObjectGeneration?sc(t.schema):void 0},contents:m,systemInstruction:g,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:f};case"object-tool":return{args:{generationConfig:p,contents:m,tools:{functionDeclarations:[{name:t.tool.name,description:(d=t.tool.description)!=null?d:"",parameters:sc(t.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:f};default:{const b=h;throw new Error(`Unsupported type: ${b}`)}}}async doGenerate(t){var e,n;const{args:r,warnings:s}=await this.getArgs(t),{responseHeaders:i,value:o}=await m4({url:`${this.config.baseURL}/${U7(this.modelId)}:generateContent`,headers:f4(this.config.headers(),t.headers),body:r,failedResponseHandler:g4,successfulResponseHandler:qee(l5e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{contents:a,...l}=r,c=o.candidates[0],u=z7({parts:c.content.parts,generateId:this.config.generateId}),d=o.usageMetadata;return{text:V7(c.content.parts),toolCalls:u,finishReason:H7({finishReason:c.finishReason,hasToolCalls:u!=null&&u.length>0}),usage:{promptTokens:(e=d?.promptTokenCount)!=null?e:NaN,completionTokens:(n=d?.candidatesTokenCount)!=null?n:NaN},rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:i},warnings:s}}async doStream(t){const{args:e,warnings:n}=await this.getArgs(t),{responseHeaders:r,value:s}=await m4({url:`${this.config.baseURL}/${U7(this.modelId)}:streamGenerateContent?alt=sse`,headers:f4(this.config.headers(),t.headers),body:e,failedResponseHandler:g4,successfulResponseHandler:t5e(c5e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{contents:i,...o}=e;let a="unknown",l={promptTokens:Number.NaN,completionTokens:Number.NaN};const c=this.config.generateId;let u=!1;return{stream:s.pipeThrough(new TransformStream({transform(d,h){var f,p;if(!d.success){h.enqueue({type:"error",error:d.error});return}const m=d.value,g=m.candidates[0];g?.finishReason!=null&&(a=H7({finishReason:g.finishReason,hasToolCalls:u}));const b=m.usageMetadata;b!=null&&(l={promptTokens:(f=b.promptTokenCount)!=null?f:NaN,completionTokens:(p=b.candidatesTokenCount)!=null?p:NaN});const v=g.content;if(v==null)return;const w=V7(v.parts);w!=null&&h.enqueue({type:"text-delta",textDelta:w});const _=z7({parts:v.parts,generateId:c});if(_!=null)for(const S of _)h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,args:S.args}),u=!0},flush(d){d.enqueue({type:"finish",finishReason:a,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:r},warnings:n}}};function z7({parts:t,generateId:e}){const n=t.filter(r=>"functionCall"in r);return n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:e(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function V7(t){const e=t.filter(n=>"text"in n);return e.length===0?void 0:e.map(n=>n.text).join("")}var Kee=V.object({role:V.string(),parts:V.array(V.union([V.object({text:V.string()}),V.object({functionCall:V.object({name:V.string(),args:V.unknown()})})]))}),l5e=V.object({candidates:V.array(V.object({content:Kee,finishReason:V.string().optional()})),usageMetadata:V.object({promptTokenCount:V.number(),candidatesTokenCount:V.number().nullish(),totalTokenCount:V.number()}).optional()}),c5e=V.object({candidates:V.array(V.object({content:Kee.optional(),finishReason:V.string().optional()})),usageMetadata:V.object({promptTokenCount:V.number(),candidatesTokenCount:V.number().nullish(),totalTokenCount:V.number()}).optional()});function u5e(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{tools:void 0,toolConfig:void 0};const r={functionDeclarations:n.map(o=>{var a;return{name:o.name,description:(a=o.description)!=null?a:"",parameters:sc(o.parameters)}})},s=t.toolChoice;if(s==null)return{tools:r,toolConfig:void 0};const i=s.type;switch(i){case"auto":return{tools:r,toolConfig:{functionCallingConfig:{mode:"AUTO"}}};case"none":return{tools:r,toolConfig:{functionCallingConfig:{mode:"NONE"}}};case"required":return{tools:r,toolConfig:{functionCallingConfig:{mode:"ANY"}}};case"tool":return{tools:r,toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[s.toolName]}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}var d5e=class{constructor(t,e,n){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:t,headers:e,abortSignal:n}){if(t.length>this.maxEmbeddingsPerCall)throw new LTe({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});const{responseHeaders:r,value:s}=await m4({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:f4(this.config.headers(),e),body:{requests:t.map(i=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:i}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:g4,successfulResponseHandler:qee(h5e),abortSignal:n,fetch:this.config.fetch});return{embeddings:s.embeddings.map(i=>i.values),usage:void 0,rawResponse:{headers:r}}}},h5e=V.object({embeddings:V.array(V.object({values:V.array(V.number())}))});function Yee(t={}){var e,n;const r=(n=s5e((e=t.baseURL)!=null?e:t.baseUrl))!=null?n:"https://generativelanguage.googleapis.com/v1beta",s=()=>({"x-goog-api-key":VTe({apiKey:t.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...t.headers}),i=(l,c={})=>{var u;return new a5e(l,c,{provider:"google.generative-ai",baseURL:r,headers:s,generateId:(u=t.generateId)!=null?u:zTe,fetch:t.fetch})},o=(l,c={})=>new d5e(l,c,{provider:"google.generative-ai",baseURL:r,headers:s,fetch:t.fetch}),a=function(l,c){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(l,c)};return a.languageModel=i,a.chat=i,a.generativeAI=i,a.embedding=o,a.textEmbedding=o,a.textEmbeddingModel=o,a}Yee();class f5e extends ys{name="Google";getApiKeyLink="https://aistudio.google.com/app/apikey";config={apiTokenKey:"GOOGLE_GENERATIVE_AI_API_KEY"};staticModels=[{name:"gemini-1.5-flash-latest",label:"Gemini 1.5 Flash",provider:"Google",maxTokenAllowed:8192},{name:"gemini-2.0-flash-thinking-exp-01-21",label:"Gemini 2.0 Flash-thinking-exp-01-21",provider:"Google",maxTokenAllowed:65536},{name:"gemini-2.0-flash-exp",label:"Gemini 2.0 Flash",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-flash-002",label:"Gemini 1.5 Flash-002",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-flash-8b",label:"Gemini 1.5 Flash-8b",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-pro-latest",label:"Gemini 1.5 Pro",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-pro-002",label:"Gemini 1.5 Pro-002",provider:"Google",maxTokenAllowed:8192},{name:"gemini-exp-1206",label:"Gemini exp-1206",provider:"Google",maxTokenAllowed:8192}];async getDynamicModels(e,n,r){const{apiKey:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"GOOGLE_GENERATIVE_AI_API_KEY"});if(!s)throw`Missing Api Key configuration for ${this.name} provider`;return(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${s}`,{headers:{"Content-Type":"application/json"}})).json()).models.filter(l=>l.outputTokenLimit>8e3).map(l=>({name:l.name.replace("models/",""),label:`${l.displayName} - context ${Math.floor((l.inputTokenLimit+l.outputTokenLimit)/1e3)+"k"}`,provider:this.name,maxTokenAllowed:l.inputTokenLimit+l.outputTokenLimit||8e3}))}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"GOOGLE_GENERATIVE_AI_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Yee({apiKey:o})(n)}}class p5e extends ys{name="Groq";getApiKeyLink="https://console.groq.com/keys";config={apiTokenKey:"GROQ_API_KEY"};staticModels=[{name:"llama-3.1-8b-instant",label:"Llama 3.1 8b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-11b-vision-preview",label:"Llama 3.2 11b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-90b-vision-preview",label:"Llama 3.2 90b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-3b-preview",label:"Llama 3.2 3b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-1b-preview",label:"Llama 3.2 1b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.3-70b-versatile",label:"Llama 3.3 70b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"deepseek-r1-distill-llama-70b",label:"Deepseek R1 Distill Llama 70b (Groq)",provider:"Groq",maxTokenAllowed:131072}];async getDynamicModels(e,n,r){const{apiKey:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"GROQ_API_KEY"});if(!s)throw`Missing Api Key configuration for ${this.name} provider`;return(await(await fetch("https://api.groq.com/openai/v1/models",{headers:{Authorization:`Bearer ${s}`}})).json()).data.filter(l=>l.object==="model"&&l.active&&l.context_window>8e3).map(l=>({name:l.id,label:`${l.id} - context ${l.context_window?Math.floor(l.context_window/1e3)+"k":"N/A"} [ by ${l.owned_by}]`,provider:this.name,maxTokenAllowed:l.context_window||8e3}))}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"GROQ_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Fc({baseURL:"https://api.groq.com/openai/v1",apiKey:o})(n)}}class m5e extends ys{name="HuggingFace";getApiKeyLink="https://huggingface.co/settings/tokens";config={apiTokenKey:"HuggingFace_API_KEY"};staticModels=[{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen2.5-Coder-32B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"01-ai/Yi-1.5-34B-Chat",label:"Yi-1.5-34B-Chat (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"codellama/CodeLlama-34b-Instruct-hf",label:"CodeLlama-34b-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"NousResearch/Hermes-3-Llama-3.1-8B",label:"Hermes-3-Llama-3.1-8B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen2.5-Coder-32B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"Qwen/Qwen2.5-72B-Instruct",label:"Qwen2.5-72B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.1-70B-Instruct",label:"Llama-3.1-70B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.1-405B",label:"Llama-3.1-405B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"01-ai/Yi-1.5-34B-Chat",label:"Yi-1.5-34B-Chat (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"codellama/CodeLlama-34b-Instruct-hf",label:"CodeLlama-34b-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"NousResearch/Hermes-3-Llama-3.1-8B",label:"Hermes-3-Llama-3.1-8B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"HuggingFace_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Fc({baseURL:"https://api-inference.huggingface.co/v1/",apiKey:o})(n)}}var W7={};class g5e extends ys{name="LMStudio";getApiKeyLink="https://lmstudio.ai/";labelForGetApiKey="Get LMStudio";icon="i-ph:cloud-arrow-down";config={baseUrlKey:"LMSTUDIO_API_BASE_URL",baseUrl:"http://localhost:1234/"};staticModels=[];async getDynamicModels(e,n,r={}){let{baseUrl:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"LMSTUDIO_API_BASE_URL",defaultApiTokenKey:""});if(!s)throw new Error("No baseUrl found for LMStudio provider");if(typeof window>"u"){const a=W7?.RUNNING_IN_DOCKER==="true"||r?.RUNNING_IN_DOCKER==="true";s=a?s.replace("localhost","host.docker.internal"):s,s=a?s.replace("127.0.0.1","host.docker.internal"):s}return(await(await fetch(`${s}/v1/models`)).json()).data.map(a=>({name:a.id,label:a.id,provider:this.name,maxTokenAllowed:8e3}))}getModelInstance=e=>{const{apiKeys:n,providerSettings:r,serverEnv:s,model:i}=e;let{baseUrl:o}=this.getProviderBaseUrlAndKey({apiKeys:n,providerSettings:r?.[this.name],serverEnv:s,defaultBaseUrlKey:"LMSTUDIO_API_BASE_URL",defaultApiTokenKey:""});if(!o)throw new Error("No baseUrl found for LMStudio provider");const a=W7.RUNNING_IN_DOCKER==="true"||s?.RUNNING_IN_DOCKER==="true";return typeof window>"u"&&(o=a?o.replace("localhost","host.docker.internal"):o,o=a?o.replace("127.0.0.1","host.docker.internal"):o),uD.debug("LMStudio Base Url used: ",o),Fc({baseURL:`${o}/v1`,apiKey:""})(i)}}let b5e=(t,e=21)=>(n=e)=>{let r="",s=n;for(;s--;)r+=t[Math.random()*t.length|0];return r};var Jee="vercel.ai.error",y5e=Symbol.for(Jee),Xee,v5e=class Zee extends Error{constructor({name:e,message:n,cause:r}){super(n),this[Xee]=!0,this.name=e,this.cause=r}static isInstance(e){return Zee.hasMarker(e,Jee)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}toJSON(){return{name:this.name,message:this.message}}};Xee=y5e;var uo=v5e,b4="AI_APICallError",Qee=`vercel.ai.error.${b4}`,w5e=Symbol.for(Qee),ete,vu=class extends uo{constructor({message:e,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:o,cause:a,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:b4,message:e,cause:a}),this[ete]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=c}static isInstance(e){return uo.hasMarker(e,Qee)}static isAPICallError(e){return e instanceof Error&&e.name===b4&&typeof e.url=="string"&&typeof e.requestBodyValues=="object"&&(e.statusCode==null||typeof e.statusCode=="number")&&(e.responseHeaders==null||typeof e.responseHeaders=="object")&&(e.responseBody==null||typeof e.responseBody=="string")&&(e.cause==null||typeof e.cause=="object")&&typeof e.isRetryable=="boolean"&&(e.data==null||typeof e.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};ete=w5e;var y4="AI_EmptyResponseBodyError",tte=`vercel.ai.error.${y4}`,x5e=Symbol.for(tte),nte,_5e=class extends uo{constructor({message:e="Empty response body"}={}){super({name:y4,message:e}),this[nte]=!0}static isInstance(e){return uo.hasMarker(e,tte)}static isEmptyResponseBodyError(e){return e instanceof Error&&e.name===y4}};nte=x5e;function rte(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var v4="AI_JSONParseError",ste=`vercel.ai.error.${v4}`,S5e=Symbol.for(ste),ite,KE=class extends uo{constructor({text:e,cause:n}){super({name:v4,message:`JSON parsing failed: Text: ${e}.
Error message: ${rte(n)}`,cause:n}),this[ite]=!0,this.text=e}static isInstance(e){return uo.hasMarker(e,ste)}static isJSONParseError(e){return e instanceof Error&&e.name===v4&&"text"in e&&typeof e.text=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};ite=S5e;var w4="AI_LoadAPIKeyError",ote=`vercel.ai.error.${w4}`,E5e=Symbol.for(ote),ate,J_=class extends uo{constructor({message:e}){super({name:w4,message:e}),this[ate]=!0}static isInstance(e){return uo.hasMarker(e,ote)}static isLoadAPIKeyError(e){return e instanceof Error&&e.name===w4}};ate=E5e;var x4="AI_TooManyEmbeddingValuesForCallError",lte=`vercel.ai.error.${x4}`,k5e=Symbol.for(lte),cte,C5e=class extends uo{constructor(e){super({name:x4,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[cte]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return uo.hasMarker(e,lte)}static isTooManyEmbeddingValuesForCallError(e){return e instanceof Error&&e.name===x4&&"provider"in e&&typeof e.provider=="string"&&"modelId"in e&&typeof e.modelId=="string"&&"maxEmbeddingsPerCall"in e&&typeof e.maxEmbeddingsPerCall=="number"&&"values"in e&&Array.isArray(e.values)}toJSON(){return{name:this.name,message:this.message,stack:this.stack,provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:this.values}}};cte=k5e;var _4="AI_TypeValidationError",ute=`vercel.ai.error.${_4}`,A5e=Symbol.for(ute),dte,T5e=class S4 extends uo{constructor({value:e,cause:n}){super({name:_4,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${rte(n)}`,cause:n}),this[dte]=!0,this.value=e}static isInstance(e){return uo.hasMarker(e,ute)}static wrap({value:e,cause:n}){return S4.isInstance(n)&&n.value===e?n:new S4({value:e,cause:n})}static isTypeValidationError(e){return e instanceof Error&&e.name===_4}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};dte=A5e;var YE=T5e,E4="AI_UnsupportedFunctionalityError",hte=`vercel.ai.error.${E4}`,P5e=Symbol.for(hte),fte,N5e=class extends uo{constructor({functionality:e}){super({name:E4,message:`'${e}' functionality not supported.`}),this[fte]=!0,this.functionality=e}static isInstance(e){return uo.hasMarker(e,hte)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===E4&&typeof e.functionality=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};fte=P5e;function I5e(t){let e,n,r,s,i,o,a;return l(),{feed:c,reset:l};function l(){e=!0,n="",r=0,s=-1,i=void 0,o=void 0,a=""}function c(d){n=n?n+d:d,e&&R5e(n)&&(n=n.slice(pte.length)),e=!1;const h=n.length;let f=0,p=!1;for(;f<h;){p&&(n[f]===`
`&&++f,p=!1);let m=-1,g=s,b;for(let v=r;m<0&&v<h;++v)b=n[v],b===":"&&g<0?g=v-f:b==="\r"?(p=!0,m=v-f):b===`
`&&(m=v-f);if(m<0){r=h-f,s=g;break}else r=0,s=-1;u(n,f,g,m),f+=m+1}f===h?n="":f>0&&(n=n.slice(f))}function u(d,h,f,p){if(p===0){a.length>0&&(t({type:"event",id:i,event:o||void 0,data:a.slice(0,-1)}),a="",i=void 0),o=void 0;return}const m=f<0,g=d.slice(h,h+(m?p:f));let b=0;m?b=p:d[h+f+1]===" "?b=f+2:b=f+1;const v=h+b,w=p-b,_=d.slice(v,v+w).toString();if(g==="data")a+=_?"".concat(_,`
`):`
`;else if(g==="event")o=_;else if(g==="id"&&!_.includes("\0"))i=_;else if(g==="retry"){const S=parseInt(_,10);Number.isNaN(S)||t({type:"reconnect-interval",value:S})}}}const pte=[239,187,191];function R5e(t){return pte.every((e,n)=>t.charCodeAt(n)===e)}let O5e=class extends TransformStream{constructor(){let e;super({start(n){e=I5e(r=>{r.type==="event"&&n.enqueue(r)})},transform(n){e.feed(n)}})}};var L5e={};function k4(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function vA(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var D5e=({prefix:t="",size:e=7,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}={})=>{const r=b5e(n,e);return s=>`${t}${r(s)}`};D5e();function y3(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function M5e({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new J_({message:`${r} API key must be a string.`});if(typeof Sn>"u")throw new J_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=L5e[e],t==null)throw new J_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new J_({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var C4=Symbol.for("vercel.ai.validator");function j5e(t){return{[C4]:!0,validate:t}}function F5e(t){return typeof t=="object"&&t!==null&&C4 in t&&t[C4]===!0&&"validate"in t}function B5e(t){return F5e(t)?t:$5e(t)}function $5e(t){return j5e(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function U5e({value:t,schema:e}){const n=mte({value:t,schema:e});if(!n.success)throw YE.wrap({value:t,cause:n.error});return n.value}function mte({value:t,schema:e}){const n=B5e(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:YE.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:YE.wrap({value:t,cause:r})}}}function H5e({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?n:U5e({value:n,schema:e})}catch(n){throw KE.isJSONParseError(n)||YE.isTypeValidationError(n)?n:new KE({text:t,cause:n})}}function gte({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?{success:!0,value:n}:mte({value:n,schema:e})}catch(n){return{success:!1,error:KE.isJSONParseError(n)?n:new KE({text:t,cause:n})}}}function z5e(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}var V5e=()=>globalThis.fetch,A4=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>W5e({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),W5e=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=V5e()})=>{try{const a=await o(t,{method:"POST",headers:z5e(e),body:n.content,signal:i}),l=vA(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw y3(u)||vu.isAPICallError(u)?u:new vu({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(y3(c)||vu.isAPICallError(c))?c:new vu({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(y3(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new vu({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},G5e=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=vA(r);if(o.trim()==="")return{responseHeaders:a,value:new vu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=H5e({text:o,schema:t});return{responseHeaders:a,value:new vu({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new vu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},q5e=t=>async({response:e})=>{const n=vA(e);if(e.body==null)throw new _5e({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new O5e).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(gte({text:r,schema:t}))}}))}},bte=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=gte({text:s,schema:t}),o=vA(e);if(!i.success)throw new vu({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value}},{btoa:K5e}=globalThis;function Y5e(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return K5e(e)}function J5e(t){return t?.replace(/\/$/,"")}function X5e(t){const e=[];for(let n=0;n<t.length;n++){const{role:r,content:s}=t[n],i=n===t.length-1;switch(r){case"system":{e.push({role:"system",content:s});break}case"user":{e.push({role:"user",content:s.map(o=>{var a;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:o.image instanceof URL?o.image.toString():`data:${(a=o.mimeType)!=null?a:"image/jpeg"};base64,${Y5e(o.image)}`};case"file":throw new N5e({functionality:"File content parts in user messages"})}})});break}case"assistant":{let o="";const a=[];for(const l of s)switch(l.type){case"text":{o+=l.text;break}case"tool-call":{a.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)}});break}default:{const c=l;throw new Error(`Unsupported part: ${c}`)}}e.push({role:"assistant",content:o,prefix:i?!0:void 0,tool_calls:a.length>0?a:void 0});break}case"tool":{for(const o of s)e.push({role:"tool",name:o.toolName,content:JSON.stringify(o.result),tool_call_id:o.toolCallId});break}default:{const o=r;throw new Error(`Unsupported role: ${o}`)}}}return e}function G7(t){switch(t){case"stop":return"stop";case"length":case"model_length":return"length";case"tool_calls":return"tool-calls";default:return"unknown"}}var Z5e=V.object({object:V.literal("error"),message:V.string(),type:V.string(),param:V.string().nullable(),code:V.string().nullable()}),T4=G5e({errorSchema:Z5e,errorToMessage:t=>t.message});function q7({id:t,model:e,created:n}){return{id:t??void 0,modelId:e??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}var Q5e=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u}){const d=t.type,h=[];i!=null&&h.push({type:"unsupported-setting",setting:"topK"}),o!=null&&h.push({type:"unsupported-setting",setting:"frequencyPenalty"}),a!=null&&h.push({type:"unsupported-setting",setting:"presencePenalty"}),l!=null&&h.push({type:"unsupported-setting",setting:"stopSequences"}),c!=null&&c.type==="json"&&c.schema!=null&&h.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is not supported"});const f={model:this.modelId,safe_prompt:this.settings.safePrompt,max_tokens:n,temperature:r,top_p:s,random_seed:u,response_format:c?.type==="json"?{type:"json_object"}:void 0,messages:X5e(e)};switch(d){case"regular":return{args:{...f,...n3e(t)},warnings:h};case"object-json":return{args:{...f,response_format:{type:"json_object"}},warnings:h};case"object-tool":return{args:{...f,tool_choice:"any",tools:[{type:"function",function:t.tool}]},warnings:h};default:{const p=d;throw new Error(`Unsupported type: ${p}`)}}}async doGenerate(t){var e,n;const{args:r,warnings:s}=this.getArgs(t),{responseHeaders:i,value:o}=await A4({url:`${this.config.baseURL}/chat/completions`,headers:k4(this.config.headers(),t.headers),body:r,failedResponseHandler:T4,successfulResponseHandler:bte(e3e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:a,...l}=r,c=o.choices[0];let u=(e=c.message.content)!=null?e:void 0;const d=a[a.length-1];return d.role==="assistant"&&u?.startsWith(d.content)&&(u=u.slice(d.content.length)),{text:u,toolCalls:(n=c.message.tool_calls)==null?void 0:n.map(h=>({toolCallType:"function",toolCallId:h.id,toolName:h.function.name,args:h.function.arguments})),finishReason:G7(c.finish_reason),usage:{promptTokens:o.usage.prompt_tokens,completionTokens:o.usage.completion_tokens},rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:i},response:q7(o),warnings:s}}async doStream(t){const{args:e,warnings:n}=this.getArgs(t),{responseHeaders:r,value:s}=await A4({url:`${this.config.baseURL}/chat/completions`,headers:k4(this.config.headers(),t.headers),body:{...e,stream:!0},failedResponseHandler:T4,successfulResponseHandler:q5e(t3e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:i,...o}=e;let a="unknown",l={promptTokens:Number.NaN,completionTokens:Number.NaN},c=0,u=!1;return{stream:s.pipeThrough(new TransformStream({transform(d,h){if(!d.success){h.enqueue({type:"error",error:d.error});return}c++;const f=d.value;c===1&&h.enqueue({type:"response-metadata",...q7(f)}),f.usage!=null&&(l={promptTokens:f.usage.prompt_tokens,completionTokens:f.usage.completion_tokens});const p=f.choices[0];if(p?.finish_reason!=null&&(a=G7(p.finish_reason)),p?.delta==null)return;const m=p.delta;if(c<=2){const g=i[i.length-1];if(g.role==="assistant"&&m.content===g.content.trimEnd()){m.content.length<g.content.length&&(u=!0);return}}if(m.content!=null&&(h.enqueue({type:"text-delta",textDelta:u?m.content.trimStart():m.content}),u=!1),m.tool_calls!=null)for(const g of m.tool_calls)h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:g.id,toolName:g.function.name,argsTextDelta:g.function.arguments}),h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:g.id,toolName:g.function.name,args:g.function.arguments})},flush(d){d.enqueue({type:"finish",finishReason:a,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:r},warnings:n}}},e3e=V.object({id:V.string().nullish(),created:V.number().nullish(),model:V.string().nullish(),choices:V.array(V.object({message:V.object({role:V.literal("assistant"),content:V.string().nullable(),tool_calls:V.array(V.object({id:V.string(),function:V.object({name:V.string(),arguments:V.string()})})).nullish()}),index:V.number(),finish_reason:V.string().nullish()})),object:V.literal("chat.completion"),usage:V.object({prompt_tokens:V.number(),completion_tokens:V.number()})}),t3e=V.object({id:V.string().nullish(),created:V.number().nullish(),model:V.string().nullish(),choices:V.array(V.object({delta:V.object({role:V.enum(["assistant"]).optional(),content:V.string().nullish(),tool_calls:V.array(V.object({id:V.string(),function:V.object({name:V.string(),arguments:V.string()})})).nullish()}),finish_reason:V.string().nullish(),index:V.number()})),usage:V.object({prompt_tokens:V.number(),completion_tokens:V.number()}).nullish()});function n3e(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>({type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}})),s=t.toolChoice;if(s==null)return{tools:r,tool_choice:void 0};const i=s.type;switch(i){case"auto":case"none":return{tools:r,tool_choice:i};case"required":return{tools:r,tool_choice:"any"};case"tool":return{tools:r.filter(o=>o.function.name===s.toolName),tool_choice:"any"};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}var r3e=class{constructor(t,e,n){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var t;return(t=this.settings.maxEmbeddingsPerCall)!=null?t:32}get supportsParallelCalls(){var t;return(t=this.settings.supportsParallelCalls)!=null?t:!1}async doEmbed({values:t,abortSignal:e,headers:n}){if(t.length>this.maxEmbeddingsPerCall)throw new C5e({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});const{responseHeaders:r,value:s}=await A4({url:`${this.config.baseURL}/embeddings`,headers:k4(this.config.headers(),n),body:{model:this.modelId,input:t,encoding_format:"float"},failedResponseHandler:T4,successfulResponseHandler:bte(s3e),abortSignal:e,fetch:this.config.fetch});return{embeddings:s.data.map(i=>i.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},s3e=V.object({data:V.array(V.object({embedding:V.array(V.number())})),usage:V.object({prompt_tokens:V.number()}).nullish()});function yte(t={}){var e,n;const r=(n=J5e((e=t.baseURL)!=null?e:t.baseUrl))!=null?n:"https://api.mistral.ai/v1",s=()=>({Authorization:`Bearer ${M5e({apiKey:t.apiKey,environmentVariableName:"MISTRAL_API_KEY",description:"Mistral"})}`,...t.headers}),i=(l,c={})=>new Q5e(l,c,{provider:"mistral.chat",baseURL:r,headers:s,fetch:t.fetch}),o=(l,c={})=>new r3e(l,c,{provider:"mistral.embedding",baseURL:r,headers:s,fetch:t.fetch}),a=function(l,c){if(new.target)throw new Error("The Mistral model function cannot be called with the new keyword.");return i(l,c)};return a.languageModel=i,a.chat=i,a.embedding=o,a.textEmbedding=o,a.textEmbeddingModel=o,a}yte();class i3e extends ys{name="Mistral";getApiKeyLink="https://console.mistral.ai/api-keys/";config={apiTokenKey:"MISTRAL_API_KEY"};staticModels=[{name:"open-mistral-7b",label:"Mistral 7B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mixtral-8x7b",label:"Mistral 8x7B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mixtral-8x22b",label:"Mistral 8x22B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-codestral-mamba",label:"Codestral Mamba",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mistral-nemo",label:"Mistral Nemo",provider:"Mistral",maxTokenAllowed:8e3},{name:"ministral-8b-latest",label:"Mistral 8B",provider:"Mistral",maxTokenAllowed:8e3},{name:"mistral-small-latest",label:"Mistral Small",provider:"Mistral",maxTokenAllowed:8e3},{name:"codestral-latest",label:"Codestral",provider:"Mistral",maxTokenAllowed:8e3},{name:"mistral-large-latest",label:"Mistral Large Latest",provider:"Mistral",maxTokenAllowed:8e3}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"MISTRAL_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return yte({apiKey:o})(n)}}let o3e=(t,e=21)=>(n=e)=>{let r="",s=n;for(;s--;)r+=t[Math.random()*t.length|0];return r};var vte="vercel.ai.error",a3e=Symbol.for(vte),wte,l3e=class xte extends Error{constructor({name:e,message:n,cause:r}){super(n),this[wte]=!0,this.name=e,this.cause=r}static isInstance(e){return xte.hasMarker(e,vte)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}toJSON(){return{name:this.name,message:this.message}}};wte=a3e;var Ra=l3e,P4="AI_APICallError",_te=`vercel.ai.error.${P4}`,c3e=Symbol.for(_te),Ste,wu=class extends Ra{constructor({message:e,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:o,cause:a,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:P4,message:e,cause:a}),this[Ste]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=c}static isInstance(e){return Ra.hasMarker(e,_te)}static isAPICallError(e){return e instanceof Error&&e.name===P4&&typeof e.url=="string"&&typeof e.requestBodyValues=="object"&&(e.statusCode==null||typeof e.statusCode=="number")&&(e.responseHeaders==null||typeof e.responseHeaders=="object")&&(e.responseBody==null||typeof e.responseBody=="string")&&(e.cause==null||typeof e.cause=="object")&&typeof e.isRetryable=="boolean"&&(e.data==null||typeof e.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};Ste=c3e;var N4="AI_EmptyResponseBodyError",Ete=`vercel.ai.error.${N4}`,u3e=Symbol.for(Ete),kte,d3e=class extends Ra{constructor({message:e="Empty response body"}={}){super({name:N4,message:e}),this[kte]=!0}static isInstance(e){return Ra.hasMarker(e,Ete)}static isEmptyResponseBodyError(e){return e instanceof Error&&e.name===N4}};kte=u3e;function Cte(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var I4="AI_JSONParseError",Ate=`vercel.ai.error.${I4}`,h3e=Symbol.for(Ate),Tte,JE=class extends Ra{constructor({text:e,cause:n}){super({name:I4,message:`JSON parsing failed: Text: ${e}.
Error message: ${Cte(n)}`,cause:n}),this[Tte]=!0,this.text=e}static isInstance(e){return Ra.hasMarker(e,Ate)}static isJSONParseError(e){return e instanceof Error&&e.name===I4&&"text"in e&&typeof e.text=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};Tte=h3e;var R4="AI_TooManyEmbeddingValuesForCallError",Pte=`vercel.ai.error.${R4}`,f3e=Symbol.for(Pte),Nte,p3e=class extends Ra{constructor(t){super({name:R4,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[Nte]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Ra.hasMarker(t,Pte)}static isTooManyEmbeddingValuesForCallError(t){return t instanceof Error&&t.name===R4&&"provider"in t&&typeof t.provider=="string"&&"modelId"in t&&typeof t.modelId=="string"&&"maxEmbeddingsPerCall"in t&&typeof t.maxEmbeddingsPerCall=="number"&&"values"in t&&Array.isArray(t.values)}toJSON(){return{name:this.name,message:this.message,stack:this.stack,provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:this.values}}};Nte=f3e;var O4="AI_TypeValidationError",Ite=`vercel.ai.error.${O4}`,m3e=Symbol.for(Ite),Rte,g3e=class L4 extends Ra{constructor({value:e,cause:n}){super({name:O4,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${Cte(n)}`,cause:n}),this[Rte]=!0,this.value=e}static isInstance(e){return Ra.hasMarker(e,Ite)}static wrap({value:e,cause:n}){return L4.isInstance(n)&&n.value===e?n:new L4({value:e,cause:n})}static isTypeValidationError(e){return e instanceof Error&&e.name===O4}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};Rte=m3e;var XE=g3e,D4="AI_UnsupportedFunctionalityError",Ote=`vercel.ai.error.${D4}`,b3e=Symbol.for(Ote),Lte,y3e=class extends Ra{constructor({functionality:e}){super({name:D4,message:`'${e}' functionality not supported.`}),this[Lte]=!0,this.functionality=e}static isInstance(e){return Ra.hasMarker(e,Ote)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===D4&&typeof e.functionality=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};Lte=b3e;function K7(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function wA(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var v3e=({prefix:t="",size:e=7,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}={})=>{const r=o3e(n,e);return s=>`${t}${r(s)}`},Dte=v3e();function v3(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}var M4=Symbol.for("vercel.ai.validator");function w3e(t){return{[M4]:!0,validate:t}}function x3e(t){return typeof t=="object"&&t!==null&&M4 in t&&t[M4]===!0&&"validate"in t}function _3e(t){return x3e(t)?t:S3e(t)}function S3e(t){return w3e(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function E3e({value:t,schema:e}){const n=Mte({value:t,schema:e});if(!n.success)throw XE.wrap({value:t,cause:n.error});return n.value}function Mte({value:t,schema:e}){const n=_3e(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:XE.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:XE.wrap({value:t,cause:r})}}}function k3e({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?n:E3e({value:n,schema:e})}catch(n){throw JE.isJSONParseError(n)||XE.isTypeValidationError(n)?n:new JE({text:t,cause:n})}}function jte({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?{success:!0,value:n}:Mte({value:n,schema:e})}catch(n){return{success:!1,error:JE.isJSONParseError(n)?n:new JE({text:t,cause:n})}}}function C3e(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}var A3e=()=>globalThis.fetch,j4=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>T3e({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),T3e=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=A3e()})=>{try{const a=await o(t,{method:"POST",headers:C3e(e),body:n.content,signal:i}),l=wA(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw v3(u)||wu.isAPICallError(u)?u:new wu({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(v3(c)||wu.isAPICallError(c))?c:new wu({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(v3(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new wu({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},P3e=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=wA(r);if(o.trim()==="")return{responseHeaders:a,value:new wu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=k3e({text:o,schema:t});return{responseHeaders:a,value:new wu({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new wu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},Fte=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=jte({text:s,schema:t}),o=wA(e);if(!i.success)throw new wu({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value}},{btoa:N3e}=globalThis;function I3e(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return N3e(e)}function R3e(t){return t?.replace(/\/$/,"")}var Bte={},F4={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(F4);(function(t){var e=Ws&&Ws.__createBinding||(Object.create?function(c,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(c,h,f)}:function(c,u,d,h){h===void 0&&(h=d),c[h]=u[d]}),n=Ws&&Ws.__exportStar||function(c,u){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&e(u,c,d)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=F4;Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(F4,t);class s extends Error{}t.PartialJSON=s;class i extends Error{}t.MalformedJSON=i;function o(c,u=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return a(c.trim(),u)}t.parseJSON=o;const a=(c,u)=>{const d=c.length;let h=0;const f=S=>{throw new s(`${S} at position ${h}`)},p=S=>{throw new i(`${S} at position ${h}`)},m=()=>(_(),h>=d&&f("Unexpected end of input"),c[h]==='"'?g():c[h]==="{"?b():c[h]==="["?v():c.substring(h,h+4)==="null"||r.Allow.NULL&u&&d-h<4&&"null".startsWith(c.substring(h))?(h+=4,null):c.substring(h,h+4)==="true"||r.Allow.BOOL&u&&d-h<4&&"true".startsWith(c.substring(h))?(h+=4,!0):c.substring(h,h+5)==="false"||r.Allow.BOOL&u&&d-h<5&&"false".startsWith(c.substring(h))?(h+=5,!1):c.substring(h,h+8)==="Infinity"||r.Allow.INFINITY&u&&d-h<8&&"Infinity".startsWith(c.substring(h))?(h+=8,1/0):c.substring(h,h+9)==="-Infinity"||r.Allow._INFINITY&u&&1<d-h&&d-h<9&&"-Infinity".startsWith(c.substring(h))?(h+=9,-1/0):c.substring(h,h+3)==="NaN"||r.Allow.NAN&u&&d-h<3&&"NaN".startsWith(c.substring(h))?(h+=3,NaN):w()),g=()=>{const S=h;let E=!1;for(h++;h<d&&(c[h]!=='"'||E&&c[h-1]==="\\");)E=c[h]==="\\"?!E:!1,h++;if(c.charAt(h)=='"')try{return JSON.parse(c.substring(S,++h-Number(E)))}catch(k){p(String(k))}else if(r.Allow.STR&u)try{return JSON.parse(c.substring(S,h-Number(E))+'"')}catch{return JSON.parse(c.substring(S,c.lastIndexOf("\\"))+'"')}f("Unterminated string literal")},b=()=>{h++,_();const S={};try{for(;c[h]!=="}";){if(_(),h>=d&&r.Allow.OBJ&u)return S;const E=g();_(),h++;try{const k=m();S[E]=k}catch(k){if(r.Allow.OBJ&u)return S;throw k}_(),c[h]===","&&h++}}catch{if(r.Allow.OBJ&u)return S;f("Expected '}' at end of object")}return h++,S},v=()=>{h++;const S=[];try{for(;c[h]!=="]";)S.push(m()),_(),c[h]===","&&h++}catch{if(r.Allow.ARR&u)return S;f("Expected ']' at end of array")}return h++,S},w=()=>{if(h===0){c==="-"&&p("Not sure what '-' is");try{return JSON.parse(c)}catch(E){if(r.Allow.NUM&u)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}p(String(E))}}const S=h;for(c[h]==="-"&&h++;c[h]&&",]}".indexOf(c[h])===-1;)h++;h==d&&!(r.Allow.NUM&u)&&f("Unterminated number literal");try{return JSON.parse(c.substring(S,h))}catch{c.substring(S,h)==="-"&&f("Not sure what '-' is");try{return JSON.parse(c.substring(S,c.lastIndexOf("e")))}catch(k){p(String(k))}}},_=()=>{for(;h<d&&` 
\r	`.includes(c[h]);)h++};return m()},l=o;t.parse=l})(Bte);function w3(t){const e=[];for(const{content:n,role:r}of t)switch(r){case"system":{e.push({content:n,role:"system"});break}case"user":{e.push({...n.reduce((s,i)=>{if(i.type==="text")s.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new y3e({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(s.images=s.images||[],s.images.push(I3e(i.image)))}return s},{content:""}),role:"user"});break}case"assistant":{const s=[],i=[];for(const o of n)switch(o.type){case"text":{s.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const a=o;throw new Error(`Unsupported part: ${a}`)}}e.push({content:s.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{e.push(...n.map(s=>({content:typeof s.result=="object"?JSON.stringify(s.result):`${s.result}`,role:"tool",tool_call_id:s.toolCallId})));break}default:{const s=r;throw new Error(`Unsupported role: ${s}`)}}return e}var O3e=class{constructor({tools:t,type:e}){this._firstMessage=!0,this._tools=t,this._toolPartial="",this._toolCalls=[],this._type=e,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:t,delta:e}){var n;if(this.detectToolCall(e),!this._detectedToolCall)return!1;this._toolPartial+=e;let r=Bte.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[s,i]of r.entries()){const o=(n=JSON.stringify(i?.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[s]||(this._toolCalls[s]={function:{arguments:"",name:i.name},id:Dte(),type:"function"});const a=this._toolCalls[s];a.function.arguments=o,t.enqueue({argsTextDelta:e,toolCallId:a.id,toolCallType:"function",toolName:a.function.name,type:"tool-call-delta"})}return!0}finish({controller:t}){for(const e of this.toolCalls)t.enqueue({args:e.function.arguments,toolCallId:e.id,toolCallType:"function",toolName:e.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(t){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(t.trim().startsWith("{")||t.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function L3e({finishReason:t,hasToolCalls:e}){switch(t){case"stop":return e?"tool-calls":"stop";default:return"other"}}var D3e=V.object({error:V.object({code:V.string().nullable(),message:V.string(),param:V.any().nullable(),type:V.string()})}),B4=P3e({errorSchema:D3e,errorToMessage:t=>t.error.message});function M3e(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}var j3e=class extends TransformStream{constructor(){super({flush:t=>{this.buffer.length!==0&&t.enqueue(this.buffer)},transform:(t,e)=>{for(t=this.buffer+t;;){const n=t.indexOf(`
`);if(n===-1)break;e.enqueue(t.slice(0,n)),t=t.slice(n+1)}this.buffer=t}}),this.buffer=""}},F3e=t=>async({response:e})=>{const n=wA(e);if(e.body===null)throw new d3e({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new j3e).pipeThrough(new TransformStream({transform(r,s){s.enqueue(jte({schema:t,text:r}))}}))}},B3e=class{constructor(t,e,n){this.modelId=t,this.settings=e,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:t,maxTokens:e,mode:n,presencePenalty:r,prompt:s,responseFormat:i,seed:o,stopSequences:a,temperature:l,topK:c,topP:u}){var d,h,f;const p=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&m.push({details:"JSON response format schema is not supported",setting:"responseFormat",type:"unsupported-setting"});const g={format:i?.type,model:this.modelId,options:M3e({f16_kv:this.settings.f16Kv,frequency_penalty:t,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:e,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:(d=this.settings.stop)!=null?d:a,temperature:l,tfs_z:this.settings.tfsZ,top_k:(h=this.settings.topK)!=null?h:c,top_p:u,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(p){case"regular":{const b=(f=n.tools)!=null&&f.length?n.tools:void 0;return{args:{...g,messages:w3(s),tools:b?.map(v=>({function:{description:v.description,name:v.name,parameters:v.parameters},type:"function"}))},type:p,warnings:m}}case"object-json":return{args:{...g,format:"json",messages:w3(s)},type:p,warnings:m};case"object-tool":return{args:{...g,messages:w3(s),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:p,warnings:m};default:{const b=p;throw new Error(`Unsupported type: ${b}`)}}}async doGenerate(t){var e,n;const{args:r,warnings:s}=this.getArguments(t),{responseHeaders:i,value:o}=await j4({abortSignal:t.abortSignal,body:{...r,stream:!1},failedResponseHandler:B4,fetch:this.config.fetch,headers:K7(this.config.headers(),t.headers),successfulResponseHandler:Fte($3e),url:`${this.config.baseURL}/chat`}),{messages:a,...l}=r,c=(e=o.message.tool_calls)==null?void 0:e.map(u=>{var d;return{args:JSON.stringify(u.function.arguments),toolCallId:(d=u.id)!=null?d:Dte(),toolCallType:"function",toolName:u.function.name}});return{finishReason:L3e({finishReason:o.done_reason,hasToolCalls:c!==void 0&&c.length>0}),rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:i},text:(n=o.message.content)!=null?n:void 0,toolCalls:c,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:s}}async doStream(t){const{args:e,type:n,warnings:r}=this.getArguments(t),{responseHeaders:s,value:i}=await j4({abortSignal:t.abortSignal,body:e,failedResponseHandler:B4,fetch:this.config.fetch,headers:K7(this.config.headers(),t.headers),successfulResponseHandler:F3e(U3e),url:`${this.config.baseURL}/chat`}),{messages:o,...a}=e,l=t.mode.type==="regular"?t.mode.tools:t.mode.type==="object-tool"?[t.mode.tool]:void 0,c=new O3e({tools:l,type:n});let u="other",d={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:h=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:a},rawResponse:{headers:s},stream:i.pipeThrough(new TransformStream({async flush(f){f.enqueue({finishReason:u,type:"finish",usage:d})},async transform(f,p){if(!f.success){p.enqueue({error:f.error,type:"error"});return}const m=f.value;if(m.done){u=c.finish({controller:p}),d={completionTokens:m.eval_count,promptTokens:m.prompt_eval_count||0};return}h&&c.parse({controller:p,delta:m.message.content})||m.message.content!==null&&p.enqueue({textDelta:m.message.content,type:"text-delta"})}})),warnings:r}}},$3e=V.object({created_at:V.string(),done:V.literal(!0),done_reason:V.string().optional().nullable(),eval_count:V.number(),eval_duration:V.number(),load_duration:V.number().optional(),message:V.object({content:V.string(),role:V.string(),tool_calls:V.array(V.object({function:V.object({arguments:V.record(V.any()),name:V.string()}),id:V.string().optional()})).optional().nullable()}),model:V.string(),prompt_eval_count:V.number().optional(),prompt_eval_duration:V.number().optional(),total_duration:V.number()}),U3e=V.discriminatedUnion("done",[V.object({created_at:V.string(),done:V.literal(!1),message:V.object({content:V.string(),role:V.string()}),model:V.string()}),V.object({created_at:V.string(),done:V.literal(!0),eval_count:V.number(),eval_duration:V.number(),load_duration:V.number().optional(),model:V.string(),prompt_eval_count:V.number().optional(),prompt_eval_duration:V.number().optional(),total_duration:V.number()})]),H3e=class{constructor(t,e,n){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var t;return(t=this.settings.maxEmbeddingsPerCall)!=null?t:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:t,values:e}){if(e.length>this.maxEmbeddingsPerCall)throw new p3e({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:e});const{responseHeaders:n,value:r}=await j4({abortSignal:t,body:{input:e,model:this.modelId},failedResponseHandler:B4,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Fte(z3e),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},z3e=V.object({embeddings:V.array(V.array(V.number())),prompt_eval_count:V.number().nullable()});function V3e(t={}){var e;const n=(e=R3e(t.baseURL))!=null?e:"http://127.0.0.1:11434/api",r=()=>({...t.headers}),s=(a,l={})=>new B3e(a,l,{baseURL:n,fetch:t.fetch,headers:r,provider:"ollama.chat"}),i=(a,l={})=>new H3e(a,l,{baseURL:n,fetch:t.fetch,headers:r,provider:"ollama.embedding"}),o=function(a,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return s(a,l)};return o.chat=s,o.embedding=i,o.languageModel=s,o.textEmbedding=i,o.textEmbeddingModel=i,o}var W3e=V3e(),ZE={};const G3e=ZE?.DEFAULT_NUM_CTX?parseInt(ZE.DEFAULT_NUM_CTX,10):32768;class q3e extends ys{name="Ollama";getApiKeyLink="https://ollama.com/download";labelForGetApiKey="Download Ollama";icon="i-ph:cloud-arrow-down";config={baseUrlKey:"OLLAMA_API_BASE_URL"};staticModels=[];async getDynamicModels(e,n,r={}){let{baseUrl:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"OLLAMA_API_BASE_URL",defaultApiTokenKey:""});if(!s)throw new Error("No baseUrl found for OLLAMA provider");if(typeof window>"u"){const a=ZE?.RUNNING_IN_DOCKER==="true"||r?.RUNNING_IN_DOCKER==="true";s=a?s.replace("localhost","host.docker.internal"):s,s=a?s.replace("127.0.0.1","host.docker.internal"):s}return(await(await fetch(`${s}/api/tags`)).json()).models.map(a=>({name:a.name,label:`${a.name} (${a.details.parameter_size})`,provider:this.name,maxTokenAllowed:8e3}))}getModelInstance=e=>{const{apiKeys:n,providerSettings:r,serverEnv:s,model:i}=e;let{baseUrl:o}=this.getProviderBaseUrlAndKey({apiKeys:n,providerSettings:r?.[this.name],serverEnv:s,defaultBaseUrlKey:"OLLAMA_API_BASE_URL",defaultApiTokenKey:""});if(!o)throw new Error("No baseUrl found for OLLAMA provider");const a=ZE?.RUNNING_IN_DOCKER==="true"||s?.RUNNING_IN_DOCKER==="true";o=a?o.replace("localhost","host.docker.internal"):o,o=a?o.replace("127.0.0.1","host.docker.internal"):o,uD.debug("Ollama Base Url used: ",o);const l=W3e(i,{numCtx:G3e});return l.config.baseURL=`${o}/api`,l}}var xu=class extends Error{constructor({message:t,url:e,requestBodyValues:n,statusCode:r,responseHeaders:s,responseBody:i,cause:o,isRetryable:a=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super(t),this.name="AI_APICallError",this.url=e,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=s,this.responseBody=i,this.cause=o,this.isRetryable=a,this.data=l}static isAPICallError(t){return t instanceof Error&&t.name==="AI_APICallError"&&typeof t.url=="string"&&typeof t.requestBodyValues=="object"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.responseHeaders==null||typeof t.responseHeaders=="object")&&(t.responseBody==null||typeof t.responseBody=="string")&&(t.cause==null||typeof t.cause=="object")&&typeof t.isRetryable=="boolean"&&(t.data==null||typeof t.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}},K3e=class extends Error{constructor({message:t="Empty response body"}={}){super(t),this.name="AI_EmptyResponseBodyError"}static isEmptyResponseBodyError(t){return t instanceof Error&&t.name==="AI_EmptyResponseBodyError"}toJSON(){return{name:this.name,message:this.message,stack:this.stack}}},Y3e=class extends Error{constructor({prompt:t,message:e}){super(`Invalid prompt: ${e}`),this.name="AI_InvalidPromptError",this.prompt=t}static isInvalidPromptError(t){return t instanceof Error&&t.name==="AI_InvalidPromptError"&&prompt!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}},x3=class extends Error{constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super(e),this.name="AI_InvalidResponseDataError",this.data=t}static isInvalidResponseDataError(t){return t instanceof Error&&t.name==="AI_InvalidResponseDataError"&&t.data!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,data:this.data}}};function $te(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var QE=class extends Error{constructor({text:e,cause:n}){super(`JSON parsing failed: Text: ${e}.
Error message: ${$te(n)}`),this.name="AI_JSONParseError",this.cause=n,this.text=e}static isJSONParseError(e){return e instanceof Error&&e.name==="AI_JSONParseError"&&typeof e.text=="string"&&typeof e.cause=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}},X_=class extends Error{constructor({message:t}){super(t),this.name="AI_LoadAPIKeyError"}static isLoadAPIKeyError(t){return t instanceof Error&&t.name==="AI_LoadAPIKeyError"}toJSON(){return{name:this.name,message:this.message}}},vv=class extends Error{constructor({value:e,cause:n}){super(`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${$te(n)}`),this.name="AI_TypeValidationError",this.cause=n,this.value=e}static isTypeValidationError(e){return e instanceof Error&&e.name==="AI_TypeValidationError"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}},_u=class extends Error{constructor({functionality:e}){super(`'${e}' functionality not supported.`),this.name="AI_UnsupportedFunctionalityError",this.functionality=e}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name==="AI_UnsupportedFunctionalityError"&&typeof e.functionality=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};let J3e=(t,e=21)=>(n=e)=>{let r="",s=n;for(;s--;)r+=t[Math.random()*t.length|0];return r};function X3e(t){let e,n,r,s,i,o,a;return l(),{feed:c,reset:l};function l(){e=!0,n="",r=0,s=-1,i=void 0,o=void 0,a=""}function c(d){n=n?n+d:d,e&&Z3e(n)&&(n=n.slice(Ute.length)),e=!1;const h=n.length;let f=0,p=!1;for(;f<h;){p&&(n[f]===`
`&&++f,p=!1);let m=-1,g=s,b;for(let v=r;m<0&&v<h;++v)b=n[v],b===":"&&g<0?g=v-f:b==="\r"?(p=!0,m=v-f):b===`
`&&(m=v-f);if(m<0){r=h-f,s=g;break}else r=0,s=-1;u(n,f,g,m),f+=m+1}f===h?n="":f>0&&(n=n.slice(f))}function u(d,h,f,p){if(p===0){a.length>0&&(t({type:"event",id:i,event:o||void 0,data:a.slice(0,-1)}),a="",i=void 0),o=void 0;return}const m=f<0,g=d.slice(h,h+(m?p:f));let b=0;m?b=p:d[h+f+1]===" "?b=f+2:b=f+1;const v=h+b,w=p-b,_=d.slice(v,v+w).toString();if(g==="data")a+=_?"".concat(_,`
`):`
`;else if(g==="event")o=_;else if(g==="id"&&!_.includes("\0"))i=_;else if(g==="retry"){const S=parseInt(_,10);Number.isNaN(S)||t({type:"reconnect-interval",value:S})}}}const Ute=[239,187,191];function Z3e(t){return Ute.every((e,n)=>t.charCodeAt(n)===e)}class Q3e extends TransformStream{constructor(){let e;super({start(n){e=X3e(r=>{r.type==="event"&&n.enqueue(r)})},transform(n){e.feed(n)}})}}var ePe={};function ek(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function xA(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var _3=J3e("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7);function S3(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function tPe({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new X_({message:`${r} API key must be a string.`});if(typeof Sn>"u")throw new X_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=ePe[e],t==null)throw new X_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new X_({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}function nPe({value:t,schema:e}){try{return e.parse(t)}catch(n){throw new vv({value:t,cause:n})}}function rPe({value:t,schema:e}){try{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:new vv({value:t,cause:n.error})}}catch(n){return{success:!1,error:vv.isTypeValidationError(n)?n:new vv({value:t,cause:n})}}}function sPe({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?n:nPe({value:n,schema:e})}catch(n){throw QE.isJSONParseError(n)||vv.isTypeValidationError(n)?n:new QE({text:t,cause:n})}}function Hte({text:t,schema:e}){try{const n=Jr.parse(t);return e==null?{success:!0,value:n}:rPe({value:n,schema:e})}catch(n){return{success:!1,error:QE.isJSONParseError(n)?n:new QE({text:t,cause:n})}}}function Y7(t){try{return Jr.parse(t),!0}catch{return!1}}function iPe(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}var oPe=()=>fetch,tk=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>aPe({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),aPe=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=oPe()})=>{try{const a=await o(t,{method:"POST",headers:iPe(e),body:n.content,signal:i}),l=xA(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw S3(u)||xu.isAPICallError(u)?u:new xu({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(S3(c)||xu.isAPICallError(c))?c:new xu({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(S3(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new xu({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},lPe=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=xA(r);if(o.trim()==="")return{responseHeaders:a,value:new xu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=sPe({text:o,schema:t});return{responseHeaders:a,value:new xu({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new xu({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},zte=t=>async({response:e})=>{const n=xA(e);if(e.body==null)throw new K3e({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new Q3e).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(Hte({text:r,schema:t}))}}))}},Vte=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=Hte({text:s,schema:t}),o=xA(e);if(!i.success)throw new xu({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value}};function cPe(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return globalThis.btoa(e)}function uPe(t){return t?.replace(/\/$/,"")}var dPe=Object.defineProperty,hPe=Object.defineProperties,fPe=Object.getOwnPropertyDescriptors,nk=Object.getOwnPropertySymbols,Wte=Object.prototype.hasOwnProperty,Gte=Object.prototype.propertyIsEnumerable,J7=(t,e,n)=>e in t?dPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uu=(t,e)=>{for(var n in e||(e={}))Wte.call(e,n)&&J7(t,n,e[n]);if(nk)for(var n of nk(e))Gte.call(e,n)&&J7(t,n,e[n]);return t},OS=(t,e)=>hPe(t,fPe(e)),rk=(t,e)=>{var n={};for(var r in t)Wte.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&nk)for(var r of nk(t))e.indexOf(r)<0&&Gte.call(t,r)&&(n[r]=t[r]);return n};function pPe(t){var e;const n=[];for(const{role:r,content:s}of t)switch(r){case"system":{n.push({role:"system",content:s});break}case"user":{if(s.length===1&&((e=s[0])==null?void 0:e.type)==="text"){n.push({role:"user",content:s[0].text});break}n.push({role:"user",content:s.map(i=>{var o;switch(i.type){case"text":return{type:"text",text:i.text};case"image":return{type:"image_url",image_url:{url:i.image instanceof URL?i.image.toString():`data:${(o=i.mimeType)!=null?o:"image/jpeg"};base64,${cPe(i.image)}`}}}})});break}case"assistant":{let i="";const o=[];for(const a of s)switch(a.type){case"text":{i+=a.text;break}case"tool-call":{o.push({id:a.toolCallId,type:"function",function:{name:a.toolName,arguments:JSON.stringify(a.args)}});break}default:{const l=a;throw new Error(`Unsupported part: ${l}`)}}n.push({role:"assistant",content:i,tool_calls:o.length>0?o:void 0});break}case"tool":{for(const i of s)n.push({role:"tool",tool_call_id:i.toolCallId,content:JSON.stringify(i.result)});break}default:{const i=r;throw new Error(`Unsupported role: ${i}`)}}return n}function X7(t){var e,n;return(n=(e=t?.content)==null?void 0:e.map(({token:r,logprob:s,top_logprobs:i})=>({token:r,logprob:s,topLogprobs:i?i.map(({token:o,logprob:a})=>({token:o,logprob:a})):[]})))!=null?n:void 0}function sk(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var a6=V.object({error:V.object({message:V.string(),type:V.string(),param:V.any().nullable(),code:V.string().nullable()})}),ik=lPe({errorSchema:a6,errorToMessage:t=>t.error.message}),mPe=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,frequencyPenalty:i,presencePenalty:o,seed:a}){const l=t.type,c=uu({model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:s,frequency_penalty:i,presence_penalty:o,seed:a,messages:pPe(e)},this.config.extraBody);switch(l){case"regular":return uu(uu({},c),yPe(t));case"object-json":return OS(uu({},c),{response_format:{type:"json_object"}});case"object-tool":return OS(uu({},c),{tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}}]});case"object-grammar":throw new _u({functionality:"object-grammar mode"});default:{const u=l;throw new Error(`Unsupported type: ${u}`)}}}async doGenerate(t){var e,n;const r=this.getArgs(t),{responseHeaders:s,value:i}=await tk({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ek(this.config.headers(),t.headers),body:r,failedResponseHandler:ik,successfulResponseHandler:Vte(gPe),abortSignal:t.abortSignal,fetch:this.config.fetch}),o=r,{messages:a}=o,l=rk(o,["messages"]),c=i.choices[0];if(c==null)throw new Error("No choice in response");return{text:(e=c.message.content)!=null?e:void 0,toolCalls:(n=c.message.tool_calls)==null?void 0:n.map(u=>{var d;return{toolCallType:"function",toolCallId:(d=u.id)!=null?d:_3(),toolName:u.function.name,args:u.function.arguments}}),finishReason:sk(c.finish_reason),usage:{promptTokens:i.usage.prompt_tokens,completionTokens:i.usage.completion_tokens},rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:s},warnings:[],logprobs:X7(c.logprobs)}}async doStream(t){const e=this.getArgs(t),{responseHeaders:n,value:r}=await tk({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ek(this.config.headers(),t.headers),body:OS(uu({},e),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:ik,successfulResponseHandler:zte(bPe),abortSignal:t.abortSignal,fetch:this.config.fetch}),s=e,{messages:i}=s,o=rk(s,["messages"]),a=[];let l="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){var f,p,m,g,b,v,w,_,S,E,k,x;if(!d.success){l="error",h.enqueue({type:"error",error:d.error});return}const I=d.value;if("error"in I){l="error",h.enqueue({type:"error",error:I.error});return}I.usage!=null&&(c={promptTokens:I.usage.prompt_tokens,completionTokens:I.usage.completion_tokens});const R=I.choices[0];if(R?.finish_reason!=null&&(l=sk(R.finish_reason)),R?.delta==null)return;const C=R.delta;C.content!=null&&h.enqueue({type:"text-delta",textDelta:C.content});const T=X7(R?.logprobs);if(T?.length&&(u===void 0&&(u=[]),u.push(...T)),C.tool_calls!=null)for(const O of C.tool_calls){const P=O.index;if(a[P]==null){if(O.type!=="function")throw new x3({data:O,message:"Expected 'function' type."});if(O.id==null)throw new x3({data:O,message:"Expected 'id' to be a string."});if(((f=O.function)==null?void 0:f.name)==null)throw new x3({data:O,message:"Expected 'function.name' to be a string."});a[P]={id:O.id,type:"function",function:{name:O.function.name,arguments:(p=O.function.arguments)!=null?p:""}};const ee=a[P];if(ee==null)throw new Error("Tool call is missing");((m=ee.function)==null?void 0:m.name)!=null&&((g=ee.function)==null?void 0:g.arguments)!=null&&Y7(ee.function.arguments)&&(h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ee.id,toolName:ee.function.name,argsTextDelta:ee.function.arguments}),h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(b=ee.id)!=null?b:_3(),toolName:ee.function.name,args:ee.function.arguments}));continue}const U=a[P];if(U==null)throw new Error("Tool call is missing");((v=O.function)==null?void 0:v.arguments)!=null&&(U.function.arguments+=(_=(w=O.function)==null?void 0:w.arguments)!=null?_:""),h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:U.id,toolName:U.function.name,argsTextDelta:(S=O.function.arguments)!=null?S:""}),((E=U.function)==null?void 0:E.name)!=null&&((k=U.function)==null?void 0:k.arguments)!=null&&Y7(U.function.arguments)&&h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=U.id)!=null?x:_3(),toolName:U.function.name,args:U.function.arguments})}},flush(d){d.enqueue({type:"finish",finishReason:l,logprobs:u,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},gPe=V.object({choices:V.array(V.object({message:V.object({role:V.literal("assistant"),content:V.string().nullable().optional(),tool_calls:V.array(V.object({id:V.string().optional().nullable(),type:V.literal("function"),function:V.object({name:V.string(),arguments:V.string()})})).optional()}),index:V.number(),logprobs:V.object({content:V.array(V.object({token:V.string(),logprob:V.number(),top_logprobs:V.array(V.object({token:V.string(),logprob:V.number()}))})).nullable()}).nullable().optional(),finish_reason:V.string().optional().nullable()})),usage:V.object({prompt_tokens:V.number(),completion_tokens:V.number()})}),bPe=V.union([V.object({choices:V.array(V.object({delta:V.object({role:V.enum(["assistant"]).optional(),content:V.string().nullish(),tool_calls:V.array(V.object({index:V.number(),id:V.string().nullish(),type:V.literal("function").optional(),function:V.object({name:V.string().nullish(),arguments:V.string().nullish()})})).nullish()}).nullish(),logprobs:V.object({content:V.array(V.object({token:V.string(),logprob:V.number(),top_logprobs:V.array(V.object({token:V.string(),logprob:V.number()}))})).nullable()}).nullish(),finish_reason:V.string().nullable().optional(),index:V.number()})),usage:V.object({prompt_tokens:V.number(),completion_tokens:V.number()}).nullish()}),a6]);function yPe(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>({type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}})),s=t.toolChoice;if(s==null)return{tools:r,tool_choice:void 0};const i=s.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:s.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function vPe({prompt:t,inputFormat:e,user:n="user",assistant:r="assistant"}){if(e==="prompt"&&t.length===1&&t[0]&&t[0].role==="user"&&t[0].content.length===1&&t[0].content[0]&&t[0].content[0].type==="text")return{prompt:t[0].content[0].text};let s="";t[0]&&t[0].role==="system"&&(s+=`${t[0].content}

`,t=t.slice(1));for(const{role:i,content:o}of t)switch(i){case"system":throw new Y3e({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{const a=o.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new _u({functionality:"images"})}}).join("");s+=`${n}:
${a}

`;break}case"assistant":{const a=o.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new _u({functionality:"tool-call messages"})}}).join("");s+=`${r}:
${a}

`;break}case"tool":throw new _u({functionality:"tool messages"});default:{const a=i;throw new Error(`Unsupported role: ${a}`)}}return s+=`${r}:
`,{prompt:s,stopSequences:[`
${n}:`]}}function Z7(t){return t?.tokens.map((e,n)=>{var r,s;return{token:e,logprob:(r=t.token_logprobs[n])!=null?r:0,topLogprobs:t.top_logprobs?Object.entries((s=t.top_logprobs[n])!=null?s:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var wPe=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}getArgs({mode:t,inputFormat:e,prompt:n,maxTokens:r,temperature:s,topP:i,frequencyPenalty:o,presencePenalty:a,seed:l}){var c;const u=t.type,{prompt:d,stopSequences:h}=vPe({prompt:n,inputFormat:e}),f=uu({model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:s,top_p:i,frequency_penalty:o,presence_penalty:a,seed:l,prompt:d,stop:h},this.config.extraBody);switch(u){case"regular":{if((c=t.tools)!=null&&c.length)throw new _u({functionality:"tools"});if(t.toolChoice)throw new _u({functionality:"toolChoice"});return f}case"object-json":throw new _u({functionality:"object-json mode"});case"object-tool":throw new _u({functionality:"object-tool mode"});case"object-grammar":throw new _u({functionality:"object-grammar mode"});default:{const p=u;throw new Error(`Unsupported type: ${p}`)}}}async doGenerate(t){const e=this.getArgs(t),{responseHeaders:n,value:r}=await tk({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ek(this.config.headers(),t.headers),body:e,failedResponseHandler:ik,successfulResponseHandler:Vte(xPe),abortSignal:t.abortSignal,fetch:this.config.fetch}),s=e,{prompt:i}=s,o=rk(s,["prompt"]),a=r.choices[0];if(!a)throw new Error("No choice in OpenRouter completion response");return{text:a.text,usage:{promptTokens:r.usage.prompt_tokens,completionTokens:r.usage.completion_tokens},finishReason:sk(a.finish_reason),logprobs:Z7(a.logprobs),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}async doStream(t){const e=this.getArgs(t),{responseHeaders:n,value:r}=await tk({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ek(this.config.headers(),t.headers),body:OS(uu({},this.getArgs(t)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:ik,successfulResponseHandler:zte(_Pe),abortSignal:t.abortSignal,fetch:this.config.fetch}),s=e,{prompt:i}=s,o=rk(s,["prompt"]);let a="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(u,d){if(!u.success){a="error",d.enqueue({type:"error",error:u.error});return}const h=u.value;if("error"in h){a="error",d.enqueue({type:"error",error:h.error});return}h.usage!=null&&(l={promptTokens:h.usage.prompt_tokens,completionTokens:h.usage.completion_tokens});const f=h.choices[0];f?.finish_reason!=null&&(a=sk(f.finish_reason)),f?.text!=null&&d.enqueue({type:"text-delta",textDelta:f.text});const p=Z7(f?.logprobs);p?.length&&(c===void 0&&(c=[]),c.push(...p))},flush(u){u.enqueue({type:"finish",finishReason:a,logprobs:c,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},xPe=V.object({choices:V.array(V.object({text:V.string(),finish_reason:V.string(),logprobs:V.object({tokens:V.array(V.string()),token_logprobs:V.array(V.number()),top_logprobs:V.array(V.record(V.string(),V.number())).nullable()}).nullable().optional()})),usage:V.object({prompt_tokens:V.number(),completion_tokens:V.number()})}),_Pe=V.union([V.object({choices:V.array(V.object({text:V.string(),finish_reason:V.string().nullish(),index:V.number(),logprobs:V.object({tokens:V.array(V.string()),token_logprobs:V.array(V.number()),top_logprobs:V.array(V.record(V.string(),V.number())).nullable()}).nullable().optional()})),usage:V.object({prompt_tokens:V.number(),completion_tokens:V.number()}).optional().nullable()}),a6]);function qte(t={}){var e,n,r;const s=(n=uPe((e=t.baseURL)!=null?e:t.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=t.compatibility)!=null?r:"compatible",o=()=>uu({Authorization:`Bearer ${tPe({apiKey:t.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},t.headers),a=(d,h={})=>new mPe(d,h,{provider:"openrouter.chat",url:({path:f})=>`${s}${f}`,headers:o,compatibility:i,fetch:t.fetch,extraBody:t.extraBody}),l=(d,h={})=>new wPe(d,h,{provider:"openrouter.completion",url:({path:f})=>`${s}${f}`,headers:o,compatibility:i,fetch:t.fetch,extraBody:t.extraBody}),c=(d,h)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return d==="openai/gpt-3.5-turbo-instruct"?l(d,h):a(d,h)},u=function(d,h){return c(d,h)};return u.languageModel=c,u.chat=a,u.completion=l,u}qte({compatibility:"strict"});class SPe extends ys{name="OpenRouter";getApiKeyLink="https://openrouter.ai/settings/keys";config={apiTokenKey:"OPEN_ROUTER_API_KEY"};staticModels=[{name:"anthropic/claude-3.5-sonnet",label:"Anthropic: Claude 3.5 Sonnet (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"anthropic/claude-3-haiku",label:"Anthropic: Claude 3 Haiku (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"deepseek/deepseek-coder",label:"Deepseek-Coder V2 236B (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"google/gemini-flash-1.5",label:"Google Gemini Flash 1.5 (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"google/gemini-pro-1.5",label:"Google Gemini Pro 1.5 (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"x-ai/grok-beta",label:"xAI Grok Beta (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"mistralai/mistral-nemo",label:"OpenRouter Mistral Nemo (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"qwen/qwen-110b-chat",label:"OpenRouter Qwen 110b Chat (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"cohere/command",label:"Cohere Command (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:4096}];async getDynamicModels(e,n,r={}){try{return(await(await fetch("https://openrouter.ai/api/v1/models",{headers:{"Content-Type":"application/json"}})).json()).data.sort((o,a)=>o.name.localeCompare(a.name)).map(o=>({name:o.id,label:`${o.name} - in:$${(o.pricing.prompt*1e6).toFixed(2)} out:$${(o.pricing.completion*1e6).toFixed(2)} - context ${Math.floor(o.context_length/1e3)}k`,provider:this.name,maxTokenAllowed:8e3}))}catch(s){return console.error("Error getting OpenRouter models:",s),[]}}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"OPEN_ROUTER_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return qte({apiKey:o}).chat(n)}}class EPe extends ys{name="OpenAILike";getApiKeyLink=void 0;config={baseUrlKey:"OPENAI_LIKE_API_BASE_URL",apiTokenKey:"OPENAI_LIKE_API_KEY"};staticModels=[];async getDynamicModels(e,n,r={}){const{baseUrl:s,apiKey:i}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"OPENAI_LIKE_API_BASE_URL",defaultApiTokenKey:"OPENAI_LIKE_API_KEY"});return!s||!i?[]:(await(await fetch(`${s}/models`,{headers:{Authorization:`Bearer ${i}`}})).json()).data.map(l=>({name:l.id,label:l.id,provider:this.name,maxTokenAllowed:8e3}))}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{baseUrl:o,apiKey:a}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"OPENAI_LIKE_API_BASE_URL",defaultApiTokenKey:"OPENAI_LIKE_API_KEY"});if(!o||!a)throw new Error(`Missing configuration for ${this.name} provider`);return MZ(o,a,n)}}class kPe extends ys{name="OpenAI";getApiKeyLink="https://platform.openai.com/api-keys";config={apiTokenKey:"OPENAI_API_KEY"};staticModels=[{name:"gpt-4o",label:"GPT-4o",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-4o-mini",label:"GPT-4o Mini",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-4-turbo",label:"GPT-4 Turbo",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-4",label:"GPT-4",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",provider:"OpenAI",maxTokenAllowed:8e3}];async getDynamicModels(e,n,r){const{apiKey:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"OPENAI_API_KEY"});if(!s)throw`Missing Api Key configuration for ${this.name} provider`;const o=await(await fetch("https://api.openai.com/v1/models",{headers:{Authorization:`Bearer ${s}`}})).json(),a=this.staticModels.map(c=>c.name);return o.data.filter(c=>c.object==="model"&&(c.id.startsWith("gpt-")||c.id.startsWith("o")||c.id.startsWith("chatgpt-"))&&!a.includes(c.id)).map(c=>({name:c.id,label:`${c.id}`,provider:this.name,maxTokenAllowed:c.context_window||32e3}))}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"OPENAI_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Fc({apiKey:o})(n)}}class CPe extends ys{name="Perplexity";getApiKeyLink="https://www.perplexity.ai/settings/api";config={apiTokenKey:"PERPLEXITY_API_KEY"};staticModels=[{name:"llama-3.1-sonar-small-128k-online",label:"Sonar Small Online",provider:"Perplexity",maxTokenAllowed:8192},{name:"llama-3.1-sonar-large-128k-online",label:"Sonar Large Online",provider:"Perplexity",maxTokenAllowed:8192},{name:"llama-3.1-sonar-huge-128k-online",label:"Sonar Huge Online",provider:"Perplexity",maxTokenAllowed:8192}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"PERPLEXITY_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Fc({baseURL:"https://api.perplexity.ai/",apiKey:o})(n)}}class APe extends ys{name="Together";getApiKeyLink="https://api.together.xyz/settings/api-keys";config={baseUrlKey:"TOGETHER_API_BASE_URL",apiTokenKey:"TOGETHER_API_KEY"};staticModels=[{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen/Qwen2.5-Coder-32B-Instruct",provider:"Together",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.2-90B-Vision-Instruct-Turbo",label:"meta-llama/Llama-3.2-90B-Vision-Instruct-Turbo",provider:"Together",maxTokenAllowed:8e3},{name:"mistralai/Mixtral-8x7B-Instruct-v0.1",label:"Mixtral 8x7B Instruct",provider:"Together",maxTokenAllowed:8192}];async getDynamicModels(e,n,r={}){const{baseUrl:s,apiKey:i}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"TOGETHER_API_BASE_URL",defaultApiTokenKey:"TOGETHER_API_KEY"}),o=s||"https://api.together.xyz/v1";return i?(await(await fetch(`${o}/models`,{headers:{Authorization:`Bearer ${i}`}})).json()||[]).filter(u=>u.type==="chat").map(u=>({name:u.id,label:`${u.display_name} - in:$${u.pricing.input.toFixed(2)} out:$${u.pricing.output.toFixed(2)} - context ${Math.floor(u.context_length/1e3)}k`,provider:this.name,maxTokenAllowed:8e3})):[]}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{baseUrl:o,apiKey:a}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"TOGETHER_API_BASE_URL",defaultApiTokenKey:"TOGETHER_API_KEY"});if(!o||!a)throw new Error(`Missing configuration for ${this.name} provider`);return MZ(o,a,n)}}class TPe extends ys{name="xAI";getApiKeyLink="https://docs.x.ai/docs/quickstart#creating-an-api-key";config={apiTokenKey:"XAI_API_KEY"};staticModels=[{name:"grok-beta",label:"xAI Grok Beta",provider:"xAI",maxTokenAllowed:8e3},{name:"grok-2-1212",label:"xAI Grok2 1212",provider:"xAI",maxTokenAllowed:8e3}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"XAI_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Fc({baseURL:"https://api.x.ai/v1",apiKey:o})(n)}}class PPe extends ys{name="Hyperbolic";getApiKeyLink="https://app.hyperbolic.xyz/settings";config={apiTokenKey:"HYPERBOLIC_API_KEY"};staticModels=[{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen 2.5 Coder 32B Instruct",provider:"Hyperbolic",maxTokenAllowed:8192},{name:"Qwen/Qwen2.5-72B-Instruct",label:"Qwen2.5-72B-Instruct",provider:"Hyperbolic",maxTokenAllowed:8192},{name:"deepseek-ai/DeepSeek-V2.5",label:"DeepSeek-V2.5",provider:"Hyperbolic",maxTokenAllowed:8192},{name:"Qwen/QwQ-32B-Preview",label:"QwQ-32B-Preview",provider:"Hyperbolic",maxTokenAllowed:8192},{name:"Qwen/Qwen2-VL-72B-Instruct",label:"Qwen2-VL-72B-Instruct",provider:"Hyperbolic",maxTokenAllowed:8192}];async getDynamicModels(e,n,r={}){const{baseUrl:s,apiKey:i}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"HYPERBOLIC_API_KEY"}),o=s||"https://api.hyperbolic.xyz/v1";if(!i)throw`Missing Api Key configuration for ${this.name} provider`;return(await(await fetch(`${o}/models`,{headers:{Authorization:`Bearer ${i}`}})).json()).data.filter(u=>u.object==="model"&&u.supports_chat).map(u=>({name:u.id,label:`${u.id} - context ${u.context_length?Math.floor(u.context_length/1e3)+"k":"N/A"}`,provider:this.name,maxTokenAllowed:u.context_length||8e3}))}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"HYPERBOLIC_API_KEY"});if(!o)throw`Missing Api Key configuration for ${this.name} provider`;return Fc({baseURL:"https://api.hyperbolic.xyz/v1/",apiKey:o})(n)}}var Kte="vercel.ai.error",NPe=Symbol.for(Kte),Yte,IPe=class Jte extends Error{constructor({name:e,message:n,cause:r}){super(n),this[Yte]=!0,this.name=e,this.cause=r}static isInstance(e){return Jte.hasMarker(e,Kte)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};Yte=NPe;var l0=IPe,Xte="AI_InvalidArgumentError",Zte=`vercel.ai.error.${Xte}`,RPe=Symbol.for(Zte),Qte,OPe=class extends l0{constructor({message:e,cause:n,argument:r}){super({name:Xte,message:e,cause:n}),this[Qte]=!0,this.argument=r}static isInstance(e){return l0.hasMarker(e,Zte)}};Qte=RPe;var ene="AI_LoadSettingError",tne=`vercel.ai.error.${ene}`,LPe=Symbol.for(tne),nne,Z_=class extends l0{constructor({message:t}){super({name:ene,message:t}),this[nne]=!0}static isInstance(t){return l0.hasMarker(t,tne)}};nne=LPe;var rne="AI_UnsupportedFunctionalityError",sne=`vercel.ai.error.${rne}`,DPe=Symbol.for(sne),ine,wv=class extends l0{constructor({functionality:t}){super({name:rne,message:`'${t}' functionality not supported.`}),this[ine]=!0,this.functionality=t}static isInstance(t){return l0.hasMarker(t,sne)}};ine=DPe;var one={},ane=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=Dp(n,e);if(t==null)return s;if(n.includes(r))throw new OPe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${t}${r}${s(i)}`},MPe=ane();function jPe({settingValue:t,environmentVariableName:e}){if(typeof t=="string")return t;if(!(t!=null||typeof Sn>"u")&&(t=one[e],!(t==null||typeof t!="string")))return t}function E3({settingValue:t,environmentVariableName:e,settingName:n,description:r}){if(typeof t=="string")return t;if(t!=null)throw new Z_({message:`${r} setting must be a string.`});if(typeof Sn>"u")throw new Z_({message:`${r} setting is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=one[e],t==null)throw new Z_({message:`${r} setting is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new Z_({message:`${r} setting must be a string. The value of the ${e} environment variable is not a string.`});return t}const FPe=t=>{let e=t.httpHandler;return{setHttpHandler(n){e=n},httpHandler(){return e},updateHttpClientConfig(n,r){e.updateHttpClientConfig(n,r)},httpHandlerConfigs(){return e.httpHandlerConfigs()}}},BPe=t=>({httpHandler:t.httpHandler()});var Q7;(function(t){t.HEADER="header",t.QUERY="query"})(Q7||(Q7={}));var e$;(function(t){t.HEADER="header",t.QUERY="query"})(e$||(e$={}));var A1;(function(t){t.HTTP="http",t.HTTPS="https"})(A1||(A1={}));var ok;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(ok||(ok={}));var t$;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(t$||(t$={}));const $4="__smithy_context";var n$;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(n$||(n$={}));var r$;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(r$||(r$={}));class qo{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const n=new qo({...e,headers:{...e.headers}});return n.query&&(n.query=$Pe(n.query)),n}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return qo.clone(this)}}function $Pe(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}class ak{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}const UPe=t=>e=>async n=>{if(!qo.isInstance(n.request))return e(n);const{request:r}=n,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let i=r.hostname;r.port!=null&&(i+=`:${r.port}`),r.headers.host=i}return e(n)},HPe={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},zPe=t=>({applyToStack:e=>{e.add(UPe(t),HPe)}}),VPe=()=>(t,e)=>async n=>{try{const r=await t(n),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:c}=a,u=l??e.inputFilterSensitiveLog,d=c??e.outputFilterSensitiveLog,{$metadata:h,...f}=r.output;return o?.info?.({clientName:s,commandName:i,input:u(n.input),output:d(f),metadata:h}),r}catch(r){const{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:l}=a,c=l??e.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:c(n.input),error:r,metadata:r.$metadata}),r}},WPe={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},GPe=t=>({applyToStack:e=>{e.add(VPe(),WPe)}});var s$={};const i$="X-Amzn-Trace-Id",qPe="AWS_LAMBDA_FUNCTION_NAME",KPe="_X_AMZN_TRACE_ID",YPe=t=>e=>async n=>{const{request:r}=n;if(!qo.isInstance(r)||t.runtime!=="node"||r.headers.hasOwnProperty(i$))return e(n);const s=s$[qPe],i=s$[KPe],o=a=>typeof a=="string"&&a.length>0;return o(s)&&o(i)&&(r.headers[i$]=i),e({...n,request:r})},JPe={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},XPe=t=>({applyToStack:e=>{e.add(YPe(t),JPe)}}),_A=t=>t[$4]||(t[$4]={}),Xd=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e};function ZPe(t){const e=new Map;for(const n of t)e.set(n.schemeId,n);return e}const QPe=(t,e)=>(n,r)=>async s=>{const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,r,s.input)),o=ZPe(t.httpAuthSchemes),a=_A(r),l=[];for(const c of i){const u=o.get(c.schemeId);if(!u){l.push(`HttpAuthScheme \`${c.schemeId}\` was not enabled for this service.`);continue}const d=u.identityProvider(await e.identityProviderConfigProvider(t));if(!d){l.push(`HttpAuthScheme \`${c.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:h={},signingProperties:f={}}=c.propertiesExtractor?.(t,r)||{};c.identityProperties=Object.assign(c.identityProperties||{},h),c.signingProperties=Object.assign(c.signingProperties||{},f),a.selectedHttpAuthScheme={httpAuthOption:c,identity:await d(c.identityProperties),signer:u.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(l.join(`
`));return n(s)},eNe={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},tNe=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(QPe(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n}),eNe)}}),nNe=(t,e)=>(n,r)=>async s=>{const{response:i}=await n(s);try{const o=await e(i,t);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{o.message+=`
  `+a}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a)}typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText)}throw o}},rNe=(t,e)=>(n,r)=>async s=>{const i=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint;if(!i)throw new Error("No valid endpoint provider available.");const o=await e(s.input,{...t,endpoint:i});return n({...s,request:o})},sNe={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},l6={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function c6(t,e,n){return{applyToStack:r=>{r.add(nNe(t,n),sNe),r.add(rNe(t,e),l6)}}}l6.name;const iNe=t=>e=>{throw e},oNe=(t,e)=>{},aNe=t=>(e,n)=>async r=>{if(!qo.isInstance(r.request))return e(r);const i=_A(n).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:l}=i,c=await e({...r,request:await l.sign(r.request,a,o)}).catch((l.errorHandler||iNe)(o));return(l.successHandler||oNe)(c.response,o),c},lNe={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},cNe=t=>({applyToStack:e=>{e.addRelativeTo(aNe(),lNe)}}),Gy=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},uh={},Y0=new Array(64);for(let t=0,e=65,n=90;t+e<=n;t++){const r=String.fromCharCode(t+e);uh[r]=t,Y0[t]=r}for(let t=0,e=97,n=122;t+e<=n;t++){const r=String.fromCharCode(t+e),s=t+26;uh[r]=s,Y0[s]=r}for(let t=0;t<10;t++){uh[t.toString(10)]=t+52;const e=t.toString(10),n=t+52;uh[e]=n,Y0[n]=e}uh["+"]=62;Y0[62]="+";uh["/"]=63;Y0[63]="/";const Sg=6,xv=8,uNe=63,u6=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const n=new ArrayBuffer(e),r=new DataView(n);for(let s=0;s<t.length;s+=4){let i=0,o=0;for(let c=s,u=s+3;c<=u;c++)if(t[c]!=="="){if(!(t[c]in uh))throw new TypeError(`Invalid character ${t[c]} in base64 string.`);i|=uh[t[c]]<<(u-c)*Sg,o+=Sg}else i>>=Sg;const a=s/4*3;i>>=o%xv;const l=Math.floor(o/xv);for(let c=0;c<l;c++){const u=(l-c-1)*xv;r.setUint8(a+c,(i&255<<u)>>u)}}return new Uint8Array(n)},c0=t=>new TextEncoder().encode(t),_v=t=>typeof t=="string"?c0(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),lne=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function cne(t){let e;typeof t=="string"?e=c0(t):e=t;const n=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let o=0,a=0;for(let c=i,u=Math.min(i+3,e.length);c<u;c++)o|=e[c]<<(u-c-1)*xv,a+=xv;const l=Math.ceil(a/Sg);o<<=l*Sg-a;for(let c=1;c<=l;c++){const u=(l-c)*Sg;s+=Y0[(o&uNe<<u)>>u]}s+="==".slice(0,4-l)}return s}function dNe(t,e="utf-8"){return e==="base64"?cne(t):lne(t)}function hNe(t,e){return e==="base64"?Jf.mutate(u6(t)):Jf.mutate(c0(t))}class Jf extends Uint8Array{static fromString(e,n="utf-8"){switch(typeof e){case"string":return hNe(e,n);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,Jf.prototype),e}transformToString(e="utf-8"){return dNe(this,e)}}const Xf=t=>encodeURIComponent(t).replace(/[!'()*]/g,fNe),fNe=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function pNe(t){const e=[];for(let n of Object.keys(t).sort()){const r=t[n];if(n=Xf(n),Array.isArray(r))for(let s=0,i=r.length;s<i;s++)e.push(`${n}=${Xf(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${Xf(r)}`),e.push(s)}}return e.join("&")}function o$(t,e){return new Request(t,e)}function mNe(t=0){return new Promise((e,n)=>{t&&setTimeout(()=>{const r=new Error(`Request did not complete within ${t} ms`);r.name="TimeoutError",n(r)},t)})}const k3={supported:void 0};class d6{static create(e){return typeof e?.handle=="function"?e:new d6(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(n=>n||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),k3.supported===void 0&&(k3.supported=typeof Request<"u"&&"keepalive"in o$("https://[::1]"))}destroy(){}async handle(e,{abortSignal:n}={}){this.config||(this.config=await this.configProvider);const r=this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(n?.aborted){const b=new Error("Request aborted");return b.name="AbortError",Promise.reject(b)}let o=e.path;const a=pNe(e.query||{});a&&(o+=`?${a}`),e.fragment&&(o+=`#${e.fragment}`);let l="";if(e.username!=null||e.password!=null){const b=e.username??"",v=e.password??"";l=`${b}:${v}@`}const{port:c,method:u}=e,d=`${e.protocol}//${l}${e.hostname}${c?`:${c}`:""}${o}`,h=u==="GET"||u==="HEAD"?void 0:e.body,f={body:h,headers:new Headers(e.headers),method:u,credentials:i};this.config?.cache&&(f.cache=this.config.cache),h&&(f.duplex="half"),typeof AbortController<"u"&&(f.signal=n),k3.supported&&(f.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(f,this.config.requestInit(e));let p=()=>{};const m=o$(d,f),g=[fetch(m).then(b=>{const v=b.headers,w={};for(const S of v.entries())w[S[0]]=S[1];return b.body!=null?{response:new ak({headers:w,reason:b.statusText,statusCode:b.status,body:b.body})}:b.blob().then(S=>({response:new ak({headers:w,reason:b.statusText,statusCode:b.status,body:S})}))}),mNe(r)];return n&&g.push(new Promise((b,v)=>{const w=()=>{const _=new Error("Request aborted");_.name="AbortError",v(_)};if(typeof n.addEventListener=="function"){const _=n;_.addEventListener("abort",w,{once:!0}),p=()=>_.removeEventListener("abort",w)}else n.onabort=w})),Promise.race(g).finally(p)}updateHttpClientConfig(e,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=n,r))}httpHandlerConfigs(){return this.config??{}}}const gNe=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):bNe(t):yNe(t);async function bNe(t){const e=await vNe(t),n=u6(e);return new Uint8Array(n)}async function yNe(t){const e=[],n=t.getReader();let r=!1,s=0;for(;!r;){const{done:a,value:l}=await n.read();l&&(e.push(l),s+=l.length),r=a}const i=new Uint8Array(s);let o=0;for(const a of e)i.set(a,o),o+=a.length;return i}function vNe(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));const s=r.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(t)})}const une={},U4={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),une[t]=e,U4[e]=t}function dne(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){const r=t.slice(n,n+2).toLowerCase();if(r in U4)e[n/2]=U4[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}function Do(t){let e="";for(let n=0;n<t.byteLength;n++)e+=une[t[n]];return e}const hne=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Jf.mutate(t);if(!t)return Jf.mutate(new Uint8Array);const n=e.streamCollector(t);return Jf.mutate(await n)};function a$(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const wNe=(t,e,n,r,s,i)=>{if(e!=null&&e[n]!==void 0){const o=r();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");t=t.replace(s,i?o.split("/").map(a=>a$(a)).join("/"):a$(o))}else throw new Error("No value provided for input HTTP label: "+n+".");return t};function h6(t,e){return new xNe(t,e)}class xNe{constructor(e,n){this.input=e,this.context=n,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:e,protocol:n="https",port:r,path:s}=await this.context.endpoint();this.path=s;for(const i of this.resolvePathStack)i(this.path);return new qo({protocol:n,hostname:this.hostname||e,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(n=>{this.path=`${n?.endsWith("/")?n.slice(0,-1):n||""}`+e}),this}p(e,n,r,s){return this.resolvePathStack.push(i=>{this.path=wNe(i,this.input,e,n,r,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}function _Ne(t,e,n){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=n}class SNe{constructor(e){this.authSchemes=new Map;for(const[n,r]of Object.entries(e))r!==void 0&&this.authSchemes.set(n,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}const ENe=t=>e=>fne(e)&&e.expiration.getTime()-Date.now()<t,kNe=3e5,CNe=ENe(kNe),fne=t=>t.expiration!==void 0,ANe=(t,e,n)=>{if(t===void 0)return;const r=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,o,a=!1;const l=async c=>{i||(i=r(c));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return e===void 0?async c=>((!o||c?.forceRefresh)&&(s=await l(c)),s):async c=>((!o||c?.forceRefresh)&&(s=await l(c)),a?s:n(s)?(e(s)&&await l(c),s):(a=!0,s))},TNe=void 0;function PNe(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function NNe(t){const e=Gy(t.userAgentAppId??TNe);return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent,userAgentAppId:async()=>{const n=await e();if(!PNe(n)){const r=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?r?.warn("userAgentAppId must be a string or undefined."):n.length>50&&r?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}}}class INe{constructor({size:e,params:n}){this.data=new Map,this.parameters=[],this.capacity=e??50,n&&(this.parameters=n)}get(e,n){const r=this.hash(e);if(r===!1)return n();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(r,n())}return this.data.get(r)}size(){return this.data.size}hash(e){let n="";const{parameters:r}=this;if(r.length===0)return!1;for(const s of r){const i=String(e[s]??"");if(i.includes("|;"))return!1;n+=i+"|;"}return n}}const RNe=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),pne=t=>RNe.test(t)||t.startsWith("[")&&t.endsWith("]"),ONe=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),f6=(t,e=!1)=>{if(!e)return ONe.test(t);const n=t.split(".");for(const r of n)if(!f6(r))return!1;return!0},lk={},T1="endpoints";function dh(t){return typeof t!="object"||t==null?t:"ref"in t?`$${dh(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(dh).join(", ")})`:JSON.stringify(t,null,2)}class Ko extends Error{constructor(e){super(e),this.name="EndpointError"}}const LNe=(t,e)=>t===e,DNe=t=>{const e=t.split("."),n=[];for(const r of e){const s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new Ko(`Path: '${t}' does not end with ']'`);const i=r.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new Ko(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&n.push(r.slice(0,s)),n.push(i)}else n.push(r)}return n},mne=(t,e)=>DNe(e).reduce((n,r)=>{if(typeof n!="object")throw new Ko(`Index '${r}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},t),MNe=t=>t!=null,jNe=t=>!t,C3={[A1.HTTP]:80,[A1.HTTPS]:443},FNe=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:h,port:f,protocol:p="",path:m="",query:g={}}=t,b=new URL(`${p}//${h}${f?`:${f}`:""}${m}`);return b.search=Object.entries(g).map(([v,w])=>`${v}=${w}`).join("&"),b}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const n=e.href,{host:r,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;const l=o.slice(0,-1);if(!Object.values(A1).includes(l))return null;const c=pne(s),u=n.includes(`${r}:${C3[l]}`)||typeof t=="string"&&t.includes(`${r}:${C3[l]}`),d=`${r}${u?`:${C3[l]}`:""}`;return{scheme:l,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}},BNe=(t,e)=>t===e,$Ne=(t,e,n,r)=>e>=n||t.length<n?null:r?t.substring(t.length-n,t.length-e):t.substring(e,n),UNe=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),HNe={booleanEquals:LNe,getAttr:mne,isSet:MNe,isValidHostLabel:f6,not:jNe,parseURL:FNe,stringEquals:BNe,substring:$Ne,uriEncode:UNe},gne=(t,e)=>{const n=[],r={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){n.push(t.slice(s));break}n.push(t.slice(s,i));const o=t.indexOf("}",i);if(o===-1){n.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(n.push(t.slice(i+1,o)),s=o+2);const a=t.substring(i+1,o);if(a.includes("#")){const[l,c]=a.split("#");n.push(mne(r[l],c))}else n.push(r[a]);s=o+1}return n.join("")},zNe=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],SA=(t,e,n)=>{if(typeof t=="string")return gne(t,n);if(t.fn)return bne(t,n);if(t.ref)return zNe(t,n);throw new Ko(`'${e}': ${String(t)} is not a string, function or reference.`)},bne=({fn:t,argv:e},n)=>{const r=e.map(i=>["boolean","number"].includes(typeof i)?i:SA(i,"arg",n)),s=t.split(".");return s[0]in lk&&s[1]!=null?lk[s[0]][s[1]](...r):HNe[t](...r)},VNe=({assign:t,...e},n)=>{if(t&&t in n.referenceRecord)throw new Ko(`'${t}' is already defined in Reference Record.`);const r=bne(e,n);return n.logger?.debug?.(`${T1} evaluateCondition: ${dh(e)} = ${dh(r)}`),{result:r===""?!0:!!r,...t!=null&&{toAssign:{name:t,value:r}}}},p6=(t=[],e)=>{const n={};for(const r of t){const{result:s,toAssign:i}=VNe(r,{...e,referenceRecord:{...e.referenceRecord,...n}});if(!s)return{result:s};i&&(n[i.name]=i.value,e.logger?.debug?.(`${T1} assign: ${i.name} := ${dh(i.value)}`))}return{result:!0,referenceRecord:n}},WNe=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:s.map(i=>{const o=SA(i,"Header value entry",e);if(typeof o!="string")throw new Ko(`Header '${r}' value '${o}' is not a string`);return o})}),{}),yne=(t,e)=>{if(Array.isArray(t))return t.map(n=>yne(n,e));switch(typeof t){case"string":return gne(t,e);case"object":if(t===null)throw new Ko(`Unexpected endpoint property: ${t}`);return vne(t,e);case"boolean":return t;default:throw new Ko(`Unexpected endpoint property type: ${typeof t}`)}},vne=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:yne(s,e)}),{}),GNe=(t,e)=>{const n=SA(t,"Endpoint URL",e);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new Ko(`Endpoint URL must be a string, got ${typeof n}`)},qNe=(t,e)=>{const{conditions:n,endpoint:r}=t,{result:s,referenceRecord:i}=p6(n,e);if(!s)return;const o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:l,headers:c}=r;return e.logger?.debug?.(`${T1} Resolving endpoint from template: ${dh(r)}`),{...c!=null&&{headers:WNe(c,o)},...l!=null&&{properties:vne(l,o)},url:GNe(a,o)}},KNe=(t,e)=>{const{conditions:n,error:r}=t,{result:s,referenceRecord:i}=p6(n,e);if(s)throw new Ko(SA(r,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},YNe=(t,e)=>{const{conditions:n,rules:r}=t,{result:s,referenceRecord:i}=p6(n,e);if(s)return wne(r,{...e,referenceRecord:{...e.referenceRecord,...i}})},wne=(t,e)=>{for(const n of t)if(n.type==="endpoint"){const r=qNe(n,e);if(r)return r}else if(n.type==="error")KNe(n,e);else if(n.type==="tree"){const r=YNe(n,e);if(r)return r}else throw new Ko(`Unknown endpoint rule: ${n}`);throw new Ko("Rules evaluation failed")},JNe=(t,e)=>{const{endpointParams:n,logger:r}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${T1} Initial EndpointParams: ${dh(n)}`);const o=Object.entries(s).filter(([,c])=>c.default!=null).map(([c,u])=>[c,u.default]);if(o.length>0)for(const[c,u]of o)n[c]=n[c]??u;const a=Object.entries(s).filter(([,c])=>c.required).map(([c])=>c);for(const c of a)if(n[c]==null)throw new Ko(`Missing required parameter: '${c}'`);const l=wne(i,{endpointParams:n,logger:r,referenceRecord:{}});return e.logger?.debug?.(`${T1} Resolved endpoint: ${dh(l)}`),l},xne=(t,e=!1)=>{if(e){for(const n of t.split("."))if(!xne(n))return!1;return!0}return!(!f6(t)||t.length<3||t.length>63||t!==t.toLowerCase()||pne(t))},l$=":",XNe="/",ZNe=t=>{const e=t.split(l$);if(e.length<6)return null;const[n,r,s,i,o,...a]=e;if(n!=="arn"||r===""||s===""||a.join(l$)==="")return null;const l=a.map(c=>c.split(XNe)).flat();return{partition:r,service:s,region:i,accountId:o,resourceId:l}},QNe=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}}],eIe={partitions:QNe};let tIe=eIe;const nIe=t=>{const{partitions:e}=tIe;for(const r of e){const{regions:s,outputs:i}=r;for(const[o,a]of Object.entries(s))if(o===t)return{...i,...a}}for(const r of e){const{regionRegex:s,outputs:i}=r;if(new RegExp(s).test(t))return{...i}}const n=e.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},_ne={isVirtualHostableS3Bucket:xne,parseArn:ZNe,partition:nIe};lk.aws=_ne;function rIe(t,e,n){return t.$source||(t.$source={}),t.$source[e]=n,t}function jl(t,e,n){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=n}const c$=t=>ak.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,Sne=t=>new Date(Date.now()+t),sIe=(t,e)=>Math.abs(Sne(e).getTime()-t)>=3e5,u$=(t,e)=>{const n=Date.parse(t);return sIe(n,e)?n-Date.now():e},Sv=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},iIe=async t=>{const e=Sv("context",t.context),n=Sv("config",t.config),r=e.endpointV2?.properties?.authSchemes?.[0],i=await Sv("signer",n.signer)(r),o=t?.signingRegion,a=t?.signingRegionSet,l=t?.signingName;return{config:n,signer:i,signingRegion:o,signingRegionSet:a,signingName:l}};class oIe{async sign(e,n,r){if(!qo.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await iIe(r),{config:i,signer:o}=s;let{signingRegion:a,signingName:l}=s;const c=r.context;if(c?.authSchemes?.length??!1){const[d,h]=c.authSchemes;d?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,l=h?.signingName??l)}return await o.sign(e,{signingDate:Sne(i.systemClockOffset),signingRegion:a,signingService:l})}errorHandler(e){return n=>{const r=n.ServerTime??c$(n.$response);if(r){const s=Sv("config",e.config),i=s.systemClockOffset;s.systemClockOffset=u$(r,s.systemClockOffset),s.systemClockOffset!==i&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(e,n){const r=c$(e);if(r){const s=Sv("config",n.config);s.systemClockOffset=u$(r,s.systemClockOffset)}}}const aIe=(t,e,n)=>{let r,s,i,o=!1;const a=async()=>{s||(s=t());try{r=await s,i=!0,o=!1}finally{s=void 0}return r};return async l=>((!i||l?.forceRefresh)&&(r=await a()),r)},lIe="X-Amz-Algorithm",cIe="X-Amz-Credential",Ene="X-Amz-Date",uIe="X-Amz-SignedHeaders",dIe="X-Amz-Expires",kne="X-Amz-Signature",Cne="X-Amz-Security-Token",Ane="authorization",Tne=Ene.toLowerCase(),hIe="date",fIe=[Ane,Tne,hIe],pIe=kne.toLowerCase(),H4="x-amz-content-sha256",mIe=Cne.toLowerCase(),gIe={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},bIe=/^proxy-/,yIe=/^sec-/,A3="AWS4-HMAC-SHA256",vIe="AWS4-HMAC-SHA256-PAYLOAD",wIe="UNSIGNED-PAYLOAD",xIe=50,Pne="aws4_request",_Ie=60*60*24*7,Q_={},T3=[],P3=(t,e,n)=>`${t}/${e}/${n}/${Pne}`,SIe=async(t,e,n,r,s)=>{const i=await d$(t,e.secretAccessKey,e.accessKeyId),o=`${n}:${r}:${s}:${Do(i)}:${e.sessionToken}`;if(o in Q_)return Q_[o];for(T3.push(o);T3.length>xIe;)delete Q_[T3.shift()];let a=`AWS4${e.secretAccessKey}`;for(const l of[n,r,s,Pne])a=await d$(t,a,l);return Q_[o]=a},d$=(t,e,n)=>{const r=new t(e);return r.update(_v(n)),r.digest()},h$=({headers:t},e,n)=>{const r={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in gIe||e?.has(i)||bIe.test(i)||yIe.test(i))&&(!n||n&&!n.has(i))||(r[i]=t[s].trim().replace(/\s+/g," "))}return r},EIe=({query:t={}})=>{const e=[],n={};for(const r of Object.keys(t)){if(r.toLowerCase()===pIe)continue;const s=Xf(r);e.push(s);const i=t[r];typeof i=="string"?n[s]=`${s}=${Xf(i)}`:Array.isArray(i)&&(n[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${Xf(a)}`]),[]).sort().join("&"))}return e.sort().map(r=>n[r]).filter(r=>r).join("&")},kIe=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",N3=async({headers:t,body:e},n)=>{for(const r of Object.keys(t))if(r.toLowerCase()===H4)return t[r];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||kIe(e)){const r=new n;return r.update(_v(e)),Do(await r.digest())}return wIe};class CIe{format(e){const n=[];for(const i of Object.keys(e)){const o=c0(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=c0(e.value),l=new DataView(new ArrayBuffer(3+a.byteLength));l.setUint8(0,7),l.setUint16(1,a.byteLength,!1);const c=new Uint8Array(l.buffer);return c.set(a,3),c;case"timestamp":const u=new Uint8Array(9);return u[0]=8,u.set(TIe.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!AIe.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(dne(e.value.replace(/\-/g,"")),1),d}}}var f$;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(f$||(f$={}));const AIe=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let TIe=class Nne{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&p$(n),new Nne(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&p$(e),parseInt(Do(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function p$(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const PIe=(t,e)=>{t=t.toLowerCase();for(const n of Object.keys(e))if(t===n.toLowerCase())return!0;return!1},NIe=(t,e={})=>{const{headers:n,query:r={}}=qo.clone(t);for(const s of Object.keys(n)){const i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(r[s]=n[s],delete n[s])}return{...t,headers:n,query:r}},m$=t=>{t=qo.clone(t);for(const e of Object.keys(t.headers))fIe.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},IIe=t=>RIe(t).toISOString().replace(/\.\d{3}Z$/,"Z"),RIe=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class g${constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:o=!0}){this.headerFormatter=new CIe,this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Xd(r),this.credentialProvider=Xd(n)}async presign(e,n={}){const{signingDate:r=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:l,signingRegion:c,signingService:u}=n,d=await this.credentialProvider();this.validateResolvedCredentials(d);const h=c??await this.regionProvider(),{longDate:f,shortDate:p}=e2(r);if(s>_Ie)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const m=P3(p,h,u??this.service),g=NIe(m$(e),{unhoistableHeaders:o,hoistableHeaders:l});d.sessionToken&&(g.query[Cne]=d.sessionToken),g.query[lIe]=A3,g.query[cIe]=`${d.accessKeyId}/${m}`,g.query[Ene]=f,g.query[dIe]=s.toString(10);const b=h$(g,i,a);return g.query[uIe]=b$(b),g.query[kne]=await this.getSignature(f,m,this.getSigningKey(d,h,p,u),this.createCanonicalRequest(g,b,await N3(e,this.sha256))),g}async sign(e,n){return typeof e=="string"?this.signString(e,n):e.headers&&e.payload?this.signEvent(e,n):e.message?this.signMessage(e,n):this.signRequest(e,n)}async signEvent({headers:e,payload:n},{signingDate:r=new Date,priorSignature:s,signingRegion:i,signingService:o}){const a=i??await this.regionProvider(),{shortDate:l,longDate:c}=e2(r),u=P3(l,a,o??this.service),d=await N3({headers:{},body:n},this.sha256),h=new this.sha256;h.update(e);const f=Do(await h.digest()),p=[vIe,c,u,s,f,d].join(`
`);return this.signString(p,{signingDate:r,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:n=new Date,signingRegion:r,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:n,signingRegion:r,signingService:s,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:n=new Date,signingRegion:r,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=r??await this.regionProvider(),{shortDate:a}=e2(n),l=new this.sha256(await this.getSigningKey(i,o,a,s));return l.update(_v(e)),Do(await l.digest())}async signRequest(e,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:s,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const l=i??await this.regionProvider(),c=m$(e),{longDate:u,shortDate:d}=e2(n),h=P3(d,l,o??this.service);c.headers[Tne]=u,a.sessionToken&&(c.headers[mIe]=a.sessionToken);const f=await N3(c,this.sha256);!PIe(H4,c.headers)&&this.applyChecksum&&(c.headers[H4]=f);const p=h$(c,s,r),m=await this.getSignature(u,h,this.getSigningKey(a,l,d,o),this.createCanonicalRequest(c,p,f));return c.headers[Ane]=`${A3} Credential=${a.accessKeyId}/${h}, SignedHeaders=${b$(p)}, Signature=${m}`,c}createCanonicalRequest(e,n,r){const s=Object.keys(n).sort();return`${e.method}
${this.getCanonicalPath(e)}
${EIe(e)}
${s.map(i=>`${i}:${n[i]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(e,n,r){const s=new this.sha256;s.update(_v(r));const i=await s.digest();return`${A3}
${e}
${n}
${Do(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const n=[];for(const i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?n.pop():n.push(i));const r=`${e?.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&e?.endsWith("/")?"/":""}`;return Xf(r).replace(/%2F/g,"/")}return e}async getSignature(e,n,r,s){const i=await this.createStringToSign(e,n,s),o=new this.sha256(await r);return o.update(_v(i)),Do(await o.digest())}getSigningKey(e,n,r,s){return SIe(this.sha256,e,r,n,s||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const e2=t=>{const e=IIe(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},b$=t=>Object.keys(t).sort().join(";"),OIe=t=>{let e=!1,n;t.credentials&&(e=!0,n=ANe(t.credentials,CNe,fne)),n||(t.credentialDefaultProvider?n=Gy(t.credentialDefaultProvider(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("`credentials` is missing")});const r=async()=>n({callerClientConfig:t}),{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let a;return t.signer?a=Gy(t.signer):t.regionInfoProvider?a=()=>Gy(t.region)().then(async l=>[await t.regionInfoProvider(l,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},l]).then(([l,c])=>{const{signingRegion:u,signingService:d}=l;t.signingRegion=t.signingRegion||u||c,t.signingName=t.signingName||d||t.serviceId;const h={...t,credentials:r,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},f=t.signerConstructor||g$;return new f(h)}):a=async l=>{l=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Gy(t.region)(),properties:{}},l);const c=l.signingRegion,u=l.signingName;t.signingRegion=t.signingRegion||c,t.signingName=t.signingName||u||t.serviceId;const d={...t,credentials:r,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},h=t.signerConstructor||g$;return new h(d)},{...t,systemClockOffset:i,signingEscapePath:s,credentials:e?async()=>r().then(l=>rIe(l,"CREDENTIALS_CODE","e")):r,signer:a}},Zh=(t,e)=>{const n=[];if(t&&n.push(t),e)for(const r of e)n.push(r);return n},md=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,ck=()=>{let t=[],e=[],n=!1;const r=new Set,s=d=>d.sort((h,f)=>y$[f.step]-y$[h.step]||v$[f.priority||"normal"]-v$[h.priority||"normal"]),i=d=>{let h=!1;const f=p=>{const m=Zh(p.name,p.aliases);if(m.includes(d)){h=!0;for(const g of m)r.delete(g);return!1}return!0};return t=t.filter(f),e=e.filter(f),h},o=d=>{let h=!1;const f=p=>{if(p.middleware===d){h=!0;for(const m of Zh(p.name,p.aliases))r.delete(m);return!1}return!0};return t=t.filter(f),e=e.filter(f),h},a=d=>(t.forEach(h=>{d.add(h.middleware,{...h})}),e.forEach(h=>{d.addRelativeTo(h.middleware,{...h})}),d.identifyOnResolve?.(u.identifyOnResolve()),d),l=d=>{const h=[];return d.before.forEach(f=>{f.before.length===0&&f.after.length===0?h.push(f):h.push(...l(f))}),h.push(d),d.after.reverse().forEach(f=>{f.before.length===0&&f.after.length===0?h.push(f):h.push(...l(f))}),h},c=(d=!1)=>{const h=[],f=[],p={};return t.forEach(g=>{const b={...g,before:[],after:[]};for(const v of Zh(b.name,b.aliases))p[v]=b;h.push(b)}),e.forEach(g=>{const b={...g,before:[],after:[]};for(const v of Zh(b.name,b.aliases))p[v]=b;f.push(b)}),f.forEach(g=>{if(g.toMiddleware){const b=p[g.toMiddleware];if(b===void 0){if(d)return;throw new Error(`${g.toMiddleware} is not found when adding ${md(g.name,g.aliases)} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&b.after.push(g),g.relation==="before"&&b.before.push(g)}}),s(h).map(l).reduce((g,b)=>(g.push(...b),g),[])},u={add:(d,h={})=>{const{name:f,override:p,aliases:m}=h,g={step:"initialize",priority:"normal",middleware:d,...h},b=Zh(f,m);if(b.length>0){if(b.some(v=>r.has(v))){if(!p)throw new Error(`Duplicate middleware name '${md(f,m)}'`);for(const v of b){const w=t.findIndex(S=>S.name===v||S.aliases?.some(E=>E===v));if(w===-1)continue;const _=t[w];if(_.step!==g.step||g.priority!==_.priority)throw new Error(`"${md(_.name,_.aliases)}" middleware with ${_.priority} priority in ${_.step} step cannot be overridden by "${md(f,m)}" middleware with ${g.priority} priority in ${g.step} step.`);t.splice(w,1)}}for(const v of b)r.add(v)}t.push(g)},addRelativeTo:(d,h)=>{const{name:f,override:p,aliases:m}=h,g={middleware:d,...h},b=Zh(f,m);if(b.length>0){if(b.some(v=>r.has(v))){if(!p)throw new Error(`Duplicate middleware name '${md(f,m)}'`);for(const v of b){const w=e.findIndex(S=>S.name===v||S.aliases?.some(E=>E===v));if(w===-1)continue;const _=e[w];if(_.toMiddleware!==g.toMiddleware||_.relation!==g.relation)throw new Error(`"${md(_.name,_.aliases)}" middleware ${_.relation} "${_.toMiddleware}" middleware cannot be overridden by "${md(f,m)}" middleware ${g.relation} "${g.toMiddleware}" middleware.`);e.splice(w,1)}}for(const v of b)r.add(v)}e.push(g)},clone:()=>a(ck()),use:d=>{d.applyToStack(u)},remove:d=>typeof d=="string"?i(d):o(d),removeByTag:d=>{let h=!1;const f=p=>{const{tags:m,name:g,aliases:b}=p;if(m&&m.includes(d)){const v=Zh(g,b);for(const w of v)r.delete(w);return h=!0,!1}return!0};return t=t.filter(f),e=e.filter(f),h},concat:d=>{const h=a(ck());return h.use(d),h.identifyOnResolve(n||h.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>c(!0).map(d=>{const h=d.step??d.relation+" "+d.toMiddleware;return md(d.name,d.aliases)+" - "+h}),identifyOnResolve(d){return typeof d=="boolean"&&(n=d),n},resolve:(d,h)=>{for(const f of c().map(p=>p.middleware).reverse())d=f(d,h);return n&&console.log(u.identify()),d}};return u},y$={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},v$={high:3,normal:2,low:1};class LIe{constructor(e){this.config=e,this.middlewareStack=ck()}send(e,n,r){const s=typeof n!="function"?n:void 0,i=typeof n=="function"?n:r,o=s===void 0&&this.config.cacheMiddleware===!0;let a;if(o){this.handlers||(this.handlers=new WeakMap);const l=this.handlers;l.has(e.constructor)?a=l.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),l.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(l=>i(null,l.output),l=>i(l)).catch(()=>{});else return a(e).then(l=>l.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}class EA{constructor(){this.middlewareStack=ck()}static classBuilder(){return new DIe}resolveMiddlewareWithContext(e,n,r,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:l,smithyContext:c,additionalContext:u,CommandCtor:d}){for(const g of s.bind(this)(d,e,n,r))this.middlewareStack.use(g);const h=e.concat(this.middlewareStack),{logger:f}=n,p={logger:f,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:l,[$4]:{commandInstance:this,...c},...u},{requestHandler:m}=n;return h.resolve(g=>m.handle(g.request,r||{}),p)}}class DIe{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,n,r={}){return this._smithyContext={service:e,operation:n,...r},this}c(e={}){return this._additionalContext=e,this}n(e,n){return this._clientName=e,this._commandName=n,this}f(e=r=>r,n=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=n,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){const e=this;let n;return n=class extends EA{static getEndpointParameterInstructions(){return e._ep}constructor(...[r]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=r??{},e._init(this)}resolveMiddleware(r,s,i){return this.resolveMiddlewareWithContext(r,s,i,{CommandCtor:n,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const hh="***SensitiveInformation***",MIe=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&One.warn(Rne(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},jIe=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},m6=t=>FIe(t,32),FIe=(t,e)=>{const n=jIe(t);if(n!==void 0&&BIe(n,e)!==n)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return n},BIe=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},$Ie=(t,e)=>{if(t==null)throw new TypeError(`Expected a non-null value for ${e}`);return t},Ine=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;const e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},yn=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return One.warn(Rne(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},UIe=t=>{if(t==null)return;const e=Ine(t),n=Object.entries(e).filter(([,r])=>r!=null).map(([r])=>r);if(n.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(n.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return e},w$=t=>typeof t=="string"?HIe(t):MIe(t),HIe=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},Rne=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),One={warn:console.warn};class lg extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const n=e;return lg.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const n=e;return this===lg?lg.isInstance(e):lg.isInstance(e)?n.name&&this.name?this.prototype.isPrototypeOf(e)||n.name===this.name:this.prototype.isPrototypeOf(e):!1}}const Yo=(t,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(t[r]==null||t[r]==="")&&(t[r]=s)});const n=t.message||t.Message||"UnknownError";return t.message=n,delete t.Message,t},zIe=({output:t,parsedBody:e,exceptionCtor:n,errorCode:r})=>{const s=WIe(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new n({name:e?.code||e?.Code||r||i||"UnknownError",$fault:"client",$metadata:s});throw Yo(o,e)},VIe=t=>({output:e,parsedBody:n,errorCode:r})=>{zIe({output:e,parsedBody:n,exceptionCtor:t,errorCode:r})},WIe=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),GIe=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},qIe=t=>{const e=[];for(const n in ok){const r=ok[n];t[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>t[r]})}return{_checksumAlgorithms:e,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},KIe=t=>{const e={};return t.checksumAlgorithms().forEach(n=>{e[n.algorithmId()]=n.checksumConstructor()}),e},YIe=t=>{let e=t.retryStrategy;return{setRetryStrategy(n){e=n},retryStrategy(){return e}}},JIe=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},XIe=t=>({...qIe(t),...YIe(t)}),ZIe=t=>({...KIe(t),...JIe(t)}),QIe=t=>t!=null;class Lne{trace(){}debug(){}info(){}warn(){}error(){}}function Xs(t,e,n){let r,s,i;if(typeof e>"u"&&typeof n>"u")r={},i=t;else{if(r=t,typeof e=="function")return s=e,i=n,e4e(r,s,i);i=e}for(const o of Object.keys(i)){if(!Array.isArray(i[o])){r[o]=i[o];continue}Dne(r,null,i,o)}return r}const hn=(t,e)=>{const n={};for(const r in e)Dne(n,t,e,r);return n},e4e=(t,e,n)=>Xs(t,Object.entries(n).reduce((r,[s,i])=>(Array.isArray(i)?r[s]=i:typeof i=="function"?r[s]=[e,i()]:r[s]=[e,i],r),{})),Dne=(t,e,n,r)=>{if(e!==null){let o=n[r];typeof o=="function"&&(o=[,o]);const[a=t4e,l=n4e,c=r]=o;(typeof a=="function"&&a(e[c])||typeof a!="function"&&a)&&(t[r]=l(e[c]));return}let[s,i]=n[r];if(typeof i=="function"){let o;const a=s===void 0&&(o=i())!=null,l=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[r]=o:l&&(t[r]=i())}else{const o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(t[r]=i)}},t4e=t=>t!=null,n4e=t=>t,x$=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},bn=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(bn);if(typeof t=="object"){const e={};for(const n of Object.keys(t))t[n]!=null&&(e[n]=bn(t[n]));return e}return t},pl=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,UIe(t)},r4e=(t,e)=>hne(t,e).then(n=>e.utf8Encoder(n)),Jo=(t,e)=>r4e(t,e).then(n=>{if(n.length)try{return JSON.parse(n)}catch(r){throw r?.name==="SyntaxError"&&Object.defineProperty(r,"$responseBodyText",{value:n}),r}return{}}),s4e=async(t,e)=>{const n=await Jo(t,e);return n.message=n.message??n.Message,n},i4e=(t,e)=>{const n=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),r=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=n(t.headers,"x-amzn-errortype");if(s!==void 0)return r(t.headers[s]);if(e.code!==void 0)return r(e.code);if(e.__type!==void 0)return r(e.__type)},o4e=/\d{12}\.ddb/;async function a4e(t,e,n){if(n.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&jl(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?jl(t,"RETRY_MODE_ADAPTIVE","F"):jl(t,"RETRY_MODE_STANDARD","E"):jl(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const i=t.endpointV2;switch(String(i?.url?.hostname).match(o4e)&&jl(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":jl(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":jl(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":jl(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const i=s;i.accountId&&jl(t,"RESOLVED_ACCOUNT_ID","T");for(const[o,a]of Object.entries(i.$source??{}))jl(t,o,a)}}const _$="user-agent",I3="x-amz-user-agent",S$=" ",R3="/",l4e=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,c4e=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,E$="-",u4e=1024;function d4e(t){let e="";for(const n in t){const r=t[n];if(e.length+r.length+1<=u4e){e.length?e+=","+r:e+=r;continue}break}return e}const h4e=t=>(e,n)=>async r=>{const{request:s}=r;if(!qo.isInstance(s))return e(r);const{headers:i}=s,o=n?.userAgent?.map(t2)||[],a=(await t.defaultUserAgentProvider()).map(t2);await a4e(n,t,r);const l=n;a.push(`m/${d4e(Object.assign({},n.__smithy_context?.features,l.__aws_sdk_context?.features))}`);const c=t?.customUserAgent?.map(t2)||[],u=await t.userAgentAppId();u&&a.push(t2([`app/${u}`]));const d=[].concat([...a,...o,...c]).join(S$),h=[...a.filter(f=>f.startsWith("aws-sdk-")),...c].join(S$);return t.runtime!=="browser"?(h&&(i[I3]=i[I3]?`${i[_$]} ${h}`:h),i[_$]=d):i[I3]=d,e({...r,request:s})},t2=t=>{const e=t[0].split(R3).map(o=>o.replace(l4e,E$)).join(R3),n=t[1]?.replace(c4e,E$),r=e.indexOf(R3),s=e.substring(0,r);let i=e.substring(r+1);return s==="api"&&(i=i.toLowerCase()),[s,i,n].filter(o=>o&&o.length>0).reduce((o,a,l)=>{switch(l){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},f4e={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},p4e=t=>({applyToStack:e=>{e.add(h4e(t),f4e)}});var k$;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(k$||(k$={}));const m4e=!1,g4e=!1,Mne=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),C$=t=>Mne(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,b4e=t=>{const{region:e,useFipsEndpoint:n}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return C$(e);const r=await e();return C$(r)},useFipsEndpoint:async()=>{const r=typeof e=="string"?e:await e();return Mne(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}}},y4e=t=>({...t,eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),A$="content-length";function v4e(t){return e=>async n=>{const r=n.request;if(qo.isInstance(r)){const{body:s,headers:i}=r;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(A$)===-1)try{const o=t(s);r.headers={...r.headers,[A$]:String(o)}}catch{}}return e({...n,request:r})}}const w4e={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},x4e=t=>({applyToStack:e=>{e.add(v4e(t.bodyLengthChecker),w4e)}}),_4e=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),A4e(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!C4e(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},S4e=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,E4e=/(\d+\.){3}\d+/,k4e=/\.\./,C4e=t=>S4e.test(t)&&!E4e.test(t)&&!k4e.test(t),A4e=t=>{const[e,n,r,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&n&&r&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},T4e=(t,e,n)=>{const r=async()=>{const s=n[t]??n[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:a,path:l}=s;return`${i}//${o}${a?":"+a:""}${l}`}}return s}:r},jne=async t=>{};function P4e(t){const e={};if(t=t.replace(/^\?/,""),t)for(const n of t.split("&")){let[r,s=null]=n.split("=");r=decodeURIComponent(r),s&&(s=decodeURIComponent(s)),r in e?Array.isArray(e[r])?e[r].push(s):e[r]=[e[r],s]:e[r]=s}return e}const uk=t=>{if(typeof t=="string")return uk(new URL(t));const{hostname:e,pathname:n,port:r,protocol:s,search:i}=t;let o;return i&&(o=P4e(i)),{hostname:e,port:r?parseInt(r):void 0,protocol:s,path:n,query:o}},Fne=t=>typeof t=="object"?"url"in t?uk(t.url):t:uk(t),N4e=async(t,e,n,r)=>{if(!n.endpoint){let o;n.serviceConfiguredEndpoint?o=await n.serviceConfiguredEndpoint():o=await jne(n.serviceId),o&&(n.endpoint=()=>Promise.resolve(Fne(o)))}const s=await I4e(t,e,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},I4e=async(t,e,n)=>{const r={},s=e?.getEndpointParameterInstructions?.()||{};for(const[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":r[i]=o.value;break;case"contextParams":r[i]=t[o.name];break;case"clientContextParams":case"builtInParams":r[i]=await T4e(o.name,i,n)();break;case"operationContextParams":r[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await _4e(r),r},R4e=({config:t,instructions:e})=>(n,r)=>async s=>{t.endpoint&&_Ne(r,"ENDPOINT_OVERRIDE","N");const i=await N4e(s.input,{getEndpointParameterInstructions(){return e}},{...t},r);r.endpointV2=i,r.authSchemes=i.properties?.authSchemes;const o=r.authSchemes?.[0];if(o){r.signing_region=o.signingRegion,r.signing_service=o.signingName;const l=_A(r)?.selectedHttpAuthScheme?.httpAuthOption;l&&(l.signingProperties=Object.assign(l.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return n({...s})},O4e={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:l6.name},g6=(t,e)=>({applyToStack:n=>{n.addRelativeTo(R4e({config:t,instructions:e}),O4e)}}),L4e=t=>{const e=t.tls??!0,{endpoint:n}=t,r=n!=null?async()=>Fne(await Xd(n)()):void 0,i={...t,endpoint:r,tls:e,isCustomEndpoint:!!n,useDualstackEndpoint:Xd(t.useDualstackEndpoint??!1),useFipsEndpoint:Xd(t.useFipsEndpoint??!1)};let o;return i.serviceConfiguredEndpoint=async()=>(t.serviceId&&!o&&(o=jne(t.serviceId)),o),i};var u0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(u0||(u0={}));const dk=3,D4e=u0.STANDARD,M4e=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],j4e=["TimeoutError","RequestTimeout","RequestTimeoutException"],F4e=[500,502,503,504],B4e=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],$4e=t=>t.$metadata?.clockSkewCorrected,Bne=t=>t.$metadata?.httpStatusCode===429||M4e.includes(t.name)||t.$retryable?.throttling==!0,b6=(t,e=0)=>$4e(t)||j4e.includes(t.name)||B4e.includes(t?.code||"")||F4e.includes(t.$metadata?.httpStatusCode||0)||t.cause!==void 0&&e<=10&&b6(t.cause,e+1),U4e=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!b6(t)}return!1};class kA{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const n=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>kA.setTimeoutFn(r,n))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const n=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),Bne(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),n=Math.floor(e*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(e){return parseFloat(e.toFixed(8))}}kA.setTimeoutFn=setTimeout;const z4=100,$ne=20*1e3,H4e=500,T$=500,z4e=5,V4e=10,W4e=1,G4e="amz-sdk-invocation-id",q4e="amz-sdk-request",K4e=()=>{let t=z4;return{computeNextBackoffDelay:r=>Math.floor(Math.min($ne,Math.random()*2**r*t)),setDelayBase:r=>{t=r}}},P$=({retryDelay:t,retryCount:e,retryCost:n})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min($ne,t),getRetryCost:()=>n});class Une{constructor(e){this.maxAttempts=e,this.mode=u0.STANDARD,this.capacity=T$,this.retryBackoffStrategy=K4e(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return P$({retryDelay:z4,retryCount:0})}async refreshRetryTokenForRetry(e,n){const r=await this.getMaxAttempts();if(this.shouldRetry(e,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?H4e:z4);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,P$({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(T$,this.capacity+(e.getRetryCost()??W4e))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${dk}`),dk}}shouldRetry(e,n,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(e){return e==="TRANSIENT"?V4e:z4e}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Y4e{constructor(e,n){this.maxAttemptsProvider=e,this.mode=u0.ADAPTIVE;const{rateLimiter:r}=n??{};this.rateLimiter=r??new kA,this.standardRetryStrategy=new Une(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(e,n)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}let n2;const J4e=new Uint8Array(16);function X4e(){if(!n2&&(n2=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n2(J4e)}const Bs=[];for(let t=0;t<256;++t)Bs.push((t+256).toString(16).slice(1));function Z4e(t,e=0){return Bs[t[e+0]]+Bs[t[e+1]]+Bs[t[e+2]]+Bs[t[e+3]]+"-"+Bs[t[e+4]]+Bs[t[e+5]]+"-"+Bs[t[e+6]]+Bs[t[e+7]]+"-"+Bs[t[e+8]]+Bs[t[e+9]]+"-"+Bs[t[e+10]]+Bs[t[e+11]]+Bs[t[e+12]]+Bs[t[e+13]]+Bs[t[e+14]]+Bs[t[e+15]]}const Q4e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),N$={randomUUID:Q4e};function eRe(t,e,n){if(N$.randomUUID&&!t)return N$.randomUUID();t=t||{};const r=t.random||(t.rng||X4e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Z4e(r)}const tRe=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),nRe=t=>{const{retryStrategy:e}=t,n=Xd(t.maxAttempts??dk);return{...t,maxAttempts:n,retryStrategy:async()=>e||(await Xd(t.retryMode)()===u0.ADAPTIVE?new Y4e(n):new Une(n))}},rRe=t=>t?.body instanceof ReadableStream,sRe=t=>(e,n)=>async r=>{let s=await t.retryStrategy();const i=await t.maxAttempts();if(iRe(s)){s=s;let o=await s.acquireInitialRetryToken(n.partition_id),a=new Error,l=0,c=0;const{request:u}=r,d=qo.isInstance(u);for(d&&(u.headers[G4e]=eRe());;)try{d&&(u.headers[q4e]=`attempt=${l+1}; max=${i}`);const{response:h,output:f}=await e(r);return s.recordSuccess(o),f.$metadata.attempts=l+1,f.$metadata.totalRetryDelay=c,{response:h,output:f}}catch(h){const f=oRe(h);if(a=tRe(h),d&&rRe(u))throw(n.logger instanceof Lne?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,f)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=l+1,a.$metadata.totalRetryDelay=c,a}l=o.getRetryCount();const p=o.getRetryDelay();c+=p,await new Promise(m=>setTimeout(m,p))}}else return s=s,s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,r)},iRe=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",oRe=t=>{const e={error:t,errorType:aRe(t)},n=uRe(t.$response);return n&&(e.retryAfterHint=n),e},aRe=t=>Bne(t)?"THROTTLING":b6(t)?"TRANSIENT":U4e(t)?"SERVER_ERROR":"CLIENT_ERROR",lRe={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},cRe=t=>({applyToStack:e=>{e.add(sRe(t),lRe)}}),uRe=t=>{if(!ak.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const n=t.headers[e],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)},dRe=async(t,e,n)=>({operation:_A(e).operation,region:await Xd(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function hRe(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}const fRe=t=>{const e=[];switch(t.operation){default:e.push(hRe(t))}return e},pRe=t=>({...OIe(t)}),mRe=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),y6={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},gRe="3.758.0",bRe={version:gRe},yRe=t=>new TextEncoder().encode(t);var vRe=typeof _t<"u"&&_t.from?function(t){return _t.from(t,"utf8")}:yRe;function P1(t){return t instanceof Uint8Array?t:typeof t=="string"?vRe(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function V4(t){return typeof t=="string"?t.length===0:t.byteLength===0}function wRe(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),n=0;n<t.length;)e[n]=t[n],n+=1;return e}return Uint32Array.from(t)}var Hne={name:"SHA-256"},I$={name:"HMAC",hash:Hne},xRe=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const _Re={};function LS(){return typeof window<"u"?window:typeof self<"u"?self:_Re}var SRe=function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!V4(e)){var n=P1(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return LS().crypto.subtle.sign(I$,n,e.toHash).then(function(r){return new Uint8Array(r)})}):V4(this.toHash)?Promise.resolve(xRe):Promise.resolve().then(function(){return LS().crypto.subtle.digest(Hne,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,r){LS().crypto.subtle.importKey("raw",P1(e.secret),I$,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))},t}(),da=64,ERe=32,kRe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),CRe=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ARe=Math.pow(2,53)-1,DS=function(){function t(){this.state=Int32Array.from(CRe),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>ARe)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[n++],r--,this.bufferLength===da&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%da>=da-8){for(var s=this.bufferLength;s<da;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<da-8;s++)n.setUint8(s,0);n.setUint32(da-8,Math.floor(e/4294967296),!0),n.setUint32(da-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(ERe),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,n=e.buffer,r=e.state,s=r[0],i=r[1],o=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=0;h<da;h++){if(h<16)this.temp[h]=(n[h*4]&255)<<24|(n[h*4+1]&255)<<16|(n[h*4+2]&255)<<8|n[h*4+3]&255;else{var f=this.temp[h-2],p=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10;f=this.temp[h-15];var m=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[h]=(p+this.temp[h-7]|0)+(m+this.temp[h-16]|0)}var g=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&c^~l&u)|0)+(d+(kRe[h]+this.temp[h]|0)|0)|0,b=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&o^i&o)|0;d=u,u=c,c=l,l=a+g|0,a=o,o=i,i=s,s=g+b|0}r[0]+=s,r[1]+=i,r[2]+=o,r[3]+=a,r[4]+=l,r[5]+=c,r[6]+=u,r[7]+=d},t}(),TRe=function(){function t(e){this.secret=e,this.hash=new DS,this.reset()}return t.prototype.update=function(e){if(!(V4(e)||this.error))try{this.hash.update(P1(e))}catch(n){this.error=n}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return f2e(this,void 0,void 0,function(){return p2e(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new DS,this.secret){this.outer=new DS;var e=PRe(this.secret),n=new Uint8Array(da);n.set(e);for(var r=0;r<da;r++)e[r]^=54,n[r]^=92;this.hash.update(e),this.outer.update(n);for(var r=0;r<e.byteLength;r++)e[r]=0}},t}();function PRe(t){var e=P1(t);if(e.byteLength>da){var n=new DS;n.update(e),e=n.digest()}var r=new Uint8Array(da);return r.set(e),r}var NRe=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function IRe(t){if(RRe(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return ORe(e)}return!1}function RRe(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function ORe(t){return t&&NRe.every(function(e){return typeof t[e]=="function"})}var LRe=function(){function t(e){IRe(LS())?this.hash=new SRe(e):this.hash=new TRe(e)}return t.prototype.update=function(e,n){this.hash.update(P1(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();const DRe={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},zne={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},$r={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Ti={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ed={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class at{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const s=at.getVersionPrecision(e),i=at.getVersionPrecision(n);let o=Math.max(s,i),a=0;const l=at.map([e,n],c=>{const u=o-at.getVersionPrecision(c),d=c+new Array(u+1).join(".0");return at.map(d.split("."),h=>new Array(20-h.length).join("0")+h).reverse()});for(r&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===a)return 0;o-=1}else if(l[0][o]<l[1][o])return-1}}static map(e,n){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(s=0;s<e.length;s+=1)r.push(n(e[s]));return r}static find(e,n){let r,s;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,s=e.length;r<s;r+=1){const i=e[r];if(n(i,r))return i}}static assign(e,...n){const r=e;let s,i;if(Object.assign)return Object.assign(e,...n);for(s=0,i=n.length;s<i;s+=1){const o=n[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(l=>{r[l]=o[l]})}return e}static getBrowserAlias(e){return DRe[e]}static getBrowserTypeByAlias(e){return zne[e]||""}}const nr=/version\/(\d+(\.?_?\d+)+)/i,MRe=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=at.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=at.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=at.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=at.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=at.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=at.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=at.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=at.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=at.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=at.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=at.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=at.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=at.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=at.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=at.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=at.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=at.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=at.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=at.getFirstMatch(nr,t)||at.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=at.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=at.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=at.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=at.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=at.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=at.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=at.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=at.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=at.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=at.getFirstMatch(nr,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,s=t.search("\\(")!==-1?n:e;return{name:at.getFirstMatch(s,t),version:at.getSecondMatch(s,t)}}}],jRe=[{test:[/Roku\/DVP/],describe(t){const e=at.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Ti.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=at.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Ti.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=at.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=at.getWindowsVersionName(e);return{name:Ti.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:Ti.iOS},n=at.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=at.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=at.getMacOSVersionName(e),r={name:Ti.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=at.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Ti.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=at.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=at.getAndroidVersionName(e),r={name:Ti.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=at.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:Ti.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=at.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||at.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||at.getFirstMatch(/\bbb(\d+)/i,t);return{name:Ti.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=at.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Ti.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=at.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Ti.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:Ti.Linux}}},{test:[/CrOS/],describe(){return{name:Ti.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=at.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Ti.PlayStation4,version:e}}}],FRe=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=at.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:$r.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:$r.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:$r.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:$r.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:$r.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:$r.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:$r.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=at.getFirstMatch(/(ipod|iphone)/i,t);return{type:$r.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:$r.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:$r.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:$r.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:$r.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:$r.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:$r.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:$r.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:$r.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:$r.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:$r.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:$r.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:$r.tv}}}],BRe=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:Ed.Blink};const n=at.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Ed.EdgeHTML,version:n}}},{test:[/trident/i],describe(t){const e={name:Ed.Trident},n=at.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:Ed.Presto},n=at.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Ed.Gecko},n=at.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Ed.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:Ed.WebKit},n=at.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];let R$=class{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=at.find(MRe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=at.find(jRe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=at.find(FRe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=at.find(BRe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return at.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const s={};let i=0;if(Object.keys(e).forEach(a=>{const l=e[a];typeof l=="string"?(s[a]=l,i+=1):typeof l=="object"&&(n[a]=l,r+=1)}),r>0){const a=Object.keys(n),l=at.find(a,u=>this.isOS(u));if(l){const u=this.satisfies(n[l]);if(u!==void 0)return u}const c=at.find(a,u=>this.isPlatform(u));if(c){const u=this.satisfies(n[c]);if(u!==void 0)return u}}if(i>0){const a=Object.keys(s),l=at.find(a,c=>this.isBrowser(c,!0));if(l!==void 0)return this.compareVersion(s[l])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const i=at.getBrowserTypeByAlias(s);return n&&i&&(s=i.toLowerCase()),s===r}compareVersion(e){let n=[0],r=e,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(s=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(s=!0,r=e.substr(1)),n.indexOf(at.compareVersions(i,r,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}};/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Vne{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new R$(e,n)}static parse(e){return new R$(e).getResult()}static get BROWSER_MAP(){return zne}static get ENGINE_MAP(){return Ed}static get OS_MAP(){return Ti}static get PLATFORMS_MAP(){return $r}}const $Re=({serviceId:t,clientVersion:e})=>async n=>{const r=typeof window<"u"&&window?.navigator?.userAgent?Vne.parse(window.navigator.userAgent):void 0,s=[["aws-sdk-js",e],["ua","2.1"],[`os/${r?.os?.name||"other"}`,r?.os?.version],["lang/js"],["md/browser",`${r?.browser?.name??"unknown"}_${r?.browser?.version??"unknown"}`]];t&&s.push([`api/${t}`,e]);const i=await n?.userAgentAppId?.();return i&&s.push([`app/${i}`]),s};var Wne=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var n,r;try{for(var s=m2e(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^HRe[(this.checksum^o)&255]}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}(),URe=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],HRe=wRe(URe);class Ev{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&O$(n),new Ev(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&O$(e),parseInt(Do(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function O$(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class zRe{constructor(e,n){this.toUtf8=e,this.fromUtf8=n}format(e){const n=[];for(const i of Object.keys(e)){const o=this.fromUtf8(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=this.fromUtf8(e.value),l=new DataView(new ArrayBuffer(3+a.byteLength));l.setUint8(0,7),l.setUint16(1,a.byteLength,!1);const c=new Uint8Array(l.buffer);return c.set(a,3),c;case"timestamp":const u=new Uint8Array(9);return u[0]=8,u.set(Ev.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!ZRe.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(dne(e.value.replace(/\-/g,"")),1),d}}parse(e){const n={};let r=0;for(;r<e.byteLength;){const s=e.getUint8(r++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,s));switch(r+=s,e.getUint8(r++)){case 0:n[i]={type:D$,value:!0};break;case 1:n[i]={type:D$,value:!1};break;case 2:n[i]={type:VRe,value:e.getInt8(r++)};break;case 3:n[i]={type:WRe,value:e.getInt16(r,!1)},r+=2;break;case 4:n[i]={type:GRe,value:e.getInt32(r,!1)},r+=4;break;case 5:n[i]={type:qRe,value:new Ev(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:const o=e.getUint16(r,!1);r+=2,n[i]={type:KRe,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:const a=e.getUint16(r,!1);r+=2,n[i]={type:YRe,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,a))},r+=a;break;case 8:n[i]={type:JRe,value:new Date(new Ev(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:const l=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,n[i]={type:XRe,value:`${Do(l.subarray(0,4))}-${Do(l.subarray(4,6))}-${Do(l.subarray(6,8))}-${Do(l.subarray(8,10))}-${Do(l.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return n}}var L$;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(L$||(L$={}));const D$="boolean",VRe="byte",WRe="short",GRe="integer",qRe="long",KRe="binary",YRe="string",JRe="timestamp",XRe="uuid",ZRe=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Gne=4,kd=Gne*2,df=4,QRe=kd+df*2;function eOe({byteLength:t,byteOffset:e,buffer:n}){if(t<QRe)throw new Error("Provided message too short to accommodate event stream message overhead");const r=new DataView(n,e,t),s=r.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");const i=r.getUint32(Gne,!1),o=r.getUint32(kd,!1),a=r.getUint32(t-df,!1),l=new Wne().update(new Uint8Array(n,e,kd));if(o!==l.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${l.digest()})`);if(l.update(new Uint8Array(n,e+kd,t-(kd+df))),a!==l.digest())throw new Error(`The message checksum (${l.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(n,e+kd+df,i),body:new Uint8Array(n,e+kd+df+i,s-i-(kd+df+df))}}class tOe{constructor(e,n){this.headerMarshaller=new zRe(e,n),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),n=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return n}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const n=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return n}}}encode({headers:e,body:n}){const r=this.headerMarshaller.format(e),s=r.byteLength+n.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new Wne;return o.setUint32(0,s,!1),o.setUint32(4,r.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(n,r.byteLength+12),o.setUint32(s-4,a.update(i.subarray(8,s-4)).digest(),!1),i}decode(e){const{headers:n,body:r}=eOe(e);return{headers:this.headerMarshaller.parse(n),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}}class nOe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class rOe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class sOe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const n=await this.options.deserializer(e);n!==void 0&&(yield n)}}}class iOe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}function oOe(t){let e=0,n=0,r=null,s=null;const i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,n=4,r=new Uint8Array(a),new DataView(r.buffer).setUint32(0,a,!1)},o=async function*(){const a=t[Symbol.asyncIterator]();for(;;){const{value:l,done:c}=await a.next();if(c){if(e)if(e===n)yield r;else throw new Error("Truncated event message received.");else return;return}const u=l.length;let d=0;for(;d<u;){if(!r){const f=u-d;s||(s=new Uint8Array(4));const p=Math.min(4-n,f);if(s.set(l.slice(d,d+p),n),n+=p,d+=p,n<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const h=Math.min(e-n,u-d);r.set(l.slice(d,d+h),n),n+=h,d+=h,e&&e===n&&(yield r,r=null,e=0,n=0)}}};return{[Symbol.asyncIterator]:o}}function aOe(t,e){return async function(n){const{value:r}=n.headers[":message-type"];if(r==="error"){const s=new Error(n.headers[":error-message"].value||"UnknownError");throw s.name=n.headers[":error-code"].value,s}else if(r==="exception"){const s=n.headers[":exception-type"].value,i={[s]:n},o=await t(i);if(o.$unknown){const a=new Error(e(n.body));throw a.name=s,a}throw o[s]}else if(r==="event"){const s={[n.headers[":event-type"].value]:n},i=await t(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${n.headers[":event-type"].value}`)}}let lOe=class{constructor({utf8Encoder:e,utf8Decoder:n}){this.eventStreamCodec=new tOe(e,n),this.utfEncoder=e}deserialize(e,n){const r=oOe(e);return new sOe({messageStream:new nOe({inputStream:r,decoder:this.eventStreamCodec}),deserializer:aOe(n,this.utfEncoder)})}serialize(e,n){return new rOe({messageStream:new iOe({inputStream:e,serializer:n}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const cOe=t=>({[Symbol.asyncIterator]:async function*(){const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)return;yield r}}finally{e.releaseLock()}}}),uOe=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(n){const{done:r,value:s}=await e.next();if(r)return n.close();n.enqueue(s)}})};class dOe{constructor({utf8Encoder:e,utf8Decoder:n}){this.universalMarshaller=new lOe({utf8Decoder:n,utf8Encoder:e})}deserialize(e,n){const r=hOe(e)?cOe(e):e;return this.universalMarshaller.deserialize(r,n)}serialize(e,n){const r=this.universalMarshaller.serialize(e,n);return typeof ReadableStream=="function"?uOe(r):r}}const hOe=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,fOe=t=>new dOe(t),pOe=t=>()=>Promise.reject(t),M$=typeof TextEncoder=="function"?new TextEncoder:null,mOe=t=>{if(typeof t=="string"){if(M$)return M$.encode(t).byteLength;let e=t.length;for(let n=e-1;n>=0;n--){const r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},qne="required",lc="fn",cc="argv",J0="ref",j$=!0,F$="isSet",N1="booleanEquals",Lm="error",cy="endpoint",ki="tree",v6="PartitionResult",B$={[qne]:!1,type:"String"},$$={[qne]:!0,default:!1,type:"Boolean"},U$={[J0]:"Endpoint"},Kne={[lc]:N1,[cc]:[{[J0]:"UseFIPS"},!0]},Yne={[lc]:N1,[cc]:[{[J0]:"UseDualStack"},!0]},Fl={},H$={[lc]:"getAttr",[cc]:[{[J0]:v6},"supportsFIPS"]},z$={[lc]:N1,[cc]:[!0,{[lc]:"getAttr",[cc]:[{[J0]:v6},"supportsDualStack"]}]},V$=[Kne],W$=[Yne],G$=[{[J0]:"Region"}],gOe={parameters:{Region:B$,UseDualStack:$$,UseFIPS:$$,Endpoint:B$},rules:[{conditions:[{[lc]:F$,[cc]:[U$]}],rules:[{conditions:V$,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Lm},{rules:[{conditions:W$,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Lm},{endpoint:{url:U$,properties:Fl,headers:Fl},type:cy}],type:ki}],type:ki},{rules:[{conditions:[{[lc]:F$,[cc]:G$}],rules:[{conditions:[{[lc]:"aws.partition",[cc]:G$,assign:v6}],rules:[{conditions:[Kne,Yne],rules:[{conditions:[{[lc]:N1,[cc]:[j$,H$]},z$],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Fl,headers:Fl},type:cy}],type:ki}],type:ki},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Lm}],type:ki},{conditions:V$,rules:[{conditions:[{[lc]:N1,[cc]:[H$,j$]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Fl,headers:Fl},type:cy}],type:ki}],type:ki},{error:"FIPS is enabled but this partition does not support FIPS",type:Lm}],type:ki},{conditions:W$,rules:[{conditions:[z$],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Fl,headers:Fl},type:cy}],type:ki}],type:ki},{error:"DualStack is enabled but this partition does not support DualStack",type:Lm}],type:ki},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:Fl,headers:Fl},type:cy}],type:ki}],type:ki}],type:ki},{error:"Invalid Configuration: Missing Region",type:Lm}],type:ki}]},bOe=gOe,yOe=new INe({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),vOe=(t,e={})=>yOe.get(t,()=>JNe(bOe,{endpointParams:t,logger:e.logger}));lk.aws=_ne;const wOe=t=>({apiVersion:"2023-09-30",base64Decoder:t?.base64Decoder??u6,base64Encoder:t?.base64Encoder??cne,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??vOe,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??fRe,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new oIe}],logger:t?.logger??new Lne,serviceId:t?.serviceId??"Bedrock Runtime",urlParser:t?.urlParser??uk,utf8Decoder:t?.utf8Decoder??c0,utf8Encoder:t?.utf8Encoder??lne}),xOe=["in-region","cross-region","mobile","standard","legacy"],_Oe=({defaultsMode:t}={})=>aIe(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(SOe()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${xOe.join(", ")}, got ${e}`)}}),SOe=()=>{const e=(typeof window<"u"&&window?.navigator?.userAgent?Vne.parse(window.navigator.userAgent):void 0)?.platform?.type;return e==="tablet"||e==="mobile"},EOe=t=>{const e=_Oe(t),n=()=>e().then(GIe),r=wOe(t);return{...r,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??mOe,credentialDefaultProvider:t?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??$Re({serviceId:r.serviceId,clientVersion:bRe.version}),eventStreamSerdeProvider:t?.eventStreamSerdeProvider??fOe,maxAttempts:t?.maxAttempts??dk,region:t?.region??pOe("Region is missing"),requestHandler:d6.create(t?.requestHandler??n),retryMode:t?.retryMode??(async()=>(await n()).retryMode||D4e),sha256:t?.sha256??LRe,streamCollector:t?.streamCollector??gNe,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(m4e)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(g4e))}},kOe=t=>{let e=async()=>{if(t.region===void 0)throw new Error("Region is missing from runtimeConfig");const n=t.region;return typeof n=="string"?n:n()};return{setRegion(n){e=n},region(){return e}}},COe=t=>({region:t.region()}),AOe=t=>{const e=t.httpAuthSchemes;let n=t.httpAuthSchemeProvider,r=t.credentials;return{setHttpAuthScheme(s){const i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},TOe=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),r2=t=>t,POe=(t,e)=>{const n={...r2(kOe(t)),...r2(XIe(t)),...r2(FPe(t)),...r2(AOe(t))};return e.forEach(r=>r.configure(n)),{...t,...COe(n),...ZIe(n),...BPe(n),...TOe(n)}};class NOe extends LIe{config;constructor(...[e]){const n=EOe(e||{}),r=mRe(n),s=NNe(r),i=nRe(s),o=b4e(i),a=o,l=L4e(a),c=y4e(l),u=pRe(c),d=POe(u,e?.extensions||[]);super(d),this.config=d,this.middlewareStack.use(p4e(this.config)),this.middlewareStack.use(cRe(this.config)),this.middlewareStack.use(x4e(this.config)),this.middlewareStack.use(zPe(this.config)),this.middlewareStack.use(GPe(this.config)),this.middlewareStack.use(XPe(this.config)),this.middlewareStack.use(tNe(this.config,{httpAuthSchemeParametersProvider:dRe,identityProviderConfigProvider:async h=>new SNe({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(cNe(this.config))}destroy(){super.destroy()}}class Fi extends lg{constructor(e){super(e),Object.setPrototypeOf(this,Fi.prototype)}}class w6 extends Fi{name="AccessDeniedException";$fault="client";constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,w6.prototype)}}var q$;(function(t){t.visit=(e,n)=>e.s3OutputDataConfig!==void 0?n.s3OutputDataConfig(e.s3OutputDataConfig):n._(e.$unknown[0],e.$unknown[1])})(q$||(q$={}));class x6 extends Fi{name="InternalServerException";$fault="server";constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,x6.prototype)}}class _6 extends Fi{name="ThrottlingException";$fault="client";constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),Object.setPrototypeOf(this,_6.prototype)}}class S6 extends Fi{name="ValidationException";$fault="client";constructor(e){super({name:"ValidationException",$fault:"client",...e}),Object.setPrototypeOf(this,S6.prototype)}}class E6 extends Fi{name="ConflictException";$fault="client";constructor(e){super({name:"ConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,E6.prototype)}}class k6 extends Fi{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,k6.prototype)}}class C6 extends Fi{name="ServiceQuotaExceededException";$fault="client";constructor(e){super({name:"ServiceQuotaExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,C6.prototype)}}class A6 extends Fi{name="ServiceUnavailableException";$fault="server";constructor(e){super({name:"ServiceUnavailableException",$fault:"server",...e}),Object.setPrototypeOf(this,A6.prototype)}}var K$;(function(t){t.visit=(e,n)=>e.bytes!==void 0?n.bytes(e.bytes):n._(e.$unknown[0],e.$unknown[1])})(K$||(K$={}));var Y$;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.image!==void 0?n.image(e.image):n._(e.$unknown[0],e.$unknown[1])})(Y$||(Y$={}));var W4;(function(t){t.visit=(e,n)=>e.bytes!==void 0?n.bytes(e.bytes):n._(e.$unknown[0],e.$unknown[1])})(W4||(W4={}));var G4;(function(t){t.visit=(e,n)=>e.bytes!==void 0?n.bytes(e.bytes):n._(e.$unknown[0],e.$unknown[1])})(G4||(G4={}));var q4;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.image!==void 0?n.image(e.image):n._(e.$unknown[0],e.$unknown[1])})(q4||(q4={}));var K4;(function(t){t.visit=(e,n)=>e.bytes!==void 0?n.bytes(e.bytes):n._(e.$unknown[0],e.$unknown[1])})(K4||(K4={}));var Y4;(function(t){t.visit=(e,n)=>e.reasoningText!==void 0?n.reasoningText(e.reasoningText):e.redactedContent!==void 0?n.redactedContent(e.redactedContent):n._(e.$unknown[0],e.$unknown[1])})(Y4||(Y4={}));var J4;(function(t){t.visit=(e,n)=>e.bytes!==void 0?n.bytes(e.bytes):e.s3Location!==void 0?n.s3Location(e.s3Location):n._(e.$unknown[0],e.$unknown[1])})(J4||(J4={}));var X4;(function(t){t.visit=(e,n)=>e.json!==void 0?n.json(e.json):e.text!==void 0?n.text(e.text):e.image!==void 0?n.image(e.image):e.document!==void 0?n.document(e.document):e.video!==void 0?n.video(e.video):n._(e.$unknown[0],e.$unknown[1])})(X4||(X4={}));var Z4;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.image!==void 0?n.image(e.image):e.document!==void 0?n.document(e.document):e.video!==void 0?n.video(e.video):e.toolUse!==void 0?n.toolUse(e.toolUse):e.toolResult!==void 0?n.toolResult(e.toolResult):e.guardContent!==void 0?n.guardContent(e.guardContent):e.reasoningContent!==void 0?n.reasoningContent(e.reasoningContent):n._(e.$unknown[0],e.$unknown[1])})(Z4||(Z4={}));var J$;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):n._(e.$unknown[0],e.$unknown[1])})(J$||(J$={}));var Q4;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.guardContent!==void 0?n.guardContent(e.guardContent):n._(e.$unknown[0],e.$unknown[1])})(Q4||(Q4={}));var X$;(function(t){t.visit=(e,n)=>e.auto!==void 0?n.auto(e.auto):e.any!==void 0?n.any(e.any):e.tool!==void 0?n.tool(e.tool):n._(e.$unknown[0],e.$unknown[1])})(X$||(X$={}));var eR;(function(t){t.visit=(e,n)=>e.json!==void 0?n.json(e.json):n._(e.$unknown[0],e.$unknown[1])})(eR||(eR={}));var tR;(function(t){t.visit=(e,n)=>e.toolSpec!==void 0?n.toolSpec(e.toolSpec):n._(e.$unknown[0],e.$unknown[1])})(tR||(tR={}));var Z$;(function(t){t.visit=(e,n)=>e.message!==void 0?n.message(e.message):n._(e.$unknown[0],e.$unknown[1])})(Z$||(Z$={}));class T6 extends Fi{name="ModelErrorException";$fault="client";originalStatusCode;resourceName;constructor(e){super({name:"ModelErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,T6.prototype),this.originalStatusCode=e.originalStatusCode,this.resourceName=e.resourceName}}class P6 extends Fi{name="ModelNotReadyException";$fault="client";$retryable={};constructor(e){super({name:"ModelNotReadyException",$fault:"client",...e}),Object.setPrototypeOf(this,P6.prototype)}}class N6 extends Fi{name="ModelTimeoutException";$fault="client";constructor(e){super({name:"ModelTimeoutException",$fault:"client",...e}),Object.setPrototypeOf(this,N6.prototype)}}var Q$;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.redactedContent!==void 0?n.redactedContent(e.redactedContent):e.signature!==void 0?n.signature(e.signature):n._(e.$unknown[0],e.$unknown[1])})(Q$||(Q$={}));var e9;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.toolUse!==void 0?n.toolUse(e.toolUse):e.reasoningContent!==void 0?n.reasoningContent(e.reasoningContent):n._(e.$unknown[0],e.$unknown[1])})(e9||(e9={}));var t9;(function(t){t.visit=(e,n)=>e.toolUse!==void 0?n.toolUse(e.toolUse):n._(e.$unknown[0],e.$unknown[1])})(t9||(t9={}));class I6 extends Fi{name="ModelStreamErrorException";$fault="client";originalStatusCode;originalMessage;constructor(e){super({name:"ModelStreamErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,I6.prototype),this.originalStatusCode=e.originalStatusCode,this.originalMessage=e.originalMessage}}var n9;(function(t){t.visit=(e,n)=>e.messageStart!==void 0?n.messageStart(e.messageStart):e.contentBlockStart!==void 0?n.contentBlockStart(e.contentBlockStart):e.contentBlockDelta!==void 0?n.contentBlockDelta(e.contentBlockDelta):e.contentBlockStop!==void 0?n.contentBlockStop(e.contentBlockStop):e.messageStop!==void 0?n.messageStop(e.messageStop):e.metadata!==void 0?n.metadata(e.metadata):e.internalServerException!==void 0?n.internalServerException(e.internalServerException):e.modelStreamErrorException!==void 0?n.modelStreamErrorException(e.modelStreamErrorException):e.validationException!==void 0?n.validationException(e.validationException):e.throttlingException!==void 0?n.throttlingException(e.throttlingException):e.serviceUnavailableException!==void 0?n.serviceUnavailableException(e.serviceUnavailableException):n._(e.$unknown[0],e.$unknown[1])})(n9||(n9={}));var r9;(function(t){t.visit=(e,n)=>e.chunk!==void 0?n.chunk(e.chunk):e.internalServerException!==void 0?n.internalServerException(e.internalServerException):e.modelStreamErrorException!==void 0?n.modelStreamErrorException(e.modelStreamErrorException):e.validationException!==void 0?n.validationException(e.validationException):e.throttlingException!==void 0?n.throttlingException(e.throttlingException):e.modelTimeoutException!==void 0?n.modelTimeoutException(e.modelTimeoutException):e.serviceUnavailableException!==void 0?n.serviceUnavailableException(e.serviceUnavailableException):n._(e.$unknown[0],e.$unknown[1])})(r9||(r9={}));const Jne=t=>{if(t.text!==void 0)return{text:t.text};if(t.image!==void 0)return{image:hh};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},IOe=t=>{if(t.text!==void 0)return{text:t.text};if(t.image!==void 0)return{image:t.image};if(t.document!==void 0)return{document:t.document};if(t.video!==void 0)return{video:t.video};if(t.toolUse!==void 0)return{toolUse:t.toolUse};if(t.toolResult!==void 0)return{toolResult:t.toolResult};if(t.guardContent!==void 0)return{guardContent:Jne(t.guardContent)};if(t.reasoningContent!==void 0)return{reasoningContent:hh};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},R6=t=>({...t,...t.content&&{content:t.content.map(e=>IOe(e))}}),Xne=t=>{if(t.text!==void 0)return{text:t.text};if(t.guardContent!==void 0)return{guardContent:Jne(t.guardContent)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},ROe=t=>({...t,...t.messages&&{messages:t.messages.map(e=>R6(e))},...t.system&&{system:t.system.map(e=>Xne(e))},...t.toolConfig&&{toolConfig:t.toolConfig},...t.promptVariables&&{promptVariables:hh},...t.requestMetadata&&{requestMetadata:hh}}),OOe=t=>{if(t.message!==void 0)return{message:R6(t.message)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},LOe=t=>({...t,...t.output&&{output:OOe(t.output)}}),DOe=t=>({...t,...t.messages&&{messages:t.messages.map(e=>R6(e))},...t.system&&{system:t.system.map(e=>Xne(e))},...t.toolConfig&&{toolConfig:t.toolConfig},...t.promptVariables&&{promptVariables:hh},...t.requestMetadata&&{requestMetadata:hh}}),MOe=t=>({...t,...t.stream&&{stream:"STREAMING_CONTENT"}}),jOe=t=>({...t,...t.body&&{body:hh}}),FOe=t=>({...t,...t.body&&{body:hh}}),BOe=async(t,e)=>{const n=h6(t,e),r={"content-type":"application/json"};n.bp("/model/{modelId}/converse"),n.p("modelId",()=>t.modelId,"{modelId}",!1);let s;return s=JSON.stringify(hn(t,{additionalModelRequestFields:i=>Bw(i),additionalModelResponseFieldPaths:i=>bn(i),guardrailConfig:i=>bn(i),inferenceConfig:i=>ore(i),messages:i=>are(i,e),performanceConfig:i=>bn(i),promptVariables:i=>bn(i),requestMetadata:i=>bn(i),system:i=>lre(i,e),toolConfig:i=>cre(i)})),n.m("POST").h(r).b(s),n.build()},$Oe=async(t,e)=>{const n=h6(t,e),r={"content-type":"application/json"};n.bp("/model/{modelId}/converse-stream"),n.p("modelId",()=>t.modelId,"{modelId}",!1);let s;return s=JSON.stringify(hn(t,{additionalModelRequestFields:i=>Bw(i),additionalModelResponseFieldPaths:i=>bn(i),guardrailConfig:i=>bn(i),inferenceConfig:i=>ore(i),messages:i=>are(i,e),performanceConfig:i=>bn(i),promptVariables:i=>bn(i),requestMetadata:i=>bn(i),system:i=>lre(i,e),toolConfig:i=>cre(i)})),n.m("POST").h(r).b(s),n.build()},UOe=async(t,e)=>{const n=h6(t,e),r=Xs({},QIe,{[bre]:t[gre]||"application/octet-stream",[s9]:t[s9],[lDe]:t[iDe],[oDe]:t[rDe],[aDe]:t[sDe],[vre]:t[yre]});n.bp("/model/{modelId}/invoke"),n.p("modelId",()=>t.modelId,"{modelId}",!1);let s;return t.body!==void 0&&(s=t.body),n.m("POST").h(r).b(s),n.build()},HOe=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return O6(t,e);const n=Xs({$metadata:Bi(t)}),r=$Ie(Ine(await Jo(t.body,e)),"body"),s=hn(r,{additionalModelResponseFields:i=>CA(i),metrics:bn,output:i=>OLe(pl(i),e),performanceConfig:bn,stopReason:yn,trace:i=>MLe(i),usage:bn});return Object.assign(n,s),n},zOe=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return O6(t,e);const n=Xs({$metadata:Bi(t)}),r=t.body;return n.stream=QOe(r,e),n},VOe=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return O6(t,e);const n=Xs({$metadata:Bi(t),[gre]:[,t.headers[bre]],[yre]:[,t.headers[vre]]}),r=await hne(t.body,e);return n.body=r,n},O6=async(t,e)=>{const n={...t,body:await s4e(t.body,e)},r=i4e(t,n.body);switch(r){case"AccessDeniedException":case"com.amazonaws.bedrockruntime#AccessDeniedException":throw await GOe(n);case"InternalServerException":case"com.amazonaws.bedrockruntime#InternalServerException":throw await Zne(n);case"ResourceNotFoundException":case"com.amazonaws.bedrockruntime#ResourceNotFoundException":throw await XOe(n);case"ServiceQuotaExceededException":case"com.amazonaws.bedrockruntime#ServiceQuotaExceededException":throw await ZOe(n);case"ThrottlingException":case"com.amazonaws.bedrockruntime#ThrottlingException":throw await tre(n);case"ValidationException":case"com.amazonaws.bedrockruntime#ValidationException":throw await nre(n);case"ModelErrorException":case"com.amazonaws.bedrockruntime#ModelErrorException":throw await KOe(n);case"ModelNotReadyException":case"com.amazonaws.bedrockruntime#ModelNotReadyException":throw await YOe(n);case"ModelTimeoutException":case"com.amazonaws.bedrockruntime#ModelTimeoutException":throw await JOe(n);case"ServiceUnavailableException":case"com.amazonaws.bedrockruntime#ServiceUnavailableException":throw await ere(n);case"ModelStreamErrorException":case"com.amazonaws.bedrockruntime#ModelStreamErrorException":throw await Qne(n);case"ConflictException":case"com.amazonaws.bedrockruntime#ConflictException":throw await qOe(n);default:const s=n.body;return WOe({output:t,parsedBody:s,errorCode:r})}},WOe=VIe(Fi),GOe=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn});Object.assign(n,s);const i=new w6({$metadata:Bi(t),...n});return Yo(i,t.body)},qOe=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn});Object.assign(n,s);const i=new E6({$metadata:Bi(t),...n});return Yo(i,t.body)},Zne=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn});Object.assign(n,s);const i=new x6({$metadata:Bi(t),...n});return Yo(i,t.body)},KOe=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn,originalStatusCode:m6,resourceName:yn});Object.assign(n,s);const i=new T6({$metadata:Bi(t),...n});return Yo(i,t.body)},YOe=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn});Object.assign(n,s);const i=new P6({$metadata:Bi(t),...n});return Yo(i,t.body)},Qne=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn,originalMessage:yn,originalStatusCode:m6});Object.assign(n,s);const i=new I6({$metadata:Bi(t),...n});return Yo(i,t.body)},JOe=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn});Object.assign(n,s);const i=new N6({$metadata:Bi(t),...n});return Yo(i,t.body)},XOe=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn});Object.assign(n,s);const i=new k6({$metadata:Bi(t),...n});return Yo(i,t.body)},ZOe=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn});Object.assign(n,s);const i=new C6({$metadata:Bi(t),...n});return Yo(i,t.body)},ere=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn});Object.assign(n,s);const i=new A6({$metadata:Bi(t),...n});return Yo(i,t.body)},tre=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn});Object.assign(n,s);const i=new _6({$metadata:Bi(t),...n});return Yo(i,t.body)},nre=async(t,e)=>{const n=Xs({}),r=t.body,s=hn(r,{message:yn});Object.assign(n,s);const i=new S6({$metadata:Bi(t),...n});return Yo(i,t.body)},QOe=(t,e)=>e.eventStreamMarshaller.deserialize(t,async n=>n.messageStart!=null?{messageStart:await iLe(n.messageStart,e)}:n.contentBlockStart!=null?{contentBlockStart:await tLe(n.contentBlockStart,e)}:n.contentBlockDelta!=null?{contentBlockDelta:await eLe(n.contentBlockDelta,e)}:n.contentBlockStop!=null?{contentBlockStop:await nLe(n.contentBlockStop,e)}:n.messageStop!=null?{messageStop:await oLe(n.messageStop,e)}:n.metadata!=null?{metadata:await rLe(n.metadata,e)}:n.internalServerException!=null?{internalServerException:await sLe(n.internalServerException,e)}:n.modelStreamErrorException!=null?{modelStreamErrorException:await aLe(n.modelStreamErrorException,e)}:n.validationException!=null?{validationException:await uLe(n.validationException,e)}:n.throttlingException!=null?{throttlingException:await cLe(n.throttlingException,e)}:n.serviceUnavailableException!=null?{serviceUnavailableException:await lLe(n.serviceUnavailableException,e)}:{$unknown:t}),eLe=async(t,e)=>{const n={},r=await Jo(t.body,e);return Object.assign(n,ILe(r,e)),n},tLe=async(t,e)=>{const n={},r=await Jo(t.body,e);return Object.assign(n,bn(r)),n},nLe=async(t,e)=>{const n={},r=await Jo(t.body,e);return Object.assign(n,bn(r)),n},rLe=async(t,e)=>{const n={},r=await Jo(t.body,e);return Object.assign(n,LLe(r)),n},sLe=async(t,e)=>{const n={...t,body:await Jo(t.body,e)};return Zne(n)},iLe=async(t,e)=>{const n={},r=await Jo(t.body,e);return Object.assign(n,bn(r)),n},oLe=async(t,e)=>{const n={},r=await Jo(t.body,e);return Object.assign(n,YLe(r)),n},aLe=async(t,e)=>{const n={...t,body:await Jo(t.body,e)};return Qne(n)},lLe=async(t,e)=>{const n={...t,body:await Jo(t.body,e)};return ere(n)},cLe=async(t,e)=>{const n={...t,body:await Jo(t.body,e)};return tre(n)},uLe=async(t,e)=>{const n={...t,body:await Jo(t.body,e)};return nre(n)},dLe=(t,e)=>Z4.visit(t,{document:n=>({document:rre(n,e)}),guardContent:n=>({guardContent:sre(n,e)}),image:n=>({image:ire(n,e)}),reasoningContent:n=>({reasoningContent:yLe(n,e)}),text:n=>({text:n}),toolResult:n=>({toolResult:_Le(n,e)}),toolUse:n=>({toolUse:ALe(n)}),video:n=>({video:ure(n,e)}),_:(n,r)=>({[n]:r})}),hLe=(t,e)=>t.filter(n=>n!=null).map(n=>dLe(n,e)),rre=(t,e)=>hn(t,{format:[],name:[],source:n=>fLe(n,e)}),fLe=(t,e)=>W4.visit(t,{bytes:n=>({bytes:e.base64Encoder(n)}),_:(n,r)=>({[n]:r})}),sre=(t,e)=>q4.visit(t,{image:n=>({image:pLe(n,e)}),text:n=>({text:bn(n)}),_:(n,r)=>({[n]:r})}),pLe=(t,e)=>hn(t,{format:[],source:n=>mLe(n,e)}),mLe=(t,e)=>G4.visit(t,{bytes:n=>({bytes:e.base64Encoder(n)}),_:(n,r)=>({[n]:r})}),ire=(t,e)=>hn(t,{format:[],source:n=>gLe(n,e)}),gLe=(t,e)=>K4.visit(t,{bytes:n=>({bytes:e.base64Encoder(n)}),_:(n,r)=>({[n]:r})}),ore=(t,e)=>hn(t,{maxTokens:[],stopSequences:bn,temperature:x$,topP:x$}),bLe=(t,e)=>hn(t,{content:n=>hLe(n,e),role:[]}),are=(t,e)=>t.filter(n=>n!=null).map(n=>bLe(n,e)),yLe=(t,e)=>Y4.visit(t,{reasoningText:n=>({reasoningText:bn(n)}),redactedContent:n=>({redactedContent:e.base64Encoder(n)}),_:(n,r)=>({[n]:r})}),vLe=(t,e)=>Q4.visit(t,{guardContent:n=>({guardContent:sre(n,e)}),text:n=>({text:n}),_:(n,r)=>({[n]:r})}),lre=(t,e)=>t.filter(n=>n!=null).map(n=>vLe(n,e)),wLe=(t,e)=>tR.visit(t,{toolSpec:n=>({toolSpec:CLe(n)}),_:(n,r)=>({[n]:r})}),cre=(t,e)=>hn(t,{toolChoice:bn,tools:n=>kLe(n)}),xLe=(t,e)=>eR.visit(t,{json:n=>({json:Bw(n)}),_:(n,r)=>({[n]:r})}),_Le=(t,e)=>hn(t,{content:n=>ELe(n,e),status:[],toolUseId:[]}),SLe=(t,e)=>X4.visit(t,{document:n=>({document:rre(n,e)}),image:n=>({image:ire(n,e)}),json:n=>({json:Bw(n)}),text:n=>({text:n}),video:n=>({video:ure(n,e)}),_:(n,r)=>({[n]:r})}),ELe=(t,e)=>t.filter(n=>n!=null).map(n=>SLe(n,e)),kLe=(t,e)=>t.filter(n=>n!=null).map(n=>wLe(n)),CLe=(t,e)=>hn(t,{description:[],inputSchema:n=>xLe(n),name:[]}),ALe=(t,e)=>hn(t,{input:n=>Bw(n),name:[],toolUseId:[]}),ure=(t,e)=>hn(t,{format:[],source:n=>TLe(n,e)}),TLe=(t,e)=>J4.visit(t,{bytes:n=>({bytes:e.base64Encoder(n)}),s3Location:n=>({s3Location:bn(n)}),_:(n,r)=>({[n]:r})}),Bw=(t,e)=>t,PLe=(t,e)=>t.document!=null?{document:dre(t.document,e)}:t.guardContent!=null?{guardContent:VLe(pl(t.guardContent),e)}:t.image!=null?{image:pre(t.image,e)}:t.reasoningContent!=null?{reasoningContent:JLe(pl(t.reasoningContent),e)}:yn(t.text)!==void 0?{text:yn(t.text)}:t.toolResult!=null?{toolResult:ZLe(t.toolResult,e)}:t.toolUse!=null?{toolUse:tDe(t.toolUse)}:t.video!=null?{video:mre(t.video,e)}:{$unknown:Object.entries(t)[0]},NLe=(t,e)=>t.reasoningContent!=null?{reasoningContent:XLe(pl(t.reasoningContent),e)}:yn(t.text)!==void 0?{text:yn(t.text)}:t.toolUse!=null?{toolUse:bn(t.toolUse)}:{$unknown:Object.entries(t)[0]},ILe=(t,e)=>hn(t,{contentBlockIndex:m6,delta:n=>NLe(pl(n),e)}),RLe=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>PLe(pl(r),e)),OLe=(t,e)=>t.message!=null?{message:KLe(t.message,e)}:{$unknown:Object.entries(t)[0]},LLe=(t,e)=>hn(t,{metrics:bn,performanceConfig:bn,trace:n=>DLe(n),usage:bn}),DLe=(t,e)=>hn(t,{guardrail:n=>fre(n),promptRouter:bn}),MLe=(t,e)=>hn(t,{guardrail:n=>fre(n),promptRouter:bn}),dre=(t,e)=>hn(t,{format:yn,name:yn,source:n=>jLe(pl(n),e)}),jLe=(t,e)=>t.bytes!=null?{bytes:e.base64Decoder(t.bytes)}:{$unknown:Object.entries(t)[0]},hre=(t,e)=>hn(t,{contentPolicy:bn,contextualGroundingPolicy:n=>zLe(n),invocationMetrics:bn,sensitiveInformationPolicy:bn,topicPolicy:bn,wordPolicy:bn}),FLe=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>hre(r)),BLe=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=FLe(s)),n),{}),$Le=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=hre(s)),n),{}),ULe=(t,e)=>hn(t,{action:yn,score:w$,threshold:w$,type:yn}),HLe=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>ULe(r)),zLe=(t,e)=>hn(t,{filters:n=>HLe(n)}),VLe=(t,e)=>t.image!=null?{image:WLe(t.image,e)}:t.text!=null?{text:bn(t.text)}:{$unknown:Object.entries(t)[0]},WLe=(t,e)=>hn(t,{format:yn,source:n=>GLe(pl(n),e)}),GLe=(t,e)=>t.bytes!=null?{bytes:e.base64Decoder(t.bytes)}:{$unknown:Object.entries(t)[0]},fre=(t,e)=>hn(t,{inputAssessment:n=>$Le(n),modelOutput:bn,outputAssessments:n=>BLe(n)}),pre=(t,e)=>hn(t,{format:yn,source:n=>qLe(pl(n),e)}),qLe=(t,e)=>t.bytes!=null?{bytes:e.base64Decoder(t.bytes)}:{$unknown:Object.entries(t)[0]},KLe=(t,e)=>hn(t,{content:n=>RLe(n,e),role:yn}),YLe=(t,e)=>hn(t,{additionalModelResponseFields:n=>CA(n),stopReason:yn}),JLe=(t,e)=>t.reasoningText!=null?{reasoningText:bn(t.reasoningText)}:t.redactedContent!=null?{redactedContent:e.base64Decoder(t.redactedContent)}:{$unknown:Object.entries(t)[0]},XLe=(t,e)=>t.redactedContent!=null?{redactedContent:e.base64Decoder(t.redactedContent)}:yn(t.signature)!==void 0?{signature:yn(t.signature)}:yn(t.text)!==void 0?{text:yn(t.text)}:{$unknown:Object.entries(t)[0]},ZLe=(t,e)=>hn(t,{content:n=>eDe(n,e),status:yn,toolUseId:yn}),QLe=(t,e)=>t.document!=null?{document:dre(t.document,e)}:t.image!=null?{image:pre(t.image,e)}:t.json!=null?{json:CA(t.json)}:yn(t.text)!==void 0?{text:yn(t.text)}:t.video!=null?{video:mre(t.video,e)}:{$unknown:Object.entries(t)[0]},eDe=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>QLe(pl(r),e)),tDe=(t,e)=>hn(t,{input:n=>CA(n),name:yn,toolUseId:yn}),mre=(t,e)=>hn(t,{format:yn,source:n=>nDe(pl(n),e)}),nDe=(t,e)=>t.bytes!=null?{bytes:e.base64Decoder(t.bytes)}:t.s3Location!=null?{s3Location:bn(t.s3Location)}:{$unknown:Object.entries(t)[0]},CA=(t,e)=>t,Bi=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),s9="accept",gre="contentType",bre="content-type",rDe="guardrailIdentifier",sDe="guardrailVersion",yre="performanceConfigLatency",iDe="trace",oDe="x-amzn-bedrock-guardrailidentifier",aDe="x-amzn-bedrock-guardrailversion",vre="x-amzn-bedrock-performanceconfig-latency",lDe="x-amzn-bedrock-trace";class cDe extends EA.classBuilder().ep(y6).m(function(e,n,r,s){return[c6(r,this.serialize,this.deserialize),g6(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","Converse",{}).n("BedrockRuntimeClient","ConverseCommand").f(ROe,LOe).ser(BOe).de(HOe).build(){}class uDe extends EA.classBuilder().ep(y6).m(function(e,n,r,s){return[c6(r,this.serialize,this.deserialize),g6(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ConverseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","ConverseStreamCommand").f(DOe,MOe).ser($Oe).de(zOe).build(){}class dDe extends EA.classBuilder().ep(y6).m(function(e,n,r,s){return[c6(r,this.serialize,this.deserialize),g6(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModel",{}).n("BedrockRuntimeClient","InvokeModelCommand").f(jOe,FOe).ser(UOe).de(VOe).build(){}function hDe(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{toolConfig:{tools:void 0,toolChoice:void 0},toolWarnings:[]};const r=[],s=[];for(const a of n)a.type==="provider-defined"?r.push({type:"unsupported-tool",tool:a}):s.push({toolSpec:{name:a.name,description:a.description,inputSchema:{json:a.parameters}}});const i=t.toolChoice;if(i==null)return{toolConfig:{tools:s,toolChoice:void 0},toolWarnings:r};const o=i.type;switch(o){case"auto":return{toolConfig:{tools:s,toolChoice:{auto:{}}},toolWarnings:r};case"required":return{toolConfig:{tools:s,toolChoice:{any:{}}},toolWarnings:r};case"none":return{toolConfig:{tools:void 0,toolChoice:void 0},toolWarnings:r};case"tool":return{toolConfig:{tools:s,toolChoice:{tool:{name:i.toolName}}},toolWarnings:r};default:{const a=o;throw new wv({functionality:`Unsupported tool choice type: ${a}`})}}}var fDe=ane({prefix:"file",size:16});function pDe(t){var e,n,r,s,i;const o=mDe(t);let a;const l=[];for(let c=0;c<o.length;c++){const u=o[c],d=c===o.length-1,h=u.type;switch(h){case"system":{if(l.length>0)throw new wv({functionality:"Multiple system messages that are separated by user/assistant messages"});a=u.messages.map(({content:f})=>f).join(`
`);break}case"user":{const f=[];for(const p of u.messages){const{role:m,content:g}=p;switch(m){case"user":{for(let b=0;b<g.length;b++){const v=g[b];switch(v.type){case"text":{f.push({text:v.text});break}case"image":{if(v.image instanceof URL)throw new wv({functionality:"Image URLs in user messages"});f.push({image:{format:(n=(e=v.mimeType)==null?void 0:e.split("/"))==null?void 0:n[1],source:{bytes:(r=v.image)!=null?r:v.image}}});break}case"file":{if(v.data instanceof URL)throw new wv({functionality:"File URLs in user messages"});f.push({document:{format:(i=(s=v.mimeType)==null?void 0:s.split("/"))==null?void 0:i[1],name:fDe(),source:{bytes:_t.from(v.data,"base64")}}});break}}}break}case"tool":{for(let b=0;b<g.length;b++){const v=g[b];f.push({toolResult:{toolUseId:v.toolCallId,content:[{text:JSON.stringify(v.result)}]}})}break}default:{const b=m;throw new Error(`Unsupported role: ${b}`)}}}l.push({role:"user",content:f});break}case"assistant":{const f=[];for(let p=0;p<u.messages.length;p++){const m=u.messages[p],g=p===u.messages.length-1,{content:b}=m;for(let v=0;v<b.length;v++){const w=b[v],_=v===b.length-1;switch(w.type){case"text":{f.push({text:d&&g&&_?w.text.trim():w.text});break}case"tool-call":{f.push({toolUse:{toolUseId:w.toolCallId,name:w.toolName,input:w.args}});break}}}}l.push({role:"assistant",content:f});break}default:{const f=h;throw new Error(`Unsupported type: ${f}`)}}}return{system:a,messages:l}}function mDe(t){const e=[];let n;for(const r of t){const{role:s}=r;switch(s){case"system":{n?.type!=="system"&&(n={type:"system",messages:[]},e.push(n)),n.messages.push(r);break}case"assistant":{n?.type!=="assistant"&&(n={type:"assistant",messages:[]},e.push(n)),n.messages.push(r);break}case"user":{n?.type!=="user"&&(n={type:"user",messages:[]},e.push(n)),n.messages.push(r);break}case"tool":{n?.type!=="user"&&(n={type:"user",messages:[]},e.push(n)),n.messages.push(r);break}default:{const i=s;throw new Error(`Unsupported role: ${i}`)}}}return e}function i9(t){switch(t){case"stop_sequence":case"end_turn":return"stop";case"max_tokens":return"length";case"content_filtered":case"guardrail_intervened":return"content-filter";case"tool_use":return"tool-calls";default:return"unknown"}}var gDe=class{constructor(t,e,n){this.specificationVersion="v1",this.provider="amazon-bedrock",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=n}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u,providerMetadata:d,headers:h}){var f,p;const m=t.type,g=[];o!=null&&g.push({type:"unsupported-setting",setting:"frequencyPenalty"}),a!=null&&g.push({type:"unsupported-setting",setting:"presencePenalty"}),u!=null&&g.push({type:"unsupported-setting",setting:"seed"}),h!=null&&g.push({type:"unsupported-setting",setting:"headers"}),i!=null&&g.push({type:"unsupported-setting",setting:"topK"}),c!=null&&c.type!=="text"&&g.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{system:b,messages:v}=pDe(e),w={modelId:this.modelId,system:b?[{text:b}]:void 0,additionalModelRequestFields:this.settings.additionalModelRequestFields,inferenceConfig:{maxTokens:n,temperature:r,topP:s,stopSequences:l},messages:v,guardrailConfig:(f=d?.bedrock)==null?void 0:f.guardrailConfig};switch(m){case"regular":{const{toolConfig:_,toolWarnings:S}=hDe(t);return{command:{...w,...(p=_.tools)!=null&&p.length?{toolConfig:_}:{}},warnings:[...g,...S]}}case"object-json":throw new wv({functionality:"json-mode object generation"});case"object-tool":return{command:{...w,toolConfig:{tools:[{toolSpec:{name:t.tool.name,description:t.tool.description,inputSchema:{json:t.tool.parameters}}}],toolChoice:{tool:{name:t.tool.name}}}},warnings:g};default:{const _=m;throw new Error(`Unsupported type: ${_}`)}}}async doGenerate(t){var e,n,r,s,i,o,a,l,c,u,d,h;const{command:f,warnings:p}=this.getArgs(t),m=await this.config.client.send(new cDe(f)),{messages:g,...b}=f,v=m.trace?{bedrock:{trace:m.trace}}:void 0;return{text:(s=(r=(n=(e=m.output)==null?void 0:e.message)==null?void 0:n.content)==null?void 0:r.map(w=>{var _;return(_=w.text)!=null?_:""}).join(""))!=null?s:void 0,toolCalls:(l=(a=(o=(i=m.output)==null?void 0:i.message)==null?void 0:o.content)==null?void 0:a.filter(w=>!!w.toolUse))==null?void 0:l.map(w=>{var _,S,E,k,x,I;return{toolCallType:"function",toolCallId:(S=(_=w.toolUse)==null?void 0:_.toolUseId)!=null?S:this.config.generateId(),toolName:(k=(E=w.toolUse)==null?void 0:E.name)!=null?k:`tool-${this.config.generateId()}`,args:JSON.stringify((I=(x=w.toolUse)==null?void 0:x.input)!=null?I:"")}}),finishReason:i9(m.stopReason),usage:{promptTokens:(u=(c=m.usage)==null?void 0:c.inputTokens)!=null?u:Number.NaN,completionTokens:(h=(d=m.usage)==null?void 0:d.outputTokens)!=null?h:Number.NaN},rawCall:{rawPrompt:g,rawSettings:b},warnings:p,providerMetadata:v}}async doStream(t){const{command:e,warnings:n}=this.getArgs(t),r=await this.config.client.send(new uDe(e)),{messages:s,...i}=e;let o="unknown",a={promptTokens:Number.NaN,completionTokens:Number.NaN},l;if(!r.stream)throw new Error("No stream found");const c=new ReadableStream({async start(d){for await(const h of r.stream)d.enqueue({success:!0,value:h});d.close()}}),u={};return{stream:c.pipeThrough(new TransformStream({transform(d,h){var f,p,m,g,b,v,w,_,S;function E(C){o="error",h.enqueue({type:"error",error:C})}if(!d.success){E(d.error);return}const k=d.value;if(k.internalServerException){E(k.internalServerException);return}if(k.modelStreamErrorException){E(k.modelStreamErrorException);return}if(k.throttlingException){E(k.throttlingException);return}if(k.validationException){E(k.validationException);return}k.messageStop&&(o=i9(k.messageStop.stopReason)),k.metadata&&(a={promptTokens:(p=(f=k.metadata.usage)==null?void 0:f.inputTokens)!=null?p:Number.NaN,completionTokens:(g=(m=k.metadata.usage)==null?void 0:m.outputTokens)!=null?g:Number.NaN},k.metadata.trace&&(l={bedrock:{trace:k.metadata.trace}})),(v=(b=k.contentBlockDelta)==null?void 0:b.delta)!=null&&v.text&&h.enqueue({type:"text-delta",textDelta:k.contentBlockDelta.delta.text});const x=k.contentBlockStart;if(((w=x?.start)==null?void 0:w.toolUse)!=null){const C=x.start.toolUse;u[x.contentBlockIndex]={toolCallId:C.toolUseId,toolName:C.name,jsonText:""}}const I=k.contentBlockDelta;if((_=I?.delta)!=null&&_.toolUse){const C=u[I.contentBlockIndex],T=(S=I.delta.toolUse.input)!=null?S:"";h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:C.toolCallId,toolName:C.toolName,argsTextDelta:T}),C.jsonText+=T}const R=k.contentBlockStop;if(R!=null){const C=R.contentBlockIndex,T=u[C];T!=null&&(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:T.toolCallId,toolName:T.toolName,args:T.jsonText}),delete u[C])}},flush(d){d.enqueue({type:"finish",finishReason:o,usage:a,providerMetadata:l})}})),rawCall:{rawPrompt:s,rawSettings:i},warnings:n}}},bDe=class{constructor(t,e,n){this.specificationVersion="v1",this.provider="amazon-bedrock",this.maxEmbeddingsPerCall=void 0,this.supportsParallelCalls=!0,this.modelId=t,this.config=n,this.settings=e}async doEmbed({values:t}){const e=async s=>{const i={inputText:s,dimensions:this.settings.dimensions,normalize:this.settings.normalize},o=new dDe({contentType:"application/json",body:JSON.stringify(i),modelId:this.modelId}),a=await this.config.client.send(o);return JSON.parse(new TextDecoder().decode(a.body))};return(await Promise.all(t.map(e))).reduce((s,i)=>(s.embeddings.push(i.embedding),s.usage.tokens+=i.inputTextTokenCount,s),{embeddings:[],usage:{tokens:0}})}};function wre(t={}){const e=()=>{var i;return new NOe((i=t.bedrockOptions)!=null?i:{region:E3({settingValue:t.region,settingName:"region",environmentVariableName:"AWS_REGION",description:"AWS region"}),credentials:{accessKeyId:E3({settingValue:t.accessKeyId,settingName:"accessKeyId",environmentVariableName:"AWS_ACCESS_KEY_ID",description:"AWS access key ID"}),secretAccessKey:E3({settingValue:t.secretAccessKey,settingName:"secretAccessKey",environmentVariableName:"AWS_SECRET_ACCESS_KEY",description:"AWS secret access key"}),sessionToken:jPe({settingValue:t.sessionToken,environmentVariableName:"AWS_SESSION_TOKEN"})}})},n=(i,o={})=>new gDe(i,o,{client:e(),generateId:MPe}),r=function(i,o){if(new.target)throw new Error("The Amazon Bedrock model function cannot be called with the new keyword.");return n(i,o)},s=(i,o={})=>new bDe(i,o,{client:e()});return r.languageModel=n,r.embedding=s,r.textEmbedding=s,r.textEmbeddingModel=s,r}wre();class yDe extends ys{name="AmazonBedrock";getApiKeyLink="https://console.aws.amazon.com/iam/home";config={apiTokenKey:"AWS_BEDROCK_CONFIG"};staticModels=[{name:"anthropic.claude-3-5-sonnet-20241022-v2:0",label:"Claude 3.5 Sonnet v2 (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:2e5},{name:"anthropic.claude-3-5-sonnet-20240620-v1:0",label:"Claude 3.5 Sonnet (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:4096},{name:"anthropic.claude-3-sonnet-20240229-v1:0",label:"Claude 3 Sonnet (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:4096},{name:"anthropic.claude-3-haiku-20240307-v1:0",label:"Claude 3 Haiku (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:4096},{name:"amazon.nova-pro-v1:0",label:"Amazon Nova Pro (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:5120},{name:"amazon.nova-lite-v1:0",label:"Amazon Nova Lite (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:5120},{name:"mistral.mistral-large-2402-v1:0",label:"Mistral Large 24.02 (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:8192}];_parseAndValidateConfig(e){let n;try{n=JSON.parse(e)}catch{throw new Error("Invalid AWS Bedrock configuration format. Please provide a valid JSON string containing region, accessKeyId, and secretAccessKey.")}const{region:r,accessKeyId:s,secretAccessKey:i,sessionToken:o}=n;if(!r||!s||!i)throw new Error("Missing required AWS credentials. Configuration must include region, accessKeyId, and secretAccessKey.");return{region:r,accessKeyId:s,secretAccessKey:i,...o&&{sessionToken:o}}}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"AWS_BEDROCK_CONFIG"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);const a=this._parseAndValidateConfig(o);return wre(a)(n)}}class vDe extends ys{name="Github";getApiKeyLink="https://github.com/settings/personal-access-tokens";config={apiTokenKey:"GITHUB_API_KEY"};staticModels=[{name:"gpt-4o",label:"GPT-4o",provider:"Github",maxTokenAllowed:8e3},{name:"o1",label:"o1-preview",provider:"Github",maxTokenAllowed:1e5},{name:"o1-mini",label:"o1-mini",provider:"Github",maxTokenAllowed:8e3},{name:"gpt-4o-mini",label:"GPT-4o Mini",provider:"Github",maxTokenAllowed:8e3},{name:"gpt-4-turbo",label:"GPT-4 Turbo",provider:"Github",maxTokenAllowed:8e3},{name:"gpt-4",label:"GPT-4",provider:"Github",maxTokenAllowed:8e3},{name:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",provider:"Github",maxTokenAllowed:8e3}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"GITHUB_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Fc({baseURL:"https://models.inference.ai.azure.com",apiKey:o})(n)}}const wDe=Object.freeze(Object.defineProperty({__proto__:null,AmazonBedrockProvider:yDe,AnthropicProvider:FCe,CohereProvider:_Ae,DeepseekProvider:ETe,GithubProvider:vDe,GoogleProvider:f5e,GroqProvider:p5e,HuggingFaceProvider:m5e,HyperbolicProvider:PPe,LMStudioProvider:g5e,MistralProvider:i3e,OllamaProvider:q3e,OpenAILikeProvider:EPe,OpenAIProvider:kPe,OpenRouterProvider:SPe,PerplexityProvider:CPe,TogetherProvider:APe,XAIProvider:TPe},Symbol.toStringTag,{value:"Module"})),Bl=po("LLMManager");class Cf{static _instance;_providers=new Map;_modelList=[];_env={};constructor(e){this._registerProvidersFromDirectory(),this._env=e}static getInstance(e={}){return Cf._instance||(Cf._instance=new Cf(e)),Cf._instance}get env(){return this._env}async _registerProvidersFromDirectory(){try{for(const e of Object.values(wDe))if(typeof e=="function"&&e.prototype instanceof ys){const n=new e;try{this.registerProvider(n)}catch(r){Bl.warn("Failed To Register Provider: ",n.name,"error:",r.message)}}}catch(e){Bl.error("Error registering providers:",e)}}registerProvider(e){if(this._providers.has(e.name)){Bl.warn(`Provider ${e.name} is already registered. Skipping.`);return}Bl.info("Registering Provider: ",e.name),this._providers.set(e.name,e),this._modelList=[...this._modelList,...e.staticModels]}getProvider(e){return this._providers.get(e)}getAllProviders(){return Array.from(this._providers.values())}getModelList(){return this._modelList}async updateModelList(e){const{apiKeys:n,providerSettings:r,serverEnv:s}=e;let i=Array.from(this._providers.values()).map(h=>h.name);r&&Object.keys(r).length>0&&(i=i.filter(h=>r[h].enabled));const o=await Promise.all(Array.from(this._providers.values()).filter(h=>i.includes(h.name)).filter(h=>!!h.getDynamicModels).map(async h=>{const f=h.getModelsFromCache(e);return f||await h.getDynamicModels(n,r?.[h.name],s).then(m=>(Bl.info(`Caching ${m.length} dynamic models for ${h.name}`),h.storeDynamicModels(e,m),m)).catch(m=>(Bl.error(`Error getting dynamic models ${h.name} :`,m),[]))})),a=Array.from(this._providers.values()).flatMap(h=>h.staticModels||[]),l=o.flat(),c=l.map(h=>`${h.name}-${h.provider}`),u=a.filter(h=>!c.includes(`${h.name}-${h.provider}`)),d=[...l,...u];return d.sort((h,f)=>h.name.localeCompare(f.name)),this._modelList=d,d}getStaticModelList(){return[...this._providers.values()].flatMap(e=>e.staticModels||[])}async getModelListFromProvider(e,n){const r=this._providers.get(e.name);if(!r)throw new Error(`Provider ${e.name} not found`);const s=r.staticModels||[];if(!r.getDynamicModels)return s;const{apiKeys:i,providerSettings:o,serverEnv:a}=n,l=r.getModelsFromCache({apiKeys:i,providerSettings:o,serverEnv:a});if(l)return Bl.info(`Found ${l.length} cached models for ${r.name}`),[...l,...s];Bl.info(`Getting dynamic models for ${r.name}`);const c=await r.getDynamicModels?.(i,o?.[r.name],a).then(f=>(Bl.info(`Got ${f.length} dynamic models for ${r.name}`),r.storeDynamicModels(n,f),f)).catch(f=>(Bl.error(`Error getting dynamic models ${r.name} :`,f),[])),u=c.map(f=>f.name),d=s.filter(f=>!u.includes(f.name)),h=[...c,...d];return h.sort((f,p)=>f.name.localeCompare(p.name)),h}getStaticModelListFromProvider(e){const n=this._providers.get(e.name);if(!n)throw new Error(`Provider ${e.name} not found`);return[...n.staticModels||[]]}getDefaultProvider(){const e=this._providers.values().next().value;if(!e)throw new Error("No providers registered");return e}}const xDe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},xre="project",Hu=`/home/${xre}`,_De=/^\[Model: (.*?)\]\n\n/,SDe=/\[Provider: (.*?)\]\n\n/,EDe="claude-3-5-sonnet-latest",uy="cachedPrompt",_re=Cf.getInstance(xDe),AA=_re.getAllProviders(),kDe=_re.getDefaultProvider(),L6={};AA.forEach(t=>{L6[t.name]={baseUrlKey:t.config.baseUrlKey,apiTokenKey:t.config.apiTokenKey}});const hk=[{name:"bolt-astro-basic",label:"Astro Basic",description:"Lightweight Astro starter template for building fast static websites",githubRepo:"thecodacus/bolt-astro-basic-template",tags:["astro","blog","performance"],icon:"i-bolt:astro"},{name:"bolt-nextjs-shadcn",label:"Next.js with shadcn/ui",description:"Next.js starter fullstack template integrated with shadcn/ui components and styling system",githubRepo:"thecodacus/bolt-nextjs-shadcn-template",tags:["nextjs","react","typescript","shadcn","tailwind"],icon:"i-bolt:nextjs"},{name:"bolt-qwik-ts",label:"Qwik TypeScript",description:"Qwik framework starter with TypeScript for building resumable applications",githubRepo:"thecodacus/bolt-qwik-ts-template",tags:["qwik","typescript","performance","resumable"],icon:"i-bolt:qwik"},{name:"bolt-remix-ts",label:"Remix TypeScript",description:"Remix framework starter with TypeScript for full-stack web applications",githubRepo:"thecodacus/bolt-remix-ts-template",tags:["remix","typescript","fullstack","react"],icon:"i-bolt:remix"},{name:"bolt-slidev",label:"Slidev Presentation",description:"Slidev starter template for creating developer-friendly presentations using Markdown",githubRepo:"thecodacus/bolt-slidev-template",tags:["slidev","presentation","markdown"],icon:"i-bolt:slidev"},{name:"bolt-sveltekit",label:"SvelteKit",description:"SvelteKit starter template for building fast, efficient web applications",githubRepo:"bolt-sveltekit-template",tags:["svelte","sveltekit","typescript"],icon:"i-bolt:svelte"},{name:"vanilla-vite",label:"Vanilla + Vite",description:"Minimal Vite starter template for vanilla JavaScript projects",githubRepo:"thecodacus/vanilla-vite-template",tags:["vite","vanilla-js","minimal"],icon:"i-bolt:vite"},{name:"bolt-vite-react",label:"React + Vite + typescript",description:"React starter template powered by Vite for fast development experience",githubRepo:"thecodacus/bolt-vite-react-ts-template",tags:["react","vite","frontend"],icon:"i-bolt:react"},{name:"bolt-vite-ts",label:"Vite + TypeScript",description:"Vite starter template with TypeScript configuration for type-safe development",githubRepo:"thecodacus/bolt-vite-ts-template",tags:["vite","typescript","minimal"],icon:"i-bolt:typescript"},{name:"bolt-vue",label:"Vue.js",description:"Vue.js starter template with modern tooling and best practices",githubRepo:"thecodacus/bolt-vue-template",tags:["vue","typescript","frontend"],icon:"i-bolt:vue"},{name:"bolt-angular",label:"Angular Starter",description:"A modern Angular starter template with TypeScript support and best practices configuration",githubRepo:"thecodacus/bolt-angular-template",tags:["angular","typescript","frontend","spa"],icon:"i-bolt:angular"}],CDe={profile:"i-ph:user-circle-fill",settings:"i-ph:gear-six-fill",notifications:"i-ph:bell-fill",features:"i-ph:star-fill",data:"i-ph:database-fill","cloud-providers":"i-ph:cloud-fill","local-providers":"i-ph:desktop-fill","service-status":"i-ph:activity-bold",connection:"i-ph:wifi-high-fill",debug:"i-ph:bug-fill","event-logs":"i-ph:list-bullets-fill",update:"i-ph:arrow-clockwise-fill","task-manager":"i-ph:chart-line-fill","tab-management":"i-ph:squares-four-fill"},kv={profile:"Profile",settings:"Settings",notifications:"Notifications",features:"Features",data:"Data Management","cloud-providers":"Cloud Providers","local-providers":"Local Providers","service-status":"Service Status",connection:"Connection",debug:"Debug","event-logs":"Event Logs",update:"Updates","task-manager":"Task Manager","tab-management":"Tab Management"},d0=[{id:"features",visible:!0,window:"user",order:0},{id:"data",visible:!0,window:"user",order:1},{id:"cloud-providers",visible:!0,window:"user",order:2},{id:"local-providers",visible:!0,window:"user",order:3},{id:"connection",visible:!0,window:"user",order:4},{id:"notifications",visible:!0,window:"user",order:5},{id:"event-logs",visible:!0,window:"user",order:6},{id:"profile",visible:!1,window:"user",order:7},{id:"settings",visible:!1,window:"user",order:8},{id:"task-manager",visible:!1,window:"user",order:9},{id:"service-status",visible:!1,window:"user",order:10},{id:"debug",visible:!1,window:"user",order:11},{id:"update",visible:!1,window:"user",order:12},{id:"features",visible:!0,window:"developer",order:0},{id:"data",visible:!0,window:"developer",order:1},{id:"cloud-providers",visible:!0,window:"developer",order:2},{id:"local-providers",visible:!0,window:"developer",order:3},{id:"connection",visible:!0,window:"developer",order:4},{id:"notifications",visible:!0,window:"developer",order:5},{id:"event-logs",visible:!0,window:"developer",order:6},{id:"profile",visible:!0,window:"developer",order:7},{id:"settings",visible:!0,window:"developer",order:8},{id:"task-manager",visible:!0,window:"developer",order:9},{id:"service-status",visible:!0,window:"developer",order:10},{id:"debug",visible:!0,window:"developer",order:11},{id:"update",visible:!0,window:"developer",order:12}],o9=t=>{let e;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,s,a);return a},ADe=t=>t?o9(t):o9,TDe=t=>t;function Sre(t,e=TDe){const n=ht.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return ht.useDebugValue(n),n}const a9=t=>{const e=ADe(t),n=r=>Sre(e,r);return Object.assign(n,e),n},Ere=t=>t?a9(t):a9,Cv=["Ollama","LMStudio","OpenAILike"],D6=["OpenAILike","LMStudio","Ollama"],PDe=Ph({toggleTheme:{key:"d",metaKey:!0,altKey:!0,shiftKey:!0,action:()=>hY(),description:"Toggle theme",isPreventDefault:!0},toggleTerminal:{key:"`",ctrlOrMetaKey:!0,action:()=>{},description:"Toggle terminal",isPreventDefault:!0}}),kre="provider_settings",I1=typeof window<"u",NDe=()=>{const t={};if(AA.forEach(e=>{t[e.name]={...e,settings:{enabled:!D6.includes(e.name)}}}),I1){const e=localStorage.getItem(kre);if(e)try{const n=JSON.parse(e);Object.entries(n).forEach(([r,s])=>{t[r]&&(t[r].settings=s.settings)})}catch(n){console.error("Error parsing saved provider settings:",n)}}return t},Av=Ph(NDe()),IDe=(t,e)=>{const n=Av.get(),r={...n[t],settings:{...n[t].settings,...e}};Av.setKey(t,r);const s=Av.get();localStorage.setItem(kre,JSON.stringify(s))},l9=yr(!1),fa={LATEST_BRANCH:"isLatestBranch",AUTO_SELECT_TEMPLATE:"autoSelectTemplate",CONTEXT_OPTIMIZATION:"contextOptimizationEnabled",EVENT_LOGS:"isEventLogsEnabled",PROMPT_ID:"promptId",DEVELOPER_MODE:"isDeveloperMode"},RDe=()=>{const t=(e,n)=>{if(!I1)return n;const r=localStorage.getItem(e);if(r===null)return n;try{return JSON.parse(r)}catch{return n}};return{latestBranch:t(fa.LATEST_BRANCH,!1),autoSelectTemplate:t(fa.AUTO_SELECT_TEMPLATE,!0),contextOptimization:t(fa.CONTEXT_OPTIMIZATION,!0),eventLogs:t(fa.EVENT_LOGS,!0),promptId:I1&&localStorage.getItem(fa.PROMPT_ID)||"default",developerMode:t(fa.DEVELOPER_MODE,!1)}},X0=RDe(),Cre=yr(X0.latestBranch),Are=yr(X0.autoSelectTemplate),Tre=yr(X0.contextOptimization),Pre=yr(X0.eventLogs),Nre=yr(X0.promptId),ODe=t=>{Cre.set(t),localStorage.setItem(fa.LATEST_BRANCH,JSON.stringify(t))},LDe=t=>{Are.set(t),localStorage.setItem(fa.AUTO_SELECT_TEMPLATE,JSON.stringify(t))},DDe=t=>{Tre.set(t),localStorage.setItem(fa.CONTEXT_OPTIMIZATION,JSON.stringify(t))},MDe=t=>{Pre.set(t),localStorage.setItem(fa.EVENT_LOGS,JSON.stringify(t))},jDe=t=>{Nre.set(t),localStorage.setItem(fa.PROMPT_ID,t)},FDe=()=>{const t={userTabs:d0.filter(e=>e.window==="user"),developerTabs:d0.filter(e=>e.window==="developer")};if(!I1)return t;try{const e=localStorage.getItem("bolt_tab_configuration");if(!e)return t;const n=JSON.parse(e);return!n?.userTabs||!n?.developerTabs?t:{userTabs:n.userTabs.filter(r=>r.window==="user"),developerTabs:n.developerTabs.filter(r=>r.window==="developer")}}catch(e){return console.warn("Failed to parse tab configuration:",e),t}},Zd=Ph(FDe()),BDe=t=>{const e=Zd.get();console.log("Current tab configuration before update:",e);const r=t.window==="user"?"userTabs":"developerTabs",s=e[r].map(o=>o.id===t.id?{...t}:o);s.find(o=>o.id===t.id)||s.push(t);const i={...e,[r]:s};console.log("New tab configuration after update:",i),Zd.set(i),Zn.set("tabConfiguration",JSON.stringify(i),{expires:365,path:"/",sameSite:"strict"})},Ire=()=>{const t={userTabs:d0.filter(e=>e.window==="user"),developerTabs:d0.filter(e=>e.window==="developer")};Zd.set(t),localStorage.setItem("bolt_tab_configuration",JSON.stringify(t))},Rre=yr(X0.developerMode),$De=t=>{Rre.set(t),I1&&localStorage.setItem(fa.DEVELOPER_MODE,JSON.stringify(t))},UDe=Ere(t=>({isOpen:!1,selectedTab:"user",openSettings:()=>{t({isOpen:!0,selectedTab:"user"})},closeSettings:()=>{t({isOpen:!1,selectedTab:"user"})},setSelectedTab:e=>{t({selectedTab:e})}}));var Ore={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c9=ht.createContext&&ht.createContext(Ore),HDe=["attr","size","title"];function zDe(t,e){if(t==null)return{};var n=VDe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VDe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fk(){return fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fk.apply(this,arguments)}function u9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u9(Object(n),!0).forEach(function(r){WDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WDe(t,e,n){return e=GDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GDe(t){var e=qDe(t,"string");return typeof e=="symbol"?e:e+""}function qDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lre(t){return t&&t.map((e,n)=>ht.createElement(e.tag,pk({key:n},e.attr),Lre(e.child)))}function vs(t){return e=>ht.createElement(KDe,fk({attr:pk({},t.attr)},e),Lre(t.child))}function KDe(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=zDe(t,HDe),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ht.createElement("svg",fk({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:pk(pk({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&ht.createElement("title",null,i),t.children)};return c9!==void 0?ht.createElement(c9.Consumer,null,n=>e(n)):e(Ore)}function YDe(t){return vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12h4.5l1.5 -6l4 12l2 -9l1.5 3h4.5"},child:[]}]})(t)}function Dre(t){return vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"},child:[]},{tag:"path",attr:{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"},child:[]},{tag:"path",attr:{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"},child:[]},{tag:"path",attr:{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"},child:[]},{tag:"path",attr:{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"},child:[]},{tag:"path",attr:{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"},child:[]}]})(t)}function JDe(t){return vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"},child:[]},{tag:"path",attr:{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"},child:[]},{tag:"path",attr:{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"},child:[]},{tag:"path",attr:{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"},child:[]},{tag:"path",attr:{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"},child:[]},{tag:"path",attr:{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"},child:[]}]})(t)}function Mre(t){return vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6.657 16c-2.572 0 -4.657 -2.007 -4.657 -4.483c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.913 0 3.464 1.56 3.464 3.486c0 1.927 -1.551 3.487 -3.465 3.487h-11.878"},child:[]},{tag:"path",attr:{d:"M12 16v5"},child:[]},{tag:"path",attr:{d:"M16 16v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M8 16v4a1 1 0 0 1 -1 1h-4"},child:[]}]})(t)}function XDe(t){return vs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]}]})(t)}const d9={profile:"i-ph:user-circle-fill",settings:"i-ph:gear-six-fill",notifications:"i-ph:bell-fill",features:"i-ph:star-fill",data:"i-ph:database-fill","cloud-providers":"i-ph:cloud-fill","local-providers":"i-ph:desktop-fill","service-status":"i-ph:activity-fill",connection:"i-ph:wifi-high-fill",debug:"i-ph:bug-fill","event-logs":"i-ph:list-bullets-fill",update:"i-ph:arrow-clockwise-fill","task-manager":"i-ph:chart-line-fill","tab-management":"i-ph:squares-four-fill"},Cd=["features","data","cloud-providers","local-providers","connection","notifications","event-logs"],Ad=["profile","settings","task-manager","service-status","debug","update"],ZDe=[...Cd,...Ad],h9=new Set(["task-manager","service-status","update","local-providers"]),f9=()=>y.jsx("span",{className:"px-1.5 py-0.5 text-[10px] rounded-full bg-purple-500/10 text-purple-500 font-medium",children:"BETA"}),p9=()=>{const[t,e]=N.useState(""),n=Bt(Zd),{setSelectedTab:r}=UDe(),s=(l,c)=>{if(!n.userTabs.find(f=>f.id===l)){const f={id:l,visible:c,window:"user",order:n.userTabs.length},p=[...n.userTabs,f];Zd.set({...n,userTabs:p}),Ve.success(`Tab ${c?"enabled":"disabled"} successfully`);return}if(!(Cd.includes(l)||Ad.includes(l))&&c){Ve.error("This tab cannot be enabled in user mode");return}const h=n.userTabs.map(f=>f.id===l?{...f,visible:c}:f);Zd.set({...n,userTabs:h}),Ve.success(`Tab ${c?"enabled":"disabled"} successfully`)},i=new Map(n.userTabs.map(l=>[l.id,l])),a=ZDe.map(l=>i.get(l)||{id:l,visible:!1,window:"user",order:-1}).filter(l=>kv[l.id].toLowerCase().includes(t.toLowerCase()));return N.useEffect(()=>()=>{r("user")},[r]),y.jsx("div",{className:"space-y-6",children:y.jsxs(lt.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[y.jsxs("div",{className:"flex items-center justify-between gap-4 mt-8 mb-4",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:Ne("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3","text-purple-500"),children:y.jsx(XDe,{className:"w-5 h-5"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary",children:"Tab Management"}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Configure visible tabs and their order"})]})]}),y.jsxs("div",{className:"relative w-64",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx("div",{className:"i-ph:magnifying-glass w-4 h-4 text-gray-400"})}),y.jsx("input",{type:"text",value:t,onChange:l=>e(l.target.value),placeholder:"Search tabs...",className:Ne("w-full pl-10 pr-4 py-2 rounded-lg","bg-bolt-elements-background-depth-2","border border-bolt-elements-borderColor","text-bolt-elements-textPrimary","placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200")})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.some(l=>Cd.includes(l.id))&&y.jsxs("div",{className:"col-span-full flex items-center gap-2 mt-4 mb-2",children:[y.jsx("div",{className:"i-ph:star-fill w-4 h-4 text-purple-500"}),y.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Default Tabs"})]}),a.filter(l=>Cd.includes(l.id)).map((l,c)=>y.jsxs(lt.div,{className:Ne("rounded-lg border bg-bolt-elements-background text-bolt-elements-textPrimary","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},whileHover:{scale:1.02},children:[y.jsx("div",{className:"absolute top-1 right-1.5 flex gap-1",children:y.jsx("span",{className:"px-1.5 py-0.25 text-xs rounded-full bg-purple-500/10 text-purple-500 font-medium mr-2",children:"Default"})}),y.jsxs("div",{className:"flex items-start gap-4 p-4",children:[y.jsx(lt.div,{className:Ne("w-10 h-10 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-all duration-200",l.visible?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1},whileTap:{scale:.9},children:y.jsx("div",{className:Ne("w-6 h-6","transition-transform duration-200","group-hover:rotate-12"),children:y.jsx("div",{className:Ne(d9[l.id],"w-full h-full")})})}),y.jsx("div",{className:"flex-1 min-w-0",children:y.jsxs("div",{className:"flex items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-purple-500 transition-colors",children:kv[l.id]}),h9.has(l.id)&&y.jsx(f9,{})]}),y.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:l.visible?"Visible in user mode":"Hidden in user mode"})]}),y.jsx(ka,{checked:l.visible,onCheckedChange:u=>{!Cd.includes(l.id)&&!Ad.includes(l.id)||s(l.id,u)},className:Ne("data-[state=checked]:bg-purple-500 ml-4",{"opacity-50 pointer-events-none":!Cd.includes(l.id)&&!Ad.includes(l.id)})})]})})]}),y.jsx(lt.div,{className:"absolute inset-0 border-2 border-purple-500/0 rounded-lg pointer-events-none",animate:{borderColor:l.visible?"rgba(168, 85, 247, 0.2)":"rgba(168, 85, 247, 0)",scale:l.visible?1:.98},transition:{duration:.2}})]},l.id)),a.some(l=>Ad.includes(l.id))&&y.jsxs("div",{className:"col-span-full flex items-center gap-2 mt-8 mb-2",children:[y.jsx("div",{className:"i-ph:plus-circle-fill w-4 h-4 text-blue-500"}),y.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Optional Tabs"})]}),a.filter(l=>Ad.includes(l.id)).map((l,c)=>y.jsxs(lt.div,{className:Ne("rounded-lg border bg-bolt-elements-background text-bolt-elements-textPrimary","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},whileHover:{scale:1.02},children:[y.jsx("div",{className:"absolute top-1 right-1.5 flex gap-1",children:y.jsx("span",{className:"px-1.5 py-0.25 text-xs rounded-full bg-blue-500/10 text-blue-500 font-medium mr-2",children:"Optional"})}),y.jsxs("div",{className:"flex items-start gap-4 p-4",children:[y.jsx(lt.div,{className:Ne("w-10 h-10 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-all duration-200",l.visible?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1},whileTap:{scale:.9},children:y.jsx("div",{className:Ne("w-6 h-6","transition-transform duration-200","group-hover:rotate-12"),children:y.jsx("div",{className:Ne(d9[l.id],"w-full h-full")})})}),y.jsx("div",{className:"flex-1 min-w-0",children:y.jsxs("div",{className:"flex items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-purple-500 transition-colors",children:kv[l.id]}),h9.has(l.id)&&y.jsx(f9,{})]}),y.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:l.visible?"Visible in user mode":"Hidden in user mode"})]}),y.jsx(ka,{checked:l.visible,onCheckedChange:u=>{!Cd.includes(l.id)&&!Ad.includes(l.id)||s(l.id,u)},className:Ne("data-[state=checked]:bg-purple-500 ml-4",{"opacity-50 pointer-events-none":!Cd.includes(l.id)&&!Ad.includes(l.id)})})]})})]}),y.jsx(lt.div,{className:"absolute inset-0 border-2 border-purple-500/0 rounded-lg pointer-events-none",animate:{borderColor:l.visible?"rgba(168, 85, 247, 0.2)":"rgba(168, 85, 247, 0)",scale:l.visible?1:.98},transition:{duration:.2}})]},l.id))]})]})})},QDe=["top","right","bottom","left"],zu=Math.min,ci=Math.max,R1=Math.round,s2=Math.floor,Ac=t=>({x:t,y:t}),e6e={left:"right",right:"left",bottom:"top",top:"bottom"},t6e={start:"end",end:"start"};function nR(t,e,n){return ci(t,zu(e,n))}function Lc(t,e){return typeof t=="function"?t(e):t}function Vu(t){return t.split("-")[0]}function Z0(t){return t.split("-")[1]}function M6(t){return t==="x"?"y":"x"}function j6(t){return t==="y"?"height":"width"}function fh(t){return["top","bottom"].includes(Vu(t))?"y":"x"}function F6(t){return M6(fh(t))}function n6e(t,e,n){n===void 0&&(n=!1);const r=Z0(t),s=F6(t),i=j6(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=mk(o)),[o,mk(o)]}function r6e(t){const e=mk(t);return[rR(t),e,rR(e)]}function rR(t){return t.replace(/start|end/g,e=>t6e[e])}function s6e(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function i6e(t,e,n,r){const s=Z0(t);let i=s6e(Vu(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(rR)))),i}function mk(t){return t.replace(/left|right|bottom|top/g,e=>e6e[e])}function o6e(t){return{top:0,right:0,bottom:0,left:0,...t}}function jre(t){return typeof t!="number"?o6e(t):{top:t,right:t,bottom:t,left:t}}function gk(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function m9(t,e,n){let{reference:r,floating:s}=t;const i=fh(e),o=F6(e),a=j6(o),l=Vu(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-s.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-s.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Z0(e)){case"start":f[o]-=h*(n&&c?-1:1);break;case"end":f[o]+=h*(n&&c?-1:1);break}return f}const a6e=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=m9(c,r,l),h=r,f={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:b}=a[m],{x:v,y:w,data:_,reset:S}=await b({x:u,y:d,initialPlacement:r,placement:h,strategy:s,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});u=v??u,d=w??d,f={...f,[g]:{...f[g],..._}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:u,y:d}=m9(c,h,l)),m=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:f}};async function h0(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Lc(e,t),p=jre(f),g=a[h?d==="floating"?"reference":"floating":d],b=gk(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},S=gk(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:l}):v);return{top:(b.top-S.top+p.top)/_.y,bottom:(S.bottom-b.bottom+p.bottom)/_.y,left:(b.left-S.left+p.left)/_.x,right:(S.right-b.right+p.right)/_.x}}const l6e=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Lc(t,e)||{};if(c==null)return{};const d=jre(u),h={x:n,y:r},f=F6(s),p=j6(f),m=await o.getDimensions(c),g=f==="y",b=g?"top":"left",v=g?"bottom":"right",w=g?"clientHeight":"clientWidth",_=i.reference[p]+i.reference[f]-h[f]-i.floating[p],S=h[f]-i.reference[f],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let k=E?E[w]:0;(!k||!await(o.isElement==null?void 0:o.isElement(E)))&&(k=a.floating[w]||i.floating[p]);const x=_/2-S/2,I=k/2-m[p]/2-1,R=zu(d[b],I),C=zu(d[v],I),T=R,O=k-m[p]-C,P=k/2-m[p]/2+x,U=nR(T,P,O),ee=!l.arrow&&Z0(s)!=null&&P!==U&&i.reference[p]/2-(P<T?R:C)-m[p]/2<0,X=ee?P<T?P-T:P-O:0;return{[f]:h[f]+X,data:{[f]:U,centerOffset:P-U-X,...ee&&{alignmentOffset:X}},reset:ee}}}),c6e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Lc(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=Vu(s),v=fh(a),w=Vu(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=h||(w||!m?[mk(a)]:r6e(a)),E=p!=="none";!h&&E&&S.push(...i6e(a,m,p,_));const k=[a,...S],x=await h0(e,g),I=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&I.push(x[b]),d){const P=n6e(s,o,_);I.push(x[P[0]],x[P[1]])}if(R=[...R,{placement:s,overflows:I}],!I.every(P=>P<=0)){var C,T;const P=(((C=i.flip)==null?void 0:C.index)||0)+1,U=k[P];if(U)return{data:{index:P,overflows:R},reset:{placement:U}};let ee=(T=R.filter(X=>X.overflows[0]<=0).sort((X,Z)=>X.overflows[1]-Z.overflows[1])[0])==null?void 0:T.placement;if(!ee)switch(f){case"bestFit":{var O;const X=(O=R.filter(Z=>{if(E){const F=fh(Z.placement);return F===v||F==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(F=>F>0).reduce((F,M)=>F+M,0)]).sort((Z,F)=>Z[1]-F[1])[0])==null?void 0:O[0];X&&(ee=X);break}case"initialPlacement":ee=a;break}if(s!==ee)return{reset:{placement:ee}}}return{}}}};function g9(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function b9(t){return QDe.some(e=>t[e]>=0)}const u6e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Lc(t,e);switch(r){case"referenceHidden":{const i=await h0(e,{...s,elementContext:"reference"}),o=g9(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:b9(o)}}}case"escaped":{const i=await h0(e,{...s,altBoundary:!0}),o=g9(i,n.floating);return{data:{escapedOffsets:o,escaped:b9(o)}}}default:return{}}}}};async function d6e(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Vu(n),a=Z0(n),l=fh(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,d=Lc(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const h6e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await d6e(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},f6e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:b,y:v}=g;return{x:b,y:v}}},...l}=Lc(t,e),c={x:n,y:r},u=await h0(e,l),d=fh(Vu(s)),h=M6(d);let f=c[h],p=c[d];if(i){const g=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=f+u[g],w=f-u[b];f=nR(v,f,w)}if(o){const g=d==="y"?"top":"left",b=d==="y"?"bottom":"right",v=p+u[g],w=p-u[b];p=nR(v,p,w)}const m=a.fn({...e,[h]:f,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:i,[d]:o}}}}}},p6e=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Lc(t,e),u={x:n,y:r},d=fh(s),h=M6(d);let f=u[h],p=u[d];const m=Lc(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=h==="y"?"height":"width",_=i.reference[h]-i.floating[w]+g.mainAxis,S=i.reference[h]+i.reference[w]-g.mainAxis;f<_?f=_:f>S&&(f=S)}if(c){var b,v;const w=h==="y"?"width":"height",_=["top","left"].includes(Vu(s)),S=i.reference[d]-i.floating[w]+(_&&((b=o.offset)==null?void 0:b[d])||0)+(_?0:g.crossAxis),E=i.reference[d]+i.reference[w]+(_?0:((v=o.offset)==null?void 0:v[d])||0)-(_?g.crossAxis:0);p<S?p=S:p>E&&(p=E)}return{[h]:f,[d]:p}}}},m6e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Lc(t,e),u=await h0(e,c),d=Vu(s),h=Z0(s),f=fh(s)==="y",{width:p,height:m}=i.floating;let g,b;d==="top"||d==="bottom"?(g=d,b=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=d,g=h==="end"?"top":"bottom");const v=m-u.top-u.bottom,w=p-u.left-u.right,_=zu(m-u[g],v),S=zu(p-u[b],w),E=!e.middlewareData.shift;let k=_,x=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(x=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=v),E&&!h){const R=ci(u.left,0),C=ci(u.right,0),T=ci(u.top,0),O=ci(u.bottom,0);f?x=p-2*(R!==0||C!==0?R+C:ci(u.left,u.right)):k=m-2*(T!==0||O!==0?T+O:ci(u.top,u.bottom))}await l({...e,availableWidth:x,availableHeight:k});const I=await o.getDimensions(a.floating);return p!==I.width||m!==I.height?{reset:{rects:!0}}:{}}}};function TA(){return typeof window<"u"}function Q0(t){return Fre(t)?(t.nodeName||"").toLowerCase():"#document"}function Vo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Bc(t){var e;return(e=(Fre(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Fre(t){return TA()?t instanceof Node||t instanceof Vo(t).Node:!1}function Oi(t){return TA()?t instanceof Element||t instanceof Vo(t).Element:!1}function Dc(t){return TA()?t instanceof HTMLElement||t instanceof Vo(t).HTMLElement:!1}function y9(t){return!TA()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Vo(t).ShadowRoot}function $w(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ml(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function g6e(t){return["table","td","th"].includes(Q0(t))}function PA(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function B6(t){const e=$6(),n=Oi(t)?ml(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function b6e(t){let e=ph(t);for(;Dc(e)&&!f0(e);){if(B6(e))return e;if(PA(e))return null;e=ph(e)}return null}function $6(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function f0(t){return["html","body","#document"].includes(Q0(t))}function ml(t){return Vo(t).getComputedStyle(t)}function NA(t){return Oi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ph(t){if(Q0(t)==="html")return t;const e=t.assignedSlot||t.parentNode||y9(t)&&t.host||Bc(t);return y9(e)?e.host:e}function Bre(t){const e=ph(t);return f0(e)?t.ownerDocument?t.ownerDocument.body:t.body:Dc(e)&&$w(e)?e:Bre(e)}function O1(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Bre(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Vo(s);if(i){const a=sR(o);return e.concat(o,o.visualViewport||[],$w(s)?s:[],a&&n?O1(a):[])}return e.concat(s,O1(s,[],n))}function sR(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function $re(t){const e=ml(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Dc(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=R1(n)!==i||R1(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function U6(t){return Oi(t)?t:t.contextElement}function Eg(t){const e=U6(t);if(!Dc(e))return Ac(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=$re(e);let o=(i?R1(n.width):n.width)/r,a=(i?R1(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const y6e=Ac(0);function Ure(t){const e=Vo(t);return!$6()||!e.visualViewport?y6e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function v6e(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Vo(t)?!1:e}function pp(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=U6(t);let o=Ac(1);e&&(r?Oi(r)&&(o=Eg(r)):o=Eg(t));const a=v6e(i,n,r)?Ure(i):Ac(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const h=Vo(i),f=r&&Oi(r)?Vo(r):r;let p=h,m=sR(p);for(;m&&r&&f!==p;){const g=Eg(m),b=m.getBoundingClientRect(),v=ml(m),w=b.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,_=b.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,d*=g.y,l+=w,c+=_,p=Vo(m),m=sR(p)}}return gk({width:u,height:d,x:l,y:c})}function H6(t,e){const n=NA(t).scrollLeft;return e?e.left+n:pp(Bc(t)).left+n}function Hre(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:H6(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function w6e(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Bc(r),a=e?PA(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Ac(1);const u=Ac(0),d=Dc(r);if((d||!d&&!i)&&((Q0(r)!=="body"||$w(o))&&(l=NA(r)),Dc(r))){const f=pp(r);c=Eg(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const h=o&&!d&&!i?Hre(o,l,!0):Ac(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function x6e(t){return Array.from(t.getClientRects())}function _6e(t){const e=Bc(t),n=NA(t),r=t.ownerDocument.body,s=ci(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ci(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+H6(t);const a=-n.scrollTop;return ml(r).direction==="rtl"&&(o+=ci(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function S6e(t,e){const n=Vo(t),r=Bc(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=$6();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function E6e(t,e){const n=pp(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Dc(t)?Eg(t):Ac(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function v9(t,e,n){let r;if(e==="viewport")r=S6e(t,n);else if(e==="document")r=_6e(Bc(t));else if(Oi(e))r=E6e(e,n);else{const s=Ure(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return gk(r)}function zre(t,e){const n=ph(t);return n===e||!Oi(n)||f0(n)?!1:ml(n).position==="fixed"||zre(n,e)}function k6e(t,e){const n=e.get(t);if(n)return n;let r=O1(t,[],!1).filter(a=>Oi(a)&&Q0(a)!=="body"),s=null;const i=ml(t).position==="fixed";let o=i?ph(t):t;for(;Oi(o)&&!f0(o);){const a=ml(o),l=B6(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||$w(o)&&!l&&zre(t,o))?r=r.filter(u=>u!==o):s=a,o=ph(o)}return e.set(t,r),r}function C6e(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?PA(e)?[]:k6e(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=v9(e,u,s);return c.top=ci(d.top,c.top),c.right=zu(d.right,c.right),c.bottom=zu(d.bottom,c.bottom),c.left=ci(d.left,c.left),c},v9(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function A6e(t){const{width:e,height:n}=$re(t);return{width:e,height:n}}function T6e(t,e,n){const r=Dc(e),s=Bc(e),i=n==="fixed",o=pp(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ac(0);if(r||!r&&!i)if((Q0(e)!=="body"||$w(s))&&(a=NA(e)),r){const h=pp(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&(l.x=H6(s));const c=s&&!r&&!i?Hre(s,a):Ac(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function O3(t){return ml(t).position==="static"}function w9(t,e){if(!Dc(t)||ml(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Bc(t)===n&&(n=n.ownerDocument.body),n}function Vre(t,e){const n=Vo(t);if(PA(t))return n;if(!Dc(t)){let s=ph(t);for(;s&&!f0(s);){if(Oi(s)&&!O3(s))return s;s=ph(s)}return n}let r=w9(t,e);for(;r&&g6e(r)&&O3(r);)r=w9(r,e);return r&&f0(r)&&O3(r)&&!B6(r)?n:r||b6e(t)||n}const P6e=async function(t){const e=this.getOffsetParent||Vre,n=this.getDimensions,r=await n(t.floating);return{reference:T6e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function N6e(t){return ml(t).direction==="rtl"}const I6e={convertOffsetParentRelativeRectToViewportRelativeRect:w6e,getDocumentElement:Bc,getClippingRect:C6e,getOffsetParent:Vre,getElementRects:P6e,getClientRects:x6e,getDimensions:A6e,getScale:Eg,isElement:Oi,isRTL:N6e};function Wre(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function R6e(t,e){let n=null,r;const s=Bc(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(a||e(),!h||!f)return;const p=s2(d),m=s2(s.clientWidth-(u+h)),g=s2(s.clientHeight-(d+f)),b=s2(u),w={rootMargin:-p+"px "+-m+"px "+-g+"px "+-b+"px",threshold:ci(0,zu(1,l))||1};let _=!0;function S(E){const k=E[0].intersectionRatio;if(k!==l){if(!_)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!Wre(c,t.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(S,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(t)}return o(!0),i}function Gre(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=U6(t),u=s||i?[...c?O1(c):[],...O1(e)]:[];u.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const d=c&&a?R6e(c,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(b=>{let[v]=b;v&&v.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let p,m=l?pp(t):null;l&&g();function g(){const b=pp(t);m&&!Wre(m,b)&&n(),m=b,p=requestAnimationFrame(g)}return n(),()=>{var b;u.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),d?.(),(b=f)==null||b.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const L3=h0,O6e=h6e,L6e=f6e,D6e=c6e,M6e=m6e,j6e=u6e,x9=l6e,F6e=p6e,B6e=(t,e,n)=>{const r=new Map,s={platform:I6e,...n},i={...s.platform,_c:r};return a6e(t,e,{...s,platform:i})};var MS=typeof document<"u"?N.useLayoutEffect:N.useEffect;function bk(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!bk(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!bk(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function qre(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _9(t,e){const n=qre(t);return Math.round(e*n)/n}function D3(t){const e=N.useRef(t);return MS(()=>{e.current=t}),e}function Kre(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=N.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=N.useState(r);bk(h,r)||f(r);const[p,m]=N.useState(null),[g,b]=N.useState(null),v=N.useCallback(Z=>{Z!==E.current&&(E.current=Z,m(Z))},[]),w=N.useCallback(Z=>{Z!==k.current&&(k.current=Z,b(Z))},[]),_=i||p,S=o||g,E=N.useRef(null),k=N.useRef(null),x=N.useRef(u),I=l!=null,R=D3(l),C=D3(s),T=D3(c),O=N.useCallback(()=>{if(!E.current||!k.current)return;const Z={placement:e,strategy:n,middleware:h};C.current&&(Z.platform=C.current),B6e(E.current,k.current,Z).then(F=>{const M={...F,isPositioned:T.current!==!1};P.current&&!bk(x.current,M)&&(x.current=M,Jg.flushSync(()=>{d(M)}))})},[h,e,n,C,T]);MS(()=>{c===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,d(Z=>({...Z,isPositioned:!1})))},[c]);const P=N.useRef(!1);MS(()=>(P.current=!0,()=>{P.current=!1}),[]),MS(()=>{if(_&&(E.current=_),S&&(k.current=S),_&&S){if(R.current)return R.current(_,S,O);O()}},[_,S,O,R,I]);const U=N.useMemo(()=>({reference:E,floating:k,setReference:v,setFloating:w}),[v,w]),ee=N.useMemo(()=>({reference:_,floating:S}),[_,S]),X=N.useMemo(()=>{const Z={position:n,left:0,top:0};if(!ee.floating)return Z;const F=_9(ee.floating,u.x),M=_9(ee.floating,u.y);return a?{...Z,transform:"translate("+F+"px, "+M+"px)",...qre(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:M}},[n,a,ee.floating,u.x,u.y]);return N.useMemo(()=>({...u,update:O,refs:U,elements:ee,floatingStyles:X}),[u,O,U,ee,X])}const $6e=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?x9({element:r.current,padding:s}).fn(n):{}:r?x9({element:r,padding:s}).fn(n):{}}}},z6=(t,e)=>({...O6e(t),options:[t,e]}),Yre=(t,e)=>({...L6e(t),options:[t,e]}),U6e=(t,e)=>({...F6e(t),options:[t,e]}),Jre=(t,e)=>({...D6e(t),options:[t,e]}),Xre=(t,e)=>({...M6e(t),options:[t,e]}),H6e=(t,e)=>({...j6e(t),options:[t,e]}),z6e=(t,e)=>({...$6e(t),options:[t,e]});var V6e="Arrow",Zre=N.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return y.jsx(En.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});Zre.displayName=V6e;var W6e=Zre,V6="Popper",[Qre,eb]=Fa(V6),[G6e,ese]=Qre(V6),tse=t=>{const{__scopePopper:e,children:n}=t,[r,s]=N.useState(null);return y.jsx(G6e,{scope:e,anchor:r,onAnchorChange:s,children:n})};tse.displayName=V6;var nse="PopperAnchor",rse=N.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=ese(nse,n),o=N.useRef(null),a=Jn(e,o);return N.useEffect(()=>{i.onAnchorChange(r?.current||o.current)}),r?null:y.jsx(En.div,{...s,ref:a})});rse.displayName=nse;var W6="PopperContent",[q6e,K6e]=Qre(W6),sse=N.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:p,...m}=t,g=ese(W6,n),[b,v]=N.useState(null),w=Jn(e,te=>v(te)),[_,S]=N.useState(null),E=LX(_),k=E?.width??0,x=E?.height??0,I=r+(i!=="center"?"-"+i:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},C=Array.isArray(c)?c:[c],T=C.length>0,O={padding:R,boundary:C.filter(J6e),altBoundary:T},{refs:P,floatingStyles:U,placement:ee,isPositioned:X,middlewareData:Z}=Kre({strategy:"fixed",placement:I,whileElementsMounted:(...te)=>Gre(...te,{animationFrame:f==="always"}),elements:{reference:g.anchor},middleware:[z6({mainAxis:s+x,alignmentAxis:o}),l&&Yre({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?U6e():void 0,...O}),l&&Jre({...O}),Xre({...O,apply:({elements:te,rects:Y,availableWidth:de,availableHeight:Se})=>{const{width:xe,height:Ae}=Y.reference,Pe=te.floating.style;Pe.setProperty("--radix-popper-available-width",`${de}px`),Pe.setProperty("--radix-popper-available-height",`${Se}px`),Pe.setProperty("--radix-popper-anchor-width",`${xe}px`),Pe.setProperty("--radix-popper-anchor-height",`${Ae}px`)}}),_&&z6e({element:_,padding:a}),X6e({arrowWidth:k,arrowHeight:x}),h&&H6e({strategy:"referenceHidden",...O})]}),[F,M]=ase(ee),G=ps(p);$u(()=>{X&&G?.()},[X,G]);const D=Z.arrow?.x,j=Z.arrow?.y,W=Z.arrow?.centerOffset!==0,[q,ne]=N.useState();return $u(()=>{b&&ne(window.getComputedStyle(b).zIndex)},[b]),y.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:X?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[Z.transformOrigin?.x,Z.transformOrigin?.y].join(" "),...Z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:y.jsx(q6e,{scope:n,placedSide:F,onArrowChange:S,arrowX:D,arrowY:j,shouldHideArrow:W,children:y.jsx(En.div,{"data-side":F,"data-align":M,...m,ref:w,style:{...m.style,animation:X?void 0:"none"}})})})});sse.displayName=W6;var ise="PopperArrow",Y6e={top:"bottom",right:"left",bottom:"top",left:"right"},ose=N.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=K6e(ise,r),o=Y6e[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(W6e,{...s,ref:n,style:{...s.style,display:"block"}})})});ose.displayName=ise;function J6e(t){return t!==null}var X6e=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:s}=e,o=s.arrow?.centerOffset!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=ase(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(s.arrow?.x??0)+a/2,f=(s.arrow?.y??0)+l/2;let p="",m="";return c==="bottom"?(p=o?d:`${h}px`,m=`${-l}px`):c==="top"?(p=o?d:`${h}px`,m=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,m=o?d:`${f}px`):c==="left"&&(p=`${r.floating.width+l}px`,m=o?d:`${f}px`),{data:{x:p,y:m}}}});function ase(t){const[e,n="center"]=t.split("-");return[e,n]}var G6=tse,IA=rse,q6=sse,K6=ose,Z6e="VisuallyHidden",lse=N.forwardRef((t,e)=>y.jsx(En.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));lse.displayName=Z6e;var Q6e=lse,[RA,$At]=Fa("Tooltip",[eb]),OA=eb(),cse="TooltipProvider",eMe=700,iR="tooltip.open",[tMe,Y6]=RA(cse),yk=t=>{const{__scopeTooltip:e,delayDuration:n=eMe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,[o,a]=N.useState(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),y.jsx(tMe,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};yk.displayName=cse;var LA="Tooltip",[nMe,Uw]=RA(LA),use=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=Y6(LA,t.__scopeTooltip),c=OA(e),[u,d]=N.useState(null),h=Lu(),f=N.useRef(0),p=o??l.disableHoverableContent,m=a??l.delayDuration,g=N.useRef(!1),[b=!1,v]=Lp({prop:r,defaultProp:s,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(iR))):l.onClose(),i?.(k)}}),w=N.useMemo(()=>b?g.current?"delayed-open":"instant-open":"closed",[b]),_=N.useCallback(()=>{window.clearTimeout(f.current),f.current=0,g.current=!1,v(!0)},[v]),S=N.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),E=N.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{g.current=!0,v(!0),f.current=0},m)},[m,v]);return N.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),y.jsx(G6,{...c,children:y.jsx(nMe,{scope:e,contentId:h,open:b,stateAttribute:w,trigger:u,onTriggerChange:d,onTriggerEnter:N.useCallback(()=>{l.isOpenDelayed?E():_()},[l.isOpenDelayed,E,_]),onTriggerLeave:N.useCallback(()=>{p?S():(window.clearTimeout(f.current),f.current=0)},[S,p]),onOpen:_,onClose:S,disableHoverableContent:p,children:n})})};use.displayName=LA;var oR="TooltipTrigger",dse=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Uw(oR,n),i=Y6(oR,n),o=OA(n),a=N.useRef(null),l=Jn(e,a,s.onTriggerChange),c=N.useRef(!1),u=N.useRef(!1),d=N.useCallback(()=>c.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),y.jsx(IA,{asChild:!0,...o,children:y.jsx(En.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Mt(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Mt(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Mt(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Mt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Mt(t.onBlur,s.onClose),onClick:Mt(t.onClick,s.onClose)})})});dse.displayName=oR;var J6="TooltipPortal",[rMe,sMe]=RA(J6,{forceMount:void 0}),hse=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=Uw(J6,e);return y.jsx(rMe,{scope:e,forceMount:n,children:y.jsx(Js,{present:n||i.open,children:y.jsx(jw,{asChild:!0,container:s,children:r})})})};hse.displayName=J6;var p0="TooltipContent",fse=N.forwardRef((t,e)=>{const n=sMe(p0,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Uw(p0,t.__scopeTooltip);return y.jsx(Js,{present:r||o.open,children:o.disableHoverableContent?y.jsx(pse,{side:s,...i,ref:e}):y.jsx(iMe,{side:s,...i,ref:e})})}),iMe=N.forwardRef((t,e)=>{const n=Uw(p0,t.__scopeTooltip),r=Y6(p0,t.__scopeTooltip),s=N.useRef(null),i=Jn(e,s),[o,a]=N.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:d}=r,h=N.useCallback(()=>{a(null),d(!1)},[d]),f=N.useCallback((p,m)=>{const g=p.currentTarget,b={x:p.clientX,y:p.clientY},v=lMe(b,g.getBoundingClientRect()),w=cMe(b,v),_=uMe(m.getBoundingClientRect()),S=hMe([...w,..._]);a(S),d(!0)},[d]);return N.useEffect(()=>()=>h(),[h]),N.useEffect(()=>{if(l&&u){const p=g=>f(g,u),m=g=>f(g,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",m)}}},[l,u,f,h]),N.useEffect(()=>{if(o){const p=m=>{const g=m.target,b={x:m.clientX,y:m.clientY},v=l?.contains(g)||u?.contains(g),w=!dMe(b,o);v?h():w&&(h(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,h]),y.jsx(pse,{...t,ref:i})}),[oMe,aMe]=RA(LA,{isInside:!1}),pse=N.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Uw(p0,n),c=OA(n),{onClose:u}=l;return N.useEffect(()=>(document.addEventListener(iR,u),()=>document.removeEventListener(iR,u)),[u]),N.useEffect(()=>{if(l.trigger){const d=h=>{h.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),y.jsx(Mw,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:y.jsxs(q6,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(rX,{children:r}),y.jsx(oMe,{scope:n,isInside:!0,children:y.jsx(Q6e,{id:l.contentId,role:"tooltip",children:s||r})})]})})});fse.displayName=p0;var mse="TooltipArrow",gse=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=OA(n);return aMe(mse,n).isInside?null:y.jsx(K6,{...s,...r,ref:e})});gse.displayName=mse;function lMe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function cMe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function uMe(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function dMe(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function hMe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),fMe(e)}function fMe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var X6=yk,Z6=use,Q6=dse,eM=hse,tM=fse,nM=gse;const pMe=({tab:t,onClick:e,isActive:n,hasUpdate:r,statusMessage:s,description:i,isLoading:o,className:a,children:l})=>y.jsx(X6,{delayDuration:200,children:y.jsx(Z6,{children:y.jsx(Q6,{asChild:!0,children:y.jsxs(lt.div,{onClick:e,className:Ne("relative flex flex-col items-center p-6 rounded-xl","w-full h-full min-h-[160px]","bg-white dark:bg-[#141414]","border border-[#E5E5E5] dark:border-[#333333]","group","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30",n?"border-purple-500 dark:border-purple-500/50 bg-purple-500/5 dark:bg-purple-500/10":"",o?"cursor-wait opacity-70":"",a||""),children:[y.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 w-full",children:[y.jsx(lt.div,{className:Ne("relative","w-14 h-14","flex items-center justify-center","rounded-xl","bg-gray-100 dark:bg-gray-800","ring-1 ring-gray-200 dark:ring-gray-700","group-hover:bg-purple-100 dark:group-hover:bg-gray-700/80","group-hover:ring-purple-200 dark:group-hover:ring-purple-800/30",n?"bg-purple-500/10 dark:bg-purple-500/10 ring-purple-500/30 dark:ring-purple-500/20":""),children:y.jsx(lt.div,{className:Ne(CDe[t.id],"w-8 h-8","text-gray-600 dark:text-gray-300","group-hover:text-purple-500 dark:group-hover:text-purple-400/80",n?"text-purple-500 dark:text-purple-400/90":"")})}),y.jsxs("div",{className:"flex flex-col items-center mt-5 w-full",children:[y.jsx("h3",{className:Ne("text-[15px] font-medium leading-snug mb-2","text-gray-700 dark:text-gray-200","group-hover:text-purple-600 dark:group-hover:text-purple-300/90",n?"text-purple-500 dark:text-purple-400/90":""),children:kv[t.id]}),i&&y.jsx("p",{className:Ne("text-[13px] leading-relaxed","text-gray-500 dark:text-gray-400","max-w-[85%]","text-center","group-hover:text-purple-500 dark:group-hover:text-purple-400/70",n?"text-purple-400 dark:text-purple-400/80":""),children:i})]})]}),r&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 rounded-full bg-purple-500 dark:bg-purple-400 animate-pulse"}),y.jsx(eM,{children:y.jsxs(tM,{className:Ne("px-3 py-1.5 rounded-lg","bg-[#18181B] text-white","text-sm font-medium","select-none","z-[100]"),side:"top",sideOffset:5,children:[s,y.jsx(nM,{className:"fill-[#18181B]"})]})})]}),l]})})})});function mMe(t,e){const n=t.replace(/^v/,""),r=e.replace(/^v/,""),s=n.split(".").map(Number),i=r.split(".").map(Number);for(let o=0;o<Math.max(s.length,i.length);o++){const a=s[o]||0,l=i[o]||0;if(a!==l)return a-l}return 0}const S9=async()=>{try{const t=await fetch("/package.json");if(!t.ok)throw new Error("Failed to fetch local package.json");const e=await t.json();if(!e.version||typeof e.version!="string")throw new Error("Invalid package.json format: missing or invalid version");const n=e.version,r=await fetch("https://raw.githubusercontent.com/stackblitz-labs/bolt.diy/main/package.json");if(!r.ok)throw new Error(`Failed to fetch latest package.json: ${r.status}`);const s=await r.json();if(!s.version||typeof s.version!="string")throw new Error("Invalid remote package.json format: missing or invalid version");const i=s.version,o=mMe(i,n)>0;return{available:o,version:i,releaseNotes:o?"Update available. Check GitHub for release notes.":void 0}}catch(t){console.error("Error checking for updates:",t);const e=t instanceof Error?t.message:"Unknown error occurred";return{available:!1,version:"unknown",error:{type:e.toLowerCase().includes("network")||e.toLowerCase().includes("fetch")?"network":"unknown",message:`Failed to check for updates: ${e}`}}}},gMe=async t=>{try{localStorage.setItem("last_acknowledged_update",t)}catch(e){console.error("Failed to store acknowledged version:",e)}},E9="bolt_last_acknowledged_version",bse=()=>{const[t,e]=N.useState(!1),[n,r]=N.useState(""),[s,i]=N.useState(()=>{try{return localStorage.getItem(E9)}catch{return null}});return N.useEffect(()=>{const a=async()=>{try{const{available:c,version:u}=await S9();r(u),e(c&&u!==s)}catch(c){console.error("Failed to check for updates:",c)}};a();const l=setInterval(a,30*60*1e3);return()=>clearInterval(l)},[s]),{hasUpdate:t,currentVersion:n,acknowledgeUpdate:async()=>{try{const{version:a}=await S9();await gMe(a);try{localStorage.setItem(E9,a)}catch(l){console.error("Failed to persist acknowledged version:",l)}i(a),e(!1)}catch(a){console.error("Failed to acknowledge update:",a)}}}},bMe=async()=>[{id:"feature-1",name:"Dark Mode",description:"Enable dark mode for better night viewing",viewed:!0,releaseDate:"2024-03-15"},{id:"feature-2",name:"Tab Management",description:"Customize your tab layout",viewed:!1,releaseDate:"2024-03-20"}],k9=async t=>{console.log(`Marking feature ${t} as viewed`)},yse="bolt_viewed_features",yMe=()=>{try{const t=localStorage.getItem(yse);return t?JSON.parse(t):[]}catch{return[]}},C9=t=>{try{localStorage.setItem(yse,JSON.stringify(t))}catch(e){console.error("Failed to persist viewed features:",e)}},vMe=()=>{const[t,e]=N.useState(!1),[n,r]=N.useState([]),[s,i]=N.useState(()=>yMe());return N.useEffect(()=>{(async()=>{try{const u=(await bMe()).filter(d=>!s.includes(d.id));r(u),e(u.length>0)}catch(c){console.error("Failed to check for new features:",c)}})()},[s]),{hasNewFeatures:t,unviewedFeatures:n,acknowledgeFeature:async l=>{try{await k9(l);const c=[...s,l];i(c),C9(c),r(u=>u.filter(d=>d.id!==l)),e(n.length>1)}catch(c){console.error("Failed to acknowledge feature:",c)}},acknowledgeAllFeatures:async()=>{try{await Promise.all(n.map(c=>k9(c.id)));const l=[...s,...n.map(c=>c.id)];i(l),C9(l),r([]),e(!1)}catch(l){console.error("Failed to acknowledge all features:",l)}}}},A9=async()=>Object.values(Ut.logs.get()).filter(e=>e.category!=="system").map(e=>({id:e.id,title:e.details?.title||e.message.split(`
`)[0],message:e.message,type:e.level,timestamp:e.timestamp,read:Ut.isRead(e.id),details:e.details})).sort((e,n)=>new Date(n.timestamp).getTime()-new Date(e.timestamp).getTime()),T9=async t=>{Ut.markAsRead(t)},wMe=()=>{const[t,e]=N.useState(!1),[n,r]=N.useState([]),s=Bt(Ut.logs),i=async()=>{try{const c=(await A9()).filter(u=>!Ut.isRead(u.id));r(c),e(c.length>0)}catch(l){console.error("Failed to check notifications:",l)}};return N.useEffect(()=>{i();const l=setInterval(i,60*1e3);return()=>clearInterval(l)},[s]),{hasUnreadNotifications:t,unreadNotifications:n,markAsRead:async l=>{try{await T9(l),await i()}catch(c){console.error("Failed to mark notification as read:",c)}},markAllAsRead:async()=>{try{const l=await A9();await Promise.all(l.map(c=>T9(c.id))),await i()}catch(l){console.error("Failed to mark all notifications as read:",l)}}}},xMe=async()=>{try{if(!navigator.onLine)return{connected:!1,latency:0,lastChecked:new Date().toISOString()};const e=["/api/health","/","/favicon.ico"];let n=0,r=!1;for(const s of e)try{const i=performance.now(),o=await fetch(s,{method:"HEAD",cache:"no-cache"}),a=performance.now();if(o.ok){n=Math.round(a-i),r=!0;break}}catch(i){console.debug(`Failed to connect to ${s}:`,i);continue}return{connected:r,latency:n,lastChecked:new Date().toISOString()}}catch(t){return console.error("Connection check failed:",t),{connected:!1,latency:0,lastChecked:new Date().toISOString()}}},_Me="bolt_acknowledged_connection_issue",SMe=()=>{try{return localStorage.getItem(_Me)}catch{return null}},EMe=()=>{const[t,e]=N.useState(!1),[n,r]=N.useState(null),[s,i]=N.useState(()=>SMe()),o=async()=>{try{const c=await xMe(),u=c.connected?c.latency>1e3?"high-latency":null:"disconnected";r(u),e(u!==null&&u!==s)}catch(c){console.error("Failed to check connection:",c),r("disconnected"),e(!0)}};return N.useEffect(()=>{o();const c=setInterval(o,10*1e3);return()=>clearInterval(c)},[s]),{hasConnectionIssues:t,currentIssue:n,acknowledgeIssue:()=>{i(n),i(n),e(!1)},resetAcknowledgment:()=>{i(null),i(null),o()}}},vk=new Set,kMe=async()=>{const t={warnings:[],errors:[]};try{if(performance&&"memory"in performance){const n=performance.memory;n.usedJSHeapSize>n.jsHeapSizeLimit*.8&&t.warnings.push({id:"high-memory-usage",message:"High memory usage detected",type:"warning",timestamp:new Date().toISOString(),details:{used:n.usedJSHeapSize,total:n.jsHeapSizeLimit}})}if(navigator.storage&&navigator.storage.estimate){const n=await navigator.storage.estimate();(n.usage||0)/(n.quota||1)>.9&&t.warnings.push({id:"storage-quota-warning",message:"Storage quota nearly reached",type:"warning",timestamp:new Date().toISOString(),details:{used:n.usage,quota:n.quota}})}const e=localStorage.getItem("error_logs");return e&&JSON.parse(e).forEach(r=>{t.errors.push({id:`error-${r.timestamp}`,message:r.message,type:"error",timestamp:r.timestamp,details:r.details})}),t.warnings=t.warnings.filter(n=>!vk.has(n.id)),t.errors=t.errors.filter(n=>!vk.has(n.id)),t}catch(e){return console.error("Error getting debug status:",e),t}},P9=async t=>{vk.add(t)},N9=async t=>{vk.add(t);try{const e=localStorage.getItem("error_logs");if(e){const r=JSON.parse(e).filter(s=>`error-${s.timestamp}`!==t);localStorage.setItem("error_logs",JSON.stringify(r))}}catch(e){console.error("Error acknowledging error:",e)}},vse="bolt_acknowledged_debug_issues",CMe=()=>{try{const t=localStorage.getItem(vse);return t?JSON.parse(t):[]}catch{return[]}},I9=t=>{try{localStorage.setItem(vse,JSON.stringify(t))}catch(e){console.error("Failed to persist acknowledged debug issues:",e)}},AMe=()=>{const[t,e]=N.useState(!1),[n,r]=N.useState([]),[s,i]=N.useState(()=>CMe()),o=async()=>{try{const c=await kMe(),u=[...c.warnings.map(d=>({...d,type:"warning"})),...c.errors.map(d=>({...d,type:"error"}))].filter(d=>!s.includes(d.id));r(u),e(u.length>0)}catch(c){console.error("Failed to check debug status:",c)}};return N.useEffect(()=>{o();const c=setInterval(o,5*1e3);return()=>clearInterval(c)},[s]),{hasActiveWarnings:t,activeIssues:n,acknowledgeIssue:async c=>{try{c.type==="warning"?await P9(c.id):await N9(c.id);const u=[...s,c.id];i(u),I9(u),r(d=>d.filter(h=>h.id!==c.id)),e(n.length>1)}catch(u){console.error("Failed to acknowledge issue:",u)}},acknowledgeAllIssues:async()=>{try{await Promise.all(n.map(u=>u.type==="warning"?P9(u.id):N9(u.id)));const c=[...s,...n.map(u=>u.id)];i(c),I9(c),r([]),e(!1)}catch(c){console.error("Failed to acknowledge all issues:",c)}}}},R9=typeof window<"u"?localStorage.getItem("bolt_profile"):null,TMe=R9?JSON.parse(R9):{username:"",bio:"",avatar:""},Qd=yr(TMe),M3=t=>{Qd.set({...Qd.get(),...t}),typeof window<"u"&&localStorage.setItem("bolt_profile",JSON.stringify(Qd.get()))};function wse(t){const e=t+"CollectionProvider",[n,r]=Fa(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:m}=f,g=ht.useRef(null),b=ht.useRef(new Map).current;return y.jsx(s,{scope:p,itemMap:b,collectionRef:g,children:m})};o.displayName=e;const a=t+"CollectionSlot",l=ht.forwardRef((f,p)=>{const{scope:m,children:g}=f,b=i(a,m),v=Jn(p,b.collectionRef);return y.jsx(lp,{ref:v,children:g})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=ht.forwardRef((f,p)=>{const{scope:m,children:g,...b}=f,v=ht.useRef(null),w=Jn(p,v),_=i(c,m);return ht.useEffect(()=>(_.itemMap.set(v,{ref:v,...b}),()=>void _.itemMap.delete(v))),y.jsx(lp,{[u]:"",ref:w,children:g})});d.displayName=c;function h(f){const p=i(t+"CollectionConsumer",f);return ht.useCallback(()=>{const g=p.collectionRef.current;if(!g)return[];const b=Array.from(g.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((_,S)=>b.indexOf(_.ref.current)-b.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,r]}var PMe=N.createContext(void 0);function rM(t){const e=N.useContext(PMe);return t||e||"ltr"}var j3="rovingFocusGroup.onEntryFocus",NMe={bubbles:!1,cancelable:!0},DA="RovingFocusGroup",[aR,xse,IMe]=wse(DA),[RMe,_se]=Fa(DA,[IMe]),[OMe,LMe]=RMe(DA),Sse=N.forwardRef((t,e)=>y.jsx(aR.Provider,{scope:t.__scopeRovingFocusGroup,children:y.jsx(aR.Slot,{scope:t.__scopeRovingFocusGroup,children:y.jsx(DMe,{...t,ref:e})})}));Sse.displayName=DA;var DMe=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=N.useRef(null),f=Jn(e,h),p=rM(i),[m=null,g]=Lp({prop:o,defaultProp:a,onChange:l}),[b,v]=N.useState(!1),w=ps(c),_=xse(n),S=N.useRef(!1),[E,k]=N.useState(0);return N.useEffect(()=>{const x=h.current;if(x)return x.addEventListener(j3,w),()=>x.removeEventListener(j3,w)},[w]),y.jsx(OMe,{scope:n,orientation:r,dir:p,loop:s,currentTabStopId:m,onItemFocus:N.useCallback(x=>g(x),[g]),onItemShiftTab:N.useCallback(()=>v(!0),[]),onFocusableItemAdd:N.useCallback(()=>k(x=>x+1),[]),onFocusableItemRemove:N.useCallback(()=>k(x=>x-1),[]),children:y.jsx(En.div,{tabIndex:b||E===0?-1:0,"data-orientation":r,...d,ref:f,style:{outline:"none",...t.style},onMouseDown:Mt(t.onMouseDown,()=>{S.current=!0}),onFocus:Mt(t.onFocus,x=>{const I=!S.current;if(x.target===x.currentTarget&&I&&!b){const R=new CustomEvent(j3,NMe);if(x.currentTarget.dispatchEvent(R),!R.defaultPrevented){const C=_().filter(ee=>ee.focusable),T=C.find(ee=>ee.active),O=C.find(ee=>ee.id===m),U=[T,O,...C].filter(Boolean).map(ee=>ee.ref.current);Cse(U,u)}}S.current=!1}),onBlur:Mt(t.onBlur,()=>v(!1))})})}),Ese="RovingFocusGroupItem",kse=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=Lu(),l=i||a,c=LMe(Ese,n),u=c.currentTabStopId===l,d=xse(n),{onFocusableItemAdd:h,onFocusableItemRemove:f}=c;return N.useEffect(()=>{if(r)return h(),()=>f()},[r,h,f]),y.jsx(aR.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:y.jsx(En.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:Mt(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:Mt(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Mt(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=FMe(p,c.orientation,c.dir);if(m!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let b=d().filter(v=>v.focusable).map(v=>v.ref.current);if(m==="last")b.reverse();else if(m==="prev"||m==="next"){m==="prev"&&b.reverse();const v=b.indexOf(p.currentTarget);b=c.loop?BMe(b,v+1):b.slice(v+1)}setTimeout(()=>Cse(b))}})})})});kse.displayName=Ese;var MMe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function jMe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function FMe(t,e,n){const r=jMe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return MMe[r]}function Cse(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function BMe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $Me=Sse,UMe=kse,lR=["Enter"," "],HMe=["ArrowDown","PageUp","Home"],Ase=["ArrowUp","PageDown","End"],zMe=[...HMe,...Ase],VMe={ltr:[...lR,"ArrowRight"],rtl:[...lR,"ArrowLeft"]},WMe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Hw="Menu",[L1,GMe,qMe]=wse(Hw),[Mp,MA]=Fa(Hw,[qMe,eb,_se]),jA=eb(),Tse=_se(),[KMe,jp]=Mp(Hw),[YMe,zw]=Mp(Hw),Pse=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=jA(e),[l,c]=N.useState(null),u=N.useRef(!1),d=ps(i),h=rM(s);return N.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),y.jsx(G6,{...a,children:y.jsx(KMe,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:y.jsx(YMe,{scope:e,onClose:N.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:o,children:r})})})};Pse.displayName=Hw;var JMe="MenuAnchor",sM=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=jA(n);return y.jsx(IA,{...s,...r,ref:e})});sM.displayName=JMe;var iM="MenuPortal",[XMe,Nse]=Mp(iM,{forceMount:void 0}),Ise=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=jp(iM,e);return y.jsx(XMe,{scope:e,forceMount:n,children:y.jsx(Js,{present:n||i.open,children:y.jsx(jw,{asChild:!0,container:s,children:r})})})};Ise.displayName=iM;var Ca="MenuContent",[ZMe,oM]=Mp(Ca),Rse=N.forwardRef((t,e)=>{const n=Nse(Ca,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=jp(Ca,t.__scopeMenu),o=zw(Ca,t.__scopeMenu);return y.jsx(L1.Provider,{scope:t.__scopeMenu,children:y.jsx(Js,{present:r||i.open,children:y.jsx(L1.Slot,{scope:t.__scopeMenu,children:o.modal?y.jsx(QMe,{...s,ref:e}):y.jsx(e8e,{...s,ref:e})})})})}),QMe=N.forwardRef((t,e)=>{const n=jp(Ca,t.__scopeMenu),r=N.useRef(null),s=Jn(e,r);return N.useEffect(()=>{const i=r.current;if(i)return KD(i)},[]),y.jsx(aM,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Mt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),e8e=N.forwardRef((t,e)=>{const n=jp(Ca,t.__scopeMenu);return y.jsx(aM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),aM=N.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...m}=t,g=jp(Ca,n),b=zw(Ca,n),v=jA(n),w=Tse(n),_=GMe(n),[S,E]=N.useState(null),k=N.useRef(null),x=Jn(e,k,g.onContentChange),I=N.useRef(0),R=N.useRef(""),C=N.useRef(0),T=N.useRef(null),O=N.useRef("right"),P=N.useRef(0),U=p?uA:N.Fragment,ee=p?{as:lp,allowPinchZoom:!0}:void 0,X=F=>{const M=R.current+F,G=_().filter(te=>!te.disabled),D=document.activeElement,j=G.find(te=>te.ref.current===D)?.textValue,W=G.map(te=>te.textValue),q=h8e(W,M,j),ne=G.find(te=>te.textValue===q)?.ref.current;(function te(Y){R.current=Y,window.clearTimeout(I.current),Y!==""&&(I.current=window.setTimeout(()=>te(""),1e3))})(M),ne&&setTimeout(()=>ne.focus())};N.useEffect(()=>()=>window.clearTimeout(I.current),[]),qD();const Z=N.useCallback(F=>O.current===T.current?.side&&p8e(F,T.current?.area),[]);return y.jsx(ZMe,{scope:n,searchRef:R,onItemEnter:N.useCallback(F=>{Z(F)&&F.preventDefault()},[Z]),onItemLeave:N.useCallback(F=>{Z(F)||(k.current?.focus(),E(null))},[Z]),onTriggerLeave:N.useCallback(F=>{Z(F)&&F.preventDefault()},[Z]),pointerGraceTimerRef:C,onPointerGraceIntentChange:N.useCallback(F=>{T.current=F},[]),children:y.jsx(U,{...ee,children:y.jsx(lA,{asChild:!0,trapped:s,onMountAutoFocus:Mt(i,F=>{F.preventDefault(),k.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(Mw,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:y.jsx($Me,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:E,onEntryFocus:Mt(l,F=>{b.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(q6,{role:"menu","aria-orientation":"vertical","data-state":Kse(g.open),"data-radix-menu-content":"",dir:b.dir,...v,...m,ref:x,style:{outline:"none",...m.style},onKeyDown:Mt(m.onKeyDown,F=>{const G=F.target.closest("[data-radix-menu-content]")===F.currentTarget,D=F.ctrlKey||F.altKey||F.metaKey,j=F.key.length===1;G&&(F.key==="Tab"&&F.preventDefault(),!D&&j&&X(F.key));const W=k.current;if(F.target!==W||!zMe.includes(F.key))return;F.preventDefault();const ne=_().filter(te=>!te.disabled).map(te=>te.ref.current);Ase.includes(F.key)&&ne.reverse(),u8e(ne)}),onBlur:Mt(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(I.current),R.current="")}),onPointerMove:Mt(t.onPointerMove,D1(F=>{const M=F.target,G=P.current!==F.clientX;if(F.currentTarget.contains(M)&&G){const D=F.clientX>P.current?"right":"left";O.current=D,P.current=F.clientX}}))})})})})})})});Rse.displayName=Ca;var t8e="MenuGroup",lM=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return y.jsx(En.div,{role:"group",...r,ref:e})});lM.displayName=t8e;var n8e="MenuLabel",Ose=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return y.jsx(En.div,{...r,ref:e})});Ose.displayName=n8e;var wk="MenuItem",O9="menu.itemSelect",FA=N.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=N.useRef(null),o=zw(wk,t.__scopeMenu),a=oM(wk,t.__scopeMenu),l=Jn(e,i),c=N.useRef(!1),u=()=>{const d=i.current;if(!n&&d){const h=new CustomEvent(O9,{bubbles:!0,cancelable:!0});d.addEventListener(O9,f=>r?.(f),{once:!0}),sX(d,h),h.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx(Lse,{...s,ref:l,disabled:n,onClick:Mt(t.onClick,u),onPointerDown:d=>{t.onPointerDown?.(d),c.current=!0},onPointerUp:Mt(t.onPointerUp,d=>{c.current||d.currentTarget?.click()}),onKeyDown:Mt(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||lR.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});FA.displayName=wk;var Lse=N.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=oM(wk,n),a=Tse(n),l=N.useRef(null),c=Jn(e,l),[u,d]=N.useState(!1),[h,f]=N.useState("");return N.useEffect(()=>{const p=l.current;p&&f((p.textContent??"").trim())},[i.children]),y.jsx(L1.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:y.jsx(UMe,{asChild:!0,...a,focusable:!r,children:y.jsx(En.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Mt(t.onPointerMove,D1(p=>{r?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Mt(t.onPointerLeave,D1(p=>o.onItemLeave(p))),onFocus:Mt(t.onFocus,()=>d(!0)),onBlur:Mt(t.onBlur,()=>d(!1))})})})}),r8e="MenuCheckboxItem",Dse=N.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return y.jsx($se,{scope:t.__scopeMenu,checked:n,children:y.jsx(FA,{role:"menuitemcheckbox","aria-checked":xk(n)?"mixed":n,...s,ref:e,"data-state":uM(n),onSelect:Mt(s.onSelect,()=>r?.(xk(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Dse.displayName=r8e;var Mse="MenuRadioGroup",[s8e,i8e]=Mp(Mse,{value:void 0,onValueChange:()=>{}}),jse=N.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=ps(r);return y.jsx(s8e,{scope:t.__scopeMenu,value:n,onValueChange:i,children:y.jsx(lM,{...s,ref:e})})});jse.displayName=Mse;var Fse="MenuRadioItem",Bse=N.forwardRef((t,e)=>{const{value:n,...r}=t,s=i8e(Fse,t.__scopeMenu),i=n===s.value;return y.jsx($se,{scope:t.__scopeMenu,checked:i,children:y.jsx(FA,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":uM(i),onSelect:Mt(r.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Bse.displayName=Fse;var cM="MenuItemIndicator",[$se,o8e]=Mp(cM,{checked:!1}),Use=N.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=o8e(cM,n);return y.jsx(Js,{present:r||xk(i.checked)||i.checked===!0,children:y.jsx(En.span,{...s,ref:e,"data-state":uM(i.checked)})})});Use.displayName=cM;var a8e="MenuSeparator",Hse=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return y.jsx(En.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Hse.displayName=a8e;var l8e="MenuArrow",zse=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=jA(n);return y.jsx(K6,{...s,...r,ref:e})});zse.displayName=l8e;var c8e="MenuSub",[UAt,Vse]=Mp(c8e),qy="MenuSubTrigger",Wse=N.forwardRef((t,e)=>{const n=jp(qy,t.__scopeMenu),r=zw(qy,t.__scopeMenu),s=Vse(qy,t.__scopeMenu),i=oM(qy,t.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},u=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>u,[u]),N.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),y.jsx(sM,{asChild:!0,...c,children:y.jsx(Lse,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Kse(n.open),...t,ref:aA(e,s.onTriggerChange),onClick:d=>{t.onClick?.(d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Mt(t.onPointerMove,D1(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Mt(t.onPointerLeave,D1(d=>{u();const h=n.content?.getBoundingClientRect();if(h){const f=n.content?.dataset.side,p=f==="right",m=p?-5:5,g=h[p?"left":"right"],b=h[p?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+m,y:d.clientY},{x:g,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:g,y:h.bottom}],side:f}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Mt(t.onKeyDown,d=>{const h=i.searchRef.current!=="";t.disabled||h&&d.key===" "||VMe[r.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});Wse.displayName=qy;var Gse="MenuSubContent",qse=N.forwardRef((t,e)=>{const n=Nse(Ca,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=jp(Ca,t.__scopeMenu),o=zw(Ca,t.__scopeMenu),a=Vse(Gse,t.__scopeMenu),l=N.useRef(null),c=Jn(e,l);return y.jsx(L1.Provider,{scope:t.__scopeMenu,children:y.jsx(Js,{present:r||i.open,children:y.jsx(L1.Slot,{scope:t.__scopeMenu,children:y.jsx(aM,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{o.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Mt(t.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Mt(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Mt(t.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),h=WMe[o.dir].includes(u.key);d&&h&&(i.onOpenChange(!1),a.trigger?.focus(),u.preventDefault())})})})})})});qse.displayName=Gse;function Kse(t){return t?"open":"closed"}function xk(t){return t==="indeterminate"}function uM(t){return xk(t)?"indeterminate":t?"checked":"unchecked"}function u8e(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function d8e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function h8e(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=d8e(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function f8e(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function p8e(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return f8e(n,e)}function D1(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Yse=Pse,Jse=sM,Xse=Ise,Zse=Rse,Qse=lM,eie=Ose,tie=FA,nie=Dse,rie=jse,sie=Bse,iie=Use,oie=Hse,aie=zse,lie=Wse,cie=qse,dM="DropdownMenu",[m8e,HAt]=Fa(dM,[MA]),$i=MA(),[g8e,uie]=m8e(dM),die=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=$i(e),c=N.useRef(null),[u=!1,d]=Lp({prop:s,defaultProp:i,onChange:o});return y.jsx(g8e,{scope:e,triggerId:Lu(),triggerRef:c,contentId:Lu(),open:u,onOpenChange:d,onOpenToggle:N.useCallback(()=>d(h=>!h),[d]),modal:a,children:y.jsx(Yse,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};die.displayName=dM;var hie="DropdownMenuTrigger",fie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=uie(hie,n),o=$i(n);return y.jsx(Jse,{asChild:!0,...o,children:y.jsx(En.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:aA(e,i.triggerRef),onPointerDown:Mt(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:Mt(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});fie.displayName=hie;var b8e="DropdownMenuPortal",pie=t=>{const{__scopeDropdownMenu:e,...n}=t,r=$i(e);return y.jsx(Xse,{...r,...n})};pie.displayName=b8e;var mie="DropdownMenuContent",gie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=uie(mie,n),i=$i(n),o=N.useRef(!1);return y.jsx(Zse,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Mt(t.onCloseAutoFocus,a=>{o.current||s.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Mt(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gie.displayName=mie;var y8e="DropdownMenuGroup",v8e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(Qse,{...s,...r,ref:e})});v8e.displayName=y8e;var w8e="DropdownMenuLabel",x8e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(eie,{...s,...r,ref:e})});x8e.displayName=w8e;var _8e="DropdownMenuItem",bie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(tie,{...s,...r,ref:e})});bie.displayName=_8e;var S8e="DropdownMenuCheckboxItem",E8e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(nie,{...s,...r,ref:e})});E8e.displayName=S8e;var k8e="DropdownMenuRadioGroup",C8e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(rie,{...s,...r,ref:e})});C8e.displayName=k8e;var A8e="DropdownMenuRadioItem",T8e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(sie,{...s,...r,ref:e})});T8e.displayName=A8e;var P8e="DropdownMenuItemIndicator",N8e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(iie,{...s,...r,ref:e})});N8e.displayName=P8e;var I8e="DropdownMenuSeparator",R8e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(oie,{...s,...r,ref:e})});R8e.displayName=I8e;var O8e="DropdownMenuArrow",yie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(aie,{...s,...r,ref:e})});yie.displayName=O8e;var L8e="DropdownMenuSubTrigger",D8e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(lie,{...s,...r,ref:e})});D8e.displayName=L8e;var M8e="DropdownMenuSubContent",j8e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$i(n);return y.jsx(cie,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});j8e.displayName=M8e;var BA=die,$A=fie,UA=pie,HA=gie,cg=bie,F8e=yie;const L9=()=>y.jsx("span",{className:"px-1.5 py-0.5 rounded-full bg-purple-500/10 dark:bg-purple-500/20 text-[10px] font-medium text-purple-600 dark:text-purple-400 ml-2",children:"BETA"}),B8e=({onSelectTab:t})=>{const e=Bt(Qd);return y.jsxs(BA,{children:[y.jsx($A,{asChild:!0,children:y.jsx(lt.button,{className:"w-10 h-10 rounded-full bg-transparent flex items-center justify-center focus:outline-none",whileHover:{scale:1.02},whileTap:{scale:.98},children:e?.avatar?y.jsx("img",{src:e.avatar,alt:e?.username||"Profile",className:"w-full h-full rounded-full object-cover",loading:"eager",decoding:"sync"}):y.jsx("div",{className:"w-full h-full rounded-full flex items-center justify-center bg-white dark:bg-gray-800 text-gray-400 dark:text-gray-500",children:y.jsx("div",{className:"i-ph:question w-6 h-6"})})})}),y.jsx(UA,{children:y.jsxs(HA,{className:Ne("min-w-[240px] z-[250]","bg-white dark:bg-[#141414]","rounded-lg shadow-lg","border border-gray-200/50 dark:border-gray-800/50","animate-in fade-in-0 zoom-in-95","py-1"),sideOffset:5,align:"end",children:[y.jsxs("div",{className:Ne("px-4 py-3 flex items-center gap-3","border-b border-gray-200/50 dark:border-gray-800/50"),children:[y.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0 bg-white dark:bg-gray-800 shadow-sm",children:e?.avatar?y.jsx("img",{src:e.avatar,alt:e?.username||"Profile",className:Ne("w-full h-full","object-cover","transform-gpu","image-rendering-crisp"),loading:"eager",decoding:"sync"}):y.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500 font-medium text-lg",children:y.jsx("span",{className:"relative -top-0.5",children:"?"})})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:e?.username||"Guest User"}),e?.bio&&y.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.bio})]})]}),y.jsxs(cg,{className:Ne("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-purple-50 dark:hover:bg-purple-500/10","hover:text-purple-500 dark:hover:text-purple-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("profile"),children:[y.jsx("div",{className:"i-ph:user-circle w-4 h-4 text-gray-400 group-hover:text-purple-500 dark:group-hover:text-purple-400 transition-colors"}),"Edit Profile"]}),y.jsxs(cg,{className:Ne("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-purple-50 dark:hover:bg-purple-500/10","hover:text-purple-500 dark:hover:text-purple-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("settings"),children:[y.jsx("div",{className:"i-ph:gear-six w-4 h-4 text-gray-400 group-hover:text-purple-500 dark:group-hover:text-purple-400 transition-colors"}),"Settings"]}),y.jsx("div",{className:"my-1 border-t border-gray-200/50 dark:border-gray-800/50"}),y.jsxs(cg,{className:Ne("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-purple-50 dark:hover:bg-purple-500/10","hover:text-purple-500 dark:hover:text-purple-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("task-manager"),children:[y.jsx("div",{className:"i-ph:activity w-4 h-4 text-gray-400 group-hover:text-purple-500 dark:group-hover:text-purple-400 transition-colors"}),"Task Manager",y.jsx(L9,{})]}),y.jsxs(cg,{className:Ne("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-purple-50 dark:hover:bg-purple-500/10","hover:text-purple-500 dark:hover:text-purple-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("service-status"),children:[y.jsx("div",{className:"i-ph:heartbeat w-4 h-4 text-gray-400 group-hover:text-purple-500 dark:group-hover:text-purple-400 transition-colors"}),"Service Status",y.jsx(L9,{})]})]})})]})},$8e="_",U8e="b",H8e="c",z8e="e",V8e="g",W8e="i",G8e="k",q8e="m",K8e="o",Y8e="q",Fs={rayContainer:$8e,lightRay:U8e,ray1:H8e,ray2:z8e,ray3:V8e,ray4:W8e,ray5:G8e,ray6:q8e,ray7:K8e,ray8:Y8e},J8e=()=>y.jsxs("div",{className:`${Fs.rayContainer} `,children:[y.jsx("div",{className:`${Fs.lightRay} ${Fs.ray1}`}),y.jsx("div",{className:`${Fs.lightRay} ${Fs.ray2}`}),y.jsx("div",{className:`${Fs.lightRay} ${Fs.ray3}`}),y.jsx("div",{className:`${Fs.lightRay} ${Fs.ray4}`}),y.jsx("div",{className:`${Fs.lightRay} ${Fs.ray5}`}),y.jsx("div",{className:`${Fs.lightRay} ${Fs.ray6}`}),y.jsx("div",{className:`${Fs.lightRay} ${Fs.ray7}`}),y.jsx("div",{className:`${Fs.lightRay} ${Fs.ray8}`})]});function Vw(t,e){let n;return function(...s){const i=()=>{clearTimeout(n),t(...s)};clearTimeout(n),n=setTimeout(i,e)}}function X8e(){const t=Bt(Qd),[e,n]=N.useState(!1),r=N.useCallback(Vw((o,a)=>{M3({[o]:a}),Ve.success(`${o.charAt(0).toUpperCase()+o.slice(1)} updated`)},1e3),[]),s=async o=>{const a=o.target.files?.[0];if(a)try{n(!0);const l=new FileReader;l.onloadend=()=>{const c=l.result;M3({avatar:c}),n(!1),Ve.success("Profile picture updated")},l.onerror=()=>{console.error("Error reading file:",l.error),n(!1),Ve.error("Failed to update profile picture")},l.readAsDataURL(a)}catch(l){console.error("Error uploading avatar:",l),n(!1),Ve.error("Failed to update profile picture")}},i=(o,a)=>{M3({[o]:a}),r(o,a)};return y.jsx("div",{className:"max-w-2xl mx-auto",children:y.jsx("div",{className:"space-y-6",children:y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-start gap-6 mb-8",children:[y.jsxs("div",{className:Ne("w-24 h-24 rounded-full overflow-hidden","bg-gray-100 dark:bg-gray-800/50","flex items-center justify-center","ring-1 ring-gray-200 dark:ring-gray-700","relative group","transition-all duration-300 ease-out","hover:ring-purple-500/30 dark:hover:ring-purple-500/30","hover:shadow-lg hover:shadow-purple-500/10"),children:[t.avatar?y.jsx("img",{src:t.avatar,alt:"Profile",className:Ne("w-full h-full object-cover","transition-all duration-300 ease-out","group-hover:scale-105 group-hover:brightness-90")}):y.jsx("div",{className:"i-ph:robot-fill w-16 h-16 text-gray-400 dark:text-gray-500 transition-colors group-hover:text-purple-500/70 transform -translate-y-1"}),y.jsxs("label",{className:Ne("absolute inset-0","flex items-center justify-center","bg-black/0 group-hover:bg-black/40","cursor-pointer transition-all duration-300 ease-out",e?"cursor-wait":""),children:[y.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:s,disabled:e}),e?y.jsx("div",{className:"i-ph:spinner-gap w-6 h-6 text-white animate-spin"}):y.jsx("div",{className:"i-ph:camera-plus w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out transform group-hover:scale-110"})]})]}),y.jsxs("div",{className:"flex-1 pt-1",children:[y.jsx("label",{className:"block text-base font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Profile Picture"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload a profile picture or avatar"})]})]}),y.jsxs("div",{className:"mb-6",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Username"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:y.jsx("div",{className:"i-ph:user-circle-fill w-5 h-5 text-gray-400 dark:text-gray-500 transition-colors group-focus-within:text-purple-500"})}),y.jsx("input",{type:"text",value:t.username,onChange:o=>i("username",o.target.value),className:Ne("w-full pl-11 pr-4 py-2.5 rounded-xl","bg-white dark:bg-gray-800/50","border border-gray-200 dark:border-gray-700/50","text-gray-900 dark:text-white","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50","transition-all duration-300 ease-out"),placeholder:"Enter your username"})]})]}),y.jsxs("div",{className:"mb-8",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Bio"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute left-3.5 top-3",children:y.jsx("div",{className:"i-ph:text-aa w-5 h-5 text-gray-400 dark:text-gray-500 transition-colors group-focus-within:text-purple-500"})}),y.jsx("textarea",{value:t.bio,onChange:o=>i("bio",o.target.value),className:Ne("w-full pl-11 pr-4 py-2.5 rounded-xl","bg-white dark:bg-gray-800/50","border border-gray-200 dark:border-gray-700/50","text-gray-900 dark:text-white","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50","transition-all duration-300 ease-out","resize-none","h-32"),placeholder:"Tell us about yourself"})]})]})]})})})}const _k=typeof navigator<"u"?navigator.platform.toLowerCase().includes("mac"):!1;typeof navigator<"u"&&navigator.platform.toLowerCase().includes("win");typeof navigator<"u"&&navigator.platform.toLowerCase().includes("linux");const F3=t=>{switch(t){case"meta":return _k?"":"Win";case"alt":return _k?"":"Alt";case"shift":return"";default:return t}};function Z8e(){const[t,e]=N.useState(""),[n,r]=N.useState(()=>{const s=localStorage.getItem("bolt_user_profile");return s?JSON.parse(s):{notifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}});return N.useEffect(()=>{e(Intl.DateTimeFormat().resolvedOptions().timeZone)},[]),N.useEffect(()=>{try{const i={...JSON.parse(localStorage.getItem("bolt_user_profile")||"{}"),notifications:n.notifications,language:n.language,timezone:n.timezone};localStorage.setItem("bolt_user_profile",JSON.stringify(i)),Ve.success("Settings updated")}catch(s){console.error("Error saving settings:",s),Ve.error("Failed to update settings")}},[n]),y.jsxs("div",{className:"space-y-4",children:[y.jsxs(lt.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg shadow-sm dark:shadow-none p-4 space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("div",{className:"i-ph:palette-fill w-4 h-4 text-purple-500"}),y.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Preferences"})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("div",{className:"i-ph:translate-fill w-4 h-4 text-bolt-elements-textSecondary"}),y.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary",children:"Language"})]}),y.jsxs("select",{value:n.language,onChange:s=>r(i=>({...i,language:s.target.value})),className:Ne("w-full px-3 py-2 rounded-lg text-sm","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),children:[y.jsx("option",{value:"en",children:"English"}),y.jsx("option",{value:"es",children:"Espaol"}),y.jsx("option",{value:"fr",children:"Franais"}),y.jsx("option",{value:"de",children:"Deutsch"}),y.jsx("option",{value:"it",children:"Italiano"}),y.jsx("option",{value:"pt",children:"Portugus"}),y.jsx("option",{value:"ru",children:""}),y.jsx("option",{value:"zh",children:""}),y.jsx("option",{value:"ja",children:""}),y.jsx("option",{value:"ko",children:""})]})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("div",{className:"i-ph:bell-fill w-4 h-4 text-bolt-elements-textSecondary"}),y.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary",children:"Notifications"})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:n.notifications?"Notifications are enabled":"Notifications are disabled"}),y.jsx(ka,{checked:n.notifications,onCheckedChange:s=>{r(a=>({...a,notifications:s}));const o={...JSON.parse(localStorage.getItem("bolt_user_profile")||"{}"),notifications:s};localStorage.setItem("bolt_user_profile",JSON.stringify(o)),window.dispatchEvent(new StorageEvent("storage",{key:"bolt_user_profile",newValue:JSON.stringify(o)})),Ve.success(`Notifications ${s?"enabled":"disabled"}`)}})]})]})]}),y.jsxs(lt.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg shadow-sm dark:shadow-none p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("div",{className:"i-ph:clock-fill w-4 h-4 text-purple-500"}),y.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Time Settings"})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("div",{className:"i-ph:globe-fill w-4 h-4 text-bolt-elements-textSecondary"}),y.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary",children:"Timezone"})]}),y.jsx("select",{value:n.timezone,onChange:s=>r(i=>({...i,timezone:s.target.value})),className:Ne("w-full px-3 py-2 rounded-lg text-sm","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),children:y.jsx("option",{value:t,children:t})})]})]}),y.jsxs(lt.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg shadow-sm dark:shadow-none p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("div",{className:"i-ph:keyboard-fill w-4 h-4 text-purple-500"}),y.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Keyboard Shortcuts"})]}),y.jsx("div",{className:"space-y-2",children:y.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-[#FAFAFA] dark:bg-[#1A1A1A]",children:[y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"Toggle Theme"}),y.jsx("span",{className:"text-xs text-bolt-elements-textSecondary",children:"Switch between light and dark mode"})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:F3("meta")}),y.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:F3("alt")}),y.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:F3("shift")}),y.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:"D"})]})]})})]})]})}function Fn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Wu(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Q8e(t,e){const n=Fn(t);return isNaN(e)?Wu(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const vie=6048e5,eje=864e5,i2=43200,D9=1440;let tje={};function Ww(){return tje}function mp(t,e){const n=Ww(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Fn(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Sk(t){return mp(t,{weekStartsOn:1})}function wie(t){const e=Fn(t),n=e.getFullYear(),r=Wu(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Sk(r),i=Wu(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Sk(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Ek(t){const e=Fn(t);return e.setHours(0,0,0,0),e}function kk(t){const e=Fn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function nje(t,e){const n=Ek(t),r=Ek(e),s=+n-kk(n),i=+r-kk(r);return Math.round((s-i)/eje)}function rje(t){const e=wie(t),n=Wu(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Sk(n)}function jS(t,e){const n=Fn(t),r=Fn(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function Gw(t){return Wu(t,Date.now())}function xie(t,e){const n=Ek(t),r=Ek(e);return+n==+r}function sje(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ije(t){if(!sje(t)&&typeof t!="number")return!1;const e=Fn(t);return!isNaN(Number(e))}function oje(t,e){const n=Fn(t),r=Fn(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function aje(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function lje(t,e){return+Fn(t)-+Fn(e)}function cje(t){const e=Fn(t);return e.setHours(23,59,59,999),e}function uje(t){const e=Fn(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function dje(t){const e=Fn(t);return+cje(e)==+uje(e)}function hje(t,e){const n=Fn(t),r=Fn(e),s=jS(n,r),i=Math.abs(oje(n,r));let o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let a=jS(n,r)===-s;dje(Fn(t))&&i===1&&jS(t,r)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function fje(t,e,n){const r=lje(t,e)/1e3;return aje(n?.roundingMethod)(r)}function pje(t){const e=Fn(t),n=Wu(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const mje={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gje=(t,e,n)=>{let r;const s=mje[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function B3(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const bje={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yje={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vje={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wje={date:B3({formats:bje,defaultWidth:"full"}),time:B3({formats:yje,defaultWidth:"full"}),dateTime:B3({formats:vje,defaultWidth:"full"})},xje={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_je=(t,e,n,r)=>xje[t];function dy(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Sje={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Eje={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kje={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Cje={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Aje={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Tje={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pje=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Nje={ordinalNumber:Pje,era:dy({values:Sje,defaultWidth:"wide"}),quarter:dy({values:Eje,defaultWidth:"wide",argumentCallback:t=>t-1}),month:dy({values:kje,defaultWidth:"wide"}),day:dy({values:Cje,defaultWidth:"wide"}),dayPeriod:dy({values:Aje,defaultWidth:"wide",formattingValues:Tje,defaultFormattingWidth:"wide"})};function hy(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Rje(a,d=>d.test(o)):Ije(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Ije(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Rje(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Oje(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const Lje=/^(\d+)(th|st|nd|rd)?/i,Dje=/\d+/i,Mje={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},jje={any:[/^b/i,/^(a|c)/i]},Fje={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Bje={any:[/1/i,/2/i,/3/i,/4/i]},$je={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Uje={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Hje={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zje={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Vje={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Wje={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gje={ordinalNumber:Oje({matchPattern:Lje,parsePattern:Dje,valueCallback:t=>parseInt(t,10)}),era:hy({matchPatterns:Mje,defaultMatchWidth:"wide",parsePatterns:jje,defaultParseWidth:"any"}),quarter:hy({matchPatterns:Fje,defaultMatchWidth:"wide",parsePatterns:Bje,defaultParseWidth:"any",valueCallback:t=>t+1}),month:hy({matchPatterns:$je,defaultMatchWidth:"wide",parsePatterns:Uje,defaultParseWidth:"any"}),day:hy({matchPatterns:Hje,defaultMatchWidth:"wide",parsePatterns:zje,defaultParseWidth:"any"}),dayPeriod:hy({matchPatterns:Vje,defaultMatchWidth:"any",parsePatterns:Wje,defaultParseWidth:"any"})},_ie={code:"en-US",formatDistance:gje,formatLong:wje,formatRelative:_je,localize:Nje,match:Gje,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qje(t){const e=Fn(t);return nje(e,pje(e))+1}function Kje(t){const e=Fn(t),n=+Sk(e)-+rje(e);return Math.round(n/vie)+1}function Sie(t,e){const n=Fn(t),r=n.getFullYear(),s=Ww(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=Wu(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=mp(o,e),l=Wu(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=mp(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function Yje(t,e){const n=Ww(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=Sie(t,e),i=Wu(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),mp(i,e)}function Jje(t,e){const n=Fn(t),r=+mp(n,e)-+Yje(n,e);return Math.round(r/vie)+1}function Gn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const gd={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Gn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Gn(n+1,2)},d(t,e){return Gn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Gn(t.getHours()%12||12,e.length)},H(t,e){return Gn(t.getHours(),e.length)},m(t,e){return Gn(t.getMinutes(),e.length)},s(t,e){return Gn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Gn(s,e.length)}},Dm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},M9={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return gd.y(t,e)},Y:function(t,e,n,r){const s=Sie(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return Gn(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Gn(i,e.length)},R:function(t,e){const n=wie(t);return Gn(n,e.length)},u:function(t,e){const n=t.getFullYear();return Gn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Gn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Gn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return gd.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Gn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=Jje(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Gn(s,e.length)},I:function(t,e,n){const r=Kje(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Gn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):gd.d(t,e)},D:function(t,e,n){const r=qje(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Gn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Gn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Gn(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Gn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Dm.noon:r===0?s=Dm.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Dm.evening:r>=12?s=Dm.afternoon:r>=4?s=Dm.morning:s=Dm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return gd.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):gd.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Gn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Gn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):gd.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):gd.s(t,e)},S:function(t,e){return gd.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return F9(r);case"XXXX":case"XX":return hf(r);case"XXXXX":case"XXX":default:return hf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return F9(r);case"xxxx":case"xx":return hf(r);case"xxxxx":case"xxx":default:return hf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+j9(r,":");case"OOOO":default:return"GMT"+hf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+j9(r,":");case"zzzz":default:return"GMT"+hf(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Gn(r,e.length)},T:function(t,e,n){const r=t.getTime();return Gn(r,e.length)}};function j9(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Gn(i,2)}function F9(t,e){return t%60===0?(t>0?"-":"+")+Gn(Math.abs(t)/60,2):hf(t,e)}function hf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Gn(Math.trunc(r/60),2),i=Gn(r%60,2);return n+s+e+i}const B9=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Eie=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Xje=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return B9(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",B9(r,e)).replace("{{time}}",Eie(s,e))},Zje={p:Eie,P:Xje},Qje=/^D+$/,eFe=/^Y+$/,tFe=["D","DD","YY","YYYY"];function nFe(t){return Qje.test(t)}function rFe(t){return eFe.test(t)}function sFe(t,e,n){const r=iFe(t,e,n);if(console.warn(r),tFe.includes(t))throw new RangeError(r)}function iFe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const oFe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,aFe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lFe=/^'([^]*?)'?$/,cFe=/''/g,uFe=/[a-zA-Z]/;function $3(t,e,n){const r=Ww(),s=r.locale??_ie,i=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Fn(t);if(!ije(a))throw new RangeError("Invalid time value");let l=e.match(aFe).map(u=>{const d=u[0];if(d==="p"||d==="P"){const h=Zje[d];return h(u,s.formatLong)}return u}).join("").match(oFe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const d=u[0];if(d==="'")return{isToken:!1,value:dFe(u)};if(M9[d])return{isToken:!0,value:u};if(d.match(uFe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(u=>{if(!u.isToken)return u.value;const d=u.value;(rFe(d)||nFe(d))&&sFe(d,e,String(t));const h=M9[d[0]];return h(a,d,s.localize,c)}).join("")}function dFe(t){const e=t.match(lFe);return e?e[1].replace(cFe,"'"):t}function hFe(t,e,n){const r=Ww(),s=n?.locale??r.locale??_ie,i=2520,o=jS(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:o});let l,c;o>0?(l=Fn(e),c=Fn(t)):(l=Fn(t),c=Fn(e));const u=fje(c,l),d=(kk(c)-kk(l))/1e3,h=Math.round((u-d)/60);let f;if(h<2)return n?.includeSeconds?u<5?s.formatDistance("lessThanXSeconds",5,a):u<10?s.formatDistance("lessThanXSeconds",10,a):u<20?s.formatDistance("lessThanXSeconds",20,a):u<40?s.formatDistance("halfAMinute",0,a):u<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):h===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",h,a);if(h<45)return s.formatDistance("xMinutes",h,a);if(h<90)return s.formatDistance("aboutXHours",1,a);if(h<D9){const p=Math.round(h/60);return s.formatDistance("aboutXHours",p,a)}else{if(h<i)return s.formatDistance("xDays",1,a);if(h<i2){const p=Math.round(h/D9);return s.formatDistance("xDays",p,a)}else if(h<i2*2)return f=Math.round(h/i2),s.formatDistance("aboutXMonths",f,a)}if(f=hje(c,l),f<12){const p=Math.round(h/i2);return s.formatDistance("xMonths",p,a)}else{const p=f%12,m=Math.trunc(f/12);return p<3?s.formatDistance("aboutXYears",m,a):p<9?s.formatDistance("overXYears",m,a):s.formatDistance("almostXYears",m+1,a)}}function fFe(t,e){return hFe(t,Gw(t),e)}function pFe(t,e){const n=Fn(t),r=Fn(e);return n.getTime()>r.getTime()}function mFe(t,e,n){const r=mp(t,n),s=mp(e,n);return+r==+s}function gFe(t,e){const n=Fn(t),r=Fn(e);return n.getFullYear()===r.getFullYear()}function bFe(t,e){return mFe(t,Gw(t),e)}function yFe(t){return gFe(t,Gw(t))}function vFe(t){return xie(t,Gw(t))}function kie(t,e){return Q8e(t,-e)}function wFe(t){return xie(t,kie(Gw(t),1))}const xFe=()=>{const[t,e]=N.useState("all"),n=Bt(Ut.logs);N.useEffect(()=>{const u=performance.now();return()=>{const d=performance.now()-u;Ut.logPerformanceMetric("NotificationsTab","mount-duration",d)}},[]);const r=()=>{const u=Object.keys(n).length;Ut.logInfo("Cleared notifications",{type:"notification_clear",message:`Cleared ${u} notifications`,clearedCount:u,component:"notifications"}),Ut.clearLogs()},s=u=>{Ut.logInfo("Update link clicked",{type:"update_click",message:"User clicked update link",updateUrl:u,component:"notifications"}),window.open(u,"_blank")},i=u=>{Ut.logInfo("Notification filter changed",{type:"filter_change",message:`Filter changed to ${u}`,previousFilter:t,newFilter:u,component:"notifications"}),e(u)},o=Object.values(n).filter(u=>t==="all"?!0:t==="update"?u.details?.type==="update":t==="system"?u.category==="system":t==="provider"?u.category==="provider":t==="network"?u.category==="network":u.level===t).sort((u,d)=>new Date(d.timestamp).getTime()-new Date(u.timestamp).getTime()),a=(u,d)=>{if(d==="update")return{icon:"i-ph:arrow-circle-up",color:"text-purple-500 dark:text-purple-400",bg:"hover:bg-purple-500/10 dark:hover:bg-purple-500/20"};switch(u){case"error":return{icon:"i-ph:warning-circle",color:"text-red-500 dark:text-red-400",bg:"hover:bg-red-500/10 dark:hover:bg-red-500/20"};case"warning":return{icon:"i-ph:warning",color:"text-yellow-500 dark:text-yellow-400",bg:"hover:bg-yellow-500/10 dark:hover:bg-yellow-500/20"};case"info":return{icon:"i-ph:info",color:"text-blue-500 dark:text-blue-400",bg:"hover:bg-blue-500/10 dark:hover:bg-blue-500/20"};default:return{icon:"i-ph:bell",color:"text-gray-500 dark:text-gray-400",bg:"hover:bg-gray-500/10 dark:hover:bg-gray-500/20"}}},l=u=>u.type==="update"?y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.message}),y.jsxs("div",{className:"flex flex-col gap-1 text-xs text-gray-500 dark:text-gray-500",children:[y.jsxs("p",{children:["Current Version: ",u.currentVersion]}),y.jsxs("p",{children:["Latest Version: ",u.latestVersion]}),y.jsxs("p",{children:["Branch: ",u.branch]})]}),y.jsxs("button",{onClick:()=>u.updateUrl&&s(u.updateUrl),className:Ne("mt-2 inline-flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm font-medium","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-gray-900 dark:text-white","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[y.jsx("span",{className:"i-ph:git-branch text-lg"}),"View Changes"]})]}):u.message?y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.message}):null,c=[{id:"all",label:"All Notifications",icon:"i-ph:bell",color:"#9333ea"},{id:"system",label:"System",icon:"i-ph:gear",color:"#6b7280"},{id:"update",label:"Updates",icon:"i-ph:arrow-circle-up",color:"#9333ea"},{id:"error",label:"Errors",icon:"i-ph:warning-circle",color:"#ef4444"},{id:"warning",label:"Warnings",icon:"i-ph:warning",color:"#f59e0b"},{id:"info",label:"Information",icon:"i-ph:info",color:"#3b82f6"},{id:"provider",label:"Providers",icon:"i-ph:robot",color:"#10b981"},{id:"network",label:"Network",icon:"i-ph:wifi-high",color:"#6366f1"}];return y.jsxs("div",{className:"flex h-full flex-col gap-6",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs(BA,{children:[y.jsx($A,{asChild:!0,children:y.jsxs("button",{className:Ne("flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[y.jsx("span",{className:Ne("text-lg",c.find(u=>u.id===t)?.icon||"i-ph:funnel"),style:{color:c.find(u=>u.id===t)?.color}}),c.find(u=>u.id===t)?.label||"Filter Notifications",y.jsx("span",{className:"i-ph:caret-down text-lg text-gray-500 dark:text-gray-400"})]})}),y.jsx(UA,{children:y.jsx(HA,{className:"min-w-[200px] bg-white dark:bg-[#0A0A0A] rounded-lg shadow-lg py-1 z-[250] animate-in fade-in-0 zoom-in-95 border border-[#E5E5E5] dark:border-[#1A1A1A]",sideOffset:5,align:"start",side:"bottom",children:c.map(u=>y.jsxs(cg,{className:"group flex items-center px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-purple-500/10 dark:hover:bg-purple-500/20 cursor-pointer transition-colors",onClick:()=>i(u.id),children:[y.jsx("div",{className:"mr-3 flex h-5 w-5 items-center justify-center",children:y.jsx("div",{className:Ne(u.icon,"text-lg group-hover:text-purple-500 transition-colors"),style:{color:u.color}})}),y.jsx("span",{className:"group-hover:text-purple-500 transition-colors",children:u.label})]},u.id))})})]}),y.jsxs("button",{onClick:r,className:Ne("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[y.jsx("span",{className:"i-ph:trash text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Clear All"]})]}),y.jsx("div",{className:"flex flex-col gap-4",children:o.length===0?y.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Ne("flex flex-col items-center justify-center gap-4","rounded-lg p-8 text-center","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]"),children:[y.jsx("span",{className:"i-ph:bell-slash text-4xl text-gray-400 dark:text-gray-600"}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"No Notifications"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"You're all caught up!"})]})]}):o.map(u=>{const d=a(u.level,u.details?.type);return y.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Ne("flex flex-col gap-2","rounded-lg p-4","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]",d.bg,"transition-all duration-200"),children:y.jsxs("div",{className:"flex items-start justify-between gap-4",children:[y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("span",{className:Ne("text-lg",d.icon,d.color)}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:u.message}),u.details&&l(u.details),y.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Category: ",u.category,u.subCategory?` > ${u.subCategory}`:""]})]})]}),y.jsx("time",{className:"shrink-0 text-xs text-gray-500 dark:text-gray-400",children:fFe(new Date(u.timestamp),{addSuffix:!0})})]})},u.id)})})]})},Cie=typeof window<"u"&&typeof localStorage<"u";function Zf(t){if(!Cie)return null;try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.error(`Error reading from localStorage key "${t}":`,e),null}}function _Fe(t,e){if(Cie)try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error(`Error writing to localStorage key "${t}":`,n)}}const SFe=po("ChatHistory");async function EFe(){if(typeof indexedDB>"u"){console.error("indexedDB is not available in this environment.");return}return new Promise(t=>{const e=indexedDB.open("boltHistory",1);e.onupgradeneeded=n=>{const r=n.target.result;if(!r.objectStoreNames.contains("chats")){const s=r.createObjectStore("chats",{keyPath:"id"});s.createIndex("id","id",{unique:!0}),s.createIndex("urlId","urlId",{unique:!0})}},e.onsuccess=n=>{t(n.target.result)},e.onerror=n=>{t(void 0),SFe.error(n.target.error)}})}async function FS(t){return new Promise((e,n)=>{const i=t.transaction("chats","readonly").objectStore("chats").getAll();i.onsuccess=()=>e(i.result),i.onerror=()=>n(i.error)})}async function Ck(t,e,n,r,s,i,o){return new Promise((a,l)=>{const u=t.transaction("chats","readwrite").objectStore("chats");if(i&&isNaN(Date.parse(i))){l(new Error("Invalid timestamp"));return}const d=u.put({id:e,messages:n,urlId:r,description:s,timestamp:i??new Date().toISOString(),metadata:o});d.onsuccess=()=>a(),d.onerror=()=>l(d.error)})}async function m0(t,e){return await CFe(t,e)||await kFe(t,e)}async function kFe(t,e){return new Promise((n,r)=>{const a=t.transaction("chats","readonly").objectStore("chats").index("urlId").get(e);a.onsuccess=()=>n(a.result),a.onerror=()=>r(a.error)})}async function CFe(t,e){return new Promise((n,r)=>{const o=t.transaction("chats","readonly").objectStore("chats").get(e);o.onsuccess=()=>n(o.result),o.onerror=()=>r(o.error)})}async function cR(t,e){return new Promise((n,r)=>{const o=t.transaction("chats","readwrite").objectStore("chats").delete(e);o.onsuccess=()=>n(void 0),o.onerror=()=>r(o.error)})}async function Aie(t){return new Promise((e,n)=>{const i=t.transaction("chats","readonly").objectStore("chats").getAllKeys();i.onsuccess=()=>{const o=i.result.reduce((a,l)=>Math.max(+a,+l),0);e(String(+o+1))},i.onerror=()=>n(i.error)})}async function Tie(t,e){const n=await AFe(t);if(n.includes(e)){let r=2;for(;n.includes(`${e}-${r}`);)r++;return`${e}-${r}`}else return e}async function AFe(t){return new Promise((e,n)=>{const s=t.transaction("chats","readonly").objectStore("chats"),i=[],o=s.openCursor();o.onsuccess=a=>{const l=a.target.result;l?(i.push(l.value.urlId),l.continue()):e(i)},o.onerror=()=>{n(o.error)}})}async function TFe(t,e,n){const r=await m0(t,e);if(!r)throw new Error("Chat not found");const s=r.messages.findIndex(o=>o.id===n);if(s===-1)throw new Error("Message not found");const i=r.messages.slice(0,s+1);return hM(t,r.description?`${r.description} (fork)`:"Forked chat",i)}async function PFe(t,e){const n=await m0(t,e);if(!n)throw new Error("Chat not found");return hM(t,`${n.description||"Chat"} (copy)`,n.messages)}async function hM(t,e,n,r){const s=await Aie(t),i=await Tie(t,s);return await Ck(t,s,n,i,e,void 0,r),i}async function NFe(t,e,n){const r=await m0(t,e);if(!r)throw new Error("Chat not found");if(!n.trim())throw new Error("Description cannot be empty");await Ck(t,e,r.messages,r.urlId,n,r.timestamp,r.metadata)}var Pie="vercel.ai.error",IFe=Symbol.for(Pie),Nie,RFe=class Iie extends Error{constructor({name:e,message:n,cause:r}){super(n),this[Nie]=!0,this.name=e,this.cause=r}static isInstance(e){return Iie.hasMarker(e,Pie)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};Nie=IFe;var mh=RFe;function Rie(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var Oie="AI_InvalidArgumentError",Lie=`vercel.ai.error.${Oie}`,OFe=Symbol.for(Lie),Die,LFe=class extends mh{constructor({message:e,cause:n,argument:r}){super({name:Oie,message:e,cause:n}),this[Die]=!0,this.argument=r}static isInstance(e){return mh.hasMarker(e,Lie)}};Die=OFe;var Mie="AI_JSONParseError",jie=`vercel.ai.error.${Mie}`,DFe=Symbol.for(jie),Fie,$9=class extends mh{constructor({text:e,cause:n}){super({name:Mie,message:`JSON parsing failed: Text: ${e}.
Error message: ${Rie(n)}`,cause:n}),this[Fie]=!0,this.text=e}static isInstance(e){return mh.hasMarker(e,jie)}};Fie=DFe;var Bie="AI_TypeValidationError",$ie=`vercel.ai.error.${Bie}`,MFe=Symbol.for($ie),Uie,jFe=class uR extends mh{constructor({value:e,cause:n}){super({name:Bie,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${Rie(n)}`,cause:n}),this[Uie]=!0,this.value=e}static isInstance(e){return mh.hasMarker(e,$ie)}static wrap({value:e,cause:n}){return uR.isInstance(n)&&n.value===e?n:new uR({value:e,cause:n})}};Uie=MFe;var U9=jFe;function FFe(t){return new ReadableStream({async pull(e){try{const{value:n,done:r}=await t.next();r?e.close():e.enqueue(n)}catch(n){e.error(n)}},cancel(){}})}var Fp=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=Dp(n,e);if(t==null)return s;if(n.includes(r))throw new LFe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${t}${r}${s(i)}`},BFe=Fp(),dR=Symbol.for("vercel.ai.validator");function $Fe(t){return{[dR]:!0,validate:t}}function UFe(t){return typeof t=="object"&&t!==null&&dR in t&&t[dR]===!0&&"validate"in t}function HFe(t){return UFe(t)?t:zFe(t)}function zFe(t){return $Fe(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Hie({value:t,schema:e}){const n=HFe(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:U9.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:U9.wrap({value:t,cause:r})}}}function VFe({text:t,schema:e}){try{const n=Jr.parse(t);if(e==null)return{success:!0,value:n,rawValue:n};const r=Hie({value:n,schema:e});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:$9.isInstance(n)?n:new $9({text:t,cause:n})}}}var zie="vercel.ai.error",WFe=Symbol.for(zie),Vie,GFe=class Wie extends Error{constructor({name:e,message:n,cause:r}){super(n),this[Vie]=!0,this.name=e,this.cause=r}static isInstance(e){return Wie.hasMarker(e,zie)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};Vie=WFe;var g0=GFe;function Gie(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var qie="AI_InvalidArgumentError",Kie=`vercel.ai.error.${qie}`,qFe=Symbol.for(Kie),Yie,KFe=class extends g0{constructor({message:t,cause:e,argument:n}){super({name:qie,message:t,cause:e}),this[Yie]=!0,this.argument=n}static isInstance(t){return g0.hasMarker(t,Kie)}};Yie=qFe;var Jie="AI_JSONParseError",Xie=`vercel.ai.error.${Jie}`,YFe=Symbol.for(Xie),Zie,H9=class extends g0{constructor({text:t,cause:e}){super({name:Jie,message:`JSON parsing failed: Text: ${t}.
Error message: ${Gie(e)}`,cause:e}),this[Zie]=!0,this.text=t}static isInstance(t){return g0.hasMarker(t,Xie)}};Zie=YFe;var Qie="AI_TypeValidationError",eoe=`vercel.ai.error.${Qie}`,JFe=Symbol.for(eoe),toe,XFe=class hR extends g0{constructor({value:e,cause:n}){super({name:Qie,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${Gie(n)}`,cause:n}),this[toe]=!0,this.value=e}static isInstance(e){return g0.hasMarker(e,eoe)}static wrap({value:e,cause:n}){return hR.isInstance(n)&&n.value===e?n:new hR({value:e,cause:n})}};toe=JFe;var z9=XFe,ZFe=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=Dp(n,e);if(t==null)return s;if(n.includes(r))throw new KFe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${t}${r}${s(i)}`},fM=ZFe(),Ak=Symbol.for("vercel.ai.validator");function QFe(t){return{[Ak]:!0,validate:t}}function eBe(t){return typeof t=="object"&&t!==null&&Ak in t&&t[Ak]===!0&&"validate"in t}function tBe(t){return eBe(t)?t:nBe(t)}function nBe(t){return QFe(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function rBe({value:t,schema:e}){const n=tBe(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:z9.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:z9.wrap({value:t,cause:r})}}}function V9({text:t,schema:e}){try{const n=Jr.parse(t);if(e==null)return{success:!0,value:n,rawValue:n};const r=rBe({value:n,schema:e});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:H9.isInstance(n)?n:new H9({text:t,cause:n})}}}const sBe=Symbol("Let zodToJsonSchema decide on which parser to use"),W9={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},iBe=t=>typeof t=="string"?{...W9,name:t}:{...W9,...t},oBe=t=>{const e=iBe(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function noe(t,e,n,r){r?.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Kn(t,e,n,r,s){t[e]=n,noe(t,e,r,s)}function aBe(){return{}}function lBe(t,e){const n={type:"array"};return t.type?._def&&t.type?._def?.typeName!==xt.ZodAny&&(n.items=Bn(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Kn(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Kn(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Kn(n,"minItems",t.exactLength.value,t.exactLength.message,e),Kn(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function cBe(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Kn(n,"minimum",r.value,r.message,e):Kn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Kn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Kn(n,"maximum",r.value,r.message,e):Kn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Kn(n,"maximum",r.value,r.message,e));break;case"multipleOf":Kn(n,"multipleOf",r.value,r.message,e);break}return n}function uBe(){return{type:"boolean"}}function roe(t,e){return Bn(t.type._def,e)}const dBe=(t,e)=>Bn(t.innerType._def,e);function soe(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,i)=>soe(t,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return hBe(t,e)}}const hBe=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Kn(n,"minimum",r.value,r.message,e);break;case"max":Kn(n,"maximum",r.value,r.message,e);break}return n};function fBe(t,e){return{...Bn(t.innerType._def,e),default:t.defaultValue()}}function pBe(t,e){return e.effectStrategy==="input"?Bn(t.schema._def,e):{}}function mBe(t){return{type:"string",enum:Array.from(t.values)}}const gBe=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function bBe(t,e){const n=[Bn(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Bn(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(i=>{if(gBe(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:a,...l}=i;o=l}else r=void 0;s.push(o)}}),s.length?{allOf:s,...r}:void 0}function yBe(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let U3;const Xa={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(U3===void 0&&(U3=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),U3),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function ioe(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":Kn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Kn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Za(n,"email",r.message,e);break;case"format:idn-email":Za(n,"idn-email",r.message,e);break;case"pattern:zod":Ci(n,Xa.email,r.message,e);break}break;case"url":Za(n,"uri",r.message,e);break;case"uuid":Za(n,"uuid",r.message,e);break;case"regex":Ci(n,r.regex,r.message,e);break;case"cuid":Ci(n,Xa.cuid,r.message,e);break;case"cuid2":Ci(n,Xa.cuid2,r.message,e);break;case"startsWith":Ci(n,RegExp(`^${H3(r.value,e)}`),r.message,e);break;case"endsWith":Ci(n,RegExp(`${H3(r.value,e)}$`),r.message,e);break;case"datetime":Za(n,"date-time",r.message,e);break;case"date":Za(n,"date",r.message,e);break;case"time":Za(n,"time",r.message,e);break;case"duration":Za(n,"duration",r.message,e);break;case"length":Kn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Kn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{Ci(n,RegExp(H3(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&Za(n,"ipv4",r.message,e),r.version!=="v4"&&Za(n,"ipv6",r.message,e);break}case"base64url":Ci(n,Xa.base64url,r.message,e);break;case"jwt":Ci(n,Xa.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Ci(n,Xa.ipv4Cidr,r.message,e),r.version!=="v4"&&Ci(n,Xa.ipv6Cidr,r.message,e);break}case"emoji":Ci(n,Xa.emoji(),r.message,e);break;case"ulid":{Ci(n,Xa.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Za(n,"binary",r.message,e);break}case"contentEncoding:base64":{Kn(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Ci(n,Xa.base64,r.message,e);break}}break}case"nanoid":Ci(n,Xa.nanoid,r.message,e)}return n}function H3(t,e){return e.patternStrategy==="escape"?wBe(t):t}const vBe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function wBe(t){let e="";for(let n=0;n<t.length;n++)vBe.has(t[n])||(e+="\\"),e+=t[n];return e}function Za(t,e,n,r){t.format||t.anyOf?.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Kn(t,"format",e,n,r)}function Ci(t,e,n,r){t.pattern||t.allOf?.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:G9(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Kn(t,"pattern",G9(e,r),n,r)}function G9(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let s="",i=!1,o=!1,a=!1;for(let l=0;l<r.length;l++){if(i){s+=r[l],i=!1;continue}if(n.i){if(o){if(r[l].match(/[a-z]/)){a?(s+=r[l],s+=`${r[l-2]}-${r[l]}`.toUpperCase(),a=!1):r[l+1]==="-"&&r[l+2]?.match(/[a-z]/)?(s+=r[l],a=!0):s+=`${r[l]}${r[l].toUpperCase()}`;continue}}else if(r[l].match(/[a-z]/)){s+=`[${r[l]}${r[l].toUpperCase()}]`;continue}}if(n.m){if(r[l]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[l]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&r[l]==="."){s+=o?`${r[l]}\r
`:`[${r[l]}\r
]`;continue}s+=r[l],r[l]==="\\"?i=!0:o&&r[l]==="]"?o=!1:!o&&r[l]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return s}function ooe(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===xt.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((r,s)=>({...r,[s]:Bn(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",s]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:Bn(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(t.keyType?._def.typeName===xt.ZodString&&t.keyType._def.checks?.length){const{type:r,...s}=ioe(t.keyType._def,e);return{...n,propertyNames:s}}else{if(t.keyType?._def.typeName===xt.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===xt.ZodBranded&&t.keyType._def.type._def.typeName===xt.ZodString&&t.keyType._def.type._def.checks?.length){const{type:r,...s}=roe(t.keyType._def,e);return{...n,propertyNames:s}}}return n}function xBe(t,e){if(e.mapStrategy==="record")return ooe(t,e);const n=Bn(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Bn(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function _Be(t){const e=t.values,r=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function SBe(){return{not:{}}}function EBe(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Tk={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function kBe(t,e){if(e.target==="openApi3")return q9(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in Tk&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const o=Tk[i._def.typeName];return o&&!s.includes(o)?[...s,o]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...s,o];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,o,a)=>a.indexOf(i)===o);return{type:s.length>1?s:s[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return q9(t,e)}const q9=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,s)=>Bn(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function CBe(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Tk[t.innerType._def.typeName],nullable:!0}:{type:[Tk[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Bn(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Bn(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function ABe(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",noe(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Kn(n,"minimum",r.value,r.message,e):Kn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Kn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Kn(n,"maximum",r.value,r.message,e):Kn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Kn(n,"maximum",r.value,r.message,e));break;case"multipleOf":Kn(n,"multipleOf",r.value,r.message,e);break}return n}function TBe(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":Bn(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":Bn(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function PBe(t,e){const n=e.target==="openAi",r={type:"object",...Object.entries(t.shape()).reduce((s,[i,o])=>{if(o===void 0||o._def===void 0)return s;let a=o.isOptional();a&&n&&(o instanceof ul&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),a=!1);const l=Bn(o._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});return l===void 0?s:{properties:{...s.properties,[i]:l},required:a?s.required:[...s.required,i]}},{properties:{},required:[]}),additionalProperties:TBe(t,e)};return r.required.length||delete r.required,r}const NBe=(t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Bn(t.innerType._def,e);const n=Bn(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},IBe=(t,e)=>{if(e.pipeStrategy==="input")return Bn(t.in._def,e);if(e.pipeStrategy==="output")return Bn(t.out._def,e);const n=Bn(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Bn(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function RBe(t,e){return Bn(t.type._def,e)}function OBe(t,e){const r={type:"array",uniqueItems:!0,items:Bn(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Kn(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Kn(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function LBe(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>Bn(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Bn(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>Bn(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function DBe(){return{not:{}}}function MBe(){return{}}const jBe=(t,e)=>Bn(t.innerType._def,e),FBe=(t,e,n)=>{switch(e){case xt.ZodString:return ioe(t,n);case xt.ZodNumber:return ABe(t,n);case xt.ZodObject:return PBe(t,n);case xt.ZodBigInt:return cBe(t,n);case xt.ZodBoolean:return uBe();case xt.ZodDate:return soe(t,n);case xt.ZodUndefined:return DBe();case xt.ZodNull:return EBe(n);case xt.ZodArray:return lBe(t,n);case xt.ZodUnion:case xt.ZodDiscriminatedUnion:return kBe(t,n);case xt.ZodIntersection:return bBe(t,n);case xt.ZodTuple:return LBe(t,n);case xt.ZodRecord:return ooe(t,n);case xt.ZodLiteral:return yBe(t,n);case xt.ZodEnum:return mBe(t);case xt.ZodNativeEnum:return _Be(t);case xt.ZodNullable:return CBe(t,n);case xt.ZodOptional:return NBe(t,n);case xt.ZodMap:return xBe(t,n);case xt.ZodSet:return OBe(t,n);case xt.ZodLazy:return()=>t.getter()._def;case xt.ZodPromise:return RBe(t,n);case xt.ZodNaN:case xt.ZodNever:return SBe();case xt.ZodEffects:return pBe(t,n);case xt.ZodAny:return aBe();case xt.ZodUnknown:return MBe();case xt.ZodDefault:return fBe(t,n);case xt.ZodBranded:return roe(t,n);case xt.ZodReadonly:return jBe(t,n);case xt.ZodCatch:return dBe(t,n);case xt.ZodPipeline:return IBe(t,n);case xt.ZodFunction:case xt.ZodVoid:case xt.ZodSymbol:return;default:return(r=>{})()}};function Bn(t,e,n=!1){const r=e.seen.get(t);if(e.override){const a=e.override?.(t,e,r,n);if(a!==sBe)return a}if(r&&!n){const a=BBe(r,e);if(a!==void 0)return a}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const i=FBe(t,t.typeName,e),o=typeof i=="function"?Bn(i(),e):i;if(o&&UBe(t,e,o),e.postProcess){const a=e.postProcess(o,t,e);return s.jsonSchema=o,a}return s.jsonSchema=o,o}const BBe=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:$Be(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},$Be=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},UBe=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),HBe=(t,e)=>{const n=oBe(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[c,u])=>({...l,[c]:Bn(u._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,s=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=Bn(t._def,s===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,s]},!1)??{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(i.title=o);const a=s===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...r,[s]:i}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};var M1={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},j1={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},F1={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},B1={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},$1={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},zBe=[M1,j1,F1,B1,$1];M1.code+"",j1.code+"",F1.code+"",B1.code+"",$1.code+"";M1.name+"",M1.code,j1.name+"",j1.code,F1.name+"",F1.code,B1.name+"",B1.code,$1.name+"",$1.code;zBe.map(t=>t.code);function VBe({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}function WBe(t){const e=["ROOT"];let n=-1,r=null;function s(l,c,u){switch(l){case'"':{n=c,e.pop(),e.push(u),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,e.pop(),e.push(u),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"{":{n=c,e.pop(),e.push(u),e.push("INSIDE_OBJECT_START");break}case"[":{n=c,e.pop(),e.push(u),e.push("INSIDE_ARRAY_START");break}}}function i(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,e.pop();break}}}function o(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,e.pop();break}}}for(let l=0;l<t.length;l++){const c=t[l];switch(e[e.length-1]){case"ROOT":s(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{e.pop(),n=l;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,e.pop();break}default:{n=l,s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,e.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const d=t.substring(r,l+1);!"false".startsWith(d)&&!"true".startsWith(d)&&!"null".startsWith(d)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,l):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l)):n=l;break}}}let a=t.slice(0,n+1);for(let l=e.length-1;l>=0;l--)switch(e[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=t.substring(r,t.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}function aoe(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=V9({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=V9({text:WBe(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var GBe={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},qBe={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},KBe={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},YBe={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},JBe={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},XBe={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},ZBe={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},QBe={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},e7e={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},t7e={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},n7e={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},r7e={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},s7e={code:"h",name:"source",parse:t=>{if(t==null||typeof t!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:t}}},i7e={code:"i",name:"redacted_reasoning",parse:t=>{if(t==null||typeof t!="object"||!("data"in t)||typeof t.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:t.data}}}},o7e={code:"j",name:"reasoning_signature",parse:t=>{if(t==null||typeof t!="object"||!("signature"in t)||typeof t.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:t.signature}}}},zA=[GBe,qBe,KBe,YBe,JBe,XBe,ZBe,QBe,e7e,t7e,n7e,r7e,s7e,i7e,o7e],a7e=Object.fromEntries(zA.map(t=>[t.code,t]));Object.fromEntries(zA.map(t=>[t.name,t.code]));var l7e=zA.map(t=>t.code),c7e=t=>{const e=t.indexOf(":");if(e===-1)throw new Error("Failed to parse stream string. No separator found.");const n=t.slice(0,e);if(!l7e.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,s=t.slice(e+1),i=JSON.parse(s);return a7e[r].parse(i)};function loe(t,e){const n=zA.find(r=>r.name===t);if(!n)throw new Error(`Invalid stream part type: ${t}`);return`${n.code}:${JSON.stringify(e)}
`}var u7e=10;function d7e(t,e){const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return t.length=0,n}async function h7e({stream:t,onTextPart:e,onReasoningPart:n,onReasoningSignaturePart:r,onRedactedReasoningPart:s,onSourcePart:i,onDataPart:o,onErrorPart:a,onToolCallStreamingStartPart:l,onToolCallDeltaPart:c,onToolCallPart:u,onToolResultPart:d,onMessageAnnotationsPart:h,onFinishMessagePart:f,onFinishStepPart:p,onStartStepPart:m}){const g=t.getReader(),b=new TextDecoder,v=[];let w=0;for(;;){const{value:_}=await g.read();if(_&&(v.push(_),w+=_.length,_[_.length-1]!==u7e))continue;if(v.length===0)break;const S=d7e(v,w);w=0;const E=b.decode(S,{stream:!0}).split(`
`).filter(k=>k!=="").map(c7e);for(const{type:k,value:x}of E)switch(k){case"text":await e?.(x);break;case"reasoning":await n?.(x);break;case"reasoning_signature":await r?.(x);break;case"redacted_reasoning":await s?.(x);break;case"source":await i?.(x);break;case"data":await o?.(x);break;case"error":await a?.(x);break;case"message_annotations":await h?.(x);break;case"tool_call_streaming_start":await l?.(x);break;case"tool_call_delta":await c?.(x);break;case"tool_call":await u?.(x);break;case"tool_result":await d?.(x);break;case"finish_message":await f?.(x);break;case"finish_step":await p?.(x);break;case"start_step":await m?.(x);break;default:{const I=k;throw new Error(`Unknown stream part type: ${I}`)}}}}async function f7e({stream:t,update:e,onToolCall:n,onFinish:r,generateId:s=fM,getCurrentDate:i=()=>new Date,lastMessage:o}){var a,l;const c=o?.role==="assistant";let u=c?1+((l=(a=o.toolInvocations)==null?void 0:a.reduce((E,k)=>{var x;return Math.max(E,(x=k.step)!=null?x:0)},0))!=null?l:0):0;const d=c?structuredClone(o):{id:s(),createdAt:i(),role:"assistant",content:"",parts:[]};let h,f,p;function m(E,k){const x=d.parts.find(I=>I.type==="tool-invocation"&&I.toolInvocation.toolCallId===E);x!=null?x.toolInvocation=k:d.parts.push({type:"tool-invocation",toolInvocation:k})}const g=[];let b=c?o?.annotations:void 0;const v={};let w={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},_="unknown";function S(){const E=[...g];b?.length&&(d.annotations=b);const k={...structuredClone(d),revisionId:s()};e({message:k,data:E,replaceLastMessage:c})}await h7e({stream:t,onTextPart(E){h==null?(h={type:"text",text:E},d.parts.push(h)):h.text+=E,d.content+=E,S()},onReasoningPart(E){var k;p==null?(p={type:"text",text:E},f?.details.push(p)):p.text+=E,f==null?(f={type:"reasoning",reasoning:E,details:[p]},d.parts.push(f)):f.reasoning+=E,d.reasoning=((k=d.reasoning)!=null?k:"")+E,S()},onReasoningSignaturePart(E){p!=null&&(p.signature=E.signature)},onRedactedReasoningPart(E){f==null&&(f={type:"reasoning",reasoning:"",details:[]},d.parts.push(f)),f.details.push({type:"redacted",data:E.data}),p=void 0,S()},onSourcePart(E){d.parts.push({type:"source",source:E}),S()},onToolCallStreamingStartPart(E){d.toolInvocations==null&&(d.toolInvocations=[]),v[E.toolCallId]={text:"",step:u,toolName:E.toolName,index:d.toolInvocations.length};const k={state:"partial-call",step:u,toolCallId:E.toolCallId,toolName:E.toolName,args:void 0};d.toolInvocations.push(k),m(E.toolCallId,k),S()},onToolCallDeltaPart(E){const k=v[E.toolCallId];k.text+=E.argsTextDelta;const{value:x}=aoe(k.text),I={state:"partial-call",step:k.step,toolCallId:E.toolCallId,toolName:k.toolName,args:x};d.toolInvocations[k.index]=I,m(E.toolCallId,I),S()},async onToolCallPart(E){const k={state:"call",step:u,...E};if(v[E.toolCallId]!=null?d.toolInvocations[v[E.toolCallId].index]=k:(d.toolInvocations==null&&(d.toolInvocations=[]),d.toolInvocations.push(k)),m(E.toolCallId,k),S(),n){const x=await n({toolCall:E});if(x!=null){const I={state:"result",step:u,...E,result:x};d.toolInvocations[d.toolInvocations.length-1]=I,m(E.toolCallId,I),S()}}},onToolResultPart(E){const k=d.toolInvocations;if(k==null)throw new Error("tool_result must be preceded by a tool_call");const x=k.findIndex(R=>R.toolCallId===E.toolCallId);if(x===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");const I={...k[x],state:"result",...E};k[x]=I,m(E.toolCallId,I),S()},onDataPart(E){g.push(...E),S()},onMessageAnnotationsPart(E){b==null?b=[...E]:b.push(...E),S()},onFinishStepPart(E){u+=1,h=E.isContinued?h:void 0,f=void 0,p=void 0},onStartStepPart(E){c||(d.id=E.messageId)},onFinishMessagePart(E){_=E.finishReason,E.usage!=null&&(w=VBe(E.usage))},onErrorPart(E){throw new Error(E)}}),r?.({message:d,finishReason:_,usage:w})}async function p7e({stream:t,onTextPart:e}){const n=t.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:r,value:s}=await n.read();if(r)break;await e(s)}}async function m7e({stream:t,update:e,onFinish:n,getCurrentDate:r=()=>new Date,generateId:s=fM}){const i={type:"text",text:""},o={id:s(),createdAt:r(),role:"assistant",content:"",parts:[i]};await p7e({stream:t,onTextPart:a=>{o.content+=a,i.text+=a,e({message:{...o},data:[],replaceLastMessage:!1})}}),n?.(o,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"})}var g7e=()=>fetch;async function b7e({api:t,body:e,streamProtocol:n="data",credentials:r,headers:s,abortController:i,restoreMessagesOnFailure:o,onResponse:a,onUpdate:l,onFinish:c,onToolCall:u,generateId:d,fetch:h=g7e(),lastMessage:f}){var p,m;const g=await h(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",...s},signal:(p=i?.())==null?void 0:p.signal,credentials:r}).catch(b=>{throw o(),b});if(a)try{await a(g)}catch(b){throw b}if(!g.ok)throw o(),new Error((m=await g.text())!=null?m:"Failed to fetch the chat response.");if(!g.body)throw new Error("The response body is empty.");switch(n){case"text":{await m7e({stream:g.body,update:l,onFinish:c,generateId:d});return}case"data":{await f7e({stream:g.body,update:l,lastMessage:f,onToolCall:u,onFinish({message:b,finishReason:v,usage:w}){c&&b!=null&&c(b,{usage:w,finishReason:v})},generateId:d});return}default:{const b=n;throw new Error(`Unknown stream protocol: ${b}`)}}}function fR(t){return t?.reduce((e,n)=>{var r;return Math.max(e,(r=n.step)!=null?r:0)},0)}function coe(t){var e;return(e=t.parts)!=null?e:[...t.toolInvocations?t.toolInvocations.map(n=>({type:"tool-invocation",toolInvocation:n})):[],...t.reasoning?[{type:"reasoning",reasoning:t.reasoning,details:[{type:"text",text:t.reasoning}]}]:[],...t.content?[{type:"text",text:t.content}]:[]]}function z3(t){return t.map(e=>({...e,parts:coe(e)}))}function pR(t,e){if(t===e)return!0;if(t==null||e==null)return!1;if(typeof t!="object"&&typeof e!="object")return t===e;if(t.constructor!==e.constructor)return!1;if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(Array.isArray(t)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!pR(t[s],e[s]))return!1;return!0}const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!r.includes(s)||!pR(t[s],e[s]))return!1;return!0}async function K9(t){if(!t)return[];if(t instanceof FileList)return Promise.all(Array.from(t).map(async e=>{const{name:n,type:r}=e,s=await new Promise((i,o)=>{const a=new FileReader;a.onload=l=>{var c;i((c=l.target)==null?void 0:c.result)},a.onerror=l=>o(l),a.readAsDataURL(e)});return{name:n,contentType:r,url:s}}));if(Array.isArray(t))return t;throw new Error("Invalid attachments type")}function y7e(t,e){var n;const r=(n=void 0)!=null?n:!1;return v7e(HBe(t,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:s=>{const i=t.safeParse(s);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var mR=Symbol.for("vercel.ai.schema");function v7e(t,{validate:e}={}){return{[mR]:!0,_type:void 0,[Ak]:!0,jsonSchema:t,validate:e}}function w7e(t){return typeof t=="object"&&t!==null&&mR in t&&t[mR]===!0&&"jsonSchema"in t&&"validate"in t}function x7e(t){return w7e(t)?t:y7e(t)}function _7e({originalMaxToolInvocationStep:t,originalMessageCount:e,maxSteps:n,messages:r}){var s;const i=r[r.length-1];return n>1&&i!=null&&(r.length>e||fR(i.toolInvocations)!==t)&&uoe(i)&&!S7e(i)&&((s=fR(i.toolInvocations))!=null?s:0)<n}function S7e(t){let e=!1;return t.parts.forEach(n=>{n.type==="text"&&(e=!0),n.type==="tool-invocation"&&(e=!1)}),e}function uoe(t){return t.role==="assistant"&&t.parts.filter(e=>e.type==="tool-invocation").every(e=>"result"in e.toolInvocation)}function E7e({messages:t,toolCallId:e,toolResult:n}){var r;const s=t[t.length-1],i=s.parts.find(a=>a.type==="tool-invocation"&&a.toolInvocation.toolCallId===e);if(i==null)return;const o={...i.toolInvocation,state:"result",result:n};i.toolInvocation=o,s.toolInvocations=(r=s.toolInvocations)==null?void 0:r.map(a=>a.toolCallId===e?o:a)}var k7e=Object.defineProperty,pM=(t,e)=>{for(var n in e)k7e(t,n,{get:e[n],enumerable:!0})};function doe(t,{contentType:e,dataStreamVersion:n}){const r=new Headers(t??{});return r.has("Content-Type")||r.set("Content-Type",e),r.set("X-Vercel-AI-Data-Stream",n),r}var hoe="AI_NoObjectGeneratedError",foe=`vercel.ai.error.${hoe}`,C7e=Symbol.for(foe),poe,Y9=class extends mh{constructor({message:t="No object generated.",cause:e,text:n,response:r,usage:s}){super({name:hoe,message:t,cause:e}),this[poe]=!0,this.text=n,this.response=r,this.usage=s}static isInstance(t){return mh.hasMarker(t,foe)}};poe=C7e;var moe=V.union([V.string(),V.instanceof(Uint8Array),V.instanceof(ArrayBuffer),V.custom(t=>{var e,n;return(n=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?n:!1},{message:"Must be a Buffer"})]),gR=V.lazy(()=>V.union([V.null(),V.string(),V.number(),V.boolean(),V.record(V.string(),gR),V.array(gR)])),Mr=V.record(V.string(),V.record(V.string(),gR)),A7e=V.array(V.union([V.object({type:V.literal("text"),text:V.string()}),V.object({type:V.literal("image"),data:V.string(),mimeType:V.string().optional()})])),goe=V.object({type:V.literal("text"),text:V.string(),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()}),T7e=V.object({type:V.literal("image"),image:V.union([moe,V.instanceof(URL)]),mimeType:V.string().optional(),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()}),P7e=V.object({type:V.literal("file"),data:V.union([moe,V.instanceof(URL)]),mimeType:V.string(),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()}),N7e=V.object({type:V.literal("reasoning"),text:V.string(),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()}),I7e=V.object({type:V.literal("redacted-reasoning"),data:V.string(),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()}),R7e=V.object({type:V.literal("tool-call"),toolCallId:V.string(),toolName:V.string(),args:V.unknown(),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()}),O7e=V.object({type:V.literal("tool-result"),toolCallId:V.string(),toolName:V.string(),result:V.unknown(),content:A7e.optional(),isError:V.boolean().optional(),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()}),L7e=V.object({role:V.literal("system"),content:V.string(),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()}),D7e=V.object({role:V.literal("user"),content:V.union([V.string(),V.array(V.union([goe,T7e,P7e]))]),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()}),M7e=V.object({role:V.literal("assistant"),content:V.union([V.string(),V.array(V.union([goe,N7e,I7e,R7e]))]),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()}),j7e=V.object({role:V.literal("tool"),content:V.array(O7e),providerOptions:Mr.optional(),experimental_providerMetadata:Mr.optional()});V.union([L7e,D7e,M7e,j7e]);var F7e="JSON schema:",B7e="You MUST answer with a JSON object that matches the JSON schema above.",$7e="You MUST answer with JSON.";function U7e({prompt:t,schema:e,schemaPrefix:n=e!=null?F7e:void 0,schemaSuffix:r=e!=null?B7e:$7e}){return[t!=null&&t.length>0?t:void 0,t!=null&&t.length>0?"":void 0,n,e!=null?JSON.stringify(e):void 0,r].filter(s=>s!=null).join(`
`)}Fp({prefix:"aiobj",size:24});Fp({prefix:"aiobj",size:24});Fp({prefix:"aitxt",size:24});Fp({prefix:"msg",size:24});var H7e={};pM(H7e,{object:()=>V7e,text:()=>z7e});var z7e=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:t}){return t},parsePartial({text:t}){return{partial:t}},parseOutput({text:t}){return t}}),V7e=({schema:t})=>{const e=x7e(t);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?e.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:U7e({prompt:n,schema:e.jsonSchema})},parsePartial({text:n}){const r=aoe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const s=r.state;throw new Error(`Unsupported parse state: ${s}`)}}},parseOutput({text:n},r){const s=VFe({text:n});if(!s.success)throw new Y9({message:"No object generated: could not parse the response.",cause:s.error,text:n,response:r.response,usage:r.usage});const i=Hie({value:s.value,schema:e});if(!i.success)throw new Y9({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function boe(t,e){const n=t.getReader(),r=e.getReader();let s,i,o=!1,a=!1;async function l(u){try{s==null&&(s=n.read());const d=await s;s=void 0,d.done?u.close():u.enqueue(d.value)}catch(d){u.error(d)}}async function c(u){try{i==null&&(i=r.read());const d=await i;i=void 0,d.done?u.close():u.enqueue(d.value)}catch(d){u.error(d)}}return new ReadableStream({async pull(u){try{if(o){await c(u);return}if(a){await l(u);return}s==null&&(s=n.read()),i==null&&(i=r.read());const{result:d,reader:h}=await Promise.race([s.then(f=>({result:f,reader:n})),i.then(f=>({result:f,reader:r}))]);d.done||u.enqueue(d.value),h===n?(s=void 0,d.done&&(await c(u),o=!0)):(i=void 0,d.done&&(a=!0,await l(u)))}catch(d){u.error(d)}},cancel(){n.cancel(),r.cancel()}})}Fp({prefix:"aitxt",size:24});Fp({prefix:"msg",size:24});var W7e={};pM(W7e,{mergeIntoDataStream:()=>K7e,toDataStream:()=>G7e,toDataStreamResponse:()=>q7e});function yoe(t={}){const e=new TextEncoder;let n="";return new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(r,s){s.enqueue(e.encode(r)),n+=r,t.onToken&&await t.onToken(r),t.onText&&typeof r=="string"&&await t.onText(r)},async flush(){t.onCompletion&&await t.onCompletion(n),t.onFinal&&await t.onFinal(n)}})}function mM(t,e){return t.pipeThrough(new TransformStream({transform:async(n,r)=>{var s;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&J9((s=n.data)==null?void 0:s.chunk,r);return}J9(n,r)}})).pipeThrough(yoe(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(loe("text",n))}}))}function G7e(t,e){return mM(t,e).pipeThrough(new TextEncoderStream)}function q7e(t,e){var n;const r=mM(t,e?.callbacks).pipeThrough(new TextEncoderStream),s=e?.data,i=e?.init,o=s?boe(s.stream,r):r;return new Response(o,{status:(n=i?.status)!=null?n:200,statusText:i?.statusText,headers:doe(i?.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function K7e(t,e){e.dataStream.merge(mM(t,e.callbacks))}function J9(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{const n=t.content;for(const r of n)r.type==="text"&&e.enqueue(r.text)}}var Y7e={};pM(Y7e,{mergeIntoDataStream:()=>Z7e,toDataStream:()=>J7e,toDataStreamResponse:()=>X7e});function gM(t,e){const n=Q7e();return FFe(t[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,s){s.enqueue(n(r.delta))}})).pipeThrough(yoe(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,s)=>{s.enqueue(loe("text",r))}}))}function J7e(t,e){return gM(t,e).pipeThrough(new TextEncoderStream)}function X7e(t,e={}){var n;const{init:r,data:s,callbacks:i}=e,o=gM(t,i).pipeThrough(new TextEncoderStream),a=s?boe(s.stream,o):o;return new Response(a,{status:(n=r?.status)!=null?n:200,statusText:r?.statusText,headers:doe(r?.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Z7e(t,e){e.dataStream.merge(gM(t,e.callbacks))}function Q7e(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}function $l(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function X9(t,e){for(var n="",r=0,s=-1,i=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length===2||n.length===1){n="",r=0,s=a,i=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(s+1,a):n=t.slice(s+1,a),r=a-s-1;s=a,i=0}else o===46&&i!==-1?++i:i=-1}return n}function e$e(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var kg={resolve:function(){for(var e="",n=!1,r,s=arguments.length-1;s>=-1&&!n;s--){var i;s>=0?i=arguments[s]:(r===void 0&&(r=Sn.cwd()),i=r),$l(i),i.length!==0&&(e=i+"/"+e,n=i.charCodeAt(0)===47)}return e=X9(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if($l(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=X9(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return $l(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];$l(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":kg.normalize(e)},relative:function(e,n){if($l(e),$l(n),e===n||(e=kg.resolve(e),n=kg.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var s=e.length,i=s-r,o=1;o<n.length&&n.charCodeAt(o)===47;++o);for(var a=n.length,l=a-o,c=i<l?i:l,u=-1,d=0;d<=c;++d){if(d===c){if(l>c){if(n.charCodeAt(o+d)===47)return n.slice(o+d+1);if(d===0)return n.slice(o+d)}else i>c&&(e.charCodeAt(r+d)===47?u=d:d===0&&(u=0));break}var h=e.charCodeAt(r+d),f=n.charCodeAt(o+d);if(h!==f)break;h===47&&(u=d)}var p="";for(d=r+u+1;d<=s;++d)(d===s||e.charCodeAt(d)===47)&&(p.length===0?p+="..":p+="/..");return p.length>0?p+n.slice(o+u):(o+=u,n.charCodeAt(o)===47&&++o,n.slice(o))},_makeLong:function(e){return e},dirname:function(e){if($l(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,s=-1,i=!0,o=e.length-1;o>=1;--o)if(n=e.charCodeAt(o),n===47){if(!i){s=o;break}}else i=!1;return s===-1?r?"/":".":r&&s===1?"//":e.slice(0,s)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');$l(e);var r=0,s=-1,i=!0,o;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,l=-1;for(o=e.length-1;o>=0;--o){var c=e.charCodeAt(o);if(c===47){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===n.charCodeAt(a)?--a===-1&&(s=o):(a=-1,s=l))}return r===s?s=l:s===-1&&(s=e.length),e.slice(r,s)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!i){r=o+1;break}}else s===-1&&(i=!1,s=o+1);return s===-1?"":e.slice(r,s)}},extname:function(e){$l(e);for(var n=-1,r=0,s=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!i){r=a+1;break}continue}s===-1&&(i=!1,s=a+1),l===46?n===-1?n=a:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||s===-1||o===0||o===1&&n===s-1&&n===r+1?"":e.slice(n,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return e$e("/",e)},parse:function(e){$l(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),s=r===47,i;s?(n.root="/",i=1):i=0;for(var o=-1,a=0,l=-1,c=!0,u=e.length-1,d=0;u>=i;--u){if(r=e.charCodeAt(u),r===47){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),r===46?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||l===-1||d===0||d===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&s?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(a,l)):(a===0&&s?(n.name=e.slice(1,o),n.base=e.slice(1,l)):(n.name=e.slice(a,o),n.base=e.slice(a,l)),n.ext=e.slice(o,l)),a>0?n.dir=e.slice(0,a-1):s&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};kg.posix=kg;var it=kg;const tu=yi(it),Af={join:(...t)=>tu.join(...t),dirname:t=>tu.dirname(t),basename:(t,e)=>tu.basename(t,e),extname:t=>tu.extname(t),relative:(t,e)=>tu.relative(t,e),isAbsolute:t=>tu.isAbsolute(t),normalize:t=>tu.normalize(t),parse:t=>tu.parse(t),format:t=>tu.format(t)};function ha(t){throw new Error(`Unreachable: ${t}`)}const Qa=po("ActionRunner");class yf extends Error{_output;_header;constructor(e,n){const r=`Failed To Execute Shell Command: ${e}

Output:
${n}`;super(r),this._header=e,this._output=n,Object.setPrototypeOf(this,yf.prototype),this.name="ActionCommandError"}get output(){return this._output}get header(){return this._header}}class t$e{#t;#n=Promise.resolve();#e;runnerId=yr(`${Date.now()}`);actions=Ph({});onAlert;buildOutput;constructor(e,n,r){this.#t=e,this.#e=n,this.onAlert=r}addAction(e){const{actionId:n}=e;if(this.actions.get()[n])return;const i=new AbortController;this.actions.setKey(n,{...e.action,status:"pending",executed:!1,abort:()=>{i.abort(),this.#o(n,{status:"aborted"})},abortSignal:i.signal}),this.#n.then(()=>{this.#o(n,{status:"running"})})}async runAction(e,n=!1){const{actionId:r}=e,s=this.actions.get()[r];s||ha(`Action ${r} not found`),!s.executed&&(n&&s.type!=="file"||(this.#o(r,{...s,...e.action,executed:!n}),this.#n=this.#n.then(()=>this.#r(r,n)).catch(i=>{console.error("Action failed:",i)}),await this.#n))}async#r(e,n=!1){const r=this.actions.get()[e];this.#o(e,{status:"running"});try{switch(r.type){case"shell":{await this.#a(r);break}case"file":{await this.#i(r);break}case"build":{const s=await this.#c(r);this.buildOutput=s;break}case"start":{this.#s(r).then(()=>this.#o(e,{status:"complete"})).catch(s=>{r.abortSignal.aborted||(this.#o(e,{status:"failed",error:"Action failed"}),Qa.error(`[${r.type}]:Action failed

`,s),s instanceof yf&&this.onAlert?.({type:"error",title:"Dev Server Failed",description:s.header,content:s.output}))}),await new Promise(s=>setTimeout(s,2e3));return}}this.#o(e,{status:n?"running":r.abortSignal.aborted?"aborted":"complete"})}catch(s){if(r.abortSignal.aborted||(this.#o(e,{status:"failed",error:"Action failed"}),Qa.error(`[${r.type}]:Action failed

`,s),!(s instanceof yf)))return;throw this.onAlert?.({type:"error",title:"Dev Server Failed",description:s.header,content:s.output}),s}}async#a(e){e.type!=="shell"&&ha("Expected shell action");const n=this.#e();await n.ready(),(!n||!n.terminal||!n.process)&&ha("Shell terminal not found");const r=await n.executeCommand(this.runnerId.get(),e.content,()=>{Qa.debug(`[${e.type}]:Aborting Action

`,e),e.abort()});if(Qa.debug(`${e.type} Shell Response: [exit code:${r?.exitCode}]`),r?.exitCode!=0)throw new yf("Failed To Execute Shell Command",r?.output||"No Output Available")}async#s(e){e.type!=="start"&&ha("Expected shell action"),this.#e||ha("Shell terminal not found");const n=this.#e();await n.ready(),(!n||!n.terminal||!n.process)&&ha("Shell terminal not found");const r=await n.executeCommand(this.runnerId.get(),e.content,()=>{Qa.debug(`[${e.type}]:Aborting Action

`,e),e.abort()});if(Qa.debug(`${e.type} Shell Response: [exit code:${r?.exitCode}]`),r?.exitCode!=0)throw new yf("Failed To Start Application",r?.output||"No Output Available");return r}async#i(e){e.type!=="file"&&ha("Expected file action");const n=await this.#t,r=Af.relative(n.workdir,e.filePath);let s=Af.dirname(r);if(s=s.replace(/\/+$/g,""),s!==".")try{await n.fs.mkdir(s,{recursive:!0}),Qa.debug("Created folder",s)}catch(i){Qa.error(`Failed to create folder

`,i)}try{await n.fs.writeFile(r,e.content),Qa.debug(`File written ${r}`)}catch(i){Qa.error(`Failed to write file

`,i)}}#o(e,n){const r=this.actions.get();this.actions.setKey(e,{...r[e],...n})}async getFileHistory(e){try{const n=await this.#t,r=this.#l(e),s=await n.fs.readFile(r,"utf-8");return JSON.parse(s)}catch(n){return Qa.error("Failed to get file history:",n),null}}async saveFileHistory(e,n){const r=this.#l(e);await this.#i({type:"file",filePath:r,content:JSON.stringify(n),changeSource:"auto-save"})}#l(e){return Af.join(".history",e)}async#c(e){e.type!=="build"&&ha("Expected build action");const n=await this.#t,r=await n.spawn("npm",["run","build"]);let s="";r.output.pipeTo(new WritableStream({write(a){s+=a}}));const i=await r.exit;if(i!==0)throw new yf("Build Failed",s||"No Output Available");return{path:Af.join(n.workdir,"dist"),exitCode:i,output:s}}}const n$e="modulepreload",r$e=function(t){return"/"+t},Z9={},ye=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=Promise.allSettled(n.map(l=>{if(l=r$e(l),l in Z9)return;Z9[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":n$e,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},s$e="https://stackblitz.com",i$e=new Error;i$e.stack="";function o$e(){let t,e;function n(){e=new Promise(r=>t=r)}return n(),{get promise(){return e},resolve(r){return t(r)},reset:n}}let o2;const a$e={authComplete:o$e(),get editorOrigin(){return o2==null&&(o2=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??s$e).origin),o2},set editorOrigin(t){o2=t}};function voe(t){const e={d:{}};for(const n of Object.keys(t)){const r=t[n];if("file"in r){const i=r.file.contents,o=typeof i=="string"?i:l$e(i),a=typeof i=="string"?{}:{b:!0};e.d[n]={f:{c:o,...a}};continue}const s=voe(r.directory);e.d[n]=s}return e}function l$e(t){let e="";for(const n of t)e+=String.fromCharCode(n);return e}var Tv;(function(t){t.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",t.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",t.ConsoleError="PREVIEW_CONSOLE_ERROR"})(Tv||(Tv={}));var c$e=Object.defineProperty,u$e=(t,e)=>{for(var n in e)c$e(t,n,{get:e[n],enumerable:!0})},Aa={};u$e(Aa,{createEndpoint:()=>woe,expose:()=>vM,proxy:()=>Aoe,proxyMarker:()=>bM,releaseProxy:()=>xoe,transfer:()=>Coe,transferHandlers:()=>yM,windowEndpoint:()=>m$e,wrap:()=>Eoe});var bM=Symbol("Comlink.proxy"),woe=Symbol("Comlink.endpoint"),xoe=Symbol("Comlink.releaseProxy"),bR=Symbol("Comlink.thrown"),_oe=t=>typeof t=="object"&&t!==null||typeof t=="function",d$e={canHandle:t=>_oe(t)&&t[bM],serialize(t){const{port1:e,port2:n}=new MessageChannel;return vM(t,e),[n,[n]]},deserialize(t){return t.start(),Eoe(t)}},h$e={canHandle:t=>_oe(t)&&bR in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},yM=new Map([["proxy",d$e],["throw",h$e]]);function vM(t,e=self){e.addEventListener("message",function n(r){if(!r||!r.data)return;const{id:s,type:i,path:o}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(vf);let l;try{const c=o.slice(0,-1).reduce((d,h)=>d[h],t),u=o.reduce((d,h)=>d[h],t);switch(i){case 0:l=u;break;case 1:c[o.slice(-1)[0]]=vf(r.data.value),l=!0;break;case 2:l=u.apply(c,a);break;case 3:{const d=new u(...a);l=Aoe(d)}break;case 4:{const{port1:d,port2:h}=new MessageChannel;vM(t,h),l=Coe(d,[d])}break;case 5:l=void 0;break}}catch(c){l={value:c,[bR]:0}}Promise.resolve(l).catch(c=>({value:c,[bR]:0})).then(c=>{const[u,d]=wM(c);e.postMessage(Object.assign(Object.assign({},u),{id:s}),d),i===5&&(e.removeEventListener("message",n),Soe(e))})}),e.start&&e.start()}function f$e(t){return t.constructor.name==="MessagePort"}function Soe(t){f$e(t)&&t.close()}function Eoe(t,e){return yR(t,[],e)}function a2(t){if(t)throw new Error("Proxy has been released and is not useable")}function yR(t,e=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(i,o){if(a2(r),o===xoe)return()=>Mm(t,{type:5,path:e.map(a=>a.toString())}).then(()=>{Soe(t),r=!0});if(o==="then"){if(e.length===0)return{then:()=>s};const a=Mm(t,{type:0,path:e.map(l=>l.toString())}).then(vf);return a.then.bind(a)}return yR(t,[...e,o])},set(i,o,a){a2(r);const[l,c]=wM(a);return Mm(t,{type:1,path:[...e,o].map(u=>u.toString()),value:l},c).then(vf)},apply(i,o,a){a2(r);const l=e[e.length-1];if(l===woe)return Mm(t,{type:4}).then(vf);if(l==="bind")return yR(t,e.slice(0,-1));const[c,u]=Q9(a);return Mm(t,{type:2,path:e.map(d=>d.toString()),argumentList:c},u).then(vf)},construct(i,o){a2(r);const[a,l]=Q9(o);return Mm(t,{type:3,path:e.map(c=>c.toString()),argumentList:a},l).then(vf)}});return s}function p$e(t){return Array.prototype.concat.apply([],t)}function Q9(t){const e=t.map(wM);return[e.map(n=>n[0]),p$e(e.map(n=>n[1]))]}var koe=new WeakMap;function Coe(t,e){return koe.set(t,e),t}function Aoe(t){return Object.assign(t,{[bM]:!0})}function m$e(t,e=self,n="*"){return{postMessage:(r,s)=>t.postMessage(r,n,s),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function wM(t){for(const[e,n]of yM)if(n.canHandle(t)){const[r,s]=n.serialize(t);return[{type:3,name:e,value:r},s]}return[{type:0,value:t},koe.get(t)||[]]}function vf(t){switch(t.type){case 3:return yM.get(t.name).deserialize(t.value);case 0:return t.value}}function Mm(t,e,n){return new Promise(r=>{const s=g$e();t.addEventListener("message",function i(o){!o.data||!o.data.id||o.data.id!==s||(t.removeEventListener("message",i),r(o.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),n)})}function g$e(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const b$e=[Tv.ConsoleError,Tv.UncaughtException,Tv.UnhandledRejection];function y$e(t){return!(t==null||typeof t!="object"||!("type"in t)||!b$e.includes(t.type))}let l2=null,c2=null,V3={};const v$e=new TextDecoder,w$e=new TextEncoder;class Tf{_instance;_runtimeInfo;fs;internal;static _instance=null;_tornDown=!1;_unsubscribeFromTokenChangedListener=()=>{};constructor(e,n,r){this._instance=e,this._runtimeInfo=r,this.fs=new A$e(n),this.internal=new x$e(e)}async spawn(e,n,r){let s=[];Array.isArray(n)?s=n:r=n;let i,o=new ReadableStream;if(r?.output!==!1){const m=G3();i=m.push,o=m.stream}let a,l,c,u;if(l=new ReadableStream,u=new ReadableStream,r?.stdout){const m=G3();a=m.push,l=m.stream}if(r?.stderr){const m=G3();c=m.push,u=m.stream}const d=BS(W3(i)),h=BS(W3(a)),f=BS(W3(c)),p=await this._instance.run({command:e,args:s,cwd:r?.cwd,env:r?.env,terminal:r?.terminal},h,f,d);return new C$e(p,o,l,u)}on(e,n){if(e==="preview-message"){const i=n;n=o=>{y$e(o)&&i(o)}}const{listener:r,subscribe:s}=vR(n);return s(this._instance.on(e,Aa.proxy(r)))}mount(e,n){const r=e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):w$e.encode(JSON.stringify(voe(e)));return this._instance.loadFiles(Aa.transfer(r,[r.buffer]),{mountPoints:n?.mountPoint})}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener(),this.fs._teardown(),this._instance.teardown(),this._instance[Aa.releaseProxy](),Tf._instance===this&&(Tf._instance=null)}static async boot(e={}){const{workdirName:n}=e;if(window.crossOriginIsolated&&e.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),n?.includes("/")||n===".."||n===".")throw new Error("workdirName should be a valid folder name");for(;l2;)await l2;if(Tf._instance)throw new Error("Only a single WebContainer instance can be booted");const r=T$e(e);l2=r.catch(()=>{});try{const s=await r;return Tf._instance=s,s}finally{l2=null}}}class x$e{_instance;constructor(e){this._instance=e}watchPaths(e,n){const{listener:r,subscribe:s}=vR(n);return s(this._instance.watchPaths(e,Aa.proxy(r)))}getProcesses(){return this._instance.getProcesses()}onProcessesRemove(e){const{listener:n,subscribe:r}=vR(e);return r(this._instance.onProcessesRemove(Aa.proxy(n)))}serialize(e,n){return this._instance.serialize(e,n)}}const _$e=1,S$e=2;class E$e{name;_type;constructor(e,n){this.name=e,this._type=n}isFile(){return this._type===_$e}isDirectory(){return this._type===S$e}}class k$e{_apiClient;_path;_options;_listener;_wrappedListener;_watcher;_closed=!1;constructor(e,n,r,s){this._apiClient=e,this._path=n,this._options=r,this._listener=s,this._apiClient._watchers.add(this),this._wrappedListener=(i,o)=>{this._listener&&!this._closed&&this._listener(i,o)},this._apiClient._fs.watch(this._path,this._options,BS(this._wrappedListener)).then(i=>{this._watcher=i,this._closed&&this._teardown()}).catch(console.error)}close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),this._teardown())}_teardown(){this._watcher?.close().finally(()=>{this._watcher?.[Aa.releaseProxy]()})}}class C$e{output;input;exit;_process;stdout;stderr;constructor(e,n,r,s){this.output=n,this._process=e,this.input=new WritableStream({write:i=>{this._getProcess()?.write(i).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=r,this.stderr=s}kill(){this._getProcess()?.kill()}resize(e){this._getProcess()?.resize(e)}async _onExit(){try{return await this._process.onExit}finally{this._process?.[Aa.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}}class A$e{_fs;_watchers=new Set([]);constructor(e){this._fs=e}rm(...e){return this._fs.rm(...e)}async readFile(e,n){return await this._fs.readFile(e,n)}async rename(e,n){return await this._fs.rename(e,n)}async writeFile(e,n,r){if(n instanceof Uint8Array){const s=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);n=Aa.transfer(new Uint8Array(s),[s])}await this._fs.writeFile(e,n,r)}async readdir(e,n){const r=await this._fs.readdir(e,n);return N$e(r)||I$e(r)?r:r.map(i=>new E$e(i.name,i["Symbol(type)"]))}async mkdir(e,n){return await this._fs.mkdir(e,n)}watch(e,n,r){return typeof n=="function"&&(r=n,n=null),new k$e(this,e,n,r)}_teardown(){this._fs[Aa.releaseProxy]();for(const e of this._watchers)e.close()}}async function T$e(t){const{serverPromise:e}=P$e(t),r=await(await e).build({host:window.location.host,version:"1.3.0-internal.10",workdirName:t.workdirName,forwardPreviewErrors:t.forwardPreviewErrors}),s=await r.fs(),i=await r.runtimeInfo();return new Tf(r,s,i)}function W3(t){if(t!=null)return e=>{e instanceof Uint8Array?t(v$e.decode(e)):e==null&&t(null)}}function BS(t){if(t!=null)return Aa.proxy(t)}function P$e(t){if(c2!=null)return t.coep!==V3.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${t.coep}'`),console.warn(`First boot had 'coep: ${V3.coep}', new settings will not take effect!`)),{serverPromise:c2};const e=document.createElement("iframe");e.style.display="none",e.setAttribute("allow","cross-origin-isolated");const n=R$e();t.coep&&n.searchParams.set("coep",t.coep),e.src=n.toString();const{origin:r}=n;return V3={...t},c2=new Promise(s=>{const i=o=>{if(o.origin!==r)return;const{data:a}=o;if(a.type==="init"){s(Aa.wrap(o.ports[0]));return}if(a.type==="warning"){console[a.level].call(console,a.message);return}};window.addEventListener("message",i)}),document.body.insertBefore(e,null),{serverPromise:c2}}function N$e(t){return typeof t[0]=="string"}function I$e(t){return t[0]instanceof Uint8Array}function R$e(){const t=new URL(a$e.editorOrigin);return t.pathname="/headless",t.searchParams.set("version","1.3.0-internal.10"),t}function G3(){let t=null;return{stream:new ReadableStream({start(r){t=r}}),push:r=>{r!=null?t?.enqueue(r):(t?.close(),t=null)}}}function vR(t){let e=!1,n=()=>{};return{subscribe(s){return s.then(i=>{n=i,e&&n()}),()=>{e=!0,n()}},listener:(...s)=>{e||t(...s)}}}function O$e(t){const e=n=>{if(!/^https?:\/\/[^\/]+\.webcontainer-api\.io(\/.*)?$/.test(n))return n;const s=/^https?:\/\/[^\/]+\.webcontainer-api\.io\/(.*?)$/;return n.match(s)?.[1]||""};return t.split(`
`).map(n=>n.replace(/(https?:\/\/[^\/]+\.webcontainer-api\.io\/[^\s\)]+)/g,r=>e(r))).join(`
`)}let Su=new Promise(()=>{});Su=Promise.resolve().then(()=>Tf.boot({coep:"credentialless",workdirName:xre,forwardPreviewErrors:!0})).then(async t=>{const{workbenchStore:e}=await ye(async()=>{const{workbenchStore:n}=await Promise.resolve().then(()=>fUe);return{workbenchStore:n}},void 0);return t.on("preview-message",n=>{if(console.log("WebContainer preview message:",n),n.type==="PREVIEW_UNCAUGHT_EXCEPTION"||n.type==="PREVIEW_UNHANDLED_REJECTION"){const r=n.type==="PREVIEW_UNHANDLED_REJECTION";e.actionAlert.set({type:"preview",title:r?"Unhandled Promise Rejection":"Uncaught Exception",description:n.message,content:`Error occurred at ${n.pathname}${n.search}${n.hash}
Port: ${n.port}

Stack trace:
${O$e(n.stack||"")}`,source:"preview"})}}),t});class L$e{#t;selectedFile=yr();documents=Ph({});currentDocument=dD([this.documents,this.selectedFile],(e,n)=>{if(n)return e[n]});constructor(e){this.#t=e}setDocuments(e){const n=this.documents.value;this.documents.set(Object.fromEntries(Object.entries(e).map(([r,s])=>{if(s===void 0||s.type==="folder")return;const i=n?.[r];return[r,{value:s.content,filePath:r,scroll:i?.scroll}]}).filter(Boolean)))}setSelectedFile(e){this.selectedFile.set(e)}updateScrollPosition(e,n){const s=this.documents.get()[e];s&&this.documents.setKey(e,{...s,scroll:n})}updateFile(e,n){const s=this.documents.get()[e];if(!s)return;s.value!==n&&this.documents.setKey(e,{...s,value:n})}}function $S(t,e){if(!t)return null;const n="utf8",r="binary",s=e?.chunkLength??24;let i=e?.chunkBegin??0;if(e?.chunkBegin==null){let o=$S(t,{chunkLength:s,chunkBegin:i});return o===n&&(i=Math.max(0,Math.floor(t.length/2)-s),o=$S(t,{chunkLength:s,chunkBegin:i}),o===n&&(i=Math.max(0,t.length-s),o=$S(t,{chunkLength:s,chunkBegin:i}))),o}else{if(i=D$e(t,i),i===-1)return r;const o=M$e(t,Math.min(t.length,i+s));if(o>t.length)return r;const a=t.toString(n,i,o);for(let l=0;l<a.length;++l){const c=a.charCodeAt(l);if(c===65533||c<=8)return r}return n}}function D$e(t,e){if(e===0)return 0;if(!j$e(t[e]))return e;let n=e-3;return n>=0&&Cg(t[n])||(n=e-2,n>=0&&(Cg(t[n])||Pk(t[n])))||(n=e-1,n>=0&&(Cg(t[n])||Pk(t[n])||Toe(t[n])))?n:-1}function M$e(t,e){if(e===t.length)return e;let n=e-3;if(n>=0&&Cg(t[n]))return e+1;if(n=e-2,n>=0){if(Cg(t[n]))return e+2;if(Pk(t[n]))return e+1}if(n=e-1,n>=0){if(Cg(t[n]))return e+3;if(Pk(t[n]))return e+2;if(Toe(t[n]))return e+1}return e}function Cg(t){return t>>3===30}function Pk(t){return t>>4===14}function Toe(t){return t>>5===6}function j$e(t){return t>>6===2}function F$e(t,e){let n,r=[],s=Promise.resolve();const i=()=>{n=self.setTimeout(async()=>{await s,r.length>0&&(s=Promise.resolve(e(r))),n=void 0,r=[]},t)};return(...o)=>{r.push(o),n||i()}}function Ih(){}Ih.prototype={diff:function(e,n){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=s.callback;typeof s=="function"&&(i=s,s={}),this.options=s;var o=this;function a(_){return i?(setTimeout(function(){i(void 0,_)},0),!0):_}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var l=n.length,c=e.length,u=1,d=l+c;s.maxEditLength&&(d=Math.min(d,s.maxEditLength));var h=(r=s.timeout)!==null&&r!==void 0?r:1/0,f=Date.now()+h,p=[{oldPos:-1,lastComponent:void 0}],m=this.extractCommon(p[0],n,e,0);if(p[0].oldPos+1>=c&&m+1>=l)return a([{value:this.join(n),count:n.length}]);var g=-1/0,b=1/0;function v(){for(var _=Math.max(g,-u);_<=Math.min(b,u);_+=2){var S=void 0,E=p[_-1],k=p[_+1];E&&(p[_-1]=void 0);var x=!1;if(k){var I=k.oldPos-_;x=k&&0<=I&&I<l}var R=E&&E.oldPos+1<c;if(!x&&!R){p[_]=void 0;continue}if(!R||x&&E.oldPos+1<k.oldPos?S=o.addToPath(k,!0,void 0,0):S=o.addToPath(E,void 0,!0,1),m=o.extractCommon(S,n,e,_),S.oldPos+1>=c&&m+1>=l)return a(B$e(o,S.lastComponent,n,e,o.useLongestToken));p[_]=S,S.oldPos+1>=c&&(b=Math.min(b,_-1)),m+1>=l&&(g=Math.max(g,_+1))}u++}if(i)(function _(){setTimeout(function(){if(u>d||Date.now()>f)return i();v()||_()},0)})();else for(;u<=d&&Date.now()<=f;){var w=v();if(w)return w}},addToPath:function(e,n,r,s){var i=e.lastComponent;return i&&i.added===n&&i.removed===r?{oldPos:e.oldPos+s,lastComponent:{count:i.count+1,added:n,removed:r,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+s,lastComponent:{count:1,added:n,removed:r,previousComponent:i}}},extractCommon:function(e,n,r,s){for(var i=n.length,o=r.length,a=e.oldPos,l=a-s,c=0;l+1<i&&a+1<o&&this.equals(n[l+1],r[a+1]);)l++,a++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=a,l},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function B$e(t,e,n,r,s){for(var i=[],o;e;)i.push(e),o=e.previousComponent,delete e.previousComponent,e=o;i.reverse();for(var a=0,l=i.length,c=0,u=0;a<l;a++){var d=i[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&i[a-1].added){var f=i[a-1];i[a-1]=i[a],i[a]=f}}else{if(!d.added&&s){var h=n.slice(c,c+d.count);h=h.map(function(m,g){var b=r[u+g];return b.length>m.length?b:m}),d.value=t.join(h)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var p=i[l-1];return l>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(i[l-2].value+=p.value,i.pop()),i}var eU=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,tU=/\S/,Poe=new Ih;Poe.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!tU.test(t)&&!tU.test(e)};Poe.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&eU.test(e[n])&&eU.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var xM=new Ih;xM.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var s=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=s:(this.options.ignoreWhitespace&&(s=s.trim()),e.push(s))}return e};function b0(t,e,n){return xM.diff(t,e,n)}var $$e=new Ih;$$e.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var U$e=new Ih;U$e.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function US(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?US=function(e){return typeof e}:US=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},US(t)}function q3(t){return H$e(t)||z$e(t)||V$e(t)||W$e()}function H$e(t){if(Array.isArray(t))return wR(t)}function z$e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function V$e(t,e){if(t){if(typeof t=="string")return wR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wR(t,e)}}function wR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function W$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var G$e=Object.prototype.toString,U1=new Ih;U1.useLongestToken=!0;U1.tokenize=xM.tokenize;U1.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,s=r===void 0?function(i,o){return typeof o>"u"?n:o}:r;return typeof t=="string"?t:JSON.stringify(xR(t,null,null,s),s,"  ")};U1.equals=function(t,e){return Ih.prototype.equals.call(U1,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function xR(t,e,n,r,s){e=e||[],n=n||[],r&&(t=r(s,t));var i;for(i=0;i<e.length;i+=1)if(e[i]===t)return n[i];var o;if(G$e.call(t)==="[object Array]"){for(e.push(t),o=new Array(t.length),n.push(o),i=0;i<t.length;i+=1)o[i]=xR(t[i],e,n,r,s);return e.pop(),n.pop(),o}if(t&&t.toJSON&&(t=t.toJSON()),US(t)==="object"&&t!==null){e.push(t),o={},n.push(o);var a=[],l;for(l in t)t.hasOwnProperty(l)&&a.push(l);for(a.sort(),i=0;i<a.length;i+=1)l=a[i],o[l]=xR(t[l],e,n,r,l);e.pop(),n.pop()}else o=t;return o}var _R=new Ih;_R.tokenize=function(t){return t.slice()};_R.join=_R.removeEmpty=function(t){return t};function q$e(t,e,n,r,s,i,o){o||(o={}),typeof o.context>"u"&&(o.context=4);var a=b0(n,r,o);if(!a)return;a.push({value:"",lines:[]});function l(b){return b.map(function(v){return" "+v})}for(var c=[],u=0,d=0,h=[],f=1,p=1,m=function(v){var w=a[v],_=w.lines||w.value.replace(/\n$/,"").split(`
`);if(w.lines=_,w.added||w.removed){var S;if(!u){var E=a[v-1];u=f,d=p,E&&(h=o.context>0?l(E.lines.slice(-o.context)):[],u-=h.length,d-=h.length)}(S=h).push.apply(S,q3(_.map(function(P){return(w.added?"+":"-")+P}))),w.added?p+=_.length:f+=_.length}else{if(u)if(_.length<=o.context*2&&v<a.length-2){var k;(k=h).push.apply(k,q3(l(_)))}else{var x,I=Math.min(_.length,o.context);(x=h).push.apply(x,q3(l(_.slice(0,I))));var R={oldStart:u,oldLines:f-u+I,newStart:d,newLines:p-d+I,lines:h};if(v>=a.length-2&&_.length<=o.context){var C=/\n$/.test(n),T=/\n$/.test(r),O=_.length==0&&h.length>R.oldLines;!C&&O&&n.length>0&&h.splice(R.oldLines,0,"\\ No newline at end of file"),(!C&&!O||!T)&&h.push("\\ No newline at end of file")}c.push(R),u=0,d=0,h=[]}f+=_.length,p+=_.length}},g=0;g<a.length;g++)m(g);return{oldFileName:t,newFileName:e,oldHeader:s,newHeader:i,hunks:c}}function Noe(t){if(Array.isArray(t))return t.map(Noe).join(`
`);var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader>"u"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader>"u"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}function K$e(t,e,n,r,s,i,o){return Noe(q$e(t,e,n,r,s,i,o))}function Y$e(t,e){const n={};let r=!1;for(const[s,i]of e){const o=t[s];if(o?.type!=="file")continue;const a=Ioe(s,i,o.content);a&&(r=!0,a.length>o.content.length?n[s]={type:"file",content:o.content}:n[s]={type:"diff",content:a})}if(r)return n}function Ioe(t,e,n){let r=K$e(t,t,e,n);const s=`--- ${t}
+++ ${t}
`,i=r.indexOf(s);if(i>=0&&(r=r.slice(i+s.length)),r!=="")return r}const J$e=new RegExp(`^${Hu}/`);function Pv(t){return t.replace(J$e,"")}const nU=po("FilesStore"),X$e=new TextDecoder("utf8",{fatal:!0});class Z$e{#t;#n=0;#e=new Map;files=Ph({});get filesCount(){return this.#n}constructor(e){this.#t=e,this.#r()}getFile(e){const n=this.files.get()[e];if(n?.type==="file")return n}getFileModifications(){return Y$e(this.files.get(),this.#e)}getModifiedFiles(){let e;for(const[n,r]of this.#e){const s=this.files.get()[n];s?.type==="file"&&s.content!==r&&(e||(e={}),e[n]=s)}return e}resetFileModifications(){this.#e.clear()}async saveFile(e,n){const r=await this.#t;try{const s=Af.relative(r.workdir,e);if(!s)throw new Error(`EINVAL: invalid file path, write '${s}'`);const i=this.getFile(e)?.content;!i&&i!==""&&ha("Expected content to be defined"),await r.fs.writeFile(s,n),this.#e.has(e)||this.#e.set(e,i),this.files.setKey(e,{type:"file",content:n,isBinary:!1}),nU.info("File updated")}catch(s){throw nU.error(`Failed to update file content

`,s),s}}async#r(){(await this.#t).internal.watchPaths({include:[`${Hu}/**`],exclude:["**/node_modules",".git"],includeContent:!0},F$e(100,this.#a.bind(this)))}#a(e){const n=e.flat(2);for(const{type:r,path:s,buffer:i}of n){const o=s.replace(/\/+$/g,"");switch(r){case"add_dir":{this.files.setKey(o,{type:"folder"});break}case"remove_dir":{this.files.setKey(o,void 0);for(const[a]of Object.entries(this.files))a.startsWith(o)&&this.files.setKey(a,void 0);break}case"add_file":case"change":{r==="add_file"&&this.#n++;let a="";const l=Q$e(i);l||(a=this.#s(i)),this.files.setKey(o,{type:"file",content:a,isBinary:l});break}case"remove_file":{this.#n--,this.files.setKey(o,void 0);break}}}}#s(e){if(!e||e.byteLength===0)return"";try{return X$e.decode(e)}catch(n){return console.log(n),""}}}function Q$e(t){return t===void 0?!1:$S(e9e(t),{chunkLength:100})==="binary"}function e9e(t){return vZ.from(t.buffer,t.byteOffset,t.byteLength)}const t9e="preview-updates";class n9e{#t=new Map;#n;#e;#r=new Map;#a=new Set;#s=new Map;#i=300;#o;previews=yr([]);constructor(e){if(this.#n=e,this.#e=new BroadcastChannel(t9e),this.#o=new BroadcastChannel("storage-sync-channel"),this.#e.onmessage=n=>{const{type:r,previewId:s}=n.data;if(r==="file-change"){const i=n.data.timestamp,o=this.#r.get(s)||0;i>o&&(this.#r.set(s,i),this.refreshPreview(s))}},this.#o.onmessage=n=>{const{storage:r,source:s}=n.data;r&&s!==this._getTabId()&&this._syncStorage(r)},typeof window<"u"){const n=localStorage.setItem;localStorage.setItem=(...r)=>{n.apply(localStorage,r),this._broadcastStorageSync()}}this.#l()}_getTabId(){return typeof window<"u"?(window._tabId||(window._tabId=Math.random().toString(36).substring(2,15)),window._tabId):""}_syncStorage(e){if(typeof window<"u"&&(Object.entries(e).forEach(([r,s])=>{try{Object.getPrototypeOf(localStorage).setItem.call(localStorage,r,s)}catch(i){console.error("[Preview] Error syncing storage:",i)}}),this.previews.get().forEach(r=>{const s=this.getPreviewId(r.baseUrl);s&&this.refreshPreview(s)}),typeof window<"u"&&window.location)){const r=document.querySelector("iframe");r&&(r.src=r.src)}}_broadcastStorageSync(){if(typeof window<"u"){const e={};for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);r&&(e[r]=localStorage.getItem(r)||"")}this.#o.postMessage({type:"storage-sync",storage:e,source:this._getTabId(),timestamp:Date.now()})}}async#l(){const e=await this.#n;e.on("server-ready",(n,r)=>{console.log("[Preview] Server ready on port:",n,r),this.broadcastUpdate(r),this._broadcastStorageSync()});try{(await e.fs.watch("**/*",{persistent:!0})).addEventListener("change",async()=>{const r=this.previews.get();for(const s of r){const i=this.getPreviewId(s.baseUrl);i&&this.broadcastFileChange(i)}}),typeof window<"u"&&new MutationObserver(s=>{this._broadcastStorageSync()}).observe(document.body,{childList:!0,subtree:!0,characterData:!0,attributes:!0})}catch(n){console.error("[Preview] Error setting up watchers:",n)}e.on("port",(n,r,s)=>{let i=this.#t.get(n);if(r==="close"&&i){this.#t.delete(n),this.previews.set(this.previews.get().filter(a=>a.port!==n));return}const o=this.previews.get();i||(i={port:n,ready:r==="open",baseUrl:s},this.#t.set(n,i),o.push(i)),i.ready=r==="open",i.baseUrl=s,this.previews.set([...o]),r==="open"&&this.broadcastUpdate(s)})}getPreviewId(e){const n=e.match(/^https?:\/\/([^.]+)\.local-credentialless\.webcontainer-api\.io/);return n?n[1]:null}broadcastStateChange(e){const n=Date.now();this.#r.set(e,n),this.#e.postMessage({type:"state-change",previewId:e,timestamp:n})}broadcastFileChange(e){const n=Date.now();this.#r.set(e,n),this.#e.postMessage({type:"file-change",previewId:e,timestamp:n})}broadcastUpdate(e){const n=this.getPreviewId(e);if(n){const r=Date.now();this.#r.set(n,r),this.#e.postMessage({type:"file-change",previewId:n,timestamp:r})}}refreshPreview(e){const n=this.#s.get(e);n&&clearTimeout(n);const r=setTimeout(()=>{const s=this.previews.get(),i=s.find(o=>this.getPreviewId(o.baseUrl)===e);i&&(i.ready=!1,this.previews.set([...s]),requestAnimationFrame(()=>{i.ready=!0,this.previews.set([...s])})),this.#s.delete(e)},this.#i);this.#s.set(e,r)}}function Roe(){if(typeof Promise.withResolvers=="function")return Promise.withResolvers();let t,e;const n=new Promise((r,s)=>{t=r,e=s});return{resolve:t,reject:e,promise:n}}async function r9e(t,e){const n=[],r=await t.spawn("/bin/jsh",["--osc",...n],{terminal:{cols:e.cols??80,rows:e.rows??15}}),s=r.input.getWriter(),i=r.output,o=Roe();let a=!1;return i.pipeTo(new WritableStream({write(l){if(!a){const[,c]=l.match(/\x1b\]654;([^\x07]+)\x07/)||[];c==="interactive"&&(a=!0,o.resolve())}e.write(l)}})),e.onData(l=>{a&&s.write(l)}),await o.promise,r}class s9e{#t;#n;#e;#r;#a;executionState=yr();#s;#i;constructor(){this.#n=new Promise(e=>{this.#t=e})}ready(){return this.#n}async init(e,n){this.#e=e,this.#r=n;const{process:r,output:s}=await this.newBoltShellProcess(e,n);this.#a=r,this.#s=s.getReader(),await this.waitTillOscCode("interactive"),this.#t?.()}get terminal(){return this.#r}get process(){return this.#a}async executeCommand(e,n,r){if(!this.process||!this.terminal)return;const s=this.executionState.get();s?.active&&s.abort&&s.abort(),this.terminal.input(""),await this.waitTillOscCode("prompt"),s&&s.executionPrms&&await s.executionPrms,this.terminal.input(n.trim()+`
`);const i=this.getCurrentExecutionResult();this.executionState.set({sessionId:e,active:!0,executionPrms:i,abort:r});const o=await i;if(this.executionState.set({sessionId:e,active:!1}),o)try{o.output=i9e(o.output)}catch(a){console.log("failed to format terminal output",a)}return o}async newBoltShellProcess(e,n){const r=[],s=await e.spawn("/bin/jsh",["--osc",...r],{terminal:{cols:n.cols??80,rows:n.rows??15}}),i=s.input.getWriter();this.#i=i;const[o,a]=s.output.tee(),l=Roe();let c=!1;return a.pipeTo(new WritableStream({write(u){if(!c){const[,d]=u.match(/\x1b\]654;([^\x07]+)\x07/)||[];d==="interactive"&&(c=!0,l.resolve())}n.write(u)}})),n.onData(u=>{c&&i.write(u)}),await l.promise,{process:s,output:o}}async getCurrentExecutionResult(){const{output:e,exitCode:n}=await this.waitTillOscCode("exit");return{output:e,exitCode:n}}async waitTillOscCode(e){let n="",r=0;if(!this.#s)return{output:n,exitCode:r};const s=this.#s;for(;;){const{value:i,done:o}=await s.read();if(o)break;const a=i||"";n+=a;const[,l,,,c]=a.match(/\x1b\]654;([^\x07=]+)=?((-?\d+):(\d+))?\x07/)||[];if(l==="exit"&&(r=parseInt(c,10)),l===e)break}return{output:n,exitCode:r}}}function i9e(t){return t.replace(/\x1b\](\d+;[^\x07\x1b]*|\d+[^\x07\x1b]*)\x07/g,"").replace(/\](\d+;[^\n]*|\d+[^\n]*)/g,"").replace(/\u001b\[[\?]?[0-9;]*[a-zA-Z]/g,"").replace(/\x1b\[[\?]?[0-9;]*[a-zA-Z]/g,"").replace(/\u001b\[[0-9;]*m/g,"").replace(/\x1b\[[0-9;]*m/g,"").replace(/\u001b/g,"").replace(/\x1b/g,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/^([~\/][^\n]+)/m,`$1
`).replace(/(?<!^|\n)>/g,`
>`).replace(/(?<!^|\n|\w)(error|failed|warning|Error|Failed|Warning):/g,`
$1:`).replace(/(?<!^|\n|\/)(at\s+(?!async|sync))/g,`
at `).replace(/\bat\s+async/g,"at async").replace(/(?<!^|\n)(npm ERR!)/g,`
$1`).split(`
`).map(o=>o.trim()).filter(o=>o.length>0).join(`
`).replace(/\n{3,}/g,`

`).replace(/:\s+/g,": ").replace(/\s{2,}/g," ").replace(/^\s+|\s+$/g,"").replace(/\u0000/g,"")}function o9e(){return new s9e}const a9e="\x1B[0m",l9e={red:"\x1B[1;31m"},rU={red:t=>`${l9e.red}${t}${a9e}`};class c9e{#t;#n=[];#e=o9e();showTerminal=yr(!0);constructor(e){this.#t=e}get boltTerminal(){return this.#e}toggleTerminal(e){this.showTerminal.set(e!==void 0?e:!this.showTerminal.get())}async attachBoltTerminal(e){try{const n=await this.#t;await this.#e.init(n,e)}catch(n){e.write(rU.red(`Failed to spawn bolt shell

`)+n.message);return}}async attachTerminal(e){try{const n=await r9e(await this.#t,e);this.#n.push({terminal:e,process:n})}catch(n){e.write(rU.red(`Failed to spawn shell

`)+n.message);return}}onTerminalResize(e,n){for(const{process:r}of this.#n)r.resize({cols:e,rows:n})}}function u2(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ooe={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(c,u){if(!s[c]){if(!r[c]){var d=typeof u2=="function"&&u2;if(!u&&d)return d(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=s[c]={exports:{}};r[c][0].call(f.exports,function(p){var m=r[c][1][p];return o(m||p)},f,f.exports,n,r,s,i)}return s[c].exports}for(var a=typeof u2=="function"&&u2,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c,u,d,h,f,p,m,g=[],b=0,v=l.length,w=v,_=i.getTypeOf(l)!=="string";b<l.length;)w=v-b,d=_?(c=l[b++],u=b<v?l[b++]:0,b<v?l[b++]:0):(c=l.charCodeAt(b++),u=b<v?l.charCodeAt(b++):0,b<v?l.charCodeAt(b++):0),h=c>>2,f=(3&c)<<4|u>>4,p=1<w?(15&u)<<2|d>>6:64,m=2<w?63&d:64,g.push(a.charAt(h)+a.charAt(f)+a.charAt(p)+a.charAt(m));return g.join("")},s.decode=function(l){var c,u,d,h,f,p,m=0,g=0,b="data:";if(l.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var v,w=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&w--,l.charAt(l.length-2)===a.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|w):new Array(0|w);m<l.length;)c=a.indexOf(l.charAt(m++))<<2|(h=a.indexOf(l.charAt(m++)))>>4,u=(15&h)<<4|(f=a.indexOf(l.charAt(m++)))>>2,d=(3&f)<<6|(p=a.indexOf(l.charAt(m++))),v[g++]=c,f!==64&&(v[g++]=u),p!==64&&(v[g++]=d);return v}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(u,d,h,f,p){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=p}c.prototype={getContentWorker:function(){var u=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,d,h){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(c,u,d,h){var f=o,p=h+d;c^=-1;for(var m=h;m<p;m++)c=c>>>8^f[255&(c^u[m])];return-1^c}(0|l,a,a.length,0):function(c,u,d,h){var f=o,p=h+d;c^=-1;for(var m=h;m<p;m++)c=c>>>8^f[255&(c^u.charCodeAt(m))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=i?"uint8array":"array";function u(d,h){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}s.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,d.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},s.compressWorker=function(d){return new u("Deflate",d)},s.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(f,p){var m,g="";for(m=0;m<p;m++)g+=String.fromCharCode(255&f),f>>>=8;return g}function o(f,p,m,g,b,v){var w,_,S=f.file,E=f.compression,k=v!==c.utf8encode,x=a.transformTo("string",v(S.name)),I=a.transformTo("string",c.utf8encode(S.name)),R=S.comment,C=a.transformTo("string",v(R)),T=a.transformTo("string",c.utf8encode(R)),O=I.length!==S.name.length,P=T.length!==R.length,U="",ee="",X="",Z=S.dir,F=S.date,M={crc32:0,compressedSize:0,uncompressedSize:0};p&&!m||(M.crc32=f.crc32,M.compressedSize=f.compressedSize,M.uncompressedSize=f.uncompressedSize);var G=0;p&&(G|=8),k||!O&&!P||(G|=2048);var D=0,j=0;Z&&(D|=16),b==="UNIX"?(j=798,D|=function(q,ne){var te=q;return q||(te=ne?16893:33204),(65535&te)<<16}(S.unixPermissions,Z)):(j=20,D|=function(q){return 63&(q||0)}(S.dosPermissions)),w=F.getUTCHours(),w<<=6,w|=F.getUTCMinutes(),w<<=5,w|=F.getUTCSeconds()/2,_=F.getUTCFullYear()-1980,_<<=4,_|=F.getUTCMonth()+1,_<<=5,_|=F.getUTCDate(),O&&(ee=i(1,1)+i(u(x),4)+I,U+="up"+i(ee.length,2)+ee),P&&(X=i(1,1)+i(u(C),4)+T,U+="uc"+i(X.length,2)+X);var W="";return W+=`
\0`,W+=i(G,2),W+=E.magic,W+=i(w,2),W+=i(_,2),W+=i(M.crc32,4),W+=i(M.compressedSize,4),W+=i(M.uncompressedSize,4),W+=i(x.length,2),W+=i(U.length,2),{fileRecord:d.LOCAL_FILE_HEADER+W+x+U,dirRecord:d.CENTRAL_FILE_HEADER+i(j,2)+W+i(C.length,2)+"\0\0\0\0"+i(D,4)+i(g,4)+x+U+C}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),u=n("../crc32"),d=n("../signature");function h(f,p,m,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=m,this.encodeFileName=g,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(f){var p=f.meta.percent||0,m=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:m?(p+100*(m-g-1))/m:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var p=this.streamFiles&&!f.file.dir;if(p){var m=o(f,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var p=this.streamFiles&&!f.file.dir,m=o(f,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),p)this.push({data:function(g){return d.DATA_DESCRIPTOR+i(g.crc32,4)+i(g.compressedSize,4)+i(g.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var m=this.bytesWritten-f,g=function(b,v,w,_,S){var E=a.transformTo("string",S(_));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(b,2)+i(b,2)+i(v,4)+i(w,4)+i(E.length,2)+E}(this.dirRecords.length,m,f,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var p=this;return f.on("data",function(m){p.processChunk(m)}),f.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),f.on("error",function(m){p.error(m)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var p=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var m=0;m<p.length;m++)try{p[m].error(f)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,p=0;p<f.length;p++)f[p].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,c){var u=new o(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{a.forEach(function(h,f){d++;var p=function(v,w){var _=v||w,S=i[_];if(!S)throw new Error(_+" is not a valid compression method !");return S}(f.options.compression,l.compression),m=f.options.compressionOptions||l.compressionOptions||{},g=f.dir,b=f.date;f._compressWorker(p,m).withStreamInfo("file",{name:h,dir:g,date:b,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function d(h){return new o.Promise(function(f,p){var m=h.decompressed.getContentWorker().pipe(new c);m.on("error",function(g){p(g)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(h,f){var p=this;return f=i.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(m){var g=new l(f);return g.load(m),g}).then(function(m){var g=[o.Promise.resolve(m)],b=m.files;if(f.checkCRC32)for(var v=0;v<b.length;v++)g.push(d(b[v]));return o.Promise.all(g)}).then(function(m){for(var g=m.shift(),b=g.files,v=0;v<b.length;v++){var w=b[v],_=w.fileNameStr,S=i.resolve(w.fileNameStr);p.file(S,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:f.createFolders}),w.dir||(p.file(S).unsafeOriginalName=_)}return g.zipComment.length&&(p.comment=g.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,c){i.call(this,l),this._helper=a;var u=this;a.on("data",function(d,h){u.push(d)||u._helper.pause(),c&&c(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof _t<"u",newBufferFrom:function(i,o){if(_t.from&&_t.from!==Uint8Array.from)return _t.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new _t(i,o)},allocBuffer:function(i){if(_t.alloc)return _t.alloc(i);var o=new _t(i);return o.fill(0),o},isBuffer:function(i){return _t.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(S,E,k){var x,I=a.getTypeOf(E),R=a.extend(k||{},u);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&16384&R.unixPermissions&&(R.dir=!0),R.dosPermissions&&16&R.dosPermissions&&(R.dir=!0),R.dir&&(S=b(S)),R.createFolders&&(x=g(S))&&v.call(this,x,!0);var C=I==="string"&&R.binary===!1&&R.base64===!1;k&&k.binary!==void 0||(R.binary=!C),(E instanceof d&&E.uncompressedSize===0||R.dir||!E||E.length===0)&&(R.base64=!1,R.binary=!0,E="",R.compression="STORE",I="string");var T=null;T=E instanceof d||E instanceof l?E:p.isNode&&p.isStream(E)?new m(S,E):a.prepareContent(S,E,R.binary,R.optimizedBinaryString,R.base64);var O=new h(S,T,R);this.files[S]=O}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),u=n("./defaults"),d=n("./compressedObject"),h=n("./zipObject"),f=n("./generate"),p=n("./nodejsUtils"),m=n("./nodejs/NodejsStreamInputAdapter"),g=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var E=S.lastIndexOf("/");return 0<E?S.substring(0,E):""},b=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},v=function(S,E){return E=E!==void 0?E:u.createFolders,S=b(S),this.files[S]||i.call(this,S,null,{dir:!0,createFolders:E}),this.files[S]};function w(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var E,k,x;for(E in this.files)x=this.files[E],(k=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&S(k,x)},filter:function(S){var E=[];return this.forEach(function(k,x){S(k,x)&&E.push(x)}),E},file:function(S,E,k){if(arguments.length!==1)return S=this.root+S,i.call(this,S,E,k),this;if(w(S)){var x=S;return this.filter(function(R,C){return!C.dir&&x.test(R)})}var I=this.files[this.root+S];return I&&!I.dir?I:null},folder:function(S){if(!S)return this;if(w(S))return this.filter(function(I,R){return R.dir&&S.test(I)});var E=this.root+S,k=v.call(this,E),x=this.clone();return x.root=k.name,x},remove:function(S){S=this.root+S;var E=this.files[S];if(E||(S.slice(-1)!=="/"&&(S+="/"),E=this.files[S]),E&&!E.dir)delete this.files[S];else for(var k=this.filter(function(I,R){return R.name.slice(0,S.length)===S}),x=0;x<k.length;x++)delete this.files[k[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var E,k={};try{if((k=a.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var x=k.comment||this.comment||"";E=f.generateWorker(this,k,x)}catch(I){(E=new l("error")).error(I)}return new c(E,k.type||"string",k.mimeType)},generateAsync:function(S,E){return this.generateInternalStream(S).accumulate(E)},generateNodeStream:function(S,E){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(E)}};r.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&c===h[1]&&u===h[2]&&d===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(d){var h=i.getTypeOf(d);return i.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new c(d):o.uint8array?new u(i.transformTo("uint8array",d)):new a(i.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=i.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),u=n("../external"),d=null;if(c.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,m){return new u.Promise(function(g,b){var v=[],w=p._internalType,_=p._outputType,S=p._mimeType;p.on("data",function(E,k){v.push(E),m&&m(k)}).on("error",function(E){v=[],b(E)}).on("end",function(){try{var E=function(k,x,I){switch(k){case"blob":return i.newBlob(i.transformTo("arraybuffer",x),I);case"base64":return l.encode(x);default:return i.transformTo(k,x)}}(_,function(k,x){var I,R=0,C=null,T=0;for(I=0;I<x.length;I++)T+=x[I].length;switch(k){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(C=new Uint8Array(T),I=0;I<x.length;I++)C.set(x[I],R),R+=x[I].length;return C;case"nodebuffer":return _t.concat(x);default:throw new Error("concat : unsupported type '"+k+"'")}}(w,v),S);g(E)}catch(k){b(k)}v=[]}).resume()})}function f(p,m,g){var b=m;switch(m){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=m,this._mimeType=g,i.checkSupport(b),this._worker=p.pipe(new o(b)),p.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}f.prototype={accumulate:function(p){return h(this,p)},on:function(p,m){var g=this;return p==="data"?this._worker.on(p,function(b){m.call(g,b.data,b.meta)}):this._worker.on(p,function(){i.delay(m,arguments,g)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof _t<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}s.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):function(p){var m,g,b,v,w,_=p.length,S=0;for(v=0;v<_;v++)(64512&(g=p.charCodeAt(v)))==55296&&v+1<_&&(64512&(b=p.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(b-56320),v++),S+=g<128?1:g<2048?2:g<65536?3:4;for(m=o.uint8array?new Uint8Array(S):new Array(S),v=w=0;w<S;v++)(64512&(g=p.charCodeAt(v)))==55296&&v+1<_&&(64512&(b=p.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(b-56320),v++),g<128?m[w++]=g:(g<2048?m[w++]=192|g>>>6:(g<65536?m[w++]=224|g>>>12:(m[w++]=240|g>>>18,m[w++]=128|g>>>12&63),m[w++]=128|g>>>6&63),m[w++]=128|63&g);return m}(f)},s.utf8decode=function(f){return o.nodebuffer?i.transformTo("nodebuffer",f).toString("utf-8"):function(p){var m,g,b,v,w=p.length,_=new Array(2*w);for(m=g=0;m<w;)if((b=p[m++])<128)_[g++]=b;else if(4<(v=c[b]))_[g++]=65533,m+=v-1;else{for(b&=v===2?31:v===3?15:7;1<v&&m<w;)b=b<<6|63&p[m++],v--;1<v?_[g++]=65533:b<65536?_[g++]=b:(b-=65536,_[g++]=55296|b>>10&1023,_[g++]=56320|1023&b)}return _.length!==g&&(_.subarray?_=_.subarray(0,g):_.length=g),i.applyFromCharCode(_)}(f=i.transformTo(o.uint8array?"uint8array":"array",f))},i.inherits(d,l),d.prototype.processChunk=function(f){var p=i.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=p;(p=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var g=function(v,w){var _;for((w=w||v.length)>v.length&&(w=v.length),_=w-1;0<=_&&(192&v[_])==128;)_--;return _<0||_===0?w:_+c[v[_]]>w?_:w}(p),b=p;g!==p.length&&(o.uint8array?(b=p.subarray(0,g),this.leftOver=p.subarray(g,p.length)):(b=p.slice(0,g),this.leftOver=p.slice(g,p.length))),this.push({data:s.utf8decode(b),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=d,i.inherits(h,l),h.prototype.processChunk=function(f){this.push({data:s.utf8encode(f.data),meta:f.meta})},s.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(m){return m}function u(m,g){for(var b=0;b<m.length;++b)g[b]=255&m.charCodeAt(b);return g}n("setimmediate"),s.newBlob=function(m,g){s.checkSupport("blob");try{return new Blob([m],{type:g})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(m),b.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,g,b){var v=[],w=0,_=m.length;if(_<=b)return String.fromCharCode.apply(null,m);for(;w<_;)g==="array"||g==="nodebuffer"?v.push(String.fromCharCode.apply(null,m.slice(w,Math.min(w+b,_)))):v.push(String.fromCharCode.apply(null,m.subarray(w,Math.min(w+b,_)))),w+=b;return v.join("")},stringifyByChar:function(m){for(var g="",b=0;b<m.length;b++)g+=String.fromCharCode(m[b]);return g},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(m){var g=65536,b=s.getTypeOf(m),v=!0;if(b==="uint8array"?v=d.applyCanBeUsed.uint8array:b==="nodebuffer"&&(v=d.applyCanBeUsed.nodebuffer),v)for(;1<g;)try{return d.stringifyByChunk(m,b,g)}catch{g=Math.floor(g/2)}return d.stringifyByChar(m)}function f(m,g){for(var b=0;b<m.length;b++)g[b]=m[b];return g}s.applyFromCharCode=h;var p={};p.string={string:c,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return p.string.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:function(m){return u(m,a.allocBuffer(m.length))}},p.array={string:h,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},p.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return f(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},p.uint8array={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return a.newBufferFrom(m)}},p.nodebuffer={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return p.nodebuffer.uint8array(m).buffer},uint8array:function(m){return f(m,new Uint8Array(m.length))},nodebuffer:c},s.transformTo=function(m,g){if(g=g||"",!m)return g;s.checkSupport(m);var b=s.getTypeOf(g);return p[b][m](g)},s.resolve=function(m){for(var g=m.split("/"),b=[],v=0;v<g.length;v++){var w=g[v];w==="."||w===""&&v!==0&&v!==g.length-1||(w===".."?b.pop():b.push(w))}return b.join("/")},s.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(m)?"nodebuffer":i.uint8array&&m instanceof Uint8Array?"uint8array":i.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(m){if(!i[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(m){var g,b,v="";for(b=0;b<(m||"").length;b++)v+="\\x"+((g=m.charCodeAt(b))<16?"0":"")+g.toString(16).toUpperCase();return v},s.delay=function(m,g,b){setImmediate(function(){m.apply(b||null,g||[])})},s.inherits=function(m,g){function b(){}b.prototype=g.prototype,m.prototype=new b},s.extend=function(){var m,g,b={};for(m=0;m<arguments.length;m++)for(g in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],g)&&b[g]===void 0&&(b[g]=arguments[m][g]);return b},s.prepareContent=function(m,g,b,v,w){return l.Promise.resolve(g).then(function(_){return i.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new l.Promise(function(S,E){var k=new FileReader;k.onload=function(x){S(x.target.result)},k.onerror=function(x){E(x.target.error)},k.readAsArrayBuffer(_)}):_}).then(function(_){var S=s.getTypeOf(_);return S?(S==="arraybuffer"?_=s.transformTo("uint8array",_):S==="string"&&(w?_=o.decode(_):b&&v!==!0&&(_=function(E){return u(E,i.uint8array?new Uint8Array(E.length):new Array(E.length))}(_))),_):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var p=this.reader.readString(4)===h;return this.reader.setIndex(f),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",f=o.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,p=this.zip64EndOfCentralSize-44;0<p;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var p=h-f;if(0<p)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(d){this.reader=i(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),u=n("./compressions"),d=n("./support");function h(f,p){this.options=f,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var p,m;if(f.skip(22),this.fileNameLength=f.readInt(2),m=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(g){for(var b in u)if(Object.prototype.hasOwnProperty.call(u,b)&&u[b].magic===g)return u[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var p=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(p),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var p,m,g,b=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<b;)p=f.readInt(2),m=f.readInt(2),g=f.readData(m),this.extraFields[p]={id:p,length:m,value:g};f.setIndex(b)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var b=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var p=i(f.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var p=i(f.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(p,m,g){this.name=p,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=m,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),u=n("./stream/GenericWorker");i.prototype={internalStream:function(p){var m=null,g="string";try{if(!p)throw new Error("No output type specified.");var b=(g=p.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),m=this._decompressWorker();var v=!this._dataBinary;v&&!b&&(m=m.pipe(new l.Utf8EncodeWorker)),!v&&b&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(w){(m=new u("error")).error(w)}return new o(m,g,"")},async:function(p,m){return this.internalStream(p).accumulate(m)},nodeStream:function(p,m){return this.internalStream(p||"nodebuffer").toNodejsStream(m)},_compressWorker:function(p,m){if(this._data instanceof c&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(g,p,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)i.prototype[d[f]]=h;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,u=new l(p),d=i.document.createTextNode("");u.observe(d,{characterData:!0}),o=function(){d.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var m=i.document.createElement("script");m.onreadystatechange=function(){p(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},i.document.documentElement.appendChild(m)}:function(){setTimeout(p,0)};else{var h=new i.MessageChannel;h.port1.onmessage=p,o=function(){h.port2.postMessage(0)}}var f=[];function p(){var m,g;a=!0;for(var b=f.length;b;){for(g=f,f=[],m=-1;++m<b;)g[m]();b=f.length}a=!1}r.exports=function(m){f.push(m)!==1||a||o()}}).call(this,typeof Ws<"u"?Ws:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function d(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,b!==o&&m(this,b)}function h(b,v,w){this.promise=b,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function f(b,v,w){i(function(){var _;try{_=v(w)}catch(S){return a.reject(b,S)}_===b?a.reject(b,new TypeError("Cannot resolve promise with itself")):a.resolve(b,_)})}function p(b){var v=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof v=="function")return function(){v.apply(b,arguments)}}function m(b,v){var w=!1;function _(k){w||(w=!0,a.reject(b,k))}function S(k){w||(w=!0,a.resolve(b,k))}var E=g(function(){v(S,_)});E.status==="error"&&_(E.value)}function g(b,v){var w={};try{w.value=b(v),w.status="success"}catch(_){w.status="error",w.value=_}return w}(r.exports=d).prototype.finally=function(b){if(typeof b!="function")return this;var v=this.constructor;return this.then(function(w){return v.resolve(b()).then(function(){return w})},function(w){return v.resolve(b()).then(function(){throw w})})},d.prototype.catch=function(b){return this.then(null,b)},d.prototype.then=function(b,v){if(typeof b!="function"&&this.state===c||typeof v!="function"&&this.state===l)return this;var w=new this.constructor(o);return this.state!==u?f(w,this.state===c?b:v,this.outcome):this.queue.push(new h(w,b,v)),w},h.prototype.callFulfilled=function(b){a.resolve(this.promise,b)},h.prototype.otherCallFulfilled=function(b){f(this.promise,this.onFulfilled,b)},h.prototype.callRejected=function(b){a.reject(this.promise,b)},h.prototype.otherCallRejected=function(b){f(this.promise,this.onRejected,b)},a.resolve=function(b,v){var w=g(p,v);if(w.status==="error")return a.reject(b,w.value);var _=w.value;if(_)m(b,_);else{b.state=c,b.outcome=v;for(var S=-1,E=b.queue.length;++S<E;)b.queue[S].callFulfilled(v)}return b},a.reject=function(b,v){b.state=l,b.outcome=v;for(var w=-1,_=b.queue.length;++w<_;)b.queue[w].callRejected(v);return b},d.resolve=function(b){return b instanceof this?b:a.resolve(new this(o),b)},d.reject=function(b){var v=new this(o);return a.reject(v,b)},d.all=function(b){var v=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=b.length,_=!1;if(!w)return this.resolve([]);for(var S=new Array(w),E=0,k=-1,x=new this(o);++k<w;)I(b[k],k);return x;function I(R,C){v.resolve(R).then(function(T){S[C]=T,++E!==w||_||(_=!0,a.resolve(x,S))},function(T){_||(_=!0,a.reject(x,T))})}},d.race=function(b){var v=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=b.length,_=!1;if(!w)return this.resolve([]);for(var S=-1,E=new this(o);++S<w;)k=b[S],v.resolve(k).then(function(x){_||(_=!0,a.resolve(E,x))},function(x){_||(_=!0,a.reject(E,x))});var k;return E}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,f=0,p=8;function m(b){if(!(this instanceof m))return new m(b);this.options=o.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},b||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var w=i.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(w!==d)throw new Error(l[w]);if(v.header&&i.deflateSetHeader(this.strm,v.header),v.dictionary){var _;if(_=typeof v.dictionary=="string"?a.string2buf(v.dictionary):u.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(w=i.deflateSetDictionary(this.strm,_))!==d)throw new Error(l[w]);this._dict_set=!0}}function g(b,v){var w=new m(v);if(w.push(b,!0),w.err)throw w.msg||l[w.err];return w.result}m.prototype.push=function(b,v){var w,_,S=this.strm,E=this.options.chunkSize;if(this.ended)return!1;_=v===~~v?v:v===!0?4:0,typeof b=="string"?S.input=a.string2buf(b):u.call(b)==="[object ArrayBuffer]"?S.input=new Uint8Array(b):S.input=b,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(E),S.next_out=0,S.avail_out=E),(w=i.deflate(S,_))!==1&&w!==d)return this.onEnd(w),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(S.output,S.next_out))):this.onData(o.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&w!==1);return _===4?(w=i.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===d):_!==2||(this.onEnd(d),!(S.avail_out=0))},m.prototype.onData=function(b){this.chunks.push(b)},m.prototype.onEnd=function(b){b===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},s.Deflate=m,s.deflate=g,s.deflateRaw=function(b,v){return(v=v||{}).raw=!0,g(b,v)},s.gzip=function(b,v){return(v=v||{}).gzip=!0,g(b,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=n("./zlib/gzheader"),h=Object.prototype.toString;function f(m){if(!(this instanceof f))return new f(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||m&&m.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=i.inflateInit2(this.strm,g.windowBits);if(b!==l.Z_OK)throw new Error(c[b]);this.header=new d,i.inflateGetHeader(this.strm,this.header)}function p(m,g){var b=new f(g);if(b.push(m,!0),b.err)throw b.msg||c[b.err];return b.result}f.prototype.push=function(m,g){var b,v,w,_,S,E,k=this.strm,x=this.options.chunkSize,I=this.options.dictionary,R=!1;if(this.ended)return!1;v=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?k.input=a.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?k.input=new Uint8Array(m):k.input=m,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(x),k.next_out=0,k.avail_out=x),(b=i.inflate(k,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&I&&(E=typeof I=="string"?a.string2buf(I):h.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,b=i.inflateSetDictionary(this.strm,E)),b===l.Z_BUF_ERROR&&R===!0&&(b=l.Z_OK,R=!1),b!==l.Z_STREAM_END&&b!==l.Z_OK)return this.onEnd(b),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&b!==l.Z_STREAM_END&&(k.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=a.utf8border(k.output,k.next_out),_=k.next_out-w,S=a.buf2string(k.output,w),k.next_out=_,k.avail_out=x-_,_&&o.arraySet(k.output,k.output,w,_,0),this.onData(S)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(R=!0)}while((0<k.avail_in||k.avail_out===0)&&b!==l.Z_STREAM_END);return b===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(b=i.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(k.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},s.Inflate=f,s.inflate=p,s.inflateRaw=function(m,g){return(g=g||{}).raw=!0,p(m,g)},s.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(l[d]=u[d])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,u,d,h){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+d),h);else for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){var c,u,d,h,f,p;for(c=d=0,u=l.length;c<u;c++)d+=l[c].length;for(p=new Uint8Array(d),c=h=0,u=l.length;c<u;c++)f=l[c],p.set(f,h),h+=f.length;return p}},a={arraySet:function(l,c,u,d,h){for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(d,h){if(h<65537&&(d.subarray&&a||!d.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(d,h));for(var f="",p=0;p<h;p++)f+=String.fromCharCode(d[p]);return f}l[254]=l[254]=1,s.string2buf=function(d){var h,f,p,m,g,b=d.length,v=0;for(m=0;m<b;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<b&&(64512&(p=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),v+=f<128?1:f<2048?2:f<65536?3:4;for(h=new i.Buf8(v),m=g=0;g<v;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<b&&(64512&(p=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),f<128?h[g++]=f:(f<2048?h[g++]=192|f>>>6:(f<65536?h[g++]=224|f>>>12:(h[g++]=240|f>>>18,h[g++]=128|f>>>12&63),h[g++]=128|f>>>6&63),h[g++]=128|63&f);return h},s.buf2binstring=function(d){return u(d,d.length)},s.binstring2buf=function(d){for(var h=new i.Buf8(d.length),f=0,p=h.length;f<p;f++)h[f]=d.charCodeAt(f);return h},s.buf2string=function(d,h){var f,p,m,g,b=h||d.length,v=new Array(2*b);for(f=p=0;f<b;)if((m=d[f++])<128)v[p++]=m;else if(4<(g=l[m]))v[p++]=65533,f+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&f<b;)m=m<<6|63&d[f++],g--;1<g?v[p++]=65533:m<65536?v[p++]=m:(m-=65536,v[p++]=55296|m>>10&1023,v[p++]=56320|1023&m)}return u(v,p)},s.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+l[d[f]]>h?f:h}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var c=65535&i|0,u=i>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;u=u+(c=c+o[l++]|0)|0,--d;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var u=i,d=c+l;o^=-1;for(var h=c;h<d;h++)o=o>>>8^u[255&(o^a[h])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),u=n("./messages"),d=0,h=4,f=0,p=-2,m=-1,g=4,b=2,v=8,w=9,_=286,S=30,E=19,k=2*_+1,x=15,I=3,R=258,C=R+I+1,T=42,O=113,P=1,U=2,ee=3,X=4;function Z(K,ge){return K.msg=u[ge],ge}function F(K){return(K<<1)-(4<K?9:0)}function M(K){for(var ge=K.length;0<=--ge;)K[ge]=0}function G(K){var ge=K.state,re=ge.pending;re>K.avail_out&&(re=K.avail_out),re!==0&&(o.arraySet(K.output,ge.pending_buf,ge.pending_out,re,K.next_out),K.next_out+=re,ge.pending_out+=re,K.total_out+=re,K.avail_out-=re,ge.pending-=re,ge.pending===0&&(ge.pending_out=0))}function D(K,ge){a._tr_flush_block(K,0<=K.block_start?K.block_start:-1,K.strstart-K.block_start,ge),K.block_start=K.strstart,G(K.strm)}function j(K,ge){K.pending_buf[K.pending++]=ge}function W(K,ge){K.pending_buf[K.pending++]=ge>>>8&255,K.pending_buf[K.pending++]=255&ge}function q(K,ge){var re,le,se=K.max_chain_length,fe=K.strstart,Ce=K.prev_length,Ie=K.nice_match,we=K.strstart>K.w_size-C?K.strstart-(K.w_size-C):0,Ue=K.window,Fe=K.w_mask,Be=K.prev,ke=K.strstart+R,Je=Ue[fe+Ce-1],Xe=Ue[fe+Ce];K.prev_length>=K.good_match&&(se>>=2),Ie>K.lookahead&&(Ie=K.lookahead);do if(Ue[(re=ge)+Ce]===Xe&&Ue[re+Ce-1]===Je&&Ue[re]===Ue[fe]&&Ue[++re]===Ue[fe+1]){fe+=2,re++;do;while(Ue[++fe]===Ue[++re]&&Ue[++fe]===Ue[++re]&&Ue[++fe]===Ue[++re]&&Ue[++fe]===Ue[++re]&&Ue[++fe]===Ue[++re]&&Ue[++fe]===Ue[++re]&&Ue[++fe]===Ue[++re]&&Ue[++fe]===Ue[++re]&&fe<ke);if(le=R-(ke-fe),fe=ke-R,Ce<le){if(K.match_start=ge,Ie<=(Ce=le))break;Je=Ue[fe+Ce-1],Xe=Ue[fe+Ce]}}while((ge=Be[ge&Fe])>we&&--se!=0);return Ce<=K.lookahead?Ce:K.lookahead}function ne(K){var ge,re,le,se,fe,Ce,Ie,we,Ue,Fe,Be=K.w_size;do{if(se=K.window_size-K.lookahead-K.strstart,K.strstart>=Be+(Be-C)){for(o.arraySet(K.window,K.window,Be,Be,0),K.match_start-=Be,K.strstart-=Be,K.block_start-=Be,ge=re=K.hash_size;le=K.head[--ge],K.head[ge]=Be<=le?le-Be:0,--re;);for(ge=re=Be;le=K.prev[--ge],K.prev[ge]=Be<=le?le-Be:0,--re;);se+=Be}if(K.strm.avail_in===0)break;if(Ce=K.strm,Ie=K.window,we=K.strstart+K.lookahead,Ue=se,Fe=void 0,Fe=Ce.avail_in,Ue<Fe&&(Fe=Ue),re=Fe===0?0:(Ce.avail_in-=Fe,o.arraySet(Ie,Ce.input,Ce.next_in,Fe,we),Ce.state.wrap===1?Ce.adler=l(Ce.adler,Ie,Fe,we):Ce.state.wrap===2&&(Ce.adler=c(Ce.adler,Ie,Fe,we)),Ce.next_in+=Fe,Ce.total_in+=Fe,Fe),K.lookahead+=re,K.lookahead+K.insert>=I)for(fe=K.strstart-K.insert,K.ins_h=K.window[fe],K.ins_h=(K.ins_h<<K.hash_shift^K.window[fe+1])&K.hash_mask;K.insert&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[fe+I-1])&K.hash_mask,K.prev[fe&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=fe,fe++,K.insert--,!(K.lookahead+K.insert<I)););}while(K.lookahead<C&&K.strm.avail_in!==0)}function te(K,ge){for(var re,le;;){if(K.lookahead<C){if(ne(K),K.lookahead<C&&ge===d)return P;if(K.lookahead===0)break}if(re=0,K.lookahead>=I&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,re=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),re!==0&&K.strstart-re<=K.w_size-C&&(K.match_length=q(K,re)),K.match_length>=I)if(le=a._tr_tally(K,K.strstart-K.match_start,K.match_length-I),K.lookahead-=K.match_length,K.match_length<=K.max_lazy_match&&K.lookahead>=I){for(K.match_length--;K.strstart++,K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,re=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart,--K.match_length!=0;);K.strstart++}else K.strstart+=K.match_length,K.match_length=0,K.ins_h=K.window[K.strstart],K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+1])&K.hash_mask;else le=a._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++;if(le&&(D(K,!1),K.strm.avail_out===0))return P}return K.insert=K.strstart<I-1?K.strstart:I-1,ge===h?(D(K,!0),K.strm.avail_out===0?ee:X):K.last_lit&&(D(K,!1),K.strm.avail_out===0)?P:U}function Y(K,ge){for(var re,le,se;;){if(K.lookahead<C){if(ne(K),K.lookahead<C&&ge===d)return P;if(K.lookahead===0)break}if(re=0,K.lookahead>=I&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,re=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),K.prev_length=K.match_length,K.prev_match=K.match_start,K.match_length=I-1,re!==0&&K.prev_length<K.max_lazy_match&&K.strstart-re<=K.w_size-C&&(K.match_length=q(K,re),K.match_length<=5&&(K.strategy===1||K.match_length===I&&4096<K.strstart-K.match_start)&&(K.match_length=I-1)),K.prev_length>=I&&K.match_length<=K.prev_length){for(se=K.strstart+K.lookahead-I,le=a._tr_tally(K,K.strstart-1-K.prev_match,K.prev_length-I),K.lookahead-=K.prev_length-1,K.prev_length-=2;++K.strstart<=se&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,re=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),--K.prev_length!=0;);if(K.match_available=0,K.match_length=I-1,K.strstart++,le&&(D(K,!1),K.strm.avail_out===0))return P}else if(K.match_available){if((le=a._tr_tally(K,0,K.window[K.strstart-1]))&&D(K,!1),K.strstart++,K.lookahead--,K.strm.avail_out===0)return P}else K.match_available=1,K.strstart++,K.lookahead--}return K.match_available&&(le=a._tr_tally(K,0,K.window[K.strstart-1]),K.match_available=0),K.insert=K.strstart<I-1?K.strstart:I-1,ge===h?(D(K,!0),K.strm.avail_out===0?ee:X):K.last_lit&&(D(K,!1),K.strm.avail_out===0)?P:U}function de(K,ge,re,le,se){this.good_length=K,this.max_lazy=ge,this.nice_length=re,this.max_chain=le,this.func=se}function Se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*S+1)),this.bl_tree=new o.Buf16(2*(2*E+1)),M(this.dyn_ltree),M(this.dyn_dtree),M(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(x+1),this.heap=new o.Buf16(2*_+1),M(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*_+1),M(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xe(K){var ge;return K&&K.state?(K.total_in=K.total_out=0,K.data_type=b,(ge=K.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?T:O,K.adler=ge.wrap===2?0:1,ge.last_flush=d,a._tr_init(ge),f):Z(K,p)}function Ae(K){var ge=xe(K);return ge===f&&function(re){re.window_size=2*re.w_size,M(re.head),re.max_lazy_match=i[re.level].max_lazy,re.good_match=i[re.level].good_length,re.nice_match=i[re.level].nice_length,re.max_chain_length=i[re.level].max_chain,re.strstart=0,re.block_start=0,re.lookahead=0,re.insert=0,re.match_length=re.prev_length=I-1,re.match_available=0,re.ins_h=0}(K.state),ge}function Pe(K,ge,re,le,se,fe){if(!K)return p;var Ce=1;if(ge===m&&(ge=6),le<0?(Ce=0,le=-le):15<le&&(Ce=2,le-=16),se<1||w<se||re!==v||le<8||15<le||ge<0||9<ge||fe<0||g<fe)return Z(K,p);le===8&&(le=9);var Ie=new Se;return(K.state=Ie).strm=K,Ie.wrap=Ce,Ie.gzhead=null,Ie.w_bits=le,Ie.w_size=1<<Ie.w_bits,Ie.w_mask=Ie.w_size-1,Ie.hash_bits=se+7,Ie.hash_size=1<<Ie.hash_bits,Ie.hash_mask=Ie.hash_size-1,Ie.hash_shift=~~((Ie.hash_bits+I-1)/I),Ie.window=new o.Buf8(2*Ie.w_size),Ie.head=new o.Buf16(Ie.hash_size),Ie.prev=new o.Buf16(Ie.w_size),Ie.lit_bufsize=1<<se+6,Ie.pending_buf_size=4*Ie.lit_bufsize,Ie.pending_buf=new o.Buf8(Ie.pending_buf_size),Ie.d_buf=1*Ie.lit_bufsize,Ie.l_buf=3*Ie.lit_bufsize,Ie.level=ge,Ie.strategy=fe,Ie.method=re,Ae(K)}i=[new de(0,0,0,0,function(K,ge){var re=65535;for(re>K.pending_buf_size-5&&(re=K.pending_buf_size-5);;){if(K.lookahead<=1){if(ne(K),K.lookahead===0&&ge===d)return P;if(K.lookahead===0)break}K.strstart+=K.lookahead,K.lookahead=0;var le=K.block_start+re;if((K.strstart===0||K.strstart>=le)&&(K.lookahead=K.strstart-le,K.strstart=le,D(K,!1),K.strm.avail_out===0)||K.strstart-K.block_start>=K.w_size-C&&(D(K,!1),K.strm.avail_out===0))return P}return K.insert=0,ge===h?(D(K,!0),K.strm.avail_out===0?ee:X):(K.strstart>K.block_start&&(D(K,!1),K.strm.avail_out),P)}),new de(4,4,8,4,te),new de(4,5,16,8,te),new de(4,6,32,32,te),new de(4,4,16,16,Y),new de(8,16,32,32,Y),new de(8,16,128,128,Y),new de(8,32,128,256,Y),new de(32,128,258,1024,Y),new de(32,258,258,4096,Y)],s.deflateInit=function(K,ge){return Pe(K,ge,v,15,8,0)},s.deflateInit2=Pe,s.deflateReset=Ae,s.deflateResetKeep=xe,s.deflateSetHeader=function(K,ge){return K&&K.state?K.state.wrap!==2?p:(K.state.gzhead=ge,f):p},s.deflate=function(K,ge){var re,le,se,fe;if(!K||!K.state||5<ge||ge<0)return K?Z(K,p):p;if(le=K.state,!K.output||!K.input&&K.avail_in!==0||le.status===666&&ge!==h)return Z(K,K.avail_out===0?-5:p);if(le.strm=K,re=le.last_flush,le.last_flush=ge,le.status===T)if(le.wrap===2)K.adler=0,j(le,31),j(le,139),j(le,8),le.gzhead?(j(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),j(le,255&le.gzhead.time),j(le,le.gzhead.time>>8&255),j(le,le.gzhead.time>>16&255),j(le,le.gzhead.time>>24&255),j(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),j(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(j(le,255&le.gzhead.extra.length),j(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(K.adler=c(K.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(j(le,0),j(le,0),j(le,0),j(le,0),j(le,0),j(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),j(le,3),le.status=O);else{var Ce=v+(le.w_bits-8<<4)<<8;Ce|=(2<=le.strategy||le.level<2?0:le.level<6?1:le.level===6?2:3)<<6,le.strstart!==0&&(Ce|=32),Ce+=31-Ce%31,le.status=O,W(le,Ce),le.strstart!==0&&(W(le,K.adler>>>16),W(le,65535&K.adler)),K.adler=1}if(le.status===69)if(le.gzhead.extra){for(se=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),G(K),se=le.pending,le.pending!==le.pending_buf_size));)j(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(le.status===73)if(le.gzhead.name){se=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),G(K),se=le.pending,le.pending===le.pending_buf_size)){fe=1;break}fe=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,j(le,fe)}while(fe!==0);le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),fe===0&&(le.gzindex=0,le.status=91)}else le.status=91;if(le.status===91)if(le.gzhead.comment){se=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),G(K),se=le.pending,le.pending===le.pending_buf_size)){fe=1;break}fe=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,j(le,fe)}while(fe!==0);le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),fe===0&&(le.status=103)}else le.status=103;if(le.status===103&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&G(K),le.pending+2<=le.pending_buf_size&&(j(le,255&K.adler),j(le,K.adler>>8&255),K.adler=0,le.status=O)):le.status=O),le.pending!==0){if(G(K),K.avail_out===0)return le.last_flush=-1,f}else if(K.avail_in===0&&F(ge)<=F(re)&&ge!==h)return Z(K,-5);if(le.status===666&&K.avail_in!==0)return Z(K,-5);if(K.avail_in!==0||le.lookahead!==0||ge!==d&&le.status!==666){var Ie=le.strategy===2?function(we,Ue){for(var Fe;;){if(we.lookahead===0&&(ne(we),we.lookahead===0)){if(Ue===d)return P;break}if(we.match_length=0,Fe=a._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++,Fe&&(D(we,!1),we.strm.avail_out===0))return P}return we.insert=0,Ue===h?(D(we,!0),we.strm.avail_out===0?ee:X):we.last_lit&&(D(we,!1),we.strm.avail_out===0)?P:U}(le,ge):le.strategy===3?function(we,Ue){for(var Fe,Be,ke,Je,Xe=we.window;;){if(we.lookahead<=R){if(ne(we),we.lookahead<=R&&Ue===d)return P;if(we.lookahead===0)break}if(we.match_length=0,we.lookahead>=I&&0<we.strstart&&(Be=Xe[ke=we.strstart-1])===Xe[++ke]&&Be===Xe[++ke]&&Be===Xe[++ke]){Je=we.strstart+R;do;while(Be===Xe[++ke]&&Be===Xe[++ke]&&Be===Xe[++ke]&&Be===Xe[++ke]&&Be===Xe[++ke]&&Be===Xe[++ke]&&Be===Xe[++ke]&&Be===Xe[++ke]&&ke<Je);we.match_length=R-(Je-ke),we.match_length>we.lookahead&&(we.match_length=we.lookahead)}if(we.match_length>=I?(Fe=a._tr_tally(we,1,we.match_length-I),we.lookahead-=we.match_length,we.strstart+=we.match_length,we.match_length=0):(Fe=a._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++),Fe&&(D(we,!1),we.strm.avail_out===0))return P}return we.insert=0,Ue===h?(D(we,!0),we.strm.avail_out===0?ee:X):we.last_lit&&(D(we,!1),we.strm.avail_out===0)?P:U}(le,ge):i[le.level].func(le,ge);if(Ie!==ee&&Ie!==X||(le.status=666),Ie===P||Ie===ee)return K.avail_out===0&&(le.last_flush=-1),f;if(Ie===U&&(ge===1?a._tr_align(le):ge!==5&&(a._tr_stored_block(le,0,0,!1),ge===3&&(M(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),G(K),K.avail_out===0))return le.last_flush=-1,f}return ge!==h?f:le.wrap<=0?1:(le.wrap===2?(j(le,255&K.adler),j(le,K.adler>>8&255),j(le,K.adler>>16&255),j(le,K.adler>>24&255),j(le,255&K.total_in),j(le,K.total_in>>8&255),j(le,K.total_in>>16&255),j(le,K.total_in>>24&255)):(W(le,K.adler>>>16),W(le,65535&K.adler)),G(K),0<le.wrap&&(le.wrap=-le.wrap),le.pending!==0?f:1)},s.deflateEnd=function(K){var ge;return K&&K.state?(ge=K.state.status)!==T&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==O&&ge!==666?Z(K,p):(K.state=null,ge===O?Z(K,-3):f):p},s.deflateSetDictionary=function(K,ge){var re,le,se,fe,Ce,Ie,we,Ue,Fe=ge.length;if(!K||!K.state||(fe=(re=K.state).wrap)===2||fe===1&&re.status!==T||re.lookahead)return p;for(fe===1&&(K.adler=l(K.adler,ge,Fe,0)),re.wrap=0,Fe>=re.w_size&&(fe===0&&(M(re.head),re.strstart=0,re.block_start=0,re.insert=0),Ue=new o.Buf8(re.w_size),o.arraySet(Ue,ge,Fe-re.w_size,re.w_size,0),ge=Ue,Fe=re.w_size),Ce=K.avail_in,Ie=K.next_in,we=K.input,K.avail_in=Fe,K.next_in=0,K.input=ge,ne(re);re.lookahead>=I;){for(le=re.strstart,se=re.lookahead-(I-1);re.ins_h=(re.ins_h<<re.hash_shift^re.window[le+I-1])&re.hash_mask,re.prev[le&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=le,le++,--se;);re.strstart=le,re.lookahead=I-1,ne(re)}return re.strstart+=re.lookahead,re.block_start=re.strstart,re.insert=re.lookahead,re.lookahead=0,re.match_length=re.prev_length=I-1,re.match_available=0,K.next_in=Ie,K.input=we,K.avail_in=Ce,re.wrap=fe,f},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,c,u,d,h,f,p,m,g,b,v,w,_,S,E,k,x,I,R,C,T,O,P,U;a=i.state,l=i.next_in,P=i.input,c=l+(i.avail_in-5),u=i.next_out,U=i.output,d=u-(o-i.avail_out),h=u+(i.avail_out-257),f=a.dmax,p=a.wsize,m=a.whave,g=a.wnext,b=a.window,v=a.hold,w=a.bits,_=a.lencode,S=a.distcode,E=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{w<15&&(v+=P[l++]<<w,w+=8,v+=P[l++]<<w,w+=8),x=_[v&E];t:for(;;){if(v>>>=I=x>>>24,w-=I,(I=x>>>16&255)===0)U[u++]=65535&x;else{if(!(16&I)){if(!(64&I)){x=_[(65535&x)+(v&(1<<I)-1)];continue t}if(32&I){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}R=65535&x,(I&=15)&&(w<I&&(v+=P[l++]<<w,w+=8),R+=v&(1<<I)-1,v>>>=I,w-=I),w<15&&(v+=P[l++]<<w,w+=8,v+=P[l++]<<w,w+=8),x=S[v&k];n:for(;;){if(v>>>=I=x>>>24,w-=I,!(16&(I=x>>>16&255))){if(!(64&I)){x=S[(65535&x)+(v&(1<<I)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(C=65535&x,w<(I&=15)&&(v+=P[l++]<<w,(w+=8)<I&&(v+=P[l++]<<w,w+=8)),f<(C+=v&(1<<I)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=I,w-=I,(I=u-d)<C){if(m<(I=C-I)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(O=b,(T=0)===g){if(T+=p-I,I<R){for(R-=I;U[u++]=b[T++],--I;);T=u-C,O=U}}else if(g<I){if(T+=p+g-I,(I-=g)<R){for(R-=I;U[u++]=b[T++],--I;);if(T=0,g<R){for(R-=I=g;U[u++]=b[T++],--I;);T=u-C,O=U}}}else if(T+=g-I,I<R){for(R-=I;U[u++]=b[T++],--I;);T=u-C,O=U}for(;2<R;)U[u++]=O[T++],U[u++]=O[T++],U[u++]=O[T++],R-=3;R&&(U[u++]=O[T++],1<R&&(U[u++]=O[T++]))}else{for(T=u-C;U[u++]=U[T++],U[u++]=U[T++],U[u++]=U[T++],2<(R-=3););R&&(U[u++]=U[T++],1<R&&(U[u++]=U[T++]))}break}}break}}while(l<c&&u<h);l-=R=w>>3,v&=(1<<(w-=R<<3))-1,i.next_in=l,i.next_out=u,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=u<h?h-u+257:257-(u-h),a.hold=v,a.bits=w}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),u=1,d=2,h=0,f=-2,p=1,m=852,g=592;function b(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(T){var O;return T&&T.state?(O=T.state,T.total_in=T.total_out=O.total=0,T.msg="",O.wrap&&(T.adler=1&O.wrap),O.mode=p,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new i.Buf32(m),O.distcode=O.distdyn=new i.Buf32(g),O.sane=1,O.back=-1,h):f}function _(T){var O;return T&&T.state?((O=T.state).wsize=0,O.whave=0,O.wnext=0,w(T)):f}function S(T,O){var P,U;return T&&T.state?(U=T.state,O<0?(P=0,O=-O):(P=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?f:(U.window!==null&&U.wbits!==O&&(U.window=null),U.wrap=P,U.wbits=O,_(T))):f}function E(T,O){var P,U;return T?(U=new v,(T.state=U).window=null,(P=S(T,O))!==h&&(T.state=null),P):f}var k,x,I=!0;function R(T){if(I){var O;for(k=new i.Buf32(512),x=new i.Buf32(32),O=0;O<144;)T.lens[O++]=8;for(;O<256;)T.lens[O++]=9;for(;O<280;)T.lens[O++]=7;for(;O<288;)T.lens[O++]=8;for(c(u,T.lens,0,288,k,0,T.work,{bits:9}),O=0;O<32;)T.lens[O++]=5;c(d,T.lens,0,32,x,0,T.work,{bits:5}),I=!1}T.lencode=k,T.lenbits=9,T.distcode=x,T.distbits=5}function C(T,O,P,U){var ee,X=T.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new i.Buf8(X.wsize)),U>=X.wsize?(i.arraySet(X.window,O,P-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(U<(ee=X.wsize-X.wnext)&&(ee=U),i.arraySet(X.window,O,P-U,ee,X.wnext),(U-=ee)?(i.arraySet(X.window,O,P-U,U,0),X.wnext=U,X.whave=X.wsize):(X.wnext+=ee,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=ee))),0}s.inflateReset=_,s.inflateReset2=S,s.inflateResetKeep=w,s.inflateInit=function(T){return E(T,15)},s.inflateInit2=E,s.inflate=function(T,O){var P,U,ee,X,Z,F,M,G,D,j,W,q,ne,te,Y,de,Se,xe,Ae,Pe,K,ge,re,le,se=0,fe=new i.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return f;(P=T.state).mode===12&&(P.mode=13),Z=T.next_out,ee=T.output,M=T.avail_out,X=T.next_in,U=T.input,F=T.avail_in,G=P.hold,D=P.bits,j=F,W=M,ge=h;e:for(;;)switch(P.mode){case p:if(P.wrap===0){P.mode=13;break}for(;D<16;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}if(2&P.wrap&&G===35615){fe[P.check=0]=255&G,fe[1]=G>>>8&255,P.check=a(P.check,fe,2,0),D=G=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&G)<<8)+(G>>8))%31){T.msg="incorrect header check",P.mode=30;break}if((15&G)!=8){T.msg="unknown compression method",P.mode=30;break}if(D-=4,K=8+(15&(G>>>=4)),P.wbits===0)P.wbits=K;else if(K>P.wbits){T.msg="invalid window size",P.mode=30;break}P.dmax=1<<K,T.adler=P.check=1,P.mode=512&G?10:12,D=G=0;break;case 2:for(;D<16;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}if(P.flags=G,(255&P.flags)!=8){T.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){T.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=G>>8&1),512&P.flags&&(fe[0]=255&G,fe[1]=G>>>8&255,P.check=a(P.check,fe,2,0)),D=G=0,P.mode=3;case 3:for(;D<32;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}P.head&&(P.head.time=G),512&P.flags&&(fe[0]=255&G,fe[1]=G>>>8&255,fe[2]=G>>>16&255,fe[3]=G>>>24&255,P.check=a(P.check,fe,4,0)),D=G=0,P.mode=4;case 4:for(;D<16;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}P.head&&(P.head.xflags=255&G,P.head.os=G>>8),512&P.flags&&(fe[0]=255&G,fe[1]=G>>>8&255,P.check=a(P.check,fe,2,0)),D=G=0,P.mode=5;case 5:if(1024&P.flags){for(;D<16;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}P.length=G,P.head&&(P.head.extra_len=G),512&P.flags&&(fe[0]=255&G,fe[1]=G>>>8&255,P.check=a(P.check,fe,2,0)),D=G=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(F<(q=P.length)&&(q=F),q&&(P.head&&(K=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),i.arraySet(P.head.extra,U,X,q,K)),512&P.flags&&(P.check=a(P.check,U,q,X)),F-=q,X+=q,P.length-=q),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(F===0)break e;for(q=0;K=U[X+q++],P.head&&K&&P.length<65536&&(P.head.name+=String.fromCharCode(K)),K&&q<F;);if(512&P.flags&&(P.check=a(P.check,U,q,X)),F-=q,X+=q,K)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(F===0)break e;for(q=0;K=U[X+q++],P.head&&K&&P.length<65536&&(P.head.comment+=String.fromCharCode(K)),K&&q<F;);if(512&P.flags&&(P.check=a(P.check,U,q,X)),F-=q,X+=q,K)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;D<16;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}if(G!==(65535&P.check)){T.msg="header crc mismatch",P.mode=30;break}D=G=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),T.adler=P.check=0,P.mode=12;break;case 10:for(;D<32;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}T.adler=P.check=b(G),D=G=0,P.mode=11;case 11:if(P.havedict===0)return T.next_out=Z,T.avail_out=M,T.next_in=X,T.avail_in=F,P.hold=G,P.bits=D,2;T.adler=P.check=1,P.mode=12;case 12:if(O===5||O===6)break e;case 13:if(P.last){G>>>=7&D,D-=7&D,P.mode=27;break}for(;D<3;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}switch(P.last=1&G,D-=1,3&(G>>>=1)){case 0:P.mode=14;break;case 1:if(R(P),P.mode=20,O!==6)break;G>>>=2,D-=2;break e;case 2:P.mode=17;break;case 3:T.msg="invalid block type",P.mode=30}G>>>=2,D-=2;break;case 14:for(G>>>=7&D,D-=7&D;D<32;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}if((65535&G)!=(G>>>16^65535)){T.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&G,D=G=0,P.mode=15,O===6)break e;case 15:P.mode=16;case 16:if(q=P.length){if(F<q&&(q=F),M<q&&(q=M),q===0)break e;i.arraySet(ee,U,X,q,Z),F-=q,X+=q,M-=q,Z+=q,P.length-=q;break}P.mode=12;break;case 17:for(;D<14;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}if(P.nlen=257+(31&G),G>>>=5,D-=5,P.ndist=1+(31&G),G>>>=5,D-=5,P.ncode=4+(15&G),G>>>=4,D-=4,286<P.nlen||30<P.ndist){T.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;D<3;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}P.lens[Ce[P.have++]]=7&G,G>>>=3,D-=3}for(;P.have<19;)P.lens[Ce[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,re={bits:P.lenbits},ge=c(0,P.lens,0,19,P.lencode,0,P.work,re),P.lenbits=re.bits,ge){T.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;de=(se=P.lencode[G&(1<<P.lenbits)-1])>>>16&255,Se=65535&se,!((Y=se>>>24)<=D);){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}if(Se<16)G>>>=Y,D-=Y,P.lens[P.have++]=Se;else{if(Se===16){for(le=Y+2;D<le;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}if(G>>>=Y,D-=Y,P.have===0){T.msg="invalid bit length repeat",P.mode=30;break}K=P.lens[P.have-1],q=3+(3&G),G>>>=2,D-=2}else if(Se===17){for(le=Y+3;D<le;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}D-=Y,K=0,q=3+(7&(G>>>=Y)),G>>>=3,D-=3}else{for(le=Y+7;D<le;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}D-=Y,K=0,q=11+(127&(G>>>=Y)),G>>>=7,D-=7}if(P.have+q>P.nlen+P.ndist){T.msg="invalid bit length repeat",P.mode=30;break}for(;q--;)P.lens[P.have++]=K}}if(P.mode===30)break;if(P.lens[256]===0){T.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,re={bits:P.lenbits},ge=c(u,P.lens,0,P.nlen,P.lencode,0,P.work,re),P.lenbits=re.bits,ge){T.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,re={bits:P.distbits},ge=c(d,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,re),P.distbits=re.bits,ge){T.msg="invalid distances set",P.mode=30;break}if(P.mode=20,O===6)break e;case 20:P.mode=21;case 21:if(6<=F&&258<=M){T.next_out=Z,T.avail_out=M,T.next_in=X,T.avail_in=F,P.hold=G,P.bits=D,l(T,W),Z=T.next_out,ee=T.output,M=T.avail_out,X=T.next_in,U=T.input,F=T.avail_in,G=P.hold,D=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;de=(se=P.lencode[G&(1<<P.lenbits)-1])>>>16&255,Se=65535&se,!((Y=se>>>24)<=D);){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}if(de&&!(240&de)){for(xe=Y,Ae=de,Pe=Se;de=(se=P.lencode[Pe+((G&(1<<xe+Ae)-1)>>xe)])>>>16&255,Se=65535&se,!(xe+(Y=se>>>24)<=D);){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}G>>>=xe,D-=xe,P.back+=xe}if(G>>>=Y,D-=Y,P.back+=Y,P.length=Se,de===0){P.mode=26;break}if(32&de){P.back=-1,P.mode=12;break}if(64&de){T.msg="invalid literal/length code",P.mode=30;break}P.extra=15&de,P.mode=22;case 22:if(P.extra){for(le=P.extra;D<le;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}P.length+=G&(1<<P.extra)-1,G>>>=P.extra,D-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;de=(se=P.distcode[G&(1<<P.distbits)-1])>>>16&255,Se=65535&se,!((Y=se>>>24)<=D);){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}if(!(240&de)){for(xe=Y,Ae=de,Pe=Se;de=(se=P.distcode[Pe+((G&(1<<xe+Ae)-1)>>xe)])>>>16&255,Se=65535&se,!(xe+(Y=se>>>24)<=D);){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}G>>>=xe,D-=xe,P.back+=xe}if(G>>>=Y,D-=Y,P.back+=Y,64&de){T.msg="invalid distance code",P.mode=30;break}P.offset=Se,P.extra=15&de,P.mode=24;case 24:if(P.extra){for(le=P.extra;D<le;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}P.offset+=G&(1<<P.extra)-1,G>>>=P.extra,D-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){T.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(M===0)break e;if(q=W-M,P.offset>q){if((q=P.offset-q)>P.whave&&P.sane){T.msg="invalid distance too far back",P.mode=30;break}ne=q>P.wnext?(q-=P.wnext,P.wsize-q):P.wnext-q,q>P.length&&(q=P.length),te=P.window}else te=ee,ne=Z-P.offset,q=P.length;for(M<q&&(q=M),M-=q,P.length-=q;ee[Z++]=te[ne++],--q;);P.length===0&&(P.mode=21);break;case 26:if(M===0)break e;ee[Z++]=P.length,M--,P.mode=21;break;case 27:if(P.wrap){for(;D<32;){if(F===0)break e;F--,G|=U[X++]<<D,D+=8}if(W-=M,T.total_out+=W,P.total+=W,W&&(T.adler=P.check=P.flags?a(P.check,ee,W,Z-W):o(P.check,ee,W,Z-W)),W=M,(P.flags?G:b(G))!==P.check){T.msg="incorrect data check",P.mode=30;break}D=G=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;D<32;){if(F===0)break e;F--,G+=U[X++]<<D,D+=8}if(G!==(4294967295&P.total)){T.msg="incorrect length check",P.mode=30;break}D=G=0}P.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return f}return T.next_out=Z,T.avail_out=M,T.next_in=X,T.avail_in=F,P.hold=G,P.bits=D,(P.wsize||W!==T.avail_out&&P.mode<30&&(P.mode<27||O!==4))&&C(T,T.output,T.next_out,W-T.avail_out)?(P.mode=31,-4):(j-=T.avail_in,W-=T.avail_out,T.total_in+=j,T.total_out+=W,P.total+=W,P.wrap&&W&&(T.adler=P.check=P.flags?a(P.check,ee,W,T.next_out-W):o(P.check,ee,W,T.next_out-W)),T.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(j==0&&W===0||O===4)&&ge===h&&(ge=-5),ge)},s.inflateEnd=function(T){if(!T||!T.state)return f;var O=T.state;return O.window&&(O.window=null),T.state=null,h},s.inflateGetHeader=function(T,O){var P;return T&&T.state&&2&(P=T.state).wrap?((P.head=O).done=!1,h):f},s.inflateSetDictionary=function(T,O){var P,U=O.length;return T&&T.state?(P=T.state).wrap!==0&&P.mode!==11?f:P.mode===11&&o(1,O,U,0)!==P.check?-3:C(T,O,U,U)?(P.mode=31,-4):(P.havedict=1,h):f},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,d,h,f,p,m,g,b){var v,w,_,S,E,k,x,I,R,C=b.bits,T=0,O=0,P=0,U=0,ee=0,X=0,Z=0,F=0,M=0,G=0,D=null,j=0,W=new i.Buf16(16),q=new i.Buf16(16),ne=null,te=0;for(T=0;T<=15;T++)W[T]=0;for(O=0;O<f;O++)W[d[h+O]]++;for(ee=C,U=15;1<=U&&W[U]===0;U--);if(U<ee&&(ee=U),U===0)return p[m++]=20971520,p[m++]=20971520,b.bits=1,0;for(P=1;P<U&&W[P]===0;P++);for(ee<P&&(ee=P),T=F=1;T<=15;T++)if(F<<=1,(F-=W[T])<0)return-1;if(0<F&&(u===0||U!==1))return-1;for(q[1]=0,T=1;T<15;T++)q[T+1]=q[T]+W[T];for(O=0;O<f;O++)d[h+O]!==0&&(g[q[d[h+O]]++]=O);if(k=u===0?(D=ne=g,19):u===1?(D=o,j-=257,ne=a,te-=257,256):(D=l,ne=c,-1),T=P,E=m,Z=O=G=0,_=-1,S=(M=1<<(X=ee))-1,u===1&&852<M||u===2&&592<M)return 1;for(;;){for(x=T-Z,R=g[O]<k?(I=0,g[O]):g[O]>k?(I=ne[te+g[O]],D[j+g[O]]):(I=96,0),v=1<<T-Z,P=w=1<<X;p[E+(G>>Z)+(w-=v)]=x<<24|I<<16|R|0,w!==0;);for(v=1<<T-1;G&v;)v>>=1;if(v!==0?(G&=v-1,G+=v):G=0,O++,--W[T]==0){if(T===U)break;T=d[h+g[O]]}if(ee<T&&(G&S)!==_){for(Z===0&&(Z=ee),E+=P,F=1<<(X=T-Z);X+Z<U&&!((F-=W[X+Z])<=0);)X++,F<<=1;if(M+=1<<X,u===1&&852<M||u===2&&592<M)return 1;p[_=G&S]=ee<<24|X<<16|E-m|0}}return G!==0&&(p[E+G]=T-Z<<24|64<<16|0),b.bits=ee,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(se){for(var fe=se.length;0<=--fe;)se[fe]=0}var c=0,u=29,d=256,h=d+1+u,f=30,p=19,m=2*h+1,g=15,b=16,v=7,w=256,_=16,S=17,E=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(h+2));l(C);var T=new Array(2*f);l(T);var O=new Array(512);l(O);var P=new Array(256);l(P);var U=new Array(u);l(U);var ee,X,Z,F=new Array(f);function M(se,fe,Ce,Ie,we){this.static_tree=se,this.extra_bits=fe,this.extra_base=Ce,this.elems=Ie,this.max_length=we,this.has_stree=se&&se.length}function G(se,fe){this.dyn_tree=se,this.max_code=0,this.stat_desc=fe}function D(se){return se<256?O[se]:O[256+(se>>>7)]}function j(se,fe){se.pending_buf[se.pending++]=255&fe,se.pending_buf[se.pending++]=fe>>>8&255}function W(se,fe,Ce){se.bi_valid>b-Ce?(se.bi_buf|=fe<<se.bi_valid&65535,j(se,se.bi_buf),se.bi_buf=fe>>b-se.bi_valid,se.bi_valid+=Ce-b):(se.bi_buf|=fe<<se.bi_valid&65535,se.bi_valid+=Ce)}function q(se,fe,Ce){W(se,Ce[2*fe],Ce[2*fe+1])}function ne(se,fe){for(var Ce=0;Ce|=1&se,se>>>=1,Ce<<=1,0<--fe;);return Ce>>>1}function te(se,fe,Ce){var Ie,we,Ue=new Array(g+1),Fe=0;for(Ie=1;Ie<=g;Ie++)Ue[Ie]=Fe=Fe+Ce[Ie-1]<<1;for(we=0;we<=fe;we++){var Be=se[2*we+1];Be!==0&&(se[2*we]=ne(Ue[Be]++,Be))}}function Y(se){var fe;for(fe=0;fe<h;fe++)se.dyn_ltree[2*fe]=0;for(fe=0;fe<f;fe++)se.dyn_dtree[2*fe]=0;for(fe=0;fe<p;fe++)se.bl_tree[2*fe]=0;se.dyn_ltree[2*w]=1,se.opt_len=se.static_len=0,se.last_lit=se.matches=0}function de(se){8<se.bi_valid?j(se,se.bi_buf):0<se.bi_valid&&(se.pending_buf[se.pending++]=se.bi_buf),se.bi_buf=0,se.bi_valid=0}function Se(se,fe,Ce,Ie){var we=2*fe,Ue=2*Ce;return se[we]<se[Ue]||se[we]===se[Ue]&&Ie[fe]<=Ie[Ce]}function xe(se,fe,Ce){for(var Ie=se.heap[Ce],we=Ce<<1;we<=se.heap_len&&(we<se.heap_len&&Se(fe,se.heap[we+1],se.heap[we],se.depth)&&we++,!Se(fe,Ie,se.heap[we],se.depth));)se.heap[Ce]=se.heap[we],Ce=we,we<<=1;se.heap[Ce]=Ie}function Ae(se,fe,Ce){var Ie,we,Ue,Fe,Be=0;if(se.last_lit!==0)for(;Ie=se.pending_buf[se.d_buf+2*Be]<<8|se.pending_buf[se.d_buf+2*Be+1],we=se.pending_buf[se.l_buf+Be],Be++,Ie===0?q(se,we,fe):(q(se,(Ue=P[we])+d+1,fe),(Fe=k[Ue])!==0&&W(se,we-=U[Ue],Fe),q(se,Ue=D(--Ie),Ce),(Fe=x[Ue])!==0&&W(se,Ie-=F[Ue],Fe)),Be<se.last_lit;);q(se,w,fe)}function Pe(se,fe){var Ce,Ie,we,Ue=fe.dyn_tree,Fe=fe.stat_desc.static_tree,Be=fe.stat_desc.has_stree,ke=fe.stat_desc.elems,Je=-1;for(se.heap_len=0,se.heap_max=m,Ce=0;Ce<ke;Ce++)Ue[2*Ce]!==0?(se.heap[++se.heap_len]=Je=Ce,se.depth[Ce]=0):Ue[2*Ce+1]=0;for(;se.heap_len<2;)Ue[2*(we=se.heap[++se.heap_len]=Je<2?++Je:0)]=1,se.depth[we]=0,se.opt_len--,Be&&(se.static_len-=Fe[2*we+1]);for(fe.max_code=Je,Ce=se.heap_len>>1;1<=Ce;Ce--)xe(se,Ue,Ce);for(we=ke;Ce=se.heap[1],se.heap[1]=se.heap[se.heap_len--],xe(se,Ue,1),Ie=se.heap[1],se.heap[--se.heap_max]=Ce,se.heap[--se.heap_max]=Ie,Ue[2*we]=Ue[2*Ce]+Ue[2*Ie],se.depth[we]=(se.depth[Ce]>=se.depth[Ie]?se.depth[Ce]:se.depth[Ie])+1,Ue[2*Ce+1]=Ue[2*Ie+1]=we,se.heap[1]=we++,xe(se,Ue,1),2<=se.heap_len;);se.heap[--se.heap_max]=se.heap[1],function(Xe,nt){var ie,z,J,pe,Oe,He,Ge=nt.dyn_tree,$t=nt.max_code,Lt=nt.stat_desc.static_tree,kn=nt.stat_desc.has_stree,Yt=nt.stat_desc.extra_bits,rn=nt.stat_desc.extra_base,xi=nt.stat_desc.max_length,er=0;for(pe=0;pe<=g;pe++)Xe.bl_count[pe]=0;for(Ge[2*Xe.heap[Xe.heap_max]+1]=0,ie=Xe.heap_max+1;ie<m;ie++)xi<(pe=Ge[2*Ge[2*(z=Xe.heap[ie])+1]+1]+1)&&(pe=xi,er++),Ge[2*z+1]=pe,$t<z||(Xe.bl_count[pe]++,Oe=0,rn<=z&&(Oe=Yt[z-rn]),He=Ge[2*z],Xe.opt_len+=He*(pe+Oe),kn&&(Xe.static_len+=He*(Lt[2*z+1]+Oe)));if(er!==0){do{for(pe=xi-1;Xe.bl_count[pe]===0;)pe--;Xe.bl_count[pe]--,Xe.bl_count[pe+1]+=2,Xe.bl_count[xi]--,er-=2}while(0<er);for(pe=xi;pe!==0;pe--)for(z=Xe.bl_count[pe];z!==0;)$t<(J=Xe.heap[--ie])||(Ge[2*J+1]!==pe&&(Xe.opt_len+=(pe-Ge[2*J+1])*Ge[2*J],Ge[2*J+1]=pe),z--)}}(se,fe),te(Ue,Je,se.bl_count)}function K(se,fe,Ce){var Ie,we,Ue=-1,Fe=fe[1],Be=0,ke=7,Je=4;for(Fe===0&&(ke=138,Je=3),fe[2*(Ce+1)+1]=65535,Ie=0;Ie<=Ce;Ie++)we=Fe,Fe=fe[2*(Ie+1)+1],++Be<ke&&we===Fe||(Be<Je?se.bl_tree[2*we]+=Be:we!==0?(we!==Ue&&se.bl_tree[2*we]++,se.bl_tree[2*_]++):Be<=10?se.bl_tree[2*S]++:se.bl_tree[2*E]++,Ue=we,Je=(Be=0)===Fe?(ke=138,3):we===Fe?(ke=6,3):(ke=7,4))}function ge(se,fe,Ce){var Ie,we,Ue=-1,Fe=fe[1],Be=0,ke=7,Je=4;for(Fe===0&&(ke=138,Je=3),Ie=0;Ie<=Ce;Ie++)if(we=Fe,Fe=fe[2*(Ie+1)+1],!(++Be<ke&&we===Fe)){if(Be<Je)for(;q(se,we,se.bl_tree),--Be!=0;);else we!==0?(we!==Ue&&(q(se,we,se.bl_tree),Be--),q(se,_,se.bl_tree),W(se,Be-3,2)):Be<=10?(q(se,S,se.bl_tree),W(se,Be-3,3)):(q(se,E,se.bl_tree),W(se,Be-11,7));Ue=we,Je=(Be=0)===Fe?(ke=138,3):we===Fe?(ke=6,3):(ke=7,4)}}l(F);var re=!1;function le(se,fe,Ce,Ie){W(se,(c<<1)+(Ie?1:0),3),function(we,Ue,Fe,Be){de(we),j(we,Fe),j(we,~Fe),i.arraySet(we.pending_buf,we.window,Ue,Fe,we.pending),we.pending+=Fe}(se,fe,Ce)}s._tr_init=function(se){re||(function(){var fe,Ce,Ie,we,Ue,Fe=new Array(g+1);for(we=Ie=0;we<u-1;we++)for(U[we]=Ie,fe=0;fe<1<<k[we];fe++)P[Ie++]=we;for(P[Ie-1]=we,we=Ue=0;we<16;we++)for(F[we]=Ue,fe=0;fe<1<<x[we];fe++)O[Ue++]=we;for(Ue>>=7;we<f;we++)for(F[we]=Ue<<7,fe=0;fe<1<<x[we]-7;fe++)O[256+Ue++]=we;for(Ce=0;Ce<=g;Ce++)Fe[Ce]=0;for(fe=0;fe<=143;)C[2*fe+1]=8,fe++,Fe[8]++;for(;fe<=255;)C[2*fe+1]=9,fe++,Fe[9]++;for(;fe<=279;)C[2*fe+1]=7,fe++,Fe[7]++;for(;fe<=287;)C[2*fe+1]=8,fe++,Fe[8]++;for(te(C,h+1,Fe),fe=0;fe<f;fe++)T[2*fe+1]=5,T[2*fe]=ne(fe,5);ee=new M(C,k,d+1,h,g),X=new M(T,x,0,f,g),Z=new M(new Array(0),I,0,p,v)}(),re=!0),se.l_desc=new G(se.dyn_ltree,ee),se.d_desc=new G(se.dyn_dtree,X),se.bl_desc=new G(se.bl_tree,Z),se.bi_buf=0,se.bi_valid=0,Y(se)},s._tr_stored_block=le,s._tr_flush_block=function(se,fe,Ce,Ie){var we,Ue,Fe=0;0<se.level?(se.strm.data_type===2&&(se.strm.data_type=function(Be){var ke,Je=4093624447;for(ke=0;ke<=31;ke++,Je>>>=1)if(1&Je&&Be.dyn_ltree[2*ke]!==0)return o;if(Be.dyn_ltree[18]!==0||Be.dyn_ltree[20]!==0||Be.dyn_ltree[26]!==0)return a;for(ke=32;ke<d;ke++)if(Be.dyn_ltree[2*ke]!==0)return a;return o}(se)),Pe(se,se.l_desc),Pe(se,se.d_desc),Fe=function(Be){var ke;for(K(Be,Be.dyn_ltree,Be.l_desc.max_code),K(Be,Be.dyn_dtree,Be.d_desc.max_code),Pe(Be,Be.bl_desc),ke=p-1;3<=ke&&Be.bl_tree[2*R[ke]+1]===0;ke--);return Be.opt_len+=3*(ke+1)+5+5+4,ke}(se),we=se.opt_len+3+7>>>3,(Ue=se.static_len+3+7>>>3)<=we&&(we=Ue)):we=Ue=Ce+5,Ce+4<=we&&fe!==-1?le(se,fe,Ce,Ie):se.strategy===4||Ue===we?(W(se,2+(Ie?1:0),3),Ae(se,C,T)):(W(se,4+(Ie?1:0),3),function(Be,ke,Je,Xe){var nt;for(W(Be,ke-257,5),W(Be,Je-1,5),W(Be,Xe-4,4),nt=0;nt<Xe;nt++)W(Be,Be.bl_tree[2*R[nt]+1],3);ge(Be,Be.dyn_ltree,ke-1),ge(Be,Be.dyn_dtree,Je-1)}(se,se.l_desc.max_code+1,se.d_desc.max_code+1,Fe+1),Ae(se,se.dyn_ltree,se.dyn_dtree)),Y(se),Ie&&de(se)},s._tr_tally=function(se,fe,Ce){return se.pending_buf[se.d_buf+2*se.last_lit]=fe>>>8&255,se.pending_buf[se.d_buf+2*se.last_lit+1]=255&fe,se.pending_buf[se.l_buf+se.last_lit]=255&Ce,se.last_lit++,fe===0?se.dyn_ltree[2*Ce]++:(se.matches++,fe--,se.dyn_ltree[2*(P[Ce]+d+1)]++,se.dyn_dtree[2*D(fe)]++),se.last_lit===se.lit_bufsize-1},s._tr_align=function(se){W(se,2,3),q(se,w,C),function(fe){fe.bi_valid===16?(j(fe,fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0):8<=fe.bi_valid&&(fe.pending_buf[fe.pending++]=255&fe.bi_buf,fe.bi_buf>>=8,fe.bi_valid-=8)}(se)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,c,u,d,h=1,f={},p=!1,m=o.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(o);g=g&&g.setTimeout?g:o,l={}.toString.call(o.process)==="[object process]"?function(_){Sn.nextTick(function(){v(_)})}:function(){if(o.postMessage&&!o.importScripts){var _=!0,S=o.onmessage;return o.onmessage=function(){_=!1},o.postMessage("","*"),o.onmessage=S,_}}()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(_){o.postMessage(d+_,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(_){v(_.data)},function(_){u.port2.postMessage(_)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(_){var S=m.createElement("script");S.onreadystatechange=function(){v(_),S.onreadystatechange=null,c.removeChild(S),S=null},c.appendChild(S)}):function(_){setTimeout(v,0,_)},g.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var S=new Array(arguments.length-1),E=0;E<S.length;E++)S[E]=arguments[E+1];var k={callback:_,args:S};return f[h]=k,l(h),h++},g.clearImmediate=b}function b(_){delete f[_]}function v(_){if(p)setTimeout(v,0,_);else{var S=f[_];if(S){p=!0;try{(function(E){var k=E.callback,x=E.args;switch(x.length){case 0:k();break;case 1:k(x[0]);break;case 2:k(x[0],x[1]);break;case 3:k(x[0],x[1],x[2]);break;default:k.apply(a,x)}})(S)}finally{b(_),p=!1}}}}function w(_){_.source===o&&typeof _.data=="string"&&_.data.indexOf(d)===0&&v(+_.data.slice(d.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Ws<"u"?Ws:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ooe);var u9e=Ooe.exports;const d9e=yi(u9e);var Loe={exports:{}};(function(t,e){(function(n,r){r()})(Ws,function(){function n(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,u,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){l(h.response,u,d)},h.onerror=function(){console.error("could not download file")},h.send()}function s(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ws=="object"&&Ws.global===Ws?Ws:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,d){var h=o.URL||o.webkitURL,f=document.createElement("a");u=u||c.name||"download",f.download=u,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?i(f):s(f.href)?r(c,u,d):i(f,f.target="_blank")):(f.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,d){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),u);else if(s(c))r(c,u,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){i(h)})}}:function(c,u,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,u,d);var f=c.type==="application/octet-stream",p=/constructor/i.test(o.HTMLElement)||o.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||f&&p||a)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var w=g.result;w=m?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=w:location=w,h=null},g.readAsDataURL(c)}else{var b=o.URL||o.webkitURL,v=b.createObjectURL(c);h?h.location=v:location.href=v,h=null,setTimeout(function(){b.revokeObjectURL(v)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(Loe);var h9e=Loe.exports;const f9e=yi(h9e);function VA(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof Sn=="object"&&Sn.version!==void 0?`Node.js/${Sn.version.substr(1)} (${Sn.platform}; ${Sn.arch})`:"<environment undetectable>"}function Doe(t,e,n,r){if(typeof n!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((s,i)=>Doe.bind(null,t,i,s,r),n)():Promise.resolve().then(()=>t.registry[e]?t.registry[e].reduce((s,i)=>i.hook.bind(null,s,r),n)():n(r))}function p9e(t,e,n,r){const s=r;t.registry[n]||(t.registry[n]=[]),e==="before"&&(r=(i,o)=>Promise.resolve().then(s.bind(null,o)).then(i.bind(null,o))),e==="after"&&(r=(i,o)=>{let a;return Promise.resolve().then(i.bind(null,o)).then(l=>(a=l,s(a,o))).then(()=>a)}),e==="error"&&(r=(i,o)=>Promise.resolve().then(i.bind(null,o)).catch(a=>s(a,o))),t.registry[n].push({hook:r,orig:s})}function m9e(t,e,n){if(!t.registry[e])return;const r=t.registry[e].map(s=>s.orig).indexOf(n);r!==-1&&t.registry[e].splice(r,1)}const sU=Function.bind,iU=sU.bind(sU);function g9e(t,e,n){const r=iU(m9e,null).apply(null,[e]);t.api={remove:r},t.remove=r,["before","error","after","wrap"].forEach(s=>{const i=[e,s];t[s]=t.api[s]=iU(p9e,null).apply(null,i)})}function b9e(){const t={registry:{}},e=Doe.bind(null,t);return g9e(e,t),e}const y9e={Collection:b9e};var v9e="0.0.0-development",w9e=`octokit-endpoint.js/${v9e} ${VA()}`,x9e={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":w9e},mediaType:{format:""}};function _9e(t){return t?Object.keys(t).reduce((e,n)=>(e[n.toLowerCase()]=t[n],e),{}):{}}function S9e(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(t)}function Moe(t,e){const n=Object.assign({},t);return Object.keys(e).forEach(r=>{S9e(e[r])?r in t?n[r]=Moe(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function oU(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function SR(t,e,n){if(typeof e=="string"){let[s,i]=e.split(" ");n=Object.assign(i?{method:s,url:i}:{url:s},n)}else n=Object.assign({},e);n.headers=_9e(n.headers),oU(n),oU(n.headers);const r=Moe(t||{},n);return n.url==="/graphql"&&(t&&t.mediaType.previews?.length&&(r.mediaType.previews=t.mediaType.previews.filter(s=>!r.mediaType.previews.includes(s)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(s=>s.replace(/-preview/,""))),r}function E9e(t,e){const n=/\?/.test(t)?"&":"?",r=Object.keys(e);return r.length===0?t:t+n+r.map(s=>s==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${s}=${encodeURIComponent(e[s])}`).join("&")}var k9e=/\{[^{}}]+\}/g;function C9e(t){return t.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,"").split(/,/)}function A9e(t){const e=t.match(k9e);return e?e.map(C9e).reduce((n,r)=>n.concat(r),[]):[]}function aU(t,e){const n={__proto__:null};for(const r of Object.keys(t))e.indexOf(r)===-1&&(n[r]=t[r]);return n}function joe(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function ug(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function fy(t,e,n){return e=t==="+"||t==="#"?joe(e):ug(e),n?ug(n)+"="+e:e}function jm(t){return t!=null}function K3(t){return t===";"||t==="&"||t==="?"}function T9e(t,e,n,r){var s=t[n],i=[];if(jm(s)&&s!=="")if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")s=s.toString(),r&&r!=="*"&&(s=s.substring(0,parseInt(r,10))),i.push(fy(e,s,K3(e)?n:""));else if(r==="*")Array.isArray(s)?s.filter(jm).forEach(function(o){i.push(fy(e,o,K3(e)?n:""))}):Object.keys(s).forEach(function(o){jm(s[o])&&i.push(fy(e,s[o],o))});else{const o=[];Array.isArray(s)?s.filter(jm).forEach(function(a){o.push(fy(e,a))}):Object.keys(s).forEach(function(a){jm(s[a])&&(o.push(ug(a)),o.push(fy(e,s[a].toString())))}),K3(e)?i.push(ug(n)+"="+o.join(",")):o.length!==0&&i.push(o.join(","))}else e===";"?jm(s)&&i.push(ug(n)):s===""&&(e==="&"||e==="?")?i.push(ug(n)+"="):s===""&&i.push("");return i}function P9e(t){return{expand:N9e.bind(null,t)}}function N9e(t,e){var n=["+","#",".","/",";","?","&"];return t=t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,s,i){if(s){let a="";const l=[];if(n.indexOf(s.charAt(0))!==-1&&(a=s.charAt(0),s=s.substr(1)),s.split(/,/g).forEach(function(c){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(T9e(e,a,u[1],u[2]||u[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(l.length!==0?a:"")+l.join(o)}else return l.join(",")}else return joe(i)}),t==="/"?t:t.replace(/\/$/,"")}function Foe(t){let e=t.method.toUpperCase(),n=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},t.headers),s,i=aU(t,["method","baseUrl","url","headers","request","mediaType"]);const o=A9e(n);n=P9e(n).expand(i),/^http/.test(n)||(n=t.baseUrl+n);const a=Object.keys(t).filter(u=>o.includes(u)).concat("baseUrl"),l=aU(i,a);if(!/application\/octet-stream/i.test(r.accept)&&(t.mediaType.format&&(r.accept=r.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),n.endsWith("/graphql")&&t.mediaType.previews?.length)){const u=r.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[];r.accept=u.concat(t.mediaType.previews).map(d=>{const h=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${d}-preview${h}`}).join(",")}return["GET","HEAD"].includes(e)?n=E9e(n,l):"data"in l?s=l.data:Object.keys(l).length&&(s=l),!r["content-type"]&&typeof s<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof s>"u"&&(s=""),Object.assign({method:e,url:n,headers:r},typeof s<"u"?{body:s}:null,t.request?{request:t.request}:null)}function I9e(t,e,n){return Foe(SR(t,e,n))}function Boe(t,e){const n=SR(t,e),r=I9e.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:Boe.bind(null,n),merge:SR.bind(null,n),parse:Foe})}var R9e=Boe(null,x9e);const _M=function(){};_M.prototype=Object.create(null);const lU=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,cU=/\\([\v\u0020-\u00ff])/gu,O9e=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,dg={type:"",parameters:new _M};Object.freeze(dg.parameters);Object.freeze(dg);function L9e(t){if(typeof t!="string")return dg;let e=t.indexOf(";");const n=e!==-1?t.slice(0,e).trim():t.trim();if(O9e.test(n)===!1)return dg;const r={type:n.toLowerCase(),parameters:new _M};if(e===-1)return r;let s,i,o;for(lU.lastIndex=e;i=lU.exec(t);){if(i.index!==e)return dg;e+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),cU.test(o)&&(o=o.replace(cU,"$1"))),r.parameters[s]=o}return e!==t.length?dg:r}var D9e=L9e;class d2 extends Error{name;status;request;response;constructor(e,n,r){super(e),this.name="HttpError",this.status=Number.parseInt(n),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);const s=Object.assign({},r.request);r.request.headers.authorization&&(s.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/(?<! ) .*$/," [REDACTED]")})),s.url=s.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=s}}var M9e="0.0.0-development",j9e={headers:{"user-agent":`octokit-request.js/${M9e} ${VA()}`}};function F9e(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(t)}async function uU(t){const e=t.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");const n=t.request?.log||console,r=t.request?.parseSuccessResponseBody!==!1,s=F9e(t.body)||Array.isArray(t.body)?JSON.stringify(t.body):t.body,i=Object.fromEntries(Object.entries(t.headers).map(([d,h])=>[d,String(h)]));let o;try{o=await e(t.url,{method:t.method,body:s,redirect:t.request?.redirect,headers:i,signal:t.request?.signal,...t.body&&{duplex:"half"}})}catch(d){let h="Unknown Error";if(d instanceof Error){if(d.name==="AbortError")throw d.status=500,d;h=d.message,d.name==="TypeError"&&"cause"in d&&(d.cause instanceof Error?h=d.cause.message:typeof d.cause=="string"&&(h=d.cause))}const f=new d2(h,500,{request:t});throw f.cause=d,f}const a=o.status,l=o.url,c={};for(const[d,h]of o.headers)c[d]=h;const u={url:l,status:a,headers:c,data:""};if("deprecation"in c){const d=c.link&&c.link.match(/<([^<>]+)>; rel="deprecation"/),h=d&&d.pop();n.warn(`[@octokit/request] "${t.method} ${t.url}" is deprecated. It is scheduled to be removed on ${c.sunset}${h?`. See ${h}`:""}`)}if(a===204||a===205)return u;if(t.method==="HEAD"){if(a<400)return u;throw new d2(o.statusText,a,{response:u,request:t})}if(a===304)throw u.data=await Y3(o),new d2("Not modified",a,{response:u,request:t});if(a>=400)throw u.data=await Y3(o),new d2($9e(u.data),a,{response:u,request:t});return u.data=r?await Y3(o):o.body,u}async function Y3(t){const e=t.headers.get("content-type");if(!e)return t.text().catch(()=>"");const n=D9e(e);if(B9e(n)){let r="";try{return r=await t.text(),JSON.parse(r)}catch{return r}}else return n.type.startsWith("text/")||n.parameters.charset?.toLowerCase()==="utf-8"?t.text().catch(()=>""):t.arrayBuffer().catch(()=>new ArrayBuffer(0))}function B9e(t){return t.type==="application/json"||t.type==="application/scim+json"}function $9e(t){if(typeof t=="string")return t;if(t instanceof ArrayBuffer)return"Unknown error";if("message"in t){const e="documentation_url"in t?` - ${t.documentation_url}`:"";return Array.isArray(t.errors)?`${t.message}: ${t.errors.map(n=>JSON.stringify(n)).join(", ")}${e}`:`${t.message}${e}`}return`Unknown error: ${JSON.stringify(t)}`}function ER(t,e){const n=t.defaults(e);return Object.assign(function(s,i){const o=n.merge(s,i);if(!o.request||!o.request.hook)return uU(n.parse(o));const a=(l,c)=>uU(n.parse(n.merge(l,c)));return Object.assign(a,{endpoint:n,defaults:ER.bind(null,n)}),o.request.hook(a,o)},{endpoint:n,defaults:ER.bind(null,n)})}var kR=ER(R9e,j9e),U9e="0.0.0-development";function H9e(t){return`Request failed due to following response errors:
`+t.errors.map(e=>` - ${e.message}`).join(`
`)}var z9e=class extends Error{constructor(t,e,n){super(H9e(n)),this.request=t,this.headers=e,this.response=n,this.errors=n.errors,this.data=n.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},V9e=["method","baseUrl","url","headers","request","query","mediaType","operationName"],W9e=["query","method","url"],dU=/\/api\/v3\/?$/;function G9e(t,e,n){if(n){if(typeof e=="string"&&"query"in n)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in n)if(W9e.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const r=typeof e=="string"?Object.assign({query:e},n):e,s=Object.keys(r).reduce((o,a)=>V9e.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),i=r.baseUrl||t.endpoint.DEFAULTS.baseUrl;return dU.test(i)&&(s.url=i.replace(dU,"/api/graphql")),t(s).then(o=>{if(o.data.errors){const a={};for(const l of Object.keys(o.headers))a[l]=o.headers[l];throw new z9e(s,a,o.data)}return o.data.data})}function SM(t,e){const n=t.defaults(e);return Object.assign((s,i)=>G9e(n,s,i),{defaults:SM.bind(null,n),endpoint:n.endpoint})}SM(kR,{headers:{"user-agent":`octokit-graphql.js/${U9e} ${VA()}`},method:"POST",url:"/graphql"});function q9e(t){return SM(t,{method:"POST",url:"/graphql"})}var J3="(?:[a-zA-Z0-9_-]+)",hU="\\.",fU=new RegExp(`^${J3}${hU}${J3}${hU}${J3}$`),K9e=fU.test.bind(fU);async function Y9e(t){const e=K9e(t),n=t.startsWith("v1.")||t.startsWith("ghs_"),r=t.startsWith("ghu_");return{type:"token",token:t,tokenType:e?"app":n?"installation":r?"user-to-server":"oauth"}}function J9e(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function X9e(t,e,n,r){const s=e.endpoint.merge(n,r);return s.headers.authorization=J9e(t),e(s)}var Z9e=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(Y9e.bind(null,e),{hook:X9e.bind(null,e)})};const $oe="6.1.4",pU=()=>{},Q9e=console.warn.bind(console),eUe=console.error.bind(console),mU=`octokit-core.js/${$oe} ${VA()}`;let tUe=class{static VERSION=$oe;static defaults(e){return class extends this{constructor(...r){const s=r[0]||{};if(typeof e=="function"){super(e(s));return}super(Object.assign({},e,s,s.userAgent&&e.userAgent?{userAgent:`${s.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){const n=this.plugins;return class extends this{static plugins=n.concat(e.filter(s=>!n.includes(s)))}}constructor(e={}){const n=new y9e.Collection,r={baseUrl:kR.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:n.bind(null,"request")}),mediaType:{previews:[],format:""}};if(r.headers["user-agent"]=e.userAgent?`${e.userAgent} ${mU}`:mU,e.baseUrl&&(r.baseUrl=e.baseUrl),e.previews&&(r.mediaType.previews=e.previews),e.timeZone&&(r.headers["time-zone"]=e.timeZone),this.request=kR.defaults(r),this.graphql=q9e(this.request).defaults(r),this.log=Object.assign({debug:pU,info:pU,warn:Q9e,error:eUe},e.log),this.hook=n,e.authStrategy){const{authStrategy:i,...o}=e,a=i(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));n.wrap("request",a.hook),this.auth=a}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const i=Z9e(e.auth);n.wrap("request",i.hook),this.auth=i}const s=this.constructor;for(let i=0;i<s.plugins.length;++i)Object.assign(this,s.plugins[i](this,e))}request;graphql;log;hook;auth};const nUe="5.3.1";function Uoe(t){t.hook.wrap("request",(e,n)=>{t.log.debug("request",n);const r=Date.now(),s=t.request.endpoint.parse(n),i=s.url.replace(n.baseUrl,"");return e(n).then(o=>{const a=o.headers["x-github-request-id"];return t.log.info(`${s.method} ${i} - ${o.status} with id ${a} in ${Date.now()-r}ms`),o}).catch(o=>{const a=o.response?.headers["x-github-request-id"]||"UNKNOWN";throw t.log.error(`${s.method} ${i} - ${o.status} with id ${a} in ${Date.now()-r}ms`),o})})}Uoe.VERSION=nUe;var rUe="0.0.0-development";function sUe(t){if(!t.data)return{...t,data:[]};if(!("total_count"in t.data&&!("url"in t.data)))return t;const n=t.data.incomplete_results,r=t.data.repository_selection,s=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const i=Object.keys(t.data)[0],o=t.data[i];return t.data=o,typeof n<"u"&&(t.data.incomplete_results=n),typeof r<"u"&&(t.data.repository_selection=r),t.data.total_count=s,t}function EM(t,e,n){const r=typeof e=="function"?e.endpoint(n):t.request.endpoint(e,n),s=typeof e=="function"?e:t.request,i=r.method,o=r.headers;let a=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!a)return{done:!0};try{const l=await s({method:i,url:a,headers:o}),c=sUe(l);return a=((c.headers.link||"").match(/<([^<>]+)>;\s*rel="next"/)||[])[1],{value:c}}catch(l){if(l.status!==409)throw l;return a="",{value:{status:200,headers:{},data:[]}}}}})}}function Hoe(t,e,n,r){return typeof n=="function"&&(r=n,n=void 0),zoe(t,[],EM(t,e,n)[Symbol.asyncIterator](),r)}function zoe(t,e,n,r){return n.next().then(s=>{if(s.done)return e;let i=!1;function o(){i=!0}return e=e.concat(r?r(s.value,o):s.value.data),i?e:zoe(t,e,n,r)})}Object.assign(Hoe,{iterator:EM});function Voe(t){return{paginate:Object.assign(Hoe.bind(null,t),{iterator:EM.bind(null,t)})}}Voe.VERSION=rUe;const iUe="13.3.1",oUe={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addRepoAccessToSelfHostedRunnerGroupInOrg:["PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repos/{owner}/{repo}/environments/{environment_name}/variables"],createOrUpdateEnvironmentSecret:["PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubBillingUsageReportOrg:["GET /organizations/{org}/settings/billing/usage"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{commitAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits"],createAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],createVariantAnalysis:["POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses"],deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],deleteCodeqlDatabase:["DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getAutofix:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],getVariantAnalysis:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}"],getVariantAnalysisRepoTask:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codeSecurity:{attachConfiguration:["POST /orgs/{org}/code-security/configurations/{configuration_id}/attach"],attachEnterpriseConfiguration:["POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach"],createConfiguration:["POST /orgs/{org}/code-security/configurations"],createConfigurationForEnterprise:["POST /enterprises/{enterprise}/code-security/configurations"],deleteConfiguration:["DELETE /orgs/{org}/code-security/configurations/{configuration_id}"],deleteConfigurationForEnterprise:["DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],detachConfiguration:["DELETE /orgs/{org}/code-security/configurations/detach"],getConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}"],getConfigurationForRepository:["GET /repos/{owner}/{repo}/code-security-configuration"],getConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations"],getConfigurationsForOrg:["GET /orgs/{org}/code-security/configurations"],getDefaultConfigurations:["GET /orgs/{org}/code-security/configurations/defaults"],getDefaultConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/defaults"],getRepositoriesForConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories"],getRepositoriesForEnterpriseConfiguration:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories"],getSingleConfigurationForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],setConfigurationAsDefault:["PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults"],setConfigurationAsDefaultForEnterprise:["PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults"],updateConfiguration:["PATCH /orgs/{org}/code-security/configurations/{configuration_id}"],updateEnterpriseConfiguration:["PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],copilotMetricsForOrganization:["GET /orgs/{org}/copilot/metrics"],copilotMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/metrics"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"],usageMetricsForOrg:["GET /orgs/{org}/copilot/usage"],usageMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/usage"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],addSubIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],listSubIssues:["GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],removeSubIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue"],reprioritizeSubIssue:["PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team"}],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}",{},{deprecated:"octokit.rest.orgs.enableOrDisableSecurityProductOnAllOrgRepos() is deprecated, see https://docs.github.com/rest/orgs/orgs#enable-or-disable-a-security-feature-for-an-organization"}],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listAttestations:["GET /orgs/{org}/attestations/{subject_digest}"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers",{},{deprecated:"octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams"}],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team"}],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},privateRegistries:{createOrgPrivateRegistry:["POST /orgs/{org}/private-registries"],deleteOrgPrivateRegistry:["DELETE /orgs/{org}/private-registries/{secret_name}"],getOrgPrivateRegistry:["GET /orgs/{org}/private-registries/{secret_name}"],getOrgPublicKey:["GET /orgs/{org}/private-registries/public-key"],listOrgPrivateRegistries:["GET /orgs/{org}/private-registries"],updateOrgPrivateRegistry:["PATCH /orgs/{org}/private-registries/{secret_name}"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}"],createCard:["POST /projects/columns/{column_id}/cards"],createColumn:["POST /projects/{project_id}/columns"],createForAuthenticatedUser:["POST /user/projects"],createForOrg:["POST /orgs/{org}/projects"],createForRepo:["POST /repos/{owner}/{repo}/projects"],delete:["DELETE /projects/{project_id}"],deleteCard:["DELETE /projects/columns/cards/{card_id}"],deleteColumn:["DELETE /projects/columns/{column_id}"],get:["GET /projects/{project_id}"],getCard:["GET /projects/columns/cards/{card_id}"],getColumn:["GET /projects/columns/{column_id}"],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission"],listCards:["GET /projects/columns/{column_id}/cards"],listCollaborators:["GET /projects/{project_id}/collaborators"],listColumns:["GET /projects/{project_id}/columns"],listForOrg:["GET /orgs/{org}/projects"],listForRepo:["GET /repos/{owner}/{repo}/projects"],listForUser:["GET /users/{username}/projects"],moveCard:["POST /projects/columns/cards/{card_id}/moves"],moveColumn:["POST /projects/columns/{column_id}/moves"],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}"],update:["PATCH /projects/{project_id}"],updateCard:["PATCH /projects/columns/cards/{card_id}"],updateColumn:["PATCH /projects/columns/{column_id}"]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkPrivateVulnerabilityReporting:["GET /repos/{owner}/{repo}/private-vulnerability-reporting"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAttestation:["POST /repos/{owner}/{repo}/attestations"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAttestations:["GET /repos/{owner}/{repo}/attestations/{subject_digest}"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{createPushProtectionBypass:["POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses"],getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],getScanHistory:["GET /repos/{owner}/{repo}/secret-scanning/scan-history"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}"],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}"],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects"],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getById:["GET /user/{account_id}"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listAttestations:["GET /users/{username}/attestations/{subject_digest}"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}};var aUe=oUe;const Qf=new Map;for(const[t,e]of Object.entries(aUe))for(const[n,r]of Object.entries(e)){const[s,i,o]=r,[a,l]=s.split(/ /),c=Object.assign({method:a,url:l},i);Qf.has(t)||Qf.set(t,new Map),Qf.get(t).set(n,{scope:t,methodName:n,endpointDefaults:c,decorations:o})}const lUe={has({scope:t},e){return Qf.get(t).has(e)},getOwnPropertyDescriptor(t,e){return{value:this.get(t,e),configurable:!0,writable:!0,enumerable:!0}},defineProperty(t,e,n){return Object.defineProperty(t.cache,e,n),!0},deleteProperty(t,e){return delete t.cache[e],!0},ownKeys({scope:t}){return[...Qf.get(t).keys()]},set(t,e,n){return t.cache[e]=n},get({octokit:t,scope:e,cache:n},r){if(n[r])return n[r];const s=Qf.get(e).get(r);if(!s)return;const{endpointDefaults:i,decorations:o}=s;return o?n[r]=uUe(t,e,r,i,o):n[r]=t.request.defaults(i),n[r]}};function cUe(t){const e={};for(const n of Qf.keys())e[n]=new Proxy({octokit:t,scope:n,cache:{}},lUe);return e}function uUe(t,e,n,r,s){const i=t.request.defaults(r);function o(...a){let l=i.endpoint.merge(...a);if(s.mapToData)return l=Object.assign({},l,{data:l[s.mapToData],[s.mapToData]:void 0}),i(l);if(s.renamed){const[c,u]=s.renamed;t.log.warn(`octokit.${e}.${n}() has been renamed to octokit.${c}.${u}()`)}if(s.deprecated&&t.log.warn(s.deprecated),s.renamedParameters){const c=i.endpoint.merge(...a);for(const[u,d]of Object.entries(s.renamedParameters))u in c&&(t.log.warn(`"${u}" parameter is deprecated for "octokit.${e}.${n}()". Use "${d}" instead`),d in c||(c[d]=c[u]),delete c[u]);return i(c)}return i(...a)}return Object.assign(o,i)}function Woe(t){const e=cUe(t);return{...e,rest:e}}Woe.VERSION=iUe;const dUe="21.1.1",Goe=tUe.plugin(Uoe,Woe,Voe).defaults({userAgent:`octokit-rest.js/${dUe}`});function qoe(t,e){let n=null,r=0,s=null;return function(...o){const a=Date.now();if(n=o,a-r<e){s||(s=setTimeout(()=>{s=null,r=Date.now(),n&&(t.apply(this,n),n=null)},e-(a-r)));return}r=a,t.apply(this,o),n=null}}const{saveAs:hUe}=f9e;class Koe{#t=new n9e(Su);#n=new Z$e(Su);#e=new L$e(this.#n);#r=new c9e(Su);#a=new Set;artifacts=Ph({});showWorkbench=yr(!1);currentView=yr("code");unsavedFiles=yr(new Set);actionAlert=yr(void 0);modifiedFiles=new Set;artifactIdList=[];#s=Promise.resolve();constructor(){}addToExecutionQueue(e){this.#s=this.#s.then(()=>e())}get previews(){return this.#t.previews}get files(){return this.#n.files}get currentDocument(){return this.#e.currentDocument}get selectedFile(){return this.#e.selectedFile}get firstArtifact(){return this.#i(this.artifactIdList[0])}get filesCount(){return this.#n.filesCount}get showTerminal(){return this.#r.showTerminal}get boltTerminal(){return this.#r.boltTerminal}get alert(){return this.actionAlert}clearAlert(){this.actionAlert.set(void 0)}toggleTerminal(e){this.#r.toggleTerminal(e)}attachTerminal(e){this.#r.attachTerminal(e)}attachBoltTerminal(e){this.#r.attachBoltTerminal(e)}onTerminalResize(e,n){this.#r.onTerminalResize(e,n)}setDocuments(e){if(this.#e.setDocuments(e),this.#n.filesCount>0&&this.currentDocument.get()===void 0){for(const[n,r]of Object.entries(e))if(r?.type==="file"){this.setSelectedFile(n);break}}}setShowWorkbench(e){this.showWorkbench.set(e)}setCurrentDocumentContent(e){const n=this.currentDocument.get()?.filePath;if(!n)return;const r=this.#n.getFile(n)?.content,s=r!==void 0&&r!==e;this.#e.updateFile(n,e);const i=this.currentDocument.get();if(i){const o=this.unsavedFiles.get();if(s&&o.has(i.filePath))return;const a=new Set(o);s?a.add(i.filePath):a.delete(i.filePath),this.unsavedFiles.set(a)}}setCurrentDocumentScrollPosition(e){const n=this.currentDocument.get();if(!n)return;const{filePath:r}=n;this.#e.updateScrollPosition(r,e)}setSelectedFile(e){this.#e.setSelectedFile(e)}async saveFile(e){const r=this.#e.documents.get()[e];if(r===void 0)return;await this.#n.saveFile(e,r.value);const s=new Set(this.unsavedFiles.get());s.delete(e),this.unsavedFiles.set(s)}async saveCurrentDocument(){const e=this.currentDocument.get();e!==void 0&&await this.saveFile(e.filePath)}resetCurrentDocument(){const e=this.currentDocument.get();if(e===void 0)return;const{filePath:n}=e,r=this.#n.getFile(n);r&&this.setCurrentDocumentContent(r.content)}async saveAllFiles(){for(const e of this.unsavedFiles.get())await this.saveFile(e)}getFileModifcations(){return this.#n.getFileModifications()}getModifiedFiles(){return this.#n.getModifiedFiles()}resetAllFileModifications(){this.#n.resetFileModifications()}abortAllActions(){}setReloadedMessages(e){this.#a=new Set(e)}addArtifact({messageId:e,title:n,id:r,type:s}){this.#i(e)||(this.artifactIdList.includes(e)||this.artifactIdList.push(e),this.artifacts.setKey(e,{id:r,title:n,closed:!1,type:s,runner:new t$e(Su,()=>this.boltTerminal,o=>{this.#a.has(e)||this.actionAlert.set(o)})}))}updateArtifact({messageId:e},n){const r=this.#i(e);r&&this.artifacts.setKey(e,{...r,...n})}addAction(e){this.addToExecutionQueue(()=>this._addAction(e))}async _addAction(e){const{messageId:n}=e,r=this.#i(n);return r||ha("Artifact not found"),r.runner.addAction(e)}runAction(e,n=!1){n?this.actionStreamSampler(e,n):this.addToExecutionQueue(()=>this._runAction(e,n))}async _runAction(e,n=!1){const{messageId:r}=e,s=this.#i(r);s||ha("Artifact not found");const i=s.runner.actions.get()[e.actionId];if(!(!i||i.executed))if(e.action.type==="file"){const o=await Su,a=Af.join(o.workdir,e.action.filePath);this.selectedFile.value!==a&&this.setSelectedFile(a),this.currentView.value!=="code"&&this.currentView.set("code"),this.#e.documents.get()[a]||await s.runner.runAction(e,n),this.#e.updateFile(a,e.action.content),n||(await s.runner.runAction(e),this.resetAllFileModifications())}else await s.runner.runAction(e)}actionStreamSampler=qoe(async(e,n=!1)=>await this._runAction(e,n),100);#i(e){return this.artifacts.get()[e]}async downloadZip(){const e=new d9e,n=this.files.get(),r=(uc.value??"project").toLocaleLowerCase().split(" ").join("_"),s=Date.now().toString(36).slice(-6),i=`${r}_${s}`;for(const[a,l]of Object.entries(n))if(l?.type==="file"&&!l.isBinary){const c=Pv(a),u=c.split("/");if(u.length>1){let d=e;for(let h=0;h<u.length-1;h++)d=d.folder(u[h]);d.file(u[u.length-1],l.content)}else e.file(c,l.content)}const o=await e.generateAsync({type:"blob"});hUe(o,`${i}.zip`)}async syncFiles(e){const n=this.files.get(),r=[];for(const[s,i]of Object.entries(n))if(i?.type==="file"&&!i.isBinary){const o=Pv(s),a=o.split("/");let l=e;for(let d=0;d<a.length-1;d++)l=await l.getDirectoryHandle(a[d],{create:!0});const u=await(await l.getFileHandle(a[a.length-1],{create:!0})).createWritable();await u.write(i.content),await u.close(),r.push(o)}return r}async pushToGitHub(e,n,r,s){try{const i=s||Zn.get("githubToken"),o=r||Zn.get("githubUsername");if(!i||!o)throw new Error("GitHub token or username is not set in cookies or provided.");const a=new Goe({auth:i});let l;try{l=(await a.repos.get({owner:o,repo:e})).data}catch(g){if(g instanceof Error&&"status"in g&&g.status===404){const{data:b}=await a.repos.createForAuthenticatedUser({name:e,private:!1,auto_init:!0});l=b}else throw console.log("cannot create repo!"),g}const c=this.files.get();if(!c||Object.keys(c).length===0)throw new Error("No files found to push");const d=(await Promise.all(Object.entries(c).map(async([g,b])=>{if(b?.type==="file"&&b.content){const{data:v}=await a.git.createBlob({owner:l.owner.login,repo:l.name,content:_t.from(b.content).toString("base64"),encoding:"base64"});return{path:Pv(g),sha:v.sha}}return null}))).filter(Boolean);if(d.length===0)throw new Error("No valid files to push");const{data:h}=await a.git.getRef({owner:l.owner.login,repo:l.name,ref:`heads/${l.default_branch||"main"}`}),f=h.object.sha,{data:p}=await a.git.createTree({owner:l.owner.login,repo:l.name,base_tree:f,tree:d.map(g=>({path:g.path,mode:"100644",type:"blob",sha:g.sha}))}),{data:m}=await a.git.createCommit({owner:l.owner.login,repo:l.name,message:n||"Initial commit from your app",tree:p.sha,parents:[f]});await a.git.updateRef({owner:l.owner.login,repo:l.name,ref:`heads/${l.default_branch||"main"}`,sha:m.sha}),alert(`Repository created and code pushed: ${l.html_url}`)}catch(i){throw console.error("Error pushing to GitHub:",i),i}}}const It=new Koe,fUe=Object.freeze(Object.defineProperty({__proto__:null,WorkbenchStore:Koe,workbenchStore:It},Symbol.toStringTag,{value:"Module"}));var gU={};function bU(t){return Array.isArray(t)?t:[t]}const CR="",yU=" ",X3="\\",pUe=/^\s+$/,mUe=/(?:[^\\]|^)\\$/,gUe=/^\\!/,bUe=/^\\#/,yUe=/\r?\n/g,vUe=/^\.*\/|^\.+$/,Z3="/";let Yoe="node-ignore";typeof Symbol<"u"&&(Yoe=Symbol.for("node-ignore"));const vU=Yoe,wUe=(t,e,n)=>Object.defineProperty(t,e,{value:n}),xUe=/([0-z])-([0-z])/g,Joe=()=>!1,_Ue=t=>t.replace(xUe,(e,n,r)=>n.charCodeAt(0)<=r.charCodeAt(0)?e:CR),SUe=t=>{const{length:e}=t;return t.slice(0,e-e%2)},EUe=[[/^\uFEFF/,()=>CR],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,n)=>e+(n.indexOf("\\")===0?yU:CR)],[/(\\+?)\s/g,(t,e)=>{const{length:n}=e;return e.slice(0,n-n%2)+yU}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,n)=>e+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,n)=>{const r=n.replace(/\\\*/g,"[^\\/]*");return e+r}],[/\\\\\\(?=[$.|*+(){^])/g,()=>X3],[/\\\\/g,()=>X3],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,n,r,s)=>e===X3?`\\[${n}${SUe(r)}${s}`:s==="]"&&r.length%2===0?`[${_Ue(n)}${r}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],wU=Object.create(null),kUe=(t,e)=>{let n=wU[t];return n||(n=EUe.reduce((r,[s,i])=>r.replace(s,i.bind(t)),t),wU[t]=n),e?new RegExp(n,"i"):new RegExp(n)},kM=t=>typeof t=="string",CUe=t=>t&&kM(t)&&!pUe.test(t)&&!mUe.test(t)&&t.indexOf("#")!==0,AUe=t=>t.split(yUe);let TUe=class{constructor(e,n,r,s){this.origin=e,this.pattern=n,this.negative=r,this.regex=s}};const PUe=(t,e)=>{const n=t;let r=!1;t.indexOf("!")===0&&(r=!0,t=t.substr(1)),t=t.replace(gUe,"!").replace(bUe,"#");const s=kUe(t,e);return new TUe(n,t,r,s)},NUe=(t,e)=>{throw new e(t)},Gu=(t,e,n)=>kM(t)?t?Gu.isNotRelative(t)?n(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:n("path must not be empty",TypeError):n(`path must be a string, but got \`${e}\``,TypeError),Xoe=t=>vUe.test(t);Gu.isNotRelative=Xoe;Gu.convert=t=>t;let IUe=class{constructor({ignorecase:e=!0,ignoreCase:n=e,allowRelativePaths:r=!1}={}){wUe(this,vU,!0),this._rules=[],this._ignoreCase=n,this._allowRelativePaths=r,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[vU]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(CUe(e)){const n=PUe(e,this._ignoreCase);this._added=!0,this._rules.push(n)}}add(e){return this._added=!1,bU(kM(e)?AUe(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,n){let r=!1,s=!1;return this._rules.forEach(i=>{const{negative:o}=i;if(s===o&&r!==s||o&&!r&&!s&&!n)return;i.regex.test(e)&&(r=!o,s=o)}),{ignored:r,unignored:s}}_test(e,n,r,s){const i=e&&Gu.convert(e);return Gu(i,e,this._allowRelativePaths?Joe:NUe),this._t(i,n,r,s)}_t(e,n,r,s){if(e in n)return n[e];if(s||(s=e.split(Z3)),s.pop(),!s.length)return n[e]=this._testOne(e,r);const i=this._t(s.join(Z3)+Z3,n,r,s);return n[e]=i.ignored?i:this._testOne(e,r)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return bU(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}};const Nk=t=>new IUe(t),RUe=t=>Gu(t&&Gu.convert(t),t,Joe);Nk.isPathValid=RUe;Nk.default=Nk;var OUe=Nk;if(typeof Sn<"u"&&(gU&&gU.IGNORE_TEST_WIN32||Sn.platform==="win32")){const t=n=>/^\\\\\?\\/.test(n)||/["<>|\u0000-\u001F]+/u.test(n)?n:n.replace(/\\/g,"/");Gu.convert=t;const e=/^[a-z]:\//i;Gu.isNotRelative=n=>e.test(n)||Xoe(n)}const CM=yi(OUe),LUe=["node_modules/**",".git/**","dist/**","build/**",".next/**","coverage/**",".cache/**",".vscode/**",".idea/**","**/*.log","**/.DS_Store","**/npm-debug.log*","**/yarn-debug.log*","**/yarn-error.log*"],Q3=1e3,DUe=CM().add(LUe),Nv=()=>Math.random().toString(36).substring(2,15),MUe=async t=>{const n=new Uint8Array(await t.slice(0,1024).arrayBuffer());for(let r=0;r<n.length;r++){const s=n[r];if(s===0||s<32&&s!==9&&s!==10&&s!==13)return!0}return!1},jUe=t=>!DUe.ignores(t),FUe=(t,e)=>`
<boltArtifact id="${e}" title="User Updated Files">
${Object.keys(t).map(n=>`
<boltAction type="file" filePath="${n}">
${t[n].content}
</boltAction>
`).join(`
`)}
</boltArtifact>
  `;async function AM(t){const e=n=>t.some(r=>r.path.endsWith(n));if(e("package.json")){const n=t.find(r=>r.path.endsWith("package.json"));if(!n)return{type:"",setupCommand:"",followupMessage:""};try{const s=JSON.parse(n.content)?.scripts||{},o=["dev","start","preview"].find(a=>s[a]);return o?{type:"Node.js",setupCommand:"npm install",startCommand:`npm run ${o}`,followupMessage:`Found "${o}" script in package.json. Running "npm run ${o}" after installation.`}:{type:"Node.js",setupCommand:"npm install",followupMessage:"Would you like me to inspect package.json to determine the available scripts for running this project?"}}catch(r){return console.error("Error parsing package.json:",r),{type:"",setupCommand:"",followupMessage:""}}}return e("index.html")?{type:"Static",startCommand:"npx --yes serve",followupMessage:""}:{type:"",setupCommand:"",followupMessage:""}}function TM(t){if(!t.setupCommand&&!t.startCommand)return null;let e="";return t.setupCommand&&(e+=`
<boltAction type="shell">${t.setupCommand}</boltAction>`),t.startCommand&&(e+=`
<boltAction type="start">${t.startCommand}</boltAction>
`),{role:"assistant",content:`
<boltArtifact id="project-setup" title="Project Setup">
${e}
</boltArtifact>${t.followupMessage?`

${t.followupMessage}`:""}`,id:Nv(),createdAt:new Date}}function BUe(t){const e=/(<boltArtifact[^>]*>)([\s\S]*?)(<\/boltArtifact>)/g;return t.replace(e,(n,r,s,i)=>{const o=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=i.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`${o}${s}${a}`})}function $Ue(t){const e=/(<boltAction[^>]*>)([\s\S]*?)(<\/boltAction>)/g;return t.replace(e,(n,r,s,i)=>{const o=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=i.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`${o}${s}${a}`})}function Zoe(t){return BUe($Ue(t))}const An=await EFe(),Lo=yr(void 0),uc=yr(void 0),eP=yr(void 0);function Qoe(){const t=Pye(),{id:e}=Nye(),[n]=dY(),[r,s]=N.useState([]),[i,o]=N.useState([]),[a,l]=N.useState(!1),[c,u]=N.useState();N.useEffect(()=>{if(!An){l(!0);{const f=new Error("Chat persistence is unavailable");Ut.logError("Chat persistence initialization failed",f),Ve.error("Chat persistence is unavailable")}return}e&&m0(An,e).then(async f=>{if(f&&f.messages.length>0){const p=localStorage.getItem(`snapshot:${e}`),m=p?JSON.parse(p):{chatIndex:0,files:{}},g=m.summary,b=n.get("rewindTo");let v=-1;const w=b?f.messages.findIndex(k=>k.id===b)+1:f.messages.length,_=f.messages.findIndex(k=>k.id===m.chatIndex);_>=0&&_<w&&(v=_),_>0&&f.messages[_].id==b&&(v=-1);let S=f.messages.slice(v+1,w),E=[];if(v>=0&&(E=f.messages.slice(0,v+1)),s(E),v>0){const k=Object.entries(m?.files||{}).map(([R,C])=>C?.type!=="file"?null:{content:C.content,path:R}).filter(R=>!!R),x=await AM(k),I=TM(x);S=[{id:BFe(),role:"user",content:`Restore project from snapshot
                  `,annotations:["no-store","hidden"]},{id:f.messages[_].id,role:"assistant",content:`  Chat Restored from snapshot, You can revert this message to load the full chat history
                  <boltArtifact id="imported-files" title="Project Files Snapshot" type="bundled">
                  ${Object.entries(m?.files||{}).filter(R=>!R[0].endsWith("lock.json")).map(([R,C])=>C?.type==="file"?`
                      <boltAction type="file" filePath="${R}">
${C.content}
                      </boltAction>
                      `:"").join(`
`)}
                  </boltArtifact>
                  `,annotations:["no-store",...g?[{chatId:f.messages[_].id,type:"chatSummary",summary:g}]:[]]},...I!==null?[{id:`${f.messages[_].id}-2`,role:"user",content:"setup project",annotations:["no-store","hidden"]},{...I,id:`${f.messages[_].id}-3`,annotations:["no-store",...I.annotations||[],...g?[{chatId:`${f.messages[_].id}-3`,type:"chatSummary",summary:g}]:[]]}]:[],...S],h(e)}o(S),u(f.urlId),uc.set(f.description),Lo.set(f.id),eP.set(f.metadata)}else t("/",{replace:!0});l(!0)}).catch(f=>{console.error(f),Ut.logError("Failed to load chat messages",f),Ve.error(f.message)})},[e]);const d=N.useCallback(async(f,p,m,g)=>{const b=m||Lo;if(!b)return;const v={chatIndex:f,files:p,summary:g};localStorage.setItem(`snapshot:${b}`,JSON.stringify(v))},[Lo]),h=N.useCallback(async f=>{const p=localStorage.getItem(`snapshot:${f}`),m=await Su,g=p?JSON.parse(p):{files:{}};g?.files&&(Object.entries(g.files).forEach(async([b,v])=>{b.startsWith(m.workdir)&&(b=b.replace(m.workdir,"")),v?.type==="folder"&&await m.fs.mkdir(b,{recursive:!0})}),Object.entries(g.files).forEach(async([b,v])=>{v?.type==="file"&&(b.startsWith(m.workdir)&&(b=b.replace(m.workdir,"")),await m.fs.writeFile(b,v.content,{encoding:v.isBinary?void 0:"utf8"}))}))},[]);return{ready:!e||a,initialMessages:i,updateChatMestaData:async f=>{const p=Lo.get();if(!(!An||!p))try{await Ck(An,p,i,c,uc.get(),void 0,f),eP.set(f)}catch(m){Ve.error("Failed to update chat metadata"),console.error(m)}},storeMessageHistory:async f=>{if(!An||f.length===0)return;const{firstArtifact:p}=It;f=f.filter(v=>!v.annotations?.includes("no-store"));let m=c;if(!c&&p?.id){const v=await Tie(An,p.id);m=v,xU(v),u(v)}let g;const b=f[f.length-1];if(b.role==="assistant"){const w=b.annotations?.filter(_=>_&&typeof _=="object"&&Object.keys(_).includes("type"))||[];w.find(_=>_.type==="chatSummary")&&(g=w.find(_=>_.type==="chatSummary")?.summary)}if(d(f[f.length-1].id,It.files.get(),m,g),!uc.get()&&p?.title&&uc.set(p?.title),i.length===0&&!Lo.get()){const v=await Aie(An);Lo.set(v),c||xU(v)}await Ck(An,Lo.get(),[...r,...f],c,uc.get(),void 0,eP.get())},duplicateCurrentChat:async f=>{if(!(!An||!e&&!f))try{const p=await PFe(An,e||f);t(`/chat/${p}`),Ve.success("Chat duplicated successfully")}catch(p){Ve.error("Failed to duplicate chat"),console.log(p)}},importChat:async(f,p,m)=>{if(An)try{const g=await hM(An,f,p,m);window.location.href=`/chat/${g}`,Ve.success("Chat imported successfully")}catch(g){g instanceof Error?Ve.error("Failed to import chat: "+g.message):Ve.error("Failed to import chat")}},exportChat:async(f=c)=>{if(!An||!f)return;const p=await m0(An,f),m={messages:p.messages,description:p.description,exportDate:new Date().toISOString()},g=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),b=URL.createObjectURL(g),v=document.createElement("a");v.href=b,v.download=`chat-${new Date().toISOString()}.json`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(b)}}}function xU(t){const e=new URL(window.location.href);e.pathname=`/chat/${t}`,window.history.replaceState({},"",e)}function Rh(){const t=Bt(Av),e=Bt(l9),n=Bt(Pre),r=Bt(Nre),s=Bt(Cre),i=Bt(Are),[o,a]=N.useState([]),l=Bt(Tre),c=Bt(Zd),[u,d]=N.useState(()=>{const x=Zf("settings");return{theme:x?.theme||"system",language:x?.language||"en",notifications:x?.notifications??!0,eventLogs:x?.eventLogs??!0,timezone:x?.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,tabConfiguration:c}});N.useEffect(()=>{const x=Object.entries(t).filter(([I,R])=>R.settings.enabled).map(([I,R])=>R);a(x)},[t]);const h=N.useCallback(x=>{d(I=>{const R={...I,...x};return _Fe("settings",R),R})},[]),f=N.useCallback((x,I)=>{IDe(x,I)},[]),p=N.useCallback(x=>{l9.set(x),Ut.logSystem(`Debug mode ${x?"enabled":"disabled"}`),Zn.set("isDebugEnabled",String(x))},[]),m=N.useCallback(x=>{MDe(x),Ut.logSystem(`Event logs ${x?"enabled":"disabled"}`)},[]),g=N.useCallback(x=>{jDe(x),Ut.logSystem(`Prompt template updated to ${x}`)},[]),b=N.useCallback(x=>{ODe(x),Ut.logSystem(`Main branch updates ${x?"enabled":"disabled"}`)},[]),v=N.useCallback(x=>{LDe(x),Ut.logSystem(`Auto select template ${x?"enabled":"disabled"}`)},[]),w=N.useCallback(x=>{DDe(x),Ut.logSystem(`Context optimization ${x?"enabled":"disabled"}`)},[]),_=N.useCallback(x=>{h({theme:x})},[h]),S=N.useCallback(x=>{h({language:x})},[h]),E=N.useCallback(x=>{h({notifications:x})},[h]),k=N.useCallback(x=>{h({timezone:x})},[h]);return N.useEffect(()=>{const x=Av.get(),I={};Object.keys(x).forEach(R=>{I[R]=x[R].settings}),Zn.set("providers",JSON.stringify(I))},[t]),{...u,providers:t,activeProviders:o,updateProviderSettings:f,debug:e,enableDebugMode:p,eventLogs:n,setEventLogs:m,promptId:r,setPromptId:g,isLatestBranch:s,enableLatestBranch:b,autoSelectTemplate:i,setAutoSelectTemplate:v,contextOptimizationEnabled:l,enableContextOptimization:w,setTheme:_,setLanguage:S,setNotifications:E,setTimezone:k,settings:u,tabConfiguration:c,updateTabConfiguration:BDe,resetTabConfiguration:Ire}}const eae=-1,WA=0,Iv=1,Ik=2,PM=3,NM=4,IM=5,RM=6,tae=7,nae=8,_U=typeof self=="object"?self:globalThis,UUe=(t,e)=>{const n=(s,i)=>(t.set(i,s),s),r=s=>{if(t.has(s))return t.get(s);const[i,o]=e[s];switch(i){case WA:case eae:return n(o,s);case Iv:{const a=n([],s);for(const l of o)a.push(r(l));return a}case Ik:{const a=n({},s);for(const[l,c]of o)a[r(l)]=r(c);return a}case PM:return n(new Date(o),s);case NM:{const{source:a,flags:l}=o;return n(new RegExp(a,l),s)}case IM:{const a=n(new Map,s);for(const[l,c]of o)a.set(r(l),r(c));return a}case RM:{const a=n(new Set,s);for(const l of o)a.add(r(l));return a}case tae:{const{name:a,message:l}=o;return n(new _U[a](l),s)}case nae:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new _U[i](o),s)};return r},SU=t=>UUe(new Map,t)(0),Fm="",{toString:HUe}={},{keys:zUe}=Object,py=t=>{const e=typeof t;if(e!=="object"||!t)return[WA,e];const n=HUe.call(t).slice(8,-1);switch(n){case"Array":return[Iv,Fm];case"Object":return[Ik,Fm];case"Date":return[PM,Fm];case"RegExp":return[NM,Fm];case"Map":return[IM,Fm];case"Set":return[RM,Fm];case"DataView":return[Iv,n]}return n.includes("Array")?[Iv,n]:n.includes("Error")?[tae,n]:[Ik,n]},h2=([t,e])=>t===WA&&(e==="function"||e==="symbol"),VUe=(t,e,n,r)=>{const s=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},i=o=>{if(n.has(o))return n.get(o);let[a,l]=py(o);switch(a){case WA:{let u=o;switch(l){case"bigint":a=nae,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return s([eae],o)}return s([a,u],o)}case Iv:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),s([l,[...h]],o)}const u=[],d=s([a,u],o);for(const h of o)u.push(i(h));return d}case Ik:{if(l)switch(l){case"BigInt":return s([l,o.toString()],o);case"Boolean":case"Number":case"String":return s([l,o.valueOf()],o)}if(e&&"toJSON"in o)return i(o.toJSON());const u=[],d=s([a,u],o);for(const h of zUe(o))(t||!h2(py(o[h])))&&u.push([i(h),i(o[h])]);return d}case PM:return s([a,o.toISOString()],o);case NM:{const{source:u,flags:d}=o;return s([a,{source:u,flags:d}],o)}case IM:{const u=[],d=s([a,u],o);for(const[h,f]of o)(t||!(h2(py(h))||h2(py(f))))&&u.push([i(h),i(f)]);return d}case RM:{const u=[],d=s([a,u],o);for(const h of o)(t||!h2(py(h)))&&u.push(i(h));return d}}const{message:c}=o;return s([a,{name:l,message:c}],o)};return i},EU=(t,{json:e,lossy:n}={})=>{const r=[];return VUe(!(e||n),!!e,new Map,r)(t),r},gp=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?SU(EU(t,e)):structuredClone(t):(t,e)=>SU(EU(t,e));let qw=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};qw.prototype.normal={};qw.prototype.property={};qw.prototype.space=void 0;function rae(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new qw(n,r,e)}function H1(t){return t.toLowerCase()}let mo=class{constructor(e,n){this.attribute=n,this.property=e}};mo.prototype.attribute="";mo.prototype.booleanish=!1;mo.prototype.boolean=!1;mo.prototype.commaOrSpaceSeparated=!1;mo.prototype.commaSeparated=!1;mo.prototype.defined=!1;mo.prototype.mustUseProperty=!1;mo.prototype.number=!1;mo.prototype.overloadedBoolean=!1;mo.prototype.property="";mo.prototype.spaceSeparated=!1;mo.prototype.space=void 0;let WUe=0;const on=Bp(),ts=Bp(),sae=Bp(),gt=Bp(),lr=Bp(),Ag=Bp(),Ao=Bp();function Bp(){return 2**++WUe}const AR=Object.freeze(Object.defineProperty({__proto__:null,boolean:on,booleanish:ts,commaOrSpaceSeparated:Ao,commaSeparated:Ag,number:gt,overloadedBoolean:sae,spaceSeparated:lr},Symbol.toStringTag,{value:"Module"})),tP=Object.keys(AR);let OM=class extends mo{constructor(e,n,r,s){let i=-1;if(super(e,n),kU(this,"space",s),typeof r=="number")for(;++i<tP.length;){const o=tP[i];kU(this,tP[i],(r&AR[o])===AR[o])}}};OM.prototype.defined=!0;function kU(t,e,n){n&&(t[e]=n)}function tb(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const i=new OM(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[H1(r)]=r,n[H1(i.attribute)]=r}return new qw(e,n,t.space)}const iae=tb({properties:{ariaActiveDescendant:null,ariaAtomic:ts,ariaAutoComplete:null,ariaBusy:ts,ariaChecked:ts,ariaColCount:gt,ariaColIndex:gt,ariaColSpan:gt,ariaControls:lr,ariaCurrent:null,ariaDescribedBy:lr,ariaDetails:null,ariaDisabled:ts,ariaDropEffect:lr,ariaErrorMessage:null,ariaExpanded:ts,ariaFlowTo:lr,ariaGrabbed:ts,ariaHasPopup:null,ariaHidden:ts,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:lr,ariaLevel:gt,ariaLive:null,ariaModal:ts,ariaMultiLine:ts,ariaMultiSelectable:ts,ariaOrientation:null,ariaOwns:lr,ariaPlaceholder:null,ariaPosInSet:gt,ariaPressed:ts,ariaReadOnly:ts,ariaRelevant:null,ariaRequired:ts,ariaRoleDescription:lr,ariaRowCount:gt,ariaRowIndex:gt,ariaRowSpan:gt,ariaSelected:ts,ariaSetSize:gt,ariaSort:null,ariaValueMax:gt,ariaValueMin:gt,ariaValueNow:gt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function oae(t,e){return e in t?t[e]:e}function aae(t,e){return oae(t,e.toLowerCase())}const GUe=tb({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ag,acceptCharset:lr,accessKey:lr,action:null,allow:null,allowFullScreen:on,allowPaymentRequest:on,allowUserMedia:on,alt:null,as:null,async:on,autoCapitalize:null,autoComplete:lr,autoFocus:on,autoPlay:on,blocking:lr,capture:null,charSet:null,checked:on,cite:null,className:lr,cols:gt,colSpan:null,content:null,contentEditable:ts,controls:on,controlsList:lr,coords:gt|Ag,crossOrigin:null,data:null,dateTime:null,decoding:null,default:on,defer:on,dir:null,dirName:null,disabled:on,download:sae,draggable:ts,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:on,formTarget:null,headers:lr,height:gt,hidden:on,high:gt,href:null,hrefLang:null,htmlFor:lr,httpEquiv:lr,id:null,imageSizes:null,imageSrcSet:null,inert:on,inputMode:null,integrity:null,is:null,isMap:on,itemId:null,itemProp:lr,itemRef:lr,itemScope:on,itemType:lr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:on,low:gt,manifest:null,max:null,maxLength:gt,media:null,method:null,min:null,minLength:gt,multiple:on,muted:on,name:null,nonce:null,noModule:on,noValidate:on,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:on,optimum:gt,pattern:null,ping:lr,placeholder:null,playsInline:on,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:on,referrerPolicy:null,rel:lr,required:on,reversed:on,rows:gt,rowSpan:gt,sandbox:lr,scope:null,scoped:on,seamless:on,selected:on,shadowRootClonable:on,shadowRootDelegatesFocus:on,shadowRootMode:null,shape:null,size:gt,sizes:null,slot:null,span:gt,spellCheck:ts,src:null,srcDoc:null,srcLang:null,srcSet:null,start:gt,step:null,style:null,tabIndex:gt,target:null,title:null,translate:null,type:null,typeMustMatch:on,useMap:null,value:ts,width:gt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:lr,axis:null,background:null,bgColor:null,border:gt,borderColor:null,bottomMargin:gt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:on,declare:on,event:null,face:null,frame:null,frameBorder:null,hSpace:gt,leftMargin:gt,link:null,longDesc:null,lowSrc:null,marginHeight:gt,marginWidth:gt,noResize:on,noHref:on,noShade:on,noWrap:on,object:null,profile:null,prompt:null,rev:null,rightMargin:gt,rules:null,scheme:null,scrolling:ts,standby:null,summary:null,text:null,topMargin:gt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:gt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:on,disableRemotePlayback:on,prefix:null,property:null,results:gt,security:null,unselectable:null},space:"html",transform:aae}),qUe=tb({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ao,accentHeight:gt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:gt,amplitude:gt,arabicForm:null,ascent:gt,attributeName:null,attributeType:null,azimuth:gt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:gt,by:null,calcMode:null,capHeight:gt,className:lr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:gt,diffuseConstant:gt,direction:null,display:null,dur:null,divisor:gt,dominantBaseline:null,download:on,dx:null,dy:null,edgeMode:null,editable:null,elevation:gt,enableBackground:null,end:null,event:null,exponent:gt,externalResourcesRequired:null,fill:null,fillOpacity:gt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ag,g2:Ag,glyphName:Ag,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:gt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:gt,horizOriginX:gt,horizOriginY:gt,id:null,ideographic:gt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:gt,k:gt,k1:gt,k2:gt,k3:gt,k4:gt,kernelMatrix:Ao,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:gt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:gt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:gt,overlineThickness:gt,paintOrder:null,panose1:null,path:null,pathLength:gt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:lr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:gt,pointsAtY:gt,pointsAtZ:gt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ao,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ao,rev:Ao,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ao,requiredFeatures:Ao,requiredFonts:Ao,requiredFormats:Ao,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:gt,specularExponent:gt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:gt,strikethroughThickness:gt,string:null,stroke:null,strokeDashArray:Ao,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:gt,strokeOpacity:gt,strokeWidth:null,style:null,surfaceScale:gt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ao,tabIndex:gt,tableValues:null,target:null,targetX:gt,targetY:gt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ao,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:gt,underlineThickness:gt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:gt,values:null,vAlphabetic:gt,vMathematical:gt,vectorEffect:null,vHanging:gt,vIdeographic:gt,version:null,vertAdvY:gt,vertOriginX:gt,vertOriginY:gt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:gt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:oae}),lae=tb({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),cae=tb({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:aae}),uae=tb({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),KUe=/[A-Z]/g,CU=/-[a-z]/g,YUe=/^data[-\w.:]+$/i;function JUe(t,e){const n=H1(e);let r=e,s=mo;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&YUe.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(CU,ZUe);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!CU.test(i)){let o=i.replace(KUe,XUe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=OM}return new s(r,e)}function XUe(t){return"-"+t.toLowerCase()}function ZUe(t){return t.charAt(1).toUpperCase()}const QUe=rae([iae,GUe,lae,cae,uae],"html"),eHe=rae([iae,qUe,lae,cae,uae],"svg");function AU(t){const e=[],n=String(t||"");let r=n.indexOf(","),s=0,i=!1;for(;!i;){r===-1&&(r=n.length,i=!0);const o=n.slice(s,r).trim();(o||!i)&&e.push(o),s=r+1,r=n.indexOf(",",s)}return e}function LM(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const TU=/[#.]/g;function tHe(t,e){const n=t||"",r={};let s=0,i,o;for(;s<n.length;){TU.lastIndex=s;const a=TU.exec(n),l=n.slice(s,a?a.index:n.length);l&&(i?i==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,s+=l.length),a&&(i=a[0],s++)}return{type:"element",tagName:o||e||"div",properties:r,children:[]}}function PU(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function DM(t){return t.join(" ").trim()}function dae(t,e,n){const r=n?iHe(n):void 0;function s(i,o,...a){let l;if(i==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else{l=tHe(i,e);const c=l.tagName.toLowerCase(),u=r?r.get(c):void 0;if(l.tagName=u||c,nHe(o))a.unshift(o);else for(const[d,h]of Object.entries(o))rHe(t,l.properties,d,h)}for(const c of a)TR(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return s}function nHe(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const s=e[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const i=s;for(const o of i)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function rHe(t,e,n,r){const s=JUe(t,n);let i;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;i=r}else typeof r=="boolean"?i=r:typeof r=="string"?s.spaceSeparated?i=PU(r):s.commaSeparated?i=AU(r):s.commaOrSpaceSeparated?i=PU(AU(r).join(" ")):i=NU(s,s.property,r):Array.isArray(r)?i=[...r]:i=s.property==="style"?sHe(r):String(r);if(Array.isArray(i)){const o=[];for(const a of i)o.push(NU(s,s.property,a));i=o}s.property==="className"&&Array.isArray(e.className)&&(i=e.className.concat(i)),e[s.property]=i}}function TR(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)TR(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?TR(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function NU(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||H1(n)===H1(e)))return!0}return n}function sHe(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function iHe(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const oHe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],aHe=dae(QUe,"div"),lHe=dae(eHe,"g",oHe);let Kw=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};Kw.prototype.normal={};Kw.prototype.property={};Kw.prototype.space=void 0;function hae(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new Kw(n,r,e)}function PR(t){return t.toLowerCase()}let go=class{constructor(e,n){this.attribute=n,this.property=e}};go.prototype.attribute="";go.prototype.booleanish=!1;go.prototype.boolean=!1;go.prototype.commaOrSpaceSeparated=!1;go.prototype.commaSeparated=!1;go.prototype.defined=!1;go.prototype.mustUseProperty=!1;go.prototype.number=!1;go.prototype.overloadedBoolean=!1;go.prototype.property="";go.prototype.spaceSeparated=!1;go.prototype.space=void 0;let cHe=0;const an=$p(),ns=$p(),fae=$p(),bt=$p(),cr=$p(),Tg=$p(),To=$p();function $p(){return 2**++cHe}const NR=Object.freeze(Object.defineProperty({__proto__:null,boolean:an,booleanish:ns,commaOrSpaceSeparated:To,commaSeparated:Tg,number:bt,overloadedBoolean:fae,spaceSeparated:cr},Symbol.toStringTag,{value:"Module"})),nP=Object.keys(NR);let MM=class extends go{constructor(e,n,r,s){let i=-1;if(super(e,n),IU(this,"space",s),typeof r=="number")for(;++i<nP.length;){const o=nP[i];IU(this,nP[i],(r&NR[o])===NR[o])}}};MM.prototype.defined=!0;function IU(t,e,n){n&&(t[e]=n)}function nb(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const i=new MM(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[PR(r)]=r,n[PR(i.attribute)]=r}return new Kw(e,n,t.space)}const pae=nb({properties:{ariaActiveDescendant:null,ariaAtomic:ns,ariaAutoComplete:null,ariaBusy:ns,ariaChecked:ns,ariaColCount:bt,ariaColIndex:bt,ariaColSpan:bt,ariaControls:cr,ariaCurrent:null,ariaDescribedBy:cr,ariaDetails:null,ariaDisabled:ns,ariaDropEffect:cr,ariaErrorMessage:null,ariaExpanded:ns,ariaFlowTo:cr,ariaGrabbed:ns,ariaHasPopup:null,ariaHidden:ns,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:cr,ariaLevel:bt,ariaLive:null,ariaModal:ns,ariaMultiLine:ns,ariaMultiSelectable:ns,ariaOrientation:null,ariaOwns:cr,ariaPlaceholder:null,ariaPosInSet:bt,ariaPressed:ns,ariaReadOnly:ns,ariaRelevant:null,ariaRequired:ns,ariaRoleDescription:cr,ariaRowCount:bt,ariaRowIndex:bt,ariaRowSpan:bt,ariaSelected:ns,ariaSetSize:bt,ariaSort:null,ariaValueMax:bt,ariaValueMin:bt,ariaValueNow:bt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function mae(t,e){return e in t?t[e]:e}function gae(t,e){return mae(t,e.toLowerCase())}const uHe=nb({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Tg,acceptCharset:cr,accessKey:cr,action:null,allow:null,allowFullScreen:an,allowPaymentRequest:an,allowUserMedia:an,alt:null,as:null,async:an,autoCapitalize:null,autoComplete:cr,autoFocus:an,autoPlay:an,blocking:cr,capture:null,charSet:null,checked:an,cite:null,className:cr,cols:bt,colSpan:null,content:null,contentEditable:ns,controls:an,controlsList:cr,coords:bt|Tg,crossOrigin:null,data:null,dateTime:null,decoding:null,default:an,defer:an,dir:null,dirName:null,disabled:an,download:fae,draggable:ns,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:an,formTarget:null,headers:cr,height:bt,hidden:an,high:bt,href:null,hrefLang:null,htmlFor:cr,httpEquiv:cr,id:null,imageSizes:null,imageSrcSet:null,inert:an,inputMode:null,integrity:null,is:null,isMap:an,itemId:null,itemProp:cr,itemRef:cr,itemScope:an,itemType:cr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:an,low:bt,manifest:null,max:null,maxLength:bt,media:null,method:null,min:null,minLength:bt,multiple:an,muted:an,name:null,nonce:null,noModule:an,noValidate:an,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:an,optimum:bt,pattern:null,ping:cr,placeholder:null,playsInline:an,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:an,referrerPolicy:null,rel:cr,required:an,reversed:an,rows:bt,rowSpan:bt,sandbox:cr,scope:null,scoped:an,seamless:an,selected:an,shadowRootClonable:an,shadowRootDelegatesFocus:an,shadowRootMode:null,shape:null,size:bt,sizes:null,slot:null,span:bt,spellCheck:ns,src:null,srcDoc:null,srcLang:null,srcSet:null,start:bt,step:null,style:null,tabIndex:bt,target:null,title:null,translate:null,type:null,typeMustMatch:an,useMap:null,value:ns,width:bt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:cr,axis:null,background:null,bgColor:null,border:bt,borderColor:null,bottomMargin:bt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:an,declare:an,event:null,face:null,frame:null,frameBorder:null,hSpace:bt,leftMargin:bt,link:null,longDesc:null,lowSrc:null,marginHeight:bt,marginWidth:bt,noResize:an,noHref:an,noShade:an,noWrap:an,object:null,profile:null,prompt:null,rev:null,rightMargin:bt,rules:null,scheme:null,scrolling:ns,standby:null,summary:null,text:null,topMargin:bt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:bt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:an,disableRemotePlayback:an,prefix:null,property:null,results:bt,security:null,unselectable:null},space:"html",transform:gae}),dHe=nb({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:To,accentHeight:bt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:bt,amplitude:bt,arabicForm:null,ascent:bt,attributeName:null,attributeType:null,azimuth:bt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:bt,by:null,calcMode:null,capHeight:bt,className:cr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:bt,diffuseConstant:bt,direction:null,display:null,dur:null,divisor:bt,dominantBaseline:null,download:an,dx:null,dy:null,edgeMode:null,editable:null,elevation:bt,enableBackground:null,end:null,event:null,exponent:bt,externalResourcesRequired:null,fill:null,fillOpacity:bt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Tg,g2:Tg,glyphName:Tg,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:bt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:bt,horizOriginX:bt,horizOriginY:bt,id:null,ideographic:bt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:bt,k:bt,k1:bt,k2:bt,k3:bt,k4:bt,kernelMatrix:To,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:bt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:bt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:bt,overlineThickness:bt,paintOrder:null,panose1:null,path:null,pathLength:bt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:cr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:bt,pointsAtY:bt,pointsAtZ:bt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:To,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:To,rev:To,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:To,requiredFeatures:To,requiredFonts:To,requiredFormats:To,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:bt,specularExponent:bt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:bt,strikethroughThickness:bt,string:null,stroke:null,strokeDashArray:To,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:bt,strokeOpacity:bt,strokeWidth:null,style:null,surfaceScale:bt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:To,tabIndex:bt,tableValues:null,target:null,targetX:bt,targetY:bt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:To,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:bt,underlineThickness:bt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:bt,values:null,vAlphabetic:bt,vMathematical:bt,vectorEffect:null,vHanging:bt,vIdeographic:bt,version:null,vertAdvY:bt,vertOriginX:bt,vertOriginY:bt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:bt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:mae}),bae=nb({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),yae=nb({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:gae}),vae=nb({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),hHe=/[A-Z]/g,RU=/-[a-z]/g,fHe=/^data[-\w.:]+$/i;function pHe(t,e){const n=PR(e);let r=e,s=go;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&fHe.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(RU,gHe);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!RU.test(i)){let o=i.replace(hHe,mHe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=MM}return new s(r,e)}function mHe(t){return"-"+t.toLowerCase()}function gHe(t){return t.charAt(1).toUpperCase()}const wae=hae([pae,uHe,bae,yae,vae],"html"),xae=hae([pae,dHe,bae,yae,vae],"svg");function bHe(t){const e=String(t),n=[];return{toOffset:s,toPoint:r};function r(i){if(typeof i=="number"&&i>-1&&i<=e.length){let o=0;for(;;){let a=n[o];if(a===void 0){const l=OU(e,n[o-1]);a=l===-1?e.length+1:l+1,n[o]=a}if(a>i)return{line:o+1,column:i-(o>0?n[o-1]:0)+1,offset:i};o++}}}function s(i){if(i&&typeof i.line=="number"&&typeof i.column=="number"&&!Number.isNaN(i.line)&&!Number.isNaN(i.column)){for(;n.length<i.line;){const a=n[n.length-1],l=OU(e,a),c=l===-1?e.length+1:l+1;if(a===c)break;n.push(c)}const o=(i.line>1?n[i.line-2]:0)+i.column-1;if(o<n[i.line-1])return o}}}function OU(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Pf={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},_ae={}.hasOwnProperty,yHe=Object.prototype;function vHe(t,e){const n=e||{};return jM({file:n.file||void 0,location:!1,schema:n.space==="svg"?xae:wae,verbose:n.verbose||!1},t)}function jM(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},HS(t,r,n),n}case"#document":case"#document-fragment":{const r=e,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Sae(t,e.childNodes),data:{quirksMode:s}},t.file&&t.location){const i=String(t.file),o=bHe(i),a=o.toPoint(0),l=o.toPoint(i.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},HS(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},HS(t,r,n),n}default:return n=wHe(t,e),n}}function Sae(t,e){let n=-1;const r=[];for(;++n<e.length;){const s=jM(t,e[n]);r.push(s)}return r}function wHe(t,e){const n=t.schema;t.schema=e.namespaceURI===Pf.svg?xae:wae;let r=-1;const s={};for(;++r<e.attrs.length;){const a=e.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;_ae.call(yHe,l)||(s[l]=a.value)}const o=(t.schema.space==="svg"?lHe:aHe)(e.tagName,s,Sae(t,e.childNodes));if(HS(t,e,o),o.tagName==="template"){const a=e,l=a.sourceCodeLocation,c=l&&l.startTag&&hg(l.startTag),u=l&&l.endTag&&hg(l.endTag),d=jM(t,a.content);c&&u&&t.file&&(d.position={start:c.end,end:u.start}),o.content=d}return t.schema=n,o}function HS(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=xHe(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function xHe(t,e,n){const r=hg(n);if(e.type==="element"){const s=e.children[e.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),t.verbose){const i={};let o;if(n.attrs)for(o in n.attrs)_ae.call(n.attrs,o)&&(i[pHe(t.schema,o).property]=hg(n.attrs[o]));n.startTag;const a=hg(n.startTag),l=n.endTag?hg(n.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=i,e.data={position:c}}}return r}function hg(t){const e=LU({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=LU({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function LU(t){return t.line&&t.column?t:void 0}let Yw=class{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}};Yw.prototype.property={};Yw.prototype.normal={};Yw.prototype.space=null;function Eae(t,e){const n={},r={};let s=-1;for(;++s<t.length;)Object.assign(n,t[s].property),Object.assign(r,t[s].normal);return new Yw(n,r,e)}function IR(t){return t.toLowerCase()}let Ba=class{constructor(e,n){this.property=e,this.attribute=n}};Ba.prototype.space=null;Ba.prototype.boolean=!1;Ba.prototype.booleanish=!1;Ba.prototype.overloadedBoolean=!1;Ba.prototype.number=!1;Ba.prototype.commaSeparated=!1;Ba.prototype.spaceSeparated=!1;Ba.prototype.commaOrSpaceSeparated=!1;Ba.prototype.mustUseProperty=!1;Ba.prototype.defined=!1;let _He=0;const ln=Up(),rs=Up(),kae=Up(),yt=Up(),ur=Up(),Pg=Up(),Po=Up();function Up(){return 2**++_He}const RR=Object.freeze(Object.defineProperty({__proto__:null,boolean:ln,booleanish:rs,commaOrSpaceSeparated:Po,commaSeparated:Pg,number:yt,overloadedBoolean:kae,spaceSeparated:ur},Symbol.toStringTag,{value:"Module"})),rP=Object.keys(RR);let FM=class extends Ba{constructor(e,n,r,s){let i=-1;if(super(e,n),DU(this,"space",s),typeof r=="number")for(;++i<rP.length;){const o=rP[i];DU(this,rP[i],(r&RR[o])===RR[o])}}};FM.prototype.defined=!0;function DU(t,e,n){n&&(t[e]=n)}const SHe={}.hasOwnProperty;function rb(t){const e={},n={};let r;for(r in t.properties)if(SHe.call(t.properties,r)){const s=t.properties[r],i=new FM(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[IR(r)]=r,n[IR(i.attribute)]=r}return new Yw(e,n,t.space)}const Cae=rb({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Aae=rb({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Tae(t,e){return e in t?t[e]:e}function Pae(t,e){return Tae(t,e.toLowerCase())}const Nae=rb({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Pae,properties:{xmlns:null,xmlnsXLink:null}}),Iae=rb({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:rs,ariaAutoComplete:null,ariaBusy:rs,ariaChecked:rs,ariaColCount:yt,ariaColIndex:yt,ariaColSpan:yt,ariaControls:ur,ariaCurrent:null,ariaDescribedBy:ur,ariaDetails:null,ariaDisabled:rs,ariaDropEffect:ur,ariaErrorMessage:null,ariaExpanded:rs,ariaFlowTo:ur,ariaGrabbed:rs,ariaHasPopup:null,ariaHidden:rs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ur,ariaLevel:yt,ariaLive:null,ariaModal:rs,ariaMultiLine:rs,ariaMultiSelectable:rs,ariaOrientation:null,ariaOwns:ur,ariaPlaceholder:null,ariaPosInSet:yt,ariaPressed:rs,ariaReadOnly:rs,ariaRelevant:null,ariaRequired:rs,ariaRoleDescription:ur,ariaRowCount:yt,ariaRowIndex:yt,ariaRowSpan:yt,ariaSelected:rs,ariaSetSize:yt,ariaSort:null,ariaValueMax:yt,ariaValueMin:yt,ariaValueNow:yt,ariaValueText:null,role:null}}),EHe=rb({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Pae,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Pg,acceptCharset:ur,accessKey:ur,action:null,allow:null,allowFullScreen:ln,allowPaymentRequest:ln,allowUserMedia:ln,alt:null,as:null,async:ln,autoCapitalize:null,autoComplete:ur,autoFocus:ln,autoPlay:ln,blocking:ur,capture:null,charSet:null,checked:ln,cite:null,className:ur,cols:yt,colSpan:null,content:null,contentEditable:rs,controls:ln,controlsList:ur,coords:yt|Pg,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ln,defer:ln,dir:null,dirName:null,disabled:ln,download:kae,draggable:rs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ln,formTarget:null,headers:ur,height:yt,hidden:ln,high:yt,href:null,hrefLang:null,htmlFor:ur,httpEquiv:ur,id:null,imageSizes:null,imageSrcSet:null,inert:ln,inputMode:null,integrity:null,is:null,isMap:ln,itemId:null,itemProp:ur,itemRef:ur,itemScope:ln,itemType:ur,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ln,low:yt,manifest:null,max:null,maxLength:yt,media:null,method:null,min:null,minLength:yt,multiple:ln,muted:ln,name:null,nonce:null,noModule:ln,noValidate:ln,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ln,optimum:yt,pattern:null,ping:ur,placeholder:null,playsInline:ln,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ln,referrerPolicy:null,rel:ur,required:ln,reversed:ln,rows:yt,rowSpan:yt,sandbox:ur,scope:null,scoped:ln,seamless:ln,selected:ln,shadowRootClonable:ln,shadowRootDelegatesFocus:ln,shadowRootMode:null,shape:null,size:yt,sizes:null,slot:null,span:yt,spellCheck:rs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:yt,step:null,style:null,tabIndex:yt,target:null,title:null,translate:null,type:null,typeMustMatch:ln,useMap:null,value:rs,width:yt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ur,axis:null,background:null,bgColor:null,border:yt,borderColor:null,bottomMargin:yt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ln,declare:ln,event:null,face:null,frame:null,frameBorder:null,hSpace:yt,leftMargin:yt,link:null,longDesc:null,lowSrc:null,marginHeight:yt,marginWidth:yt,noResize:ln,noHref:ln,noShade:ln,noWrap:ln,object:null,profile:null,prompt:null,rev:null,rightMargin:yt,rules:null,scheme:null,scrolling:rs,standby:null,summary:null,text:null,topMargin:yt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:yt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ln,disableRemotePlayback:ln,prefix:null,property:null,results:yt,security:null,unselectable:null}}),kHe=rb({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Tae,properties:{about:Po,accentHeight:yt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:yt,amplitude:yt,arabicForm:null,ascent:yt,attributeName:null,attributeType:null,azimuth:yt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:yt,by:null,calcMode:null,capHeight:yt,className:ur,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:yt,diffuseConstant:yt,direction:null,display:null,dur:null,divisor:yt,dominantBaseline:null,download:ln,dx:null,dy:null,edgeMode:null,editable:null,elevation:yt,enableBackground:null,end:null,event:null,exponent:yt,externalResourcesRequired:null,fill:null,fillOpacity:yt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Pg,g2:Pg,glyphName:Pg,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:yt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:yt,horizOriginX:yt,horizOriginY:yt,id:null,ideographic:yt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:yt,k:yt,k1:yt,k2:yt,k3:yt,k4:yt,kernelMatrix:Po,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:yt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:yt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:yt,overlineThickness:yt,paintOrder:null,panose1:null,path:null,pathLength:yt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ur,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:yt,pointsAtY:yt,pointsAtZ:yt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Po,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Po,rev:Po,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Po,requiredFeatures:Po,requiredFonts:Po,requiredFormats:Po,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:yt,specularExponent:yt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:yt,strikethroughThickness:yt,string:null,stroke:null,strokeDashArray:Po,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:yt,strokeOpacity:yt,strokeWidth:null,style:null,surfaceScale:yt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Po,tabIndex:yt,tableValues:null,target:null,targetX:yt,targetY:yt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Po,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:yt,underlineThickness:yt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:yt,values:null,vAlphabetic:yt,vMathematical:yt,vectorEffect:null,vHanging:yt,vIdeographic:yt,version:null,vertAdvY:yt,vertOriginX:yt,vertOriginY:yt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:yt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),CHe=/^data[-\w.:]+$/i,MU=/-[a-z]/g,AHe=/[A-Z]/g;function THe(t,e){const n=IR(e);let r=e,s=Ba;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&CHe.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(MU,NHe);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!MU.test(i)){let o=i.replace(AHe,PHe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=FM}return new s(r,e)}function PHe(t){return"-"+t.toLowerCase()}function NHe(t){return t.charAt(1).toUpperCase()}const IHe=Eae([Aae,Cae,Nae,Iae,EHe],"html"),Rae=Eae([Aae,Cae,Nae,Iae,kHe],"svg"),jU={}.hasOwnProperty;function BM(t,e){const n=e||{};function r(s,...i){let o=r.invalid;const a=r.handlers;if(s&&jU.call(s,t)){const l=String(s[t]);o=jU.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,s,...i)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const RHe={},OHe={}.hasOwnProperty,Oae=BM("type",{handlers:{root:DHe,element:$He,text:FHe,comment:BHe,doctype:jHe}});function LHe(t,e){const r=(e||RHe).space;return Oae(t,r==="svg"?Rae:IHe)}function DHe(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=$M(t.children,n,e),sb(t,n),n}function MHe(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=$M(t.children,n,e),sb(t,n),n}function jHe(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return sb(t,e),e}function FHe(t){const e={nodeName:"#text",value:t.value,parentNode:null};return sb(t,e),e}function BHe(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return sb(t,e),e}function $He(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Rae);const s=[];let i;if(t.properties){for(i in t.properties)if(i!=="children"&&OHe.call(t.properties,i)){const l=UHe(r,i,t.properties[i]);l&&s.push(l)}}const o=r.space,a={nodeName:t.tagName,tagName:t.tagName,attrs:s,namespaceURI:Pf[o],childNodes:[],parentNode:null};return a.childNodes=$M(t.children,a,r),sb(t,a),t.tagName==="template"&&t.content&&(a.content=MHe(t.content,r)),a}function UHe(t,e,n){const r=THe(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?LM(n):DM(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const i=s.name.indexOf(":");i<0?s.prefix="":(s.name=s.name.slice(i+1),s.prefix=r.attribute.slice(0,i)),s.namespace=Pf[r.space]}return s}function $M(t,e,n){let r=-1;const s=[];if(t)for(;++r<t.length;){const i=Oae(t[r],n);i.parentNode=e,s.push(i)}return s}function sb(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Lae=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],HHe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),xr="";var be;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(be||(be={}));const Yi={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Dae(t){return t>=55296&&t<=57343}function zHe(t){return t>=56320&&t<=57343}function VHe(t,e){return(t-55296)*1024+9216+e}function Mae(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function jae(t){return t>=64976&&t<=65007||HHe.has(t)}var Qe;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Qe||(Qe={}));const WHe=65536;class GHe{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=WHe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:s,offset:i}=this,o=s+n,a=i+n;return{code:e,startLine:r,endLine:r,startCol:o,endCol:o,startOffset:a,endOffset:a}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(zHe(n))return this.pos++,this._addGap(),VHe(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,be.EOF;return this._err(Qe.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,be.EOF;const r=this.html.charCodeAt(n);return r===be.CARRIAGE_RETURN?be.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,be.EOF;let e=this.html.charCodeAt(this.pos);return e===be.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,be.LINE_FEED):e===be.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Dae(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===be.LINE_FEED||e===be.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){Mae(e)?this._err(Qe.controlCharacterInInputStream):jae(e)&&this._err(Qe.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var gn;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(gn||(gn={}));function Fae(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const Bae=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),qHe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var sP;const KHe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),YHe=(sP=String.fromCodePoint)!==null&&sP!==void 0?sP:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function JHe(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=KHe.get(t))!==null&&e!==void 0?e:t}var As;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(As||(As={}));const XHe=32;var Ud;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Ud||(Ud={}));function OR(t){return t>=As.ZERO&&t<=As.NINE}function ZHe(t){return t>=As.UPPER_A&&t<=As.UPPER_F||t>=As.LOWER_A&&t<=As.LOWER_F}function QHe(t){return t>=As.UPPER_A&&t<=As.UPPER_Z||t>=As.LOWER_A&&t<=As.LOWER_Z||OR(t)}function eze(t){return t===As.EQUALS||QHe(t)}var Es;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Es||(Es={}));var Eu;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Eu||(Eu={}));class $ae{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=Es.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Eu.Strict}startEntity(e){this.decodeMode=e,this.state=Es.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case Es.EntityStart:return e.charCodeAt(n)===As.NUM?(this.state=Es.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=Es.NamedEntity,this.stateNamedEntity(e,n));case Es.NumericStart:return this.stateNumericStart(e,n);case Es.NumericDecimal:return this.stateNumericDecimal(e,n);case Es.NumericHex:return this.stateNumericHex(e,n);case Es.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|XHe)===As.LOWER_X?(this.state=Es.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=Es.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,s){if(n!==r){const i=r-n;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(n,i),s),this.consumed+=i}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(OR(s)||ZHe(s))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(OR(s))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===As.SEMI)this.consumed+=1;else if(this.decodeMode===Eu.Strict)return 0;return this.emitCodePoint(JHe(this.result),this.consumed),this.errors&&(e!==As.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let s=r[this.treeIndex],i=(s&Ud.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=tze(r,s,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Eu.Attribute&&(i===0||eze(o))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],i=(s&Ud.VALUE_LENGTH)>>14,i!==0){if(o===As.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Eu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,s=(r[n]&Ud.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~Ud.VALUE_LENGTH:s[e+1],r),n===3&&this.emitCodePoint(s[e+2],r),r}end(){var e;switch(this.state){case Es.NamedEntity:return this.result!==0&&(this.decodeMode!==Eu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Es.NumericDecimal:return this.emitNumericEntity(0,2);case Es.NumericHex:return this.emitNumericEntity(0,3);case Es.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Es.EntityStart:return 0}}}function Uae(t){let e="";const n=new $ae(t,r=>e+=YHe(r));return function(s,i){let o=0,a=0;for(;(a=s.indexOf("&",a))>=0;){e+=s.slice(o,a),n.startEntity(i);const c=n.write(s,a+1);if(c<0){o=a+n.end();break}o=a+c,a=c===0?o+1:o}const l=e+s.slice(o);return e="",l}}function tze(t,e,n,r){const s=(e&Ud.BRANCH_LENGTH)>>7,i=e&Ud.JUMP_TABLE;if(s===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=s?-1:t[n+l]-1}let o=n,a=o+s-1;for(;o<=a;){const l=o+a>>>1,c=t[l];if(c<r)o=l+1;else if(c>r)a=l-1;else return t[l+s]}return-1}Uae(Bae);Uae(qHe);var ut;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(ut||(ut={}));var ep;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(ep||(ep={}));var pa;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(pa||(pa={}));var We;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(We||(We={}));var $;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})($||($={}));const nze=new Map([[We.A,$.A],[We.ADDRESS,$.ADDRESS],[We.ANNOTATION_XML,$.ANNOTATION_XML],[We.APPLET,$.APPLET],[We.AREA,$.AREA],[We.ARTICLE,$.ARTICLE],[We.ASIDE,$.ASIDE],[We.B,$.B],[We.BASE,$.BASE],[We.BASEFONT,$.BASEFONT],[We.BGSOUND,$.BGSOUND],[We.BIG,$.BIG],[We.BLOCKQUOTE,$.BLOCKQUOTE],[We.BODY,$.BODY],[We.BR,$.BR],[We.BUTTON,$.BUTTON],[We.CAPTION,$.CAPTION],[We.CENTER,$.CENTER],[We.CODE,$.CODE],[We.COL,$.COL],[We.COLGROUP,$.COLGROUP],[We.DD,$.DD],[We.DESC,$.DESC],[We.DETAILS,$.DETAILS],[We.DIALOG,$.DIALOG],[We.DIR,$.DIR],[We.DIV,$.DIV],[We.DL,$.DL],[We.DT,$.DT],[We.EM,$.EM],[We.EMBED,$.EMBED],[We.FIELDSET,$.FIELDSET],[We.FIGCAPTION,$.FIGCAPTION],[We.FIGURE,$.FIGURE],[We.FONT,$.FONT],[We.FOOTER,$.FOOTER],[We.FOREIGN_OBJECT,$.FOREIGN_OBJECT],[We.FORM,$.FORM],[We.FRAME,$.FRAME],[We.FRAMESET,$.FRAMESET],[We.H1,$.H1],[We.H2,$.H2],[We.H3,$.H3],[We.H4,$.H4],[We.H5,$.H5],[We.H6,$.H6],[We.HEAD,$.HEAD],[We.HEADER,$.HEADER],[We.HGROUP,$.HGROUP],[We.HR,$.HR],[We.HTML,$.HTML],[We.I,$.I],[We.IMG,$.IMG],[We.IMAGE,$.IMAGE],[We.INPUT,$.INPUT],[We.IFRAME,$.IFRAME],[We.KEYGEN,$.KEYGEN],[We.LABEL,$.LABEL],[We.LI,$.LI],[We.LINK,$.LINK],[We.LISTING,$.LISTING],[We.MAIN,$.MAIN],[We.MALIGNMARK,$.MALIGNMARK],[We.MARQUEE,$.MARQUEE],[We.MATH,$.MATH],[We.MENU,$.MENU],[We.META,$.META],[We.MGLYPH,$.MGLYPH],[We.MI,$.MI],[We.MO,$.MO],[We.MN,$.MN],[We.MS,$.MS],[We.MTEXT,$.MTEXT],[We.NAV,$.NAV],[We.NOBR,$.NOBR],[We.NOFRAMES,$.NOFRAMES],[We.NOEMBED,$.NOEMBED],[We.NOSCRIPT,$.NOSCRIPT],[We.OBJECT,$.OBJECT],[We.OL,$.OL],[We.OPTGROUP,$.OPTGROUP],[We.OPTION,$.OPTION],[We.P,$.P],[We.PARAM,$.PARAM],[We.PLAINTEXT,$.PLAINTEXT],[We.PRE,$.PRE],[We.RB,$.RB],[We.RP,$.RP],[We.RT,$.RT],[We.RTC,$.RTC],[We.RUBY,$.RUBY],[We.S,$.S],[We.SCRIPT,$.SCRIPT],[We.SEARCH,$.SEARCH],[We.SECTION,$.SECTION],[We.SELECT,$.SELECT],[We.SOURCE,$.SOURCE],[We.SMALL,$.SMALL],[We.SPAN,$.SPAN],[We.STRIKE,$.STRIKE],[We.STRONG,$.STRONG],[We.STYLE,$.STYLE],[We.SUB,$.SUB],[We.SUMMARY,$.SUMMARY],[We.SUP,$.SUP],[We.TABLE,$.TABLE],[We.TBODY,$.TBODY],[We.TEMPLATE,$.TEMPLATE],[We.TEXTAREA,$.TEXTAREA],[We.TFOOT,$.TFOOT],[We.TD,$.TD],[We.TH,$.TH],[We.THEAD,$.THEAD],[We.TITLE,$.TITLE],[We.TR,$.TR],[We.TRACK,$.TRACK],[We.TT,$.TT],[We.U,$.U],[We.UL,$.UL],[We.SVG,$.SVG],[We.VAR,$.VAR],[We.WBR,$.WBR],[We.XMP,$.XMP]]);function ib(t){var e;return(e=nze.get(t))!==null&&e!==void 0?e:$.UNKNOWN}const ft=$,rze={[ut.HTML]:new Set([ft.ADDRESS,ft.APPLET,ft.AREA,ft.ARTICLE,ft.ASIDE,ft.BASE,ft.BASEFONT,ft.BGSOUND,ft.BLOCKQUOTE,ft.BODY,ft.BR,ft.BUTTON,ft.CAPTION,ft.CENTER,ft.COL,ft.COLGROUP,ft.DD,ft.DETAILS,ft.DIR,ft.DIV,ft.DL,ft.DT,ft.EMBED,ft.FIELDSET,ft.FIGCAPTION,ft.FIGURE,ft.FOOTER,ft.FORM,ft.FRAME,ft.FRAMESET,ft.H1,ft.H2,ft.H3,ft.H4,ft.H5,ft.H6,ft.HEAD,ft.HEADER,ft.HGROUP,ft.HR,ft.HTML,ft.IFRAME,ft.IMG,ft.INPUT,ft.LI,ft.LINK,ft.LISTING,ft.MAIN,ft.MARQUEE,ft.MENU,ft.META,ft.NAV,ft.NOEMBED,ft.NOFRAMES,ft.NOSCRIPT,ft.OBJECT,ft.OL,ft.P,ft.PARAM,ft.PLAINTEXT,ft.PRE,ft.SCRIPT,ft.SECTION,ft.SELECT,ft.SOURCE,ft.STYLE,ft.SUMMARY,ft.TABLE,ft.TBODY,ft.TD,ft.TEMPLATE,ft.TEXTAREA,ft.TFOOT,ft.TH,ft.THEAD,ft.TITLE,ft.TR,ft.TRACK,ft.UL,ft.WBR,ft.XMP]),[ut.MATHML]:new Set([ft.MI,ft.MO,ft.MN,ft.MS,ft.MTEXT,ft.ANNOTATION_XML]),[ut.SVG]:new Set([ft.TITLE,ft.FOREIGN_OBJECT,ft.DESC]),[ut.XLINK]:new Set,[ut.XML]:new Set,[ut.XMLNS]:new Set},LR=new Set([ft.H1,ft.H2,ft.H3,ft.H4,ft.H5,ft.H6]);We.STYLE,We.SCRIPT,We.XMP,We.IFRAME,We.NOEMBED,We.NOFRAMES,We.PLAINTEXT;var _e;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(_e||(_e={}));const qr={DATA:_e.DATA,RCDATA:_e.RCDATA,RAWTEXT:_e.RAWTEXT,SCRIPT_DATA:_e.SCRIPT_DATA,PLAINTEXT:_e.PLAINTEXT,CDATA_SECTION:_e.CDATA_SECTION};function sze(t){return t>=be.DIGIT_0&&t<=be.DIGIT_9}function Ky(t){return t>=be.LATIN_CAPITAL_A&&t<=be.LATIN_CAPITAL_Z}function ize(t){return t>=be.LATIN_SMALL_A&&t<=be.LATIN_SMALL_Z}function Td(t){return ize(t)||Ky(t)}function FU(t){return Td(t)||sze(t)}function f2(t){return t+32}function Hae(t){return t===be.SPACE||t===be.LINE_FEED||t===be.TABULATION||t===be.FORM_FEED}function BU(t){return Hae(t)||t===be.SOLIDUS||t===be.GREATER_THAN_SIGN}function oze(t){return t===be.NULL?Qe.nullCharacterReference:t>1114111?Qe.characterReferenceOutsideUnicodeRange:Dae(t)?Qe.surrogateCharacterReference:jae(t)?Qe.noncharacterCharacterReference:Mae(t)||t===be.CARRIAGE_RETURN?Qe.controlCharacterReference:null}class aze{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=_e.DATA,this.returnState=_e.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new GHe(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new $ae(Bae,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Qe.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(Qe.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=oze(r);s&&this._err(s,1)}}:void 0)}_err(e,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:gn.START_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:gn.END_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:gn.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:gn.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(Fae(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Qe.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=ib(e.tagName),e.type===gn.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Qe.endTagWithAttributes),e.selfClosing&&this._err(Qe.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case gn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case gn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case gn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:gn.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=Hae(e)?gn.WHITESPACE_CHARACTER:e===be.NULL?gn.NULL_CHARACTER:gn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(gn.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=_e.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Eu.Attribute:Eu.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===_e.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===_e.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===_e.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case _e.DATA:{this._stateData(e);break}case _e.RCDATA:{this._stateRcdata(e);break}case _e.RAWTEXT:{this._stateRawtext(e);break}case _e.SCRIPT_DATA:{this._stateScriptData(e);break}case _e.PLAINTEXT:{this._statePlaintext(e);break}case _e.TAG_OPEN:{this._stateTagOpen(e);break}case _e.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case _e.TAG_NAME:{this._stateTagName(e);break}case _e.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case _e.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case _e.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case _e.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case _e.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case _e.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case _e.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case _e.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case _e.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case _e.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case _e.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case _e.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case _e.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case _e.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case _e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case _e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case _e.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case _e.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case _e.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case _e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case _e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case _e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case _e.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case _e.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case _e.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case _e.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case _e.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case _e.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case _e.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case _e.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case _e.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case _e.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case _e.BOGUS_COMMENT:{this._stateBogusComment(e);break}case _e.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case _e.COMMENT_START:{this._stateCommentStart(e);break}case _e.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case _e.COMMENT:{this._stateComment(e);break}case _e.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case _e.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case _e.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case _e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case _e.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case _e.COMMENT_END:{this._stateCommentEnd(e);break}case _e.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case _e.DOCTYPE:{this._stateDoctype(e);break}case _e.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case _e.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case _e.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case _e.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case _e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case _e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case _e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case _e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case _e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case _e.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case _e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case _e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case _e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case _e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case _e.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case _e.CDATA_SECTION:{this._stateCdataSection(e);break}case _e.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case _e.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case _e.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case _e.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case be.LESS_THAN_SIGN:{this.state=_e.TAG_OPEN;break}case be.AMPERSAND:{this._startCharacterReference();break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this._emitCodePoint(e);break}case be.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case be.AMPERSAND:{this._startCharacterReference();break}case be.LESS_THAN_SIGN:{this.state=_e.RCDATA_LESS_THAN_SIGN;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this._emitChars(xr);break}case be.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case be.LESS_THAN_SIGN:{this.state=_e.RAWTEXT_LESS_THAN_SIGN;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this._emitChars(xr);break}case be.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case be.LESS_THAN_SIGN:{this.state=_e.SCRIPT_DATA_LESS_THAN_SIGN;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this._emitChars(xr);break}case be.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case be.NULL:{this._err(Qe.unexpectedNullCharacter),this._emitChars(xr);break}case be.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Td(e))this._createStartTagToken(),this.state=_e.TAG_NAME,this._stateTagName(e);else switch(e){case be.EXCLAMATION_MARK:{this.state=_e.MARKUP_DECLARATION_OPEN;break}case be.SOLIDUS:{this.state=_e.END_TAG_OPEN;break}case be.QUESTION_MARK:{this._err(Qe.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=_e.BOGUS_COMMENT,this._stateBogusComment(e);break}case be.EOF:{this._err(Qe.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Qe.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=_e.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Td(e))this._createEndTagToken(),this.state=_e.TAG_NAME,this._stateTagName(e);else switch(e){case be.GREATER_THAN_SIGN:{this._err(Qe.missingEndTagName),this.state=_e.DATA;break}case be.EOF:{this._err(Qe.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Qe.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=_e.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=_e.BEFORE_ATTRIBUTE_NAME;break}case be.SOLIDUS:{this.state=_e.SELF_CLOSING_START_TAG;break}case be.GREATER_THAN_SIGN:{this.state=_e.DATA,this.emitCurrentTagToken();break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),n.tagName+=xr;break}case be.EOF:{this._err(Qe.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Ky(e)?f2(e):e)}}_stateRcdataLessThanSign(e){e===be.SOLIDUS?this.state=_e.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=_e.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Td(e)?(this.state=_e.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=_e.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=_e.BEFORE_ATTRIBUTE_NAME,!1;case be.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=_e.SELF_CLOSING_START_TAG,!1;case be.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=_e.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=_e.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===be.SOLIDUS?this.state=_e.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=_e.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Td(e)?(this.state=_e.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=_e.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=_e.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case be.SOLIDUS:{this.state=_e.SCRIPT_DATA_END_TAG_OPEN;break}case be.EXCLAMATION_MARK:{this.state=_e.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=_e.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Td(e)?(this.state=_e.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=_e.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=_e.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===be.HYPHEN_MINUS?(this.state=_e.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=_e.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===be.HYPHEN_MINUS?(this.state=_e.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=_e.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case be.HYPHEN_MINUS:{this.state=_e.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=_e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this._emitChars(xr);break}case be.EOF:{this._err(Qe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case be.HYPHEN_MINUS:{this.state=_e.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=_e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this.state=_e.SCRIPT_DATA_ESCAPED,this._emitChars(xr);break}case be.EOF:{this._err(Qe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=_e.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case be.HYPHEN_MINUS:{this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=_e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case be.GREATER_THAN_SIGN:{this.state=_e.SCRIPT_DATA,this._emitChars(">");break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this.state=_e.SCRIPT_DATA_ESCAPED,this._emitChars(xr);break}case be.EOF:{this._err(Qe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=_e.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===be.SOLIDUS?this.state=_e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Td(e)?(this._emitChars("<"),this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=_e.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Td(e)?(this.state=_e.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=_e.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=_e.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Yi.SCRIPT,!1)&&BU(this.preprocessor.peek(Yi.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Yi.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=_e.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case be.HYPHEN_MINUS:{this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this._emitChars(xr);break}case be.EOF:{this._err(Qe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case be.HYPHEN_MINUS:{this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(xr);break}case be.EOF:{this._err(Qe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case be.HYPHEN_MINUS:{this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case be.GREATER_THAN_SIGN:{this.state=_e.SCRIPT_DATA,this._emitChars(">");break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(xr);break}case be.EOF:{this._err(Qe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===be.SOLIDUS?(this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Yi.SCRIPT,!1)&&BU(this.preprocessor.peek(Yi.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Yi.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=_e.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=_e.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.SOLIDUS:case be.GREATER_THAN_SIGN:case be.EOF:{this.state=_e.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case be.EQUALS_SIGN:{this._err(Qe.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=_e.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=_e.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:case be.SOLIDUS:case be.GREATER_THAN_SIGN:case be.EOF:{this._leaveAttrName(),this.state=_e.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case be.EQUALS_SIGN:{this._leaveAttrName(),this.state=_e.BEFORE_ATTRIBUTE_VALUE;break}case be.QUOTATION_MARK:case be.APOSTROPHE:case be.LESS_THAN_SIGN:{this._err(Qe.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this.currentAttr.name+=xr;break}default:this.currentAttr.name+=String.fromCodePoint(Ky(e)?f2(e):e)}}_stateAfterAttributeName(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.SOLIDUS:{this.state=_e.SELF_CLOSING_START_TAG;break}case be.EQUALS_SIGN:{this.state=_e.BEFORE_ATTRIBUTE_VALUE;break}case be.GREATER_THAN_SIGN:{this.state=_e.DATA,this.emitCurrentTagToken();break}case be.EOF:{this._err(Qe.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=_e.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.QUOTATION_MARK:{this.state=_e.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case be.APOSTROPHE:{this.state=_e.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case be.GREATER_THAN_SIGN:{this._err(Qe.missingAttributeValue),this.state=_e.DATA,this.emitCurrentTagToken();break}default:this.state=_e.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case be.QUOTATION_MARK:{this.state=_e.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case be.AMPERSAND:{this._startCharacterReference();break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this.currentAttr.value+=xr;break}case be.EOF:{this._err(Qe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case be.APOSTROPHE:{this.state=_e.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case be.AMPERSAND:{this._startCharacterReference();break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this.currentAttr.value+=xr;break}case be.EOF:{this._err(Qe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this._leaveAttrValue(),this.state=_e.BEFORE_ATTRIBUTE_NAME;break}case be.AMPERSAND:{this._startCharacterReference();break}case be.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=_e.DATA,this.emitCurrentTagToken();break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),this.currentAttr.value+=xr;break}case be.QUOTATION_MARK:case be.APOSTROPHE:case be.LESS_THAN_SIGN:case be.EQUALS_SIGN:case be.GRAVE_ACCENT:{this._err(Qe.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case be.EOF:{this._err(Qe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this._leaveAttrValue(),this.state=_e.BEFORE_ATTRIBUTE_NAME;break}case be.SOLIDUS:{this._leaveAttrValue(),this.state=_e.SELF_CLOSING_START_TAG;break}case be.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=_e.DATA,this.emitCurrentTagToken();break}case be.EOF:{this._err(Qe.eofInTag),this._emitEOFToken();break}default:this._err(Qe.missingWhitespaceBetweenAttributes),this.state=_e.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case be.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=_e.DATA,this.emitCurrentTagToken();break}case be.EOF:{this._err(Qe.eofInTag),this._emitEOFToken();break}default:this._err(Qe.unexpectedSolidusInTag),this.state=_e.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case be.GREATER_THAN_SIGN:{this.state=_e.DATA,this.emitCurrentComment(n);break}case be.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),n.data+=xr;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Yi.DASH_DASH,!0)?(this._createCommentToken(Yi.DASH_DASH.length+1),this.state=_e.COMMENT_START):this._consumeSequenceIfMatch(Yi.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Yi.DOCTYPE.length+1),this.state=_e.DOCTYPE):this._consumeSequenceIfMatch(Yi.CDATA_START,!0)?this.inForeignNode?this.state=_e.CDATA_SECTION:(this._err(Qe.cdataInHtmlContent),this._createCommentToken(Yi.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=_e.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Qe.incorrectlyOpenedComment),this._createCommentToken(2),this.state=_e.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case be.HYPHEN_MINUS:{this.state=_e.COMMENT_START_DASH;break}case be.GREATER_THAN_SIGN:{this._err(Qe.abruptClosingOfEmptyComment),this.state=_e.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=_e.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case be.HYPHEN_MINUS:{this.state=_e.COMMENT_END;break}case be.GREATER_THAN_SIGN:{this._err(Qe.abruptClosingOfEmptyComment),this.state=_e.DATA,this.emitCurrentComment(n);break}case be.EOF:{this._err(Qe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=_e.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case be.HYPHEN_MINUS:{this.state=_e.COMMENT_END_DASH;break}case be.LESS_THAN_SIGN:{n.data+="<",this.state=_e.COMMENT_LESS_THAN_SIGN;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),n.data+=xr;break}case be.EOF:{this._err(Qe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case be.EXCLAMATION_MARK:{n.data+="!",this.state=_e.COMMENT_LESS_THAN_SIGN_BANG;break}case be.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=_e.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===be.HYPHEN_MINUS?this.state=_e.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=_e.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===be.HYPHEN_MINUS?this.state=_e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=_e.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==be.GREATER_THAN_SIGN&&e!==be.EOF&&this._err(Qe.nestedComment),this.state=_e.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case be.HYPHEN_MINUS:{this.state=_e.COMMENT_END;break}case be.EOF:{this._err(Qe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=_e.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case be.GREATER_THAN_SIGN:{this.state=_e.DATA,this.emitCurrentComment(n);break}case be.EXCLAMATION_MARK:{this.state=_e.COMMENT_END_BANG;break}case be.HYPHEN_MINUS:{n.data+="-";break}case be.EOF:{this._err(Qe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=_e.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case be.HYPHEN_MINUS:{n.data+="--!",this.state=_e.COMMENT_END_DASH;break}case be.GREATER_THAN_SIGN:{this._err(Qe.incorrectlyClosedComment),this.state=_e.DATA,this.emitCurrentComment(n);break}case be.EOF:{this._err(Qe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=_e.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=_e.BEFORE_DOCTYPE_NAME;break}case be.GREATER_THAN_SIGN:{this.state=_e.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case be.EOF:{this._err(Qe.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Qe.missingWhitespaceBeforeDoctypeName),this.state=_e.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Ky(e))this._createDoctypeToken(String.fromCharCode(f2(e))),this.state=_e.DOCTYPE_NAME;else switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.NULL:{this._err(Qe.unexpectedNullCharacter),this._createDoctypeToken(xr),this.state=_e.DOCTYPE_NAME;break}case be.GREATER_THAN_SIGN:{this._err(Qe.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=_e.DATA;break}case be.EOF:{this._err(Qe.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=_e.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=_e.AFTER_DOCTYPE_NAME;break}case be.GREATER_THAN_SIGN:{this.state=_e.DATA,this.emitCurrentDoctype(n);break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),n.name+=xr;break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Ky(e)?f2(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.GREATER_THAN_SIGN:{this.state=_e.DATA,this.emitCurrentDoctype(n);break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Yi.PUBLIC,!1)?this.state=_e.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Yi.SYSTEM,!1)?this.state=_e.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Qe.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=_e.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=_e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case be.QUOTATION_MARK:{this._err(Qe.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=_e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{this._err(Qe.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=_e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case be.GREATER_THAN_SIGN:{this._err(Qe.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=_e.DATA,this.emitCurrentDoctype(n);break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Qe.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=_e.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.QUOTATION_MARK:{n.publicId="",this.state=_e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{n.publicId="",this.state=_e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case be.GREATER_THAN_SIGN:{this._err(Qe.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=_e.DATA,this.emitCurrentDoctype(n);break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Qe.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=_e.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case be.QUOTATION_MARK:{this.state=_e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),n.publicId+=xr;break}case be.GREATER_THAN_SIGN:{this._err(Qe.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=_e.DATA;break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case be.APOSTROPHE:{this.state=_e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),n.publicId+=xr;break}case be.GREATER_THAN_SIGN:{this._err(Qe.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=_e.DATA;break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=_e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case be.GREATER_THAN_SIGN:{this.state=_e.DATA,this.emitCurrentDoctype(n);break}case be.QUOTATION_MARK:{this._err(Qe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=_e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{this._err(Qe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=_e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Qe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=_e.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=_e.DATA;break}case be.QUOTATION_MARK:{n.systemId="",this.state=_e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{n.systemId="",this.state=_e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Qe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=_e.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=_e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case be.QUOTATION_MARK:{this._err(Qe.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=_e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{this._err(Qe.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=_e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case be.GREATER_THAN_SIGN:{this._err(Qe.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=_e.DATA,this.emitCurrentDoctype(n);break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Qe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=_e.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.QUOTATION_MARK:{n.systemId="",this.state=_e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{n.systemId="",this.state=_e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case be.GREATER_THAN_SIGN:{this._err(Qe.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=_e.DATA,this.emitCurrentDoctype(n);break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Qe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=_e.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case be.QUOTATION_MARK:{this.state=_e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),n.systemId+=xr;break}case be.GREATER_THAN_SIGN:{this._err(Qe.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=_e.DATA;break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case be.APOSTROPHE:{this.state=_e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter),n.systemId+=xr;break}case be.GREATER_THAN_SIGN:{this._err(Qe.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=_e.DATA;break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=_e.DATA;break}case be.EOF:{this._err(Qe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Qe.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=_e.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case be.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=_e.DATA;break}case be.NULL:{this._err(Qe.unexpectedNullCharacter);break}case be.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case be.RIGHT_SQUARE_BRACKET:{this.state=_e.CDATA_SECTION_BRACKET;break}case be.EOF:{this._err(Qe.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===be.RIGHT_SQUARE_BRACKET?this.state=_e.CDATA_SECTION_END:(this._emitChars("]"),this.state=_e.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case be.GREATER_THAN_SIGN:{this.state=_e.DATA;break}case be.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=_e.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(be.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&FU(this.preprocessor.peek(1))?_e.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){FU(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===be.SEMICOLON&&this._err(Qe.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const zae=new Set([$.DD,$.DT,$.LI,$.OPTGROUP,$.OPTION,$.P,$.RB,$.RP,$.RT,$.RTC]),$U=new Set([...zae,$.CAPTION,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]),Rk=new Set([$.APPLET,$.CAPTION,$.HTML,$.MARQUEE,$.OBJECT,$.TABLE,$.TD,$.TEMPLATE,$.TH]),lze=new Set([...Rk,$.OL,$.UL]),cze=new Set([...Rk,$.BUTTON]),UU=new Set([$.ANNOTATION_XML,$.MI,$.MN,$.MO,$.MS,$.MTEXT]),HU=new Set([$.DESC,$.FOREIGN_OBJECT,$.TITLE]),uze=new Set([$.TR,$.TEMPLATE,$.HTML]),dze=new Set([$.TBODY,$.TFOOT,$.THEAD,$.TEMPLATE,$.HTML]),hze=new Set([$.TABLE,$.TEMPLATE,$.HTML]),fze=new Set([$.TD,$.TH]);class pze{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=$.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===$.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ut.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const s=this._indexOf(e)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ut.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(n<0?0:n)}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(LR,ut.HTML)}popUntilTableCellPopped(){this.popUntilPopped(fze,ut.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(hze,ut.HTML)}clearBackToTableBodyContext(){this.clearBackTo(dze,ut.HTML)}clearBackToTableRowContext(){this.clearBackTo(uze,ut.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===$.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===$.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case ut.HTML:{if(s===e)return!0;if(n.has(s))return!1;break}case ut.SVG:{if(HU.has(s))return!1;break}case ut.MATHML:{if(UU.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,Rk)}hasInListItemScope(e){return this.hasInDynamicScope(e,lze)}hasInButtonScope(e){return this.hasInDynamicScope(e,cze)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case ut.HTML:{if(LR.has(n))return!0;if(Rk.has(n))return!1;break}case ut.SVG:{if(HU.has(n))return!1;break}case ut.MATHML:{if(UU.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===ut.HTML)switch(this.tagIDs[n]){case e:return!0;case $.TABLE:case $.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===ut.HTML)switch(this.tagIDs[e]){case $.TBODY:case $.THEAD:case $.TFOOT:return!0;case $.TABLE:case $.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===ut.HTML)switch(this.tagIDs[n]){case e:return!0;case $.OPTION:case $.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;zae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;$U.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&$U.has(this.currentTagId);)this.pop()}}const iP=3;var ic;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(ic||(ic={}));const zU={type:ic.Marker};class mze{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],s=n.length,i=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===ic.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===i&&this.treeAdapter.getNamespaceURI(c)===o){const u=this.treeAdapter.getAttrList(c);u.length===s&&r.push({idx:a,attrs:u})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<iP)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<iP)return;const s=new Map(n.map(o=>[o.name,o.value]));let i=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>s.get(l.name)===l.value)&&(i+=1,i>=iP&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(zU)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:ic.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:ic.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(zU);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===ic.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===ic.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===ic.Element&&n.element===e)}}const Pd={createDocument(){return{nodeName:"#document",mode:pa.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const s=t.childNodes.find(i=>i.nodeName==="#documentType");if(s)s.name=e,s.publicId=n,s.systemId=r;else{const i={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};Pd.appendChild(t,i)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Pd.isTextNode(n)){n.value+=e;return}}Pd.appendChild(t,Pd.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&Pd.isTextNode(r)?r.value+=e:Pd.insertBefore(t,Pd.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},Vae="html",gze="about:legacy-compat",bze="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Wae=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],yze=[...Wae,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],vze=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Gae=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],wze=[...Gae,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function VU(t,e){return e.some(n=>t.startsWith(n))}function xze(t){return t.name===Vae&&t.publicId===null&&(t.systemId===null||t.systemId===gze)}function _ze(t){if(t.name!==Vae)return pa.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===bze)return pa.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),vze.has(n))return pa.QUIRKS;let r=e===null?yze:Wae;if(VU(n,r))return pa.QUIRKS;if(r=e===null?Gae:wze,VU(n,r))return pa.LIMITED_QUIRKS}return pa.NO_QUIRKS}const WU={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Sze="definitionurl",Eze="definitionURL",kze=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),Cze=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ut.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ut.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ut.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ut.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ut.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ut.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ut.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:ut.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ut.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ut.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ut.XMLNS}]]),Aze=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),Tze=new Set([$.B,$.BIG,$.BLOCKQUOTE,$.BODY,$.BR,$.CENTER,$.CODE,$.DD,$.DIV,$.DL,$.DT,$.EM,$.EMBED,$.H1,$.H2,$.H3,$.H4,$.H5,$.H6,$.HEAD,$.HR,$.I,$.IMG,$.LI,$.LISTING,$.MENU,$.META,$.NOBR,$.OL,$.P,$.PRE,$.RUBY,$.S,$.SMALL,$.SPAN,$.STRONG,$.STRIKE,$.SUB,$.SUP,$.TABLE,$.TT,$.U,$.UL,$.VAR]);function Pze(t){const e=t.tagID;return e===$.FONT&&t.attrs.some(({name:r})=>r===ep.COLOR||r===ep.SIZE||r===ep.FACE)||Tze.has(e)}function qae(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===Sze){t.attrs[e].name=Eze;break}}function Kae(t){for(let e=0;e<t.attrs.length;e++){const n=kze.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function UM(t){for(let e=0;e<t.attrs.length;e++){const n=Cze.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function Nze(t){const e=Aze.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=ib(t.tagName))}function Ize(t,e){return e===ut.MATHML&&(t===$.MI||t===$.MO||t===$.MN||t===$.MS||t===$.MTEXT)}function Rze(t,e,n){if(e===ut.MATHML&&t===$.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===ep.ENCODING){const s=n[r].value.toLowerCase();return s===WU.TEXT_HTML||s===WU.APPLICATION_XML}}return e===ut.SVG&&(t===$.FOREIGN_OBJECT||t===$.DESC||t===$.TITLE)}function Oze(t,e,n,r){return(!r||r===ut.HTML)&&Rze(t,e,n)||(!r||r===ut.MATHML)&&Ize(t,e)}const Lze="hidden",Dze=8,Mze=3;var Te;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Te||(Te={}));const jze={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Yae=new Set([$.TABLE,$.TBODY,$.TFOOT,$.THEAD,$.TR]),GU={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Pd,onParseError:null};let qU=class{constructor(e,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=Te.INITIAL,this.originalInsertionMode=Te.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...GU,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new aze(this.options,this),this.activeFormattingElements=new mze(this.treeAdapter),this.fragmentContextID=r?ib(this.treeAdapter.getTagName(r)):$.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new pze(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...GU,...n};e??(e=r.treeAdapter.createElement(We.TEMPLATE,ut.HTML,[]));const s=r.treeAdapter.createElement("documentmock",ut.HTML,[]),i=new this(r,s,e);return i.fragmentContextID===$.TEMPLATE&&i.tmplInsertionModeStack.unshift(Te.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var s;if(!this.onParseError)return;const i=(s=e.location)!==null&&s!==void 0?s:jze,o={code:n,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:r?i.startLine:i.endLine,endCol:r?i.startCol:i.endCol,endOffset:r?i.startOffset:i.endOffset};this.onParseError(o)}onItemPush(e,n,r){var s,i;(i=(s=this.treeAdapter).onItemPush)===null||i===void 0||i.call(s,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,e,this.openElements.current),n){let i,o;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,o=this.fragmentContextID):{current:i,currentTagId:o}=this.openElements,this._setContextModes(i,o)}}_setContextModes(e,n){const r=e===this.document||this.treeAdapter.getNamespaceURI(e)===ut.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,ut.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Te.TEXT}switchToPlaintextParsing(){this.insertionMode=Te.TEXT,this.originalInsertionMode=Te.IN_BODY,this.tokenizer.state=qr.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===We.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ut.HTML))switch(this.fragmentContextID){case $.TITLE:case $.TEXTAREA:{this.tokenizer.state=qr.RCDATA;break}case $.STYLE:case $.XMP:case $.IFRAME:case $.NOEMBED:case $.NOFRAMES:case $.NOSCRIPT:{this.tokenizer.state=qr.RAWTEXT;break}case $.SCRIPT:{this.tokenizer.state=qr.SCRIPT_DATA;break}case $.PLAINTEXT:{this.tokenizer.state=qr.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,ut.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,ut.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(We.HTML,ut.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,$.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(n),i=r?s.lastIndexOf(r):s.length,o=s[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:c,endOffset:u}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(e),i=n.type===gn.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===$.SVG&&this.treeAdapter.getTagName(n)===We.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ut.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===$.MGLYPH||e.tagID===$.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ut.HTML)}_processToken(e){switch(e.type){case gn.CHARACTER:{this.onCharacter(e);break}case gn.NULL_CHARACTER:{this.onNullCharacter(e);break}case gn.COMMENT:{this.onComment(e);break}case gn.DOCTYPE:{this.onDoctype(e);break}case gn.START_TAG:{this._processStartTag(e);break}case gn.END_TAG:{this.onEndTag(e);break}case gn.EOF:{this.onEof(e);break}case gn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const s=this.treeAdapter.getNamespaceURI(n),i=this.treeAdapter.getAttrList(n);return Oze(e,s,i,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===ic.Marker||this.openElements.contains(s.element)),r=n<0?e-1:n-1;for(let s=r;s>=0;s--){const i=this.activeFormattingElements.entries[s];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Te.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion($.P),this.openElements.popUntilTagNamePopped($.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case $.TR:{this.insertionMode=Te.IN_ROW;return}case $.TBODY:case $.THEAD:case $.TFOOT:{this.insertionMode=Te.IN_TABLE_BODY;return}case $.CAPTION:{this.insertionMode=Te.IN_CAPTION;return}case $.COLGROUP:{this.insertionMode=Te.IN_COLUMN_GROUP;return}case $.TABLE:{this.insertionMode=Te.IN_TABLE;return}case $.BODY:{this.insertionMode=Te.IN_BODY;return}case $.FRAMESET:{this.insertionMode=Te.IN_FRAMESET;return}case $.SELECT:{this._resetInsertionModeForSelect(e);return}case $.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case $.HTML:{this.insertionMode=this.headElement?Te.AFTER_HEAD:Te.BEFORE_HEAD;return}case $.TD:case $.TH:{if(e>0){this.insertionMode=Te.IN_CELL;return}break}case $.HEAD:{if(e>0){this.insertionMode=Te.IN_HEAD;return}break}}this.insertionMode=Te.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===$.TEMPLATE)break;if(r===$.TABLE){this.insertionMode=Te.IN_SELECT_IN_TABLE;return}}this.insertionMode=Te.IN_SELECT}_isElementCausesFosterParenting(e){return Yae.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case $.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ut.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case $.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return rze[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){fWe(this,e);return}switch(this.insertionMode){case Te.INITIAL:{my(this,e);break}case Te.BEFORE_HTML:{Rv(this,e);break}case Te.BEFORE_HEAD:{Ov(this,e);break}case Te.IN_HEAD:{Lv(this,e);break}case Te.IN_HEAD_NO_SCRIPT:{Dv(this,e);break}case Te.AFTER_HEAD:{Mv(this,e);break}case Te.IN_BODY:case Te.IN_CAPTION:case Te.IN_CELL:case Te.IN_TEMPLATE:{Xae(this,e);break}case Te.TEXT:case Te.IN_SELECT:case Te.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case Te.IN_TABLE:case Te.IN_TABLE_BODY:case Te.IN_ROW:{oP(this,e);break}case Te.IN_TABLE_TEXT:{rle(this,e);break}case Te.IN_COLUMN_GROUP:{Ok(this,e);break}case Te.AFTER_BODY:{Lk(this,e);break}case Te.AFTER_AFTER_BODY:{zS(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){hWe(this,e);return}switch(this.insertionMode){case Te.INITIAL:{my(this,e);break}case Te.BEFORE_HTML:{Rv(this,e);break}case Te.BEFORE_HEAD:{Ov(this,e);break}case Te.IN_HEAD:{Lv(this,e);break}case Te.IN_HEAD_NO_SCRIPT:{Dv(this,e);break}case Te.AFTER_HEAD:{Mv(this,e);break}case Te.TEXT:{this._insertCharacters(e);break}case Te.IN_TABLE:case Te.IN_TABLE_BODY:case Te.IN_ROW:{oP(this,e);break}case Te.IN_COLUMN_GROUP:{Ok(this,e);break}case Te.AFTER_BODY:{Lk(this,e);break}case Te.AFTER_AFTER_BODY:{zS(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){DR(this,e);return}switch(this.insertionMode){case Te.INITIAL:case Te.BEFORE_HTML:case Te.BEFORE_HEAD:case Te.IN_HEAD:case Te.IN_HEAD_NO_SCRIPT:case Te.AFTER_HEAD:case Te.IN_BODY:case Te.IN_TABLE:case Te.IN_CAPTION:case Te.IN_COLUMN_GROUP:case Te.IN_TABLE_BODY:case Te.IN_ROW:case Te.IN_CELL:case Te.IN_SELECT:case Te.IN_SELECT_IN_TABLE:case Te.IN_TEMPLATE:case Te.IN_FRAMESET:case Te.AFTER_FRAMESET:{DR(this,e);break}case Te.IN_TABLE_TEXT:{gy(this,e);break}case Te.AFTER_BODY:{Vze(this,e);break}case Te.AFTER_AFTER_BODY:case Te.AFTER_AFTER_FRAMESET:{Wze(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case Te.INITIAL:{Gze(this,e);break}case Te.BEFORE_HEAD:case Te.IN_HEAD:case Te.IN_HEAD_NO_SCRIPT:case Te.AFTER_HEAD:{this._err(e,Qe.misplacedDoctype);break}case Te.IN_TABLE_TEXT:{gy(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Qe.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?pWe(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case Te.INITIAL:{my(this,e);break}case Te.BEFORE_HTML:{qze(this,e);break}case Te.BEFORE_HEAD:{Yze(this,e);break}case Te.IN_HEAD:{xl(this,e);break}case Te.IN_HEAD_NO_SCRIPT:{Zze(this,e);break}case Te.AFTER_HEAD:{eVe(this,e);break}case Te.IN_BODY:{vi(this,e);break}case Te.IN_TABLE:{y0(this,e);break}case Te.IN_TABLE_TEXT:{gy(this,e);break}case Te.IN_CAPTION:{JVe(this,e);break}case Te.IN_COLUMN_GROUP:{VM(this,e);break}case Te.IN_TABLE_BODY:{KA(this,e);break}case Te.IN_ROW:{YA(this,e);break}case Te.IN_CELL:{QVe(this,e);break}case Te.IN_SELECT:{ole(this,e);break}case Te.IN_SELECT_IN_TABLE:{tWe(this,e);break}case Te.IN_TEMPLATE:{rWe(this,e);break}case Te.AFTER_BODY:{iWe(this,e);break}case Te.IN_FRAMESET:{oWe(this,e);break}case Te.AFTER_FRAMESET:{lWe(this,e);break}case Te.AFTER_AFTER_BODY:{uWe(this,e);break}case Te.AFTER_AFTER_FRAMESET:{dWe(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?mWe(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case Te.INITIAL:{my(this,e);break}case Te.BEFORE_HTML:{Kze(this,e);break}case Te.BEFORE_HEAD:{Jze(this,e);break}case Te.IN_HEAD:{Xze(this,e);break}case Te.IN_HEAD_NO_SCRIPT:{Qze(this,e);break}case Te.AFTER_HEAD:{tVe(this,e);break}case Te.IN_BODY:{qA(this,e);break}case Te.TEXT:{$Ve(this,e);break}case Te.IN_TABLE:{z1(this,e);break}case Te.IN_TABLE_TEXT:{gy(this,e);break}case Te.IN_CAPTION:{XVe(this,e);break}case Te.IN_COLUMN_GROUP:{ZVe(this,e);break}case Te.IN_TABLE_BODY:{MR(this,e);break}case Te.IN_ROW:{ile(this,e);break}case Te.IN_CELL:{eWe(this,e);break}case Te.IN_SELECT:{ale(this,e);break}case Te.IN_SELECT_IN_TABLE:{nWe(this,e);break}case Te.IN_TEMPLATE:{sWe(this,e);break}case Te.AFTER_BODY:{cle(this,e);break}case Te.IN_FRAMESET:{aWe(this,e);break}case Te.AFTER_FRAMESET:{cWe(this,e);break}case Te.AFTER_AFTER_BODY:{zS(this,e);break}}}onEof(e){switch(this.insertionMode){case Te.INITIAL:{my(this,e);break}case Te.BEFORE_HTML:{Rv(this,e);break}case Te.BEFORE_HEAD:{Ov(this,e);break}case Te.IN_HEAD:{Lv(this,e);break}case Te.IN_HEAD_NO_SCRIPT:{Dv(this,e);break}case Te.AFTER_HEAD:{Mv(this,e);break}case Te.IN_BODY:case Te.IN_TABLE:case Te.IN_CAPTION:case Te.IN_COLUMN_GROUP:case Te.IN_TABLE_BODY:case Te.IN_ROW:case Te.IN_CELL:case Te.IN_SELECT:case Te.IN_SELECT_IN_TABLE:{tle(this,e);break}case Te.TEXT:{UVe(this,e);break}case Te.IN_TABLE_TEXT:{gy(this,e);break}case Te.IN_TEMPLATE:{lle(this,e);break}case Te.AFTER_BODY:case Te.IN_FRAMESET:case Te.AFTER_FRAMESET:case Te.AFTER_AFTER_BODY:case Te.AFTER_AFTER_FRAMESET:{zM(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===be.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case Te.IN_HEAD:case Te.IN_HEAD_NO_SCRIPT:case Te.AFTER_HEAD:case Te.TEXT:case Te.IN_COLUMN_GROUP:case Te.IN_SELECT:case Te.IN_SELECT_IN_TABLE:case Te.IN_FRAMESET:case Te.AFTER_FRAMESET:{this._insertCharacters(e);break}case Te.IN_BODY:case Te.IN_CAPTION:case Te.IN_CELL:case Te.IN_TEMPLATE:case Te.AFTER_BODY:case Te.AFTER_AFTER_BODY:case Te.AFTER_AFTER_FRAMESET:{Jae(this,e);break}case Te.IN_TABLE:case Te.IN_TABLE_BODY:case Te.IN_ROW:{oP(this,e);break}case Te.IN_TABLE_TEXT:{nle(this,e);break}}}};function Fze(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):ele(t,e),n}function Bze(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const s=t.openElements.items[r];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[r])&&(n=s)}return n||(t.openElements.shortenToLength(r<0?0:r),t.activeFormattingElements.removeEntry(e)),n}function $ze(t,e,n){let r=e,s=t.openElements.getCommonAncestor(e);for(let i=0,o=s;o!==n;i++,o=s){s=t.openElements.getCommonAncestor(o);const a=t.activeFormattingElements.getElementEntry(o),l=a&&i>=Mze;!a||l?(l&&t.activeFormattingElements.removeEntry(a),t.openElements.remove(o)):(o=Uze(t,a),r===e&&(t.activeFormattingElements.bookmark=a),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(o,r),r=o)}return r}function Uze(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function Hze(t,e,n){const r=t.treeAdapter.getTagName(e),s=ib(r);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(n);else{const i=t.treeAdapter.getNamespaceURI(e);s===$.TEMPLATE&&i===ut.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function zze(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:s}=n,i=t.treeAdapter.createElement(s.tagName,r,s.attrs);t._adoptNodes(e,i),t.treeAdapter.appendChild(e,i),t.activeFormattingElements.insertElementAfterBookmark(i,s),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,i,s.tagID)}function HM(t,e){for(let n=0;n<Dze;n++){const r=Fze(t,e);if(!r)break;const s=Bze(t,r);if(!s)break;t.activeFormattingElements.bookmark=r;const i=$ze(t,s,r.element),o=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(i),o&&Hze(t,o,i),zze(t,s,r)}}function DR(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function Vze(t,e){t._appendCommentNode(e,t.openElements.items[0])}function Wze(t,e){t._appendCommentNode(e,t.document)}function zM(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const i=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(i);o&&!o.endTag&&t._setEndLocation(i,e)}}}}function Gze(t,e){t._setDocumentType(e);const n=e.forceQuirks?pa.QUIRKS:_ze(e);xze(e)||t._err(e,Qe.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=Te.BEFORE_HTML}function my(t,e){t._err(e,Qe.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,pa.QUIRKS),t.insertionMode=Te.BEFORE_HTML,t._processToken(e)}function qze(t,e){e.tagID===$.HTML?(t._insertElement(e,ut.HTML),t.insertionMode=Te.BEFORE_HEAD):Rv(t,e)}function Kze(t,e){const n=e.tagID;(n===$.HTML||n===$.HEAD||n===$.BODY||n===$.BR)&&Rv(t,e)}function Rv(t,e){t._insertFakeRootElement(),t.insertionMode=Te.BEFORE_HEAD,t._processToken(e)}function Yze(t,e){switch(e.tagID){case $.HTML:{vi(t,e);break}case $.HEAD:{t._insertElement(e,ut.HTML),t.headElement=t.openElements.current,t.insertionMode=Te.IN_HEAD;break}default:Ov(t,e)}}function Jze(t,e){const n=e.tagID;n===$.HEAD||n===$.BODY||n===$.HTML||n===$.BR?Ov(t,e):t._err(e,Qe.endTagWithoutMatchingOpenElement)}function Ov(t,e){t._insertFakeElement(We.HEAD,$.HEAD),t.headElement=t.openElements.current,t.insertionMode=Te.IN_HEAD,t._processToken(e)}function xl(t,e){switch(e.tagID){case $.HTML:{vi(t,e);break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:{t._appendElement(e,ut.HTML),e.ackSelfClosing=!0;break}case $.TITLE:{t._switchToTextParsing(e,qr.RCDATA);break}case $.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,qr.RAWTEXT):(t._insertElement(e,ut.HTML),t.insertionMode=Te.IN_HEAD_NO_SCRIPT);break}case $.NOFRAMES:case $.STYLE:{t._switchToTextParsing(e,qr.RAWTEXT);break}case $.SCRIPT:{t._switchToTextParsing(e,qr.SCRIPT_DATA);break}case $.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=Te.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(Te.IN_TEMPLATE);break}case $.HEAD:{t._err(e,Qe.misplacedStartTagForHeadElement);break}default:Lv(t,e)}}function Xze(t,e){switch(e.tagID){case $.HEAD:{t.openElements.pop(),t.insertionMode=Te.AFTER_HEAD;break}case $.BODY:case $.BR:case $.HTML:{Lv(t,e);break}case $.TEMPLATE:{Hp(t,e);break}default:t._err(e,Qe.endTagWithoutMatchingOpenElement)}}function Hp(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==$.TEMPLATE&&t._err(e,Qe.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped($.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Qe.endTagWithoutMatchingOpenElement)}function Lv(t,e){t.openElements.pop(),t.insertionMode=Te.AFTER_HEAD,t._processToken(e)}function Zze(t,e){switch(e.tagID){case $.HTML:{vi(t,e);break}case $.BASEFONT:case $.BGSOUND:case $.HEAD:case $.LINK:case $.META:case $.NOFRAMES:case $.STYLE:{xl(t,e);break}case $.NOSCRIPT:{t._err(e,Qe.nestedNoscriptInHead);break}default:Dv(t,e)}}function Qze(t,e){switch(e.tagID){case $.NOSCRIPT:{t.openElements.pop(),t.insertionMode=Te.IN_HEAD;break}case $.BR:{Dv(t,e);break}default:t._err(e,Qe.endTagWithoutMatchingOpenElement)}}function Dv(t,e){const n=e.type===gn.EOF?Qe.openElementsLeftAfterEof:Qe.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=Te.IN_HEAD,t._processToken(e)}function eVe(t,e){switch(e.tagID){case $.HTML:{vi(t,e);break}case $.BODY:{t._insertElement(e,ut.HTML),t.framesetOk=!1,t.insertionMode=Te.IN_BODY;break}case $.FRAMESET:{t._insertElement(e,ut.HTML),t.insertionMode=Te.IN_FRAMESET;break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{t._err(e,Qe.abandonedHeadElementChild),t.openElements.push(t.headElement,$.HEAD),xl(t,e),t.openElements.remove(t.headElement);break}case $.HEAD:{t._err(e,Qe.misplacedStartTagForHeadElement);break}default:Mv(t,e)}}function tVe(t,e){switch(e.tagID){case $.BODY:case $.HTML:case $.BR:{Mv(t,e);break}case $.TEMPLATE:{Hp(t,e);break}default:t._err(e,Qe.endTagWithoutMatchingOpenElement)}}function Mv(t,e){t._insertFakeElement(We.BODY,$.BODY),t.insertionMode=Te.IN_BODY,GA(t,e)}function GA(t,e){switch(e.type){case gn.CHARACTER:{Xae(t,e);break}case gn.WHITESPACE_CHARACTER:{Jae(t,e);break}case gn.COMMENT:{DR(t,e);break}case gn.START_TAG:{vi(t,e);break}case gn.END_TAG:{qA(t,e);break}case gn.EOF:{tle(t,e);break}}}function Jae(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function Xae(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function nVe(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function rVe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function sVe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,ut.HTML),t.insertionMode=Te.IN_FRAMESET)}function iVe(t,e){t.openElements.hasInButtonScope($.P)&&t._closePElement(),t._insertElement(e,ut.HTML)}function oVe(t,e){t.openElements.hasInButtonScope($.P)&&t._closePElement(),LR.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,ut.HTML)}function aVe(t,e){t.openElements.hasInButtonScope($.P)&&t._closePElement(),t._insertElement(e,ut.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function lVe(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope($.P)&&t._closePElement(),t._insertElement(e,ut.HTML),n||(t.formElement=t.openElements.current))}function cVe(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const s=t.openElements.tagIDs[r];if(n===$.LI&&s===$.LI||(n===$.DD||n===$.DT)&&(s===$.DD||s===$.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==$.ADDRESS&&s!==$.DIV&&s!==$.P&&t._isSpecialElement(t.openElements.items[r],s))break}t.openElements.hasInButtonScope($.P)&&t._closePElement(),t._insertElement(e,ut.HTML)}function uVe(t,e){t.openElements.hasInButtonScope($.P)&&t._closePElement(),t._insertElement(e,ut.HTML),t.tokenizer.state=qr.PLAINTEXT}function dVe(t,e){t.openElements.hasInScope($.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped($.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,ut.HTML),t.framesetOk=!1}function hVe(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(We.A);n&&(HM(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,ut.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function fVe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ut.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function pVe(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope($.NOBR)&&(HM(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,ut.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function mVe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ut.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function gVe(t,e){t.treeAdapter.getDocumentMode(t.document)!==pa.QUIRKS&&t.openElements.hasInButtonScope($.P)&&t._closePElement(),t._insertElement(e,ut.HTML),t.framesetOk=!1,t.insertionMode=Te.IN_TABLE}function Zae(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,ut.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function Qae(t){const e=Fae(t,ep.TYPE);return e!=null&&e.toLowerCase()===Lze}function bVe(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,ut.HTML),Qae(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function yVe(t,e){t._appendElement(e,ut.HTML),e.ackSelfClosing=!0}function vVe(t,e){t.openElements.hasInButtonScope($.P)&&t._closePElement(),t._appendElement(e,ut.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function wVe(t,e){e.tagName=We.IMG,e.tagID=$.IMG,Zae(t,e)}function xVe(t,e){t._insertElement(e,ut.HTML),t.skipNextNewLine=!0,t.tokenizer.state=qr.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=Te.TEXT}function _Ve(t,e){t.openElements.hasInButtonScope($.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,qr.RAWTEXT)}function SVe(t,e){t.framesetOk=!1,t._switchToTextParsing(e,qr.RAWTEXT)}function KU(t,e){t._switchToTextParsing(e,qr.RAWTEXT)}function EVe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ut.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===Te.IN_TABLE||t.insertionMode===Te.IN_CAPTION||t.insertionMode===Te.IN_TABLE_BODY||t.insertionMode===Te.IN_ROW||t.insertionMode===Te.IN_CELL?Te.IN_SELECT_IN_TABLE:Te.IN_SELECT}function kVe(t,e){t.openElements.currentTagId===$.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,ut.HTML)}function CVe(t,e){t.openElements.hasInScope($.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,ut.HTML)}function AVe(t,e){t.openElements.hasInScope($.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion($.RTC),t._insertElement(e,ut.HTML)}function TVe(t,e){t._reconstructActiveFormattingElements(),qae(e),UM(e),e.selfClosing?t._appendElement(e,ut.MATHML):t._insertElement(e,ut.MATHML),e.ackSelfClosing=!0}function PVe(t,e){t._reconstructActiveFormattingElements(),Kae(e),UM(e),e.selfClosing?t._appendElement(e,ut.SVG):t._insertElement(e,ut.SVG),e.ackSelfClosing=!0}function YU(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ut.HTML)}function vi(t,e){switch(e.tagID){case $.I:case $.S:case $.B:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.SMALL:case $.STRIKE:case $.STRONG:{fVe(t,e);break}case $.A:{hVe(t,e);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{oVe(t,e);break}case $.P:case $.DL:case $.OL:case $.UL:case $.DIV:case $.DIR:case $.NAV:case $.MAIN:case $.MENU:case $.ASIDE:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.DETAILS:case $.ADDRESS:case $.ARTICLE:case $.SEARCH:case $.SECTION:case $.SUMMARY:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{iVe(t,e);break}case $.LI:case $.DD:case $.DT:{cVe(t,e);break}case $.BR:case $.IMG:case $.WBR:case $.AREA:case $.EMBED:case $.KEYGEN:{Zae(t,e);break}case $.HR:{vVe(t,e);break}case $.RB:case $.RTC:{CVe(t,e);break}case $.RT:case $.RP:{AVe(t,e);break}case $.PRE:case $.LISTING:{aVe(t,e);break}case $.XMP:{_Ve(t,e);break}case $.SVG:{PVe(t,e);break}case $.HTML:{nVe(t,e);break}case $.BASE:case $.LINK:case $.META:case $.STYLE:case $.TITLE:case $.SCRIPT:case $.BGSOUND:case $.BASEFONT:case $.TEMPLATE:{xl(t,e);break}case $.BODY:{rVe(t,e);break}case $.FORM:{lVe(t,e);break}case $.NOBR:{pVe(t,e);break}case $.MATH:{TVe(t,e);break}case $.TABLE:{gVe(t,e);break}case $.INPUT:{bVe(t,e);break}case $.PARAM:case $.TRACK:case $.SOURCE:{yVe(t,e);break}case $.IMAGE:{wVe(t,e);break}case $.BUTTON:{dVe(t,e);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{mVe(t,e);break}case $.IFRAME:{SVe(t,e);break}case $.SELECT:{EVe(t,e);break}case $.OPTION:case $.OPTGROUP:{kVe(t,e);break}case $.NOEMBED:case $.NOFRAMES:{KU(t,e);break}case $.FRAMESET:{sVe(t,e);break}case $.TEXTAREA:{xVe(t,e);break}case $.NOSCRIPT:{t.options.scriptingEnabled?KU(t,e):YU(t,e);break}case $.PLAINTEXT:{uVe(t,e);break}case $.COL:case $.TH:case $.TD:case $.TR:case $.HEAD:case $.FRAME:case $.TBODY:case $.TFOOT:case $.THEAD:case $.CAPTION:case $.COLGROUP:break;default:YU(t,e)}}function NVe(t,e){if(t.openElements.hasInScope($.BODY)&&(t.insertionMode=Te.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function IVe(t,e){t.openElements.hasInScope($.BODY)&&(t.insertionMode=Te.AFTER_BODY,cle(t,e))}function RVe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function OVe(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope($.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped($.FORM):n&&t.openElements.remove(n))}function LVe(t){t.openElements.hasInButtonScope($.P)||t._insertFakeElement(We.P,$.P),t._closePElement()}function DVe(t){t.openElements.hasInListItemScope($.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion($.LI),t.openElements.popUntilTagNamePopped($.LI))}function MVe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function jVe(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function FVe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function BVe(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(We.BR,$.BR),t.openElements.pop(),t.framesetOk=!1}function ele(t,e){const n=e.tagName,r=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const i=t.openElements.items[s],o=t.openElements.tagIDs[s];if(r===o&&(r!==$.UNKNOWN||t.treeAdapter.getTagName(i)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(i,o))break}}function qA(t,e){switch(e.tagID){case $.A:case $.B:case $.I:case $.S:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.NOBR:case $.SMALL:case $.STRIKE:case $.STRONG:{HM(t,e);break}case $.P:{LVe(t);break}case $.DL:case $.UL:case $.OL:case $.DIR:case $.DIV:case $.NAV:case $.PRE:case $.MAIN:case $.MENU:case $.ASIDE:case $.BUTTON:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.ADDRESS:case $.ARTICLE:case $.DETAILS:case $.SEARCH:case $.SECTION:case $.SUMMARY:case $.LISTING:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{RVe(t,e);break}case $.LI:{DVe(t);break}case $.DD:case $.DT:{MVe(t,e);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{jVe(t);break}case $.BR:{BVe(t);break}case $.BODY:{NVe(t,e);break}case $.HTML:{IVe(t,e);break}case $.FORM:{OVe(t);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{FVe(t,e);break}case $.TEMPLATE:{Hp(t,e);break}default:ele(t,e)}}function tle(t,e){t.tmplInsertionModeStack.length>0?lle(t,e):zM(t,e)}function $Ve(t,e){var n;e.tagID===$.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function UVe(t,e){t._err(e,Qe.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function oP(t,e){if(Yae.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=Te.IN_TABLE_TEXT,e.type){case gn.CHARACTER:{rle(t,e);break}case gn.WHITESPACE_CHARACTER:{nle(t,e);break}}else Jw(t,e)}function HVe(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,ut.HTML),t.insertionMode=Te.IN_CAPTION}function zVe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,ut.HTML),t.insertionMode=Te.IN_COLUMN_GROUP}function VVe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(We.COLGROUP,$.COLGROUP),t.insertionMode=Te.IN_COLUMN_GROUP,VM(t,e)}function WVe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,ut.HTML),t.insertionMode=Te.IN_TABLE_BODY}function GVe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(We.TBODY,$.TBODY),t.insertionMode=Te.IN_TABLE_BODY,KA(t,e)}function qVe(t,e){t.openElements.hasInTableScope($.TABLE)&&(t.openElements.popUntilTagNamePopped($.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function KVe(t,e){Qae(e)?t._appendElement(e,ut.HTML):Jw(t,e),e.ackSelfClosing=!0}function YVe(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,ut.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function y0(t,e){switch(e.tagID){case $.TD:case $.TH:case $.TR:{GVe(t,e);break}case $.STYLE:case $.SCRIPT:case $.TEMPLATE:{xl(t,e);break}case $.COL:{VVe(t,e);break}case $.FORM:{YVe(t,e);break}case $.TABLE:{qVe(t,e);break}case $.TBODY:case $.TFOOT:case $.THEAD:{WVe(t,e);break}case $.INPUT:{KVe(t,e);break}case $.CAPTION:{HVe(t,e);break}case $.COLGROUP:{zVe(t,e);break}default:Jw(t,e)}}function z1(t,e){switch(e.tagID){case $.TABLE:{t.openElements.hasInTableScope($.TABLE)&&(t.openElements.popUntilTagNamePopped($.TABLE),t._resetInsertionMode());break}case $.TEMPLATE:{Hp(t,e);break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:Jw(t,e)}}function Jw(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,GA(t,e),t.fosterParentingEnabled=n}function nle(t,e){t.pendingCharacterTokens.push(e)}function rle(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function gy(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Jw(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const sle=new Set([$.CAPTION,$.COL,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]);function JVe(t,e){const n=e.tagID;sle.has(n)?t.openElements.hasInTableScope($.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped($.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Te.IN_TABLE,y0(t,e)):vi(t,e)}function XVe(t,e){const n=e.tagID;switch(n){case $.CAPTION:case $.TABLE:{t.openElements.hasInTableScope($.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped($.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Te.IN_TABLE,n===$.TABLE&&z1(t,e));break}case $.BODY:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:qA(t,e)}}function VM(t,e){switch(e.tagID){case $.HTML:{vi(t,e);break}case $.COL:{t._appendElement(e,ut.HTML),e.ackSelfClosing=!0;break}case $.TEMPLATE:{xl(t,e);break}default:Ok(t,e)}}function ZVe(t,e){switch(e.tagID){case $.COLGROUP:{t.openElements.currentTagId===$.COLGROUP&&(t.openElements.pop(),t.insertionMode=Te.IN_TABLE);break}case $.TEMPLATE:{Hp(t,e);break}case $.COL:break;default:Ok(t,e)}}function Ok(t,e){t.openElements.currentTagId===$.COLGROUP&&(t.openElements.pop(),t.insertionMode=Te.IN_TABLE,t._processToken(e))}function KA(t,e){switch(e.tagID){case $.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,ut.HTML),t.insertionMode=Te.IN_ROW;break}case $.TH:case $.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(We.TR,$.TR),t.insertionMode=Te.IN_ROW,YA(t,e);break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE,y0(t,e));break}default:y0(t,e)}}function MR(t,e){const n=e.tagID;switch(e.tagID){case $.TBODY:case $.TFOOT:case $.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE);break}case $.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE,z1(t,e));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:case $.TR:break;default:z1(t,e)}}function YA(t,e){switch(e.tagID){case $.TH:case $.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,ut.HTML),t.insertionMode=Te.IN_CELL,t.activeFormattingElements.insertMarker();break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{t.openElements.hasInTableScope($.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE_BODY,KA(t,e));break}default:y0(t,e)}}function ile(t,e){switch(e.tagID){case $.TR:{t.openElements.hasInTableScope($.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE_BODY);break}case $.TABLE:{t.openElements.hasInTableScope($.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE_BODY,MR(t,e));break}case $.TBODY:case $.TFOOT:case $.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope($.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Te.IN_TABLE_BODY,MR(t,e));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:break;default:z1(t,e)}}function QVe(t,e){const n=e.tagID;sle.has(n)?(t.openElements.hasInTableScope($.TD)||t.openElements.hasInTableScope($.TH))&&(t._closeTableCell(),YA(t,e)):vi(t,e)}function eWe(t,e){const n=e.tagID;switch(n){case $.TD:case $.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Te.IN_ROW);break}case $.TABLE:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),ile(t,e));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:break;default:qA(t,e)}}function ole(t,e){switch(e.tagID){case $.HTML:{vi(t,e);break}case $.OPTION:{t.openElements.currentTagId===$.OPTION&&t.openElements.pop(),t._insertElement(e,ut.HTML);break}case $.OPTGROUP:{t.openElements.currentTagId===$.OPTION&&t.openElements.pop(),t.openElements.currentTagId===$.OPTGROUP&&t.openElements.pop(),t._insertElement(e,ut.HTML);break}case $.HR:{t.openElements.currentTagId===$.OPTION&&t.openElements.pop(),t.openElements.currentTagId===$.OPTGROUP&&t.openElements.pop(),t._appendElement(e,ut.HTML),e.ackSelfClosing=!0;break}case $.INPUT:case $.KEYGEN:case $.TEXTAREA:case $.SELECT:{t.openElements.hasInSelectScope($.SELECT)&&(t.openElements.popUntilTagNamePopped($.SELECT),t._resetInsertionMode(),e.tagID!==$.SELECT&&t._processStartTag(e));break}case $.SCRIPT:case $.TEMPLATE:{xl(t,e);break}}}function ale(t,e){switch(e.tagID){case $.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===$.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===$.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===$.OPTGROUP&&t.openElements.pop();break}case $.OPTION:{t.openElements.currentTagId===$.OPTION&&t.openElements.pop();break}case $.SELECT:{t.openElements.hasInSelectScope($.SELECT)&&(t.openElements.popUntilTagNamePopped($.SELECT),t._resetInsertionMode());break}case $.TEMPLATE:{Hp(t,e);break}}}function tWe(t,e){const n=e.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?(t.openElements.popUntilTagNamePopped($.SELECT),t._resetInsertionMode(),t._processStartTag(e)):ole(t,e)}function nWe(t,e){const n=e.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped($.SELECT),t._resetInsertionMode(),t.onEndTag(e)):ale(t,e)}function rWe(t,e){switch(e.tagID){case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{xl(t,e);break}case $.CAPTION:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{t.tmplInsertionModeStack[0]=Te.IN_TABLE,t.insertionMode=Te.IN_TABLE,y0(t,e);break}case $.COL:{t.tmplInsertionModeStack[0]=Te.IN_COLUMN_GROUP,t.insertionMode=Te.IN_COLUMN_GROUP,VM(t,e);break}case $.TR:{t.tmplInsertionModeStack[0]=Te.IN_TABLE_BODY,t.insertionMode=Te.IN_TABLE_BODY,KA(t,e);break}case $.TD:case $.TH:{t.tmplInsertionModeStack[0]=Te.IN_ROW,t.insertionMode=Te.IN_ROW,YA(t,e);break}default:t.tmplInsertionModeStack[0]=Te.IN_BODY,t.insertionMode=Te.IN_BODY,vi(t,e)}}function sWe(t,e){e.tagID===$.TEMPLATE&&Hp(t,e)}function lle(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped($.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):zM(t,e)}function iWe(t,e){e.tagID===$.HTML?vi(t,e):Lk(t,e)}function cle(t,e){var n;if(e.tagID===$.HTML){if(t.fragmentContext||(t.insertionMode=Te.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===$.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else Lk(t,e)}function Lk(t,e){t.insertionMode=Te.IN_BODY,GA(t,e)}function oWe(t,e){switch(e.tagID){case $.HTML:{vi(t,e);break}case $.FRAMESET:{t._insertElement(e,ut.HTML);break}case $.FRAME:{t._appendElement(e,ut.HTML),e.ackSelfClosing=!0;break}case $.NOFRAMES:{xl(t,e);break}}}function aWe(t,e){e.tagID===$.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==$.FRAMESET&&(t.insertionMode=Te.AFTER_FRAMESET))}function lWe(t,e){switch(e.tagID){case $.HTML:{vi(t,e);break}case $.NOFRAMES:{xl(t,e);break}}}function cWe(t,e){e.tagID===$.HTML&&(t.insertionMode=Te.AFTER_AFTER_FRAMESET)}function uWe(t,e){e.tagID===$.HTML?vi(t,e):zS(t,e)}function zS(t,e){t.insertionMode=Te.IN_BODY,GA(t,e)}function dWe(t,e){switch(e.tagID){case $.HTML:{vi(t,e);break}case $.NOFRAMES:{xl(t,e);break}}}function hWe(t,e){e.chars=xr,t._insertCharacters(e)}function fWe(t,e){t._insertCharacters(e),t.framesetOk=!1}function ule(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==ut.HTML&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function pWe(t,e){if(Pze(e))ule(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===ut.MATHML?qae(e):r===ut.SVG&&(Nze(e),Kae(e)),UM(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function mWe(t,e){if(e.tagID===$.P||e.tagID===$.BR){ule(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===ut.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(r);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(n);break}}}We.AREA,We.BASE,We.BASEFONT,We.BGSOUND,We.BR,We.COL,We.EMBED,We.FRAME,We.HR,We.IMG,We.INPUT,We.KEYGEN,We.LINK,We.META,We.PARAM,We.SOURCE,We.TRACK,We.WBR;const dle=hle("end"),zp=hle("start");function hle(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const fle=function(t){if(t==null)return vWe;if(typeof t=="function")return JA(t);if(typeof t=="object")return Array.isArray(t)?gWe(t):bWe(t);if(typeof t=="string")return yWe(t);throw new Error("Expected function, string, or object as test")};function gWe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=fle(t[n]);return JA(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function bWe(t){const e=t;return JA(n);function n(r){const s=r;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function yWe(t){return JA(e);function e(n){return n&&n.type===t}}function JA(t){return e;function e(n,r,s){return!!(wWe(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function vWe(){return!0}function wWe(t){return t!==null&&typeof t=="object"&&"type"in t}const ple=[],xWe=!0,Dk=!1,mle="skip";function gle(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const i=fle(s),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=ple,p,m,g;if((!e||i(l,c,u[u.length-1]||void 0))&&(f=_We(n(l,u)),f[0]===Dk))return f;if("children"in l&&l.children){const b=l;if(b.children&&f[0]!==mle)for(m=(r?b.children.length:-1)+o,g=u.concat(b);m>-1&&m<b.children.length;){const v=b.children[m];if(p=a(v,m,g)(),p[0]===Dk)return p;m=typeof p[1]=="number"?p[1]:m+o}}return f}}}function _We(t){return Array.isArray(t)?t:typeof t=="number"?[xWe,t]:t==null?ple:[t]}function Vp(t,e,n,r){let s,i,o;typeof e=="function"&&typeof n!="function"?(i=void 0,o=e,s=n):(i=e,o=n,s=r),gle(t,i,a,s);function a(l,c){const u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return o(l,d,u)}}const SWe=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,EWe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),JU={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function ble(t,e){const n=LWe(t),r=BM("type",{handlers:{root:kWe,element:CWe,text:AWe,comment:vle,doctype:TWe,raw:NWe},unknown:IWe}),s={parser:n?new qU(JU):qU.getFragmentParser(void 0,JU),handle(a){r(a,s)},stitches:!1,options:e||{}};r(t,s),ob(s,zp());const i=n?s.parser.document:s.parser.getFragment(),o=vHe(i,{file:s.options.file});return s.stitches&&Vp(o,"comment",function(a,l,c){const u=a;if(u.value.stitch&&c&&l!==void 0){const d=c.children;return d[l]=u.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function yle(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function kWe(t,e){yle(t.children,e)}function CWe(t,e){RWe(t,e),yle(t.children,e),OWe(t,e)}function AWe(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:gn.CHARACTER,chars:t.value,location:Xw(t)};ob(e,zp(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function TWe(t,e){const n={type:gn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Xw(t)};ob(e,zp(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function PWe(t,e){e.stitches=!0;const n=DWe(t);if("children"in t&&"children"in n){const r=ble({type:"root",children:t.children},e.options);n.children=r.children}vle({type:"comment",value:{stitch:n}},e)}function vle(t,e){const n=t.value,r={type:gn.COMMENT,data:n,location:Xw(t)};ob(e,zp(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function NWe(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,wle(e,zp(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(SWe,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function IWe(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))PWe(n,e);else{let r="";throw EWe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function ob(t,e){wle(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=qr.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function wle(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function RWe(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===qr.PLAINTEXT)return;ob(e,zp(t));const r=e.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:Pf.html;s===Pf.html&&n==="svg"&&(s=Pf.svg);const i=LHe({...t,children:[]},{space:s===Pf.svg?"svg":"html"}),o={type:gn.START_TAG,tagName:n,tagID:ib(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in i?i.attrs:[],location:Xw(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function OWe(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&Lae.includes(n)||e.parser.tokenizer.state===qr.PLAINTEXT)return;ob(e,dle(t));const r={type:gn.END_TAG,tagName:n,tagID:ib(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Xw(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===qr.RCDATA||e.parser.tokenizer.state===qr.RAWTEXT||e.parser.tokenizer.state===qr.SCRIPT_DATA)&&(e.parser.tokenizer.state=qr.DATA)}function LWe(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function Xw(t){const e=zp(t)||{line:void 0,column:void 0,offset:void 0},n=dle(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function DWe(t){return"children"in t?gp({...t,children:[]}):gp(t)}function MWe(t){return function(e,n){return ble(e,{...t,file:n})}}function Mk(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}const jWe=xle(/\p{P}|\p{S}/u),FWe=xle(/\s/);function xle(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function BWe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const _le=function(t){if(t==null)return zWe;if(typeof t=="function")return XA(t);if(typeof t=="object")return Array.isArray(t)?$We(t):UWe(t);if(typeof t=="string")return HWe(t);throw new Error("Expected function, string, or object as test")};function $We(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=_le(t[n]);return XA(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function UWe(t){const e=t;return XA(n);function n(r){const s=r;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function HWe(t){return XA(e);function e(n){return n&&n.type===t}}function XA(t){return e;function e(n,r,s){return!!(VWe(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function zWe(){return!0}function VWe(t){return t!==null&&typeof t=="object"&&"type"in t}function WWe(t,e,n){const s=_le((n||{}).ignore||[]),i=GWe(e);let o=-1;for(;++o<i.length;)gle(t,"text",a);function a(c,u){let d=-1,h;for(;++d<u.length;){const f=u[d],p=h?h.children:void 0;if(s(f,p?p.indexOf(f):void 0,h))return;h=f}if(h)return l(c,u)}function l(c,u){const d=u[u.length-1],h=i[o][0],f=i[o][1];let p=0;const g=d.children.indexOf(c);let b=!1,v=[];h.lastIndex=0;let w=h.exec(c.value);for(;w;){const _=w.index,S={index:w.index,input:w.input,stack:[...u,c]};let E=f(...w,S);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?h.lastIndex=_+1:(p!==_&&v.push({type:"text",value:c.value.slice(p,_)}),Array.isArray(E)?v.push(...E):E&&v.push(E),p=_+w[0].length,b=!0),!h.global)break;w=h.exec(c.value)}return b?(p<c.value.length&&v.push({type:"text",value:c.value.slice(p)}),d.children.splice(g,1,...v)):v=[c],g+v.length}}function GWe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([qWe(s[0]),KWe(s[1])])}return e}function qWe(t){return typeof t=="string"?new RegExp(BWe(t),"g"):t}function KWe(t){return typeof t=="function"?t:function(){return t}}const aP="phrasing",lP=["autolink","link","image","label"];function YWe(){return{transforms:[nGe],enter:{literalAutolink:XWe,literalAutolinkEmail:cP,literalAutolinkHttp:cP,literalAutolinkWww:cP},exit:{literalAutolink:tGe,literalAutolinkEmail:eGe,literalAutolinkHttp:ZWe,literalAutolinkWww:QWe}}}function JWe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:aP,notInConstruct:lP},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:aP,notInConstruct:lP},{character:":",before:"[ps]",after:"\\/",inConstruct:aP,notInConstruct:lP}]}}function XWe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function cP(t){this.config.enter.autolinkProtocol.call(this,t)}function ZWe(t){this.config.exit.autolinkProtocol.call(this,t)}function QWe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function eGe(t){this.config.exit.autolinkEmail.call(this,t)}function tGe(t){this.exit(t)}function nGe(t){WWe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,rGe],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,sGe]],{ignore:["link","linkReference"]})}function rGe(t,e,n,r,s){let i="";if(!Sle(s)||(/^w/i.test(e)&&(n=e+n,e="",i="http://"),!iGe(n)))return!1;const o=oGe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:i+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function sGe(t,e,n,r){return!Sle(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function iGe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function oGe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=Mk(t,"(");let i=Mk(t,")");for(;r!==-1&&s>i;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[t,n]}function Sle(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||FWe(n)||jWe(n))&&(!e||n!==47)}function Ele(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}kle.peek=mGe;function aGe(){this.buffer()}function lGe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function cGe(){this.buffer()}function uGe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function dGe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ele(this.sliceSerialize(t)).toLowerCase(),n.label=e}function hGe(t){this.exit(t)}function fGe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ele(this.sliceSerialize(t)).toLowerCase(),n.label=e}function pGe(t){this.exit(t)}function mGe(){return"["}function kle(t,e,n,r){const s=n.createTracker(r);let i=s.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return i+=s.move(n.safe(n.associationId(t),{after:"]",before:i})),a(),o(),i+=s.move("]"),i}function gGe(){return{enter:{gfmFootnoteCallString:aGe,gfmFootnoteCall:lGe,gfmFootnoteDefinitionLabelString:cGe,gfmFootnoteDefinition:uGe},exit:{gfmFootnoteCallString:dGe,gfmFootnoteCall:hGe,gfmFootnoteDefinitionLabelString:fGe,gfmFootnoteDefinition:pGe}}}function bGe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:kle},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,i,o){const a=i.createTracker(o);let l=a.move("[^");const c=i.enter("footnoteDefinition"),u=i.enter("label");return l+=a.move(i.safe(i.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+i.indentLines(i.containerFlow(r,a.current()),e?Cle:yGe))),c(),l}}function yGe(t,e,n){return e===0?t:Cle(t,e,n)}function Cle(t,e,n){return(n?"":"    ")+t}const vGe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Ale.peek=EGe;function wGe(){return{canContainEols:["delete"],enter:{strikethrough:_Ge},exit:{strikethrough:SGe}}}function xGe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:vGe}],handlers:{delete:Ale}}}function _Ge(t){this.enter({type:"delete",children:[]},t)}function SGe(t){this.exit(t)}function Ale(t,e,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let o=s.move("~~");return o+=n.containerPhrasing(t,{...s.current(),before:o,after:"~"}),o+=s.move("~~"),i(),o}function EGe(){return"~"}function kGe(t){return t.length}function CGe(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||kGe,i=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const m=[],g=[];let b=-1;for(t[u].length>c&&(c=t[u].length);++b<t[u].length;){const v=AGe(t[u][b]);if(n.alignDelimiters!==!1){const w=s(v);g[b]=w,(l[b]===void 0||w>l[b])&&(l[b]=w)}m.push(v)}o[u]=m,a[u]=g}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<c;)i[d]=XU(r[d]);else{const m=XU(r);for(;++d<c;)i[d]=m}d=-1;const h=[],f=[];for(;++d<c;){const m=i[d];let g="",b="";m===99?(g=":",b=":"):m===108?g=":":m===114&&(b=":");let v=n.alignDelimiters===!1?1:Math.max(1,l[d]-g.length-b.length);const w=g+"-".repeat(v)+b;n.alignDelimiters!==!1&&(v=g.length+v+b.length,v>l[d]&&(l[d]=v),f[d]=v),h[d]=w}o.splice(1,0,h),a.splice(1,0,f),u=-1;const p=[];for(;++u<o.length;){const m=o[u],g=a[u];d=-1;const b=[];for(;++d<c;){const v=m[d]||"";let w="",_="";if(n.alignDelimiters!==!1){const S=l[d]-(g[d]||0),E=i[d];E===114?w=" ".repeat(S):E===99?S%2?(w=" ".repeat(S/2+.5),_=" ".repeat(S/2-.5)):(w=" ".repeat(S/2),_=w):_=" ".repeat(S)}n.delimiterStart!==!1&&!d&&b.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||d)&&b.push(" "),n.alignDelimiters!==!1&&b.push(w),b.push(v),n.alignDelimiters!==!1&&b.push(_),n.padding!==!1&&b.push(" "),(n.delimiterEnd!==!1||d!==c-1)&&b.push("|")}p.push(n.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return p.join(`
`)}function AGe(t){return t==null?"":String(t)}function XU(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function TGe(t,e,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const o=n.indentLines(n.containerFlow(t,i.current()),PGe);return s(),o}function PGe(t,e,n){return">"+(n?"":" ")+t}function NGe(t,e){return ZU(t,e.inConstruct,!0)&&!ZU(t,e.notInConstruct,!1)}function ZU(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function QU(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&NGe(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Tle(t,e){const n=String(t);let r=n.indexOf(e),s=r,i=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++i>o&&(o=i):i=1,s=r+e.length,r=n.indexOf(e,s);return o}function IGe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function RGe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function OGe(t,e,n,r){const s=RGe(n),i=t.value||"",o=s==="`"?"GraveAccent":"Tilde";if(IGe(t,n)){const d=n.enter("codeIndented"),h=n.indentLines(i,LGe);return d(),h}const a=n.createTracker(r),l=s.repeat(Math.max(Tle(i,s)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const d=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),i&&(u+=a.move(i+`
`)),u+=a.move(l),c(),u}function LGe(t,e,n){return(n?"":"    ")+t}function WM(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function DGe(t,e,n,r){const s=WM(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(t.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),o(),c}function MGe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function V1(t){return"&#x"+t.toString(16).toUpperCase()+";"}function jGe(t){return t!==null&&(t<0||t===32)}const FGe=Ple(/\p{P}|\p{S}/u),BGe=Ple(/\s/);function Ple(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function eH(t){if(t===null||jGe(t)||BGe(t))return 1;if(FGe(t))return 2}function jk(t,e,n){const r=eH(t),s=eH(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Nle.peek=$Ge;function Nle(t,e,n,r){const s=MGe(n),i=n.enter("emphasis"),o=n.createTracker(r),a=o.move(s);let l=o.move(n.containerPhrasing(t,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),u=jk(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=V1(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=jk(r.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+V1(d));const f=o.move(s);return i(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function $Ge(t,e,n){return n.options.emphasis||"*"}const UGe={};function Ile(t,e){const n=UGe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Rle(t,r,s)}function Rle(t,e,n){if(HGe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return tH(t.children,e,n)}return Array.isArray(t)?tH(t,e,n):""}function tH(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=Rle(t[s],e,n);return r.join("")}function HGe(t){return!!(t&&typeof t=="object")}function zGe(t,e){let n=!1;return Vp(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Dk}),!!((!t.depth||t.depth<3)&&Ile(t)&&(e.options.setext||n))}function VGe(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),i=n.createTracker(r);if(zGe(t,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(t,{...i.current(),before:`
`,after:`
`});return d(),u(),h+`
`+(s===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(s),a=n.enter("headingAtx"),l=n.enter("phrasing");i.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(c)&&(c=V1(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}Ole.peek=WGe;function Ole(t){return t.value||""}function WGe(){return"<"}Lle.peek=GGe;function Lle(t,e,n,r){const s=WM(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(t.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),c+=l.move(")"),o(),c}function GGe(){return"!"}Dle.peek=qGe;function Dle(t,e,n,r){const s=t.referenceType,i=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,i(),s==="full"||!c||c!==d?l+=a.move(d+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function qGe(){return"!"}Mle.peek=KGe;function Mle(t,e,n){let r=t.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const o=n.unsafe[i],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return s+r+s}function KGe(){return"`"}function jle(t,e){const n=Ile(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Fle.peek=YGe;function Fle(t,e,n,r){const s=WM(n),i=s==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(jle(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=u,d}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${i}`),c+=o.move(" "+s),c+=o.move(n.safe(t.title,{before:c,after:s,...o.current()})),c+=o.move(s),l()),c+=o.move(")"),a(),c}function YGe(t,e,n){return jle(t,n)?"<":"["}Ble.peek=JGe;function Ble(t,e,n,r){const s=t.referenceType,i=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,i(),s==="full"||!c||c!==d?l+=a.move(d+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function JGe(){return"["}function GM(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function XGe(t){const e=GM(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function ZGe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function $le(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function QGe(t,e,n,r){const s=n.enter("list"),i=n.bulletCurrent;let o=t.ordered?ZGe(n):GM(n);const a=t.ordered?o==="."?")":".":XGe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),$le(n)===o&&u){let d=-1;for(;++d<t.children.length;){const h=t.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=i,s(),c}function eqe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function tqe(t,e,n,r){const s=eqe(n);let i=n.bulletCurrent||GM(n);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let o=i.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(i+" ".repeat(o-i.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(d,h,f){return h?(f?"":" ".repeat(o))+d:(f?i:i+" ".repeat(o-i.length))+d}}function nqe(t,e,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),o=n.containerPhrasing(t,r);return i(),s(),o}const Ule=function(t){if(t==null)return oqe;if(typeof t=="function")return ZA(t);if(typeof t=="object")return Array.isArray(t)?rqe(t):sqe(t);if(typeof t=="string")return iqe(t);throw new Error("Expected function, string, or object as test")};function rqe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Ule(t[n]);return ZA(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function sqe(t){const e=t;return ZA(n);function n(r){const s=r;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function iqe(t){return ZA(e);function e(n){return n&&n.type===t}}function ZA(t){return e;function e(n,r,s){return!!(aqe(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function oqe(){return!0}function aqe(t){return t!==null&&typeof t=="object"&&"type"in t}const lqe=Ule(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function cqe(t,e,n,r){return(t.children.some(function(o){return lqe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function uqe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Hle.peek=dqe;function Hle(t,e,n,r){const s=uqe(n),i=n.enter("strong"),o=n.createTracker(r),a=o.move(s+s);let l=o.move(n.containerPhrasing(t,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),u=jk(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=V1(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=jk(r.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+V1(d));const f=o.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function dqe(t,e,n){return n.options.strong||"*"}function hqe(t,e,n,r){return n.safe(t.value,r)}function fqe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function pqe(t,e,n){const r=($le(n)+(n.options.ruleSpaces?" ":"")).repeat(fqe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const mqe={blockquote:TGe,break:QU,code:OGe,definition:DGe,emphasis:Nle,hardBreak:QU,heading:VGe,html:Ole,image:Lle,imageReference:Dle,inlineCode:Mle,link:Fle,linkReference:Ble,list:QGe,listItem:tqe,paragraph:nqe,root:cqe,strong:Hle,text:hqe,thematicBreak:pqe},nH=document.createElement("i");function qM(t){const e="&"+t+";";nH.innerHTML=e;const n=nH.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function gqe(){return{enter:{table:bqe,tableData:rH,tableHeader:rH,tableRow:vqe},exit:{codeText:wqe,table:yqe,tableData:uP,tableHeader:uP,tableRow:uP}}}function bqe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function yqe(t){this.exit(t),this.data.inTable=void 0}function vqe(t){this.enter({type:"tableRow",children:[]},t)}function uP(t){this.exit(t)}function rH(t){this.enter({type:"tableCell",children:[]},t)}function wqe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,xqe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function xqe(t,e){return e==="|"?e:t}function _qe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:l,tableRow:a}};function o(f,p,m,g){return c(u(f,m,g),f.align)}function a(f,p,m,g){const b=d(f,m,g),v=c([b]);return v.slice(0,v.indexOf(`
`))}function l(f,p,m,g){const b=m.enter("tableCell"),v=m.enter("phrasing"),w=m.containerPhrasing(f,{...g,before:i,after:i});return v(),b(),w}function c(f,p){return CGe(f,{align:p,alignDelimiters:r,padding:n,stringLength:s})}function u(f,p,m){const g=f.children;let b=-1;const v=[],w=p.enter("table");for(;++b<g.length;)v[b]=d(g[b],p,m);return w(),v}function d(f,p,m){const g=f.children;let b=-1;const v=[],w=p.enter("tableRow");for(;++b<g.length;)v[b]=l(g[b],f,p,m);return w(),v}function h(f,p,m){let g=mqe.inlineCode(f,p,m);return m.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function Sqe(t,e,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const o=n.indentLines(n.containerFlow(t,i.current()),Eqe);return s(),o}function Eqe(t,e,n){return">"+(n?"":" ")+t}function kqe(t,e){return sH(t,e.inConstruct,!0)&&!sH(t,e.notInConstruct,!1)}function sH(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function iH(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&kqe(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Cqe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Aqe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Tqe(t,e,n,r){const s=Aqe(n),i=t.value||"",o=s==="`"?"GraveAccent":"Tilde";if(Cqe(t,n)){const d=n.enter("codeIndented"),h=n.indentLines(i,Pqe);return d(),h}const a=n.createTracker(r),l=s.repeat(Math.max(Tle(i,s)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const d=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),i&&(u+=a.move(i+`
`)),u+=a.move(l),c(),u}function Pqe(t,e,n){return(n?"":"    ")+t}function KM(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Nqe(t,e,n,r){const s=KM(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(t.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),o(),c}function Iqe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function W1(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Rqe(t){return t!==null&&(t<0||t===32)}const Oqe=zle(/\p{P}|\p{S}/u),Lqe=zle(/\s/);function zle(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function oH(t){if(t===null||Rqe(t)||Lqe(t))return 1;if(Oqe(t))return 2}function Fk(t,e,n){const r=oH(t),s=oH(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Vle.peek=Dqe;function Vle(t,e,n,r){const s=Iqe(n),i=n.enter("emphasis"),o=n.createTracker(r),a=o.move(s);let l=o.move(n.containerPhrasing(t,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),u=Fk(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=W1(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=Fk(r.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+W1(d));const f=o.move(s);return i(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function Dqe(t,e,n){return n.options.emphasis||"*"}const Mqe={};function Wle(t,e){const n=Mqe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Gle(t,r,s)}function Gle(t,e,n){if(jqe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return aH(t.children,e,n)}return Array.isArray(t)?aH(t,e,n):""}function aH(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=Gle(t[s],e,n);return r.join("")}function jqe(t){return!!(t&&typeof t=="object")}function Fqe(t,e){let n=!1;return Vp(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Dk}),!!((!t.depth||t.depth<3)&&Wle(t)&&(e.options.setext||n))}function Bqe(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),i=n.createTracker(r);if(Fqe(t,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(t,{...i.current(),before:`
`,after:`
`});return d(),u(),h+`
`+(s===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(s),a=n.enter("headingAtx"),l=n.enter("phrasing");i.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(c)&&(c=W1(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}qle.peek=$qe;function qle(t){return t.value||""}function $qe(){return"<"}Kle.peek=Uqe;function Kle(t,e,n,r){const s=KM(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(t.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),c+=l.move(")"),o(),c}function Uqe(){return"!"}Yle.peek=Hqe;function Yle(t,e,n,r){const s=t.referenceType,i=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,i(),s==="full"||!c||c!==d?l+=a.move(d+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Hqe(){return"!"}Jle.peek=zqe;function Jle(t,e,n){let r=t.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const o=n.unsafe[i],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return s+r+s}function zqe(){return"`"}function Xle(t,e){const n=Wle(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Zle.peek=Vqe;function Zle(t,e,n,r){const s=KM(n),i=s==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(Xle(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=u,d}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${i}`),c+=o.move(" "+s),c+=o.move(n.safe(t.title,{before:c,after:s,...o.current()})),c+=o.move(s),l()),c+=o.move(")"),a(),c}function Vqe(t,e,n){return Xle(t,n)?"<":"["}Qle.peek=Wqe;function Qle(t,e,n,r){const s=t.referenceType,i=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,i(),s==="full"||!c||c!==d?l+=a.move(d+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Wqe(){return"["}function YM(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Gqe(t){const e=YM(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function qqe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function ece(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Kqe(t,e,n,r){const s=n.enter("list"),i=n.bulletCurrent;let o=t.ordered?qqe(n):YM(n);const a=t.ordered?o==="."?")":".":Gqe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),ece(n)===o&&u){let d=-1;for(;++d<t.children.length;){const h=t.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=i,s(),c}function Yqe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Jqe(t,e,n,r){const s=Yqe(n);let i=n.bulletCurrent||YM(n);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let o=i.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(i+" ".repeat(o-i.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(d,h,f){return h?(f?"":" ".repeat(o))+d:(f?i:i+" ".repeat(o-i.length))+d}}function Xqe(t,e,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),o=n.containerPhrasing(t,r);return i(),s(),o}const tce=function(t){if(t==null)return tKe;if(typeof t=="function")return QA(t);if(typeof t=="object")return Array.isArray(t)?Zqe(t):Qqe(t);if(typeof t=="string")return eKe(t);throw new Error("Expected function, string, or object as test")};function Zqe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=tce(t[n]);return QA(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function Qqe(t){const e=t;return QA(n);function n(r){const s=r;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function eKe(t){return QA(e);function e(n){return n&&n.type===t}}function QA(t){return e;function e(n,r,s){return!!(nKe(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function tKe(){return!0}function nKe(t){return t!==null&&typeof t=="object"&&"type"in t}const rKe=tce(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function sKe(t,e,n,r){return(t.children.some(function(o){return rKe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function iKe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}nce.peek=oKe;function nce(t,e,n,r){const s=iKe(n),i=n.enter("strong"),o=n.createTracker(r),a=o.move(s+s);let l=o.move(n.containerPhrasing(t,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),u=Fk(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=W1(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=Fk(r.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+W1(d));const f=o.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function oKe(t,e,n){return n.options.strong||"*"}function aKe(t,e,n,r){return n.safe(t.value,r)}function lKe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function cKe(t,e,n){const r=(ece(n)+(n.options.ruleSpaces?" ":"")).repeat(lKe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const uKe={blockquote:Sqe,break:iH,code:Tqe,definition:Nqe,emphasis:Vle,hardBreak:iH,heading:Bqe,html:qle,image:Kle,imageReference:Yle,inlineCode:Jle,link:Zle,linkReference:Qle,list:Kqe,listItem:Jqe,paragraph:Xqe,root:sKe,strong:nce,text:aKe,thematicBreak:cKe};function dKe(){return{exit:{taskListCheckValueChecked:lH,taskListCheckValueUnchecked:lH,paragraph:fKe}}}function hKe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:pKe}}}function lH(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function fKe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let i=-1,o;for(;++i<s.length;){const a=s[i];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function pKe(t,e,n,r){const s=t.children[0],i=typeof t.checked=="boolean"&&s&&s.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);i&&a.move(o);let l=uKe.listItem(t,e,n,{...r,...a.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function mKe(){return[YWe(),gGe(),wGe(),gqe(),dKe()]}function gKe(t){return{extensions:[JWe(),bGe(t),xGe(),_qe(t),hKe()]}}function bKe(t,e,n,r){const s=t.length;let i=0,o;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(e,0),t.splice(...o),i+=1e4,e+=1e4}const cH={}.hasOwnProperty;function yKe(t){const e={};let n=-1;for(;++n<t.length;)vKe(e,t[n]);return e}function vKe(t,e){let n;for(n in e){const s=(cH.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let o;if(i)for(o in i){cH.call(s,o)||(s[o]=[]);const a=i[o];wKe(s[o],Array.isArray(a)?a:a?[a]:[])}}}function wKe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);bKe(t,0,0,r)}const G1=eT(/[A-Za-z]/),JM=eT(/[\dA-Za-z]/);function xKe(t){return t!==null&&(t<32||t===127)}function v0(t){return t!==null&&(t<0||t===32)}const rce=eT(/\p{P}|\p{S}/u),q1=eT(/\s/);function eT(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}const _Ke={tokenize:TKe,partial:!0},sce={tokenize:PKe,partial:!0},ice={tokenize:NKe,partial:!0},oce={tokenize:IKe,partial:!0},SKe={tokenize:RKe,partial:!0},ace={name:"wwwAutolink",tokenize:CKe,previous:cce},lce={name:"protocolAutolink",tokenize:AKe,previous:uce},Zu={name:"emailAutolink",tokenize:kKe,previous:dce},$c={};function EKe(){return{text:$c}}let Qh=48;for(;Qh<123;)$c[Qh]=Zu,Qh++,Qh===58?Qh=65:Qh===91&&(Qh=97);$c[43]=Zu;$c[45]=Zu;$c[46]=Zu;$c[95]=Zu;$c[72]=[Zu,lce];$c[104]=[Zu,lce];$c[87]=[Zu,ace];$c[119]=[Zu,ace];function kKe(t,e,n){const r=this;let s,i;return o;function o(d){return!jR(d)||!dce.call(r,r.previous)||XM(r.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return jR(d)?(t.consume(d),a):d===64?(t.consume(d),l):n(d)}function l(d){return d===46?t.check(SKe,u,c)(d):d===45||d===95||JM(d)?(i=!0,t.consume(d),l):u(d)}function c(d){return t.consume(d),s=!0,l}function u(d){return i&&s&&G1(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function CKe(t,e,n){const r=this;return s;function s(o){return o!==87&&o!==119||!cce.call(r,r.previous)||XM(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(_Ke,t.attempt(sce,t.attempt(ice,i),n),n)(o))}function i(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function AKe(t,e,n){const r=this;let s="",i=!1;return o;function o(d){return(d===72||d===104)&&uce.call(r,r.previous)&&!XM(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(d),t.consume(d),a):n(d)}function a(d){if(G1(d)&&s.length<5)return s+=String.fromCodePoint(d),t.consume(d),a;if(d===58){const h=s.toLowerCase();if(h==="http"||h==="https")return t.consume(d),l}return n(d)}function l(d){return d===47?(t.consume(d),i?c:(i=!0,l)):n(d)}function c(d){return d===null||xKe(d)||v0(d)||q1(d)||rce(d)?n(d):t.attempt(sce,t.attempt(ice,u),n)(d)}function u(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function TKe(t,e,n){let r=0;return s;function s(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),s):o===46&&r===3?(t.consume(o),i):n(o)}function i(o){return o===null?n(o):e(o)}}function PKe(t,e,n){let r,s,i;return o;function o(c){return c===46||c===95?t.check(oce,l,a)(c):c===null||v0(c)||q1(c)||c!==45&&rce(c)?l(c):(i=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(s=r,r=void 0),t.consume(c),o}function l(c){return s||r||!i?n(c):e(c)}}function NKe(t,e){let n=0,r=0;return s;function s(o){return o===40?(n++,t.consume(o),s):o===41&&r<n?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(oce,e,i)(o):o===null||v0(o)||q1(o)?e(o):(t.consume(o),s)}function i(o){return o===41&&r++,t.consume(o),s}}function IKe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),i):a===93?(t.consume(a),s):a===60||a===null||v0(a)||q1(a)?e(a):n(a)}function s(a){return a===null||a===40||a===91||v0(a)||q1(a)?e(a):r(a)}function i(a){return G1(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):G1(a)?(t.consume(a),o):n(a)}}function RKe(t,e,n){return r;function r(i){return t.consume(i),s}function s(i){return JM(i)?n(i):e(i)}}function cce(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||v0(t)}function uce(t){return!G1(t)}function dce(t){return!(t===47||jR(t))}function jR(t){return t===43||t===45||t===46||t===95||JM(t)}function XM(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function OKe(t){return t!==null&&t<-2}function Bk(t){return t!==null&&(t<0||t===32)}function FR(t){return t===-2||t===-1||t===32}function ZM(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(l){return FR(l)?(t.enter(n),a(l)):e(l)}function a(l){return FR(l)&&i++<s?(t.consume(l),a):(t.exit(n),e(l))}}const LKe={partial:!0,tokenize:DKe};function DKe(t,e,n){return r;function r(i){return FR(i)?ZM(t,s,"linePrefix")(i):s(i)}function s(i){return i===null||OKe(i)?e(i):n(i)}}function QM(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const MKe={tokenize:VKe,partial:!0};function jKe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:UKe,continuation:{tokenize:HKe},exit:zKe}},text:{91:{name:"gfmFootnoteCall",tokenize:$Ke},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:FKe,resolveTo:BKe}}}}function FKe(t,e,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;s--;){const l=r.events[s][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=QM(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!i.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function BKe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function $Ke(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,o;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(d){if(i>999||d===93&&!o||d===null||d===91||Bk(d))return n(d);if(d===93){t.exit("chunkString");const h=t.exit("gfmFootnoteCallString");return s.includes(QM(r.sliceSerialize(h)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return Bk(d)||(o=!0),i++,t.consume(d),d===92?u:c}function u(d){return d===91||d===92||d===93?(t.consume(d),i++,c):c(d)}}function UKe(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,o=0,a;return l;function l(p){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(p)}function u(p){if(o>999||p===93&&!a||p===null||p===91||Bk(p))return n(p);if(p===93){t.exit("chunkString");const m=t.exit("gfmFootnoteDefinitionLabelString");return i=QM(r.sliceSerialize(m)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),h}return Bk(p)||(a=!0),o++,t.consume(p),p===92?d:u}function d(p){return p===91||p===92||p===93?(t.consume(p),o++,u):u(p)}function h(p){return p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),s.includes(i)||s.push(i),ZM(t,f,"gfmFootnoteDefinitionWhitespace")):n(p)}function f(p){return e(p)}}function HKe(t,e,n){return t.check(LKe,e,t.attempt(MKe,e,n))}function zKe(t){t.exit("gfmFootnoteDefinition")}function VKe(t,e,n){const r=this;return ZM(t,s,"gfmFootnoteDefinitionIndent",5);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(i):n(i)}}function dP(t,e,n,r){const s=t.length;let i=0,o;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(e,0),t.splice(...o),i+=1e4,e+=1e4}function WKe(t){return t!==null&&(t<0||t===32)}const GKe=hce(/\p{P}|\p{S}/u),qKe=hce(/\s/);function hce(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function uH(t){if(t===null||WKe(t)||qKe(t))return 1;if(GKe(t))return 2}function KKe(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const i=t[s].resolveAll;i&&!r.includes(i)&&(e=i(e,n),r.push(i))}return e}function YKe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},h=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",d,a]],f=a.parser.constructs.insideSpan.null;f&&dP(h,h.length,0,KKe(f,o.slice(c+1,l),a)),dP(h,h.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),dP(o,c-1,l-c+3,h),l=c+h.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function i(o,a,l){const c=this.previous,u=this.events;let d=0;return h;function h(p){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(p):(o.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const m=uH(c);if(p===126)return d>1?l(p):(o.consume(p),d++,f);if(d<2&&!n)return l(p);const g=o.exit("strikethroughSequenceTemporary"),b=uH(p);return g._open=!b||b===2&&!!m,g._close=!m||m===2&&!!b,a(p)}}}function p2(t){return t!==null&&t<-2}function dH(t){return t!==null&&(t<0||t===32)}function wf(t){return t===-2||t===-1||t===32}function by(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(l){return wf(l)?(t.enter(n),a(l)):e(l)}function a(l){return wf(l)&&i++<s?(t.consume(l),a):(t.exit(n),e(l))}}class JKe{constructor(){this.map=[]}add(e,n,r){XKe(this,e,n,r)}consume(e){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const i of s)e.push(i);s=r.pop()}this.map.length=0}}function XKe(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function ZKe(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function QKe(){return{flow:{null:{name:"table",tokenize:eYe,resolveAll:tYe}}}}function eYe(t,e,n){const r=this;let s=0,i=0,o;return a;function a(R){let C=r.events.length-1;for(;C>-1;){const P=r.events[C][1].type;if(P==="lineEnding"||P==="linePrefix")C--;else break}const T=C>-1?r.events[C][1].type:null,O=T==="tableHead"||T==="tableRow"?E:l;return O===E&&r.parser.lazy[r.now().line]?n(R):O(R)}function l(R){return t.enter("tableHead"),t.enter("tableRow"),c(R)}function c(R){return R===124||(o=!0,i+=1),u(R)}function u(R){return R===null?n(R):p2(R)?i>1?(i=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),f):n(R):wf(R)?by(t,u,"whitespace")(R):(i+=1,o&&(o=!1,s+=1),R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),d(R)))}function d(R){return R===null||R===124||dH(R)?(t.exit("data"),u(R)):(t.consume(R),R===92?h:d)}function h(R){return R===92||R===124?(t.consume(R),d):d(R)}function f(R){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(R):(t.enter("tableDelimiterRow"),o=!1,wf(R)?by(t,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):p(R))}function p(R){return R===45||R===58?g(R):R===124?(o=!0,t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),m):S(R)}function m(R){return wf(R)?by(t,g,"whitespace")(R):g(R)}function g(R){return R===58?(i+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),b):R===45?(i+=1,b(R)):R===null||p2(R)?_(R):S(R)}function b(R){return R===45?(t.enter("tableDelimiterFiller"),v(R)):S(R)}function v(R){return R===45?(t.consume(R),v):R===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),w):(t.exit("tableDelimiterFiller"),w(R))}function w(R){return wf(R)?by(t,_,"whitespace")(R):_(R)}function _(R){return R===124?p(R):R===null||p2(R)?!o||s!==i?S(R):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(R)):S(R)}function S(R){return n(R)}function E(R){return t.enter("tableRow"),k(R)}function k(R){return R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),k):R===null||p2(R)?(t.exit("tableRow"),e(R)):wf(R)?by(t,k,"whitespace")(R):(t.enter("data"),x(R))}function x(R){return R===null||R===124||dH(R)?(t.exit("data"),k(R)):(t.consume(R),R===92?I:x)}function I(R){return R===92||R===124?(t.consume(R),x):x(R)}}function tYe(t,e){let n=-1,r=!0,s=0,i=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,d;const h=new JKe;for(;++n<t.length;){const f=t[n],p=f[1];f[0]==="enter"?p.type==="tableHead"?(a=!1,l!==0&&(hH(h,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(n,0,[["enter",c,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,d=void 0,i=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(n,0,[["enter",u,e]])),s=p.type==="tableDelimiterRow"?2:u?3:1):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],d=m2(h,e,i,s,void 0,d),i=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(o[0]=o[1],d=m2(h,e,i,s,void 0,d)),i=o,o=[i[1],n,0,0])):p.type==="tableHead"?(a=!0,l=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=n,i[1]!==0?(o[0]=o[1],d=m2(h,e,i,s,n,d)):o[1]!==0&&(d=m2(h,e,o,s,n,d)),s=0):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&hH(h,e,l,c,u),h.consume(e.events),n=-1;++n<e.events.length;){const f=e.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=ZKe(e.events,n))}return t}function m2(t,e,n,r,s,i){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(i.end=Object.assign({},Jm(e.events,n[0])),t.add(n[0],0,[["exit",i,e]]));const l=Jm(e.events,n[1]);if(i={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",i,e]]),n[2]!==0){const c=Jm(e.events,n[2]),u=Jm(e.events,n[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",d,e]]),r!==2){const h=e.events[n[2]],f=e.events[n[3]];if(h[1].end=Object.assign({},f[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,m=n[3]-n[2]-1;t.add(p,m,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return s!==void 0&&(i.end=Object.assign({},Jm(e.events,s)),t.add(s,0,[["exit",i,e]]),i=void 0),i}function hH(t,e,n,r,s){const i=[],o=Jm(e.events,n);s&&(s.end=Object.assign({},o),i.push(["exit",s,e])),r.end=Object.assign({},o),i.push(["exit",r,e]),t.add(n+1,0,i)}function Jm(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}function nYe(t){return t!==null&&t<-2}function rYe(t){return t!==null&&(t<0||t===32)}function BR(t){return t===-2||t===-1||t===32}function sYe(t,e,n,r){const s=Number.POSITIVE_INFINITY;let i=0;return o;function o(l){return BR(l)?(t.enter(n),a(l)):e(l)}function a(l){return BR(l)&&i++<s?(t.consume(l),a):(t.exit(n),e(l))}}const iYe={name:"tasklistCheck",tokenize:aYe};function oYe(){return{text:{91:iYe}}}function aYe(t,e,n){const r=this;return s;function s(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),i)}function i(l){return rYe(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return nYe(l)?e(l):BR(l)?t.check({tokenize:lYe},e,n)(l):n(l)}}function lYe(t,e,n){return sYe(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function cYe(t){return yKe([EKe(),jKe(),YKe(t),QKe(),oYe()])}const uYe={};function dYe(t){const e=this,n=t||uYe,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(cYe(n)),i.push(mKe()),o.push(gKe(n))}const hYe=fce("end"),fYe=fce("start");function fce(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function pYe(t){const e=fYe(t),n=hYe(t);if(e&&n)return{start:e,end:n}}const ef=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],jv={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...ef,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...ef],h2:[["className","sr-only"]],img:[...ef,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...ef,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...ef],table:[...ef],ul:[...ef,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Od={}.hasOwnProperty;function mYe(t,e){let n={type:"root",children:[]};const r={schema:e?{...jv,...e}:jv,stack:[]},s=pce(r,t);return s&&(Array.isArray(s)?s.length===1?n=s[0]:n.children=s:n=s),n}function pce(t,e){if(e&&typeof e=="object"){const n=e;switch(typeof n.type=="string"?n.type:""){case"comment":return gYe(t,n);case"doctype":return bYe(t,n);case"element":return yYe(t,n);case"root":return vYe(t,n);case"text":return wYe(t,n)}}}function gYe(t,e){if(t.schema.allowComments){const n=typeof e.value=="string"?e.value:"",r=n.indexOf("-->"),i={type:"comment",value:r<0?n:n.slice(0,r)};return Zw(i,e),i}}function bYe(t,e){if(t.schema.allowDoctypes){const n={type:"doctype"};return Zw(n,e),n}}function yYe(t,e){const n=typeof e.tagName=="string"?e.tagName:"";t.stack.push(n);const r=mce(t,e.children),s=xYe(t,e.properties);t.stack.pop();let i=!1;if(n&&n!=="*"&&(!t.schema.tagNames||t.schema.tagNames.includes(n))&&(i=!0,t.schema.ancestors&&Od.call(t.schema.ancestors,n))){const a=t.schema.ancestors[n];let l=-1;for(i=!1;++l<a.length;)t.stack.includes(a[l])&&(i=!0)}if(!i)return t.schema.strip&&!t.schema.strip.includes(n)?r:void 0;const o={type:"element",tagName:n,properties:s,children:r};return Zw(o,e),o}function vYe(t,e){const r={type:"root",children:mce(t,e.children)};return Zw(r,e),r}function wYe(t,e){const r={type:"text",value:typeof e.value=="string"?e.value:""};return Zw(r,e),r}function mce(t,e){const n=[];if(Array.isArray(e)){const r=e;let s=-1;for(;++s<r.length;){const i=pce(t,r[s]);i&&(Array.isArray(i)?n.push(...i):n.push(i))}}return n}function xYe(t,e){const n=t.stack[t.stack.length-1],r=t.schema.attributes,s=t.schema.required,i=r&&Od.call(r,n)?r[n]:void 0,o=r&&Od.call(r,"*")?r["*"]:void 0,a=e&&typeof e=="object"?e:{},l={};let c;for(c in a)if(Od.call(a,c)){const u=a[c];let d=fH(t,pH(i,c),c,u);d==null&&(d=fH(t,pH(o,c),c,u)),d!=null&&(l[c]=d)}if(s&&Od.call(s,n)){const u=s[n];for(c in u)Od.call(u,c)&&!Od.call(l,c)&&(l[c]=u[c])}return l}function fH(t,e,n,r){return e?Array.isArray(r)?_Ye(t,e,n,r):gce(t,e,n,r):void 0}function _Ye(t,e,n,r){let s=-1;const i=[];for(;++s<r.length;){const o=gce(t,e,n,r[s]);(typeof o=="number"||typeof o=="string")&&i.push(o)}return i}function gce(t,e,n,r){if(!(typeof r!="boolean"&&typeof r!="number"&&typeof r!="string")&&SYe(t,n,r)){if(typeof e=="object"&&e.length>1){let s=!1,i=0;for(;++i<e.length;){const o=e[i];if(o&&typeof o=="object"&&"flags"in o){if(o.test(String(r))){s=!0;break}}else if(o===r){s=!0;break}}if(!s)return}return t.schema.clobber&&t.schema.clobberPrefix&&t.schema.clobber.includes(n)?t.schema.clobberPrefix+r:r}}function SYe(t,e,n){const r=t.schema.protocols&&Od.call(t.schema.protocols,e)?t.schema.protocols[e]:void 0;if(!r||r.length===0)return!0;const s=String(n),i=s.indexOf(":"),o=s.indexOf("?"),a=s.indexOf("#"),l=s.indexOf("/");if(i<0||l>-1&&i>l||o>-1&&i>o||a>-1&&i>a)return!0;let c=-1;for(;++c<r.length;){const u=r[c];if(i===u.length&&s.slice(0,u.length)===u)return!0}return!1}function Zw(t,e){const n=pYe(e);e.data&&(t.data=gp(e.data)),n&&(t.position=n)}function pH(t,e){let n,r=-1;if(t)for(;++r<t.length;){const s=t[r],i=typeof s=="string"?s:s[0];if(i===e)return s;i==="data*"&&(n=s)}if(e.length>4&&e.slice(0,4).toLowerCase()==="data")return n}function EYe(t){return function(e){return mYe(e,t)}}const e8=["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","ins","kbd","li","ol","p","pre","q","rp","rt","ruby","s","samp","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","ul","var","think"];function kYe(){return t=>{Vp(t,e=>{if(e.type==="html"&&e.value&&e.value.startsWith("<think>")){const n=e.value.slice(7);e.value=`<div class="__boltThought__">${n}`;return}if(e.type==="html"&&e.value&&e.value.startsWith("</think>")){const n=e.value.slice(8);e.value=`</div>${n}`}})}}const CYe={...jv,tagNames:e8,attributes:{...jv.attributes,div:[...jv.attributes?.div??[],"data*",["className","__boltArtifact__","__boltThought__"]]},strip:[]};function AYe(t){const e=[dYe];return t&&e.unshift(PYe),e.unshift(kYe),e}function TYe(t){const e=[];return t&&e.push(MWe,[EYe,CYe]),e}const PYe=()=>(t,e)=>{const n=e.toString();Vp(t,(r,s,i)=>{if(s==null||["paragraph","text","inlineCode","code","strong","emphasis"].includes(r.type)||!r.position)return!0;let o=n.slice(r.position.start.offset,r.position.end.offset);return r.type==="heading"&&(o=`
${o}`),i.children[s]={type:"text",value:o},[mle,s]})},NYe=(t=Hu)=>`
You are Bolt, an expert AI assistant and exceptional senior software developer with vast knowledge across multiple programming languages, frameworks, and best practices.

<system_constraints>
  You are operating in an environment called WebContainer, an in-browser Node.js runtime that emulates a Linux system to some degree. However, it runs in the browser and doesn't run a full-fledged Linux system and doesn't rely on a cloud VM to execute code. All code is executed in the browser. It does come with a shell that emulates zsh. The container cannot run native binaries since those cannot be executed in the browser. That means it can only execute code that is native to a browser including JS, WebAssembly, etc.

  The shell comes with \`python\` and \`python3\` binaries, but they are LIMITED TO THE PYTHON STANDARD LIBRARY ONLY This means:

    - There is NO \`pip\` support! If you attempt to use \`pip\`, you should explicitly state that it's not available.
    - CRITICAL: Third-party libraries cannot be installed or imported.
    - Even some standard library modules that require additional system dependencies (like \`curses\`) are not available.
    - Only modules from the core Python standard library can be used.

  Additionally, there is no \`g++\` or any C/C++ compiler available. WebContainer CANNOT run native binaries or compile C/C++ code!

  Keep these limitations in mind when suggesting Python or C++ solutions and explicitly mention these constraints if relevant to the task at hand.

  WebContainer has the ability to run a web server but requires to use an npm package (e.g., Vite, servor, serve, http-server) or use the Node.js APIs to implement a web server.

  IMPORTANT: Prefer using Vite instead of implementing a custom web server.

  IMPORTANT: Git is NOT available.

  IMPORTANT: WebContainer CANNOT execute diff or patch editing so always write your code in full no partial/diff update

  IMPORTANT: Prefer writing Node.js scripts instead of shell scripts. The environment doesn't fully support shell scripts, so use Node.js for scripting tasks whenever possible!

  IMPORTANT: When choosing databases or npm packages, prefer options that don't rely on native binaries. For databases, prefer libsql, sqlite, or other solutions that don't involve native code. WebContainer CANNOT execute arbitrary native binaries.

  Available shell commands:
    File Operations:
      - cat: Display file contents
      - cp: Copy files/directories
      - ls: List directory contents
      - mkdir: Create directory
      - mv: Move/rename files
      - rm: Remove files
      - rmdir: Remove empty directories
      - touch: Create empty file/update timestamp
    
    System Information:
      - hostname: Show system name
      - ps: Display running processes
      - pwd: Print working directory
      - uptime: Show system uptime
      - env: Environment variables
    
    Development Tools:
      - node: Execute Node.js code
      - python3: Run Python scripts
      - code: VSCode operations
      - jq: Process JSON
    
    Other Utilities:
      - curl, head, sort, tail, clear, which, export, chmod, scho, hostname, kill, ln, xxd, alias, false,  getconf, true, loadenv, wasm, xdg-open, command, exit, source
</system_constraints>

<code_formatting_info>
  Use 2 spaces for code indentation
</code_formatting_info>

<message_formatting_info>
  You can make the output pretty by using only the following available HTML elements: ${e8.map(e=>`<${e}>`).join(", ")}
</message_formatting_info>

<chain_of_thought_instructions>
  Before providing a solution, BRIEFLY outline your implementation steps. This helps ensure systematic thinking and clear communication. Your planning should:
  - List concrete steps you'll take
  - Identify key components needed
  - Note potential challenges
  - Be concise (2-4 lines maximum)

  Example responses:

  User: "Create a todo list app with local storage"
  Assistant: "Sure. I'll start by:
  1. Set up Vite + React
  2. Create TodoList and TodoItem components
  3. Implement localStorage for persistence
  4. Add CRUD operations
  
  Let's start now.

  [Rest of response...]"

  User: "Help debug why my API calls aren't working"
  Assistant: "Great. My first steps will be:
  1. Check network requests
  2. Verify API endpoint format
  3. Examine error handling
  
  [Rest of response...]"

</chain_of_thought_instructions>

<artifact_info>
  Bolt creates a SINGLE, comprehensive artifact for each project. The artifact contains all necessary steps and components, including:

  - Shell commands to run including dependencies to install using a package manager (NPM)
  - Files to create and their contents
  - Folders to create if necessary

  <artifact_instructions>
    1. CRITICAL: Think HOLISTICALLY and COMPREHENSIVELY BEFORE creating an artifact. This means:

      - Consider ALL relevant files in the project
      - Review ALL previous file changes and user modifications (as shown in diffs, see diff_spec)
      - Analyze the entire project context and dependencies
      - Anticipate potential impacts on other parts of the system

      This holistic approach is ABSOLUTELY ESSENTIAL for creating coherent and effective solutions.

    2. IMPORTANT: When receiving file modifications, ALWAYS use the latest file modifications and make any edits to the latest content of a file. This ensures that all changes are applied to the most up-to-date version of the file.

    3. The current working directory is \`${t}\`.

    4. Wrap the content in opening and closing \`<boltArtifact>\` tags. These tags contain more specific \`<boltAction>\` elements.

    5. Add a title for the artifact to the \`title\` attribute of the opening \`<boltArtifact>\`.

    6. Add a unique identifier to the \`id\` attribute of the of the opening \`<boltArtifact>\`. For updates, reuse the prior identifier. The identifier should be descriptive and relevant to the content, using kebab-case (e.g., "example-code-snippet"). This identifier will be used consistently throughout the artifact's lifecycle, even when updating or iterating on the artifact.

    7. Use \`<boltAction>\` tags to define specific actions to perform.

    8. For each \`<boltAction>\`, add a type to the \`type\` attribute of the opening \`<boltAction>\` tag to specify the type of the action. Assign one of the following values to the \`type\` attribute:

      - shell: For running shell commands.

        - When Using \`npx\`, ALWAYS provide the \`--yes\` flag.
        - When running multiple shell commands, use \`&&\` to run them sequentially.
        - ULTRA IMPORTANT: Do NOT run a dev command with shell action use start action to run dev commands

      - file: For writing new files or updating existing files. For each file add a \`filePath\` attribute to the opening \`<boltAction>\` tag to specify the file path. The content of the file artifact is the file contents. All file paths MUST BE relative to the current working directory.

      - start: For starting a development server.
        - Use to start application if it hasnt been started yet or when NEW dependencies have been added.
        - Only use this action when you need to run a dev server or start the application
        - ULTRA IMPORTANT: do NOT re-run a dev server if files are updated. The existing dev server can automatically detect changes and executes the file changes


    9. The order of the actions is VERY IMPORTANT. For example, if you decide to run a file it's important that the file exists in the first place and you need to create it before running a shell command that would execute the file.

    10. ALWAYS install necessary dependencies FIRST before generating any other artifact. If that requires a \`package.json\` then you should create that first!

      IMPORTANT: Add all required dependencies to the \`package.json\` already and try to avoid \`npm i <pkg>\` if possible!

    11. CRITICAL: Always provide the FULL, updated content of the artifact. This means:

      - Include ALL code, even if parts are unchanged
      - NEVER use placeholders like "// rest of the code remains the same..." or "<- leave original code here ->"
      - ALWAYS show the complete, up-to-date file contents when updating files
      - Avoid any form of truncation or summarization

    12. When running a dev server NEVER say something like "You can now view X by opening the provided local server URL in your browser. The preview will be opened automatically or by the user manually!

    13. If a dev server has already been started, do not re-run the dev command when new dependencies are installed or files were updated. Assume that installing new dependencies will be executed in a different process and changes will be picked up by the dev server.

    14. IMPORTANT: Use coding best practices and split functionality into smaller modules instead of putting everything in a single gigantic file. Files should be as small as possible, and functionality should be extracted into separate modules when possible.

      - Ensure code is clean, readable, and maintainable.
      - Adhere to proper naming conventions and consistent formatting.
      - Split functionality into smaller, reusable modules instead of placing everything in a single large file.
      - Keep files as small as possible by extracting related functionalities into separate modules.
      - Use imports to connect these modules together effectively.
  </artifact_instructions>
</artifact_info>

NEVER use the word "artifact". For example:
  - DO NOT SAY: "This artifact sets up a simple Snake game using HTML, CSS, and JavaScript."
  - INSTEAD SAY: "We set up a simple Snake game using HTML, CSS, and JavaScript."

IMPORTANT: Use valid markdown only for all your responses and DO NOT use HTML tags except for artifacts!

ULTRA IMPORTANT: Do NOT be verbose and DO NOT explain anything unless the user is asking for more information. That is VERY important.

ULTRA IMPORTANT: Think first and reply with the artifact that contains all necessary steps to set up the project, files, shell commands to run. It is SUPER IMPORTANT to respond with this first.

Here are some examples of correct usage of artifacts:

<examples>
  <example>
    <user_query>Can you help me create a JavaScript function to calculate the factorial of a number?</user_query>

    <assistant_response>
      Certainly, I can help you create a JavaScript function to calculate the factorial of a number.

      <boltArtifact id="factorial-function" title="JavaScript Factorial Function">
        <boltAction type="file" filePath="index.js">function factorial(n) {
  ...
}
...</boltAction>

        <boltAction type="shell">node index.js</boltAction>
      </boltArtifact>
    </assistant_response>
  </example>

  <example>
    <user_query>Build a snake game</user_query>

    <assistant_response>
      Certainly! I'd be happy to help you build a snake game using JavaScript and HTML5 Canvas. This will be a basic implementation that you can later expand upon. Let's create the game step by step.

      <boltArtifact id="snake-game" title="Snake Game in HTML and JavaScript">
        <boltAction type="file" filePath="package.json">{
  "name": "snake",
  "scripts": {
    "dev": "vite"
  }
  ...
}</boltAction>

        <boltAction type="shell">npm install --save-dev vite</boltAction>

        <boltAction type="file" filePath="index.html">...</boltAction>

        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      Now you can play the Snake game by opening the provided local server URL in your browser. Use the arrow keys to control the snake. Eat the red food to grow and increase your score. The game ends if you hit the wall or your own tail.
    </assistant_response>
  </example>

  <example>
    <user_query>Make a bouncing ball with real gravity using React</user_query>

    <assistant_response>
      Certainly! I'll create a bouncing ball with real gravity using React. We'll use the react-spring library for physics-based animations.

      <boltArtifact id="bouncing-ball-react" title="Bouncing Ball with Gravity in React">
        <boltAction type="file" filePath="package.json">{
  "name": "bouncing-ball",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-spring": "^9.7.1"
  },
  "devDependencies": {
    "@types/react": "^18.0.28",
    "@types/react-dom": "^18.0.11",
    "@vitejs/plugin-react": "^3.1.0",
    "vite": "^4.2.0"
  }
}</boltAction>

        <boltAction type="file" filePath="index.html">...</boltAction>

        <boltAction type="file" filePath="src/main.jsx">...</boltAction>

        <boltAction type="file" filePath="src/index.css">...</boltAction>

        <boltAction type="file" filePath="src/App.jsx">...</boltAction>

        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      You can now view the bouncing ball animation in the preview. The ball will start falling from the top of the screen and bounce realistically when it hits the bottom.
    </assistant_response>
  </example>
</examples>
`;Lye`
  Continue your prior response. IMPORTANT: Immediately begin from where you left off without any interruptions.
  Do not repeat any content, including artifact and action tags.
`;const IYe=t=>{const{cwd:e,allowedHtmlElements:n}=t;return`
You are Bolt, an expert AI assistant and exceptional senior software developer with vast knowledge across multiple programming languages, frameworks, and best practices.

<system_constraints>
  - Operating in WebContainer, an in-browser Node.js runtime
  - Limited Python support: standard library only, no pip
  - No C/C++ compiler, native binaries, or Git
  - Prefer Node.js scripts over shell scripts
  - Use Vite for web servers
  - Databases: prefer libsql, sqlite, or non-native solutions
  - When for react dont forget to write vite config and index.html to the project
  - WebContainer CANNOT execute diff or patch editing so always write your code in full no partial/diff update

  Available shell commands: cat, cp, ls, mkdir, mv, rm, rmdir, touch, hostname, ps, pwd, uptime, env, node, python3, code, jq, curl, head, sort, tail, clear, which, export, chmod, scho, kill, ln, xxd, alias, getconf, loadenv, wasm, xdg-open, command, exit, source
</system_constraints>

<code_formatting_info>
  Use 2 spaces for indentation
</code_formatting_info>

<message_formatting_info>
  Available HTML elements: ${n.join(", ")}
</message_formatting_info>

<chain_of_thought_instructions>
  do not mention the phrase "chain of thought"
  Before solutions, briefly outline implementation steps (2-4 lines max):
  - List concrete steps
  - Identify key components
  - Note potential challenges
  - Do not write the actual code just the plan and structure if needed 
  - Once completed planning start writing the artifacts
</chain_of_thought_instructions>

<artifact_info>
  Create a single, comprehensive artifact for each project:
  - Use \`<boltArtifact>\` tags with \`title\` and \`id\` attributes
  - Use \`<boltAction>\` tags with \`type\` attribute:
    - shell: Run commands
    - file: Write/update files (use \`filePath\` attribute)
    - start: Start dev server (only when necessary)
  - Order actions logically
  - Install dependencies first
  - Provide full, updated content for all files
  - Use coding best practices: modular, clean, readable code
</artifact_info>


# CRITICAL RULES - NEVER IGNORE

## File and Command Handling
1. ALWAYS use artifacts for file contents and commands - NO EXCEPTIONS
2. When writing a file, INCLUDE THE ENTIRE FILE CONTENT - NO PARTIAL UPDATES
3. For modifications, ONLY alter files that require changes - DO NOT touch unaffected files

## Response Format
4. Use markdown EXCLUSIVELY - HTML tags are ONLY allowed within artifacts
5. Be concise - Explain ONLY when explicitly requested
6. NEVER use the word "artifact" in responses

## Development Process
7. ALWAYS think and plan comprehensively before providing a solution
8. Current working directory: \`${e} \` - Use this for all file paths
9. Don't use cli scaffolding to steup the project, use cwd as Root of the project
11. For nodejs projects ALWAYS install dependencies after writing package.json file

## Coding Standards
10. ALWAYS create smaller, atomic components and modules
11. Modularity is PARAMOUNT - Break down functionality into logical, reusable parts
12. IMMEDIATELY refactor any file exceeding 250 lines
13. ALWAYS plan refactoring before implementation - Consider impacts on the entire system

## Artifact Usage
22. Use \`<boltArtifact>\` tags with \`title\` and \`id\` attributes for each project
23. Use \`<boltAction>\` tags with appropriate \`type\` attribute:
    - \`shell\`: For running commands
    - \`file\`: For writing/updating files (include \`filePath\` attribute)
    - \`start\`: For starting dev servers (use only when necessary/ or new dependencies are installed)
24. Order actions logically - dependencies MUST be installed first
25. For Vite project must include vite config and index.html for entry point
26. Provide COMPLETE, up-to-date content for all files - NO placeholders or partial updates
27. WebContainer CANNOT execute diff or patch editing so always write your code in full no partial/diff update

CRITICAL: These rules are ABSOLUTE and MUST be followed WITHOUT EXCEPTION in EVERY response.

Examples:
<examples>
  <example>
    <user_query>Can you help me create a JavaScript function to calculate the factorial of a number?</user_query>
    <assistant_response>
      Certainly, I can help you create a JavaScript function to calculate the factorial of a number.

      <boltArtifact id="factorial-function" title="JavaScript Factorial Function">
        <boltAction type="file" filePath="index.js">function factorial(n) {
  ...
}

...</boltAction>
        <boltAction type="shell">node index.js</boltAction>
      </boltArtifact>
    </assistant_response>
  </example>

  <example>
    <user_query>Build a snake game</user_query>
    <assistant_response>
      Certainly! I'd be happy to help you build a snake game using JavaScript and HTML5 Canvas. This will be a basic implementation that you can later expand upon. Let's create the game step by step.

      <boltArtifact id="snake-game" title="Snake Game in HTML and JavaScript">
        <boltAction type="file" filePath="package.json">{
  "name": "snake",
  "scripts": {
    "dev": "vite"
  }
  ...
}</boltAction>
        <boltAction type="shell">npm install --save-dev vite</boltAction>
        <boltAction type="file" filePath="index.html">...</boltAction>
        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      Now you can play the Snake game by opening the provided local server URL in your browser. Use the arrow keys to control the snake. Eat the red food to grow and increase your score. The game ends if you hit the wall or your own tail.
    </assistant_response>
  </example>

  <example>
    <user_query>Make a bouncing ball with real gravity using React</user_query>
    <assistant_response>
      Certainly! I'll create a bouncing ball with real gravity using React. We'll use the react-spring library for physics-based animations.

      <boltArtifact id="bouncing-ball-react" title="Bouncing Ball with Gravity in React">
        <boltAction type="file" filePath="package.json">{
  "name": "bouncing-ball",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-spring": "^9.7.1"
  },
  "devDependencies": {
    "@types/react": "^18.0.28",
    "@types/react-dom": "^18.0.11",
    "@vitejs/plugin-react": "^3.1.0",
    "vite": "^4.2.0"
  }
}</boltAction>
        <boltAction type="file" filePath="index.html">...</boltAction>
        <boltAction type="file" filePath="src/main.jsx">...</boltAction>
        <boltAction type="file" filePath="src/index.css">...</boltAction>
        <boltAction type="file" filePath="src/App.jsx">...</boltAction>
        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      You can now view the bouncing ball animation in the preview. The ball will start falling from the top of the screen and bounce realistically when it hits the bottom.
    </assistant_response>
  </example>
</examples>
Always use artifacts for file contents and commands, following the format shown in these examples.
`};class RYe{static library={default:{label:"Default Prompt",description:"This is the battle tested default system Prompt",get:e=>NYe(e.cwd)},optimized:{label:"Optimized Prompt (experimental)",description:"an Experimental version of the prompt for lower token usage",get:e=>IYe(e)}};static getList(){return Object.entries(this.library).map(([e,n])=>{const{label:r,description:s}=n;return{id:e,label:r,description:s}})}static getPropmtFromLibrary(e,n){if(!this.library[e])throw"Prompt Now Found";return this.library[e]?.get(n)}}const OYe=N.memo(({feature:t,index:e,onToggle:n})=>y.jsx(lt.div,{layoutId:t.id,className:Ne("relative group cursor-pointer","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-colors duration-200","rounded-lg overflow-hidden"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.1},children:y.jsxs("div",{className:"p-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:Ne(t.icon,"w-5 h-5 text-bolt-elements-textSecondary")}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h4",{className:"font-medium text-bolt-elements-textPrimary",children:t.title}),t.beta&&y.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-500/10 text-blue-500 font-medium",children:"Beta"}),t.experimental&&y.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-orange-500/10 text-orange-500 font-medium",children:"Experimental"})]})]}),y.jsx(ka,{checked:t.enabled,onCheckedChange:r=>n(t.id,r)})]}),y.jsx("p",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:t.description}),t.tooltip&&y.jsx("p",{className:"mt-1 text-xs text-bolt-elements-textTertiary",children:t.tooltip})]})},t.id)),mH=N.memo(({title:t,features:e,icon:n,description:r,onToggleFeature:s})=>y.jsxs(lt.div,{layout:!0,className:"flex flex-col gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:Ne(n,"text-xl text-purple-500")}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:r})]})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map((i,o)=>y.jsx(OYe,{feature:i,index:o,onToggle:s},i.id))})]}));function LYe(){const{autoSelectTemplate:t,isLatestBranch:e,contextOptimizationEnabled:n,eventLogs:r,setAutoSelectTemplate:s,enableLatestBranch:i,enableContextOptimization:o,setEventLogs:a,setPromptId:l,promptId:c}=Rh();ht.useEffect(()=>{e===void 0&&i(!1),n===void 0&&o(!0),t===void 0&&s(!0),c===void 0&&l("default"),r===void 0&&a(!0)},[]);const u=N.useCallback((h,f)=>{switch(h){case"latestBranch":{i(f),Ve.success(`Main branch updates ${f?"enabled":"disabled"}`);break}case"autoSelectTemplate":{s(f),Ve.success(`Auto select template ${f?"enabled":"disabled"}`);break}case"contextOptimization":{o(f),Ve.success(`Context optimization ${f?"enabled":"disabled"}`);break}case"eventLogs":{a(f),Ve.success(`Event logging ${f?"enabled":"disabled"}`);break}}},[i,s,o,a]),d={stable:[{id:"latestBranch",title:"Main Branch Updates",description:"Get the latest updates from the main branch",icon:"i-ph:git-branch",enabled:e,tooltip:"Enabled by default to receive updates from the main development branch"},{id:"autoSelectTemplate",title:"Auto Select Template",description:"Automatically select starter template",icon:"i-ph:selection",enabled:t,tooltip:"Enabled by default to automatically select the most appropriate starter template"},{id:"contextOptimization",title:"Context Optimization",description:"Optimize context for better responses",icon:"i-ph:brain",enabled:n,tooltip:"Enabled by default for improved AI responses"},{id:"eventLogs",title:"Event Logging",description:"Enable detailed event logging and history",icon:"i-ph:list-bullets",enabled:r,tooltip:"Enabled by default to record detailed logs of system events and user actions"}],beta:[]};return y.jsxs("div",{className:"flex flex-col gap-8",children:[y.jsx(mH,{title:"Core Features",features:d.stable,icon:"i-ph:check-circle",description:"Essential features that are enabled by default for optimal performance",onToggleFeature:u}),d.beta.length>0&&y.jsx(mH,{title:"Beta Features",features:d.beta,icon:"i-ph:test-tube",description:"New features that are ready for testing but may have some rough edges",onToggleFeature:u}),y.jsx(lt.div,{layout:!0,className:Ne("bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","rounded-lg p-4","group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:Ne("p-2 rounded-lg text-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-colors duration-200","text-purple-500"),children:y.jsx("div",{className:"i-ph:book"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-purple-500 transition-colors",children:"Prompt Library"}),y.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:"Choose a prompt from the library to use as the system prompt"})]}),y.jsx("select",{value:c,onChange:h=>{l(h.target.value),Ve.success("Prompt template updated")},className:Ne("p-2 rounded-lg text-sm min-w-[200px]","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","group-hover:border-purple-500/30","transition-all duration-200"),children:RYe.getList().map(h=>y.jsx("option",{value:h.id,children:h.label},h.id))})]})})]})}function DYe(){const[t,e]=N.useState(!1),[n,r]=N.useState(!1),[s,i]=N.useState(!1),[o,a]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(!1),h=N.useRef(null),f=N.useRef(null),p=async()=>{try{if(!An)throw new Error("Database not initialized");const E={chats:await FS(An),exportDate:new Date().toISOString()},k=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),x=URL.createObjectURL(k),I=document.createElement("a");I.href=x,I.download=`bolt-chats-${new Date().toISOString()}.json`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(x),Ve.success("Chats exported successfully")}catch(S){console.error("Export error:",S),Ve.error("Failed to export chats")}},m=()=>{try{const S={userProfile:localStorage.getItem("bolt_user_profile"),settings:localStorage.getItem("bolt_settings"),exportDate:new Date().toISOString()},E=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),k=URL.createObjectURL(E),x=document.createElement("a");x.href=k,x.download=`bolt-settings-${new Date().toISOString()}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(k),Ve.success("Settings exported successfully")}catch(S){console.error("Export error:",S),Ve.error("Failed to export settings")}},g=async S=>{const E=S.target.files?.[0];if(E)try{const k=await E.text(),x=JSON.parse(k);x.userProfile&&localStorage.setItem("bolt_user_profile",x.userProfile),x.settings&&localStorage.setItem("bolt_settings",x.settings),window.location.reload(),Ve.success("Settings imported successfully")}catch(k){console.error("Import error:",k),Ve.error("Failed to import settings")}},b=async S=>{const E=S.target.files?.[0];if(E){r(!0);try{const k=await E.text(),x=JSON.parse(k);Object.entries(x).forEach(([I,R])=>{if(typeof R!="string")throw new Error(`Invalid value for key: ${I}`);localStorage.setItem(`bolt_${I.toLowerCase()}`,R)}),Ve.success("API keys imported successfully")}catch(k){console.error("Error importing API keys:",k),Ve.error("Failed to import API keys")}finally{r(!1),f.current&&(f.current.value="")}}},v=()=>{e(!0);try{const S={Anthropic_API_KEY:"",OpenAI_API_KEY:"",Google_API_KEY:"",Groq_API_KEY:"",HuggingFace_API_KEY:"",OpenRouter_API_KEY:"",Deepseek_API_KEY:"",Mistral_API_KEY:"",OpenAILike_API_KEY:"",Together_API_KEY:"",xAI_API_KEY:"",Perplexity_API_KEY:"",Cohere_API_KEY:"",AzureOpenAI_API_KEY:"",OPENAI_LIKE_API_BASE_URL:"",LMSTUDIO_API_BASE_URL:"",OLLAMA_API_BASE_URL:"",TOGETHER_API_BASE_URL:""},E=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),k=URL.createObjectURL(E),x=document.createElement("a");x.href=k,x.download="bolt-api-keys-template.json",document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(k),Ve.success("Template downloaded successfully")}catch(S){console.error("Error downloading template:",S),Ve.error("Failed to download template")}finally{e(!1)}},w=async()=>{i(!0);try{if(localStorage.removeItem("bolt_user_profile"),localStorage.removeItem("bolt_settings"),localStorage.removeItem("bolt_chat_history"),!An)throw new Error("Database not initialized");const E=(await FS(An)).map(k=>cR(An,k.id));await Promise.all(E),c(!1),window.location.reload(),Ve.success("Settings reset successfully")}catch(S){console.error("Reset error:",S),c(!1),Ve.error("Failed to reset settings")}finally{i(!1)}},_=async()=>{a(!0);try{if(localStorage.removeItem("bolt_chat_history"),!An)throw new Error("Database not initialized");const E=(await FS(An)).map(k=>cR(An,k.id));await Promise.all(E),d(!1),Ve.success("Chat history deleted successfully")}catch(S){console.error("Delete error:",S),d(!1),Ve.error("Failed to delete chat history")}finally{a(!1)}};return y.jsxs("div",{className:"space-y-6",children:[y.jsx("input",{ref:h,type:"file",accept:".json",onChange:g,className:"hidden"}),y.jsx(Ea,{open:l,onOpenChange:c,children:y.jsx(t0,{showCloseButton:!1,className:"z-[1000]",children:y.jsxs("div",{className:"p-6",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"i-ph:warning-circle-fill w-5 h-5 text-yellow-500"}),y.jsx(up,{children:"Reset All Settings?"})]}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-2",children:"This will reset all your settings to their default values. This action cannot be undone."}),y.jsxs("div",{className:"flex justify-end items-center gap-3 mt-6",children:[y.jsx(e0,{asChild:!0,children:y.jsx("button",{className:"px-4 py-2 rounded-lg text-sm bg-[#F5F5F5] dark:bg-[#1A1A1A] text-[#666666] dark:text-[#999999] hover:text-[#333333] dark:hover:text-white",children:"Cancel"})}),y.jsxs(lt.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm bg-white dark:bg-[#1A1A1A] text-yellow-600 dark:text-yellow-500 hover:bg-yellow-50 dark:hover:bg-yellow-500/10 border border-transparent hover:border-yellow-500/10 dark:hover:border-yellow-500/20",onClick:w,disabled:s,whileHover:{scale:1.02},whileTap:{scale:.98},children:[s?y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}):y.jsx("div",{className:"i-ph:arrow-counter-clockwise w-4 h-4"}),"Reset Settings"]})]})]})})}),y.jsx(Ea,{open:u,onOpenChange:d,children:y.jsx(t0,{showCloseButton:!1,className:"z-[1000]",children:y.jsxs("div",{className:"p-6",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"i-ph:warning-circle-fill w-5 h-5 text-red-500"}),y.jsx(up,{children:"Delete All Chats?"})]}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-2",children:"This will permanently delete all your chat history. This action cannot be undone."}),y.jsxs("div",{className:"flex justify-end items-center gap-3 mt-6",children:[y.jsx(e0,{asChild:!0,children:y.jsx("button",{className:"px-4 py-2 rounded-lg text-sm bg-[#F5F5F5] dark:bg-[#1A1A1A] text-[#666666] dark:text-[#999999] hover:text-[#333333] dark:hover:text-white",children:"Cancel"})}),y.jsxs(lt.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm bg-white dark:bg-[#1A1A1A] text-red-500 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 border border-transparent hover:border-red-500/10 dark:hover:border-red-500/20",onClick:_,disabled:o,whileHover:{scale:1.02},whileTap:{scale:.98},children:[o?y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}):y.jsx("div",{className:"i-ph:trash w-4 h-4"}),"Delete All"]})]})]})})}),y.jsxs(lt.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("div",{className:"i-ph:chat-circle-duotone w-5 h-5 text-purple-500"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Chat History"})]}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Export or delete all your chat history."}),y.jsxs("div",{className:"flex gap-4",children:[y.jsxs(lt.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,children:[y.jsx("div",{className:"i-ph:download-simple w-4 h-4"}),"Export All Chats"]}),y.jsxs(lt.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-50 text-red-500 text-sm hover:bg-red-100 dark:bg-red-500/10 dark:hover:bg-red-500/20",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>d(!0),children:[y.jsx("div",{className:"i-ph:trash w-4 h-4"}),"Delete All Chats"]})]})]}),y.jsxs(lt.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("div",{className:"i-ph:gear-duotone w-5 h-5 text-purple-500"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Settings Backup"})]}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Export your settings to a JSON file or import settings from a previously exported file."}),y.jsxs("div",{className:"flex gap-4",children:[y.jsxs(lt.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,children:[y.jsx("div",{className:"i-ph:download-simple w-4 h-4"}),"Export Settings"]}),y.jsxs(lt.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h.current?.click(),children:[y.jsx("div",{className:"i-ph:upload-simple w-4 h-4"}),"Import Settings"]}),y.jsxs(lt.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-yellow-50 text-yellow-600 text-sm hover:bg-yellow-100 dark:bg-yellow-500/10 dark:hover:bg-yellow-500/20 dark:text-yellow-500",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(!0),children:[y.jsx("div",{className:"i-ph:arrow-counter-clockwise w-4 h-4"}),"Reset Settings"]})]})]}),y.jsxs(lt.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("div",{className:"i-ph:key-duotone w-5 h-5 text-purple-500"}),y.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"API Keys Management"})]}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Import API keys from a JSON file or download a template to fill in your keys."}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("input",{ref:f,type:"file",accept:".json",onChange:b,className:"hidden"}),y.jsxs(lt.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,disabled:t,children:[t?y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}):y.jsx("div",{className:"i-ph:download-simple w-4 h-4"}),"Download Template"]}),y.jsxs(lt.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>f.current?.click(),disabled:n,children:[n?y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}):y.jsx("div",{className:"i-ph:upload-simple w-4 h-4"}),"Import API Keys"]})]})]})]})}var t8="Collapsible",[MYe,sTt]=Fa(t8),[jYe,n8]=MYe(t8),bce=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...a}=t,[l=!1,c]=Lp({prop:r,defaultProp:s,onChange:o});return y.jsx(jYe,{scope:n,disabled:i,contentId:Lu(),open:l,onOpenToggle:N.useCallback(()=>c(u=>!u),[c]),children:y.jsx(En.div,{"data-state":s8(l),"data-disabled":i?"":void 0,...a,ref:e})})});bce.displayName=t8;var yce="CollapsibleTrigger",vce=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=n8(yce,n);return y.jsx(En.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":s8(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Mt(t.onClick,s.onOpenToggle)})});vce.displayName=yce;var r8="CollapsibleContent",wce=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=n8(r8,t.__scopeCollapsible);return y.jsx(Js,{present:n||s.open,children:({present:i})=>y.jsx(FYe,{...r,ref:e,present:i})})});wce.displayName=r8;var FYe=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=n8(r8,n),[a,l]=N.useState(r),c=N.useRef(null),u=Jn(e,c),d=N.useRef(0),h=d.current,f=N.useRef(0),p=f.current,m=o.open||a,g=N.useRef(m),b=N.useRef(void 0);return N.useEffect(()=>{const v=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(v)},[]),$u(()=>{const v=c.current;if(v){b.current=b.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const w=v.getBoundingClientRect();d.current=w.height,f.current=w.width,g.current||(v.style.transitionDuration=b.current.transitionDuration,v.style.animationName=b.current.animationName),l(r)}},[o.open,r]),y.jsx(En.div,{"data-state":s8(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!m,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...t.style},children:m&&s})});function s8(t){return t?"open":"closed"}var BYe=bce,$Ye=vce,UYe=wce;const Yy=BYe,Jy=$Ye,Xy=UYe,tT=N.forwardRef(({className:t,value:e,...n},r)=>y.jsx("div",{ref:r,className:Ne("relative h-2 w-full overflow-hidden rounded-full bg-bolt-elements-background",t),...n,children:y.jsx("div",{className:"h-full w-full flex-1 bg-bolt-elements-textPrimary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));tT.displayName="Progress";function HYe(t,[e,n]){return Math.min(n,Math.max(e,t))}function zYe(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var i8="ScrollArea",[xce,iTt]=Fa(i8),[VYe,$a]=xce(i8),_ce=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,l]=N.useState(null),[c,u]=N.useState(null),[d,h]=N.useState(null),[f,p]=N.useState(null),[m,g]=N.useState(null),[b,v]=N.useState(0),[w,_]=N.useState(0),[S,E]=N.useState(!1),[k,x]=N.useState(!1),I=Jn(e,C=>l(C)),R=rM(s);return y.jsx(VYe,{scope:n,type:r,dir:R,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:f,onScrollbarXChange:p,scrollbarXEnabled:S,onScrollbarXEnabledChange:E,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:k,onScrollbarYEnabledChange:x,onCornerWidthChange:v,onCornerHeightChange:_,children:y.jsx(En.div,{dir:R,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})})});_ce.displayName=i8;var Sce="ScrollAreaViewport",Ece=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=$a(Sce,n),a=N.useRef(null),l=Jn(e,a,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),y.jsx(En.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Ece.displayName=Sce;var Uc="ScrollAreaScrollbar",o8=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=$a(Uc,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return N.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?y.jsx(WYe,{...r,ref:e,forceMount:n}):s.type==="scroll"?y.jsx(GYe,{...r,ref:e,forceMount:n}):s.type==="auto"?y.jsx(kce,{...r,ref:e,forceMount:n}):s.type==="always"?y.jsx(a8,{...r,ref:e}):null});o8.displayName=Uc;var WYe=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=$a(Uc,t.__scopeScrollArea),[i,o]=N.useState(!1);return N.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),y.jsx(Js,{present:n||i,children:y.jsx(kce,{"data-state":i?"visible":"hidden",...r,ref:e})})}),GYe=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=$a(Uc,t.__scopeScrollArea),i=t.orientation==="horizontal",o=rT(()=>l("SCROLL_END"),100),[a,l]=zYe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),N.useEffect(()=>{const c=s.viewport,u=i?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const f=c[u];d!==f&&(l("SCROLL"),o()),d=f};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[s.viewport,i,l,o]),y.jsx(Js,{present:n||a!=="hidden",children:y.jsx(a8,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Mt(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Mt(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),kce=N.forwardRef((t,e)=>{const n=$a(Uc,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=N.useState(!1),a=t.orientation==="horizontal",l=rT(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:u)}},10);return w0(n.viewport,l),w0(n.content,l),y.jsx(Js,{present:r||i,children:y.jsx(a8,{"data-state":i?"visible":"hidden",...s,ref:e})})}),a8=N.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=$a(Uc,t.__scopeScrollArea),i=N.useRef(null),o=N.useRef(0),[a,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Nce(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,f){return ZYe(h,o.current,a,f)}return n==="horizontal"?y.jsx(qYe,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollLeft,f=gH(h,a,s.dir);i.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,s.dir))}}):n==="vertical"?y.jsx(KYe,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollTop,f=gH(h,a);i.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),qYe=N.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=$a(Uc,t.__scopeScrollArea),[o,a]=N.useState(),l=N.useRef(null),c=Jn(e,l,i.onScrollbarXChange);return N.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),y.jsx(Ace,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":nT(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),Rce(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Uk(o.paddingLeft),paddingEnd:Uk(o.paddingRight)}})}})}),KYe=N.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=$a(Uc,t.__scopeScrollArea),[o,a]=N.useState(),l=N.useRef(null),c=Jn(e,l,i.onScrollbarYChange);return N.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),y.jsx(Ace,{"data-orientation":"vertical",...s,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":nT(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),Rce(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Uk(o.paddingTop),paddingEnd:Uk(o.paddingBottom)}})}})}),[YYe,Cce]=xce(Uc),Ace=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=t,f=$a(Uc,n),[p,m]=N.useState(null),g=Jn(e,I=>m(I)),b=N.useRef(null),v=N.useRef(""),w=f.viewport,_=r.content-r.viewport,S=ps(u),E=ps(l),k=rT(d,10);function x(I){if(b.current){const R=I.clientX-b.current.left,C=I.clientY-b.current.top;c({x:R,y:C})}}return N.useEffect(()=>{const I=R=>{const C=R.target;p?.contains(C)&&S(R,_)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[w,p,_,S]),N.useEffect(E,[r,E]),w0(p,k),w0(f.content,k),y.jsx(YYe,{scope:n,scrollbar:p,hasThumb:s,onThumbChange:ps(i),onThumbPointerUp:ps(o),onThumbPositionChange:E,onThumbPointerDown:ps(a),children:y.jsx(En.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:Mt(t.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),b.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),x(I))}),onPointerMove:Mt(t.onPointerMove,x),onPointerUp:Mt(t.onPointerUp,I=>{const R=I.target;R.hasPointerCapture(I.pointerId)&&R.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=v.current,f.viewport&&(f.viewport.style.scrollBehavior=""),b.current=null})})})}),$k="ScrollAreaThumb",Tce=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Cce($k,t.__scopeScrollArea);return y.jsx(Js,{present:n||s.hasThumb,children:y.jsx(JYe,{ref:e,...r})})}),JYe=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=$a($k,n),o=Cce($k,n),{onThumbPositionChange:a}=o,l=Jn(e,d=>o.onThumbChange(d)),c=N.useRef(void 0),u=rT(()=>{c.current&&(c.current(),c.current=void 0)},100);return N.useEffect(()=>{const d=i.viewport;if(d){const h=()=>{if(u(),!c.current){const f=QYe(d,a);c.current=f,a()}};return a(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[i.viewport,u,a]),y.jsx(En.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Mt(t.onPointerDownCapture,d=>{const f=d.target.getBoundingClientRect(),p=d.clientX-f.left,m=d.clientY-f.top;o.onThumbPointerDown({x:p,y:m})}),onPointerUp:Mt(t.onPointerUp,o.onThumbPointerUp)})});Tce.displayName=$k;var l8="ScrollAreaCorner",Pce=N.forwardRef((t,e)=>{const n=$a(l8,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(XYe,{...t,ref:e}):null});Pce.displayName=l8;var XYe=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=$a(l8,n),[i,o]=N.useState(0),[a,l]=N.useState(0),c=!!(i&&a);return w0(s.scrollbarX,()=>{const u=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(u),l(u)}),w0(s.scrollbarY,()=>{const u=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(u),o(u)}),c?y.jsx(En.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Uk(t){return t?parseInt(t,10):0}function Nce(t,e){const n=t/e;return isNaN(n)?0:n}function nT(t){const e=Nce(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function ZYe(t,e,n,r="ltr"){const s=nT(n),i=s/2,o=e||i,a=s-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return Ice([l,c],d)(t)}function gH(t,e,n="ltr"){const r=nT(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,l=n==="ltr"?[0,o]:[o*-1,0],c=HYe(t,l);return Ice([0,o],[0,a])(c)}function Ice(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Rce(t,e){return t>0&&t<e}var QYe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function rT(t,e){const n=ps(t),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function w0(t,e){const n=ps(e);$u(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var Oce=_ce,eJe=Ece,tJe=Pce;const c8=N.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(Oce,{ref:r,className:Ne("relative overflow-hidden",t),...n,children:[y.jsx(eJe,{className:"h-full w-full rounded-[inherit]",children:e}),y.jsx(Lce,{}),y.jsx(tJe,{})]}));c8.displayName=Oce.displayName;const Lce=N.forwardRef(({className:t,orientation:e="vertical",...n},r)=>y.jsx(o8,{ref:r,orientation:e,className:Ne("flex touch-none select-none transition-colors",{"h-full w-2.5 border-l border-l-transparent p-[1px]":e==="vertical","h-2.5 flex-col border-t border-t-transparent p-[1px]":e==="horizontal"},t),...n,children:y.jsx(Tce,{className:"relative flex-1 rounded-full bg-bolt-elements-border"})}));Lce.displayName=o8.displayName;const bH=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,yH=Nu,Dce=(t,e)=>n=>{var r;if(e?.variants==null)return yH(t,n?.class,n?.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n?.[c],d=i?.[c];if(u===null)return null;const h=bH(u)||bH(d);return s[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...f}=u;return Object.entries(f).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...i,...a}[m]):{...i,...a}[m]===g})?[...c,d,h]:c},[]);return yH(t,o,l,n?.class,n?.className)},nJe=Dce("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-bolt-elements-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-bolt-elements-background text-bolt-elements-textPrimary hover:bg-bolt-elements-background/80",secondary:"border-transparent bg-bolt-elements-background text-bolt-elements-textSecondary hover:bg-bolt-elements-background/80",destructive:"border-transparent bg-red-500/10 text-red-500 hover:bg-red-500/20",outline:"text-bolt-elements-textPrimary"}},defaultVariants:{variant:"default"}});function hP({className:t,variant:e,...n}){return y.jsx("div",{className:Ne(nJe({variant:e}),t),...n})}var ui=Uint8Array,jo=Uint16Array,u8=Int32Array,sT=new ui([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iT=new ui([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$R=new ui([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mce=function(t,e){for(var n=new jo(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new u8(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},jce=Mce(sT,2),Fce=jce.b,UR=jce.r;Fce[28]=258,UR[258]=28;var Bce=Mce(iT,0),rJe=Bce.b,vH=Bce.r,HR=new jo(32768);for(var br=0;br<32768;++br){var bd=(br&43690)>>1|(br&21845)<<1;bd=(bd&52428)>>2|(bd&13107)<<2,bd=(bd&61680)>>4|(bd&3855)<<4,HR[br]=((bd&65280)>>8|(bd&255)<<8)>>1}var Tc=function(t,e,n){for(var r=t.length,s=0,i=new jo(e);s<r;++s)t[s]&&++i[t[s]-1];var o=new jo(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(n){a=new jo(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],d=o[t[s]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[HR[d]>>l]=c}else for(a=new jo(r),s=0;s<r;++s)t[s]&&(a[s]=HR[o[t[s]-1]++]>>15-t[s]);return a},gh=new ui(288);for(var br=0;br<144;++br)gh[br]=8;for(var br=144;br<256;++br)gh[br]=9;for(var br=256;br<280;++br)gh[br]=7;for(var br=280;br<288;++br)gh[br]=8;var K1=new ui(32);for(var br=0;br<32;++br)K1[br]=5;var sJe=Tc(gh,9,0),iJe=Tc(gh,9,1),oJe=Tc(K1,5,0),aJe=Tc(K1,5,1),fP=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},el=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},pP=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},d8=function(t){return(t+7)/8|0},$ce=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ui(t.subarray(e,n))},lJe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],rl=function(t,e,n){var r=new Error(e||lJe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,rl),!n)throw r;return r},cJe=function(t,e,n,r){var s=t.length,i=0;if(!s||e.f&&!e.l)return n||new ui(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new ui(s*3));var c=function(xe){var Ae=n.length;if(xe>Ae){var Pe=new ui(Math.max(Ae*2,xe));Pe.set(n),n=Pe}},u=e.f||0,d=e.p||0,h=e.b||0,f=e.l,p=e.d,m=e.m,g=e.n,b=s*8;do{if(!f){u=el(t,d,1);var v=el(t,d+1,3);if(d+=3,v)if(v==1)f=iJe,p=aJe,m=9,g=5;else if(v==2){var E=el(t,d,31)+257,k=el(t,d+10,15)+4,x=E+el(t,d+5,31)+1;d+=14;for(var I=new ui(x),R=new ui(19),C=0;C<k;++C)R[$R[C]]=el(t,d+C*3,7);d+=k*3;for(var T=fP(R),O=(1<<T)-1,P=Tc(R,T,1),C=0;C<x;){var U=P[el(t,d,O)];d+=U&15;var w=U>>4;if(w<16)I[C++]=w;else{var ee=0,X=0;for(w==16?(X=3+el(t,d,3),d+=2,ee=I[C-1]):w==17?(X=3+el(t,d,7),d+=3):w==18&&(X=11+el(t,d,127),d+=7);X--;)I[C++]=ee}}var Z=I.subarray(0,E),F=I.subarray(E);m=fP(Z),g=fP(F),f=Tc(Z,m,1),p=Tc(F,g,1)}else rl(1);else{var w=d8(d)+4,_=t[w-4]|t[w-3]<<8,S=w+_;if(S>s){l&&rl(0);break}a&&c(h+_),n.set(t.subarray(w,S),h),e.b=h+=_,e.p=d=S*8,e.f=u;continue}if(d>b){l&&rl(0);break}}a&&c(h+131072);for(var M=(1<<m)-1,G=(1<<g)-1,D=d;;D=d){var ee=f[pP(t,d)&M],j=ee>>4;if(d+=ee&15,d>b){l&&rl(0);break}if(ee||rl(2),j<256)n[h++]=j;else if(j==256){D=d,f=null;break}else{var W=j-254;if(j>264){var C=j-257,q=sT[C];W=el(t,d,(1<<q)-1)+Fce[C],d+=q}var ne=p[pP(t,d)&G],te=ne>>4;ne||rl(3),d+=ne&15;var F=rJe[te];if(te>3){var q=iT[te];F+=pP(t,d)&(1<<q)-1,d+=q}if(d>b){l&&rl(0);break}a&&c(h+131072);var Y=h+W;if(h<F){var de=i-F,Se=Math.min(F,Y);for(de+h<0&&rl(3);h<Se;++h)n[h]=r[de+h]}for(;h<Y;++h)n[h]=n[h-F]}}e.l=f,e.p=D,e.b=h,e.f=u,f&&(u=1,e.m=m,e.d=p,e.n=g)}while(!u);return h!=n.length&&o?$ce(n,0,h):n.subarray(0,h)},nu=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},yy=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},mP=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return{t:Hce,l:0};if(s==1){var o=new ui(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(S,E){return S.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=s-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=i[0].s,r=1;r<s;++r)i[r].s>h&&(h=i[r].s);var f=new jo(h+1),p=zR(n[u-1],f,0);if(p>e){var r=0,m=0,g=p-e,b=1<<g;for(i.sort(function(E,k){return f[k.s]-f[E.s]||E.f-k.f});r<s;++r){var v=i[r].s;if(f[v]>e)m+=b-(1<<p-f[v]),f[v]=e;else break}for(m>>=g;m>0;){var w=i[r].s;f[w]<e?m-=1<<e-f[w]++-1:++r}for(;r>=0&&m;--r){var _=i[r].s;f[_]==e&&(--f[_],++m)}p=e}return{t:new ui(f),l:p}},zR=function(t,e,n){return t.s==-1?Math.max(zR(t.l,e,n+1),zR(t.r,e,n+1)):e[t.s]=n},wH=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new jo(++e),r=0,s=t[0],i=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==s&&a!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=t[a]}return{c:n.subarray(0,r),n:e}},vy=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Uce=function(t,e,n){var r=n.length,s=d8(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<r;++i)t[s+i+4]=n[i];return(s+4+r)*8},xH=function(t,e,n,r,s,i,o,a,l,c,u){nu(e,u++,n),++s[256];for(var d=mP(s,15),h=d.t,f=d.l,p=mP(i,15),m=p.t,g=p.l,b=wH(h),v=b.c,w=b.n,_=wH(m),S=_.c,E=_.n,k=new jo(19),x=0;x<v.length;++x)++k[v[x]&31];for(var x=0;x<S.length;++x)++k[S[x]&31];for(var I=mP(k,7),R=I.t,C=I.l,T=19;T>4&&!R[$R[T-1]];--T);var O=c+5<<3,P=vy(s,gh)+vy(i,K1)+o,U=vy(s,h)+vy(i,m)+o+14+3*T+vy(k,R)+2*k[16]+3*k[17]+7*k[18];if(l>=0&&O<=P&&O<=U)return Uce(e,u,t.subarray(l,l+c));var ee,X,Z,F;if(nu(e,u,1+(U<P)),u+=2,U<P){ee=Tc(h,f,0),X=h,Z=Tc(m,g,0),F=m;var M=Tc(R,C,0);nu(e,u,w-257),nu(e,u+5,E-1),nu(e,u+10,T-4),u+=14;for(var x=0;x<T;++x)nu(e,u+3*x,R[$R[x]]);u+=3*T;for(var G=[v,S],D=0;D<2;++D)for(var j=G[D],x=0;x<j.length;++x){var W=j[x]&31;nu(e,u,M[W]),u+=R[W],W>15&&(nu(e,u,j[x]>>5&127),u+=j[x]>>12)}}else ee=sJe,X=gh,Z=oJe,F=K1;for(var x=0;x<a;++x){var q=r[x];if(q>255){var W=q>>18&31;yy(e,u,ee[W+257]),u+=X[W+257],W>7&&(nu(e,u,q>>23&31),u+=sT[W]);var ne=q&31;yy(e,u,Z[ne]),u+=F[ne],ne>3&&(yy(e,u,q>>5&8191),u+=iT[ne])}else yy(e,u,ee[q]),u+=X[q]}return yy(e,u,ee[256]),u+X[256]},uJe=new u8([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Hce=new ui(0),dJe=function(t,e,n,r,s,i){var o=i.z||t.length,a=new ui(r+o+5*(1+Math.ceil(o/7e3))+s),l=a.subarray(r,a.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var d=uJe[e-1],h=d>>13,f=d&8191,p=(1<<n)-1,m=i.p||new jo(32768),g=i.h||new jo(p+1),b=Math.ceil(n/3),v=2*b,w=function(K){return(t[K]^t[K+1]<<b^t[K+2]<<v)&p},_=new u8(25e3),S=new jo(288),E=new jo(32),k=0,x=0,I=i.i||0,R=0,C=i.w||0,T=0;I+2<o;++I){var O=w(I),P=I&32767,U=g[O];if(m[P]=U,g[O]=P,C<=I){var ee=o-I;if((k>7e3||R>24576)&&(ee>423||!c)){u=xH(t,l,0,_,S,E,x,R,T,I-T,u),R=k=x=0,T=I;for(var X=0;X<286;++X)S[X]=0;for(var X=0;X<30;++X)E[X]=0}var Z=2,F=0,M=f,G=P-U&32767;if(ee>2&&O==w(I-G))for(var D=Math.min(h,ee)-1,j=Math.min(32767,I),W=Math.min(258,ee);G<=j&&--M&&P!=U;){if(t[I+Z]==t[I+Z-G]){for(var q=0;q<W&&t[I+q]==t[I+q-G];++q);if(q>Z){if(Z=q,F=G,q>D)break;for(var ne=Math.min(G,q-2),te=0,X=0;X<ne;++X){var Y=I-G+X&32767,de=m[Y],Se=Y-de&32767;Se>te&&(te=Se,U=Y)}}}P=U,U=m[P],G+=P-U&32767}if(F){_[R++]=268435456|UR[Z]<<18|vH[F];var xe=UR[Z]&31,Ae=vH[F]&31;x+=sT[xe]+iT[Ae],++S[257+xe],++E[Ae],C=I+Z,++k}else _[R++]=t[I],++S[t[I]]}}for(I=Math.max(I,C);I<o;++I)_[R++]=t[I],++S[t[I]];u=xH(t,l,c,_,S,E,x,R,T,I-T,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=g,i.p=m,i.i=I,i.w=C)}else{for(var I=i.w||0;I<o+c;I+=65535){var Pe=I+65535;Pe>=o&&(l[u/8|0]=c,Pe=o),u=Uce(l,u+1,t.subarray(I,Pe))}i.i=o}return $ce(a,0,r+d8(u)+s)},zce=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,i=n.length|0,o=0;o!=i;){for(var a=Math.min(o+2655,i);o<a;++o)s+=r+=n[o];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},hJe=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new ui(i.length+t.length);o.set(i),o.set(t,i.length),t=o,s.w=i.length}return dJe(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},Vce=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},fJe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=zce();s.p(e.dictionary),Vce(t,2,s.d())}},pJe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&rl(6,"invalid zlib data"),(t[1]>>5&1)==1&&rl(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function VR(t,e){e||(e={});var n=zce();n.p(t);var r=hJe(t,e,e.dictionary?6:2,4);return fJe(r,e),Vce(r,r.length-4,n.d()),r}function mJe(t,e){return cJe(t.subarray(pJe(t),-4),{i:2},e,e)}var gJe=typeof TextDecoder<"u"&&new TextDecoder,bJe=0;try{gJe.decode(Hce,{stream:!0}),bJe=1}catch{}var qt=function(){return typeof window<"u"?window:typeof FF<"u"?FF:typeof self<"u"?self:this}();function gP(){qt.console&&typeof qt.console.log=="function"&&qt.console.log.apply(qt.console,arguments)}var rr={log:gP,warn:function(t){qt.console&&(typeof qt.console.warn=="function"?qt.console.warn.apply(qt.console,arguments):gP.call(null,arguments))},error:function(t){qt.console&&(typeof qt.console.error=="function"?qt.console.error.apply(qt.console,arguments):gP(t))}};function bP(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ff(r.response,e,n)},r.onerror=function(){rr.error("could not download file")},r.send()}function _H(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function g2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Fv,WR,ff=qt.saveAs||((typeof window>"u"?"undefined":Yn(window))!=="object"||window!==qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=qt.URL||qt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?_H(s.href)?bP(t,e,n):g2(s,s.target="_blank"):g2(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){g2(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(_H(t))bP(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){g2(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Yn(i)!=="object"&&(rr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return bP(t,e,n);var s=t.type==="application/octet-stream",i=/constructor/i.test(qt.HTMLElement)||qt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Yn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(t)}else{var l=qt.URL||qt.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Wce(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,i=n[r].process,o=s.exec(t);o&&(e=i(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function yP(t,e){var n=t[0],r=t[1],s=t[2],i=t[3];n=ti(n,r,s,i,e[0],7,-680876936),i=ti(i,n,r,s,e[1],12,-389564586),s=ti(s,i,n,r,e[2],17,606105819),r=ti(r,s,i,n,e[3],22,-1044525330),n=ti(n,r,s,i,e[4],7,-176418897),i=ti(i,n,r,s,e[5],12,1200080426),s=ti(s,i,n,r,e[6],17,-1473231341),r=ti(r,s,i,n,e[7],22,-45705983),n=ti(n,r,s,i,e[8],7,1770035416),i=ti(i,n,r,s,e[9],12,-1958414417),s=ti(s,i,n,r,e[10],17,-42063),r=ti(r,s,i,n,e[11],22,-1990404162),n=ti(n,r,s,i,e[12],7,1804603682),i=ti(i,n,r,s,e[13],12,-40341101),s=ti(s,i,n,r,e[14],17,-1502002290),n=ni(n,r=ti(r,s,i,n,e[15],22,1236535329),s,i,e[1],5,-165796510),i=ni(i,n,r,s,e[6],9,-1069501632),s=ni(s,i,n,r,e[11],14,643717713),r=ni(r,s,i,n,e[0],20,-373897302),n=ni(n,r,s,i,e[5],5,-701558691),i=ni(i,n,r,s,e[10],9,38016083),s=ni(s,i,n,r,e[15],14,-660478335),r=ni(r,s,i,n,e[4],20,-405537848),n=ni(n,r,s,i,e[9],5,568446438),i=ni(i,n,r,s,e[14],9,-1019803690),s=ni(s,i,n,r,e[3],14,-187363961),r=ni(r,s,i,n,e[8],20,1163531501),n=ni(n,r,s,i,e[13],5,-1444681467),i=ni(i,n,r,s,e[2],9,-51403784),s=ni(s,i,n,r,e[7],14,1735328473),n=ri(n,r=ni(r,s,i,n,e[12],20,-1926607734),s,i,e[5],4,-378558),i=ri(i,n,r,s,e[8],11,-2022574463),s=ri(s,i,n,r,e[11],16,1839030562),r=ri(r,s,i,n,e[14],23,-35309556),n=ri(n,r,s,i,e[1],4,-1530992060),i=ri(i,n,r,s,e[4],11,1272893353),s=ri(s,i,n,r,e[7],16,-155497632),r=ri(r,s,i,n,e[10],23,-1094730640),n=ri(n,r,s,i,e[13],4,681279174),i=ri(i,n,r,s,e[0],11,-358537222),s=ri(s,i,n,r,e[3],16,-722521979),r=ri(r,s,i,n,e[6],23,76029189),n=ri(n,r,s,i,e[9],4,-640364487),i=ri(i,n,r,s,e[12],11,-421815835),s=ri(s,i,n,r,e[15],16,530742520),n=si(n,r=ri(r,s,i,n,e[2],23,-995338651),s,i,e[0],6,-198630844),i=si(i,n,r,s,e[7],10,1126891415),s=si(s,i,n,r,e[14],15,-1416354905),r=si(r,s,i,n,e[5],21,-57434055),n=si(n,r,s,i,e[12],6,1700485571),i=si(i,n,r,s,e[3],10,-1894986606),s=si(s,i,n,r,e[10],15,-1051523),r=si(r,s,i,n,e[1],21,-2054922799),n=si(n,r,s,i,e[8],6,1873313359),i=si(i,n,r,s,e[15],10,-30611744),s=si(s,i,n,r,e[6],15,-1560198380),r=si(r,s,i,n,e[13],21,1309151649),n=si(n,r,s,i,e[4],6,-145523070),i=si(i,n,r,s,e[11],10,-1120210379),s=si(s,i,n,r,e[2],15,718787259),r=si(r,s,i,n,e[9],21,-343485551),t[0]=Hd(n,t[0]),t[1]=Hd(r,t[1]),t[2]=Hd(s,t[2]),t[3]=Hd(i,t[3])}function oT(t,e,n,r,s,i){return e=Hd(Hd(e,t),Hd(r,i)),Hd(e<<s|e>>>32-s,n)}function ti(t,e,n,r,s,i,o){return oT(e&n|~e&r,t,e,s,i,o)}function ni(t,e,n,r,s,i,o){return oT(e&r|n&~r,t,e,s,i,o)}function ri(t,e,n,r,s,i,o){return oT(e^n^r,t,e,s,i,o)}function si(t,e,n,r,s,i,o){return oT(n^(e|~r),t,e,s,i,o)}function Gce(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)yP(r,yJe(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(yP(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,yP(r,s),r}function yJe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Fv=qt.atob.bind(qt),WR=qt.btoa.bind(qt);var SH="0123456789abcdef".split("");function vJe(t){for(var e="",n=0;n<4;n++)e+=SH[t>>8*n+4&15]+SH[t>>8*n&15];return e}function wJe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function GR(t){return Gce(t).map(wJe).join("")}var xJe=function(t){for(var e=0;e<t.length;e++)t[e]=vJe(t[e]);return t.join("")}(Gce("hello"))!="5d41402abc4b2a76b9719d911017c592";function Hd(t,e){if(xJe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function qR(t,e){var n,r,s,i;if(t!==n){for(var o=(s=t,i=1+(256/t.length>>0),new Array(i+1).join(s)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,r=a}else a=r;var d=e.length,h=0,f=0,p="";for(l=0;l<d;l++)f=(f+(u=a[h=(h+1)%256]))%256,a[h]=a[f],a[f]=u,o=a[(a[h]+a[f])%256],p+=String.fromCharCode(e.charCodeAt(l)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var EH={print:4,modify:8,copy:16,"annot-forms":32};function Xm(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(a){if(EH.perm!==void 0)throw new Error("Invalid permission: "+a);s+=EH[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=GR(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=qR(this.encryptionKey,this.padding)}function Zm(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function kH(t){if(Yn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var i=Math.random().toString(35);return e[n][i]=[r,!!s],i},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[n]){var o=e[n][i];try{o[0].apply(t,r)}catch(a){qt.console&&rr.error("jsPDF PubSub Error",a.message,a)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Hk(t){if(!(this instanceof Hk))return new Hk(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function qce(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function xf(t,e,n,r,s){if(!(this instanceof xf))return new xf(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,qce.call(this,r,s)}function fg(t,e,n,r,s){if(!(this instanceof fg))return new fg(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,qce.call(this,r,s)}function Vt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],o=[],a=1,l=16,c="S",u=null;Yn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=kH;var p="1.3",m=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(B){p=B};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var b=f.__private__.getPageFormat=function(B){return g[B]};s=s||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},w=v.COMPAT;function _(){this.saveGraphicsState(),re(new Wt(z,0,0,-z,0,rd()*z).toString()+" cm"),this.setFontSize(this.getFontSize()/z),c="n",w=v.ADVANCED}function S(){this.restoreGraphicsState(),c="S",w=v.COMPAT}var E=f.__private__.combineFontStyleAndFontWeight=function(B,ae){if(B=="bold"&&ae=="normal"||B=="bold"&&ae==400||B=="normal"&&ae=="italic"||B=="bold"&&ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ae&&(B=ae==400||ae==="normal"?B==="italic"?"italic":"normal":ae!=700&&ae!=="bold"||B!=="normal"?(ae==700?"bold":ae)+""+B:"bold"),B};f.advancedAPI=function(B){var ae=w===v.COMPAT;return ae&&_.call(this),typeof B!="function"||(B(this),ae&&S.call(this)),this},f.compatAPI=function(B){var ae=w===v.ADVANCED;return ae&&S.call(this),typeof B!="function"||(B(this),ae&&_.call(this)),this},f.isAdvancedAPI=function(){return w===v.ADVANCED};var k,x=function(B){if(w!==v.ADVANCED)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=f.roundToPrecision=f.__private__.roundToPrecision=function(B,ae){var Ee=e||ae;if(isNaN(B)||isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(Ee).replace(/0+$/,"")};k=f.hpf=f.__private__.hpf=typeof l=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,l)}:l==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,16)};var R=f.f2=f.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return I(B,2)},C=f.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return I(B,3)},T=f.scale=f.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return w===v.COMPAT?B*z:w===v.ADVANCED?B:void 0},O=function(B){return w===v.COMPAT?rd()-B:w===v.ADVANCED?B:void 0},P=function(B){return T(O(B))};f.__private__.setPrecision=f.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(e=parseInt(B,10))};var U,ee="00000000000000000000000000000000",X=f.__private__.getFileId=function(){return ee},Z=f.__private__.setFileId=function(B){return ee=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Qs=new Xm(u.userPermissions,u.userPassword,u.ownerPassword,ee)),ee};f.setFileId=function(B){return Z(B),this},f.getFileId=function(){return X()};var F=f.__private__.convertDateToPDFDate=function(B){var ae=B.getTimezoneOffset(),Ee=ae<0?"+":"-",Re=Math.floor(Math.abs(ae/60)),ze=Math.abs(ae%60),et=[Ee,W(Re),"'",W(ze),"'"].join("");return["D:",B.getFullYear(),W(B.getMonth()+1),W(B.getDate()),W(B.getHours()),W(B.getMinutes()),W(B.getSeconds()),et].join("")},M=f.__private__.convertPDFDateToDate=function(B){var ae=parseInt(B.substr(2,4),10),Ee=parseInt(B.substr(6,2),10)-1,Re=parseInt(B.substr(8,2),10),ze=parseInt(B.substr(10,2),10),et=parseInt(B.substr(12,2),10),dt=parseInt(B.substr(14,2),10);return new Date(ae,Ee,Re,ze,et,dt,0)},G=f.__private__.setCreationDate=function(B){var ae;if(B===void 0&&(B=new Date),B instanceof Date)ae=F(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ae=B}return U=ae},D=f.__private__.getCreationDate=function(B){var ae=U;return B==="jsDate"&&(ae=M(U)),ae};f.setCreationDate=function(B){return G(B),this},f.getCreationDate=function(B){return D(B)};var j,W=f.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},q=f.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},ne=0,te=[],Y=[],de=0,Se=[],xe=[],Ae=!1,Pe=Y,K=function(){ne=0,de=0,Y=[],te=[],Se=[],Wc=Xr(),za=Xr()};f.__private__.setCustomOutputDestination=function(B){Ae=!0,Pe=B};var ge=function(B){Ae||(Pe=B)};f.__private__.resetCustomOutputDestination=function(){Ae=!1,Pe=Y};var re=f.__private__.out=function(B){return B=B.toString(),de+=B.length+1,Pe.push(B),Pe},le=f.__private__.write=function(B){return re(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},se=f.__private__.getArrayBuffer=function(B){for(var ae=B.length,Ee=new ArrayBuffer(ae),Re=new Uint8Array(Ee);ae--;)Re[ae]=B.charCodeAt(ae);return Ee},fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return fe};var Ce=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(B){return Ce=w===v.ADVANCED?B/z:B,this};var Ie,we=f.__private__.getFontSize=f.getFontSize=function(){return w===v.COMPAT?Ce:Ce*z},Ue=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(B){return Ue=B,this},f.__private__.getR2L=f.getR2L=function(){return Ue};var Fe,Be=f.__private__.setZoomMode=function(B){var ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))Ie=B;else if(isNaN(B)){if(ae.indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');Ie=B}else Ie=parseInt(B,10)};f.__private__.getZoomMode=function(){return Ie};var ke,Je=f.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');Fe=B};f.__private__.getPageMode=function(){return Fe};var Xe=f.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');ke=B};f.__private__.getLayoutMode=function(){return ke},f.__private__.setDisplayMode=f.setDisplayMode=function(B,ae,Ee){return Be(B),Xe(ae),Je(Ee),this};var nt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(B){if(Object.keys(nt).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return nt[B]},f.__private__.getDocumentProperties=function(){return nt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(B){for(var ae in nt)nt.hasOwnProperty(ae)&&B[ae]&&(nt[ae]=B[ae]);return this},f.__private__.setDocumentProperty=function(B,ae){if(Object.keys(nt).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return nt[B]=ae};var ie,z,J,pe,Oe,He={},Ge={},$t=[],Lt={},kn={},Yt={},rn={},xi=null,er=0,Zt=[],zn=new kH(f),Bh=t.hotfixes||[],Ds={},Tl={},Pl=[],Wt=function B(ae,Ee,Re,ze,et,dt){if(!(this instanceof B))return new B(ae,Ee,Re,ze,et,dt);isNaN(ae)&&(ae=1),isNaN(Ee)&&(Ee=0),isNaN(Re)&&(Re=0),isNaN(ze)&&(ze=1),isNaN(et)&&(et=0),isNaN(dt)&&(dt=0),this._matrix=[ae,Ee,Re,ze,et,dt]};Object.defineProperty(Wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Wt.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(B)},Wt.prototype.multiply=function(B){var ae=B.sx*this.sx+B.shy*this.shx,Ee=B.sx*this.shy+B.shy*this.sy,Re=B.shx*this.sx+B.sy*this.shx,ze=B.shx*this.shy+B.sy*this.sy,et=B.tx*this.sx+B.ty*this.shx+this.tx,dt=B.tx*this.shy+B.ty*this.sy+this.ty;return new Wt(ae,Ee,Re,ze,et,dt)},Wt.prototype.decompose=function(){var B=this.sx,ae=this.shy,Ee=this.shx,Re=this.sy,ze=this.tx,et=this.ty,dt=Math.sqrt(B*B+ae*ae),At=(B/=dt)*Ee+(ae/=dt)*Re;Ee-=B*At,Re-=ae*At;var Ht=Math.sqrt(Ee*Ee+Re*Re);return At/=Ht,B*(Re/=Ht)<ae*(Ee/=Ht)&&(B=-B,ae=-ae,At=-At,dt=-dt),{scale:new Wt(dt,0,0,Ht,0,0),translate:new Wt(1,0,0,1,ze,et),rotate:new Wt(B,ae,-ae,B,0,0),skew:new Wt(1,0,At,1,0,0)}},Wt.prototype.toString=function(B){return this.join(" ")},Wt.prototype.inversed=function(){var B=this.sx,ae=this.shy,Ee=this.shx,Re=this.sy,ze=this.tx,et=this.ty,dt=1/(B*Re-ae*Ee),At=Re*dt,Ht=-ae*dt,tn=-Ee*dt,Qt=B*dt;return new Wt(At,Ht,tn,Qt,-At*ze-tn*et,-Ht*ze-Qt*et)},Wt.prototype.applyToPoint=function(B){var ae=B.x*this.sx+B.y*this.shx+this.tx,Ee=B.x*this.shy+B.y*this.sy+this.ty;return new pm(ae,Ee)},Wt.prototype.applyToRectangle=function(B){var ae=this.applyToPoint(B),Ee=this.applyToPoint(new pm(B.x+B.w,B.y+B.h));return new $b(ae.x,ae.y,Ee.x-ae.x,Ee.y-ae.y)},Wt.prototype.clone=function(){var B=this.sx,ae=this.shy,Ee=this.shx,Re=this.sy,ze=this.tx,et=this.ty;return new Wt(B,ae,Ee,Re,ze,et)},f.Matrix=Wt;var Ha=f.matrixMult=function(B,ae){return ae.multiply(B)},Nl=new Wt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Nl;var zi=function(B,ae){if(!kn[B]){var Ee=(ae instanceof xf?"Sh":"P")+(Object.keys(Lt).length+1).toString(10);ae.id=Ee,kn[B]=Ee,Lt[Ee]=ae,zn.publish("addPattern",ae)}};f.ShadingPattern=xf,f.TilingPattern=fg,f.addShadingPattern=function(B,ae){return x("addShadingPattern()"),zi(B,ae),this},f.beginTilingPattern=function(B){x("beginTilingPattern()"),i_(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},f.endTilingPattern=function(B,ae){x("endTilingPattern()"),ae.stream=xe[j].join(`
`),zi(B,ae),zn.publish("endTilingPattern",ae),Pl.pop().restore()};var us=f.__private__.newObject=function(){var B=Xr();return xo(B,!0),B},Xr=f.__private__.newObjectDeferred=function(){return ne++,te[ne]=function(){return de},ne},xo=function(B,ae){return ae=typeof ae=="boolean"&&ae,te[B]=de,ae&&re(B+" 0 obj"),B},tm=f.__private__.newAdditionalObject=function(){var B={objId:Xr(),content:""};return Se.push(B),B},Wc=Xr(),za=Xr(),Va=f.__private__.decodeColorString=function(B){var ae=B.split(" ");if(ae.length!==2||ae[1]!=="g"&&ae[1]!=="G")ae.length===5&&(ae[4]==="k"||ae[4]==="K")&&(ae=[(1-ae[0])*(1-ae[3]),(1-ae[1])*(1-ae[3]),(1-ae[2])*(1-ae[3]),"r"]);else{var Ee=parseFloat(ae[0]);ae=[Ee,Ee,Ee,"r"]}for(var Re="#",ze=0;ze<3;ze++)Re+=("0"+Math.floor(255*parseFloat(ae[ze])).toString(16)).slice(-2);return Re},Wa=f.__private__.encodeColorString=function(B){var ae;typeof B=="string"&&(B={ch1:B});var Ee=B.ch1,Re=B.ch2,ze=B.ch3,et=B.ch4,dt=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ee=="string"&&Ee.charAt(0)!=="#"){var At=new Wce(Ee);if(At.ok)Ee=At.toHex();else if(!/^\d*\.?\d*$/.test(Ee))throw new Error('Invalid color "'+Ee+'" passed to jsPDF.encodeColorString.')}if(typeof Ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ee)&&(Ee="#"+Ee[1]+Ee[1]+Ee[2]+Ee[2]+Ee[3]+Ee[3]),typeof Ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ee)){var Ht=parseInt(Ee.substr(1),16);Ee=Ht>>16&255,Re=Ht>>8&255,ze=255&Ht}if(Re===void 0||et===void 0&&Ee===Re&&Re===ze)if(typeof Ee=="string")ae=Ee+" "+dt[0];else switch(B.precision){case 2:ae=R(Ee/255)+" "+dt[0];break;case 3:default:ae=C(Ee/255)+" "+dt[0]}else if(et===void 0||Yn(et)==="object"){if(et&&!isNaN(et.a)&&et.a===0)return ae=["1.","1.","1.",dt[1]].join(" ");if(typeof Ee=="string")ae=[Ee,Re,ze,dt[1]].join(" ");else switch(B.precision){case 2:ae=[R(Ee/255),R(Re/255),R(ze/255),dt[1]].join(" ");break;default:case 3:ae=[C(Ee/255),C(Re/255),C(ze/255),dt[1]].join(" ")}}else if(typeof Ee=="string")ae=[Ee,Re,ze,et,dt[2]].join(" ");else switch(B.precision){case 2:ae=[R(Ee),R(Re),R(ze),R(et),dt[2]].join(" ");break;case 3:default:ae=[C(Ee),C(Re),C(ze),C(et),dt[2]].join(" ")}return ae},Il=f.__private__.getFilters=function(){return o},Zo=f.__private__.putStream=function(B){var ae=(B=B||{}).data||"",Ee=B.filters||Il(),Re=B.alreadyAppliedFilters||[],ze=B.addLength1||!1,et=ae.length,dt=B.objectId,At=function(ei){return ei};if(u!==null&&dt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(At=Qs.encryptor(dt,0));var Ht={};Ee===!0&&(Ee=["FlateEncode"]);var tn=B.additionalKeyValues||[],Qt=(Ht=Vt.API.processDataByFilters!==void 0?Vt.API.processDataByFilters(ae,Ee):{data:ae,reverseChain:[]}).reverseChain+(Array.isArray(Re)?Re.join(" "):Re.toString());if(Ht.data.length!==0&&(tn.push({key:"Length",value:Ht.data.length}),ze===!0&&tn.push({key:"Length1",value:et})),Qt.length!=0)if(Qt.split("/").length-1==1)tn.push({key:"Filter",value:Qt});else{tn.push({key:"Filter",value:"["+Qt+"]"});for(var Cn=0;Cn<tn.length;Cn+=1)if(tn[Cn].key==="DecodeParms"){for(var Cr=[],Ir=0;Ir<Ht.reverseChain.split("/").length-1;Ir+=1)Cr.push("null");Cr.push(tn[Cn].value),tn[Cn].value="["+Cr.join(" ")+"]"}}re("<<");for(var Zr=0;Zr<tn.length;Zr++)re("/"+tn[Zr].key+" "+tn[Zr].value);re(">>"),Ht.data.length!==0&&(re("stream"),re(At(Ht.data)),re("endstream"))},Rl=f.__private__.putPage=function(B){var ae=B.number,Ee=B.data,Re=B.objId,ze=B.contentsObjId;xo(Re,!0),re("<</Type /Page"),re("/Parent "+B.rootDictionaryObjId+" 0 R"),re("/Resources "+B.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(k(B.mediaBox.bottomLeftX))+" "+parseFloat(k(B.mediaBox.bottomLeftY))+" "+k(B.mediaBox.topRightX)+" "+k(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&re("/CropBox ["+k(B.cropBox.bottomLeftX)+" "+k(B.cropBox.bottomLeftY)+" "+k(B.cropBox.topRightX)+" "+k(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&re("/BleedBox ["+k(B.bleedBox.bottomLeftX)+" "+k(B.bleedBox.bottomLeftY)+" "+k(B.bleedBox.topRightX)+" "+k(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&re("/TrimBox ["+k(B.trimBox.bottomLeftX)+" "+k(B.trimBox.bottomLeftY)+" "+k(B.trimBox.topRightX)+" "+k(B.trimBox.topRightY)+"]"),B.artBox!==null&&re("/ArtBox ["+k(B.artBox.bottomLeftX)+" "+k(B.artBox.bottomLeftY)+" "+k(B.artBox.topRightX)+" "+k(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&re("/UserUnit "+B.userUnit),zn.publish("putPage",{objId:Re,pageContext:Zt[ae],pageNumber:ae,page:Ee}),re("/Contents "+ze+" 0 R"),re(">>"),re("endobj");var et=Ee.join(`
`);return w===v.ADVANCED&&(et+=`
Q`),xo(ze,!0),Zo({data:et,filters:Il(),objectId:ze}),re("endobj"),Re},$h=f.__private__.putPages=function(){var B,ae,Ee=[];for(B=1;B<=er;B++)Zt[B].objId=Xr(),Zt[B].contentsObjId=Xr();for(B=1;B<=er;B++)Ee.push(Rl({number:B,data:xe[B],objId:Zt[B].objId,contentsObjId:Zt[B].contentsObjId,mediaBox:Zt[B].mediaBox,cropBox:Zt[B].cropBox,bleedBox:Zt[B].bleedBox,trimBox:Zt[B].trimBox,artBox:Zt[B].artBox,userUnit:Zt[B].userUnit,rootDictionaryObjId:Wc,resourceDictionaryObjId:za}));xo(Wc,!0),re("<</Type /Pages");var Re="/Kids [";for(ae=0;ae<er;ae++)Re+=Ee[ae]+" 0 R ";re(Re+"]"),re("/Count "+er),re(">>"),re("endobj"),zn.publish("postPutPages")},nm=function(B){zn.publish("putFont",{font:B,out:re,newObject:us,putStream:Zo}),B.isAlreadyPutted!==!0&&(B.objectNumber=us(),re("<<"),re("/Type /Font"),re("/BaseFont /"+Zm(B.postScriptName)),re("/Subtype /Type1"),typeof B.encoding=="string"&&re("/Encoding /"+B.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},rm=function(){for(var B in He)He.hasOwnProperty(B)&&(d===!1||d===!0&&h.hasOwnProperty(B))&&nm(He[B])},sm=function(B){B.objectNumber=us();var ae=[];ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Form"}),ae.push({key:"BBox",value:"["+[k(B.x),k(B.y),k(B.x+B.width),k(B.y+B.height)].join(" ")+"]"}),ae.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var Ee=B.pages[1].join(`
`);Zo({data:Ee,additionalKeyValues:ae,objectId:B.objectNumber}),re("endobj")},im=function(){for(var B in Ds)Ds.hasOwnProperty(B)&&sm(Ds[B])},Ux=function(B,ae){var Ee,Re=[],ze=1/(ae-1);for(Ee=0;Ee<1;Ee+=ze)Re.push(Ee);if(Re.push(1),B[0].offset!=0){var et={offset:0,color:B[0].color};B.unshift(et)}if(B[B.length-1].offset!=1){var dt={offset:1,color:B[B.length-1].color};B.push(dt)}for(var At="",Ht=0,tn=0;tn<Re.length;tn++){for(Ee=Re[tn];Ee>B[Ht+1].offset;)Ht++;var Qt=B[Ht].offset,Cn=(Ee-Qt)/(B[Ht+1].offset-Qt),Cr=B[Ht].color,Ir=B[Ht+1].color;At+=q(Math.round((1-Cn)*Cr[0]+Cn*Ir[0]).toString(16))+q(Math.round((1-Cn)*Cr[1]+Cn*Ir[1]).toString(16))+q(Math.round((1-Cn)*Cr[2]+Cn*Ir[2]).toString(16))}return At.trim()},ZT=function(B,ae){ae||(ae=21);var Ee=us(),Re=Ux(B.colors,ae),ze=[];ze.push({key:"FunctionType",value:"0"}),ze.push({key:"Domain",value:"[0.0 1.0]"}),ze.push({key:"Size",value:"["+ae+"]"}),ze.push({key:"BitsPerSample",value:"8"}),ze.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ze.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Zo({data:Re,additionalKeyValues:ze,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ee}),re("endobj"),B.objectNumber=us(),re("<< /ShadingType "+B.type),re("/ColorSpace /DeviceRGB");var et="/Coords ["+k(parseFloat(B.coords[0]))+" "+k(parseFloat(B.coords[1]))+" ";B.type===2?et+=k(parseFloat(B.coords[2]))+" "+k(parseFloat(B.coords[3])):et+=k(parseFloat(B.coords[2]))+" "+k(parseFloat(B.coords[3]))+" "+k(parseFloat(B.coords[4]))+" "+k(parseFloat(B.coords[5])),re(et+="]"),B.matrix&&re("/Matrix ["+B.matrix.toString()+"]"),re("/Function "+Ee+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},QT=function(B,ae){var Ee=Xr(),Re=us();ae.push({resourcesOid:Ee,objectOid:Re}),B.objectNumber=Re;var ze=[];ze.push({key:"Type",value:"/Pattern"}),ze.push({key:"PatternType",value:"1"}),ze.push({key:"PaintType",value:"1"}),ze.push({key:"TilingType",value:"1"}),ze.push({key:"BBox",value:"["+B.boundingBox.map(k).join(" ")+"]"}),ze.push({key:"XStep",value:k(B.xStep)}),ze.push({key:"YStep",value:k(B.yStep)}),ze.push({key:"Resources",value:Ee+" 0 R"}),B.matrix&&ze.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),Zo({data:B.stream,additionalKeyValues:ze,objectId:B.objectNumber}),re("endobj")},om=function(B){var ae;for(ae in Lt)Lt.hasOwnProperty(ae)&&(Lt[ae]instanceof xf?ZT(Lt[ae]):Lt[ae]instanceof fg&&QT(Lt[ae],B))},Hx=function(B){for(var ae in B.objectNumber=us(),re("<<"),B)switch(ae){case"opacity":re("/ca "+R(B[ae]));break;case"stroke-opacity":re("/CA "+R(B[ae]))}re(">>"),re("endobj")},e5=function(){var B;for(B in Yt)Yt.hasOwnProperty(B)&&Hx(Yt[B])},Nb=function(){for(var B in re("/XObject <<"),Ds)Ds.hasOwnProperty(B)&&Ds[B].objectNumber>=0&&re("/"+B+" "+Ds[B].objectNumber+" 0 R");zn.publish("putXobjectDict"),re(">>")},t5=function(){Qs.oid=us(),re("<<"),re("/Filter /Standard"),re("/V "+Qs.v),re("/R "+Qs.r),re("/U <"+Qs.toHexString(Qs.U)+">"),re("/O <"+Qs.toHexString(Qs.O)+">"),re("/P "+Qs.P),re(">>"),re("endobj")},zx=function(){for(var B in re("/Font <<"),He)He.hasOwnProperty(B)&&(d===!1||d===!0&&h.hasOwnProperty(B))&&re("/"+B+" "+He[B].objectNumber+" 0 R");re(">>")},n5=function(){if(Object.keys(Lt).length>0){for(var B in re("/Shading <<"),Lt)Lt.hasOwnProperty(B)&&Lt[B]instanceof xf&&Lt[B].objectNumber>=0&&re("/"+B+" "+Lt[B].objectNumber+" 0 R");zn.publish("putShadingPatternDict"),re(">>")}},am=function(B){if(Object.keys(Lt).length>0){for(var ae in re("/Pattern <<"),Lt)Lt.hasOwnProperty(ae)&&Lt[ae]instanceof f.TilingPattern&&Lt[ae].objectNumber>=0&&Lt[ae].objectNumber<B&&re("/"+ae+" "+Lt[ae].objectNumber+" 0 R");zn.publish("putTilingPatternDict"),re(">>")}},r5=function(){if(Object.keys(Yt).length>0){var B;for(B in re("/ExtGState <<"),Yt)Yt.hasOwnProperty(B)&&Yt[B].objectNumber>=0&&re("/"+B+" "+Yt[B].objectNumber+" 0 R");zn.publish("putGStateDict"),re(">>")}},jr=function(B){xo(B.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),zx(),n5(),am(B.objectOid),r5(),Nb(),re(">>"),re("endobj")},Vx=function(){var B=[];rm(),e5(),im(),om(B),zn.publish("putResources"),B.forEach(jr),jr({resourcesOid:za,objectOid:Number.MAX_SAFE_INTEGER}),zn.publish("postPutResources")},Wx=function(){zn.publish("putAdditionalObjects");for(var B=0;B<Se.length;B++){var ae=Se[B];xo(ae.objId,!0),re(ae.content),re("endobj")}zn.publish("postPutAdditionalObjects")},Gx=function(B){Ge[B.fontName]=Ge[B.fontName]||{},Ge[B.fontName][B.fontStyle]=B.id},Ib=function(B,ae,Ee,Re,ze){var et={id:"F"+(Object.keys(He).length+1).toString(10),postScriptName:B,fontName:ae,fontStyle:Ee,encoding:Re,isStandardFont:ze||!1,metadata:{}};return zn.publish("addFont",{font:et,instance:this}),He[et.id]=et,Gx(et),et.id},s5=function(B){for(var ae=0,Ee=fe.length;ae<Ee;ae++){var Re=Ib.call(this,B[ae][0],B[ae][1],B[ae][2],fe[ae][3],!0);d===!1&&(h[Re]=!0);var ze=B[ae][0].split("-");Gx({id:Re,fontName:ze[0],fontStyle:ze[1]||""})}zn.publish("addFonts",{fonts:He,dictionary:Ge})},Ga=function(B){return B.foo=function(){try{return B.apply(this,arguments)}catch(Re){var ae=Re.stack||"";~ae.indexOf(" at ")&&(ae=ae.split(" at ")[1]);var Ee="Error in function "+ae.split(`
`)[0].split("<")[0]+": "+Re.message;if(!qt.console)throw new Error(Ee);qt.console.error(Ee,Re),qt.alert&&alert(Ee)}},B.foo.bar=B,B.foo},lm=function(B,ae){var Ee,Re,ze,et,dt,At,Ht,tn,Qt;if(ze=(ae=ae||{}).sourceEncoding||"Unicode",dt=ae.outputEncoding,(ae.autoencode||dt)&&He[ie].metadata&&He[ie].metadata[ze]&&He[ie].metadata[ze].encoding&&(et=He[ie].metadata[ze].encoding,!dt&&He[ie].encoding&&(dt=He[ie].encoding),!dt&&et.codePages&&(dt=et.codePages[0]),typeof dt=="string"&&(dt=et[dt]),dt)){for(Ht=!1,At=[],Ee=0,Re=B.length;Ee<Re;Ee++)(tn=dt[B.charCodeAt(Ee)])?At.push(String.fromCharCode(tn)):At.push(B[Ee]),At[Ee].charCodeAt(0)>>8&&(Ht=!0);B=At.join("")}for(Ee=B.length;Ht===void 0&&Ee!==0;)B.charCodeAt(Ee-1)>>8&&(Ht=!0),Ee--;if(!Ht)return B;for(At=ae.noBOM?[]:[254,255],Ee=0,Re=B.length;Ee<Re;Ee++){if((Qt=(tn=B.charCodeAt(Ee))>>8)>>8)throw new Error("Character at position "+Ee+" of string '"+B+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");At.push(Qt),At.push(tn-(Qt<<8))}return String.fromCharCode.apply(void 0,At)},Vi=f.__private__.pdfEscape=f.pdfEscape=function(B,ae){return lm(B,ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rb=f.__private__.beginPage=function(B){xe[++er]=[],Zt[er]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},Kx(er),ge(xe[j])},qx=function(B,ae){var Ee,Re,ze;switch(n=ae||n,typeof B=="string"&&(Ee=b(B.toLowerCase()),Array.isArray(Ee)&&(Re=Ee[0],ze=Ee[1])),Array.isArray(B)&&(Re=B[0]*z,ze=B[1]*z),isNaN(Re)&&(Re=s[0],ze=s[1]),(Re>14400||ze>14400)&&(rr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Re=Math.min(14400,Re),ze=Math.min(14400,ze)),s=[Re,ze],n.substr(0,1)){case"l":ze>Re&&(s=[ze,Re]);break;case"p":Re>ze&&(s=[ze,Re])}Rb(s),e_(Mb),re(qa),Fb!==0&&re(Fb+" J"),Bb!==0&&re(Bb+" j"),zn.publish("addPage",{pageNumber:er})},i5=function(B){B>0&&B<=er&&(xe.splice(B,1),Zt.splice(B,1),er--,j>er&&(j=er),this.setPage(j))},Kx=function(B){B>0&&B<=er&&(j=B)},o5=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return xe.length-1},Yx=function(B,ae,Ee){var Re,ze=void 0;return Ee=Ee||{},B=B!==void 0?B:He[ie].fontName,ae=ae!==void 0?ae:He[ie].fontStyle,Re=B.toLowerCase(),Ge[Re]!==void 0&&Ge[Re][ae]!==void 0?ze=Ge[Re][ae]:Ge[B]!==void 0&&Ge[B][ae]!==void 0?ze=Ge[B][ae]:Ee.disableWarning===!1&&rr.warn("Unable to look up font label for font '"+B+"', '"+ae+"'. Refer to getFontList() for available fonts."),ze||Ee.noFallback||(ze=Ge.times[ae])==null&&(ze=Ge.times.normal),ze},a5=f.__private__.putInfo=function(){var B=us(),ae=function(Re){return Re};for(var Ee in u!==null&&(ae=Qs.encryptor(B,0)),re("<<"),re("/Producer ("+Vi(ae("jsPDF "+Vt.version))+")"),nt)nt.hasOwnProperty(Ee)&&nt[Ee]&&re("/"+Ee.substr(0,1).toUpperCase()+Ee.substr(1)+" ("+Vi(ae(nt[Ee]))+")");re("/CreationDate ("+Vi(ae(U))+")"),re(">>"),re("endobj")},Ob=f.__private__.putCatalog=function(B){var ae=(B=B||{}).rootDictionaryObjId||Wc;switch(us(),re("<<"),re("/Type /Catalog"),re("/Pages "+ae+" 0 R"),Ie||(Ie="fullwidth"),Ie){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ee=""+Ie;Ee.substr(Ee.length-1)==="%"&&(Ie=parseInt(Ie)/100),typeof Ie=="number"&&re("/OpenAction [3 0 R /XYZ null null "+R(Ie)+"]")}switch(ke||(ke="continuous"),ke){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}Fe&&re("/PageMode /"+Fe),zn.publish("putCatalog"),re(">>"),re("endobj")},l5=f.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(ne+1)),re("/Root "+ne+" 0 R"),re("/Info "+(ne-1)+" 0 R"),u!==null&&re("/Encrypt "+Qs.oid+" 0 R"),re("/ID [ <"+ee+"> <"+ee+"> ]"),re(">>")},c5=f.__private__.putHeader=function(){re("%PDF-"+p),re("%")},u5=f.__private__.putXRef=function(){var B="0000000000";re("xref"),re("0 "+(ne+1)),re("0000000000 65535 f ");for(var ae=1;ae<=ne;ae++)typeof te[ae]=="function"?re((B+te[ae]()).slice(-10)+" 00000 n "):te[ae]!==void 0?re((B+te[ae]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},Gc=f.__private__.buildDocument=function(){K(),ge(Y),zn.publish("buildDocument"),c5(),$h(),Wx(),Vx(),u!==null&&t5(),a5(),Ob();var B=de;return u5(),l5(),re("startxref"),re(""+B),re("%%EOF"),ge(xe[j]),Y.join(`
`)},cm=f.__private__.getBlob=function(B){return new Blob([se(B)],{type:"application/pdf"})},um=f.output=f.__private__.output=Ga(function(B,ae){switch(typeof(ae=ae||{})=="string"?ae={filename:ae}:ae.filename=ae.filename||"generated.pdf",B){case void 0:return Gc();case"save":f.save(ae.filename);break;case"arraybuffer":return se(Gc());case"blob":return cm(Gc());case"bloburi":case"bloburl":if(qt.URL!==void 0&&typeof qt.URL.createObjectURL=="function")return qt.URL&&qt.URL.createObjectURL(cm(Gc()))||void 0;rr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ee="",Re=Gc();try{Ee=WR(Re)}catch{Ee=WR(unescape(encodeURIComponent(Re)))}return"data:application/pdf;filename="+ae.filename+";base64,"+Ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(qt)==="[object Window]"){var ze="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",et=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ae.pdfObjectUrl&&(ze=ae.pdfObjectUrl,et="");var dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ze+'"'+et+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ae)+");<\/script></body></html>",At=qt.open();return At!==null&&At.document.write(dt),At}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(qt)==="[object Window]"){var Ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ae.filename+'" width="500px" height="400px" /></body></html>',tn=qt.open();if(tn!==null){tn.document.write(Ht);var Qt=this;tn.document.documentElement.querySelector("#pdfViewer").onload=function(){tn.document.title=ae.filename,tn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qt.output("bloburl"))}}return tn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ae)+'"></iframe></body></html>',Cr=qt.open();if(Cr!==null&&(Cr.document.write(Cn),Cr.document.title=ae.filename),Cr||typeof safari>"u")return Cr;break;case"datauri":case"dataurl":return qt.document.location.href=this.output("datauristring",ae);default:return null}}),Jx=function(B){return Array.isArray(Bh)===!0&&Bh.indexOf(B)>-1};switch(r){case"pt":z=1;break;case"mm":z=72/25.4;break;case"cm":z=72/2.54;break;case"in":z=72;break;case"px":z=Jx("px_scaling")==1?.75:96/72;break;case"pc":case"em":z=12;break;case"ex":z=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);z=r}var Qs=null;G(),Z();var d5=function(B){return u!==null?Qs.encryptor(B,0):function(ae){return ae}},Xx=f.__private__.getPageInfo=f.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Zt[B].objId,pageNumber:B,pageContext:Zt[B]}},Xt=f.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ae in Zt)if(Zt[ae].objId===B)break;return Xx(ae)},h5=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Zt[j].objId,pageNumber:j,pageContext:Zt[j]}};f.addPage=function(){return qx.apply(this,arguments),this},f.setPage=function(){return Kx.apply(this,arguments),ge.call(this,xe[j]),this},f.insertPage=function(B){return this.addPage(),this.movePage(j,B),this},f.movePage=function(B,ae){var Ee,Re;if(B>ae){Ee=xe[B],Re=Zt[B];for(var ze=B;ze>ae;ze--)xe[ze]=xe[ze-1],Zt[ze]=Zt[ze-1];xe[ae]=Ee,Zt[ae]=Re,this.setPage(ae)}else if(B<ae){Ee=xe[B],Re=Zt[B];for(var et=B;et<ae;et++)xe[et]=xe[et+1],Zt[et]=Zt[et+1];xe[ae]=Ee,Zt[ae]=Re,this.setPage(ae)}return this},f.deletePage=function(){return i5.apply(this,arguments),this},f.__private__.text=f.text=function(B,ae,Ee,Re,ze){var et,dt,At,Ht,tn,Qt,Cn,Cr,Ir,Zr=(Re=Re||{}).scope||this;if(typeof B=="number"&&typeof ae=="number"&&(typeof Ee=="string"||Array.isArray(Ee))){var ei=Ee;Ee=ae,ae=B,B=ei}if(arguments[3]instanceof Wt?(x("The transform parameter of text() with a Matrix value"),Ir=ze):(At=arguments[4],Ht=arguments[5],Yn(Cn=arguments[3])==="object"&&Cn!==null||(typeof At=="string"&&(Ht=At,At=null),typeof Cn=="string"&&(Ht=Cn,Cn=null),typeof Cn=="number"&&(At=Cn,Cn=null),Re={flags:Cn,angle:At,align:Ht})),isNaN(ae)||isNaN(Ee)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return Zr;var xs="",Ka=!1,_o=typeof Re.lineHeightFactor=="number"?Re.lineHeightFactor:Hh,Dl=Zr.internal.scaleFactor;function o_(or){return or=or.split("	").join(Array(Re.TabLen||9).join(" ")),Vi(or,Cn)}function Vb(or){for(var ar,Br=or.concat(),ds=[],Xc=Br.length;Xc--;)typeof(ar=Br.shift())=="string"?ds.push(ar):Array.isArray(or)&&(ar.length===1||ar[1]===void 0&&ar[2]===void 0)?ds.push(ar[0]):ds.push([ar[0],ar[1],ar[2]]);return ds}function Wb(or,ar){var Br;if(typeof or=="string")Br=ar(or)[0];else if(Array.isArray(or)){for(var ds,Xc,Qb=or.concat(),km=[],d_=Qb.length;d_--;)typeof(ds=Qb.shift())=="string"?km.push(ar(ds)[0]):Array.isArray(ds)&&typeof ds[0]=="string"&&(Xc=ar(ds[0],ds[1],ds[2]),km.push([Xc[0],Xc[1],Xc[2]]));Br=km}return Br}var gm=!1,Gb=!0;if(typeof B=="string")gm=!0;else if(Array.isArray(B)){var qb=B.concat();dt=[];for(var bm,Ms=qb.length;Ms--;)(typeof(bm=qb.shift())!="string"||Array.isArray(bm)&&typeof bm[0]!="string")&&(Gb=!1);gm=Gb}if(gm===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var ym=Ce/Zr.internal.scaleFactor,vm=ym*(_o-1);switch(Re.baseline){case"bottom":Ee-=vm;break;case"top":Ee+=ym-vm;break;case"hanging":Ee+=ym-2*vm;break;case"middle":Ee+=ym/2-vm}if((Qt=Re.maxWidth||0)>0&&(typeof B=="string"?B=Zr.splitTextToSize(B,Qt):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(or,ar){return or.concat(Zr.splitTextToSize(ar,Qt))},[]))),et={text:B,x:ae,y:Ee,options:Re,mutex:{pdfEscape:Vi,activeFontKey:ie,fonts:He,activeFontSize:Ce}},zn.publish("preProcessText",et),B=et.text,At=(Re=et.options).angle,!(Ir instanceof Wt)&&At&&typeof At=="number"){At*=Math.PI/180,Re.rotationDirection===0&&(At=-At),w===v.ADVANCED&&(At=-At);var wm=Math.cos(At),Kb=Math.sin(At);Ir=new Wt(wm,Kb,-Kb,wm,0,0)}else At&&At instanceof Wt&&(Ir=At);w!==v.ADVANCED||Ir||(Ir=Nl),(tn=Re.charSpace||fm)!==void 0&&(xs+=k(T(tn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Cr=Re.horizontalScale)!==void 0&&(xs+=k(100*Cr)+` Tz
`),Re.lang;var Wi=-1,_5=Re.renderingMode!==void 0?Re.renderingMode:Re.stroke,Yb=Zr.internal.getCurrentPageInfo().pageContext;switch(_5){case 0:case!1:case"fill":Wi=0;break;case 1:case!0:case"stroke":Wi=1;break;case 2:case"fillThenStroke":Wi=2;break;case 3:case"invisible":Wi=3;break;case 4:case"fillAndAddForClipping":Wi=4;break;case 5:case"strokeAndAddPathForClipping":Wi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wi=6;break;case 7:case"addToPathForClipping":Wi=7}var a_=Yb.usedRenderingMode!==void 0?Yb.usedRenderingMode:-1;Wi!==-1?xs+=Wi+` Tr
`:a_!==-1&&(xs+=`0 Tr
`),Wi!==-1&&(Yb.usedRenderingMode=Wi),Ht=Re.align||"left";var Qo,xm=Ce*_o,l_=Zr.internal.pageSize.getWidth(),c_=He[ie];tn=Re.charSpace||fm,Qt=Re.maxWidth||0,Cn=Object.assign({autoencode:!0,noBOM:!0},Re.flags);var sd=[],Wh=function(or){return Zr.getStringUnitWidth(or,{font:c_,charSpace:tn,fontSize:Ce,doKerning:!1})*Ce/Dl};if(Object.prototype.toString.call(B)==="[object Array]"){var Gi;dt=Vb(B),Ht!=="left"&&(Qo=dt.map(Wh));var _i,id=0;if(Ht==="right"){ae-=Qo[0],B=[],Ms=dt.length;for(var Kc=0;Kc<Ms;Kc++)Kc===0?(_i=Ll(ae),Gi=qc(Ee)):(_i=T(id-Qo[Kc]),Gi=-xm),B.push([dt[Kc],_i,Gi]),id=Qo[Kc]}else if(Ht==="center"){ae-=Qo[0]/2,B=[],Ms=dt.length;for(var Yc=0;Yc<Ms;Yc++)Yc===0?(_i=Ll(ae),Gi=qc(Ee)):(_i=T((id-Qo[Yc])/2),Gi=-xm),B.push([dt[Yc],_i,Gi]),id=Qo[Yc]}else if(Ht==="left"){B=[],Ms=dt.length;for(var _m=0;_m<Ms;_m++)B.push(dt[_m])}else if(Ht==="justify"&&c_.encoding==="Identity-H"){B=[],Ms=dt.length,Qt=Qt!==0?Qt:l_;for(var Jc=0,Fr=0;Fr<Ms;Fr++)if(Gi=Fr===0?qc(Ee):-xm,_i=Fr===0?Ll(ae):Jc,Fr<Ms-1){var Jb=T((Qt-Qo[Fr])/(dt[Fr].split(" ").length-1)),Si=dt[Fr].split(" ");B.push([Si[0]+" ",_i,Gi]),Jc=0;for(var ea=1;ea<Si.length;ea++){var Sm=(Wh(Si[ea-1]+" "+Si[ea])-Wh(Si[ea]))*Dl+Jb;ea==Si.length-1?B.push([Si[ea],Sm,0]):B.push([Si[ea]+" ",Sm,0]),Jc-=Sm}}else B.push([dt[Fr],_i,Gi]);B.push(["",Jc,0])}else{if(Ht!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],Ms=dt.length,Qt=Qt!==0?Qt:l_,Fr=0;Fr<Ms;Fr++)Gi=Fr===0?qc(Ee):-xm,_i=Fr===0?Ll(ae):0,Fr<Ms-1?sd.push(k(T((Qt-Qo[Fr])/(dt[Fr].split(" ").length-1)))):sd.push(0),B.push([dt[Fr],_i,Gi])}}var u_=typeof Re.R2L=="boolean"?Re.R2L:Ue;u_===!0&&(B=Wb(B,function(or,ar,Br){return[or.split("").reverse().join(""),ar,Br]})),et={text:B,x:ae,y:Ee,options:Re,mutex:{pdfEscape:Vi,activeFontKey:ie,fonts:He,activeFontSize:Ce}},zn.publish("postProcessText",et),B=et.text,Ka=et.mutex.isHex||!1;var Xb=He[ie].encoding;Xb!=="WinAnsiEncoding"&&Xb!=="StandardEncoding"||(B=Wb(B,function(or,ar,Br){return[o_(or),ar,Br]})),dt=Vb(B),B=[];for(var Gh,qh,od,Kh=0,Em=1,Yh=Array.isArray(dt[0])?Em:Kh,ad="",Zb=function(or,ar,Br){var ds="";return Br instanceof Wt?(Br=typeof Re.angle=="number"?Ha(Br,new Wt(1,0,0,1,or,ar)):Ha(new Wt(1,0,0,1,or,ar),Br),w===v.ADVANCED&&(Br=Ha(new Wt(1,0,0,-1,0,0),Br)),ds=Br.join(" ")+` Tm
`):ds=k(or)+" "+k(ar)+` Td
`,ds},ta=0;ta<dt.length;ta++){switch(ad="",Yh){case Em:od=(Ka?"<":"(")+dt[ta][0]+(Ka?">":")"),Gh=parseFloat(dt[ta][1]),qh=parseFloat(dt[ta][2]);break;case Kh:od=(Ka?"<":"(")+dt[ta]+(Ka?">":")"),Gh=Ll(ae),qh=qc(Ee)}sd!==void 0&&sd[ta]!==void 0&&(ad=sd[ta]+` Tw
`),ta===0?B.push(ad+Zb(Gh,qh,Ir)+od):Yh===Kh?B.push(ad+od):Yh===Em&&B.push(ad+Zb(Gh,qh,Ir)+od)}B=Yh===Kh?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var na=`BT
/`;return na+=ie+" "+Ce+` Tf
`,na+=k(Ce*_o)+` TL
`,na+=zh+`
`,na+=xs,na+=B,re(na+="ET"),h[ie]=!0,Zr};var f5=f.__private__.clip=f.clip=function(B){return re(B==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return f5("evenodd")},f.__private__.discardPath=f.discardPath=function(){return re("n"),this};var Ol=f.__private__.isValidStyle=function(B){var ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(ae=!0),ae};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(B){return Ol(B)&&(c=B),this};var Zx=f.__private__.getStyle=f.getStyle=function(B){var ae=c;switch(B){case"D":case"S":ae="S";break;case"F":ae="f";break;case"FD":case"DF":ae="B";break;case"f":case"f*":case"B":case"B*":ae=B}return ae},Qx=f.close=function(){return re("h"),this};f.stroke=function(){return re("S"),this},f.fill=function(B){return dm("f",B),this},f.fillEvenOdd=function(B){return dm("f*",B),this},f.fillStroke=function(B){return dm("B",B),this},f.fillStrokeEvenOdd=function(B){return dm("B*",B),this};var dm=function(B,ae){Yn(ae)==="object"?m5(ae,B):re(B)},Lb=function(B){B===null||w===v.ADVANCED&&B===void 0||(B=Zx(B),re(B))};function p5(B,ae,Ee,Re,ze){var et=new fg(ae||this.boundingBox,Ee||this.xStep,Re||this.yStep,this.gState,ze||this.matrix);et.stream=this.stream;var dt=B+"$$"+this.cloneIndex+++"$$";return zi(dt,et),et}var m5=function(B,ae){var Ee=kn[B.key],Re=Lt[Ee];if(Re instanceof xf)re("q"),re(g5(ae)),Re.gState&&f.setGState(Re.gState),re(B.matrix.toString()+" cm"),re("/"+Ee+" sh"),re("Q");else if(Re instanceof fg){var ze=new Wt(1,0,0,-1,0,rd());B.matrix&&(ze=ze.multiply(B.matrix||Nl),Ee=p5.call(Re,B.key,B.boundingBox,B.xStep,B.yStep,ze).id),re("q"),re("/Pattern cs"),re("/"+Ee+" scn"),Re.gState&&f.setGState(Re.gState),re(ae),re("Q")}},g5=function(B){switch(B){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Db=f.moveTo=function(B,ae){return re(k(T(B))+" "+k(P(ae))+" m"),this},Uh=f.lineTo=function(B,ae){return re(k(T(B))+" "+k(P(ae))+" l"),this},td=f.curveTo=function(B,ae,Ee,Re,ze,et){return re([k(T(B)),k(P(ae)),k(T(Ee)),k(P(Re)),k(T(ze)),k(P(et)),"c"].join(" ")),this};f.__private__.line=f.line=function(B,ae,Ee,Re,ze){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||isNaN(Re)||!Ol(ze))throw new Error("Invalid arguments passed to jsPDF.line");return w===v.COMPAT?this.lines([[Ee-B,Re-ae]],B,ae,[1,1],ze||"S"):this.lines([[Ee-B,Re-ae]],B,ae,[1,1]).stroke()},f.__private__.lines=f.lines=function(B,ae,Ee,Re,ze,et){var dt,At,Ht,tn,Qt,Cn,Cr,Ir,Zr,ei,xs,Ka;if(typeof B=="number"&&(Ka=Ee,Ee=ae,ae=B,B=Ka),Re=Re||[1,1],et=et||!1,isNaN(ae)||isNaN(Ee)||!Array.isArray(B)||!Array.isArray(Re)||!Ol(ze)||typeof et!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Db(ae,Ee),dt=Re[0],At=Re[1],tn=B.length,ei=ae,xs=Ee,Ht=0;Ht<tn;Ht++)(Qt=B[Ht]).length===2?(ei=Qt[0]*dt+ei,xs=Qt[1]*At+xs,Uh(ei,xs)):(Cn=Qt[0]*dt+ei,Cr=Qt[1]*At+xs,Ir=Qt[2]*dt+ei,Zr=Qt[3]*At+xs,ei=Qt[4]*dt+ei,xs=Qt[5]*At+xs,td(Cn,Cr,Ir,Zr,ei,xs));return et&&Qx(),Lb(ze),this},f.path=function(B){for(var ae=0;ae<B.length;ae++){var Ee=B[ae],Re=Ee.c;switch(Ee.op){case"m":Db(Re[0],Re[1]);break;case"l":Uh(Re[0],Re[1]);break;case"c":td.apply(this,Re);break;case"h":Qx()}}return this},f.__private__.rect=f.rect=function(B,ae,Ee,Re,ze){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||isNaN(Re)||!Ol(ze))throw new Error("Invalid arguments passed to jsPDF.rect");return w===v.COMPAT&&(Re=-Re),re([k(T(B)),k(P(ae)),k(T(Ee)),k(T(Re)),"re"].join(" ")),Lb(ze),this},f.__private__.triangle=f.triangle=function(B,ae,Ee,Re,ze,et,dt){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||isNaN(Re)||isNaN(ze)||isNaN(et)||!Ol(dt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ee-B,Re-ae],[ze-Ee,et-Re],[B-ze,ae-et]],B,ae,[1,1],dt,!0),this},f.__private__.roundedRect=f.roundedRect=function(B,ae,Ee,Re,ze,et,dt){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||isNaN(Re)||isNaN(ze)||isNaN(et)||!Ol(dt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var At=4/3*(Math.SQRT2-1);return ze=Math.min(ze,.5*Ee),et=Math.min(et,.5*Re),this.lines([[Ee-2*ze,0],[ze*At,0,ze,et-et*At,ze,et],[0,Re-2*et],[0,et*At,-ze*At,et,-ze,et],[2*ze-Ee,0],[-ze*At,0,-ze,-et*At,-ze,-et],[0,2*et-Re],[0,-et*At,ze*At,-et,ze,-et]],B+ze,ae,[1,1],dt,!0),this},f.__private__.ellipse=f.ellipse=function(B,ae,Ee,Re,ze){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||isNaN(Re)||!Ol(ze))throw new Error("Invalid arguments passed to jsPDF.ellipse");var et=4/3*(Math.SQRT2-1)*Ee,dt=4/3*(Math.SQRT2-1)*Re;return Db(B+Ee,ae),td(B+Ee,ae-dt,B+et,ae-Re,B,ae-Re),td(B-et,ae-Re,B-Ee,ae-dt,B-Ee,ae),td(B-Ee,ae+dt,B-et,ae+Re,B,ae+Re),td(B+et,ae+Re,B+Ee,ae+dt,B+Ee,ae),Lb(ze),this},f.__private__.circle=f.circle=function(B,ae,Ee,Re){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||!Ol(Re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,ae,Ee,Ee,Re)},f.setFont=function(B,ae,Ee){return Ee&&(ae=E(ae,Ee)),ie=Yx(B,ae,{disableWarning:!1}),this};var b5=f.__private__.getFont=f.getFont=function(){return He[Yx.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var B,ae,Ee={};for(B in Ge)if(Ge.hasOwnProperty(B))for(ae in Ee[B]=[],Ge[B])Ge[B].hasOwnProperty(ae)&&Ee[B].push(ae);return Ee},f.addFont=function(B,ae,Ee,Re,ze){var et=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&et.indexOf(arguments[3])!==-1?ze=arguments[3]:arguments[3]&&et.indexOf(arguments[3])==-1&&(Ee=E(Ee,Re)),ze=ze||"Identity-H",Ib.call(this,B,ae,Ee,ze)};var Hh,Mb=t.lineWidth||.200025,hm=f.__private__.getLineWidth=f.getLineWidth=function(){return Mb},e_=f.__private__.setLineWidth=f.setLineWidth=function(B){return Mb=B,re(k(T(B))+" w"),this};f.__private__.setLineDash=Vt.API.setLineDash=Vt.API.setLineDashPattern=function(B,ae){if(B=B||[],ae=ae||0,isNaN(ae)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(Ee){return k(T(Ee))}).join(" "),ae=k(T(ae)),re("["+B+"] "+ae+" d"),this};var t_=f.__private__.getLineHeight=f.getLineHeight=function(){return Ce*Hh};f.__private__.getLineHeight=f.getLineHeight=function(){return Ce*Hh};var n_=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(Hh=B),this},r_=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Hh};n_(t.lineHeight);var Ll=f.__private__.getHorizontalCoordinate=function(B){return T(B)},qc=f.__private__.getVerticalCoordinate=function(B){return w===v.ADVANCED?B:Zt[j].mediaBox.topRightY-Zt[j].mediaBox.bottomLeftY-T(B)},y5=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(B){return k(Ll(B))},nd=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(B){return k(qc(B))},qa=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Va(qa)},f.__private__.setStrokeColor=f.setDrawColor=function(B,ae,Ee,Re){return qa=Wa({ch1:B,ch2:ae,ch3:Ee,ch4:Re,pdfColorType:"draw",precision:2}),re(qa),this};var jb=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Va(jb)},f.__private__.setFillColor=f.setFillColor=function(B,ae,Ee,Re){return jb=Wa({ch1:B,ch2:ae,ch3:Ee,ch4:Re,pdfColorType:"fill",precision:2}),re(jb),this};var zh=t.textColor||"0 g",v5=f.__private__.getTextColor=f.getTextColor=function(){return Va(zh)};f.__private__.setTextColor=f.setTextColor=function(B,ae,Ee,Re){return zh=Wa({ch1:B,ch2:ae,ch3:Ee,ch4:Re,pdfColorType:"text",precision:3}),this};var fm=t.charSpace,w5=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(fm||0)};f.__private__.setCharSpace=f.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fm=B,this};var Fb=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(B){var ae=f.CapJoinStyles[B];if(ae===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fb=ae,re(ae+" J"),this};var Bb=0;f.__private__.setLineJoin=f.setLineJoin=function(B){var ae=f.CapJoinStyles[B];if(ae===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bb=ae,re(ae+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(k(T(B))+" M"),this},f.GState=Hk,f.setGState=function(B){(B=typeof B=="string"?Yt[rn[B]]:s_(null,B)).equals(xi)||(re("/"+B.id+" gs"),xi=B)};var s_=function(B,ae){if(!B||!rn[B]){var Ee=!1;for(var Re in Yt)if(Yt.hasOwnProperty(Re)&&Yt[Re].equals(ae)){Ee=!0;break}if(Ee)ae=Yt[Re];else{var ze="GS"+(Object.keys(Yt).length+1).toString(10);Yt[ze]=ae,ae.id=ze}return B&&(rn[B]=ae.id),zn.publish("addGState",ae),ae}};f.addGState=function(B,ae){return s_(B,ae),this},f.saveGraphicsState=function(){return re("q"),$t.push({key:ie,size:Ce,color:zh}),this},f.restoreGraphicsState=function(){re("Q");var B=$t.pop();return ie=B.key,Ce=B.size,zh=B.color,xi=null,this},f.setCurrentTransformationMatrix=function(B){return re(B.toString()+" cm"),this},f.comment=function(B){return re("#"+B),this};var pm=function(B,ae){var Ee=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ee},set:function(et){isNaN(et)||(Ee=parseFloat(et))}});var Re=ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Re},set:function(et){isNaN(et)||(Re=parseFloat(et))}});var ze="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ze},set:function(et){ze=et.toString()}}),this},$b=function(B,ae,Ee,Re){pm.call(this,B,ae),this.type="rect";var ze=Ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ze},set:function(dt){isNaN(dt)||(ze=parseFloat(dt))}});var et=Re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return et},set:function(dt){isNaN(dt)||(et=parseFloat(dt))}}),this},Ub=function(){this.page=er,this.currentPage=j,this.pages=xe.slice(0),this.pagesContext=Zt.slice(0),this.x=J,this.y=pe,this.matrix=Oe,this.width=Vh(j),this.height=rd(j),this.outputDestination=Pe,this.id="",this.objectNumber=-1};Ub.prototype.restore=function(){er=this.page,j=this.currentPage,Zt=this.pagesContext,xe=this.pages,J=this.x,pe=this.y,Oe=this.matrix,Hb(j,this.width),zb(j,this.height),Pe=this.outputDestination};var i_=function(B,ae,Ee,Re,ze){Pl.push(new Ub),er=j=0,xe=[],J=B,pe=ae,Oe=ze,Rb([Ee,Re])},x5=function(B){if(Tl[B])Pl.pop().restore();else{var ae=new Ub,Ee="Xo"+(Object.keys(Ds).length+1).toString(10);ae.id=Ee,Tl[B]=Ee,Ds[Ee]=ae,zn.publish("addFormObject",ae),Pl.pop().restore()}};for(var mm in f.beginFormObject=function(B,ae,Ee,Re,ze){return i_(B,ae,Ee,Re,ze),this},f.endFormObject=function(B){return x5(B),this},f.doFormObject=function(B,ae){var Ee=Ds[Tl[B]];return re("q"),re(ae.toString()+" cm"),re("/"+Ee.id+" Do"),re("Q"),this},f.getFormObject=function(B){var ae=Ds[Tl[B]];return{x:ae.x,y:ae.y,width:ae.width,height:ae.height,matrix:ae.matrix}},f.save=function(B,ae){return B=B||"generated.pdf",(ae=ae||{}).returnPromise=ae.returnPromise||!1,ae.returnPromise===!1?(ff(cm(Gc()),B),typeof ff.unload=="function"&&qt.setTimeout&&setTimeout(ff.unload,911),this):new Promise(function(Ee,Re){try{var ze=ff(cm(Gc()),B);typeof ff.unload=="function"&&qt.setTimeout&&setTimeout(ff.unload,911),Ee(ze)}catch(et){Re(et.message)}})},Vt.API)Vt.API.hasOwnProperty(mm)&&(mm==="events"&&Vt.API.events.length?function(B,ae){var Ee,Re,ze;for(ze=ae.length-1;ze!==-1;ze--)Ee=ae[ze][0],Re=ae[ze][1],B.subscribe.apply(B,[Ee].concat(typeof Re=="function"?[Re]:Re))}(zn,Vt.API.events):f[mm]=Vt.API[mm]);var Vh=f.getPageWidth=function(B){return(Zt[B=B||j].mediaBox.topRightX-Zt[B].mediaBox.bottomLeftX)/z},Hb=f.setPageWidth=function(B,ae){Zt[B].mediaBox.topRightX=ae*z+Zt[B].mediaBox.bottomLeftX},rd=f.getPageHeight=function(B){return(Zt[B=B||j].mediaBox.topRightY-Zt[B].mediaBox.bottomLeftY)/z},zb=f.setPageHeight=function(B,ae){Zt[B].mediaBox.topRightY=ae*z+Zt[B].mediaBox.bottomLeftY};return f.internal={pdfEscape:Vi,getStyle:Zx,getFont:b5,getFontSize:we,getCharSpace:w5,getTextColor:v5,getLineHeight:t_,getLineHeightFactor:r_,getLineWidth:hm,write:le,getHorizontalCoordinate:Ll,getVerticalCoordinate:qc,getCoordinateString:y5,getVerticalCoordinateString:nd,collections:{},newObject:us,newAdditionalObject:tm,newObjectDeferred:Xr,newObjectDeferredBegin:xo,getFilters:Il,putStream:Zo,events:zn,scaleFactor:z,pageSize:{getWidth:function(){return Vh(j)},setWidth:function(B){Hb(j,B)},getHeight:function(){return rd(j)},setHeight:function(B){zb(j,B)}},encryptionOptions:u,encryption:Qs,getEncryptor:d5,output:um,getNumberOfPages:o5,pages:xe,out:re,f2:R,f3:C,getPageInfo:Xx,getPageInfoByObjId:Xt,getCurrentPageInfo:h5,getPDFVersion:m,Point:pm,Rectangle:$b,Matrix:Wt,hasHotfix:Jx},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Vh(j)},set:function(B){Hb(j,B)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return rd(j)},set:function(B){zb(j,B)},enumerable:!0,configurable:!0}),s5.call(f,fe),ie="F1",qx(s,n),zn.publish("initialized"),f}Xm.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Xm.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Xm.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Xm.prototype.processOwnerPassword=function(t,e){return qR(GR(e).substr(0,5),t)},Xm.prototype.encryptor=function(t,e){var n=GR(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return qR(n,r)}},Hk.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Yn(t)!==Yn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Vt.API={events:[]},Vt.version="2.5.2";var Lr=Vt.API,h8=1,Wp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bm=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(t){return t.toFixed(2)},yd=function(t){return t.toFixed(5)};Lr.__acroform__={};var bo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},CH=function(t){return t*h8},Jl=function(t){var e=new Yce,n=Dt.internal.getHeight(t)||0,r=Dt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(en(r)),Number(en(n))],e},_Je=Lr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},SJe=Lr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},EJe=Lr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Vr=Lr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return EJe(t,e-1)},Wr=Lr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _Je(t,e-1)},Gr=Lr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return SJe(t,e-1)},kJe=Lr.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],i=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(i+a)||0,l.upperRight_X=n(s+o)||0,l.upperRight_Y=r(i)||0,[Number(en(l.lowerLeft_X)),Number(en(l.lowerLeft_Y)),Number(en(l.upperRight_X)),Number(en(l.upperRight_Y))]},CJe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=KR(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+en(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Jl(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},KR=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(C){return C.split(`
`)}):s.map(function(C){return[C]});var i=n,o=Dt.internal.getHeight(t)||0;o=o<0?-o:o;var a=Dt.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(C,T,O){if(C+1<s.length){var P=T+" "+s[C+1][0];return b2(P,t,O).width<=a-4}return!1};i++;e:for(;i>0;){e="",i--;var c,u,d=b2("3",t,i).height,h=t.multiline?o-i:(o-d)/2,f=h+=2,p=0,m=0,g=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+b2(e,t,i=12).width+", FieldWidth:"+a+`
`;break}for(var b="",v=0,w=0;w<s.length;w++)if(s.hasOwnProperty(w)){var _=!1;if(s[w].length!==1&&g!==s[w].length-1){if((d+2)*(v+2)+2>o)continue e;b+=s[w][g],_=!0,m=w,w--}else{b=(b+=s[w][g]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var S=parseInt(w),E=l(S,b,i),k=w>=s.length-1;if(E&&!k){b+=" ",g=0;continue}if(E||k){if(k)m=S;else if(t.multiline&&(d+2)*(v+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(v+2)+2>o)continue e;m=S}}for(var x="",I=p;I<=m;I++){var R=s[I];if(t.multiline){if(I===m){x+=R[g]+" ",g=(g+1)%R.length;continue}if(I===p){x+=R[R.length-1]+" ";continue}}x+=R[0]+" "}switch(x=x.substr(x.length-1)==" "?x.substr(0,x.length-1):x,u=b2(x,t,i).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=en(c)+" "+en(f)+` Td
`,e+="("+Wp(x)+`) Tj
`,e+=-en(c)+` 0 Td
`,f=-(i+2),u=0,p=_?m:m+1,v++,b=""}break}return r.text=e,r.fontSize=i,r},b2=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},AJe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TJe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},PJe=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),Yn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},NJe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(_l.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(AJe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");h8=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Jce,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&TJe(i,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var i=!r;for(var o in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=kJe(a.Rect,s)),s.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Dt.createDefaultAppearanceStream(a),Yn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=CJe(a);l.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var d="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var f=a.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var p=f[o];typeof p=="function"&&(p=p.call(s,a)),d+="/"+o+" "+p+" ",s.internal.acroformPlugin.xForms.indexOf(p)>=0||s.internal.acroformPlugin.xForms.push(p)}}else typeof(p=f)=="function"&&(p=p.call(s,a)),d+="/"+o+" "+p,s.internal.acroformPlugin.xForms.indexOf(p)>=0||s.internal.acroformPlugin.xForms.push(p);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:a.objId}),s.internal.out("endobj")}i&&PJe(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Kce=Lr.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),Yn(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+Wp(r(t[i].toString()))+")"):s+=t[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},vP=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Wp(r(t))+")"},yc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};yc.prototype.toString=function(){return this.objId+" 0 R"},yc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},yc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:Kce(s,this.objId,this.scope)}):s instanceof yc?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var Yce=function(){yc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};bo(Yce,yc);var Jce=function(){yc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Wp(n(t))+")"}},set:function(n){t=n}})};bo(Jce,yc);var _l=function t(){yc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Vr(e,3)},set:function(b){b?this.F=Wr(e,3):this.F=Gr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof zk)return;i="FieldObject"+t.FieldNum++}var b=function(v){return v};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Wp(b(i))+")"},set:function(b){i=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(b){i=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/h8:c},set:function(b){c=b}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof zk||this instanceof tp))return vP(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=b}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Cs?h:vP(h,this.objId,this.scope)},set:function(b){b=b.toString(),h=this instanceof Cs?b:b.substr(0,1)==="("?Bm(b.substr(1,b.length-2)):Bm(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cs?Bm(h.substr(1,h.length-1)):h},set:function(b){b=b.toString(),h=this instanceof Cs?"/"+b:b}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Cs?f:vP(f,this.objId,this.scope)},set:function(b){b=b.toString(),f=this instanceof Cs?b:b.substr(0,1)==="("?Bm(b.substr(1,b.length-2)):Bm(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cs?Bm(f.substr(1,f.length-1)):f},set:function(b){b=b.toString(),f=this instanceof Cs?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(b){b=!!b,m=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(b){p=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,1)},set:function(b){b?this.Ff=Wr(this.Ff,1):this.Ff=Gr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,2)},set:function(b){b?this.Ff=Wr(this.Ff,2):this.Ff=Gr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,3)},set:function(b){b?this.Ff=Wr(this.Ff,3):this.Ff=Gr(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');g=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(g){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:g=2;break;case"center":case 1:g=1;break;case"left":case 0:default:g=0}}})};bo(_l,yc);var Ng=function(){_l.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Kce(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(i,o,a){a||(a=1);for(var l,c=[];l=o.exec(i);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,18)},set:function(n){n?this.Ff=Wr(this.Ff,18):this.Ff=Gr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Wr(this.Ff,19):this.Ff=Gr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,20)},set:function(n){n?(this.Ff=Wr(this.Ff,20),e.sort()):this.Ff=Gr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,22)},set:function(n){n?this.Ff=Wr(this.Ff,22):this.Ff=Gr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,23)},set:function(n){n?this.Ff=Wr(this.Ff,23):this.Ff=Gr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,27)},set:function(n){n?this.Ff=Wr(this.Ff,27):this.Ff=Gr(this.Ff,27)}}),this.hasAppearanceStream=!1};bo(Ng,_l);var Ig=function(){Ng.call(this),this.fontName="helvetica",this.combo=!1};bo(Ig,Ng);var Rg=function(){Ig.call(this),this.combo=!0};bo(Rg,Ig);var VS=function(){Rg.call(this),this.edit=!0};bo(VS,Rg);var Cs=function(){_l.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,15)},set:function(n){n?this.Ff=Wr(this.Ff,15):this.Ff=Gr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,16)},set:function(n){n?this.Ff=Wr(this.Ff,16):this.Ff=Gr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,17)},set:function(n){n?this.Ff=Wr(this.Ff,17):this.Ff=Gr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,26)},set:function(n){n?this.Ff=Wr(this.Ff,26):this.Ff=Gr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+Wp(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){Yn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};bo(Cs,_l);var WS=function(){Cs.call(this),this.pushButton=!0};bo(WS,Cs);var Og=function(){Cs.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};bo(Og,Cs);var zk=function(){var t,e;_l.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(a){return a};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+Wp(s(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Yn(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bo(zk,_l),Og.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Og.prototype.createOption=function(t){var e=new zk;return e.Parent=this,e.optionName=t,this.Kids.push(e),IJe.call(this.scope,e),e};var GS=function(){Cs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dt.CheckBox.createAppearanceStream()};bo(GS,Cs);var tp=function(){_l.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,13)},set:function(e){e?this.Ff=Wr(this.Ff,13):this.Ff=Gr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,21)},set:function(e){e?this.Ff=Wr(this.Ff,21):this.Ff=Gr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,23)},set:function(e){e?this.Ff=Wr(this.Ff,23):this.Ff=Gr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,24)},set:function(e){e?this.Ff=Wr(this.Ff,24):this.Ff=Gr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,25)},set:function(e){e?this.Ff=Wr(this.Ff,25):this.Ff=Gr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,26)},set:function(e){e?this.Ff=Wr(this.Ff,26):this.Ff=Gr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bo(tp,_l);var qS=function(){tp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,14)},set:function(t){t?this.Ff=Wr(this.Ff,14):this.Ff=Gr(this.Ff,14)}}),this.password=!0};bo(qS,tp);var Dt={CheckBox:{createAppearanceStream:function(){return{N:{On:Dt.CheckBox.YesNormal},D:{On:Dt.CheckBox.YesPushDown,Off:Dt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Jl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=KR(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+en(Dt.internal.getWidth(t))+" "+en(Dt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+en(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Jl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],i=Dt.internal.getHeight(t),o=Dt.internal.getWidth(t),a=KR(t,t.caption);return s.push("1 g"),s.push("0 0 "+en(o)+" "+en(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+en(o-1)+" "+en(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+en(a.fontSize)+" Tf "+r),s.push(a.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Jl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+en(Dt.internal.getWidth(t))+" "+en(Dt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Dt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Dt.RadioButton.Circle.YesNormal,e.D[t]=Dt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Jl(t);e.scope=t.scope;var n=[],r=Dt.internal.getWidth(t)<=Dt.internal.getHeight(t)?Dt.internal.getWidth(t)/4:Dt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Dt.internal.Bezier_C,i=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+yd(Dt.internal.getWidth(t)/2)+" "+yd(Dt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Jl(t);e.scope=t.scope;var n=[],r=Dt.internal.getWidth(t)<=Dt.internal.getHeight(t)?Dt.internal.getWidth(t)/4:Dt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Dt.internal.Bezier_C).toFixed(5)),o=Number((r*Dt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+yd(Dt.internal.getWidth(t)/2)+" "+yd(Dt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+yd(Dt.internal.getWidth(t)/2)+" "+yd(Dt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Jl(t);e.scope=t.scope;var n=[],r=Dt.internal.getWidth(t)<=Dt.internal.getHeight(t)?Dt.internal.getWidth(t)/4:Dt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Dt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+yd(Dt.internal.getWidth(t)/2)+" "+yd(Dt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Dt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Dt.RadioButton.Cross.YesNormal,e.D[t]=Dt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Jl(t);e.scope=t.scope;var n=[],r=Dt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+en(Dt.internal.getWidth(t)-2)+" "+en(Dt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),n.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),n.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),n.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Jl(t);e.scope=t.scope;var n=Dt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+en(Dt.internal.getWidth(t))+" "+en(Dt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+en(Dt.internal.getWidth(t)-2)+" "+en(Dt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(en(n.x1.x)+" "+en(n.x1.y)+" m"),r.push(en(n.x2.x)+" "+en(n.x2.y)+" l"),r.push(en(n.x4.x)+" "+en(n.x4.y)+" m"),r.push(en(n.x3.x)+" "+en(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Jl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+en(Dt.internal.getWidth(t))+" "+en(Dt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Dt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Dt.internal.getWidth(t),n=Dt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Dt.internal.getWidth=function(t){var e=0;return Yn(t)==="object"&&(e=CH(t.Rect[2])),e},Dt.internal.getHeight=function(t){var e=0;return Yn(t)==="object"&&(e=CH(t.Rect[3])),e};var IJe=Lr.addField=function(t){if(NJe(this,t),!(t instanceof _l))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Lr.AcroFormChoiceField=Ng,Lr.AcroFormListBox=Ig,Lr.AcroFormComboBox=Rg,Lr.AcroFormEditBox=VS,Lr.AcroFormButton=Cs,Lr.AcroFormPushButton=WS,Lr.AcroFormRadioButton=Og,Lr.AcroFormCheckBox=GS,Lr.AcroFormTextField=tp,Lr.AcroFormPasswordField=qS,Lr.AcroFormAppearance=Dt,Lr.AcroForm={ChoiceField:Ng,ListBox:Ig,ComboBox:Rg,EditBox:VS,Button:Cs,PushButton:WS,RadioButton:Og,CheckBox:GS,TextField:tp,PasswordField:qS,Appearance:Dt},Vt.AcroForm={ChoiceField:Ng,ListBox:Ig,ComboBox:Rg,EditBox:VS,Button:Cs,PushButton:WS,RadioButton:Og,CheckBox:GS,TextField:tp,PasswordField:qS,Appearance:Dt};Vt.AcroForm;function Xce(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(C,T){var O,P,U,ee,X,Z=e;if((T=T||e)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(E(C))for(X in n)for(U=n[X],O=0;O<U.length;O+=1){for(ee=!0,P=0;P<U[O].length;P+=1)if(U[O][P]!==void 0&&U[O][P]!==C[P]){ee=!1;break}if(ee===!0){Z=X;break}}else for(X in n)for(U=n[X],O=0;O<U.length;O+=1){for(ee=!0,P=0;P<U[O].length;P+=1)if(U[O][P]!==void 0&&U[O][P]!==C.charCodeAt(P)){ee=!1;break}if(ee===!0){Z=X;break}}return Z===e&&T!==e&&(Z=T),Z},s=function C(T){for(var O=this.internal.write,P=this.internal.putStream,U=(0,this.internal.getFilters)();U.indexOf("FlateEncode")!==-1;)U.splice(U.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:T.width}),ee.push({key:"Height",value:T.height}),T.colorSpace===g.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===g.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var X="",Z=0,F=T.transparency.length;Z<F;Z++)X+=T.transparency[Z]+" "+T.transparency[Z]+" ";ee.push({key:"Mask",value:"["+X+"]"})}T.sMask!==void 0&&ee.push({key:"SMask",value:T.objectId+1+" 0 R"});var M=T.filter!==void 0?["/"+T.filter]:void 0;if(P({data:T.data,additionalKeyValues:ee,alreadyAppliedFilters:M,objectId:T.objectId}),O("endobj"),"sMask"in T&&T.sMask!==void 0){var G="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,D={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:G,data:T.sMask};"filter"in T&&(D.filter=T.filter),C.call(this,D)}if(T.colorSpace===g.INDEXED){var j=this.internal.newObject();P({data:x(new Uint8Array(T.palette)),objectId:j}),O("endobj")}},i=function(){var C=this.internal.collections.addImage_images;for(var T in C)s.call(this,C[T])},o=function(){var C,T=this.internal.collections.addImage_images,O=this.internal.write;for(var P in T)O("/I"+(C=T[P]).index,C.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var C=this.internal.collections.addImage_images;return a.call(this),C},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(C){return typeof t["process"+C.toUpperCase()]=="function"},d=function(C){return Yn(C)==="object"&&C.nodeType===1},h=function(C,T){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var O=""+C.getAttribute("src");if(O.indexOf("data:image/")===0)return Fv(unescape(O).split("base64,").pop());var P=t.loadFile(O,!0);if(P!==void 0)return P}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var U;switch(T){case"PNG":U="image/png";break;case"WEBP":U="image/webp";break;case"JPEG":case"JPG":default:U="image/jpeg"}return Fv(C.toDataURL(U,1).split("base64,").pop())}},f=function(C){var T=this.internal.collections.addImage_images;if(T){for(var O in T)if(C===T[O].alias)return T[O]}},p=function(C,T,O){return C||T||(C=-96,T=-96),C<0&&(C=-1*O.width*72/C/this.internal.scaleFactor),T<0&&(T=-1*O.height*72/T/this.internal.scaleFactor),C===0&&(C=T*O.width/O.height),T===0&&(T=C*O.height/O.width),[C,T]},m=function(C,T,O,P,U,ee){var X=p.call(this,O,P,U),Z=this.internal.getCoordinateString,F=this.internal.getVerticalCoordinateString,M=l.call(this);if(O=X[0],P=X[1],M[U.index]=U,ee){ee*=Math.PI/180;var G=Math.cos(ee),D=Math.sin(ee),j=function(q){return q.toFixed(4)},W=[j(G),j(D),j(-1*D),j(G),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,Z(C),F(T+P),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([Z(O),"0","0",Z(P),"0","0","cm"].join(" "))):this.internal.write([Z(O),"0","0",Z(P),Z(C),F(T+P),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+U.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=t.__addimage__.sHashCode=function(C){var T,O,P=0;if(typeof C=="string")for(O=C.length,T=0;T<O;T++)P=(P<<5)-P+C.charCodeAt(T),P|=0;else if(E(C))for(O=C.byteLength/2,T=0;T<O;T++)P=(P<<5)-P+C[T],P|=0;return P},w=t.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var T=!0;return C.length===0&&(T=!1),C.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(T=!1),T},_=t.__addimage__.extractImageFromDataUrl=function(C){var T=(C=C||"").split("base64,"),O=null;if(T.length===2){var P=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(T[0]);Array.isArray(P)&&(O={mimeType:P[1],charset:P[2],data:T[1]})}return O},S=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(C){return S()&&C instanceof ArrayBuffer};var E=t.__addimage__.isArrayBufferView=function(C){return S()&&typeof Uint32Array<"u"&&(C instanceof Int8Array||C instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)},k=t.__addimage__.binaryStringToUint8Array=function(C){for(var T=C.length,O=new Uint8Array(T),P=0;P<T;P++)O[P]=C.charCodeAt(P);return O},x=t.__addimage__.arrayBufferToBinaryString=function(C){for(var T="",O=E(C)?C:new Uint8Array(C),P=0;P<O.length;P+=8192)T+=String.fromCharCode.apply(null,O.subarray(P,P+8192));return T};t.addImage=function(){var C,T,O,P,U,ee,X,Z,F;if(typeof arguments[1]=="number"?(T=e,O=arguments[1],P=arguments[2],U=arguments[3],ee=arguments[4],X=arguments[5],Z=arguments[6],F=arguments[7]):(T=arguments[1],O=arguments[2],P=arguments[3],U=arguments[4],ee=arguments[5],X=arguments[6],Z=arguments[7],F=arguments[8]),Yn(C=arguments[0])==="object"&&!d(C)&&"imageData"in C){var M=C;C=M.imageData,T=M.format||T||e,O=M.x||O||0,P=M.y||P||0,U=M.w||M.width||U,ee=M.h||M.height||ee,X=M.alias||X,Z=M.compression||Z,F=M.rotation||M.angle||F}var G=this.internal.getFilters();if(Z===void 0&&G.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN(O)||isNaN(P))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var D=I.call(this,C,T,X,Z);return m.call(this,O,P,U,ee,D,F),this};var I=function(C,T,O,P){var U,ee,X;if(typeof C=="string"&&r(C)===e){C=unescape(C);var Z=R(C,!1);(Z!==""||(Z=t.loadFile(C,!0))!==void 0)&&(C=Z)}if(d(C)&&(C=h(C,T)),T=r(C,T),!u(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((X=O)==null||X.length===0)&&(O=function(F){return typeof F=="string"||E(F)?v(F):E(F.data)?v(F.data):null}(C)),(U=f.call(this,O))||(S()&&(C instanceof Uint8Array||T==="RGBA"||(ee=C,C=k(C))),U=this["process"+T.toUpperCase()](C,c.call(this),O,function(F){return F&&typeof F=="string"&&(F=F.toUpperCase()),F in t.image_compression?F:b.NONE}(P),ee)),!U)throw new Error("An unknown error occurred whilst processing the image.");return U},R=t.__addimage__.convertBase64ToBinaryString=function(C,T){var O;T=typeof T!="boolean"||T;var P,U="";if(typeof C=="string"){P=(O=_(C))!==null?O.data:C;try{U=Fv(P)}catch(ee){if(T)throw w(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};t.getImageProperties=function(C){var T,O,P="";if(d(C)&&(C=h(C)),typeof C=="string"&&r(C)===e&&((P=R(C,!1))===""&&(P=t.loadFile(C)||""),C=P),O=r(C),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!S()||C instanceof Uint8Array||(C=k(C)),!(T=this["process"+O.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=O,T}})(Vt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Vt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,i,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){r=c[h];var f=this.internal.pdfEscape,p=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(m.objId),v=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(b(r.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+f(b(v))+") >>",m.content=i;var w=m.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+w,r.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(m.objId,"0 R",g.objId,"0 R");break;case"freetext":s="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var _=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+f(p(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var S=this.annotations._nameMap[r.options.name];r.options.pageNumber=S.page,r.options.top=S.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+f(p(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var E=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+E+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,i,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+s),h:c(r+i)},options:o,type:"link"})},t.textWithLink=function(n,r,s,i){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){a=i.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,r,s,i),s+=.2*c,i.align==="center"&&(r-=l/2),i.align==="right"&&(r-=l),this.link(r,s-c,a,o,i),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Vt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(m){return e[m.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},a=t.__arabicParser__.isArabicEndLetter=function(m){return o(m)&&i(m)&&e[m.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(m){return o(m)&&s.indexOf(m.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return o(m)&&i(m)&&e[m.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(m){return o(m)&&i(m)&&e[m.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(m){return o(m)&&i(m)&&e[m.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(m){return o(m)&&i(m)&&e[m.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(m){var g=0,b=n,v="",w=0;for(g=0;g<m.length;g+=1)b[m.charCodeAt(g)]!==void 0?(w++,typeof(b=b[m.charCodeAt(g)])=="number"&&(v+=String.fromCharCode(b),b=n,w=0),g===m.length-1&&(b=n,v+=m.charAt(g-(w-1)),g-=w-1,w=0)):(b=n,v+=m.charAt(g-w),g-=w,w=0);return v};t.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&r[m.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(m,g,b){return o(m)?i(m)===!1?-1:!c(m)||!o(g)&&!o(b)||!o(b)&&a(g)||a(m)&&!o(g)||a(m)&&l(g)||a(m)&&a(g)?0:u(m)&&o(g)&&!a(g)&&o(b)&&c(b)?3:a(m)||!o(b)?1:2:-1},f=function(m){var g=0,b=0,v=0,w="",_="",S="",E=(m=m||"").split("\\s+"),k=[];for(g=0;g<E.length;g+=1){for(k.push(""),b=0;b<E[g].length;b+=1)w=E[g][b],_=E[g][b-1],S=E[g][b+1],o(w)?(v=h(w,_,S),k[g]+=v!==-1?String.fromCharCode(e[w.charCodeAt(0)][v]):w):k[g]+=w;k[g]=d(k[g])}return k.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var m,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(g)){var v=0;for(b=[],v=0;v<g.length;v+=1)Array.isArray(g[v])?b.push([f(g[v][0]),g[v][1],g[v][2]]):b.push([f(g[v])]);m=b}else m=f(g);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};t.events.push(["preProcessText",p])}(Vt.API),Vt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(a){i=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Vt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(m){l=m}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(m){p=m}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,f=0,p=0,m=0,g=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=c.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(w,_){return w.concat(g.splitTextToSize(_,b))},[])):l=Array.isArray(l)?l:[l];for(var v=0;v<l.length;v++)f<(m=this.getStringUnitWidth(l[v],{font:d})*u)&&(f=m);return f!==0&&(p=l.length),{w:f/=h,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,d,h){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,p,m,g,b=[],v=[],w=[],_={},S={},E=[],k=[],x=(h=h||{}).autoSize||!1,I=h.printHeaders!==!1,R=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,C=h.margins||Object.assign({width:this.getPageWidth()},e),T=typeof h.padding=="number"?h.padding:3,O=h.headerBackgroundColor||"#c8c8c8",P=h.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=P,this.setFontSize(R),d==null)v=b=Object.keys(u[0]),w=b.map(function(){return"left"});else if(Array.isArray(d)&&Yn(d[0])==="object")for(b=d.map(function(M){return M.name}),v=d.map(function(M){return M.prompt||M.name||""}),w=d.map(function(M){return M.align||"left"}),f=0;f<d.length;f+=1)S[d[f].name]=d[f].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(v=b=d,w=b.map(function(){return"left"}));if(x||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<b.length;f+=1){for(_[g=b[f]]=u.map(function(M){return M[g]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(v[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=_[g],this.setFont(void 0,"normal"),m=0;m<p.length;m+=1)E.push(this.getTextDimensions(p[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[g]=Math.max.apply(null,E)+T+T,E=[]}if(I){var U={};for(f=0;f<b.length;f+=1)U[b[f]]={},U[b[f]].text=v[f],U[b[f]].align=w[f];var ee=a.call(this,U,S);k=b.map(function(M){return new i(l,c,S[M],ee,U[M].text,void 0,U[M].align)}),this.setTableHeaderRow(k),this.printHeaderRow(1,!1)}var X=d.reduce(function(M,G){return M[G.name]=G.align,M},{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var Z=a.call(this,u[f],S);for(m=0;m<b.length;m+=1){var F=u[f][b[m]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:m,data:F},this),o.call(this,new i(l,c,S[b[m]],Z,F,f+2,X[b[m]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(f){var p=l[f];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+u+u},this).reduce(function(f,p){return Math.max(f,p)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(p)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(Vt.API);var Zce={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Qce=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],YR=Xce(Qce),eue=[100,200,300,400,500,600,700,800,900],RJe=Xce(eue);function JR(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return Zce[i=i||"normal"]?i:"normal"}(t.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(i){return typeof YR[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function AH(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var OJe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},TH={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function PH(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function LJe(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},OJe,n.genericFontFamilies||{}),i=null,o=null,a=0;a<e.length;++a)if(s[(i=JR(e[a])).family]&&(i.family=s[i.family]),t.hasOwnProperty(i.family)){o=t[i.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+PH(i)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var u=YR[l],d=u<=YR.normal?-1:1,h=AH(c,Qce,u,d);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(i.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=Zce[l],d=0;d<u.length;++d)if(c[u[d]])return c[u[d]];throw new Error("Could not find a matching font-style for "+l)}(i.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=RJe[l],d=AH(c,eue,u,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+PH(i)+"'.");return o}function NH(t){return t.trimLeft()}function DJe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function MJe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var y2,IH,RH,wP=["times"];(function(t){var e,n,r,s,i,o,a,l,c,u=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new l,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new o,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new o,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=D;Object.defineProperty(this,"pdf",{get:function(){return j}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(ge){W=!!ge}});var q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return q},set:function(ge){q=!!ge}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(ge){isNaN(ge)||(ne=ge)}});var te=0;Object.defineProperty(this,"posY",{get:function(){return te},set:function(ge){isNaN(ge)||(te=ge)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ge){var re;typeof ge=="number"?re=[ge,ge,ge,ge]:((re=new Array(4))[0]=ge[0],re[1]=ge.length>=2?ge[1]:re[0],re[2]=ge.length>=3?ge[2]:re[0],re[3]=ge.length>=4?ge[3]:re[1]),c.margin=re}});var Y=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Y},set:function(ge){Y=ge}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(ge){de=ge}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(ge){Se=ge}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ge){ge instanceof u&&(c=ge)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ge){c.path=ge}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(ge){xe=ge}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ge){var re;re=h(ge),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ge){var re=h(ge);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ge){["butt","round","square"].indexOf(ge)!==-1&&(this.ctx.lineCap=ge,this.pdf.setLineCap(ge))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ge){isNaN(ge)||(this.ctx.lineWidth=ge,this.pdf.setLineWidth(ge))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ge){["bevel","round","miter"].indexOf(ge)!==-1&&(this.ctx.lineJoin=ge,this.pdf.setLineJoin(ge))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ge){isNaN(ge)||(this.ctx.miterLimit=ge,this.pdf.setMiterLimit(ge))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ge){this.ctx.textBaseline=ge}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ge){["right","end","center","left","start"].indexOf(ge)!==-1&&(this.ctx.textAlign=ge)}});var Ae=null;function Pe(ge,re){if(Ae===null){var le=function(se){var fe=[];return Object.keys(se).forEach(function(Ce){se[Ce].forEach(function(Ie){var we=null;switch(Ie){case"bold":we={family:Ce,weight:"bold"};break;case"italic":we={family:Ce,style:"italic"};break;case"bolditalic":we={family:Ce,weight:"bold",style:"italic"};break;case"":case"normal":we={family:Ce}}we!==null&&(we.ref={name:Ce,style:Ie},fe.push(we))})}),fe}(ge.getFontList());Ae=function(se){for(var fe={},Ce=0;Ce<se.length;++Ce){var Ie=JR(se[Ce]),we=Ie.family,Ue=Ie.stretch,Fe=Ie.style,Be=Ie.weight;fe[we]=fe[we]||{},fe[we][Ue]=fe[we][Ue]||{},fe[we][Ue][Fe]=fe[we][Ue][Fe]||{},fe[we][Ue][Fe][Be]=Ie}return fe}(le.concat(re))}return Ae}var K=null;Object.defineProperty(this,"fontFaces",{get:function(){return K},set:function(ge){Ae=null,K=ge}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ge){var re;if(this.ctx.font=ge,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ge))!==null){var le=re[1],se=(re[2],re[3]),fe=re[4],Ce=(re[5],re[6]),Ie=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(fe)[2];fe=Math.floor(Ie==="px"?parseFloat(fe)*this.pdf.internal.scaleFactor:Ie==="em"?parseFloat(fe)*this.pdf.getFontSize():parseFloat(fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(fe);var we=function(nt){var ie,z,J=[],pe=nt.trim();if(pe==="")return wP;if(pe in TH)return[TH[pe]];for(;pe!=="";){switch(z=null,ie=(pe=NH(pe)).charAt(0)){case'"':case"'":z=DJe(pe.substring(1),ie);break;default:z=MJe(pe)}if(z===null||(J.push(z[0]),(pe=NH(z[1]))!==""&&pe.charAt(0)!==","))return wP;pe=pe.replace(/^,/,"")}return J}(Ce);if(this.fontFaces){var Ue=LJe(Pe(this.pdf,this.fontFaces),we.map(function(nt){return{family:nt,stretch:"normal",weight:se,style:le}}));this.pdf.setFont(Ue.ref.name,Ue.ref.style)}else{var Fe="";(se==="bold"||parseInt(se,10)>=700||le==="bold")&&(Fe="bold"),le==="italic"&&(Fe+="italic"),Fe.length===0&&(Fe="normal");for(var Be="",ke={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Je=0;Je<we.length;Je++){if(this.pdf.internal.getFont(we[Je],Fe,{noFallback:!0,disableWarning:!0})!==void 0){Be=we[Je];break}if(Fe==="bolditalic"&&this.pdf.internal.getFont(we[Je],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Be=we[Je],Fe="bold";else if(this.pdf.internal.getFont(we[Je],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Be=we[Je],Fe="normal";break}}if(Be===""){for(var Xe=0;Xe<we.length;Xe++)if(ke[we[Xe]]){Be=ke[we[Xe]];break}}Be=Be===""?"Times":Be,this.pdf.setFont(Be,Fe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ge){this.ctx.globalCompositeOperation=ge}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ge){this.ctx.globalAlpha=ge}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ge){this.ctx.lineDashOffset=ge,G.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ge){this.ctx.lineDash=ge,G.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ge){this.ctx.ignoreClearRect=!!ge}})};d.prototype.setLineDash=function(D){this.lineDash=D},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){_.call(this,"fill",!1)},d.prototype.stroke=function(){_.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(D,j){if(isNaN(D)||isNaN(j))throw rr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new o(D,j));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(D,j)},d.prototype.closePath=function(){var D=new o(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&Yn(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){D=new o(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(D.x,D.y)},d.prototype.lineTo=function(D,j){if(isNaN(D)||isNaN(j))throw rr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new o(D,j));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},d.prototype.quadraticCurveTo=function(D,j,W,q){if(isNaN(W)||isNaN(q)||isNaN(D)||isNaN(j))throw rr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(W,q)),te=this.ctx.transform.applyToPoint(new o(D,j));this.path.push({type:"qct",x1:te.x,y1:te.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},d.prototype.bezierCurveTo=function(D,j,W,q,ne,te){if(isNaN(ne)||isNaN(te)||isNaN(D)||isNaN(j)||isNaN(W)||isNaN(q))throw rr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Y=this.ctx.transform.applyToPoint(new o(ne,te)),de=this.ctx.transform.applyToPoint(new o(D,j)),Se=this.ctx.transform.applyToPoint(new o(W,q));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:Se.x,y2:Se.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},d.prototype.arc=function(D,j,W,q,ne,te){if(isNaN(D)||isNaN(j)||isNaN(W)||isNaN(q)||isNaN(ne))throw rr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(te=!!te,!this.ctx.transform.isIdentity){var Y=this.ctx.transform.applyToPoint(new o(D,j));D=Y.x,j=Y.y;var de=this.ctx.transform.applyToPoint(new o(0,W)),Se=this.ctx.transform.applyToPoint(new o(0,0));W=Math.sqrt(Math.pow(de.x-Se.x,2)+Math.pow(de.y-Se.y,2))}Math.abs(ne-q)>=2*Math.PI&&(q=0,ne=2*Math.PI),this.path.push({type:"arc",x:D,y:j,radius:W,startAngle:q,endAngle:ne,counterclockwise:te})},d.prototype.arcTo=function(D,j,W,q,ne){throw new Error("arcTo not implemented.")},d.prototype.rect=function(D,j,W,q){if(isNaN(D)||isNaN(j)||isNaN(W)||isNaN(q))throw rr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,j),this.lineTo(D+W,j),this.lineTo(D+W,j+q),this.lineTo(D,j+q),this.lineTo(D,j),this.lineTo(D+W,j),this.lineTo(D,j)},d.prototype.fillRect=function(D,j,W,q){if(isNaN(D)||isNaN(j)||isNaN(W)||isNaN(q))throw rr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,j,W,q),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},d.prototype.strokeRect=function(D,j,W,q){if(isNaN(D)||isNaN(j)||isNaN(W)||isNaN(q))throw rr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(D,j,W,q),this.stroke())},d.prototype.clearRect=function(D,j,W,q){if(isNaN(D)||isNaN(j)||isNaN(W)||isNaN(q))throw rr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,j,W,q))},d.prototype.save=function(D){D=typeof D!="boolean"||D;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var q=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=q}},d.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(j),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(D){var j,W,q,ne;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))j=0,W=0,q=0,ne=0;else{var te=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(te!==null)j=parseInt(te[1]),W=parseInt(te[2]),q=parseInt(te[3]),ne=1;else if((te=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)j=parseInt(te[1]),W=parseInt(te[2]),q=parseInt(te[3]),ne=parseFloat(te[4]);else{if(ne=1,typeof D=="string"&&D.charAt(0)!=="#"){var Y=new Wce(D);D=Y.ok?Y.toHex():"#000000"}D.length===4?(j=D.substring(1,2),j+=j,W=D.substring(2,3),W+=W,q=D.substring(3,4),q+=q):(j=D.substring(1,3),W=D.substring(3,5),q=D.substring(5,7)),j=parseInt(j,16),W=parseInt(W,16),q=parseInt(q,16)}}return{r:j,g:W,b:q,a:ne,style:D}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(D,j,W,q){if(isNaN(j)||isNaN(W)||typeof D!="string")throw rr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(q=isNaN(q)?void 0:q,!f.call(this)){var ne=Z(this.ctx.transform.rotation),te=this.ctx.transform.scaleX;T.call(this,{text:D,x:j,y:W,scale:te,angle:ne,align:this.textAlign,maxWidth:q})}},d.prototype.strokeText=function(D,j,W,q){if(isNaN(j)||isNaN(W)||typeof D!="string")throw rr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){q=isNaN(q)?void 0:q;var ne=Z(this.ctx.transform.rotation),te=this.ctx.transform.scaleX;T.call(this,{text:D,x:j,y:W,scale:te,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:q})}},d.prototype.measureText=function(D){if(typeof D!="string")throw rr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,W=this.pdf.internal.scaleFactor,q=j.internal.getFontSize(),ne=j.getStringUnitWidth(D)*q/j.internal.scaleFactor,te=function(Y){var de=(Y=Y||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new te({width:ne*=Math.round(96*W/72*1e4)/1e4})},d.prototype.scale=function(D,j){if(isNaN(D)||isNaN(j))throw rr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new l(D,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},d.prototype.rotate=function(D){if(isNaN(D))throw rr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new l(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},d.prototype.translate=function(D,j){if(isNaN(D)||isNaN(j))throw rr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new l(1,0,0,1,D,j);this.ctx.transform=this.ctx.transform.multiply(W)},d.prototype.transform=function(D,j,W,q,ne,te){if(isNaN(D)||isNaN(j)||isNaN(W)||isNaN(q)||isNaN(ne)||isNaN(te))throw rr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Y=new l(D,j,W,q,ne,te);this.ctx.transform=this.ctx.transform.multiply(Y)},d.prototype.setTransform=function(D,j,W,q,ne,te){D=isNaN(D)?1:D,j=isNaN(j)?0:j,W=isNaN(W)?0:W,q=isNaN(q)?1:q,ne=isNaN(ne)?0:ne,te=isNaN(te)?0:te,this.ctx.transform=new l(D,j,W,q,ne,te)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(D,j,W,q,ne,te,Y,de,Se){var xe=this.pdf.getImageProperties(D),Ae=1,Pe=1,K=1,ge=1;q!==void 0&&de!==void 0&&(K=de/q,ge=Se/ne,Ae=xe.width/q*de/q,Pe=xe.height/ne*Se/ne),te===void 0&&(te=j,Y=W,j=0,W=0),q!==void 0&&de===void 0&&(de=q,Se=ne),q===void 0&&de===void 0&&(de=xe.width,Se=xe.height);for(var re,le=this.ctx.transform.decompose(),se=Z(le.rotate.shx),fe=new l,Ce=(fe=(fe=(fe=fe.multiply(le.translate)).multiply(le.skew)).multiply(le.scale)).applyToRectangle(new a(te-j*K,Y-W*ge,q*Ae,ne*Pe)),Ie=g.call(this,Ce),we=[],Ue=0;Ue<Ie.length;Ue+=1)we.indexOf(Ie[Ue])===-1&&we.push(Ie[Ue]);if(w(we),this.autoPaging)for(var Fe=we[0],Be=we[we.length-1],ke=Fe;ke<Be+1;ke++){this.pdf.setPage(ke);var Je=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xe=ke===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ie=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],z=ke===1?0:nt+(ke-2)*ie;if(this.ctx.clip_path.length!==0){var J=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(re,this.posX+this.margin[3],-z+Xe+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=J}var pe=JSON.parse(JSON.stringify(Ce));pe=v([pe],this.posX+this.margin[3],-z+Xe+this.ctx.prevPageLastElemOffset)[0];var Oe=(ke>Fe||ke<Be)&&m.call(this);Oe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Je,ie,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",pe.x,pe.y,pe.w,pe.h,null,null,se),Oe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,se)};var g=function(D,j,W){var q=[];j=j||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":q.push(Math.floor((D.y+ne)/W)+1);break;case"arc":q.push(Math.floor((D.y+ne-D.radius)/W)+1),q.push(Math.floor((D.y+ne+D.radius)/W)+1);break;case"qct":var te=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);q.push(Math.floor((te.y+ne)/W)+1),q.push(Math.floor((te.y+te.h+ne)/W)+1);break;case"bct":var Y=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);q.push(Math.floor((Y.y+ne)/W)+1),q.push(Math.floor((Y.y+Y.h+ne)/W)+1);break;case"rect":q.push(Math.floor((D.y+ne)/W)+1),q.push(Math.floor((D.y+D.h+ne)/W)+1)}for(var de=0;de<q.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<q[de];)b.call(this);return q},b=function(){var D=this.fillStyle,j=this.strokeStyle,W=this.font,q=this.lineCap,ne=this.lineWidth,te=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=j,this.font=W,this.lineCap=q,this.lineWidth=ne,this.lineJoin=te},v=function(D,j,W){for(var q=0;q<D.length;q++)switch(D[q].type){case"bct":D[q].x2+=j,D[q].y2+=W;case"qct":D[q].x1+=j,D[q].y1+=W;case"mt":case"lt":case"arc":default:D[q].x+=j,D[q].y+=W}return D},w=function(D){return D.sort(function(j,W){return j-W})},_=function(D,j){for(var W,q,ne=this.fillStyle,te=this.strokeStyle,Y=this.lineCap,de=this.lineWidth,Se=Math.abs(de*this.ctx.transform.scaleX),xe=this.lineJoin,Ae=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),K=[],ge=0;ge<Pe.length;ge++)if(Pe[ge].x!==void 0)for(var re=g.call(this,Pe[ge]),le=0;le<re.length;le+=1)K.indexOf(re[le])===-1&&K.push(re[le]);for(var se=0;se<K.length;se++)for(;this.pdf.internal.getNumberOfPages()<K[se];)b.call(this);if(w(K),this.autoPaging)for(var fe=K[0],Ce=K[K.length-1],Ie=fe;Ie<Ce+1;Ie++){this.pdf.setPage(Ie),this.fillStyle=ne,this.strokeStyle=te,this.lineCap=Y,this.lineWidth=Se,this.lineJoin=xe;var we=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ue=Ie===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ke=Ie===1?0:Fe+(Ie-2)*Be;if(this.ctx.clip_path.length!==0){var Je=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(W,this.posX+this.margin[3],-ke+Ue+this.ctx.prevPageLastElemOffset),S.call(this,D,!0),this.path=Je}if(q=JSON.parse(JSON.stringify(Ae)),this.path=v(q,this.posX+this.margin[3],-ke+Ue+this.ctx.prevPageLastElemOffset),j===!1||Ie===0){var Xe=(Ie>fe||Ie<Ce)&&m.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],we,Be,null).clip().discardPath()),S.call(this,D,j),Xe&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=Se,S.call(this,D,j),this.lineWidth=de;this.path=Ae},S=function(D,j){if((D!=="stroke"||j||!p.call(this))&&(D==="stroke"||j||!f.call(this))){for(var W,q,ne=[],te=this.path,Y=0;Y<te.length;Y++){var de=te[Y];switch(de.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:de,deltas:[],abs:[]});break;case"lt":var Se=ne.length;if(te[Y-1]&&!isNaN(te[Y-1].x)&&(W=[de.x-te[Y-1].x,de.y-te[Y-1].y],Se>0)){for(;Se>=0;Se--)if(ne[Se-1].close!==!0&&ne[Se-1].begin!==!0){ne[Se-1].deltas.push(W),ne[Se-1].abs.push(de);break}}break;case"bct":W=[de.x1-te[Y-1].x,de.y1-te[Y-1].y,de.x2-te[Y-1].x,de.y2-te[Y-1].y,de.x-te[Y-1].x,de.y-te[Y-1].y],ne[ne.length-1].deltas.push(W);break;case"qct":var xe=te[Y-1].x+2/3*(de.x1-te[Y-1].x),Ae=te[Y-1].y+2/3*(de.y1-te[Y-1].y),Pe=de.x+2/3*(de.x1-de.x),K=de.y+2/3*(de.y1-de.y),ge=de.x,re=de.y;W=[xe-te[Y-1].x,Ae-te[Y-1].y,Pe-te[Y-1].x,K-te[Y-1].y,ge-te[Y-1].x,re-te[Y-1].y],ne[ne.length-1].deltas.push(W);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(de)}}q=j?null:D==="stroke"?"stroke":"fill";for(var le=!1,se=0;se<ne.length;se++)if(ne[se].arc)for(var fe=ne[se].abs,Ce=0;Ce<fe.length;Ce++){var Ie=fe[Ce];Ie.type==="arc"?x.call(this,Ie.x,Ie.y,Ie.radius,Ie.startAngle,Ie.endAngle,Ie.counterclockwise,void 0,j,!le):O.call(this,Ie.x,Ie.y),le=!0}else if(ne[se].close===!0)this.pdf.internal.out("h"),le=!1;else if(ne[se].begin!==!0){var we=ne[se].start.x,Ue=ne[se].start.y;P.call(this,ne[se].deltas,we,Ue),le=!0}q&&I.call(this,q),j&&R.call(this)}},E=function(D){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-W;case"top":return D+j-W;case"hanging":return D+j-2*W;case"middle":return D+j/2-W;case"ideographic":return D;case"alphabetic":default:return D}},k=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(j,W){this.colorStops.push([j,W])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var x=function(D,j,W,q,ne,te,Y,de,Se){for(var xe=ee.call(this,W,q,ne,te),Ae=0;Ae<xe.length;Ae++){var Pe=xe[Ae];Ae===0&&(Se?C.call(this,Pe.x1+D,Pe.y1+j):O.call(this,Pe.x1+D,Pe.y1+j)),U.call(this,D,j,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}de?R.call(this):I.call(this,Y)},I=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(D,j){this.pdf.internal.out(n(D)+" "+r(j)+" m")},T=function(D){var j;switch(D.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var W=this.pdf.getTextDimensions(D.text),q=E.call(this,D.y),ne=k.call(this,q)-W.h,te=this.ctx.transform.applyToPoint(new o(D.x,q)),Y=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(Y.translate)).multiply(Y.skew)).multiply(Y.scale);for(var Se,xe,Ae,Pe=this.ctx.transform.applyToRectangle(new a(D.x,q,W.w,W.h)),K=de.applyToRectangle(new a(D.x,ne,W.w,W.h)),ge=g.call(this,K),re=[],le=0;le<ge.length;le+=1)re.indexOf(ge[le])===-1&&re.push(ge[le]);if(w(re),this.autoPaging)for(var se=re[0],fe=re[re.length-1],Ce=se;Ce<fe+1;Ce++){this.pdf.setPage(Ce);var Ie=Ce===1?this.posY+this.margin[0]:this.margin[0],we=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[2],Fe=Ue-this.margin[0],Be=this.pdf.internal.pageSize.width-this.margin[1],ke=Be-this.margin[3],Je=Ce===1?0:we+(Ce-2)*Fe;if(this.ctx.clip_path.length!==0){var Xe=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(Se,this.posX+this.margin[3],-1*Je+Ie),S.call(this,"fill",!0),this.path=Xe}var nt=v([JSON.parse(JSON.stringify(K))],this.posX+this.margin[3],-Je+Ie+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*D.scale),Ae=this.lineWidth,this.lineWidth=Ae*D.scale);var ie=this.autoPaging!=="text";if(ie||nt.y+nt.h<=Ue){if(ie||nt.y>=Ie&&nt.x<=Be){var z=ie?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Be-nt.x)[0],J=v([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-Je+Ie+this.ctx.prevPageLastElemOffset)[0],pe=ie&&(Ce>se||Ce<fe)&&m.call(this);pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,Fe,null).clip().discardPath()),this.pdf.text(z,J.x,J.y,{angle:D.angle,align:j,renderingMode:D.renderingMode}),pe&&this.pdf.restoreGraphicsState()}}else nt.y<Ue&&(this.ctx.prevPageLastElemOffset+=Ue-nt.y);D.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=Ae)}else D.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*D.scale),Ae=this.lineWidth,this.lineWidth=Ae*D.scale),this.pdf.text(D.text,te.x+this.posX,te.y+this.posY,{angle:D.angle,align:j,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=Ae)},O=function(D,j,W,q){W=W||0,q=q||0,this.pdf.internal.out(n(D+W)+" "+r(j+q)+" l")},P=function(D,j,W){return this.pdf.lines(D,j,W,null,null)},U=function(D,j,W,q,ne,te,Y,de){this.pdf.internal.out([e(s(W+D)),e(i(q+j)),e(s(ne+D)),e(i(te+j)),e(s(Y+D)),e(i(de+j)),"c"].join(" "))},ee=function(D,j,W,q){for(var ne=2*Math.PI,te=Math.PI/2;j>W;)j-=ne;var Y=Math.abs(W-j);Y<ne&&q&&(Y=ne-Y);for(var de=[],Se=q?-1:1,xe=j;Y>1e-5;){var Ae=xe+Se*Math.min(Y,te);de.push(X.call(this,D,xe,Ae)),Y-=Math.abs(Ae-xe),xe=Ae}return de},X=function(D,j,W){var q=(W-j)/2,ne=D*Math.cos(q),te=D*Math.sin(q),Y=ne,de=-te,Se=Y*Y+de*de,xe=Se+Y*ne+de*te,Ae=4/3*(Math.sqrt(2*Se*xe)-xe)/(Y*te-de*ne),Pe=Y-Ae*de,K=de+Ae*Y,ge=Pe,re=-K,le=q+j,se=Math.cos(le),fe=Math.sin(le);return{x1:D*Math.cos(j),y1:D*Math.sin(j),x2:Pe*se-K*fe,y2:Pe*fe+K*se,x3:ge*se-re*fe,y3:ge*fe+re*se,x4:D*Math.cos(W),y4:D*Math.sin(W)}},Z=function(D){return 180*D/Math.PI},F=function(D,j,W,q,ne,te){var Y=D+.5*(W-D),de=j+.5*(q-j),Se=ne+.5*(W-ne),xe=te+.5*(q-te),Ae=Math.min(D,ne,Y,Se),Pe=Math.max(D,ne,Y,Se),K=Math.min(j,te,de,xe),ge=Math.max(j,te,de,xe);return new a(Ae,K,Pe-Ae,ge-K)},M=function(D,j,W,q,ne,te,Y,de){var Se,xe,Ae,Pe,K,ge,re,le,se,fe,Ce,Ie,we,Ue,Fe=W-D,Be=q-j,ke=ne-W,Je=te-q,Xe=Y-ne,nt=de-te;for(xe=0;xe<41;xe++)se=(re=(Ae=D+(Se=xe/40)*Fe)+Se*((K=W+Se*ke)-Ae))+Se*(K+Se*(ne+Se*Xe-K)-re),fe=(le=(Pe=j+Se*Be)+Se*((ge=q+Se*Je)-Pe))+Se*(ge+Se*(te+Se*nt-ge)-le),xe==0?(Ce=se,Ie=fe,we=se,Ue=fe):(Ce=Math.min(Ce,se),Ie=Math.min(Ie,fe),we=Math.max(we,se),Ue=Math.max(Ue,fe));return new a(Math.round(Ce),Math.round(Ie),Math.round(we-Ce),Math.round(Ue-Ie))},G=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,j,W=(D=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:j}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(Vt.API),function(t){var e=function(i){var o,a,l,c,u,d,h,f,p,m;for(a=[],l=0,c=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;c>l;l+=4)(u=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(d=(u=((u=((u=((u=(u-(m=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)-(h=u%85))/85)%85,a.push(d+33,h+33,f+33,p+33,m+33)):a.push(122);return function(g,b){for(var v=b;v>0;v--)g.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(i){var o,a,l,c,u,d=String,h="length",f=255,p="charCodeAt",m="slice",g="replace";for(i[m](-2),i=i[m](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),l=[],c=0,u=(i+=o="uuuuu"[m](i[h]%5||5))[h];u>c;c+=5)a=52200625*(i[p](c)-33)+614125*(i[p](c+1)-33)+7225*(i[p](c+2)-33)+85*(i[p](c+3)-33)+(i[p](c+4)-33),l.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(b,v){for(var w=v;w>0;w--)b.pop()}(l,o[h]),d.fromCharCode.apply(d,l)},r=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var a="",l=0;l<i.length;l+=2)a+=String.fromCharCode("0x"+(i[l]+i[l+1]));return a},s=function(i){for(var o=new Uint8Array(i.length),a=i.length;a--;)o[a]=i.charCodeAt(a);return i=(o=VR(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(i,o){var a=0,l=i||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Vt.API),function(t){t.loadFile=function(e,n,r){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var d=new XMLHttpRequest,h=0,f=function(p){var m=p.length,g=[],b=String.fromCharCode;for(h=0;h<m;h+=1)g.push(b(255&p.charCodeAt(h)));return g.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(f(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return f(d.responseText)}(s,i,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Vt.API),function(t){function e(){return(qt.html2canvas?Promise.resolve(qt.html2canvas):ye(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(qt.DOMPurify?Promise.resolve(qt.DOMPurify):ye(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Yn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},s=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},i=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,a){return o.__proto__=a||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:s("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var f=c[h],p=f.src.find(function(m){return m.format==="truetype"});p&&l.addFont(p.url,f.ref.name,f.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),a(this.prop.container,d)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},i.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},i.prototype.get=function(o,a){return this.then(function(){var l=o in i.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},i.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Vt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,u).then(function(d){return l.updateProgress(1),d})})},i.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},i.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},i.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return i.convert(a,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Vt.getPageSize=function(o,a,l){if(Yn(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,d=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var f,p=0,m=0;if(h.hasOwnProperty(d))p=h[d][1]/u,m=h[d][0]/u;else try{p=l[1],m=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",m>p&&(f=m,m=p,p=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",p>m&&(f=m,m=p,p=f)}return{width:m,height:p,unit:a,k:u,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(JR):null;var l=new i(a);return a.worker?l:l.from(o).doCallback()}}(Vt.API),Vt.API.addJS=function(t){return RH=t,this.internal.events.subscribe("postPutResources",function(){y2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(y2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),IH=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+RH+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){y2!==void 0&&IH!==void 0&&this.internal.out("/Names <</JavaScript "+y2+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var d=n.internal.newObject();u.push(d);var h=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<u.length;i++)n.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,i){var o={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(Vt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,i,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),p=d.length,m={width:0,height:0,numcomponents:1},g=4;g<p;g+=2){if(g+=f,e.indexOf(d.charCodeAt(g+1))!==-1){h=256*d.charCodeAt(g+5)+d.charCodeAt(g+6),m={width:256*d.charCodeAt(g+7)+d.charCodeAt(g+8),height:h,numcomponents:d.charCodeAt(g+9)};break}f=256*d.charCodeAt(g+2)+d.charCodeAt(g+3)}return m}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:s}}return u}}(Vt.API);var $m,v2,OH,LH,DH,jJe=function(){var t,e,n;function r(i){var o,a,l,c,u,d,h,f,p,m,g,b,v,w;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),p=function(){var _,S;for(S=[],_=0;_<4;++_)S.push(String.fromCharCode(this.data[this.pos++]));return S}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*u/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(p==="fdAT"&&(this.pos+=4,o-=4),i=d?.data||this.imgData,b=0;0<=o?b<o:b>o;0<=o?++b:--b)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((m=l-this.transparency.indexed.length)>0)for(v=0;0<=m?v<m:v>m;0<=m?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(g=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,g.slice(0,h)),this.text[f]=String.fromCharCode.apply(String,g.slice(h+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var o,a;for(a=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(d,h,f,p){var m,g,b,v,w,_,S,E,k,x,I,R,C,T,O,P,U,ee,X,Z,F,M=Math.ceil((c.width-d)/f),G=Math.ceil((c.height-h)/p),D=c.width==M&&c.height==G;for(T=o*M,R=D?a:new Uint8Array(T*G),_=i.length,C=0,g=0;C<G&&l<_;){switch(i[l++]){case 0:for(v=U=0;U<T;v=U+=1)R[g++]=i[l++];break;case 1:for(v=ee=0;ee<T;v=ee+=1)m=i[l++],w=v<o?0:R[g-o],R[g++]=(m+w)%256;break;case 2:for(v=X=0;X<T;v=X+=1)m=i[l++],b=(v-v%o)/o,O=C&&R[(C-1)*T+b*o+v%o],R[g++]=(O+m)%256;break;case 3:for(v=Z=0;Z<T;v=Z+=1)m=i[l++],b=(v-v%o)/o,w=v<o?0:R[g-o],O=C&&R[(C-1)*T+b*o+v%o],R[g++]=(m+Math.floor((w+O)/2))%256;break;case 4:for(v=F=0;F<T;v=F+=1)m=i[l++],b=(v-v%o)/o,w=v<o?0:R[g-o],C===0?O=P=0:(O=R[(C-1)*T+b*o+v%o],P=b&&R[(C-1)*T+(b-1)*o+v%o]),S=w+O-P,E=Math.abs(S-w),x=Math.abs(S-O),I=Math.abs(S-P),k=E<=x&&E<=I?w:x<=I?O:P,R[g++]=(m+k)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!D){var j=((h+C*p)*c.width+d)*o,W=C*T;for(v=0;v<M;v+=1){for(var q=0;q<o;q+=1)a[j++]=R[W++];j+=(f-1)*o}}C++}}return i=mJe(i),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},r.prototype.decodePalette=function(){var i,o,a,l,c,u,d,h,f;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,i=0,o=d=0,h=a.length;d<h;o=d+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(f=u[i++])!=null?f:255;return c},r.prototype.copyToImageData=function(i,o){var a,l,c,u,d,h,f,p,m,g,b;if(l=this.colors,m=null,a=this.hasAlphaChannel,this.palette.length&&(m=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),l=4,a=!0),p=(c=i.data||i).length,d=m||o,u=h=0,l===1)for(;u<p;)f=m?4*o[u/4]:h,g=d[f++],c[u++]=g,c[u++]=g,c[u++]=g,c[u++]=a?d[f++]:255,h=f;else for(;u<p;)f=m?4*o[u/4]:h,c[u++]=d[f++],c[u++]=d[f++],c[u++]=d[f++],c[u++]=a?d[f++]:255,h=f},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(qt)==="[object Window]"){try{e=qt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(i){var o;if(s()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var o,a,l,c,u,d,h,f;if(this.animation){for(f=[],a=u=0,d=(h=this.animation.frames).length;u<d;a=++u)o=h[a],l=i.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,f.push(o.image=t(l));return f}},r.prototype.renderFrame=function(i,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&i.clearRect(0,0,this.width,this.height),c?.disposeOp===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):c?.disposeOp===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&i.clearRect(a.xOffset,a.yOffset,a.width,a.height),i.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(i){var o,a,l,c,u,d,h=this;return a=0,d=this.animation,c=d.numFrames,l=d.frames,u=d.numPlays,(o=function(){var f,p;if(f=a++%c,p=l[f],h.renderFrame(i,f),c>1&&a/c<u)return h.animation._timeout=setTimeout(o,p.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var o,a;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function FJe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,o=1<<(7&s)+1;t[e++],t[e++];var a=null,l=null;i&&(a=e,l=o,e+=3*o);var c=!0,u=[],d=0,h=null,f=0,p=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var m=t[e++];d=t[e++]|t[e++]<<8,h=t[e++],!(1&m)&&(h=null),f=m>>2&7,e++;break;case 254:for(;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,_=t[e++],S=_>>6&1,E=1<<(7&_)+1,k=a,x=l,I=!1;_>>7&&(I=!0,k=e,x=E,e+=3*E);var R=e;for(e++;;){var C;if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}u.push({x:g,y:b,width:v,height:w,has_local_palette:I,palette_offset:k,palette_size:x,data_offset:R,data_length:e-R,transparent_index:h,interlaced:!!S,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(T){if(T<0||T>=u.length)throw new Error("Frame index out of range.");return u[T]},this.decodeAndBlitFrameBGRA=function(T,O){var P=this.frameInfo(T),U=P.width*P.height,ee=new Uint8Array(U);MH(t,P.data_offset,ee,U);var X=P.palette_offset,Z=P.transparent_index;Z===null&&(Z=256);var F=P.width,M=n-F,G=F,D=4*(P.y*n+P.x),j=4*((P.y+P.height)*n+P.x),W=D,q=4*M;P.interlaced===!0&&(q+=4*n*7);for(var ne=8,te=0,Y=ee.length;te<Y;++te){var de=ee[te];if(G===0&&(G=F,(W+=q)>=j&&(q=4*M+4*n*(ne-1),W=D+(F+M)*(ne<<1),ne>>=1)),de===Z)W+=4;else{var Se=t[X+3*de],xe=t[X+3*de+1],Ae=t[X+3*de+2];O[W++]=Ae,O[W++]=xe,O[W++]=Se,O[W++]=255}--G}},this.decodeAndBlitFrameRGBA=function(T,O){var P=this.frameInfo(T),U=P.width*P.height,ee=new Uint8Array(U);MH(t,P.data_offset,ee,U);var X=P.palette_offset,Z=P.transparent_index;Z===null&&(Z=256);var F=P.width,M=n-F,G=F,D=4*(P.y*n+P.x),j=4*((P.y+P.height)*n+P.x),W=D,q=4*M;P.interlaced===!0&&(q+=4*n*7);for(var ne=8,te=0,Y=ee.length;te<Y;++te){var de=ee[te];if(G===0&&(G=F,(W+=q)>=j&&(q=4*M+4*n*(ne-1),W=D+(F+M)*(ne<<1),ne>>=1)),de===Z)W+=4;else{var Se=t[X+3*de],xe=t[X+3*de+1],Ae=t[X+3*de+2];O[W++]=Se,O[W++]=xe,O[W++]=Ae,O[W++]=255}--G}}}function MH(t,e,n,r){for(var s=t[e++],i=1<<s,o=i+1,a=o+1,l=s+1,c=(1<<l)-1,u=0,d=0,h=0,f=t[e++],p=new Int32Array(4096),m=null;;){for(;u<16&&f!==0;)d|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<l)break;var g=d&c;if(d>>=l,u-=l,g!==i){if(g===o)break;for(var b=g<a?g:m,v=0,w=b;w>i;)w=p[w]>>8,++v;var _=w;if(h+v+(b!==g?1:0)>r)return void rr.log("Warning, gif stream longer than expected.");n[h++]=_;var S=h+=v;for(b!==g&&(n[h++]=_),w=b;v--;)w=p[w],n[--S]=255&w,w>>=8;m!==null&&a<4096&&(p[a++]=m<<8|_,a>=c+1&&l<12&&(++l,c=c<<1|1)),m=g}else a=o+1,c=(1<<(l=s+1))-1,m=null}return h!==r&&rr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function xP(t){var e,n,r,s,i,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),p=new Array(64),m=[],g=0,b=7,v=new Array(64),w=new Array(64),_=new Array(64),S=new Array(256),E=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],x=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(D,j){for(var W=0,q=0,ne=new Array,te=1;te<=16;te++){for(var Y=1;Y<=D[te];Y++)ne[j[q]]=[],ne[j[q]][0]=W,ne[j[q]][1]=te,q++,W++;W*=2}return ne}function X(D){for(var j=D[0],W=D[1]-1;W>=0;)j&1<<W&&(g|=1<<b),W--,--b<0&&(g==255?(Z(255),Z(0)):Z(g),b=7,g=0)}function Z(D){m.push(D)}function F(D){Z(D>>8&255),Z(255&D)}function M(D,j,W,q,ne){for(var te,Y=ne[0],de=ne[240],Se=function(fe,Ce){var Ie,we,Ue,Fe,Be,ke,Je,Xe,nt,ie,z=0;for(nt=0;nt<8;++nt){Ie=fe[z],we=fe[z+1],Ue=fe[z+2],Fe=fe[z+3],Be=fe[z+4],ke=fe[z+5],Je=fe[z+6];var J=Ie+(Xe=fe[z+7]),pe=Ie-Xe,Oe=we+Je,He=we-Je,Ge=Ue+ke,$t=Ue-ke,Lt=Fe+Be,kn=Fe-Be,Yt=J+Lt,rn=J-Lt,xi=Oe+Ge,er=Oe-Ge;fe[z]=Yt+xi,fe[z+4]=Yt-xi;var Zt=.707106781*(er+rn);fe[z+2]=rn+Zt,fe[z+6]=rn-Zt;var zn=.382683433*((Yt=kn+$t)-(er=He+pe)),Bh=.5411961*Yt+zn,Ds=1.306562965*er+zn,Tl=.707106781*(xi=$t+He),Pl=pe+Tl,Wt=pe-Tl;fe[z+5]=Wt+Bh,fe[z+3]=Wt-Bh,fe[z+1]=Pl+Ds,fe[z+7]=Pl-Ds,z+=8}for(z=0,nt=0;nt<8;++nt){Ie=fe[z],we=fe[z+8],Ue=fe[z+16],Fe=fe[z+24],Be=fe[z+32],ke=fe[z+40],Je=fe[z+48];var Ha=Ie+(Xe=fe[z+56]),Nl=Ie-Xe,zi=we+Je,us=we-Je,Xr=Ue+ke,xo=Ue-ke,tm=Fe+Be,Wc=Fe-Be,za=Ha+tm,Va=Ha-tm,Wa=zi+Xr,Il=zi-Xr;fe[z]=za+Wa,fe[z+32]=za-Wa;var Zo=.707106781*(Il+Va);fe[z+16]=Va+Zo,fe[z+48]=Va-Zo;var Rl=.382683433*((za=Wc+xo)-(Il=us+Nl)),$h=.5411961*za+Rl,nm=1.306562965*Il+Rl,rm=.707106781*(Wa=xo+us),sm=Nl+rm,im=Nl-rm;fe[z+40]=im+$h,fe[z+24]=im-$h,fe[z+8]=sm+nm,fe[z+56]=sm-nm,z++}for(nt=0;nt<64;++nt)ie=fe[nt]*Ce[nt],f[nt]=ie>0?ie+.5|0:ie-.5|0;return f}(D,j),xe=0;xe<64;++xe)p[k[xe]]=Se[xe];var Ae=p[0]-W;W=p[0],Ae==0?X(q[0]):(X(q[h[te=32767+Ae]]),X(d[te]));for(var Pe=63;Pe>0&&p[Pe]==0;)Pe--;if(Pe==0)return X(Y),W;for(var K,ge=1;ge<=Pe;){for(var re=ge;p[ge]==0&&ge<=Pe;)++ge;var le=ge-re;if(le>=16){K=le>>4;for(var se=1;se<=K;++se)X(de);le&=15}te=32767+p[ge],X(ne[(le<<4)+h[te]]),X(d[te]),ge++}return Pe!=63&&X(Y),W}function G(D){D=Math.min(Math.max(D,1),100),i!=D&&(function(j){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],q=0;q<64;q++){var ne=o((W[q]*j+50)/100);ne=Math.min(Math.max(ne,1),255),a[k[q]]=ne}for(var te=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Y=0;Y<64;Y++){var de=o((te[Y]*j+50)/100);de=Math.min(Math.max(de,1),255),l[k[Y]]=de}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,Ae=0;Ae<8;Ae++)for(var Pe=0;Pe<8;Pe++)c[xe]=1/(a[k[xe]]*Se[Ae]*Se[Pe]*8),u[xe]=1/(l[k[xe]]*Se[Ae]*Se[Pe]*8),xe++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),i=D)}this.encode=function(D,j){j&&G(j),m=new Array,g=0,b=7,F(65496),F(65504),F(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),F(1),F(1),Z(0),Z(0),function(){F(65499),F(132),Z(0);for(var we=0;we<64;we++)Z(a[we]);Z(1);for(var Ue=0;Ue<64;Ue++)Z(l[Ue])}(),function(we,Ue){F(65472),F(17),Z(8),F(Ue),F(we),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)}(D.width,D.height),function(){F(65476),F(418),Z(0);for(var we=0;we<16;we++)Z(x[we+1]);for(var Ue=0;Ue<=11;Ue++)Z(I[Ue]);Z(16);for(var Fe=0;Fe<16;Fe++)Z(R[Fe+1]);for(var Be=0;Be<=161;Be++)Z(C[Be]);Z(1);for(var ke=0;ke<16;ke++)Z(T[ke+1]);for(var Je=0;Je<=11;Je++)Z(O[Je]);Z(17);for(var Xe=0;Xe<16;Xe++)Z(P[Xe+1]);for(var nt=0;nt<=161;nt++)Z(U[nt])}(),F(65498),F(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var W=0,q=0,ne=0;g=0,b=7,this.encode.displayName="_encode_";for(var te,Y,de,Se,xe,Ae,Pe,K,ge,re=D.data,le=D.width,se=D.height,fe=4*le,Ce=0;Ce<se;){for(te=0;te<fe;){for(xe=fe*Ce+te,Pe=-1,K=0,ge=0;ge<64;ge++)Ae=xe+(K=ge>>3)*fe+(Pe=4*(7&ge)),Ce+K>=se&&(Ae-=fe*(Ce+1+K-se)),te+Pe>=fe&&(Ae-=te+Pe-fe+4),Y=re[Ae++],de=re[Ae++],Se=re[Ae++],v[ge]=(E[Y]+E[de+256>>0]+E[Se+512>>0]>>16)-128,w[ge]=(E[Y+768>>0]+E[de+1024>>0]+E[Se+1280>>0]>>16)-128,_[ge]=(E[Y+1280>>0]+E[de+1536>>0]+E[Se+1792>>0]>>16)-128;W=M(v,c,W,e,r),q=M(w,u,q,n,s),ne=M(_,u,ne,n,s),te+=32}Ce+=8}if(b>=0){var Ie=[];Ie[1]=b+1,Ie[0]=(1<<b+1)-1,X(Ie)}return F(65497),new Uint8Array(m)},t=t||50,function(){for(var D=String.fromCharCode,j=0;j<256;j++)S[j]=D(j)}(),e=ee(x,I),n=ee(T,O),r=ee(R,C),s=ee(P,U),function(){for(var D=1,j=2,W=1;W<=15;W++){for(var q=D;q<j;q++)h[32767+q]=W,d[32767+q]=[],d[32767+q][1]=W,d[32767+q][0]=q;for(var ne=-(j-1);ne<=-D;ne++)h[32767+ne]=W,d[32767+ne]=[],d[32767+ne][1]=W,d[32767+ne][0]=j-1+ne;D<<=1,j<<=1}}(),function(){for(var D=0;D<256;D++)E[D]=19595*D,E[D+256>>0]=38470*D,E[D+512>>0]=7471*D+32768,E[D+768>>0]=-11059*D,E[D+1024>>0]=-21709*D,E[D+1280>>0]=32768*D+8421375,E[D+1536>>0]=-27439*D,E[D+1792>>0]=-5329*D}(),G(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function tl(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jH(t){function e(x){if(!x)throw Error("assert :P")}function n(x,I,R){for(var C=0;4>C;C++)if(x[I+C]!=R.charCodeAt(C))return!0;return!1}function r(x,I,R,C,T){for(var O=0;O<T;O++)x[I+O]=R[C+O]}function s(x,I,R,C){for(var T=0;T<C;T++)x[I+T]=R}function i(x){return new Int32Array(x)}function o(x,I){for(var R=[],C=0;C<x;C++)R.push(new I);return R}function a(x,I){var R=[];return function C(T,O,P){for(var U=P[O],ee=0;ee<U&&(T.push(P.length>O+1?[]:new I),!(P.length<O+1));ee++)C(T[ee],O+1,P)}(R,0,x),R}var l=function(){var x=this;function I(A,L){for(var H=1<<L-1>>>0;A&H;)H>>>=1;return H?(A&H-1)+H:A}function R(A,L,H,Q,oe){e(!(Q%H));do A[L+(Q-=H)]=oe;while(0<Q)}function C(A,L,H,Q,oe){if(e(2328>=oe),512>=oe)var ce=i(512);else if((ce=i(oe))==null)return 0;return function(ue,he,me,ve,Le,Ke){var Ye,$e,st=he,Ze=1<<me,De=i(16),Me=i(16);for(e(Le!=0),e(ve!=null),e(ue!=null),e(0<me),$e=0;$e<Le;++$e){if(15<ve[$e])return 0;++De[ve[$e]]}if(De[0]==Le)return 0;for(Me[1]=0,Ye=1;15>Ye;++Ye){if(De[Ye]>1<<Ye)return 0;Me[Ye+1]=Me[Ye]+De[Ye]}for($e=0;$e<Le;++$e)Ye=ve[$e],0<ve[$e]&&(Ke[Me[Ye]++]=$e);if(Me[15]==1)return(ve=new T).g=0,ve.value=Ke[0],R(ue,st,1,Ze,ve),Ze;var tt,ct=-1,rt=Ze-1,Pt=0,St=1,zt=1,kt=1<<me;for($e=0,Ye=1,Le=2;Ye<=me;++Ye,Le<<=1){if(St+=zt<<=1,0>(zt-=De[Ye]))return 0;for(;0<De[Ye];--De[Ye])(ve=new T).g=Ye,ve.value=Ke[$e++],R(ue,st+Pt,Le,kt,ve),Pt=I(Pt,Ye)}for(Ye=me+1,Le=2;15>=Ye;++Ye,Le<<=1){if(St+=zt<<=1,0>(zt-=De[Ye]))return 0;for(;0<De[Ye];--De[Ye]){if(ve=new T,(Pt&rt)!=ct){for(st+=kt,tt=1<<(ct=Ye)-me;15>ct&&!(0>=(tt-=De[ct]));)++ct,tt<<=1;Ze+=kt=1<<(tt=ct-me),ue[he+(ct=Pt&rt)].g=tt+me,ue[he+ct].value=st-he-ct}ve.g=Ye-me,ve.value=Ke[$e++],R(ue,st+(Pt>>me),Le,kt,ve),Pt=I(Pt,Ye)}}return St!=2*Me[15]-1?0:Ze}(A,L,H,Q,oe,ce)}function T(){this.value=this.g=0}function O(){this.value=this.g=0}function P(){this.G=o(5,T),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ms,O)}function U(A,L,H,Q){e(A!=null),e(L!=null),e(2147483648>Q),A.Ca=254,A.I=0,A.b=-8,A.Ka=0,A.oa=L,A.pa=H,A.Jd=L,A.Yc=H+Q,A.Zc=4<=Q?H+Q-4+1:H,te(A)}function ee(A,L){for(var H=0;0<L--;)H|=de(A,128)<<L;return H}function X(A,L){var H=ee(A,L);return Y(A)?-H:H}function Z(A,L,H,Q){var oe,ce=0;for(e(A!=null),e(L!=null),e(4294967288>Q),A.Sb=Q,A.Ra=0,A.u=0,A.h=0,4<Q&&(Q=4),oe=0;oe<Q;++oe)ce+=L[H+oe]<<8*oe;A.Ra=ce,A.bb=Q,A.oa=L,A.pa=H}function F(A){for(;8<=A.u&&A.bb<A.Sb;)A.Ra>>>=8,A.Ra+=A.oa[A.pa+A.bb]<<wm-8>>>0,++A.bb,A.u-=8;W(A)&&(A.h=1,A.u=0)}function M(A,L){if(e(0<=L),!A.h&&L<=vm){var H=j(A)&ym[L];return A.u+=L,F(A),H}return A.h=1,A.u=0}function G(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(A){return A.Ra>>>(A.u&wm-1)>>>0}function W(A){return e(A.bb<=A.Sb),A.h||A.bb==A.Sb&&A.u>wm}function q(A,L){A.u=L,A.h=W(A)}function ne(A){A.u>=Kb&&(e(A.u>=Kb),F(A))}function te(A){e(A!=null&&A.oa!=null),A.pa<A.Zc?(A.I=(A.oa[A.pa++]|A.I<<8)>>>0,A.b+=8):(e(A!=null&&A.oa!=null),A.pa<A.Yc?(A.b+=8,A.I=A.oa[A.pa++]|A.I<<8):A.Ka?A.b=0:(A.I<<=8,A.b+=8,A.Ka=1))}function Y(A){return ee(A,1)}function de(A,L){var H=A.Ca;0>A.b&&te(A);var Q=A.b,oe=H*L>>>8,ce=(A.I>>>Q>oe)+0;for(ce?(H-=oe,A.I-=oe+1<<Q>>>0):H=oe+1,Q=H,oe=0;256<=Q;)oe+=8,Q>>=8;return Q=7^oe+Wi[Q],A.b-=Q,A.Ca=(H<<Q)-1,ce}function Se(A,L,H){A[L+0]=H>>24&255,A[L+1]=H>>16&255,A[L+2]=H>>8&255,A[L+3]=H>>0&255}function xe(A,L){return A[L+0]<<0|A[L+1]<<8}function Ae(A,L){return xe(A,L)|A[L+2]<<16}function Pe(A,L){return xe(A,L)|xe(A,L+2)<<16}function K(A,L){var H=1<<L;return e(A!=null),e(0<L),A.X=i(H),A.X==null?0:(A.Mb=32-L,A.Xa=L,1)}function ge(A,L){e(A!=null),e(L!=null),e(A.Xa==L.Xa),r(L.X,0,A.X,0,1<<L.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function le(A,L,H,Q){e(H!=null),e(Q!=null);var oe=H[0],ce=Q[0];return oe==0&&(oe=(A*ce+L/2)/L),ce==0&&(ce=(L*oe+A/2)/A),0>=oe||0>=ce?0:(H[0]=oe,Q[0]=ce,1)}function se(A,L){return A+(1<<L)-1>>>L}function fe(A,L){return((4278255360&A)+(4278255360&L)>>>0&4278255360)+((16711935&A)+(16711935&L)>>>0&16711935)>>>0}function Ce(A,L){x[L]=function(H,Q,oe,ce,ue,he,me){var ve;for(ve=0;ve<ue;++ve){var Le=x[A](he[me+ve-1],oe,ce+ve);he[me+ve]=fe(H[Q+ve],Le)}}}function Ie(){this.ud=this.hd=this.jd=0}function we(A,L){return((4278124286&(A^L))>>>1)+(A&L)>>>0}function Ue(A){return 0<=A&&256>A?A:0>A?0:255<A?255:void 0}function Fe(A,L){return Ue(A+(A-L+.5>>1))}function Be(A,L,H){return Math.abs(L-H)-Math.abs(A-H)}function ke(A,L,H,Q,oe,ce,ue){for(Q=ce[ue-1],H=0;H<oe;++H)ce[ue+H]=Q=fe(A[L+H],Q)}function Je(A,L,H,Q,oe){var ce;for(ce=0;ce<H;++ce){var ue=A[L+ce],he=ue>>8&255,me=16711935&(me=(me=16711935&ue)+((he<<16)+he));Q[oe+ce]=(4278255360&ue)+me>>>0}}function Xe(A,L){L.jd=A>>0&255,L.hd=A>>8&255,L.ud=A>>16&255}function nt(A,L,H,Q,oe,ce){var ue;for(ue=0;ue<Q;++ue){var he=L[H+ue],me=he>>>8,ve=he,Le=255&(Le=(Le=he>>>16)+((A.jd<<24>>24)*(me<<24>>24)>>>5));ve=255&(ve=(ve=ve+((A.hd<<24>>24)*(me<<24>>24)>>>5))+((A.ud<<24>>24)*(Le<<24>>24)>>>5)),oe[ce+ue]=(4278255360&he)+(Le<<16)+ve}}function ie(A,L,H,Q,oe){x[L]=function(ce,ue,he,me,ve,Le,Ke,Ye,$e){for(me=Ke;me<Ye;++me)for(Ke=0;Ke<$e;++Ke)ve[Le++]=oe(he[Q(ce[ue++])])},x[A]=function(ce,ue,he,me,ve,Le,Ke){var Ye=8>>ce.b,$e=ce.Ea,st=ce.K[0],Ze=ce.w;if(8>Ye)for(ce=(1<<ce.b)-1,Ze=(1<<Ye)-1;ue<he;++ue){var De,Me=0;for(De=0;De<$e;++De)De&ce||(Me=Q(me[ve++])),Le[Ke++]=oe(st[Me&Ze]),Me>>=Ye}else x["VP8LMapColor"+H](me,ve,st,Ze,Le,Ke,ue,he,$e)}}function z(A,L,H,Q,oe){for(H=L+H;L<H;){var ce=A[L++];Q[oe++]=ce>>16&255,Q[oe++]=ce>>8&255,Q[oe++]=ce>>0&255}}function J(A,L,H,Q,oe){for(H=L+H;L<H;){var ce=A[L++];Q[oe++]=ce>>16&255,Q[oe++]=ce>>8&255,Q[oe++]=ce>>0&255,Q[oe++]=ce>>24&255}}function pe(A,L,H,Q,oe){for(H=L+H;L<H;){var ce=(ue=A[L++])>>16&240|ue>>12&15,ue=ue>>0&240|ue>>28&15;Q[oe++]=ce,Q[oe++]=ue}}function Oe(A,L,H,Q,oe){for(H=L+H;L<H;){var ce=(ue=A[L++])>>16&248|ue>>13&7,ue=ue>>5&224|ue>>3&31;Q[oe++]=ce,Q[oe++]=ue}}function He(A,L,H,Q,oe){for(H=L+H;L<H;){var ce=A[L++];Q[oe++]=ce>>0&255,Q[oe++]=ce>>8&255,Q[oe++]=ce>>16&255}}function Ge(A,L,H,Q,oe,ce){if(ce==0)for(H=L+H;L<H;)Se(Q,((ce=A[L++])[0]>>24|ce[1]>>8&65280|ce[2]<<8&16711680|ce[3]<<24)>>>0),oe+=32;else r(Q,oe,A,L,H)}function $t(A,L){x[L][0]=x[A+"0"],x[L][1]=x[A+"1"],x[L][2]=x[A+"2"],x[L][3]=x[A+"3"],x[L][4]=x[A+"4"],x[L][5]=x[A+"5"],x[L][6]=x[A+"6"],x[L][7]=x[A+"7"],x[L][8]=x[A+"8"],x[L][9]=x[A+"9"],x[L][10]=x[A+"10"],x[L][11]=x[A+"11"],x[L][12]=x[A+"12"],x[L][13]=x[A+"13"],x[L][14]=x[A+"0"],x[L][15]=x[A+"0"]}function Lt(A){return A==k5||A==C5||A==b_||A==A5}function kn(){this.eb=[],this.size=this.A=this.fb=0}function Yt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function rn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new kn,this.f.kb=new Yt,this.sd=null}function xi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function er(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Zt(A){return alert("todo:WebPSamplerProcessPlane"),A.T}function zn(A,L){var H=A.T,Q=L.ba.f.RGBA,oe=Q.eb,ce=Q.fb+A.ka*Q.A,ue=sa[L.ba.S],he=A.y,me=A.O,ve=A.f,Le=A.N,Ke=A.ea,Ye=A.W,$e=L.cc,st=L.dc,Ze=L.Mc,De=L.Nc,Me=A.ka,tt=A.ka+A.T,ct=A.U,rt=ct+1>>1;for(Me==0?ue(he,me,null,null,ve,Le,Ke,Ye,ve,Le,Ke,Ye,oe,ce,null,null,ct):(ue(L.ec,L.fc,he,me,$e,st,Ze,De,ve,Le,Ke,Ye,oe,ce-Q.A,oe,ce,ct),++H);Me+2<tt;Me+=2)$e=ve,st=Le,Ze=Ke,De=Ye,Le+=A.Rc,Ye+=A.Rc,ce+=2*Q.A,ue(he,(me+=2*A.fa)-A.fa,he,me,$e,st,Ze,De,ve,Le,Ke,Ye,oe,ce-Q.A,oe,ce,ct);return me+=A.fa,A.j+tt<A.o?(r(L.ec,L.fc,he,me,ct),r(L.cc,L.dc,ve,Le,rt),r(L.Mc,L.Nc,Ke,Ye,rt),H--):1&tt||ue(he,me,null,null,ve,Le,Ke,Ye,ve,Le,Ke,Ye,oe,ce+Q.A,null,null,ct),H}function Bh(A,L,H){var Q=A.F,oe=[A.J];if(Q!=null){var ce=A.U,ue=L.ba.S,he=ue==g_||ue==b_;L=L.ba.f.RGBA;var me=[0],ve=A.ka;me[0]=A.T,A.Kb&&(ve==0?--me[0]:(--ve,oe[0]-=A.width),A.j+A.ka+A.T==A.o&&(me[0]=A.o-A.j-ve));var Le=L.eb;ve=L.fb+ve*L.A,A=ar(Q,oe[0],A.width,ce,me,Le,ve+(he?0:3),L.A),e(H==me),A&&Lt(ue)&&na(Le,ve,he,ce,me,L.A)}return 0}function Ds(A){var L=A.ma,H=L.ba.S,Q=11>H,oe=H==p_||H==m_||H==g_||H==E5||H==12||Lt(H);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!Gb(L.Oa,A,oe?11:12))return 0;if(oe&&Lt(H)&&dt(),A.da)alert("todo:use_scaling");else{if(Q){if(L.Ib=Zt,A.Kb){if(H=A.U+1>>1,L.memory=i(A.U+2*H),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+A.U,L.Mc=L.cc,L.Nc=L.dc+H,L.Ib=zn,dt()}}else alert("todo:EmitYUV");oe&&(L.Jb=Bh,Q&&ze())}if(Q&&!wF){for(A=0;256>A;++A)cye[A]=89858*(A-128)+v_>>y_,hye[A]=-22014*(A-128)+v_,dye[A]=-45773*(A-128),uye[A]=113618*(A-128)+v_>>y_;for(A=ty;A<N5;++A)L=76283*(A-16)+v_>>y_,fye[A-ty]=_o(L,255),pye[A-ty]=_o(L+8>>4,15);wF=1}return 1}function Tl(A){var L=A.ma,H=A.U,Q=A.T;return e(!(1&A.ka)),0>=H||0>=Q?0:(H=L.Ib(A,L),L.Jb!=null&&L.Jb(A,L,H),L.Dc+=H,1)}function Pl(A){A.ma.memory=null}function Wt(A,L,H,Q){return M(A,8)!=47?0:(L[0]=M(A,14)+1,H[0]=M(A,14)+1,Q[0]=M(A,1),M(A,3)!=0?0:!A.h)}function Ha(A,L){if(4>A)return A+1;var H=A-2>>1;return(2+(1&A)<<H)+M(L,H)+1}function Nl(A,L){return 120<L?L-120:1<=(H=((H=Ybe[L-1])>>4)*A+(8-(15&H)))?H:1;var H}function zi(A,L,H){var Q=j(H),oe=A[L+=255&Q].g-8;return 0<oe&&(q(H,H.u+8),Q=j(H),L+=A[L].value,L+=Q&(1<<oe)-1),q(H,H.u+A[L].g),A[L].value}function us(A,L,H){return H.g+=A.g,H.value+=A.value<<L>>>0,e(8>=H.g),A.g}function Xr(A,L,H){var Q=A.xc;return e((L=Q==0?0:A.vc[A.md*(H>>Q)+(L>>Q)])<A.Wb),A.Ya[L]}function xo(A,L,H,Q){var oe=A.ab,ce=A.c*L,ue=A.C;L=ue+L;var he=H,me=Q;for(Q=A.Ta,H=A.Ua;0<oe--;){var ve=A.gc[oe],Le=ue,Ke=L,Ye=he,$e=me,st=(me=Q,he=H,ve.Ea);switch(e(Le<Ke),e(Ke<=ve.nc),ve.hc){case 2:a_(Ye,$e,(Ke-Le)*st,me,he);break;case 0:var Ze=Le,De=Ke,Me=me,tt=he,ct=(kt=ve).Ea;Ze==0&&(_5(Ye,$e,null,null,1,Me,tt),ke(Ye,$e+1,0,0,ct-1,Me,tt+1),$e+=ct,tt+=ct,++Ze);for(var rt=1<<kt.b,Pt=rt-1,St=se(ct,kt.b),zt=kt.K,kt=kt.w+(Ze>>kt.b)*St;Ze<De;){var $n=zt,Vn=kt,On=1;for(Yb(Ye,$e,Me,tt-ct,1,Me,tt);On<ct;){var wn=(On&~Pt)+rt;wn>ct&&(wn=ct),(0,sd[$n[Vn++]>>8&15])(Ye,$e+ +On,Me,tt+On-ct,wn-On,Me,tt+On),On=wn}$e+=ct,tt+=ct,++Ze&Pt||(kt+=St)}Ke!=ve.nc&&r(me,he-st,me,he+(Ke-Le-1)*st,st);break;case 1:for(st=Ye,De=$e,ct=(Ye=ve.Ea)-(tt=Ye&~(Me=($e=1<<ve.b)-1)),Ze=se(Ye,ve.b),rt=ve.K,ve=ve.w+(Le>>ve.b)*Ze;Le<Ke;){for(Pt=rt,St=ve,zt=new Ie,kt=De+tt,$n=De+Ye;De<kt;)Xe(Pt[St++],zt),Wh(zt,st,De,$e,me,he),De+=$e,he+=$e;De<$n&&(Xe(Pt[St++],zt),Wh(zt,st,De,ct,me,he),De+=ct,he+=ct),++Le&Me||(ve+=Ze)}break;case 3:if(Ye==me&&$e==he&&0<ve.b){for(De=me,Ye=st=he+(Ke-Le)*st-(tt=(Ke-Le)*se(ve.Ea,ve.b)),$e=me,Me=he,Ze=[],tt=(ct=tt)-1;0<=tt;--tt)Ze[tt]=$e[Me+tt];for(tt=ct-1;0<=tt;--tt)De[Ye+tt]=Ze[tt];Qo(ve,Le,Ke,me,st,me,he)}else Qo(ve,Le,Ke,Ye,$e,me,he)}he=Q,me=H}me!=H&&r(Q,H,he,me,ce)}function tm(A,L){var H=A.V,Q=A.Ba+A.c*A.C,oe=L-A.C;if(e(L<=A.l.o),e(16>=oe),0<oe){var ce=A.l,ue=A.Ta,he=A.Ua,me=ce.width;if(xo(A,oe,H,Q),oe=he=[he],e((H=A.C)<(Q=L)),e(ce.v<ce.va),Q>ce.o&&(Q=ce.o),H<ce.j){var ve=ce.j-H;H=ce.j,oe[0]+=ve*me}if(H>=Q?H=0:(oe[0]+=4*ce.v,ce.ka=H-ce.j,ce.U=ce.va-ce.v,ce.T=Q-H,H=1),H){if(he=he[0],11>(H=A.ca).S){var Le=H.f.RGBA,Ke=(Q=H.S,oe=ce.U,ce=ce.T,ve=Le.eb,Le.A),Ye=ce;for(Le=Le.fb+A.Ma*Le.A;0<Ye--;){var $e=ue,st=he,Ze=oe,De=ve,Me=Le;switch(Q){case f_:Gi($e,st,Ze,De,Me);break;case p_:_i($e,st,Ze,De,Me);break;case k5:_i($e,st,Ze,De,Me),na(De,Me,0,Ze,1,0);break;case dF:Yc($e,st,Ze,De,Me);break;case m_:Ge($e,st,Ze,De,Me,1);break;case C5:Ge($e,st,Ze,De,Me,1),na(De,Me,0,Ze,1,0);break;case g_:Ge($e,st,Ze,De,Me,0);break;case b_:Ge($e,st,Ze,De,Me,0),na(De,Me,1,Ze,1,0);break;case E5:id($e,st,Ze,De,Me);break;case A5:id($e,st,Ze,De,Me),or(De,Me,Ze,1,0);break;case hF:Kc($e,st,Ze,De,Me);break;default:e(0)}he+=me,Le+=Ke}A.Ma+=ce}else alert("todo:EmitRescaledRowsYUVA");e(A.Ma<=H.height)}}A.C=L,e(A.C<=A.i)}function Wc(A){var L;if(0<A.ua)return 0;for(L=0;L<A.Wb;++L){var H=A.Ya[L].G,Q=A.Ya[L].H;if(0<H[1][Q[1]+0].g||0<H[2][Q[2]+0].g||0<H[3][Q[3]+0].g)return 0}return 1}function za(A,L,H,Q,oe,ce){if(A.Z!=0){var ue=A.qd,he=A.rd;for(e(cd[A.Z]!=null);L<H;++L)cd[A.Z](ue,he,Q,oe,Q,oe,ce),ue=Q,he=oe,oe+=ce;A.qd=ue,A.rd=he}}function Va(A,L){var H=A.l.ma,Q=H.Z==0||H.Z==1?A.l.j:A.C;if(Q=A.C<Q?Q:A.C,e(L<=A.l.o),L>Q){var oe=A.l.width,ce=H.ca,ue=H.tb+oe*Q,he=A.V,me=A.Ba+A.c*Q,ve=A.gc;e(A.ab==1),e(ve[0].hc==3),l_(ve[0],Q,L,he,me,ce,ue),za(H,Q,L,ce,ue,oe)}A.C=A.Ma=L}function Wa(A,L,H,Q,oe,ce,ue){var he=A.$/Q,me=A.$%Q,ve=A.m,Le=A.s,Ke=H+A.$,Ye=Ke;oe=H+Q*oe;var $e=H+Q*ce,st=280+Le.ua,Ze=A.Pb?he:16777216,De=0<Le.ua?Le.Wa:null,Me=Le.wc,tt=Ke<$e?Xr(Le,me,he):null;e(A.C<ce),e($e<=oe);var ct=!1;e:for(;;){for(;ct||Ke<$e;){var rt=0;if(he>=Ze){var Pt=Ke-H;e((Ze=A).Pb),Ze.wd=Ze.m,Ze.xd=Pt,0<Ze.s.ua&&ge(Ze.s.Wa,Ze.s.vb),Ze=he+Xbe}if(me&Me||(tt=Xr(Le,me,he)),e(tt!=null),tt.Qb&&(L[Ke]=tt.qb,ct=!0),!ct)if(ne(ve),tt.jc){rt=ve,Pt=L;var St=Ke,zt=tt.pd[j(rt)&Ms-1];e(tt.jc),256>zt.g?(q(rt,rt.u+zt.g),Pt[St]=zt.value,rt=0):(q(rt,rt.u+zt.g-256),e(256<=zt.value),rt=zt.value),rt==0&&(ct=!0)}else rt=zi(tt.G[0],tt.H[0],ve);if(ve.h)break;if(ct||256>rt){if(!ct)if(tt.nd)L[Ke]=(tt.qb|rt<<8)>>>0;else{if(ne(ve),ct=zi(tt.G[1],tt.H[1],ve),ne(ve),Pt=zi(tt.G[2],tt.H[2],ve),St=zi(tt.G[3],tt.H[3],ve),ve.h)break;L[Ke]=(St<<24|ct<<16|rt<<8|Pt)>>>0}if(ct=!1,++Ke,++me>=Q&&(me=0,++he,ue!=null&&he<=ce&&!(he%16)&&ue(A,he),De!=null))for(;Ye<Ke;)rt=L[Ye++],De.X[(506832829*rt&4294967295)>>>De.Mb]=rt}else if(280>rt){if(rt=Ha(rt-256,ve),Pt=zi(tt.G[4],tt.H[4],ve),ne(ve),Pt=Nl(Q,Pt=Ha(Pt,ve)),ve.h)break;if(Ke-H<Pt||oe-Ke<rt)break e;for(St=0;St<rt;++St)L[Ke+St]=L[Ke+St-Pt];for(Ke+=rt,me+=rt;me>=Q;)me-=Q,++he,ue!=null&&he<=ce&&!(he%16)&&ue(A,he);if(e(Ke<=oe),me&Me&&(tt=Xr(Le,me,he)),De!=null)for(;Ye<Ke;)rt=L[Ye++],De.X[(506832829*rt&4294967295)>>>De.Mb]=rt}else{if(!(rt<st))break e;for(ct=rt-280,e(De!=null);Ye<Ke;)rt=L[Ye++],De.X[(506832829*rt&4294967295)>>>De.Mb]=rt;rt=Ke,e(!(ct>>>(Pt=De).Xa)),L[rt]=Pt.X[ct],ct=!0}ct||e(ve.h==W(ve))}if(A.Pb&&ve.h&&Ke<oe)e(A.m.h),A.a=5,A.m=A.wd,A.$=A.xd,0<A.s.ua&&ge(A.s.vb,A.s.Wa);else{if(ve.h)break e;ue?.(A,he>ce?ce:he),A.a=0,A.$=Ke-H}return 1}return A.a=3,0}function Il(A){e(A!=null),A.vc=null,A.yc=null,A.Ya=null;var L=A.Wa;L!=null&&(L.X=null),A.vb=null,e(A!=null)}function Zo(){var A=new x5;return A==null?null:(A.a=0,A.xb=mF,$t("Predictor","VP8LPredictors"),$t("Predictor","VP8LPredictors_C"),$t("PredictorAdd","VP8LPredictorsAdd"),$t("PredictorAdd","VP8LPredictorsAdd_C"),a_=Je,Wh=nt,Gi=z,_i=J,id=pe,Kc=Oe,Yc=He,x.VP8LMapColor32b=xm,x.VP8LMapColor8b=c_,A)}function Rl(A,L,H,Q,oe){var ce=1,ue=[A],he=[L],me=Q.m,ve=Q.s,Le=null,Ke=0;e:for(;;){if(H)for(;ce&&M(me,1);){var Ye=ue,$e=he,st=Q,Ze=1,De=st.m,Me=st.gc[st.ab],tt=M(De,2);if(st.Oc&1<<tt)ce=0;else{switch(st.Oc|=1<<tt,Me.hc=tt,Me.Ea=Ye[0],Me.nc=$e[0],Me.K=[null],++st.ab,e(4>=st.ab),tt){case 0:case 1:Me.b=M(De,3)+2,Ze=Rl(se(Me.Ea,Me.b),se(Me.nc,Me.b),0,st,Me.K),Me.K=Me.K[0];break;case 3:var ct,rt=M(De,8)+1,Pt=16<rt?0:4<rt?1:2<rt?2:3;if(Ye[0]=se(Me.Ea,Pt),Me.b=Pt,ct=Ze=Rl(rt,1,0,st,Me.K)){var St,zt=rt,kt=Me,$n=1<<(8>>kt.b),Vn=i($n);if(Vn==null)ct=0;else{var On=kt.K[0],wn=kt.w;for(Vn[0]=kt.K[0][0],St=1;St<1*zt;++St)Vn[St]=fe(On[wn+St],Vn[St-1]);for(;St<4*$n;++St)Vn[St]=0;kt.K[0]=null,kt.K[0]=Vn,ct=1}}Ze=ct;break;case 2:break;default:e(0)}ce=Ze}}if(ue=ue[0],he=he[0],ce&&M(me,1)&&!(ce=1<=(Ke=M(me,4))&&11>=Ke)){Q.a=3;break e}var tr;if(tr=ce)t:{var Xn,sn,Qr,qi=Q,es=ue,Ki=he,Wn=Ke,Eo=H,ko=qi.m,_s=qi.s,js=[null],Ei=1,ia=0,Ml=Jbe[Wn];n:for(;;){if(Eo&&M(ko,1)){var Ss=M(ko,3)+2,Qc=se(es,Ss),Jh=se(Ki,Ss),Cm=Qc*Jh;if(!Rl(Qc,Jh,0,qi,js))break n;for(js=js[0],_s.xc=Ss,Xn=0;Xn<Cm;++Xn){var ud=js[Xn]>>8&65535;js[Xn]=ud,ud>=Ei&&(Ei=ud+1)}}if(ko.h)break n;for(sn=0;5>sn;++sn){var Rr=fF[sn];!sn&&0<Wn&&(Rr+=1<<Wn),ia<Rr&&(ia=Rr)}var I5=o(Ei*Ml,T),SF=Ei,EF=o(SF,P);if(EF==null)var x_=null;else e(65536>=SF),x_=EF;var ny=i(ia);if(x_==null||ny==null||I5==null){qi.a=1;break n}var __=I5;for(Xn=Qr=0;Xn<Ei;++Xn){var Ja=x_[Xn],Am=Ja.G,Tm=Ja.H,kF=0,S_=1,CF=0;for(sn=0;5>sn;++sn){Rr=fF[sn],Am[sn]=__,Tm[sn]=Qr,!sn&&0<Wn&&(Rr+=1<<Wn);s:{var E_,R5=Rr,k_=qi,ry=ny,bye=__,yye=Qr,O5=0,dd=k_.m,vye=M(dd,1);if(s(ry,0,0,R5),vye){var wye=M(dd,1)+1,xye=M(dd,1),AF=M(dd,xye==0?1:8);ry[AF]=1,wye==2&&(ry[AF=M(dd,8)]=1);var C_=1}else{var TF=i(19),PF=M(dd,4)+4;if(19<PF){k_.a=3;var A_=0;break s}for(E_=0;E_<PF;++E_)TF[Kbe[E_]]=M(dd,3);var L5=void 0,sy=void 0,NF=k_,_ye=TF,T_=R5,IF=ry,D5=0,hd=NF.m,RF=8,OF=o(128,T);r:for(;C(OF,0,7,_ye,19);){if(M(hd,1)){var Sye=2+2*M(hd,3);if((L5=2+M(hd,Sye))>T_)break r}else L5=T_;for(sy=0;sy<T_&&L5--;){ne(hd);var LF=OF[0+(127&j(hd))];q(hd,hd.u+LF.g);var Pm=LF.value;if(16>Pm)IF[sy++]=Pm,Pm!=0&&(RF=Pm);else{var Eye=Pm==16,DF=Pm-16,kye=Gbe[DF],MF=M(hd,Wbe[DF])+kye;if(sy+MF>T_)break r;for(var Cye=Eye?RF:0;0<MF--;)IF[sy++]=Cye}}D5=1;break r}D5||(NF.a=3),C_=D5}(C_=C_&&!dd.h)&&(O5=C(bye,yye,8,ry,R5)),C_&&O5!=0?A_=O5:(k_.a=3,A_=0)}if(A_==0)break n;if(S_&&qbe[sn]==1&&(S_=__[Qr].g==0),kF+=__[Qr].g,Qr+=A_,3>=sn){var iy,M5=ny[0];for(iy=1;iy<Rr;++iy)ny[iy]>M5&&(M5=ny[iy]);CF+=M5}}if(Ja.nd=S_,Ja.Qb=0,S_&&(Ja.qb=(Am[3][Tm[3]+0].value<<24|Am[1][Tm[1]+0].value<<16|Am[2][Tm[2]+0].value)>>>0,kF==0&&256>Am[0][Tm[0]+0].value&&(Ja.Qb=1,Ja.qb+=Am[0][Tm[0]+0].value<<8)),Ja.jc=!Ja.Qb&&6>CF,Ja.jc){var P_,eu=Ja;for(P_=0;P_<Ms;++P_){var fd=P_,pd=eu.pd[fd],N_=eu.G[0][eu.H[0]+fd];256<=N_.value?(pd.g=N_.g+256,pd.value=N_.value):(pd.g=0,pd.value=0,fd>>=us(N_,8,pd),fd>>=us(eu.G[1][eu.H[1]+fd],16,pd),fd>>=us(eu.G[2][eu.H[2]+fd],0,pd),us(eu.G[3][eu.H[3]+fd],24,pd))}}}_s.vc=js,_s.Wb=Ei,_s.Ya=x_,_s.yc=I5,tr=1;break t}tr=0}if(!(ce=tr)){Q.a=3;break e}if(0<Ke){if(ve.ua=1<<Ke,!K(ve.Wa,Ke)){Q.a=1,ce=0;break e}}else ve.ua=0;var j5=Q,jF=ue,Aye=he,F5=j5.s,B5=F5.xc;if(j5.c=jF,j5.i=Aye,F5.md=se(jF,B5),F5.wc=B5==0?-1:(1<<B5)-1,H){Q.xb=sye;break e}if((Le=i(ue*he))==null){Q.a=1,ce=0;break e}ce=(ce=Wa(Q,Le,0,ue,he,he,null))&&!me.h;break e}return ce?(oe!=null?oe[0]=Le:(e(Le==null),e(H)),Q.$=0,H||Il(ve)):Il(ve),ce}function $h(A,L){var H=A.c*A.i,Q=H+L+16*L;return e(A.c<=L),A.V=i(Q),A.V==null?(A.Ta=null,A.Ua=0,A.a=1,0):(A.Ta=A.V,A.Ua=A.Ba+H+L,1)}function nm(A,L){var H=A.C,Q=L-H,oe=A.V,ce=A.Ba+A.c*H;for(e(L<=A.l.o);0<Q;){var ue=16<Q?16:Q,he=A.l.ma,me=A.l.width,ve=me*ue,Le=he.ca,Ke=he.tb+me*H,Ye=A.Ta,$e=A.Ua;xo(A,ue,oe,ce),Br(Ye,$e,Le,Ke,ve),za(he,H,H+ue,Le,Ke,me),Q-=ue,oe+=ue*A.c,H+=ue}e(H==L),A.C=A.Ma=L}function rm(){this.ub=this.yd=this.td=this.Rb=0}function sm(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function im(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Ux(){this.Yb=function(){var A=[];return function L(H,Q,oe){for(var ce=oe[Q],ue=0;ue<ce&&(H.push(oe.length>Q+1?[]:0),!(oe.length<Q+1));ue++)L(H[ue],Q+1,oe)}(A,0,[3,11]),A}()}function ZT(){this.jb=i(3),this.Wc=a([4,8],Ux),this.Xc=a([4,17],Ux)}function QT(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function om(){this.ld=this.La=this.dd=this.tc=0}function Hx(){this.Na=this.la=0}function e5(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Nb(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function t5(){this.uc=this.M=this.Nb=0,this.wa=Array(new om),this.Y=0,this.ya=Array(new Nb),this.aa=0,this.l=new am}function zx(){this.y=i(16),this.f=i(8),this.ea=i(8)}function n5(){this.cb=this.a=0,this.sc="",this.m=new G,this.Od=new rm,this.Kc=new sm,this.ed=new QT,this.Qa=new im,this.Ic=this.$c=this.Aa=0,this.D=new t5,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,G),this.ia=0,this.pb=o(4,e5),this.Pa=new ZT,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zx),this.Hd=0,this.rb=Array(new Hx),this.sb=0,this.wa=Array(new om),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Nb),this.L=this.aa=0,this.gd=a([4,2],om),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function am(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function r5(){var A=new n5;return A!=null&&(A.a=0,A.sc="OK",A.cb=0,A.Xb=0,ey||(ey=Gx)),A}function jr(A,L,H){return A.a==0&&(A.a=L,A.sc=H,A.cb=0),0}function Vx(A,L,H){return 3<=H&&A[L+0]==157&&A[L+1]==1&&A[L+2]==42}function Wx(A,L){if(A==null)return 0;if(A.a=0,A.sc="OK",L==null)return jr(A,2,"null VP8Io passed to VP8GetHeaders()");var H=L.data,Q=L.w,oe=L.ha;if(4>oe)return jr(A,7,"Truncated header.");var ce=H[Q+0]|H[Q+1]<<8|H[Q+2]<<16,ue=A.Od;if(ue.Rb=!(1&ce),ue.td=ce>>1&7,ue.yd=ce>>4&1,ue.ub=ce>>5,3<ue.td)return jr(A,3,"Incorrect keyframe parameters.");if(!ue.yd)return jr(A,4,"Frame not displayable.");Q+=3,oe-=3;var he=A.Kc;if(ue.Rb){if(7>oe)return jr(A,7,"cannot parse picture header");if(!Vx(H,Q,oe))return jr(A,3,"Bad code word");he.c=16383&(H[Q+4]<<8|H[Q+3]),he.Td=H[Q+4]>>6,he.i=16383&(H[Q+6]<<8|H[Q+5]),he.Ud=H[Q+6]>>6,Q+=7,oe-=7,A.za=he.c+15>>4,A.Ub=he.i+15>>4,L.width=he.c,L.height=he.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,s((ce=A.Pa).jb,0,255,ce.jb.length),e((ce=A.Qa)!=null),ce.Cb=0,ce.Bb=0,ce.Fb=1,s(ce.Zb,0,0,ce.Zb.length),s(ce.Lb,0,0,ce.Lb)}if(ue.ub>oe)return jr(A,7,"bad partition length");U(ce=A.m,H,Q,ue.ub),Q+=ue.ub,oe-=ue.ub,ue.Rb&&(he.Ld=Y(ce),he.Kd=Y(ce)),he=A.Qa;var me,ve=A.Pa;if(e(ce!=null),e(he!=null),he.Cb=Y(ce),he.Cb){if(he.Bb=Y(ce),Y(ce)){for(he.Fb=Y(ce),me=0;4>me;++me)he.Zb[me]=Y(ce)?X(ce,7):0;for(me=0;4>me;++me)he.Lb[me]=Y(ce)?X(ce,6):0}if(he.Bb)for(me=0;3>me;++me)ve.jb[me]=Y(ce)?ee(ce,8):255}else he.Bb=0;if(ce.Ka)return jr(A,3,"cannot parse segment header");if((he=A.ed).zd=Y(ce),he.Tb=ee(ce,6),he.wb=ee(ce,3),he.Pc=Y(ce),he.Pc&&Y(ce)){for(ve=0;4>ve;++ve)Y(ce)&&(he.vd[ve]=X(ce,6));for(ve=0;4>ve;++ve)Y(ce)&&(he.od[ve]=X(ce,6))}if(A.L=he.Tb==0?0:he.zd?1:2,ce.Ka)return jr(A,3,"cannot parse filter header");var Le=oe;if(oe=me=Q,Q=me+Le,he=Le,A.Xb=(1<<ee(A.m,2))-1,Le<3*(ve=A.Xb))H=7;else{for(me+=3*ve,he-=3*ve,Le=0;Le<ve;++Le){var Ke=H[oe+0]|H[oe+1]<<8|H[oe+2]<<16;Ke>he&&(Ke=he),U(A.Jc[+Le],H,me,Ke),me+=Ke,he-=Ke,oe+=3}U(A.Jc[+ve],H,me,he),H=me<Q?0:5}if(H!=0)return jr(A,H,"cannot parse partitions");for(H=ee(me=A.m,7),oe=Y(me)?X(me,4):0,Q=Y(me)?X(me,4):0,he=Y(me)?X(me,4):0,ve=Y(me)?X(me,4):0,me=Y(me)?X(me,4):0,Le=A.Qa,Ke=0;4>Ke;++Ke){if(Le.Cb){var Ye=Le.Zb[Ke];Le.Fb||(Ye+=H)}else{if(0<Ke){A.pb[Ke]=A.pb[0];continue}Ye=H}var $e=A.pb[Ke];$e.Sc[0]=T5[_o(Ye+oe,127)],$e.Sc[1]=P5[_o(Ye+0,127)],$e.Eb[0]=2*T5[_o(Ye+Q,127)],$e.Eb[1]=101581*P5[_o(Ye+he,127)]>>16,8>$e.Eb[1]&&($e.Eb[1]=8),$e.Qc[0]=T5[_o(Ye+ve,117)],$e.Qc[1]=P5[_o(Ye+me,127)],$e.lc=Ye+me}if(!ue.Rb)return jr(A,4,"Not a key frame.");for(Y(ce),ue=A.Pa,H=0;4>H;++H){for(oe=0;8>oe;++oe)for(Q=0;3>Q;++Q)for(he=0;11>he;++he)ve=de(ce,nye[H][oe][Q][he])?ee(ce,8):eye[H][oe][Q][he],ue.Wc[H][oe].Yb[Q][he]=ve;for(oe=0;17>oe;++oe)ue.Xc[H][oe]=ue.Wc[H][rye[oe]]}return A.kc=Y(ce),A.kc&&(A.Bd=ee(ce,8)),A.cb=1}function Gx(A,L,H,Q,oe,ce,ue){var he=L[oe].Yb[H];for(H=0;16>oe;++oe){if(!de(A,he[H+0]))return oe;for(;!de(A,he[H+1]);)if(he=L[++oe].Yb[0],H=0,oe==16)return 16;var me=L[oe+1].Yb;if(de(A,he[H+2])){var ve=A,Le=0;if(de(ve,(Ye=he)[(Ke=H)+3]))if(de(ve,Ye[Ke+6])){for(he=0,Ke=2*(Le=de(ve,Ye[Ke+8]))+(Ye=de(ve,Ye[Ke+9+Le])),Le=0,Ye=Zbe[Ke];Ye[he];++he)Le+=Le+de(ve,Ye[he]);Le+=3+(8<<Ke)}else de(ve,Ye[Ke+7])?(Le=7+2*de(ve,165),Le+=de(ve,145)):Le=5+de(ve,159);else Le=de(ve,Ye[Ke+4])?3+de(ve,Ye[Ke+5]):2;he=me[2]}else Le=1,he=me[1];me=ue+Qbe[oe],0>(ve=A).b&&te(ve);var Ke,Ye=ve.b,$e=(Ke=ve.Ca>>1)-(ve.I>>Ye)>>31;--ve.b,ve.Ca+=$e,ve.Ca|=1,ve.I-=(Ke+1&$e)<<Ye,ce[me]=((Le^$e)-$e)*Q[(0<oe)+0]}return 16}function Ib(A){var L=A.rb[A.sb-1];L.la=0,L.Na=0,s(A.zc,0,0,A.zc.length),A.ja=0}function s5(A,L){if(A==null)return 0;if(L==null)return jr(A,2,"NULL VP8Io parameter in VP8Decode().");if(!A.cb&&!Wx(A,L))return 0;if(e(A.cb),L.ac==null||L.ac(L)){L.ob&&(A.L=0);var H=w_[A.L];if(A.L==2?(A.yb=0,A.zb=0):(A.yb=L.v-H>>4,A.zb=L.j-H>>4,0>A.yb&&(A.yb=0),0>A.zb&&(A.zb=0)),A.Va=L.o+15+H>>4,A.Hb=L.va+15+H>>4,A.Hb>A.za&&(A.Hb=A.za),A.Va>A.Ub&&(A.Va=A.Ub),0<A.L){var Q=A.ed;for(H=0;4>H;++H){var oe;if(A.Qa.Cb){var ce=A.Qa.Lb[H];A.Qa.Fb||(ce+=Q.Tb)}else ce=Q.Tb;for(oe=0;1>=oe;++oe){var ue=A.gd[H][oe],he=ce;if(Q.Pc&&(he+=Q.vd[0],oe&&(he+=Q.od[0])),0<(he=0>he?0:63<he?63:he)){var me=he;0<Q.wb&&(me=4<Q.wb?me>>2:me>>1)>9-Q.wb&&(me=9-Q.wb),1>me&&(me=1),ue.dd=me,ue.tc=2*he+me,ue.ld=40<=he?2:15<=he?1:0}else ue.tc=0;ue.La=oe}}}H=0}else jr(A,6,"Frame setup failed"),H=A.a;if(H=H==0){if(H){A.$c=0,0<A.Aa||(A.Ic=gye);e:{H=A.Ic,Q=4*(me=A.za);var ve=32*me,Le=me+1,Ke=0<A.L?me*(0<A.Aa?2:1):0,Ye=(A.Aa==2?2:1)*me;if((ue=Q+832+(oe=3*(16*H+w_[A.L])/2*ve)+(ce=A.Fa!=null&&0<A.Fa.length?A.Kc.c*A.Kc.i:0))!=ue)H=0;else{if(ue>A.Vb){if(A.Vb=0,A.Ec=i(ue),A.Fc=0,A.Ec==null){H=jr(A,1,"no memory during frame initialization.");break e}A.Vb=ue}ue=A.Ec,he=A.Fc,A.Ac=ue,A.Bc=he,he+=Q,A.Gd=o(ve,zx),A.Hd=0,A.rb=o(Le+1,Hx),A.sb=1,A.wa=Ke?o(Ke,om):null,A.Y=0,A.D.Nb=0,A.D.wa=A.wa,A.D.Y=A.Y,0<A.Aa&&(A.D.Y+=me),e(!0),A.oc=ue,A.pc=he,he+=832,A.ya=o(Ye,Nb),A.aa=0,A.D.ya=A.ya,A.D.aa=A.aa,A.Aa==2&&(A.D.aa+=me),A.R=16*me,A.B=8*me,me=(ve=w_[A.L])*A.R,ve=ve/2*A.B,A.sa=ue,A.ta=he+me,A.qa=A.sa,A.ra=A.ta+16*H*A.R+ve,A.Ha=A.qa,A.Ia=A.ra+8*H*A.B+ve,A.$c=0,he+=oe,A.mb=ce?ue:null,A.nb=ce?he:null,e(he+ce<=A.Fc+A.Vb),Ib(A),s(A.Ac,A.Bc,0,Q),H=1}}if(H){if(L.ka=0,L.y=A.sa,L.O=A.ta,L.f=A.qa,L.N=A.ra,L.ea=A.Ha,L.Vd=A.Ia,L.fa=A.R,L.Rc=A.B,L.F=null,L.J=0,!d_){for(H=-255;255>=H;++H)ds[255+H]=0>H?-H:H;for(H=-1020;1020>=H;++H)Xc[1020+H]=-128>H?-128:127<H?127:H;for(H=-112;112>=H;++H)Qb[112+H]=-16>H?-16:15<H?15:H;for(H=-255;510>=H;++H)km[255+H]=0>H?0:255<H?255:H;d_=1}_m=a5,Jc=i5,Jb=Kx,Si=o5,ea=Yx,Fr=qx,Sm=jb,u_=zh,Xb=w5,Gh=Fb,qh=v5,od=fm,Kh=Bb,Em=s_,Yh=r_,ad=Ll,Zb=qc,ta=y5,Ya[0]=Ol,Ya[1]=l5,Ya[2]=h5,Ya[3]=f5,Ya[4]=Zx,Ya[5]=dm,Ya[6]=Qx,Ya[7]=Lb,Ya[8]=m5,Ya[9]=p5,ld[0]=Jx,ld[1]=u5,ld[2]=Gc,ld[3]=cm,ld[4]=Qs,ld[5]=d5,ld[6]=Xx,Zc[0]=td,Zc[1]=c5,Zc[2]=g5,Zc[3]=Db,Zc[4]=Hh,Zc[5]=b5,Zc[6]=Mb,H=1}else H=0}H&&(H=function($e,st){for($e.M=0;$e.M<$e.Va;++$e.M){var Ze,De=$e.Jc[$e.M&$e.Xb],Me=$e.m,tt=$e;for(Ze=0;Ze<tt.za;++Ze){var ct=Me,rt=tt,Pt=rt.Ac,St=rt.Bc+4*Ze,zt=rt.zc,kt=rt.ya[rt.aa+Ze];if(rt.Qa.Bb?kt.$b=de(ct,rt.Pa.jb[0])?2+de(ct,rt.Pa.jb[2]):de(ct,rt.Pa.jb[1]):kt.$b=0,rt.kc&&(kt.Ad=de(ct,rt.Bd)),kt.Za=!de(ct,145)+0,kt.Za){var $n=kt.Ob,Vn=0;for(rt=0;4>rt;++rt){var On,wn=zt[0+rt];for(On=0;4>On;++On){wn=tye[Pt[St+On]][wn];for(var tr=pF[de(ct,wn[0])];0<tr;)tr=pF[2*tr+de(ct,wn[tr])];wn=-tr,Pt[St+On]=wn}r($n,Vn,Pt,St,4),Vn+=4,zt[0+rt]=wn}}else wn=de(ct,156)?de(ct,128)?1:3:de(ct,163)?2:0,kt.Ob[0]=wn,s(Pt,St,wn,4),s(zt,0,wn,4);kt.Dd=de(ct,142)?de(ct,114)?de(ct,183)?1:3:2:0}if(tt.m.Ka)return jr($e,7,"Premature end-of-partition0 encountered.");for(;$e.ja<$e.za;++$e.ja){if(tt=De,ct=(Me=$e).rb[Me.sb-1],Pt=Me.rb[Me.sb+Me.ja],Ze=Me.ya[Me.aa+Me.ja],St=Me.kc?Ze.Ad:0)ct.la=Pt.la=0,Ze.Za||(ct.Na=Pt.Na=0),Ze.Hc=0,Ze.Gc=0,Ze.ia=0;else{var Xn,sn;if(ct=Pt,Pt=tt,St=Me.Pa.Xc,zt=Me.ya[Me.aa+Me.ja],kt=Me.pb[zt.$b],rt=zt.ad,$n=0,Vn=Me.rb[Me.sb-1],wn=On=0,s(rt,$n,0,384),zt.Za)var Qr=0,qi=St[3];else{tr=i(16);var es=ct.Na+Vn.Na;if(es=ey(Pt,St[1],es,kt.Eb,0,tr,0),ct.Na=Vn.Na=(0<es)+0,1<es)_m(tr,0,rt,$n);else{var Ki=tr[0]+3>>3;for(tr=0;256>tr;tr+=16)rt[$n+tr]=Ki}Qr=1,qi=St[0]}var Wn=15&ct.la,Eo=15&Vn.la;for(tr=0;4>tr;++tr){var ko=1&Eo;for(Ki=sn=0;4>Ki;++Ki)Wn=Wn>>1|(ko=(es=ey(Pt,qi,es=ko+(1&Wn),kt.Sc,Qr,rt,$n))>Qr)<<7,sn=sn<<2|(3<es?3:1<es?2:rt[$n+0]!=0),$n+=16;Wn>>=4,Eo=Eo>>1|ko<<7,On=(On<<8|sn)>>>0}for(qi=Wn,Qr=Eo>>4,Xn=0;4>Xn;Xn+=2){for(sn=0,Wn=ct.la>>4+Xn,Eo=Vn.la>>4+Xn,tr=0;2>tr;++tr){for(ko=1&Eo,Ki=0;2>Ki;++Ki)es=ko+(1&Wn),Wn=Wn>>1|(ko=0<(es=ey(Pt,St[2],es,kt.Qc,0,rt,$n)))<<3,sn=sn<<2|(3<es?3:1<es?2:rt[$n+0]!=0),$n+=16;Wn>>=2,Eo=Eo>>1|ko<<5}wn|=sn<<4*Xn,qi|=Wn<<4<<Xn,Qr|=(240&Eo)<<Xn}ct.la=qi,Vn.la=Qr,zt.Hc=On,zt.Gc=wn,zt.ia=43690&wn?0:kt.ia,St=!(On|wn)}if(0<Me.L&&(Me.wa[Me.Y+Me.ja]=Me.gd[Ze.$b][Ze.Za],Me.wa[Me.Y+Me.ja].La|=!St),tt.Ka)return jr($e,7,"Premature end-of-file encountered.")}if(Ib($e),Me=st,tt=1,Ze=(De=$e).D,ct=0<De.L&&De.M>=De.zb&&De.M<=De.Va,De.Aa==0)e:{if(Ze.M=De.M,Ze.uc=ct,Wb(De,Ze),tt=1,Ze=(sn=De.D).Nb,ct=(wn=w_[De.L])*De.R,Pt=wn/2*De.B,tr=16*Ze*De.R,Ki=8*Ze*De.B,St=De.sa,zt=De.ta-ct+tr,kt=De.qa,rt=De.ra-Pt+Ki,$n=De.Ha,Vn=De.Ia-Pt+Ki,Eo=(Wn=sn.M)==0,On=Wn>=De.Va-1,De.Aa==2&&Wb(De,sn),sn.uc)for(ko=(es=De).D.M,e(es.D.uc),sn=es.yb;sn<es.Hb;++sn){Qr=sn,qi=ko;var _s=(js=(Rr=es).D).Nb;Xn=Rr.R;var js=js.wa[js.Y+Qr],Ei=Rr.sa,ia=Rr.ta+16*_s*Xn+16*Qr,Ml=js.dd,Ss=js.tc;if(Ss!=0)if(e(3<=Ss),Rr.L==1)0<Qr&&ad(Ei,ia,Xn,Ss+4),js.La&&ta(Ei,ia,Xn,Ss),0<qi&&Yh(Ei,ia,Xn,Ss+4),js.La&&Zb(Ei,ia,Xn,Ss);else{var Qc=Rr.B,Jh=Rr.qa,Cm=Rr.ra+8*_s*Qc+8*Qr,ud=Rr.Ha,Rr=Rr.Ia+8*_s*Qc+8*Qr;_s=js.ld,0<Qr&&(u_(Ei,ia,Xn,Ss+4,Ml,_s),Gh(Jh,Cm,ud,Rr,Qc,Ss+4,Ml,_s)),js.La&&(od(Ei,ia,Xn,Ss,Ml,_s),Em(Jh,Cm,ud,Rr,Qc,Ss,Ml,_s)),0<qi&&(Sm(Ei,ia,Xn,Ss+4,Ml,_s),Xb(Jh,Cm,ud,Rr,Qc,Ss+4,Ml,_s)),js.La&&(qh(Ei,ia,Xn,Ss,Ml,_s),Kh(Jh,Cm,ud,Rr,Qc,Ss,Ml,_s))}}if(De.ia&&alert("todo:DitherRow"),Me.put!=null){if(sn=16*Wn,Wn=16*(Wn+1),Eo?(Me.y=De.sa,Me.O=De.ta+tr,Me.f=De.qa,Me.N=De.ra+Ki,Me.ea=De.Ha,Me.W=De.Ia+Ki):(sn-=wn,Me.y=St,Me.O=zt,Me.f=kt,Me.N=rt,Me.ea=$n,Me.W=Vn),On||(Wn-=wn),Wn>Me.o&&(Wn=Me.o),Me.F=null,Me.J=null,De.Fa!=null&&0<De.Fa.length&&sn<Wn&&(Me.J=zb(De,Me,sn,Wn-sn),Me.F=De.mb,Me.F==null&&Me.F.length==0)){tt=jr(De,3,"Could not decode alpha data.");break e}sn<Me.j&&(wn=Me.j-sn,sn=Me.j,e(!(1&wn)),Me.O+=De.R*wn,Me.N+=De.B*(wn>>1),Me.W+=De.B*(wn>>1),Me.F!=null&&(Me.J+=Me.width*wn)),sn<Wn&&(Me.O+=Me.v,Me.N+=Me.v>>1,Me.W+=Me.v>>1,Me.F!=null&&(Me.J+=Me.v),Me.ka=sn-Me.j,Me.U=Me.va-Me.v,Me.T=Wn-sn,tt=Me.put(Me))}Ze+1!=De.Ic||On||(r(De.sa,De.ta-ct,St,zt+16*De.R,ct),r(De.qa,De.ra-Pt,kt,rt+8*De.B,Pt),r(De.Ha,De.Ia-Pt,$n,Vn+8*De.B,Pt))}if(!tt)return jr($e,6,"Output aborted.")}return 1}(A,L)),L.bc!=null&&L.bc(L),H&=1}return H?(A.cb=0,H):0}function Ga(A,L,H,Q,oe){oe=A[L+H+32*Q]+(oe>>3),A[L+H+32*Q]=-256&oe?0>oe?0:255:oe}function lm(A,L,H,Q,oe,ce){Ga(A,L,0,H,Q+oe),Ga(A,L,1,H,Q+ce),Ga(A,L,2,H,Q-ce),Ga(A,L,3,H,Q-oe)}function Vi(A){return(20091*A>>16)+A}function Rb(A,L,H,Q){var oe,ce=0,ue=i(16);for(oe=0;4>oe;++oe){var he=A[L+0]+A[L+8],me=A[L+0]-A[L+8],ve=(35468*A[L+4]>>16)-Vi(A[L+12]),Le=Vi(A[L+4])+(35468*A[L+12]>>16);ue[ce+0]=he+Le,ue[ce+1]=me+ve,ue[ce+2]=me-ve,ue[ce+3]=he-Le,ce+=4,L++}for(oe=ce=0;4>oe;++oe)he=(A=ue[ce+0]+4)+ue[ce+8],me=A-ue[ce+8],ve=(35468*ue[ce+4]>>16)-Vi(ue[ce+12]),Ga(H,Q,0,0,he+(Le=Vi(ue[ce+4])+(35468*ue[ce+12]>>16))),Ga(H,Q,1,0,me+ve),Ga(H,Q,2,0,me-ve),Ga(H,Q,3,0,he-Le),ce++,Q+=32}function qx(A,L,H,Q){var oe=A[L+0]+4,ce=35468*A[L+4]>>16,ue=Vi(A[L+4]),he=35468*A[L+1]>>16;lm(H,Q,0,oe+ue,A=Vi(A[L+1]),he),lm(H,Q,1,oe+ce,A,he),lm(H,Q,2,oe-ce,A,he),lm(H,Q,3,oe-ue,A,he)}function i5(A,L,H,Q,oe){Rb(A,L,H,Q),oe&&Rb(A,L+16,H,Q+4)}function Kx(A,L,H,Q){Jc(A,L+0,H,Q,1),Jc(A,L+32,H,Q+128,1)}function o5(A,L,H,Q){var oe;for(A=A[L+0]+4,oe=0;4>oe;++oe)for(L=0;4>L;++L)Ga(H,Q,L,oe,A)}function Yx(A,L,H,Q){A[L+0]&&Si(A,L+0,H,Q),A[L+16]&&Si(A,L+16,H,Q+4),A[L+32]&&Si(A,L+32,H,Q+128),A[L+48]&&Si(A,L+48,H,Q+128+4)}function a5(A,L,H,Q){var oe,ce=i(16);for(oe=0;4>oe;++oe){var ue=A[L+0+oe]+A[L+12+oe],he=A[L+4+oe]+A[L+8+oe],me=A[L+4+oe]-A[L+8+oe],ve=A[L+0+oe]-A[L+12+oe];ce[0+oe]=ue+he,ce[8+oe]=ue-he,ce[4+oe]=ve+me,ce[12+oe]=ve-me}for(oe=0;4>oe;++oe)ue=(A=ce[0+4*oe]+3)+ce[3+4*oe],he=ce[1+4*oe]+ce[2+4*oe],me=ce[1+4*oe]-ce[2+4*oe],ve=A-ce[3+4*oe],H[Q+0]=ue+he>>3,H[Q+16]=ve+me>>3,H[Q+32]=ue-he>>3,H[Q+48]=ve-me>>3,Q+=64}function Ob(A,L,H){var Q,oe=L-32,ce=So,ue=255-A[oe-1];for(Q=0;Q<H;++Q){var he,me=ce,ve=ue+A[L-1];for(he=0;he<H;++he)A[L+he]=me[ve+A[oe+he]];L+=32}}function l5(A,L){Ob(A,L,4)}function c5(A,L){Ob(A,L,8)}function u5(A,L){Ob(A,L,16)}function Gc(A,L){var H;for(H=0;16>H;++H)r(A,L+32*H,A,L-32,16)}function cm(A,L){var H;for(H=16;0<H;--H)s(A,L,A[L-1],16),L+=32}function um(A,L,H){var Q;for(Q=0;16>Q;++Q)s(L,H+32*Q,A,16)}function Jx(A,L){var H,Q=16;for(H=0;16>H;++H)Q+=A[L-1+32*H]+A[L+H-32];um(Q>>5,A,L)}function Qs(A,L){var H,Q=8;for(H=0;16>H;++H)Q+=A[L-1+32*H];um(Q>>4,A,L)}function d5(A,L){var H,Q=8;for(H=0;16>H;++H)Q+=A[L+H-32];um(Q>>4,A,L)}function Xx(A,L){um(128,A,L)}function Xt(A,L,H){return A+2*L+H+2>>2}function h5(A,L){var H,Q=L-32;for(Q=new Uint8Array([Xt(A[Q-1],A[Q+0],A[Q+1]),Xt(A[Q+0],A[Q+1],A[Q+2]),Xt(A[Q+1],A[Q+2],A[Q+3]),Xt(A[Q+2],A[Q+3],A[Q+4])]),H=0;4>H;++H)r(A,L+32*H,Q,0,Q.length)}function f5(A,L){var H=A[L-1],Q=A[L-1+32],oe=A[L-1+64],ce=A[L-1+96];Se(A,L+0,16843009*Xt(A[L-1-32],H,Q)),Se(A,L+32,16843009*Xt(H,Q,oe)),Se(A,L+64,16843009*Xt(Q,oe,ce)),Se(A,L+96,16843009*Xt(oe,ce,ce))}function Ol(A,L){var H,Q=4;for(H=0;4>H;++H)Q+=A[L+H-32]+A[L-1+32*H];for(Q>>=3,H=0;4>H;++H)s(A,L+32*H,Q,4)}function Zx(A,L){var H=A[L-1+0],Q=A[L-1+32],oe=A[L-1+64],ce=A[L-1-32],ue=A[L+0-32],he=A[L+1-32],me=A[L+2-32],ve=A[L+3-32];A[L+0+96]=Xt(Q,oe,A[L-1+96]),A[L+1+96]=A[L+0+64]=Xt(H,Q,oe),A[L+2+96]=A[L+1+64]=A[L+0+32]=Xt(ce,H,Q),A[L+3+96]=A[L+2+64]=A[L+1+32]=A[L+0+0]=Xt(ue,ce,H),A[L+3+64]=A[L+2+32]=A[L+1+0]=Xt(he,ue,ce),A[L+3+32]=A[L+2+0]=Xt(me,he,ue),A[L+3+0]=Xt(ve,me,he)}function Qx(A,L){var H=A[L+1-32],Q=A[L+2-32],oe=A[L+3-32],ce=A[L+4-32],ue=A[L+5-32],he=A[L+6-32],me=A[L+7-32];A[L+0+0]=Xt(A[L+0-32],H,Q),A[L+1+0]=A[L+0+32]=Xt(H,Q,oe),A[L+2+0]=A[L+1+32]=A[L+0+64]=Xt(Q,oe,ce),A[L+3+0]=A[L+2+32]=A[L+1+64]=A[L+0+96]=Xt(oe,ce,ue),A[L+3+32]=A[L+2+64]=A[L+1+96]=Xt(ce,ue,he),A[L+3+64]=A[L+2+96]=Xt(ue,he,me),A[L+3+96]=Xt(he,me,me)}function dm(A,L){var H=A[L-1+0],Q=A[L-1+32],oe=A[L-1+64],ce=A[L-1-32],ue=A[L+0-32],he=A[L+1-32],me=A[L+2-32],ve=A[L+3-32];A[L+0+0]=A[L+1+64]=ce+ue+1>>1,A[L+1+0]=A[L+2+64]=ue+he+1>>1,A[L+2+0]=A[L+3+64]=he+me+1>>1,A[L+3+0]=me+ve+1>>1,A[L+0+96]=Xt(oe,Q,H),A[L+0+64]=Xt(Q,H,ce),A[L+0+32]=A[L+1+96]=Xt(H,ce,ue),A[L+1+32]=A[L+2+96]=Xt(ce,ue,he),A[L+2+32]=A[L+3+96]=Xt(ue,he,me),A[L+3+32]=Xt(he,me,ve)}function Lb(A,L){var H=A[L+0-32],Q=A[L+1-32],oe=A[L+2-32],ce=A[L+3-32],ue=A[L+4-32],he=A[L+5-32],me=A[L+6-32],ve=A[L+7-32];A[L+0+0]=H+Q+1>>1,A[L+1+0]=A[L+0+64]=Q+oe+1>>1,A[L+2+0]=A[L+1+64]=oe+ce+1>>1,A[L+3+0]=A[L+2+64]=ce+ue+1>>1,A[L+0+32]=Xt(H,Q,oe),A[L+1+32]=A[L+0+96]=Xt(Q,oe,ce),A[L+2+32]=A[L+1+96]=Xt(oe,ce,ue),A[L+3+32]=A[L+2+96]=Xt(ce,ue,he),A[L+3+64]=Xt(ue,he,me),A[L+3+96]=Xt(he,me,ve)}function p5(A,L){var H=A[L-1+0],Q=A[L-1+32],oe=A[L-1+64],ce=A[L-1+96];A[L+0+0]=H+Q+1>>1,A[L+2+0]=A[L+0+32]=Q+oe+1>>1,A[L+2+32]=A[L+0+64]=oe+ce+1>>1,A[L+1+0]=Xt(H,Q,oe),A[L+3+0]=A[L+1+32]=Xt(Q,oe,ce),A[L+3+32]=A[L+1+64]=Xt(oe,ce,ce),A[L+3+64]=A[L+2+64]=A[L+0+96]=A[L+1+96]=A[L+2+96]=A[L+3+96]=ce}function m5(A,L){var H=A[L-1+0],Q=A[L-1+32],oe=A[L-1+64],ce=A[L-1+96],ue=A[L-1-32],he=A[L+0-32],me=A[L+1-32],ve=A[L+2-32];A[L+0+0]=A[L+2+32]=H+ue+1>>1,A[L+0+32]=A[L+2+64]=Q+H+1>>1,A[L+0+64]=A[L+2+96]=oe+Q+1>>1,A[L+0+96]=ce+oe+1>>1,A[L+3+0]=Xt(he,me,ve),A[L+2+0]=Xt(ue,he,me),A[L+1+0]=A[L+3+32]=Xt(H,ue,he),A[L+1+32]=A[L+3+64]=Xt(Q,H,ue),A[L+1+64]=A[L+3+96]=Xt(oe,Q,H),A[L+1+96]=Xt(ce,oe,Q)}function g5(A,L){var H;for(H=0;8>H;++H)r(A,L+32*H,A,L-32,8)}function Db(A,L){var H;for(H=0;8>H;++H)s(A,L,A[L-1],8),L+=32}function Uh(A,L,H){var Q;for(Q=0;8>Q;++Q)s(L,H+32*Q,A,8)}function td(A,L){var H,Q=8;for(H=0;8>H;++H)Q+=A[L+H-32]+A[L-1+32*H];Uh(Q>>4,A,L)}function b5(A,L){var H,Q=4;for(H=0;8>H;++H)Q+=A[L+H-32];Uh(Q>>3,A,L)}function Hh(A,L){var H,Q=4;for(H=0;8>H;++H)Q+=A[L-1+32*H];Uh(Q>>3,A,L)}function Mb(A,L){Uh(128,A,L)}function hm(A,L,H){var Q=A[L-H],oe=A[L+0],ce=3*(oe-Q)+S5[1020+A[L-2*H]-A[L+H]],ue=h_[112+(ce+4>>3)];A[L-H]=So[255+Q+h_[112+(ce+3>>3)]],A[L+0]=So[255+oe-ue]}function e_(A,L,H,Q){var oe=A[L+0],ce=A[L+H];return ra[255+A[L-2*H]-A[L-H]]>Q||ra[255+ce-oe]>Q}function t_(A,L,H,Q){return 4*ra[255+A[L-H]-A[L+0]]+ra[255+A[L-2*H]-A[L+H]]<=Q}function n_(A,L,H,Q,oe){var ce=A[L-3*H],ue=A[L-2*H],he=A[L-H],me=A[L+0],ve=A[L+H],Le=A[L+2*H],Ke=A[L+3*H];return 4*ra[255+he-me]+ra[255+ue-ve]>Q?0:ra[255+A[L-4*H]-ce]<=oe&&ra[255+ce-ue]<=oe&&ra[255+ue-he]<=oe&&ra[255+Ke-Le]<=oe&&ra[255+Le-ve]<=oe&&ra[255+ve-me]<=oe}function r_(A,L,H,Q){var oe=2*Q+1;for(Q=0;16>Q;++Q)t_(A,L+Q,H,oe)&&hm(A,L+Q,H)}function Ll(A,L,H,Q){var oe=2*Q+1;for(Q=0;16>Q;++Q)t_(A,L+Q*H,1,oe)&&hm(A,L+Q*H,1)}function qc(A,L,H,Q){var oe;for(oe=3;0<oe;--oe)r_(A,L+=4*H,H,Q)}function y5(A,L,H,Q){var oe;for(oe=3;0<oe;--oe)Ll(A,L+=4,H,Q)}function nd(A,L,H,Q,oe,ce,ue,he){for(ce=2*ce+1;0<oe--;){if(n_(A,L,H,ce,ue))if(e_(A,L,H,he))hm(A,L,H);else{var me=A,ve=L,Le=H,Ke=me[ve-2*Le],Ye=me[ve-Le],$e=me[ve+0],st=me[ve+Le],Ze=me[ve+2*Le],De=27*(tt=S5[1020+3*($e-Ye)+S5[1020+Ke-st]])+63>>7,Me=18*tt+63>>7,tt=9*tt+63>>7;me[ve-3*Le]=So[255+me[ve-3*Le]+tt],me[ve-2*Le]=So[255+Ke+Me],me[ve-Le]=So[255+Ye+De],me[ve+0]=So[255+$e-De],me[ve+Le]=So[255+st-Me],me[ve+2*Le]=So[255+Ze-tt]}L+=Q}}function qa(A,L,H,Q,oe,ce,ue,he){for(ce=2*ce+1;0<oe--;){if(n_(A,L,H,ce,ue))if(e_(A,L,H,he))hm(A,L,H);else{var me=A,ve=L,Le=H,Ke=me[ve-Le],Ye=me[ve+0],$e=me[ve+Le],st=h_[112+((Ze=3*(Ye-Ke))+4>>3)],Ze=h_[112+(Ze+3>>3)],De=st+1>>1;me[ve-2*Le]=So[255+me[ve-2*Le]+De],me[ve-Le]=So[255+Ke+Ze],me[ve+0]=So[255+Ye-st],me[ve+Le]=So[255+$e-De]}L+=Q}}function jb(A,L,H,Q,oe,ce){nd(A,L,H,1,16,Q,oe,ce)}function zh(A,L,H,Q,oe,ce){nd(A,L,1,H,16,Q,oe,ce)}function v5(A,L,H,Q,oe,ce){var ue;for(ue=3;0<ue;--ue)qa(A,L+=4*H,H,1,16,Q,oe,ce)}function fm(A,L,H,Q,oe,ce){var ue;for(ue=3;0<ue;--ue)qa(A,L+=4,1,H,16,Q,oe,ce)}function w5(A,L,H,Q,oe,ce,ue,he){nd(A,L,oe,1,8,ce,ue,he),nd(H,Q,oe,1,8,ce,ue,he)}function Fb(A,L,H,Q,oe,ce,ue,he){nd(A,L,1,oe,8,ce,ue,he),nd(H,Q,1,oe,8,ce,ue,he)}function Bb(A,L,H,Q,oe,ce,ue,he){qa(A,L+4*oe,oe,1,8,ce,ue,he),qa(H,Q+4*oe,oe,1,8,ce,ue,he)}function s_(A,L,H,Q,oe,ce,ue,he){qa(A,L+4,1,oe,8,ce,ue,he),qa(H,Q+4,1,oe,8,ce,ue,he)}function pm(){this.ba=new rn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new er,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $b(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ub(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function i_(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new P,this.yc=new T}function x5(){this.xb=this.a=0,this.l=new am,this.ca=new rn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new i_,this.ab=0,this.gc=o(4,Ub),this.Oc=0}function mm(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new am,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Vh(A,L,H,Q,oe,ce,ue){for(A=A==null?0:A[L+0],L=0;L<ue;++L)oe[ce+L]=A+H[Q+L]&255,A=oe[ce+L]}function Hb(A,L,H,Q,oe,ce,ue){var he;if(A==null)Vh(null,null,H,Q,oe,ce,ue);else for(he=0;he<ue;++he)oe[ce+he]=A[L+he]+H[Q+he]&255}function rd(A,L,H,Q,oe,ce,ue){if(A==null)Vh(null,null,H,Q,oe,ce,ue);else{var he,me=A[L+0],ve=me,Le=me;for(he=0;he<ue;++he)ve=Le+(me=A[L+he])-ve,Le=H[Q+he]+(-256&ve?0>ve?0:255:ve)&255,ve=me,oe[ce+he]=Le}}function zb(A,L,H,Q){var oe=L.width,ce=L.o;if(e(A!=null&&L!=null),0>H||0>=Q||H+Q>ce)return null;if(!A.Cc){if(A.ga==null){var ue;if(A.ga=new mm,(ue=A.ga==null)||(ue=L.width*L.o,e(A.Gb.length==0),A.Gb=i(ue),A.Uc=0,A.Gb==null?ue=0:(A.mb=A.Gb,A.nb=A.Uc,A.rc=null,ue=1),ue=!ue),!ue){ue=A.ga;var he=A.Fa,me=A.P,ve=A.qc,Le=A.mb,Ke=A.nb,Ye=me+1,$e=ve-1,st=ue.l;if(e(he!=null&&Le!=null&&L!=null),cd[0]=null,cd[1]=Vh,cd[2]=Hb,cd[3]=rd,ue.ca=Le,ue.tb=Ke,ue.c=L.width,ue.i=L.height,e(0<ue.c&&0<ue.i),1>=ve)L=0;else if(ue.$a=he[me+0]>>0&3,ue.Z=he[me+0]>>2&3,ue.Lc=he[me+0]>>4&3,me=he[me+0]>>6&3,0>ue.$a||1<ue.$a||4<=ue.Z||1<ue.Lc||me)L=0;else if(st.put=Tl,st.ac=Ds,st.bc=Pl,st.ma=ue,st.width=L.width,st.height=L.height,st.Da=L.Da,st.v=L.v,st.va=L.va,st.j=L.j,st.o=L.o,ue.$a)e:{e(ue.$a==1),L=Zo();t:for(;;){if(L==null){L=0;break e}if(e(ue!=null),ue.mc=L,L.c=ue.c,L.i=ue.i,L.l=ue.l,L.l.ma=ue,L.l.width=ue.c,L.l.height=ue.i,L.a=0,Z(L.m,he,Ye,$e),!Rl(ue.c,ue.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&Wc(L.s)?(ue.ic=1,he=L.c*L.i,L.Ta=null,L.Ua=0,L.V=i(he),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(ue.ic=0,L=$h(L,ue.c)),!L))break t;L=1;break e}ue.mc=null,L=0}else L=$e>=ue.c*ue.i;ue=!L}if(ue)return null;A.ga.Lc!=1?A.Ga=0:Q=ce-H}e(A.ga!=null),e(H+Q<=ce);e:{if(L=(he=A.ga).c,ce=he.l.o,he.$a==0){if(Ye=A.rc,$e=A.Vc,st=A.Fa,me=A.P+1+H*L,ve=A.mb,Le=A.nb+H*L,e(me<=A.P+A.qc),he.Z!=0)for(e(cd[he.Z]!=null),ue=0;ue<Q;++ue)cd[he.Z](Ye,$e,st,me,ve,Le,L),Ye=ve,$e=Le,Le+=L,me+=L;else for(ue=0;ue<Q;++ue)r(ve,Le,st,me,L),Ye=ve,$e=Le,Le+=L,me+=L;A.rc=Ye,A.Vc=$e}else{if(e(he.mc!=null),L=H+Q,e((ue=he.mc)!=null),e(L<=ue.i),ue.C>=L)L=1;else if(he.ic||ze(),he.ic){he=ue.V,Ye=ue.Ba,$e=ue.c;var Ze=ue.i,De=(st=1,me=ue.$/$e,ve=ue.$%$e,Le=ue.m,Ke=ue.s,ue.$),Me=$e*Ze,tt=$e*L,ct=Ke.wc,rt=De<tt?Xr(Ke,ve,me):null;e(De<=Me),e(L<=Ze),e(Wc(Ke));t:for(;;){for(;!Le.h&&De<tt;){if(ve&ct||(rt=Xr(Ke,ve,me)),e(rt!=null),ne(Le),256>(Ze=zi(rt.G[0],rt.H[0],Le)))he[Ye+De]=Ze,++De,++ve>=$e&&(ve=0,++me<=L&&!(me%16)&&Va(ue,me));else{if(!(280>Ze)){st=0;break t}Ze=Ha(Ze-256,Le);var Pt,St=zi(rt.G[4],rt.H[4],Le);if(ne(Le),!(De>=(St=Nl($e,St=Ha(St,Le)))&&Me-De>=Ze)){st=0;break t}for(Pt=0;Pt<Ze;++Pt)he[Ye+De+Pt]=he[Ye+De+Pt-St];for(De+=Ze,ve+=Ze;ve>=$e;)ve-=$e,++me<=L&&!(me%16)&&Va(ue,me);De<tt&&ve&ct&&(rt=Xr(Ke,ve,me))}e(Le.h==W(Le))}Va(ue,me>L?L:me);break t}!st||Le.h&&De<Me?(st=0,ue.a=Le.h?5:3):ue.$=De,L=st}else L=Wa(ue,ue.V,ue.Ba,ue.c,ue.i,L,nm);if(!L){Q=0;break e}}H+Q>=ce&&(A.Cc=1),Q=1}if(!Q)return null;if(A.Cc&&((Q=A.ga)!=null&&(Q.mc=null),A.ga=null,0<A.Ga))return alert("todo:WebPDequantizeLevels"),null}return A.nb+H*oe}function B(A,L,H,Q,oe,ce){for(;0<oe--;){var ue,he=A,me=L+(H?1:0),ve=A,Le=L+(H?0:3);for(ue=0;ue<Q;++ue){var Ke=ve[Le+4*ue];Ke!=255&&(Ke*=32897,he[me+4*ue+0]=he[me+4*ue+0]*Ke>>23,he[me+4*ue+1]=he[me+4*ue+1]*Ke>>23,he[me+4*ue+2]=he[me+4*ue+2]*Ke>>23)}L+=ce}}function ae(A,L,H,Q,oe){for(;0<Q--;){var ce;for(ce=0;ce<H;++ce){var ue=A[L+2*ce+0],he=15&(ve=A[L+2*ce+1]),me=4369*he,ve=(240&ve|ve>>4)*me>>16;A[L+2*ce+0]=(240&ue|ue>>4)*me>>16&240|(15&ue|ue<<4)*me>>16>>4&15,A[L+2*ce+1]=240&ve|he}L+=oe}}function Ee(A,L,H,Q,oe,ce,ue,he){var me,ve,Le=255;for(ve=0;ve<oe;++ve){for(me=0;me<Q;++me){var Ke=A[L+me];ce[ue+4*me]=Ke,Le&=Ke}L+=H,ue+=he}return Le!=255}function Re(A,L,H,Q,oe){var ce;for(ce=0;ce<oe;++ce)H[Q+ce]=A[L+ce]>>8}function ze(){na=B,or=ae,ar=Ee,Br=Re}function et(A,L,H){x[A]=function(Q,oe,ce,ue,he,me,ve,Le,Ke,Ye,$e,st,Ze,De,Me,tt,ct){var rt,Pt=ct-1>>1,St=he[me+0]|ve[Le+0]<<16,zt=Ke[Ye+0]|$e[st+0]<<16;e(Q!=null);var kt=3*St+zt+131074>>2;for(L(Q[oe+0],255&kt,kt>>16,Ze,De),ce!=null&&(kt=3*zt+St+131074>>2,L(ce[ue+0],255&kt,kt>>16,Me,tt)),rt=1;rt<=Pt;++rt){var $n=he[me+rt]|ve[Le+rt]<<16,Vn=Ke[Ye+rt]|$e[st+rt]<<16,On=St+$n+zt+Vn+524296,wn=On+2*($n+zt)>>3;kt=wn+St>>1,St=(On=On+2*(St+Vn)>>3)+$n>>1,L(Q[oe+2*rt-1],255&kt,kt>>16,Ze,De+(2*rt-1)*H),L(Q[oe+2*rt-0],255&St,St>>16,Ze,De+(2*rt-0)*H),ce!=null&&(kt=On+zt>>1,St=wn+Vn>>1,L(ce[ue+2*rt-1],255&kt,kt>>16,Me,tt+(2*rt-1)*H),L(ce[ue+2*rt+0],255&St,St>>16,Me,tt+(2*rt+0)*H)),St=$n,zt=Vn}1&ct||(kt=3*St+zt+131074>>2,L(Q[oe+ct-1],255&kt,kt>>16,Ze,De+(ct-1)*H),ce!=null&&(kt=3*zt+St+131074>>2,L(ce[ue+ct-1],255&kt,kt>>16,Me,tt+(ct-1)*H)))}}function dt(){sa[f_]=iye,sa[p_]=gF,sa[dF]=oye,sa[m_]=bF,sa[g_]=yF,sa[E5]=vF,sa[hF]=aye,sa[k5]=gF,sa[C5]=bF,sa[b_]=yF,sa[A5]=vF}function At(A){return A&-16384?0>A?0:255:A>>lye}function Ht(A,L){return At((19077*A>>8)+(26149*L>>8)-14234)}function tn(A,L,H){return At((19077*A>>8)-(6419*L>>8)-(13320*H>>8)+8708)}function Qt(A,L){return At((19077*A>>8)+(33050*L>>8)-17685)}function Cn(A,L,H,Q,oe){Q[oe+0]=Ht(A,H),Q[oe+1]=tn(A,L,H),Q[oe+2]=Qt(A,L)}function Cr(A,L,H,Q,oe){Q[oe+0]=Qt(A,L),Q[oe+1]=tn(A,L,H),Q[oe+2]=Ht(A,H)}function Ir(A,L,H,Q,oe){var ce=tn(A,L,H);L=ce<<3&224|Qt(A,L)>>3,Q[oe+0]=248&Ht(A,H)|ce>>5,Q[oe+1]=L}function Zr(A,L,H,Q,oe){var ce=240&Qt(A,L)|15;Q[oe+0]=240&Ht(A,H)|tn(A,L,H)>>4,Q[oe+1]=ce}function ei(A,L,H,Q,oe){Q[oe+0]=255,Cn(A,L,H,Q,oe+1)}function xs(A,L,H,Q,oe){Cr(A,L,H,Q,oe),Q[oe+3]=255}function Ka(A,L,H,Q,oe){Cn(A,L,H,Q,oe),Q[oe+3]=255}function _o(A,L){return 0>A?0:A>L?L:A}function Dl(A,L,H){x[A]=function(Q,oe,ce,ue,he,me,ve,Le,Ke){for(var Ye=Le+(-2&Ke)*H;Le!=Ye;)L(Q[oe+0],ce[ue+0],he[me+0],ve,Le),L(Q[oe+1],ce[ue+0],he[me+0],ve,Le+H),oe+=2,++ue,++me,Le+=2*H;1&Ke&&L(Q[oe+0],ce[ue+0],he[me+0],ve,Le)}}function o_(A,L,H){return H==0?A==0?L==0?6:5:L==0?4:0:H}function Vb(A,L,H,Q,oe){switch(A>>>30){case 3:Jc(L,H,Q,oe,0);break;case 2:Fr(L,H,Q,oe);break;case 1:Si(L,H,Q,oe)}}function Wb(A,L){var H,Q,oe=L.M,ce=L.Nb,ue=A.oc,he=A.pc+40,me=A.oc,ve=A.pc+584,Le=A.oc,Ke=A.pc+600;for(H=0;16>H;++H)ue[he+32*H-1]=129;for(H=0;8>H;++H)me[ve+32*H-1]=129,Le[Ke+32*H-1]=129;for(0<oe?ue[he-1-32]=me[ve-1-32]=Le[Ke-1-32]=129:(s(ue,he-32-1,127,21),s(me,ve-32-1,127,9),s(Le,Ke-32-1,127,9)),Q=0;Q<A.za;++Q){var Ye=L.ya[L.aa+Q];if(0<Q){for(H=-1;16>H;++H)r(ue,he+32*H-4,ue,he+32*H+12,4);for(H=-1;8>H;++H)r(me,ve+32*H-4,me,ve+32*H+4,4),r(Le,Ke+32*H-4,Le,Ke+32*H+4,4)}var $e=A.Gd,st=A.Hd+Q,Ze=Ye.ad,De=Ye.Hc;if(0<oe&&(r(ue,he-32,$e[st].y,0,16),r(me,ve-32,$e[st].f,0,8),r(Le,Ke-32,$e[st].ea,0,8)),Ye.Za){var Me=ue,tt=he-32+16;for(0<oe&&(Q>=A.za-1?s(Me,tt,$e[st].y[15],4):r(Me,tt,$e[st+1].y,0,4)),H=0;4>H;H++)Me[tt+128+H]=Me[tt+256+H]=Me[tt+384+H]=Me[tt+0+H];for(H=0;16>H;++H,De<<=2)Me=ue,tt=he+xF[H],Ya[Ye.Ob[H]](Me,tt),Vb(De,Ze,16*+H,Me,tt)}else if(Me=o_(Q,oe,Ye.Ob[0]),ld[Me](ue,he),De!=0)for(H=0;16>H;++H,De<<=2)Vb(De,Ze,16*+H,ue,he+xF[H]);for(H=Ye.Gc,Me=o_(Q,oe,Ye.Dd),Zc[Me](me,ve),Zc[Me](Le,Ke),De=Ze,Me=me,tt=ve,255&(Ye=H>>0)&&(170&Ye?Jb(De,256,Me,tt):ea(De,256,Me,tt)),Ye=Le,De=Ke,255&(H>>=8)&&(170&H?Jb(Ze,320,Ye,De):ea(Ze,320,Ye,De)),oe<A.Ub-1&&(r($e[st].y,0,ue,he+480,16),r($e[st].f,0,me,ve+224,8),r($e[st].ea,0,Le,Ke+224,8)),H=8*ce*A.B,$e=A.sa,st=A.ta+16*Q+16*ce*A.R,Ze=A.qa,Ye=A.ra+8*Q+H,De=A.Ha,Me=A.Ia+8*Q+H,H=0;16>H;++H)r($e,st+H*A.R,ue,he+32*H,16);for(H=0;8>H;++H)r(Ze,Ye+H*A.B,me,ve+32*H,8),r(De,Me+H*A.B,Le,Ke+32*H,8)}}function gm(A,L,H,Q,oe,ce,ue,he,me){var ve=[0],Le=[0],Ke=0,Ye=me!=null?me.kd:0,$e=me??new $b;if(A==null||12>H)return 7;$e.data=A,$e.w=L,$e.ha=H,L=[L],H=[H],$e.gb=[$e.gb];e:{var st=L,Ze=H,De=$e.gb;if(e(A!=null),e(Ze!=null),e(De!=null),De[0]=0,12<=Ze[0]&&!n(A,st[0],"RIFF")){if(n(A,st[0]+8,"WEBP")){De=3;break e}var Me=Pe(A,st[0]+4);if(12>Me||4294967286<Me){De=3;break e}if(Ye&&Me>Ze[0]-8){De=7;break e}De[0]=Me,st[0]+=12,Ze[0]-=12}De=0}if(De!=0)return De;for(Me=0<$e.gb[0],H=H[0];;){e:{var tt=A;Ze=L,De=H;var ct=ve,rt=Le,Pt=st=[0];if((kt=Ke=[Ke])[0]=0,8>De[0])De=7;else{if(!n(tt,Ze[0],"VP8X")){if(Pe(tt,Ze[0]+4)!=10){De=3;break e}if(18>De[0]){De=7;break e}var St=Pe(tt,Ze[0]+8),zt=1+Ae(tt,Ze[0]+12);if(2147483648<=zt*(tt=1+Ae(tt,Ze[0]+15))){De=3;break e}Pt!=null&&(Pt[0]=St),ct!=null&&(ct[0]=zt),rt!=null&&(rt[0]=tt),Ze[0]+=18,De[0]-=18,kt[0]=1}De=0}}if(Ke=Ke[0],st=st[0],De!=0)return De;if(Ze=!!(2&st),!Me&&Ke)return 3;if(ce!=null&&(ce[0]=!!(16&st)),ue!=null&&(ue[0]=Ze),he!=null&&(he[0]=0),ue=ve[0],st=Le[0],Ke&&Ze&&me==null){De=0;break}if(4>H){De=7;break}if(Me&&Ke||!Me&&!Ke&&!n(A,L[0],"ALPH")){H=[H],$e.na=[$e.na],$e.P=[$e.P],$e.Sa=[$e.Sa];e:{St=A,De=L,Me=H;var kt=$e.gb;ct=$e.na,rt=$e.P,Pt=$e.Sa,zt=22,e(St!=null),e(Me!=null),tt=De[0];var $n=Me[0];for(e(ct!=null),e(Pt!=null),ct[0]=null,rt[0]=null,Pt[0]=0;;){if(De[0]=tt,Me[0]=$n,8>$n){De=7;break e}var Vn=Pe(St,tt+4);if(4294967286<Vn){De=3;break e}var On=8+Vn+1&-2;if(zt+=On,0<kt&&zt>kt){De=3;break e}if(!n(St,tt,"VP8 ")||!n(St,tt,"VP8L")){De=0;break e}if($n[0]<On){De=7;break e}n(St,tt,"ALPH")||(ct[0]=St,rt[0]=tt+8,Pt[0]=Vn),tt+=On,$n-=On}}if(H=H[0],$e.na=$e.na[0],$e.P=$e.P[0],$e.Sa=$e.Sa[0],De!=0)break}H=[H],$e.Ja=[$e.Ja],$e.xa=[$e.xa];e:if(kt=A,De=L,Me=H,ct=$e.gb[0],rt=$e.Ja,Pt=$e.xa,St=De[0],tt=!n(kt,St,"VP8 "),zt=!n(kt,St,"VP8L"),e(kt!=null),e(Me!=null),e(rt!=null),e(Pt!=null),8>Me[0])De=7;else{if(tt||zt){if(kt=Pe(kt,St+4),12<=ct&&kt>ct-12){De=3;break e}if(Ye&&kt>Me[0]-8){De=7;break e}rt[0]=kt,De[0]+=8,Me[0]-=8,Pt[0]=zt}else Pt[0]=5<=Me[0]&&kt[St+0]==47&&!(kt[St+4]>>5),rt[0]=Me[0];De=0}if(H=H[0],$e.Ja=$e.Ja[0],$e.xa=$e.xa[0],L=L[0],De!=0)break;if(4294967286<$e.Ja)return 3;if(he==null||Ze||(he[0]=$e.xa?2:1),ue=[ue],st=[st],$e.xa){if(5>H){De=7;break}he=ue,Ye=st,Ze=ce,A==null||5>H?A=0:5<=H&&A[L+0]==47&&!(A[L+4]>>5)?(Me=[0],kt=[0],ct=[0],Z(rt=new D,A,L,H),Wt(rt,Me,kt,ct)?(he!=null&&(he[0]=Me[0]),Ye!=null&&(Ye[0]=kt[0]),Ze!=null&&(Ze[0]=ct[0]),A=1):A=0):A=0}else{if(10>H){De=7;break}he=st,A==null||10>H||!Vx(A,L+3,H-3)?A=0:(Ye=A[L+0]|A[L+1]<<8|A[L+2]<<16,Ze=16383&(A[L+7]<<8|A[L+6]),A=16383&(A[L+9]<<8|A[L+8]),1&Ye||3<(Ye>>1&7)||!(Ye>>4&1)||Ye>>5>=$e.Ja||!Ze||!A?A=0:(ue&&(ue[0]=Ze),he&&(he[0]=A),A=1))}if(!A||(ue=ue[0],st=st[0],Ke&&(ve[0]!=ue||Le[0]!=st)))return 3;me!=null&&(me[0]=$e,me.offset=L-me.w,e(4294967286>L-me.w),e(me.offset==me.ha-H));break}return De==0||De==7&&Ke&&me==null?(ce!=null&&(ce[0]|=$e.na!=null&&0<$e.na.length),Q!=null&&(Q[0]=ue),oe!=null&&(oe[0]=st),0):De}function Gb(A,L,H){var Q=L.width,oe=L.height,ce=0,ue=0,he=Q,me=oe;if(L.Da=A!=null&&0<A.Da,L.Da&&(he=A.cd,me=A.bd,ce=A.v,ue=A.j,11>H||(ce&=-2,ue&=-2),0>ce||0>ue||0>=he||0>=me||ce+he>Q||ue+me>oe))return 0;if(L.v=ce,L.j=ue,L.va=ce+he,L.o=ue+me,L.U=he,L.T=me,L.da=A!=null&&0<A.da,L.da){if(!le(he,me,H=[A.ib],ce=[A.hb]))return 0;L.ib=H[0],L.hb=ce[0]}return L.ob=A!=null&&A.ob,L.Kb=A==null||!A.Sd,L.da&&(L.ob=L.ib<3*Q/4&&L.hb<3*oe/4,L.Kb=0),1}function qb(A){if(A==null)return 2;if(11>A.S){var L=A.f.RGBA;L.fb+=(A.height-1)*L.A,L.A=-L.A}else L=A.f.kb,A=A.height,L.O+=(A-1)*L.fa,L.fa=-L.fa,L.N+=(A-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(A-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(A-1)*L.lb,L.lb=-L.lb);return 0}function bm(A,L,H,Q){if(Q==null||0>=A||0>=L)return 2;if(H!=null){if(H.Da){var oe=H.cd,ce=H.bd,ue=-2&H.v,he=-2&H.j;if(0>ue||0>he||0>=oe||0>=ce||ue+oe>A||he+ce>L)return 2;A=oe,L=ce}if(H.da){if(!le(A,L,oe=[H.ib],ce=[H.hb]))return 2;A=oe[0],L=ce[0]}}Q.width=A,Q.height=L;e:{var me=Q.width,ve=Q.height;if(A=Q.S,0>=me||0>=ve||!(A>=f_&&13>A))A=2;else{if(0>=Q.Rd&&Q.sd==null){ue=ce=oe=L=0;var Le=(he=me*_F[A])*ve;if(11>A||(ce=(ve+1)/2*(L=(me+1)/2),A==12&&(ue=(oe=me)*ve)),(ve=i(Le+2*ce+ue))==null){A=1;break e}Q.sd=ve,11>A?((me=Q.f.RGBA).eb=ve,me.fb=0,me.A=he,me.size=Le):((me=Q.f.kb).y=ve,me.O=0,me.fa=he,me.Fd=Le,me.f=ve,me.N=0+Le,me.Ab=L,me.Cd=ce,me.ea=ve,me.W=0+Le+ce,me.Db=L,me.Ed=ce,A==12&&(me.F=ve,me.J=0+Le+2*ce),me.Tc=ue,me.lb=oe)}if(L=1,oe=Q.S,ce=Q.width,ue=Q.height,oe>=f_&&13>oe)if(11>oe)A=Q.f.RGBA,L&=(he=Math.abs(A.A))*(ue-1)+ce<=A.size,L&=he>=ce*_F[oe],L&=A.eb!=null;else{A=Q.f.kb,he=(ce+1)/2,Le=(ue+1)/2,me=Math.abs(A.fa),ve=Math.abs(A.Ab);var Ke=Math.abs(A.Db),Ye=Math.abs(A.lb),$e=Ye*(ue-1)+ce;L&=me*(ue-1)+ce<=A.Fd,L&=ve*(Le-1)+he<=A.Cd,L=(L&=Ke*(Le-1)+he<=A.Ed)&me>=ce&ve>=he&Ke>=he,L&=A.y!=null,L&=A.f!=null,L&=A.ea!=null,oe==12&&(L&=Ye>=ce,L&=$e<=A.Tc,L&=A.F!=null)}else L=0;A=L?0:2}}return A!=0||H!=null&&H.fd&&(A=qb(Q)),A}var Ms=64,ym=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vm=24,wm=32,Kb=8,Wi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ce("Predictor0","PredictorAdd0"),x.Predictor0=function(){return 4278190080},x.Predictor1=function(A){return A},x.Predictor2=function(A,L,H){return L[H+0]},x.Predictor3=function(A,L,H){return L[H+1]},x.Predictor4=function(A,L,H){return L[H-1]},x.Predictor5=function(A,L,H){return we(we(A,L[H+1]),L[H+0])},x.Predictor6=function(A,L,H){return we(A,L[H-1])},x.Predictor7=function(A,L,H){return we(A,L[H+0])},x.Predictor8=function(A,L,H){return we(L[H-1],L[H+0])},x.Predictor9=function(A,L,H){return we(L[H+0],L[H+1])},x.Predictor10=function(A,L,H){return we(we(A,L[H-1]),we(L[H+0],L[H+1]))},x.Predictor11=function(A,L,H){var Q=L[H+0];return 0>=Be(Q>>24&255,A>>24&255,(L=L[H-1])>>24&255)+Be(Q>>16&255,A>>16&255,L>>16&255)+Be(Q>>8&255,A>>8&255,L>>8&255)+Be(255&Q,255&A,255&L)?Q:A},x.Predictor12=function(A,L,H){var Q=L[H+0];return(Ue((A>>24&255)+(Q>>24&255)-((L=L[H-1])>>24&255))<<24|Ue((A>>16&255)+(Q>>16&255)-(L>>16&255))<<16|Ue((A>>8&255)+(Q>>8&255)-(L>>8&255))<<8|Ue((255&A)+(255&Q)-(255&L)))>>>0},x.Predictor13=function(A,L,H){var Q=L[H-1];return(Fe((A=we(A,L[H+0]))>>24&255,Q>>24&255)<<24|Fe(A>>16&255,Q>>16&255)<<16|Fe(A>>8&255,Q>>8&255)<<8|Fe(A>>0&255,Q>>0&255))>>>0};var _5=x.PredictorAdd0;x.PredictorAdd1=ke,Ce("Predictor2","PredictorAdd2"),Ce("Predictor3","PredictorAdd3"),Ce("Predictor4","PredictorAdd4"),Ce("Predictor5","PredictorAdd5"),Ce("Predictor6","PredictorAdd6"),Ce("Predictor7","PredictorAdd7"),Ce("Predictor8","PredictorAdd8"),Ce("Predictor9","PredictorAdd9"),Ce("Predictor10","PredictorAdd10"),Ce("Predictor11","PredictorAdd11"),Ce("Predictor12","PredictorAdd12"),Ce("Predictor13","PredictorAdd13");var Yb=x.PredictorAdd2;ie("ColorIndexInverseTransform","MapARGB","32b",function(A){return A>>8&255},function(A){return A}),ie("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(A){return A},function(A){return A>>8&255});var a_,Qo=x.ColorIndexInverseTransform,xm=x.MapARGB,l_=x.VP8LColorIndexInverseTransformAlpha,c_=x.MapAlpha,sd=x.VP8LPredictorsAdd=[];sd.length=16,(x.VP8LPredictors=[]).length=16,(x.VP8LPredictorsAdd_C=[]).length=16,(x.VP8LPredictors_C=[]).length=16;var Wh,Gi,_i,id,Kc,Yc,_m,Jc,Fr,Jb,Si,ea,Sm,u_,Xb,Gh,qh,od,Kh,Em,Yh,ad,Zb,ta,na,or,ar,Br,ds=i(511),Xc=i(2041),Qb=i(225),km=i(767),d_=0,S5=Xc,h_=Qb,So=km,ra=ds,f_=0,p_=1,dF=2,m_=3,g_=4,E5=5,hF=6,k5=7,C5=8,b_=9,A5=10,Wbe=[2,3,7],Gbe=[3,3,11],fF=[280,256,256,256,40],qbe=[0,1,1,1,0],Kbe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ybe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Jbe=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Xbe=8,T5=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],P5=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ey=null,Zbe=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qbe=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],pF=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],eye=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],tye=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nye=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],rye=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ld=[],Ya=[],Zc=[],sye=1,mF=2,cd=[],sa=[];et("UpsampleRgbLinePair",Cn,3),et("UpsampleBgrLinePair",Cr,3),et("UpsampleRgbaLinePair",Ka,4),et("UpsampleBgraLinePair",xs,4),et("UpsampleArgbLinePair",ei,4),et("UpsampleRgba4444LinePair",Zr,2),et("UpsampleRgb565LinePair",Ir,2);var iye=x.UpsampleRgbLinePair,oye=x.UpsampleBgrLinePair,gF=x.UpsampleRgbaLinePair,bF=x.UpsampleBgraLinePair,yF=x.UpsampleArgbLinePair,vF=x.UpsampleRgba4444LinePair,aye=x.UpsampleRgb565LinePair,y_=16,v_=1<<y_-1,ty=-227,N5=482,lye=6,wF=0,cye=i(256),uye=i(256),dye=i(256),hye=i(256),fye=i(N5-ty),pye=i(N5-ty);Dl("YuvToRgbRow",Cn,3),Dl("YuvToBgrRow",Cr,3),Dl("YuvToRgbaRow",Ka,4),Dl("YuvToBgraRow",xs,4),Dl("YuvToArgbRow",ei,4),Dl("YuvToRgba4444Row",Zr,2),Dl("YuvToRgb565Row",Ir,2);var xF=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],w_=[0,2,8],mye=[8,7,6,4,4,2,2,2,1,1,1,1],gye=1;this.WebPDecodeRGBA=function(A,L,H,Q,oe){var ce=p_,ue=new pm,he=new rn;ue.ba=he,he.S=ce,he.width=[he.width],he.height=[he.height];var me=he.width,ve=he.height,Le=new xi;if(Le==null||A==null)var Ke=2;else e(Le!=null),Ke=gm(A,L,H,Le.width,Le.height,Le.Pd,Le.Qd,Le.format,null);if(Ke!=0?me=0:(me!=null&&(me[0]=Le.width[0]),ve!=null&&(ve[0]=Le.height[0]),me=1),me){he.width=he.width[0],he.height=he.height[0],Q!=null&&(Q[0]=he.width),oe!=null&&(oe[0]=he.height);e:{if(Q=new am,(oe=new $b).data=A,oe.w=L,oe.ha=H,oe.kd=1,L=[0],e(oe!=null),((A=gm(oe.data,oe.w,oe.ha,null,null,null,L,null,oe))==0||A==7)&&L[0]&&(A=4),(L=A)==0){if(e(ue!=null),Q.data=oe.data,Q.w=oe.w+oe.offset,Q.ha=oe.ha-oe.offset,Q.put=Tl,Q.ac=Ds,Q.bc=Pl,Q.ma=ue,oe.xa){if((A=Zo())==null){ue=1;break e}if(function(Ye,$e){var st=[0],Ze=[0],De=[0];t:for(;;){if(Ye==null)return 0;if($e==null)return Ye.a=2,0;if(Ye.l=$e,Ye.a=0,Z(Ye.m,$e.data,$e.w,$e.ha),!Wt(Ye.m,st,Ze,De)){Ye.a=3;break t}if(Ye.xb=mF,$e.width=st[0],$e.height=Ze[0],!Rl(st[0],Ze[0],1,Ye,null))break t;return 1}return e(Ye.a!=0),0}(A,Q)){if(Q=(L=bm(Q.width,Q.height,ue.Oa,ue.ba))==0){t:{Q=A;n:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((H=Q.l)!=null),e((oe=H.ma)!=null),Q.xb!=0){if(Q.ca=oe.ba,Q.tb=oe.tb,e(Q.ca!=null),!Gb(oe.Oa,H,m_)){Q.a=2;break n}if(!$h(Q,H.width)||H.da)break n;if((H.da||Lt(Q.ca.S))&&ze(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&ze()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!K(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break n}Q.xb=0}if(!Wa(Q,Q.V,Q.Ba,Q.c,Q.i,H.o,tm))break n;oe.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(L=A.a)}else L=A.a}else{if((A=new r5)==null){ue=1;break e}if(A.Fa=oe.na,A.P=oe.P,A.qc=oe.Sa,Wx(A,Q)){if((L=bm(Q.width,Q.height,ue.Oa,ue.ba))==0){if(A.Aa=0,H=ue.Oa,e((oe=A)!=null),H!=null){if(0<(me=0>(me=H.Md)?0:100<me?255:255*me/100)){for(ve=Le=0;4>ve;++ve)12>(Ke=oe.pb[ve]).lc&&(Ke.ia=me*mye[0>Ke.lc?0:Ke.lc]>>3),Le|=Ke.ia;Le&&(alert("todo:VP8InitRandom"),oe.ia=1)}oe.Ga=H.Id,100<oe.Ga?oe.Ga=100:0>oe.Ga&&(oe.Ga=0)}s5(A,Q)||(L=A.a)}}else L=A.a}L==0&&ue.Oa!=null&&ue.Oa.fd&&(L=qb(ue.ba))}ue=L}ce=ue!=0?null:11>ce?he.f.RGBA.eb:he.f.kb.y}else ce=null;return ce};var _F=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(x,I){for(var R="",C=0;C<4;C++)R+=String.fromCharCode(x[I++]);return R}function u(x,I){return(x[I+0]<<0|x[I+1]<<8|x[I+2]<<16)>>>0}function d(x,I){return(x[I+0]<<0|x[I+1]<<8|x[I+2]<<16|x[I+3]<<24)>>>0}new l;var h=[0],f=[0],p=[],m=new l,g=t,b=function(x,I){var R={},C=0,T=!1,O=0,P=0;if(R.frames=[],!function(j,W,q,ne){for(var te=0;te<ne;te++)if(j[W+te]!=q.charCodeAt(te))return!0;return!1}(x,I,"RIFF",4)){var U,ee;for(d(x,I+=4),I+=8;I<x.length;){var X=c(x,I),Z=d(x,I+=4);I+=4;var F=Z+(1&Z);switch(X){case"VP8 ":case"VP8L":R.frames[C]===void 0&&(R.frames[C]={}),(D=R.frames[C]).src_off=T?P:I-8,D.src_size=O+Z+8,C++,T&&(T=!1,O=0,P=0);break;case"VP8X":(D=R.header={}).feature_flags=x[I];var M=I+4;D.canvas_width=1+u(x,M),M+=3,D.canvas_height=1+u(x,M),M+=3;break;case"ALPH":T=!0,O=F+8,P=I-8;break;case"ANIM":(D=R.header).bgcolor=d(x,I),M=I+4,D.loop_count=(U=x)[(ee=M)+0]<<0|U[ee+1]<<8,M+=2;break;case"ANMF":var G,D;(D=R.frames[C]={}).offset_x=2*u(x,I),I+=3,D.offset_y=2*u(x,I),I+=3,D.width=1+u(x,I),I+=3,D.height=1+u(x,I),I+=3,D.duration=u(x,I),I+=3,G=x[I++],D.dispose=1&G,D.blend=G>>1&1}X!="ANMF"&&(I+=F)}return R}}(g,0);b.response=g,b.rgbaoutput=!0,b.dataurl=!1;var v=b.header?b.header:null,w=b.frames?b.frames:null;if(v){v.loop_counter=v.loop_count,h=[v.canvas_height],f=[v.canvas_width];for(var _=0;_<w.length&&w[_].blend!=0;_++);}var S=w[0],E=m.WebPDecodeRGBA(g,S.src_off,S.src_size,f,h);S.rgba=E,S.imgwidth=f[0],S.imgheight=h[0];for(var k=0;k<f[0]*h[0]*4;k++)p[k]=E[k];return this.width=f,this.height=h,this.data=p,this}(function(t){var e=function(){return typeof VR=="function"},n=function(h,f,p,m){var g=4,b=o;switch(m){case t.image_compression.FAST:g=1,b=i;break;case t.image_compression.MEDIUM:g=6,b=a;break;case t.image_compression.SLOW:g=9,b=l}h=r(h,f,p,b);var v=VR(h,{level:g});return t.__addimage__.arrayBufferToBinaryString(v)},r=function(h,f,p,m){for(var g,b,v,w=h.length/f,_=new Uint8Array(h.length+w),S=u(),E=0;E<w;E+=1){if(v=E*f,g=h.subarray(v,v+f),m)_.set(m(g,p,b),v+E);else{for(var k,x=S.length,I=[];k<x;k+=1)I[k]=S[k](g,p,b);var R=d(I.concat());_.set(I[R],v+E)}b=g}return _},s=function(h){var f=Array.apply([],h);return f.unshift(0),f},i=function(h,f){var p,m=[],g=h.length;m[0]=1;for(var b=0;b<g;b+=1)p=h[b-f]||0,m[b+1]=h[b]-p+256&255;return m},o=function(h,f,p){var m,g=[],b=h.length;g[0]=2;for(var v=0;v<b;v+=1)m=p&&p[v]||0,g[v+1]=h[v]-m+256&255;return g},a=function(h,f,p){var m,g,b=[],v=h.length;b[0]=3;for(var w=0;w<v;w+=1)m=h[w-f]||0,g=p&&p[w]||0,b[w+1]=h[w]+256-(m+g>>>1)&255;return b},l=function(h,f,p){var m,g,b,v,w=[],_=h.length;w[0]=4;for(var S=0;S<_;S+=1)m=h[S-f]||0,g=p&&p[S]||0,b=p&&p[S-f]||0,v=c(m,g,b),w[S+1]=h[S]-v+256&255;return w},c=function(h,f,p){if(h===f&&f===p)return h;var m=Math.abs(f-p),g=Math.abs(h-p),b=Math.abs(h+f-p-p);return m<=g&&m<=b?h:g<=b?f:p},u=function(){return[s,i,o,a,l]},d=function(h){var f=h.map(function(p){return p.reduce(function(m,g){return m+Math.abs(g)},0)});return f.indexOf(Math.min.apply(null,f))};t.processPNG=function(h,f,p,m){var g,b,v,w,_,S,E,k,x,I,R,C,T,O,P,U=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(v=new jJe(h)).imgData,b=v.bits,g=v.colorSpace,_=v.colors,[4,6].indexOf(v.colorType)!==-1){if(v.bits===8){x=(k=v.pixelBitlength==32?new Uint32Array(v.decodePixels().buffer):v.pixelBitlength==16?new Uint16Array(v.decodePixels().buffer):new Uint8Array(v.decodePixels().buffer)).length,R=new Uint8Array(x*v.colors),I=new Uint8Array(x);var X,Z=v.pixelBitlength-v.bits;for(O=0,P=0;O<x;O++){for(T=k[O],X=0;X<Z;)R[P++]=T>>>X&255,X+=v.bits;I[O]=T>>>X&255}}if(v.bits===16){x=(k=new Uint32Array(v.decodePixels().buffer)).length,R=new Uint8Array(x*(32/v.pixelBitlength)*v.colors),I=new Uint8Array(x*(32/v.pixelBitlength)),C=v.colors>1,O=0,P=0;for(var F=0;O<x;)T=k[O++],R[P++]=T>>>0&255,C&&(R[P++]=T>>>16&255,T=k[O++],R[P++]=T>>>0&255),I[F++]=T>>>16&255;b=8}m!==t.image_compression.NONE&&e()?(h=n(R,v.width*v.colors,v.colors,m),E=n(I,v.width,1,m)):(h=R,E=I,U=void 0)}if(v.colorType===3&&(g=this.color_spaces.INDEXED,S=v.palette,v.transparency.indexed)){var M=v.transparency.indexed,G=0;for(O=0,x=M.length;O<x;++O)G+=M[O];if((G/=255)===x-1&&M.indexOf(0)!==-1)w=[M.indexOf(0)];else if(G!==x){for(k=v.decodePixels(),I=new Uint8Array(k.length),O=0,x=k.length;O<x;O++)I[O]=M[k[O]];E=n(I,v.width,1)}}var D=function(j){var W;switch(j){case t.image_compression.FAST:W=11;break;case t.image_compression.MEDIUM:W=13;break;case t.image_compression.SLOW:W=14;break;default:W=12}return W}(m);return U===this.decode.FLATE_DECODE&&(ee="/Predictor "+D+" "),ee+="/Colors "+_+" /BitsPerComponent "+b+" /Columns "+v.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:p,data:h,index:f,filter:U,decodeParameters:ee,transparency:w,palette:S,sMask:E,predictor:D,width:v.width,height:v.height,bitsPerComponent:b,colorSpace:g}}}})(Vt.API),function(t){t.processGIF89A=function(e,n,r,s){var i=new FJe(e),o=i.width,a=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new xP(100).encode(c,100);return t.processJPEG.call(this,u,n,r,s)},t.processGIF87A=t.processGIF89A}(Vt.API),tl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},tl.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){rr.log("bit decode error:"+n)}},tl.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*s*4,a=0;a<8&&8*s+a<this.width;a++){var l=this.palette[i>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},tl.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*s*4,a=i>>4,l=15&i,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},tl.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},tl.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,a=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,c=i>>15?255:0,u=r*this.width*4+4*s;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},tl.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},tl.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},tl.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=r,this.data[a+3]=o}},tl.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,s){var i=new tl(e,!1),o=i.width,a=i.height,l={data:i.getData(),width:o,height:a},c=new xP(100).encode(l,100);return t.processJPEG.call(this,c,n,r,s)}}(Vt.API),jH.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,s){var i=new jH(e),o=i.width,a=i.height,l={data:i.getData(),width:o,height:a},c=new xP(100).encode(l,100);return t.processJPEG.call(this,c,n,r,s)}}(Vt.API),Vt.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),a=0,l=0,c=0;c<s;c+=4){var u=r[c],d=r[c+1],h=r[c+2],f=r[c+3];i[a++]=u,i[a++]=d,i[a++]=h,o[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Vt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$m=Vt.API,v2=$m.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:s.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,h=0,f=t.length,p=0,m=a[0]||l,g=[];for(n=0;n<f;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?g.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(h=d&&Yn(c[r])==="object"&&!isNaN(parseInt(c[r][p],10))?c[r][p]/u:0,g.push((a[r]||m)/l+h)),p=r;return g},OH=$m.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return $m.processArabic&&(t=$m.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:v2.apply(this,arguments).reduce(function(i,o){return i+o},0)},LH=function(t,e,n,r){for(var s=[],i=0,o=t.length,a=0;i!==o&&a+e[i]<n;)a+=e[i],i++;s.push(t.slice(0,i));var l=i;for(a=0;i!==o;)a+e[i]>r&&(s.push(t.slice(l,i)),a=0,l=i),a+=e[i],i++;return l!==i&&s.push(t.slice(l,i)),s},DH=function(t,e,n){n||(n={});var r,s,i,o,a,l,c,u=[],d=[u],h=n.textIndent||0,f=0,p=0,m=t.split(" "),g=v2.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?m[0].length+2:n.lineIndent||0){var b=Array(l).join(" "),v=[];m.map(function(_){(_=_.split(/\s*\n/)).length>1?v=v.concat(_.map(function(S,E){return(E&&S.length?`
`:"")+S})):v.push(_[0])}),m=v,l=OH.apply(this,[b,n])}for(i=0,o=m.length;i<o;i++){var w=0;if(r=m[i],l&&r[0]==`
`&&(r=r.substr(1),w=1),h+f+(p=(s=v2.apply(this,[r,n])).reduce(function(_,S){return _+S},0))>e||w){if(p>e){for(a=LH.apply(this,[r,s,e-(h+f),e]),u.push(a.shift()),u=[a.pop()];a.length;)d.push([a.shift()]);p=s.slice(r.length-(u[0]?u[0].length:0)).reduce(function(_,S){return _+S},0)}else u=[r];d.push(u),h=p+l,f=g}else u.push(r),h+=f+p,f=g}return c=l?function(_,S){return(S?b:"")+_.join(" ")}:function(_){return _.join(" ")},d.map(c)},$m.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(DH.apply(this,[r[a],o,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var i=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var h,f,p,m,g=["{"];for(var b in d){if(h=d[b],isNaN(parseInt(b,10))?f="'"+b+"'":(b=parseInt(b,10),f=(f=i(b).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof h=="number")h<0?(p=i(h).slice(3),m="-"):(p=i(h).slice(2),m=""),p=m+p.slice(0,-1)+r[p.slice(-1)];else{if(Yn(h)!=="object")throw new Error("Don't know what to do with value type "+Yn(h)+".");p=o(h)}g.push(f+p)}return g.push("}"),g.join("")},a=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,f,p,m,g={},b=1,v=g,w=[],_="",S="",E=d.length-1,k=1;k<E;k+=1)(m=d[k])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(m):m=="{"?(w.push([v,p]),v={},p=void 0):m=="}"?((f=w.pop())[0][f[1]]=v,p=void 0,v=f[0]):m=="-"?b=-1:p===void 0?n.hasOwnProperty(m)?(_+=n[m],p=parseInt(_,16)*b,b=1,_=""):_+=m:n.hasOwnProperty(m)?(S+=n[m],v[p]=parseInt(S,16)*b,b=1,p=void 0,S=""):S+=m;return g},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var h=d.font,f=u.Unicode[h.postScriptName];f&&(h.metadata.Unicode={},h.metadata.Unicode.widths=f.widths,h.metadata.Unicode.kerning=f.kerning);var p=c.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}(Vt.API),function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=n.charCodeAt(i);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Fv(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,r)}}])}(Vt),function(t){function e(){return(qt.canvg?Promise.resolve(qt.canvg):ye(()=>import("./index.es-CDr9ewzR.js"),__vite__mapDeps([0,1,2]))).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Vt.API.addSvgAsImage=function(n,r,s,i,o,a,l,c){if(isNaN(r)||isNaN(s))throw rr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw rr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(p){return p.fromString(d,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(h)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),r,s,i,o,l,c)})}}(),Vt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},Vt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,d=0;function h(p,m){var g,b=!1;for(g=0;g<p.length;g+=1)p[g]===m&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=a.length;for(d=0;d<f;d+=1)n[a[d]].value=n[a[d]].defaultValue,n[a[d]].explicitSet=!1}if(Yn(t)==="object"){for(s in t)if(i=t[s],h(a,s)&&i!==void 0){if(n[s].type==="boolean"&&typeof i=="boolean")n[s].value=i;else if(n[s].type==="name"&&h(n[s].valueSet,i))n[s].value=i;else if(n[s].type==="integer"&&Number.isInteger(i))n[s].value=i;else if(n[s].type==="array"){for(c=0;c<i.length;c+=1)if(r=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(r=!1);r===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,m=[];for(p in n)n[p].explicitSet===!0&&(n[p].type==="name"?m.push("/"+p+" /"+n[p].value):m.push("/"+p+" "+n[p].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+o.length+a.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Vt.API),function(t){var e=t.API,n=e.pdfEscape16=function(i,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=i.length;d<h;++d){if(a=o.metadata.characterToGlyph(i.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=i.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(i){var o,a,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(a=Object.keys(i).sort(function(f,p){return f-p})).length;d<h;d++)o=a[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(c=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var m=c();u({data:f,addLength1:!0,objectId:m}),l("endobj");var g=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var b=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Zm(a.fontName)),l("/FontFile2 "+m+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var v=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Zm(a.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+g+" 0 R"),l("/BaseFont /"+Zm(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+v+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var p=c();u({data:h,addLength1:!0,objectId:p}),l("endobj");var m=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var g=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+p+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Zm(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var b=0;b<a.metadata.hmtx.widths.length;b++)a.metadata.hmtx.widths[b]=parseInt(a.metadata.hmtx.widths[b]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+Zm(a.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,a=i.text||"",l=i.x,c=i.y,u=i.options||{},d=i.mutex||{},h=d.pdfEscape,f=d.activeFontKey,p=d.fonts,m=f,g="",b=0,v="",w=p[m].encoding;if(p[m].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:d};for(v=a,m=f,Array.isArray(a)&&(v=a[0]),b=0;b<v.length;b+=1)p[m].metadata.hasOwnProperty("cmap")&&(o=p[m].metadata.cmap.unicode.codeMap[v[b].charCodeAt(0)]),o||v[b].charCodeAt(0)<256&&p[m].metadata.hasOwnProperty("Unicode")?g+=v[b]:g+="";var _="";return parseInt(m.slice(1))<14||w==="WinAnsiEncoding"?_=h(g,m).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(_=n(g,p[m])),d.isHex=!0,{text:_,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(i){var o=i.text||"",a=[],l={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([s(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(s(Object.assign({},l,{text:o[c]})).text);i.text=a}else i.text=s(Object.assign({},l,{text:o})).text}])}(Vt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Vt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,i,o,a,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,w=0;this.__bidiEngine__={};var _=function(C){var T=C.charCodeAt(),O=T>>8,P=m[O];return P!==void 0?d[256*P+(255&T)]:O===252||O===253?"AL":b.test(O)?"L":O===8?"R":"N"},S=function(C){for(var T,O=0;O<C.length;O++){if((T=_(C.charAt(O)))==="L")return!1;if(T==="R")return!0}return!1},E=function(C,T,O,P){var U,ee,X,Z,F=T[P];switch(F){case"L":case"R":v=!1;break;case"N":case"AN":break;case"EN":v&&(F="AN");break;case"AL":v=!0,F="R";break;case"WS":F="N";break;case"CS":P<1||P+1>=T.length||(U=O[P-1])!=="EN"&&U!=="AN"||(ee=T[P+1])!=="EN"&&ee!=="AN"?F="N":v&&(ee="AN"),F=ee===U?ee:"N";break;case"ES":F=(U=P>0?O[P-1]:"B")==="EN"&&P+1<T.length&&T[P+1]==="EN"?"EN":"N";break;case"ET":if(P>0&&O[P-1]==="EN"){F="EN";break}if(v){F="N";break}for(X=P+1,Z=T.length;X<Z&&T[X]==="ET";)X++;F=X<Z&&T[X]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Z=T.length,X=P+1;X<Z&&T[X]==="NSM";)X++;if(X<Z){var M=C[P],G=M>=1425&&M<=2303||M===64286;if(U=T[X],G&&(U==="R"||U==="AL")){F="R";break}}}F=P<1||(U=T[P-1])==="B"?"N":O[P-1];break;case"B":v=!1,s=!0,F=w;break;case"S":i=!0,F="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"BN":F="N"}return F},k=function(C,T,O){var P=C.split("");return O&&x(P,O,{hiLevel:w}),P.reverse(),T&&T.reverse(),P.join("")},x=function(C,T,O){var P,U,ee,X,Z,F=-1,M=C.length,G=0,D=[],j=w?f:h,W=[];for(v=!1,s=!1,i=!1,U=0;U<M;U++)W[U]=_(C[U]);for(ee=0;ee<M;ee++){if(Z=G,D[ee]=E(C,W,D,ee),P=240&(G=j[Z][p[D[ee]]]),G&=15,T[ee]=X=j[G][5],P>0)if(P===16){for(U=F;U<ee;U++)T[U]=1;F=-1}else F=-1;if(j[G][6])F===-1&&(F=ee);else if(F>-1){for(U=F;U<ee;U++)T[U]=X;F=-1}W[ee]==="B"&&(T[ee]=0),O.hiLevel|=X}i&&function(q,ne,te){for(var Y=0;Y<te;Y++)if(q[Y]==="S"){ne[Y]=w;for(var de=Y-1;de>=0&&q[de]==="WS";de--)ne[de]=w}}(W,T,M)},I=function(C,T,O,P,U){if(!(U.hiLevel<C)){if(C===1&&w===1&&!s)return T.reverse(),void(O&&O.reverse());for(var ee,X,Z,F,M=T.length,G=0;G<M;){if(P[G]>=C){for(Z=G+1;Z<M&&P[Z]>=C;)Z++;for(F=G,X=Z-1;F<X;F++,X--)ee=T[F],T[F]=T[X],T[X]=ee,O&&(ee=O[F],O[F]=O[X],O[X]=ee);G=Z}G++}}},R=function(C,T,O){var P=C.split(""),U={hiLevel:w};return O||(O=[]),x(P,O,U),function(ee,X,Z){if(Z.hiLevel!==0&&u)for(var F,M=0;M<ee.length;M++)X[M]===1&&(F=g.indexOf(ee[M]))>=0&&(ee[M]=g[F+1])}(P,O,U),I(2,P,T,O,U),I(1,P,T,O,U),P.join("")};return this.__bidiEngine__.doBidiReorder=function(C,T,O){if(function(U,ee){if(ee)for(var X=0;X<U.length;X++)ee[X]=X;a===void 0&&(a=S(U)),c===void 0&&(c=S(U))}(C,T),o||!l||c)if(o&&l&&a^c)w=a?1:0,C=k(C,T,O);else if(!o&&l&&c)w=a?1:0,C=R(C,T,O),C=k(C,T);else if(!o||a||l||c){if(o&&!l&&a^c)C=k(C,T),a?(w=0,C=R(C,T,O)):(w=1,C=R(C,T,O),C=k(C,T));else if(o&&a&&!l&&c)w=1,C=R(C,T,O),C=k(C,T);else if(!o&&!l&&a^c){var P=u;a?(w=1,C=R(C,T,O),w=0,u=!1,C=R(C,T,O),u=P):(w=0,C=R(C,T,O),C=k(C,T),w=1,u=!1,C=R(C,T,O),u=P,C=k(C,T))}}else w=0,C=R(C,T,O);else w=a?1:0,C=R(C,T,O);return C},this.__bidiEngine__.setOptions=function(C){C&&(o=C.isInputVisual,l=C.isOutputVisual,a=C.isInputRtl,c=C.isOutputRtl,u=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text,i=(r.x,r.y,r.options||{}),o=(r.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var a=0;for(o=[],a=0;a<s.length;a+=1)Object.prototype.toString.call(s[a])==="[object Array]"?o.push([n.doBidiReorder(s[a][0]),s[a][1],s[a][2]]):o.push([n.doBidiReorder(s[a])]);r.text=o}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(Vt),Vt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new bh(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new QJe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new BJe(this.contents),this.head=new UJe(this),this.name=new GJe(this),this.cmap=new tue(this),this.toUnicode={},this.hhea=new HJe(this),this.maxp=new qJe(this),this.hmtx=new KJe(this),this.post=new VJe(this),this.os2=new zJe(this),this.loca=new ZJe(this),this.glyf=new YJe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}.call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,i,o,a;for(o=0,i=0,a=(e=""+e).length;0<=a?i<a:i>a;i=0<=a?++i:--i)s=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Sl,bh=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,i,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*i+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,i;for(i=[],r=0,s=e.length;r<s;r++)n=e[r],i.push(this.writeByte(n));return i},t}(),BJe=function(){var t;function e(n){var r,s,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,i,o,a,l,c,u,d,h,f,p,m;for(m in f=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),o=Math.floor(d/l),u=16*f-d,(s=new bh).writeInt(this.scalarType),s.writeShort(f),s.writeShort(d),s.writeShort(o),s.writeShort(u),i=16*f,c=s.pos+i,a=null,p=[],n)for(h=n[m],s.writeString(m),s.writeInt(t(h)),s.writeInt(c),s.writeInt(h.length),p=p.concat(h),m==="head"&&(a=c),c+=h.length;c%4;)p.push(0),c++;return s.write(p),r=2981146554-t(s.data),s.pos=a+8,s.writeUInt32(r),s.data},t=function(n){var r,s,i,o;for(n=nue.call(n);n.length%4;)n.push(0);for(i=new bh(n),s=0,r=0,o=n.length;r<o;r=r+=4)s+=i.readUInt32();return 4294967295&s},e}(),$Je={}.hasOwnProperty,Hc=function(t,e){for(var n in e)$Je.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Sl=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var UJe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,Sl),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new bh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),FH=function(){function t(e,n){var r,s,i,o,a,l,c,u,d,h,f,p,m,g,b,v,w;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,i=function(){var _,S;for(S=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)S.push(e.readUInt16());return S}(),e.pos+=2,m=function(){var _,S;for(S=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)S.push(e.readUInt16());return S}(),c=function(){var _,S;for(S=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)S.push(e.readUInt16());return S}(),u=function(){var _,S;for(S=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)S.push(e.readUInt16());return S}(),s=(this.length-e.pos+this.offset)/2,a=function(){var _,S;for(S=[],l=_=0;0<=s?_<s:_>s;l=0<=s?++_:--_)S.push(e.readUInt16());return S}(),l=b=0,w=i.length;b<w;l=++b)for(g=i[l],r=v=p=m[l];p<=g?v<=g:v>=g;r=p<=g?++v:--v)u[l]===0?o=r+c[l]:(o=a[u[l]/2+(r-p)-(h-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=d}return t.encode=function(e,n){var r,s,i,o,a,l,c,u,d,h,f,p,m,g,b,v,w,_,S,E,k,x,I,R,C,T,O,P,U,ee,X,Z,F,M,G,D,j,W,q,ne,te,Y,de,Se,xe,Ae;switch(P=new bh,o=Object.keys(e).sort(function(Pe,K){return Pe-K}),n){case"macroman":for(m=0,g=function(){var Pe=[];for(p=0;p<256;++p)Pe.push(0);return Pe}(),v={0:0},i={},U=0,F=o.length;U<F;U++)v[de=e[s=o[U]]]==null&&(v[de]=++m),i[s]={old:e[s],new:v[e[s]]},g[s]=v[e[s]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(g),{charMap:i,subtable:P.data,maxGlyphID:m+1};case"unicode":for(T=[],d=[],w=0,v={},r={},b=c=null,ee=0,M=o.length;ee<M;ee++)v[S=e[s=o[ee]]]==null&&(v[S]=++w),r[s]={old:S,new:v[S]},a=v[S]-s,b!=null&&a===c||(b&&d.push(b),T.push(s),c=a),b=s;for(b&&d.push(b),d.push(65535),T.push(65535),R=2*(I=T.length),x=2*Math.pow(Math.log(I)/Math.LN2,2),h=Math.log(x/2)/Math.LN2,k=2*I-x,l=[],E=[],f=[],p=X=0,G=T.length;X<G;p=++X){if(C=T[p],u=d[p],C===65535){l.push(0),E.push(0);break}if(C-(O=r[C].new)>=32768)for(l.push(0),E.push(2*(f.length+I-p)),s=Z=C;C<=u?Z<=u:Z>=u;s=C<=u?++Z:--Z)f.push(r[s].new);else l.push(O-C),E.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*I+2*f.length),P.writeUInt16(0),P.writeUInt16(R),P.writeUInt16(x),P.writeUInt16(h),P.writeUInt16(k),te=0,D=d.length;te<D;te++)s=d[te],P.writeUInt16(s);for(P.writeUInt16(0),Y=0,j=T.length;Y<j;Y++)s=T[Y],P.writeUInt16(s);for(Se=0,W=l.length;Se<W;Se++)a=l[Se],P.writeUInt16(a);for(xe=0,q=E.length;xe<q;xe++)_=E[xe],P.writeUInt16(_);for(Ae=0,ne=f.length;Ae<ne;Ae++)m=f[Ae],P.writeUInt16(m);return{charMap:r,subtable:P.data,maxGlyphID:w+1}}},t}(),tue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,Sl),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,s,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)r=new FH(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var s,i;return r==null&&(r="macroman"),s=FH.encode(n,r),(i=new bh).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),HJe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,Sl),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),zJe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,Sl),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),VJe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,Sl),e.prototype.tag="post",e.prototype.parse=function(n){var r,s,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(s=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)r=n.readByte(),i.push(this.names.push(n.readString(r)));return i;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}.call(this)}},e}(),WJe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},GJe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,Sl),e.prototype.tag="name",e.prototype.parse=function(n){var r,s,i,o,a,l,c,u,d,h,f;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),s=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=d=0,h=s.length;d<h;o=++d)i=s[o],n.pos=i.offset,u=n.readString(i.length),a=new WJe(u,i),c[f=i.nameID]==null&&(c[f]=[]),c[i.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),qJe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,Sl),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),KJe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,Sl),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,s,i,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)d.push(n.readInt16());return d}(),this.widths=function(){var u,d,h,f;for(f=[],u=0,d=(h=this.metrics).length;u<d;u++)o=h[u],f.push(o.advance);return f}.call(this),s=this.widths[this.widths.length-1],c=[],r=a=0;0<=i?a<i:a>i;r=0<=i?++a:--a)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),nue=[].slice,YJe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,Sl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,s,i,o,a,l,c,u,d,h;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,s=o.indexOf(n),(i=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,a=(l=new bh(r.read(i))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[n]=a===-1?new XJe(l,u,h,c,d):new JJe(l,a,u,h,c,d),this.cache[n]))},e.prototype.encode=function(n,r,s){var i,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)i=n[r[l]],o.push(a.length),i&&(a=a.concat(i.encode(s)));return o.push(a.length),{table:a,offsets:o}},e}(),JJe=function(){function t(e,n,r,s,i,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),XJe=function(){function t(e,n,r,s,i){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new bh(nue.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),ZJe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,Sl),e.prototype.tag="loca",e.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*n.readUInt16());return o}.call(this):function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(n.readUInt32());return o}.call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,a=0;a<s.length;++a)if(s[a]=i,o<r.length&&r[o]==a){++o,s[a]=i;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(i+=c)}for(var u=new Array(4*s.length),d=0;d<s.length;++d)u[4*d+3]=255&s[d],u[4*d+2]=(65280&s[d])>>8,u[4*d+1]=(16711680&s[d])>>16,u[4*d]=(4278190080&s[d])>>24;return u},e}(),QJe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,i;for(n in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,i,o,a,l;for(s={},o=0,a=e.length;o<a;o++)s[i=e[o]]=this.font.glyf.glyphFor(i);for(i in n=[],s)(r=s[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in l=this.glyphsFor(n))r=l[i],s[i]=r;return s},t.prototype.encode=function(e,n){var r,s,i,o,a,l,c,u,d,h,f,p,m,g,b;for(s in r=tue.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},b=r.charMap)f[(l=b[s]).old]=l.new;for(p in h=r.maxGlyphID,o)p in f||(f[p]=h++);return u=function(v){var w,_;for(w in _={},v)_[v[w]]=w;return _}(f),d=Object.keys(u).sort(function(v,w){return v-w}),m=function(){var v,w,_;for(_=[],v=0,w=d.length;v<w;v++)a=d[v],_.push(u[a]);return _}(),i=this.font.glyf.encode(o,m,f),c=this.font.loca.encode(i.offsets,m),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Vt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,i,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in i=["<<"],n)o=n[s],i.push("/"+s+" "+e.convert(o));return i.push(">>"),i.join(`
`)}return""+n},e}();const w2=({title:t,deps:e})=>{const[n,r]=N.useState(!1);return e.length===0?null:y.jsxs(Yy,{open:n,onOpenChange:r,children:[y.jsxs(Jy,{className:Ne("flex w-full items-center justify-between p-4","bg-white dark:bg-[#0A0A0A]","hover:bg-purple-50/50 dark:hover:bg-[#1a1a1a]","border-b border-[#E5E5E5] dark:border-[#1A1A1A]","transition-colors duration-200","first:rounded-t-lg last:rounded-b-lg",{"hover:rounded-lg":!n}),children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"i-ph:package text-bolt-elements-textSecondary w-4 h-4"}),y.jsxs("span",{className:"text-base text-bolt-elements-textPrimary",children:[t," Dependencies (",e.length,")"]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:n?"Hide":"Show"}),y.jsx("div",{className:Ne("i-ph:caret-down w-4 h-4 transform transition-transform duration-200 text-bolt-elements-textSecondary",n?"rotate-180":"")})]})]}),y.jsx(Xy,{children:y.jsx(c8,{className:Ne("h-[200px] w-full","bg-white dark:bg-[#0A0A0A]","border-b border-[#E5E5E5] dark:border-[#1A1A1A]","last:rounded-b-lg last:border-b-0"),children:y.jsx("div",{className:"space-y-2 p-4",children:e.map(s=>y.jsxs("div",{className:"flex items-center justify-between text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textPrimary",children:s.name}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:s.version})]},s.name))})})})]})};function eXe(){const[t,e]=N.useState(null),[n,r]=N.useState(null),[s,i]=N.useState({isRunning:!1,lastChecked:new Date}),[o,a]=N.useState({systemInfo:!1,webAppInfo:!1,errors:!1,performance:!1}),[l,c]=N.useState({system:!1,webapp:!1,errors:!1,performance:!1}),{providers:u}=Rh(),d=Bt(Ut.logs),h=N.useMemo(()=>Object.values(d).filter(C=>typeof C=="object"&&C!==null&&"level"in C&&C.level==="error"),[d]);N.useEffect(()=>{const C=O=>{Ut.logError(O.message,O.error,{filename:O.filename,lineNumber:O.lineno,columnNumber:O.colno})},T=O=>{Ut.logError("Unhandled Promise Rejection",O.reason)};return window.addEventListener("error",C),window.addEventListener("unhandledrejection",T),()=>{window.removeEventListener("error",C),window.removeEventListener("unhandledrejection",T)}},[]),N.useEffect(()=>{l.errors&&b()},[l.errors]),N.useEffect(()=>{(async()=>{await Promise.all([f(),p()])})()},[]),N.useEffect(()=>{l.system&&f(),l.webapp&&p()},[l.system,l.webapp]),N.useEffect(()=>{if(!l.webapp)return;const C=async()=>{try{const P=await(await fetch("/api/system/git-info")).json();r(U=>U?JSON.stringify(U.gitInfo)===JSON.stringify(P)?U:{...U,gitInfo:P}:null)}catch(O){console.error("Failed to fetch git info:",O)}};C();const T=setInterval(C,5*60*1e3);return()=>clearInterval(T)},[l.webapp]);const f=async()=>{try{a(ne=>({...ne,systemInfo:!0}));const C=navigator.userAgent,T=C.includes("Firefox")?"Firefox":C.includes("Chrome")?"Chrome":C.includes("Safari")?"Safari":C.includes("Edge")?"Edge":"Unknown",O=C.match(/(Firefox|Chrome|Safari|Edge)\/([0-9.]+)/)?.[2]||"Unknown",P=performance.memory||{},U=performance.timing,ee=performance.navigation,X=navigator.connection;let Z;try{const ne=await navigator.getBattery();Z={charging:ne.charging,chargingTime:ne.chargingTime,dischargingTime:ne.dischargingTime,level:ne.level*100}}catch{console.log("Battery API not supported")}let F={quota:0,usage:0,persistent:!1,temporary:!1};try{const ne=await navigator.storage.estimate(),te=await navigator.storage.persist();F={quota:ne.quota||0,usage:ne.usage||0,persistent:te,temporary:!te}}catch{console.log("Storage API not supported")}const M=performance.memory||{},G=M.jsHeapSizeLimit||0,D=M.usedJSHeapSize||0,j=G-D,W=G?D/G*100:0,q={os:navigator.platform,arch:navigator.userAgent.includes("x64")?"x64":navigator.userAgent.includes("arm")?"arm":"unknown",platform:navigator.platform,cpus:navigator.hardwareConcurrency+" cores",memory:{total:m(G),free:m(j),used:m(D),percentage:Math.round(W)},node:"browser",browser:{name:T,version:O,language:navigator.language,userAgent:navigator.userAgent,cookiesEnabled:navigator.cookieEnabled,online:navigator.onLine,platform:navigator.platform,cores:navigator.hardwareConcurrency},screen:{width:window.screen.width,height:window.screen.height,colorDepth:window.screen.colorDepth,pixelRatio:window.devicePixelRatio},time:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,offset:new Date().getTimezoneOffset(),locale:navigator.language},performance:{memory:{jsHeapSizeLimit:P.jsHeapSizeLimit||0,totalJSHeapSize:P.totalJSHeapSize||0,usedJSHeapSize:P.usedJSHeapSize||0,usagePercentage:P.totalJSHeapSize?P.usedJSHeapSize/P.totalJSHeapSize*100:0},timing:{loadTime:U.loadEventEnd-U.navigationStart,domReadyTime:U.domContentLoadedEventEnd-U.navigationStart,readyStart:U.fetchStart-U.navigationStart,redirectTime:U.redirectEnd-U.redirectStart,appcacheTime:U.domainLookupStart-U.fetchStart,unloadEventTime:U.unloadEventEnd-U.unloadEventStart,lookupDomainTime:U.domainLookupEnd-U.domainLookupStart,connectTime:U.connectEnd-U.connectStart,requestTime:U.responseEnd-U.requestStart,initDomTreeTime:U.domInteractive-U.responseEnd,loadEventTime:U.loadEventEnd-U.loadEventStart},navigation:{type:ee.type,redirectCount:ee.redirectCount}},network:{downlink:X?.downlink||0,effectiveType:X?.effectiveType||"unknown",rtt:X?.rtt||0,saveData:X?.saveData||!1,type:X?.type||"unknown"},battery:Z,storage:F};e(q),Ve.success("System information updated")}catch(C){Ve.error("Failed to get system information"),console.error("Failed to get system information:",C)}finally{a(C=>({...C,systemInfo:!1}))}},p=async()=>{try{a(U=>({...U,webAppInfo:!0}));const[C,T]=await Promise.all([fetch("/api/system/app-info"),fetch("/api/system/git-info")]);if(!C.ok||!T.ok)throw new Error("Failed to fetch webapp info");const O=await C.json(),P=await T.json();return console.log("Git Info Response:",P),r({...O,gitInfo:P}),Ve.success("WebApp information updated"),!0}catch(C){return console.error("Failed to fetch webapp info:",C),Ve.error("Failed to fetch webapp information"),r(null),!1}finally{a(C=>({...C,webAppInfo:!1}))}},m=C=>{const T=["B","KB","MB","GB"];let O=C,P=0;for(;O>=1024&&P<T.length-1;)O/=1024,P++;return`${Math.round(O)} ${T[P]}`},g=()=>{try{a(Z=>({...Z,performance:!0}));const C=performance.getEntriesByType("navigation")[0],T=performance.memory,O={loadTime:C.loadEventEnd-C.startTime,domReadyTime:C.domContentLoadedEventEnd-C.startTime,fetchTime:C.responseEnd-C.fetchStart,redirectTime:C.redirectEnd-C.redirectStart,dnsTime:C.domainLookupEnd-C.domainLookupStart,tcpTime:C.connectEnd-C.connectStart,ttfb:C.responseStart-C.requestStart,processingTime:C.loadEventEnd-C.responseEnd},P=performance.getEntriesByType("resource"),U={totalResources:P.length,totalSize:P.reduce((Z,F)=>Z+(F.transferSize||0),0),totalTime:Math.max(...P.map(Z=>Z.duration))},ee=T?{jsHeapSizeLimit:T.jsHeapSizeLimit,totalJSHeapSize:T.totalJSHeapSize,usedJSHeapSize:T.usedJSHeapSize,heapUtilization:T.usedJSHeapSize/T.totalJSHeapSize*100}:null;let X=0;if("requestAnimationFrame"in window){let Z=function(M){if(F.push(M),F.length>10){const G=Math.round(1e4/(M-F[0]));return F.shift(),G}return requestAnimationFrame(Z),0};const F=[];X=Z(performance.now())}Ut.logSystem("Performance Metrics",{timing:O,resources:U,memory:ee,fps:X,timestamp:new Date().toISOString(),navigationEntry:{type:C.type,redirectCount:C.redirectCount}}),Ve.success("Performance metrics logged")}catch(C){Ve.error("Failed to log performance metrics"),console.error("Failed to log performance metrics:",C)}finally{a(C=>({...C,performance:!1}))}},b=async()=>{try{a(T=>({...T,errors:!0}));const C=h;C.length===0?Ve.success("No errors found"):Ve.warning(`Found ${C.length} error(s)`)}catch(C){Ve.error("Failed to check errors"),console.error("Failed to check errors:",C)}finally{a(C=>({...C,errors:!1}))}},E=[{id:"json",label:"Export as JSON",icon:"i-ph:file-json",handler:()=>{try{const C={timestamp:new Date().toISOString(),system:t,webApp:n,errors:Ut.getLogs().filter(U=>U.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},T=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),O=window.URL.createObjectURL(T),P=document.createElement("a");P.href=O,P.download=`bolt-debug-info-${new Date().toISOString()}.json`,document.body.appendChild(P),P.click(),window.URL.revokeObjectURL(O),document.body.removeChild(P),Ve.success("Debug information exported successfully")}catch(C){console.error("Failed to export debug info:",C),Ve.error("Failed to export debug information")}}},{id:"csv",label:"Export as CSV",icon:"i-ph:file-csv",handler:()=>{try{const C={system:t,webApp:n,errors:Ut.getLogs().filter(X=>X.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},O=[["Category","Key","Value"],...Object.entries(C).flatMap(([X,Z])=>Object.entries(Z||{}).map(([F,M])=>[X,F,typeof M=="object"?JSON.stringify(M):String(M)]))].map(X=>X.join(",")).join(`
`),P=new Blob([O],{type:"text/csv;charset=utf-8;"}),U=window.URL.createObjectURL(P),ee=document.createElement("a");ee.href=U,ee.download=`bolt-debug-info-${new Date().toISOString()}.csv`,document.body.appendChild(ee),ee.click(),window.URL.revokeObjectURL(U),document.body.removeChild(ee),Ve.success("Debug information exported as CSV")}catch(C){console.error("Failed to export CSV:",C),Ve.error("Failed to export debug information as CSV")}}},{id:"pdf",label:"Export as PDF",icon:"i-ph:file-pdf",handler:()=>{try{const C={system:t,webApp:n,errors:Ut.getLogs().filter(j=>j.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},T=new Vt,O=7;let P=20;const U=20,ee=T.internal.pageSize.getWidth(),X=ee-2*U,Z=(j,W,q=0)=>{P>T.internal.pageSize.getHeight()-20&&(T.addPage(),P=U),T.setFontSize(10),T.setTextColor("#374151"),T.setFont("helvetica","bold");const ne=j.replace(/([A-Z])/g," $1").trim();T.text(ne+":",U+q,P),T.setFont("helvetica","normal"),T.setTextColor("#6B7280");let te;if(typeof W=="object"&&W!==null){if(Object.keys(W).length===0)return;P+=O,Object.entries(W).forEach(([xe,Ae])=>{P>T.internal.pageSize.getHeight()-20&&(T.addPage(),P=U);const Pe=xe.replace(/([A-Z])/g," $1").trim();Z(Pe,Ae,q+10)});return}else te=String(W);const Y=U+q+T.getTextWidth(ne+": "),de=X-q-T.getTextWidth(ne+": "),Se=T.splitTextToSize(te,de);P+Se.length*O>T.internal.pageSize.getHeight()-20&&(T.addPage(),P=U),T.text(Se,Y,P),P+=Se.length*O},F=j=>{P+20>T.internal.pageSize.getHeight()-20&&(T.addPage(),P=U),P+=O,T.setFillColor("#F3F4F6"),T.rect(U-2,P-5,ee-2*(U-2),O+6,"F"),T.setFont("helvetica","bold"),T.setTextColor("#111827"),T.setFontSize(12),T.text(j.toUpperCase(),U,P),T.setFont("helvetica","normal"),P+=O*1.5},M=()=>{if(P+10>T.internal.pageSize.getHeight()-20){T.addPage(),P=U;return}T.setDrawColor("#E5E5E5"),T.line(U,P,ee-U,P),P+=O},G=()=>{const j=T.internal.pages.length-1;for(let W=1;W<=j;W++)T.setPage(W),T.setFontSize(8),T.setTextColor("#9CA3AF"),T.text(`Page ${W} of ${j}`,ee/2,T.internal.pageSize.getHeight()-10,{align:"center"})};T.setFillColor("#6366F1"),T.rect(0,0,ee,40,"F"),T.setTextColor("#FFFFFF"),T.setFontSize(24),T.setFont("helvetica","bold"),T.text("Debug Information Report",U,25),P=50,T.setTextColor("#6B7280"),T.setFontSize(10),T.setFont("helvetica","normal");const D=new Date().toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});if(T.text(`Generated: ${D}`,U,P),P+=O*2,C.system){F("System Information"),Z("Operating System",C.system.os),Z("Architecture",C.system.arch),Z("Platform",C.system.platform),Z("CPU Cores",C.system.cpus);const j=C.system.memory;Z("Memory",{"Total Memory":j.total,"Used Memory":j.used,"Free Memory":j.free,Usage:j.percentage+"%"});const W=C.system.browser;Z("Browser",{Name:W.name,Version:W.version,Language:W.language,Platform:W.platform,"Cookies Enabled":W.cookiesEnabled?"Yes":"No","Online Status":W.online?"Online":"Offline"});const q=C.system.screen;Z("Screen",{Resolution:`${q.width}x${q.height}`,"Color Depth":q.colorDepth+" bit","Pixel Ratio":q.pixelRatio+"x"});const ne=C.system.time;Z("Time Settings",{Timezone:ne.timezone,"UTC Offset":ne.offset/60+" hours",Locale:ne.locale}),M()}if(C.webApp){if(F("Web App Information"),Z("Application",{Name:C.webApp.name,Version:C.webApp.version,Environment:C.webApp.environment,"Node Version":C.webApp.runtimeInfo.nodeVersion}),C.webApp.gitInfo){const j=C.webApp.gitInfo.local;if(Z("Git Information",{Branch:j.branch,Commit:j.commitHash,Author:j.author,"Commit Time":j.commitTime,Repository:j.repoName}),C.webApp.gitInfo.github){const W=C.webApp.gitInfo.github.currentRepo;Z("GitHub Information",{Repository:W.fullName,"Default Branch":W.defaultBranch,Stars:W.stars,Forks:W.forks,"Open Issues":W.openIssues||0})}}M()}if(C.performance){F("Performance Metrics");const j=C.performance.memory||{},W=j.totalJSHeapSize||0,q=j.usedJSHeapSize||0,ne=j.usagePercentage||0;Z("Memory Usage",{"Total Heap Size":m(W),"Used Heap Size":m(q),Usage:ne.toFixed(1)+"%"});const te=C.performance.timing||{},Y=te.navigationStart||0,de=te.loadEventEnd||0,Se=te.domContentLoadedEventEnd||0,xe=te.responseEnd||0,Ae=te.requestStart||0,Pe=de>Y?de-Y:0,K=Se>Y?Se-Y:0,ge=xe>Ae?xe-Ae:0;if(Z("Page Load Metrics",{"Total Load Time":(Pe/1e3).toFixed(2)+" seconds","DOM Ready Time":(K/1e3).toFixed(2)+" seconds","Request Time":(ge/1e3).toFixed(2)+" seconds"}),C.system?.network){const re=C.system.network;Z("Network Information",{"Connection Type":re.type||"Unknown","Effective Type":re.effectiveType||"Unknown","Download Speed":(re.downlink||0)+" Mbps","Latency (RTT)":(re.rtt||0)+" ms","Data Saver":re.saveData?"Enabled":"Disabled"})}M()}C.errors&&C.errors.length>0&&(F("Error Log"),C.errors.forEach((j,W)=>{T.setTextColor("#DC2626"),T.setFontSize(10),T.setFont("helvetica","bold"),T.text(`Error ${W+1}:`,U,P),P+=O,T.setFont("helvetica","normal"),T.setTextColor("#6B7280"),Z("Message",j.message,10),j.stack&&Z("Stack",j.stack,10),j.source&&Z("Source",j.source,10),P+=O})),G(),T.save(`bolt-debug-info-${new Date().toISOString()}.pdf`),Ve.success("Debug information exported as PDF")}catch(C){console.error("Failed to export PDF:",C),Ve.error("Failed to export debug information as PDF")}}},{id:"txt",label:"Export as Text",icon:"i-ph:file-text",handler:()=>{try{const C={system:t,webApp:n,errors:Ut.getLogs().filter(ee=>ee.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},T=Object.entries(C).map(([ee,X])=>`${ee.toUpperCase()}
${"-".repeat(30)}
${JSON.stringify(X,null,2)}

`).join(`
`),O=new Blob([T],{type:"text/plain"}),P=window.URL.createObjectURL(O),U=document.createElement("a");U.href=P,U.download=`bolt-debug-info-${new Date().toISOString()}.txt`,document.body.appendChild(U),U.click(),window.URL.revokeObjectURL(P),document.body.removeChild(U),Ve.success("Debug information exported as text file")}catch(C){console.error("Failed to export text file:",C),Ve.error("Failed to export debug information as text file")}}}],k=N.useCallback(async()=>{try{const T=u?.Ollama?.settings?.baseUrl||"http://127.0.0.1:11434";if(!(await fetch(`${T}/api/version`)).ok)throw new Error("Service not running");const U=await(await fetch(`${T}/api/tags`)).json();i({isRunning:!0,lastChecked:new Date,models:U.models})}catch{i({isRunning:!1,error:"Connection failed",lastChecked:new Date,models:void 0})}},[u]);N.useEffect(()=>{if(u?.Ollama?.settings?.enabled){k();const T=setInterval(k,1e4);return()=>clearInterval(T)}},[u,k]);const x=()=>{const[C,T]=N.useState(!1),O=N.useCallback(U=>{T(U)},[]),P=N.useCallback(U=>{U(),T(!1)},[]);return y.jsxs(Ea,{open:C,onOpenChange:O,children:[y.jsxs("button",{onClick:()=>T(!0),className:Ne("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[y.jsx("span",{className:"i-ph:download text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Export"]}),y.jsx(t0,{showCloseButton:!0,children:y.jsxs("div",{className:"p-6",children:[y.jsxs(up,{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:download w-5 h-5"}),"Export Debug Information"]}),y.jsx("div",{className:"mt-4 flex flex-col gap-2",children:E.map(U=>y.jsxs("button",{onClick:()=>P(U.handler),className:Ne("flex items-center gap-3 px-4 py-3 text-sm rounded-lg transition-colors w-full text-left","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary"),children:[y.jsx("div",{className:Ne(U.icon,"w-5 h-5")}),y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:U.label}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:[U.id==="json"&&"Export as a structured JSON file",U.id==="csv"&&"Export as a CSV spreadsheet",U.id==="pdf"&&"Export as a formatted PDF document",U.id==="txt"&&"Export as a formatted text file"]})]})]},U.id))})]})})]})},R=u?.Ollama?.settings?.enabled?s.isRunning?{status:"Running",color:"text-green-500",bgColor:"bg-green-500",message:`Ollama service is running with ${s.models?.length??0} installed models (Provider: Enabled)`}:{status:"Not Running",color:"text-red-500",bgColor:"bg-red-500",message:s.error||"Ollama service is not running"}:{status:"Disabled",color:"text-red-500",bgColor:"bg-red-500",message:"Ollama provider is disabled in settings"};return y.jsxs("div",{className:"flex flex-col gap-6 max-w-7xl mx-auto p-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[y.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:warning-octagon text-purple-500 w-4 h-4"}),y.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Errors"})]}),y.jsx("div",{className:"flex items-center gap-2 mt-2",children:y.jsx("span",{className:Ne("text-2xl font-semibold",h.length>0?"text-red-500":"text-green-500"),children:h.length})}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[y.jsx("div",{className:Ne("w-3.5 h-3.5",h.length>0?"i-ph:warning text-red-500":"i-ph:check-circle text-green-500")}),h.length>0?"Errors detected":"No errors detected"]})]}),y.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:cpu text-purple-500 w-4 h-4"}),y.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Memory Usage"})]}),y.jsx("div",{className:"flex items-center gap-2 mt-2",children:y.jsxs("span",{className:Ne("text-2xl font-semibold",(t?.memory?.percentage??0)>80?"text-red-500":(t?.memory?.percentage??0)>60?"text-yellow-500":"text-green-500"),children:[t?.memory?.percentage??0,"%"]})}),y.jsx(tT,{value:t?.memory?.percentage??0,className:Ne("mt-2",(t?.memory?.percentage??0)>80?"[&>div]:bg-red-500":(t?.memory?.percentage??0)>60?"[&>div]:bg-yellow-500":"[&>div]:bg-green-500")}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[y.jsx("div",{className:"i-ph:info w-3.5 h-3.5 text-purple-500"}),"Used: ",t?.memory.used??"0 GB"," / ",t?.memory.total??"0 GB"]})]}),y.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:timer text-purple-500 w-4 h-4"}),y.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Page Load Time"})]}),y.jsx("div",{className:"flex items-center gap-2 mt-2",children:y.jsxs("span",{className:Ne("text-2xl font-semibold",(t?.performance.timing.loadTime??0)>2e3?"text-red-500":(t?.performance.timing.loadTime??0)>1e3?"text-yellow-500":"text-green-500"),children:[t?(t.performance.timing.loadTime/1e3).toFixed(2):"-","s"]})}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[y.jsx("div",{className:"i-ph:code w-3.5 h-3.5 text-purple-500"}),"DOM Ready: ",t?(t.performance.timing.domReadyTime/1e3).toFixed(2):"-","s"]})]}),y.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:wifi-high text-purple-500 w-4 h-4"}),y.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Network Speed"})]}),y.jsx("div",{className:"flex items-center gap-2 mt-2",children:y.jsxs("span",{className:Ne("text-2xl font-semibold",(t?.network.downlink??0)<5?"text-red-500":(t?.network.downlink??0)<10?"text-yellow-500":"text-green-500"),children:[t?.network.downlink??"-"," Mbps"]})}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[y.jsx("div",{className:"i-ph:activity w-3.5 h-3.5 text-purple-500"}),"RTT: ",t?.network.rtt??"-"," ms"]})]}),y.jsxs("div",{className:"md:col-span-4 p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[260px] flex flex-col",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"i-ph:robot text-purple-500 w-5 h-5"}),y.jsxs("div",{children:[y.jsx("div",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Ollama Service"}),y.jsx("div",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:R.message})]})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1 rounded-full bg-bolt-elements-background-depth-3",children:[y.jsx("div",{className:Ne("w-2 h-2 rounded-full animate-pulse",R.bgColor,{"shadow-lg shadow-green-500/20":R.status==="Running","shadow-lg shadow-red-500/20":R.status==="Not Running"})}),y.jsx("span",{className:Ne("text-xs font-medium flex items-center gap-1",R.color),children:R.status})]}),y.jsxs("div",{className:"text-[10px] text-bolt-elements-textTertiary flex items-center gap-1.5",children:[y.jsx("div",{className:"i-ph:clock w-3 h-3"}),s.lastChecked.toLocaleTimeString()]})]})]}),y.jsx("div",{className:"mt-6 flex-1 min-h-0 flex flex-col",children:R.status==="Running"&&s.models&&s.models.length>0?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs font-medium text-bolt-elements-textSecondary flex items-center justify-between mb-3",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:cube-duotone w-4 h-4 text-purple-500"}),y.jsx("span",{children:"Installed Models"}),y.jsx(hP,{variant:"secondary",className:"ml-1",children:s.models.length})]})}),y.jsx("div",{className:"overflow-y-auto flex-1 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700 scrollbar-track-transparent hover:scrollbar-thumb-gray-400 dark:hover:scrollbar-thumb-gray-600",children:y.jsx("div",{className:"grid grid-cols-2 gap-3 pr-2",children:s.models.map(C=>y.jsxs("div",{className:"text-sm bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-4 rounded-lg px-4 py-3 flex items-center justify-between transition-colors group",children:[y.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[y.jsx("div",{className:"i-ph:cube w-4 h-4 text-purple-500/70 group-hover:text-purple-500 transition-colors"}),y.jsx("span",{className:"font-mono truncate",children:C.name})]}),y.jsxs(hP,{variant:"outline",className:"ml-2 text-xs font-mono",children:[Math.round(parseInt(C.size)/1024/1024),"MB"]})]},C.name))})})]}):y.jsx("div",{className:"flex-1 flex items-center justify-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 max-w-[280px] text-center",children:[y.jsx("div",{className:Ne("w-12 h-12",{"i-ph:warning-circle text-red-500/80":R.status==="Not Running"||R.status==="Disabled","i-ph:cube-duotone text-purple-500/80":R.status==="Running"})}),y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:R.message})]})})})]})]}),y.jsxs("div",{className:"flex flex-wrap gap-4",children:[y.jsxs("button",{onClick:f,disabled:o.systemInfo,className:Ne("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.systemInfo}),children:[o.systemInfo?y.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):y.jsx("div",{className:"i-ph:gear w-4 h-4"}),"Update System Info"]}),y.jsxs("button",{onClick:g,disabled:o.performance,className:Ne("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.performance}),children:[o.performance?y.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):y.jsx("div",{className:"i-ph:chart-bar w-4 h-4"}),"Log Performance"]}),y.jsxs("button",{onClick:b,disabled:o.errors,className:Ne("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.errors}),children:[o.errors?y.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):y.jsx("div",{className:"i-ph:warning w-4 h-4"}),"Check Errors"]}),y.jsxs("button",{onClick:p,disabled:o.webAppInfo,className:Ne("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.webAppInfo}),children:[o.webAppInfo?y.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):y.jsx("div",{className:"i-ph:info w-4 h-4"}),"Fetch WebApp Info"]}),y.jsx(x,{})]}),y.jsxs(Yy,{open:l.system,onOpenChange:C=>c(T=>({...T,system:C})),className:"w-full",children:[y.jsx(Jy,{className:"w-full",children:y.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"i-ph:cpu text-purple-500 w-5 h-5"}),y.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"System Information"})]}),y.jsx("div",{className:Ne("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.system?"rotate-180":"")})]})}),y.jsx(Xy,{children:y.jsx("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:t?y.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:desktop text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"OS: "}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.os})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:device-mobile text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Platform: "}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.platform})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:microchip text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Architecture: "}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.arch})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:cpu text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"CPU Cores: "}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.cpus})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:node text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Node Version: "}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.node})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:wifi-high text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Network Type: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.network.type," (",t.network.effectiveType,")"]})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:gauge text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Network Speed: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.network.downlink,"Mbps (RTT: ",t.network.rtt,"ms)"]})]}),t.battery&&y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:battery-charging text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Battery: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.battery.level.toFixed(1),"% ",t.battery.charging?"(Charging)":""]})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:hard-drive text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Storage: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.storage.usage/(1024*1024*1024)).toFixed(2),"GB /"," ",(t.storage.quota/(1024*1024*1024)).toFixed(2),"GB"]})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:database text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Memory Usage: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.memory.used," / ",t.memory.total," (",t.memory.percentage,"%)"]})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:browser text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Browser: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.browser.name," ",t.browser.version]})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:monitor text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Screen: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.screen.width,"x",t.screen.height," (",t.screen.pixelRatio,"x)"]})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:clock text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Timezone: "}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.time.timezone})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:translate text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Language: "}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.browser.language})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:chart-pie text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"JS Heap: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.memory.usedJSHeapSize/(1024*1024)).toFixed(1),"MB /"," ",(t.performance.memory.totalJSHeapSize/(1024*1024)).toFixed(1),"MB (",t.performance.memory.usagePercentage.toFixed(1),"%)"]})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:timer text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Page Load: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.loadTime/1e3).toFixed(2),"s"]})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:code text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"DOM Ready: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.domReadyTime/1e3).toFixed(2),"s"]})]})]})]}):y.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Loading system information..."})})})]}),y.jsxs(Yy,{open:l.performance,onOpenChange:C=>c(T=>({...T,performance:C})),className:"w-full",children:[y.jsx(Jy,{className:"w-full",children:y.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"i-ph:chart-line text-purple-500 w-5 h-5"}),y.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Performance Metrics"})]}),y.jsx("div",{className:Ne("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.performance?"rotate-180":"")})]})}),y.jsx(Xy,{children:y.jsx("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:t&&y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Page Load Time: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.loadTime/1e3).toFixed(2),"s"]})]}),y.jsxs("div",{className:"text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"DOM Ready Time: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.domReadyTime/1e3).toFixed(2),"s"]})]}),y.jsxs("div",{className:"text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Request Time: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.requestTime/1e3).toFixed(2),"s"]})]}),y.jsxs("div",{className:"text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Redirect Time: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.redirectTime/1e3).toFixed(2),"s"]})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"JS Heap Usage: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.memory.usedJSHeapSize/(1024*1024)).toFixed(1),"MB /"," ",(t.performance.memory.totalJSHeapSize/(1024*1024)).toFixed(1),"MB"]})]}),y.jsxs("div",{className:"text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Heap Utilization: "}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.performance.memory.usagePercentage.toFixed(1),"%"]})]}),y.jsxs("div",{className:"text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Navigation Type: "}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.performance.navigation.type===0?"Navigate":t.performance.navigation.type===1?"Reload":t.performance.navigation.type===2?"Back/Forward":"Other"})]}),y.jsxs("div",{className:"text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Redirects: "}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.performance.navigation.redirectCount})]})]})]})})})]}),y.jsxs(Yy,{open:l.webapp,onOpenChange:C=>c(T=>({...T,webapp:C})),className:"w-full",children:[y.jsx(Jy,{className:"w-full",children:y.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"i-ph:info text-blue-500 w-5 h-5"}),y.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"WebApp Information"}),o.webAppInfo&&y.jsx("span",{className:"loading loading-spinner loading-sm"})]}),y.jsx("div",{className:Ne("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.webapp?"rotate-180":"")})]})}),y.jsx(Xy,{children:y.jsxs("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[o.webAppInfo?y.jsx("div",{className:"flex items-center justify-center p-8",children:y.jsx("span",{className:"loading loading-spinner loading-lg"})}):n?y.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"mb-4 text-base font-medium text-bolt-elements-textPrimary",children:"Basic Information"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:app-window text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Name:"}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.name})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:tag text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Version:"}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.version})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:certificate text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"License:"}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.license})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:cloud text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Environment:"}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.environment})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:node text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Node Version:"}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.runtimeInfo.nodeVersion})]})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"mb-4 text-base font-medium text-bolt-elements-textPrimary",children:"Git Information"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:git-branch text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Branch:"}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.branch})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:git-commit text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Commit:"}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.commitHash})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:user text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Author:"}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.author})]}),y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:clock text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Commit Time:"}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.commitTime})]}),n.gitInfo.github&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-800",children:[y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:git-repository text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Repository:"}),y.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[n.gitInfo.github.currentRepo.fullName,n.gitInfo.isForked&&" (fork)"]})]}),y.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:star text-yellow-500 w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.currentRepo.stars})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:git-fork text-blue-500 w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.currentRepo.forks})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:warning-circle text-red-500 w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.currentRepo.openIssues})]})]})]}),n.gitInfo.github.upstream&&y.jsxs("div",{className:"mt-2",children:[y.jsxs("div",{className:"text-sm flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:git-fork text-bolt-elements-textSecondary w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Upstream:"}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.github.upstream.fullName})]}),y.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:star text-yellow-500 w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.upstream.stars})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:git-fork text-blue-500 w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.upstream.forks})]})]})]})]})]})]})]}):y.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-bolt-elements-textSecondary",children:[y.jsx("div",{className:"i-ph:warning-circle w-8 h-8 mb-2"}),y.jsx("p",{children:"Failed to load WebApp information"}),y.jsx("button",{onClick:()=>p(),className:"mt-4 px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Retry"})]}),n&&y.jsxs("div",{className:"mt-6",children:[y.jsx("h3",{className:"mb-4 text-base font-medium text-bolt-elements-textPrimary",children:"Dependencies"}),y.jsxs("div",{className:"bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded-lg divide-y divide-[#E5E5E5] dark:divide-[#1A1A1A]",children:[y.jsx(w2,{title:"Production",deps:n.dependencies.production}),y.jsx(w2,{title:"Development",deps:n.dependencies.development}),y.jsx(w2,{title:"Peer",deps:n.dependencies.peer}),y.jsx(w2,{title:"Optional",deps:n.dependencies.optional})]})]})]})})]}),y.jsxs(Yy,{open:l.errors,onOpenChange:C=>c(T=>({...T,errors:C})),className:"w-full",children:[y.jsx(Jy,{className:"w-full",children:y.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"i-ph:warning text-red-500 w-5 h-5"}),y.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Error Check"}),h.length>0&&y.jsxs(hP,{variant:"destructive",className:"ml-2",children:[h.length," Errors"]})]}),y.jsx("div",{className:Ne("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.errors?"rotate-180":"")})]})}),y.jsx(Xy,{children:y.jsx("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:y.jsx(c8,{className:"h-[300px]",children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary",children:["Checks for:",y.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[y.jsx("li",{children:"Unhandled JavaScript errors"}),y.jsx("li",{children:"Unhandled Promise rejections"}),y.jsx("li",{children:"Runtime exceptions"}),y.jsx("li",{children:"Network errors"})]})]}),y.jsxs("div",{className:"text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Status: "}),y.jsx("span",{className:"text-bolt-elements-textPrimary",children:o.errors?"Checking...":h.length>0?`${h.length} errors found`:"No errors found"})]}),h.length>0&&y.jsxs("div",{className:"mt-4",children:[y.jsx("div",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-2",children:"Recent Errors:"}),y.jsx("div",{className:"space-y-2",children:h.map(C=>y.jsxs("div",{className:"text-sm text-red-500 dark:text-red-400 p-2 rounded bg-red-500/5",children:[y.jsx("div",{className:"font-medium",children:C.message}),C.source&&y.jsxs("div",{className:"text-xs mt-1 text-red-400",children:["Source: ",C.source,C.details?.lineNumber&&`:${C.details.lineNumber}`]}),C.stack&&y.jsx("div",{className:"text-xs mt-1 text-red-400 font-mono whitespace-pre-wrap",children:C.stack})]},C.id))})]})]})})})})]})]})}const BH=[{value:"all",label:"All Types",icon:"i-ph:funnel",color:"#9333ea"},{value:"provider",label:"LLM",icon:"i-ph:robot",color:"#10b981"},{value:"api",label:"API",icon:"i-ph:cloud",color:"#3b82f6"},{value:"error",label:"Errors",icon:"i-ph:warning-circle",color:"#ef4444"},{value:"warning",label:"Warnings",icon:"i-ph:warning",color:"#f59e0b"},{value:"info",label:"Info",icon:"i-ph:info",color:"#3b82f6"},{value:"debug",label:"Debug",icon:"i-ph:bug",color:"#6b7280"}],tXe=({log:t,isExpanded:e,use24Hour:n,showTimestamp:r})=>{const[s,i]=N.useState(e);N.useEffect(()=>{i(e)},[e]);const o=N.useMemo(()=>new Date(t.timestamp).toLocaleTimeString("en-US",{hour12:!n}),[t.timestamp,n]),a=N.useMemo(()=>{if(t.category==="provider")return{icon:"i-ph:robot",color:"text-emerald-500 dark:text-emerald-400",bg:"hover:bg-emerald-500/10 dark:hover:bg-emerald-500/20",badge:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"};if(t.category==="api")return{icon:"i-ph:cloud",color:"text-blue-500 dark:text-blue-400",bg:"hover:bg-blue-500/10 dark:hover:bg-blue-500/20",badge:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"};switch(t.level){case"error":return{icon:"i-ph:warning-circle",color:"text-red-500 dark:text-red-400",bg:"hover:bg-red-500/10 dark:hover:bg-red-500/20",badge:"text-red-500 bg-red-50 dark:bg-red-500/10"};case"warning":return{icon:"i-ph:warning",color:"text-yellow-500 dark:text-yellow-400",bg:"hover:bg-yellow-500/10 dark:hover:bg-yellow-500/20",badge:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"};case"debug":return{icon:"i-ph:bug",color:"text-gray-500 dark:text-gray-400",bg:"hover:bg-gray-500/10 dark:hover:bg-gray-500/20",badge:"text-gray-500 bg-gray-50 dark:bg-gray-500/10"};default:return{icon:"i-ph:info",color:"text-blue-500 dark:text-blue-400",bg:"hover:bg-blue-500/10 dark:hover:bg-blue-500/20",badge:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"}}},[t.level,t.category]),l=c=>t.category==="provider"?y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[y.jsxs("span",{children:["Model: ",c.model]}),y.jsx("span",{children:""}),y.jsxs("span",{children:["Tokens: ",c.totalTokens]}),y.jsx("span",{children:""}),y.jsxs("span",{children:["Duration: ",c.duration,"ms"]})]}),c.prompt&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Prompt:"}),y.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:c.prompt})]}),c.response&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Response:"}),y.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:c.response})]})]}):t.category==="api"?y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[y.jsx("span",{className:c.method==="GET"?"text-green-500":"text-blue-500",children:c.method}),y.jsx("span",{children:""}),y.jsxs("span",{children:["Status: ",c.statusCode]}),y.jsx("span",{children:""}),y.jsxs("span",{children:["Duration: ",c.duration,"ms"]})]}),y.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 break-all",children:c.url}),c.request&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Request:"}),y.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:JSON.stringify(c.request,null,2)})]}),c.response&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Response:"}),y.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:JSON.stringify(c.response,null,2)})]}),c.error&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("div",{className:"text-xs font-medium text-red-500",children:"Error:"}),y.jsx("pre",{className:"text-xs text-red-400 bg-red-50 dark:bg-red-500/10 rounded p-2 whitespace-pre-wrap",children:JSON.stringify(c.error,null,2)})]})]}):y.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded whitespace-pre-wrap",children:JSON.stringify(c,null,2)});return y.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Ne("flex flex-col gap-2","rounded-lg p-4","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]",a.bg,"transition-all duration-200"),children:y.jsxs("div",{className:"flex items-start justify-between gap-4",children:[y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("span",{className:Ne("text-lg",a.icon,a.color)}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.message}),t.details&&y.jsxs(y.Fragment,{children:[y.jsxs("button",{onClick:()=>i(!s),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-purple-500 dark:hover:text-purple-400 transition-colors",children:[s?"Hide":"Show"," Details"]}),s&&l(t.details)]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:Ne("px-2 py-0.5 rounded text-xs font-medium uppercase",a.badge),children:t.level}),t.category&&y.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:t.category})]})]})]}),r&&y.jsx("time",{className:"shrink-0 text-xs text-gray-500 dark:text-gray-400",children:o})]})})};function nXe(){const t=Bt(Ut.logs),[e,n]=N.useState("all"),[r,s]=N.useState(""),[i,o]=N.useState(!1),[a,l]=N.useState(!1),[c,u]=N.useState(!0),[d,h]=N.useState(!1),[f,p]=N.useState(!1),m=N.useRef(null),g=N.useMemo(()=>{const C=Object.values(t);return e==="all"?C.filter(T=>r?T.message.toLowerCase().includes(r.toLowerCase()):!0):C.filter(T=>{const O=T.category===e||T.level===e,P=r?T.message.toLowerCase().includes(r.toLowerCase()):!0;return O&&P})},[t,e,r]);N.useEffect(()=>{const C=performance.now();return Ut.logInfo("Event Logs tab mounted",{type:"component_mount",message:"Event Logs tab component mounted",component:"EventLogsTab"}),()=>{const T=performance.now()-C;Ut.logPerformanceMetric("EventLogsTab","mount-duration",T)}},[]);const b=N.useCallback(C=>{Ut.logInfo("Log level filter changed",{type:"filter_change",message:`Log level filter changed from ${e} to ${C}`,component:"EventLogsTab",previousLevel:e,newLevel:C}),n(C),h(!1)},[e]);N.useEffect(()=>{const C=setTimeout(()=>{r&&Ut.logInfo("Log search performed",{type:"search",message:`Search performed with query "${r}" (${g.length} results)`,component:"EventLogsTab",query:r,resultsCount:g.length})},1e3);return()=>clearTimeout(C)},[r,g.length]);const v=N.useCallback(async()=>{const C=performance.now();p(!0);try{await Ut.refreshLogs();const T=performance.now()-C;Ut.logSuccess("Logs refreshed successfully",{type:"refresh",message:`Successfully refreshed ${Object.keys(t).length} logs`,component:"EventLogsTab",duration:T,logsCount:Object.keys(t).length})}catch(T){Ut.logError("Failed to refresh logs",T,{type:"refresh_error",message:"Failed to refresh logs",component:"EventLogsTab"})}finally{setTimeout(()=>p(!1),500)}},[t]),w=N.useCallback((C,T)=>{switch(Ut.logInfo("Log preference changed",{type:"preference_change",message:`Log preference "${C}" changed to ${T}`,component:"EventLogsTab",preference:C,value:T}),C){case"timestamps":u(T);break;case"24hour":o(T);break;case"autoExpand":l(T);break}},[]);N.useEffect(()=>{const C=T=>{m.current&&!m.current.contains(T.target)&&h(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]);const _=BH.find(C=>C.value===e),I=[{id:"json",label:"Export as JSON",icon:"i-ph:file-json",handler:()=>{try{const C={timestamp:new Date().toISOString(),logs:g,filters:{level:e,searchQuery:r},preferences:{use24Hour:i,showTimestamps:c,autoExpand:a}},T=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),O=window.URL.createObjectURL(T),P=document.createElement("a");P.href=O,P.download=`bolt-event-logs-${new Date().toISOString()}.json`,document.body.appendChild(P),P.click(),window.URL.revokeObjectURL(O),document.body.removeChild(P),Ve.success("Event logs exported successfully as JSON")}catch(C){console.error("Failed to export JSON:",C),Ve.error("Failed to export event logs as JSON")}}},{id:"csv",label:"Export as CSV",icon:"i-ph:file-csv",handler:()=>{try{const O=[["Timestamp","Level","Category","Message","Details"],...g.map(X=>[new Date(X.timestamp).toISOString(),X.level,X.category||"",X.message,X.details?JSON.stringify(X.details):""])].map(X=>X.map(Z=>`"${String(Z).replace(/"/g,'""')}"`).join(",")).join(`
`),P=new Blob([O],{type:"text/csv;charset=utf-8;"}),U=window.URL.createObjectURL(P),ee=document.createElement("a");ee.href=U,ee.download=`bolt-event-logs-${new Date().toISOString()}.csv`,document.body.appendChild(ee),ee.click(),window.URL.revokeObjectURL(U),document.body.removeChild(ee),Ve.success("Event logs exported successfully as CSV")}catch(C){console.error("Failed to export CSV:",C),Ve.error("Failed to export event logs as CSV")}}},{id:"pdf",label:"Export as PDF",icon:"i-ph:file-pdf",handler:()=>{try{const C=new Vt,T=7;let O=20;const P=20,U=C.internal.pageSize.getWidth(),ee=U-2*P,X=q=>{O>C.internal.pageSize.getHeight()-30&&(C.addPage(),O=P),C.setFillColor("#F3F4F6"),C.rect(P-2,O-5,U-2*(P-2),T+6,"F"),C.setFont("helvetica","bold"),C.setTextColor("#111827"),C.setFontSize(12),C.text(q.toUpperCase(),P,O),O+=T*2};C.setFillColor("#6366F1"),C.rect(0,0,U,50,"F"),C.setTextColor("#FFFFFF"),C.setFontSize(24),C.setFont("helvetica","bold"),C.text("Event Logs Report",P,35),C.setFontSize(12),C.setFont("helvetica","normal"),C.text("bolt.diy - AI Development Platform",P,45),O=70,X("Report Summary"),C.setFontSize(10),C.setFont("helvetica","normal"),C.setTextColor("#374151"),[{label:"Generated",value:new Date().toLocaleString()},{label:"Total Logs",value:g.length.toString()},{label:"Filter Applied",value:e==="all"?"All Types":e},{label:"Search Query",value:r||"None"},{label:"Time Format",value:i?"24-hour":"12-hour"}].forEach(q=>{C.setFont("helvetica","bold"),C.text(`${q.label}:`,P,O),C.setFont("helvetica","normal"),C.text(q.value,P+60,O),O+=T}),O+=T*2,X("Log Statistics");const F={error:g.filter(q=>q.level==="error").length,warning:g.filter(q=>q.level==="warning").length,info:g.filter(q=>q.level==="info").length,debug:g.filter(q=>q.level==="debug").length,provider:g.filter(q=>q.category==="provider").length,api:g.filter(q=>q.category==="api").length},M=[{label:"Error Logs",value:F.error,color:"#DC2626"},{label:"Warning Logs",value:F.warning,color:"#F59E0B"},{label:"Info Logs",value:F.info,color:"#3B82F6"}],G=[{label:"Debug Logs",value:F.debug,color:"#6B7280"},{label:"LLM Logs",value:F.provider,color:"#10B981"},{label:"API Logs",value:F.api,color:"#3B82F6"}],D=(U-2*P)/2;M.forEach((q,ne)=>{C.setTextColor(q.color),C.setFont("helvetica","bold"),C.text(q.value.toString(),P,O),C.setTextColor("#374151"),C.setFont("helvetica","normal"),C.text(q.label,P+20,O),G[ne]&&(C.setTextColor(G[ne].color),C.setFont("helvetica","bold"),C.text(G[ne].value.toString(),P+D,O),C.setTextColor("#374151"),C.setFont("helvetica","normal"),C.text(G[ne].label,P+D+20,O)),O+=T}),O+=T*2,X("Event Logs");const j=q=>{const ne=20+(q.details?40:0);O+ne>C.internal.pageSize.getHeight()-20&&(C.addPage(),O=P);const te=new Date(q.timestamp).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!i}),Y={error:"#FEE2E2",warning:"#FEF3C7",info:"#DBEAFE",debug:"#F3F4F6"},de={error:"#DC2626",warning:"#F59E0B",info:"#3B82F6",debug:"#6B7280"},Se=C.getTextWidth(q.level.toUpperCase())+10;if(C.setFillColor(Y[q.level]||"#F3F4F6"),C.roundedRect(P,O-4,Se,T+4,1,1,"F"),C.setTextColor(de[q.level]||"#6B7280"),C.setFont("helvetica","bold"),C.setFontSize(8),C.text(q.level.toUpperCase(),P+5,O),C.setTextColor("#6B7280"),C.setFont("helvetica","normal"),C.setFontSize(9),C.text(te,P+Se+10,O),q.category){const Ae=P+Se+C.getTextWidth(te)+20;C.setFillColor("#F3F4F6");const Pe=C.getTextWidth(q.category)+10;C.roundedRect(Ae,O-4,Pe,T+4,2,2,"F"),C.setTextColor("#6B7280"),C.text(q.category,Ae+5,O)}O+=T*1.5,C.setTextColor("#111827"),C.setFontSize(10);const xe=C.splitTextToSize(q.message,ee-10);if(C.text(xe,P+5,O),O+=xe.length*T,q.details){C.setTextColor("#6B7280"),C.setFontSize(8);const Ae=JSON.stringify(q.details,null,2),Pe=C.splitTextToSize(Ae,ee-15);C.setFillColor("#F9FAFB"),C.roundedRect(P+5,O-2,ee-10,Pe.length*T+8,1,1,"F"),C.text(Pe,P+10,O+4),O+=Pe.length*T+10}C.setDrawColor("#E5E7EB"),C.setLineWidth(.1),C.line(P,O,U-P,O),O+=T*1.5};g.forEach(q=>{j(q)});const W=C.internal.pages.length-1;for(let q=1;q<=W;q++){C.setPage(q),C.setFontSize(8),C.setTextColor("#9CA3AF"),C.text(`Page ${q} of ${W}`,U/2,C.internal.pageSize.getHeight()-10,{align:"center"}),C.text("Generated by bolt.diy",P,C.internal.pageSize.getHeight()-10);const ne=new Date().toLocaleDateString();C.text(ne,U-P,C.internal.pageSize.getHeight()-10,{align:"right"})}C.save(`bolt-event-logs-${new Date().toISOString()}.pdf`),Ve.success("Event logs exported successfully as PDF")}catch(C){console.error("Failed to export PDF:",C),Ve.error("Failed to export event logs as PDF")}}},{id:"txt",label:"Export as Text",icon:"i-ph:file-text",handler:()=>{try{const C=g.map(U=>{let X=`[${new Date(U.timestamp).toLocaleString()}] ${U.level.toUpperCase()}: ${U.message}
`;return U.category&&(X+=`Category: ${U.category}
`),U.details&&(X+=`Details:
${JSON.stringify(U.details,null,2)}
`),X+"-".repeat(80)+`
`}).join(`
`),T=new Blob([C],{type:"text/plain"}),O=window.URL.createObjectURL(T),P=document.createElement("a");P.href=O,P.download=`bolt-event-logs-${new Date().toISOString()}.txt`,document.body.appendChild(P),P.click(),window.URL.revokeObjectURL(O),document.body.removeChild(P),Ve.success("Event logs exported successfully as text file")}catch(C){console.error("Failed to export text file:",C),Ve.error("Failed to export event logs as text file")}}}],R=()=>{const[C,T]=N.useState(!1),O=N.useCallback(U=>{T(U)},[]),P=N.useCallback(U=>{U(),T(!1)},[]);return y.jsxs(Ea,{open:C,onOpenChange:O,children:[y.jsxs("button",{onClick:()=>T(!0),className:Ne("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[y.jsx("span",{className:"i-ph:download text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Export"]}),y.jsx(t0,{showCloseButton:!0,children:y.jsxs("div",{className:"p-6",children:[y.jsxs(up,{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:download w-5 h-5"}),"Export Event Logs"]}),y.jsx("div",{className:"mt-4 flex flex-col gap-2",children:I.map(U=>y.jsxs("button",{onClick:()=>P(U.handler),className:Ne("flex items-center gap-3 px-4 py-3 text-sm rounded-lg transition-colors w-full text-left","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary"),children:[y.jsx("div",{className:Ne(U.icon,"w-5 h-5")}),y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:U.label}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:[U.id==="json"&&"Export as a structured JSON file",U.id==="csv"&&"Export as a CSV spreadsheet",U.id==="pdf"&&"Export as a formatted PDF document",U.id==="txt"&&"Export as a formatted text file"]})]})]},U.id))})]})})]})};return y.jsxs("div",{className:"flex h-full flex-col gap-6",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs(BA,{open:d,onOpenChange:h,children:[y.jsx($A,{asChild:!0,children:y.jsxs("button",{className:Ne("flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[y.jsx("span",{className:Ne("text-lg",_?.icon||"i-ph:funnel"),style:{color:_?.color}}),_?.label||"All Types",y.jsx("span",{className:"i-ph:caret-down text-lg text-gray-500 dark:text-gray-400"})]})}),y.jsx(UA,{children:y.jsx(HA,{className:"min-w-[200px] bg-white dark:bg-[#0A0A0A] rounded-lg shadow-lg py-1 z-[250] animate-in fade-in-0 zoom-in-95 border border-[#E5E5E5] dark:border-[#1A1A1A]",sideOffset:5,align:"start",side:"bottom",children:BH.map(C=>y.jsxs(cg,{className:"group flex items-center px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-purple-500/10 dark:hover:bg-purple-500/20 cursor-pointer transition-colors",onClick:()=>b(C.value),children:[y.jsx("div",{className:"mr-3 flex h-5 w-5 items-center justify-center",children:y.jsx("div",{className:Ne(C.icon,"text-lg group-hover:text-purple-500 transition-colors"),style:{color:C.color}})}),y.jsx("span",{className:"group-hover:text-purple-500 transition-colors",children:C.label})]},C.value))})})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(ka,{checked:c,onCheckedChange:C=>w("timestamps",C),className:"data-[state=checked]:bg-purple-500"}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Show Timestamps"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(ka,{checked:i,onCheckedChange:C=>w("24hour",C),className:"data-[state=checked]:bg-purple-500"}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"24h Time"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(ka,{checked:a,onCheckedChange:C=>w("autoExpand",C),className:"data-[state=checked]:bg-purple-500"}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Auto Expand"})]}),y.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),y.jsxs("button",{onClick:v,className:Ne("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200",{"animate-spin":f}),children:[y.jsx("span",{className:"i-ph:arrows-clockwise text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Refresh"]}),y.jsx(R,{})]})]}),y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",placeholder:"Search logs...",value:r,onChange:C=>s(C.target.value),className:Ne("w-full px-4 py-2 pl-10 rounded-lg","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400","focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500","transition-all duration-200")}),y.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:y.jsx("div",{className:"i-ph:magnifying-glass text-lg text-gray-500 dark:text-gray-400"})})]}),g.length===0?y.jsxs(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Ne("flex flex-col items-center justify-center gap-4","rounded-lg p-8 text-center","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]"),children:[y.jsx("span",{className:"i-ph:clipboard-text text-4xl text-gray-400 dark:text-gray-600"}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"No Logs Found"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search or filters"})]})]}):g.map(C=>y.jsx(tXe,{log:C,isExpanded:a,use24Hour:i,showTimestamp:c},C.id))]})]})}const rXe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sXe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,iXe={};function $H(t,e){return(iXe.jsx?sXe:rXe).test(t)}const oXe=/[ \t\n\f\r]/g;function aXe(t){return typeof t=="object"?t.type==="text"?UH(t.value):!1:UH(t)}function UH(t){return t.replace(oXe,"")===""}let Qw=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};Qw.prototype.normal={};Qw.prototype.property={};Qw.prototype.space=void 0;function rue(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new Qw(n,r,e)}function XR(t){return t.toLowerCase()}let yo=class{constructor(e,n){this.attribute=n,this.property=e}};yo.prototype.attribute="";yo.prototype.booleanish=!1;yo.prototype.boolean=!1;yo.prototype.commaOrSpaceSeparated=!1;yo.prototype.commaSeparated=!1;yo.prototype.defined=!1;yo.prototype.mustUseProperty=!1;yo.prototype.number=!1;yo.prototype.overloadedBoolean=!1;yo.prototype.property="";yo.prototype.spaceSeparated=!1;yo.prototype.space=void 0;let lXe=0;const cn=Gp(),ss=Gp(),sue=Gp(),vt=Gp(),dr=Gp(),Lg=Gp(),No=Gp();function Gp(){return 2**++lXe}const ZR=Object.freeze(Object.defineProperty({__proto__:null,boolean:cn,booleanish:ss,commaOrSpaceSeparated:No,commaSeparated:Lg,number:vt,overloadedBoolean:sue,spaceSeparated:dr},Symbol.toStringTag,{value:"Module"})),_P=Object.keys(ZR);let f8=class extends yo{constructor(e,n,r,s){let i=-1;if(super(e,n),HH(this,"space",s),typeof r=="number")for(;++i<_P.length;){const o=_P[i];HH(this,_P[i],(r&ZR[o])===ZR[o])}}};f8.prototype.defined=!0;function HH(t,e,n){n&&(t[e]=n)}function ab(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const i=new f8(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[XR(r)]=r,n[XR(i.attribute)]=r}return new Qw(e,n,t.space)}const iue=ab({properties:{ariaActiveDescendant:null,ariaAtomic:ss,ariaAutoComplete:null,ariaBusy:ss,ariaChecked:ss,ariaColCount:vt,ariaColIndex:vt,ariaColSpan:vt,ariaControls:dr,ariaCurrent:null,ariaDescribedBy:dr,ariaDetails:null,ariaDisabled:ss,ariaDropEffect:dr,ariaErrorMessage:null,ariaExpanded:ss,ariaFlowTo:dr,ariaGrabbed:ss,ariaHasPopup:null,ariaHidden:ss,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:dr,ariaLevel:vt,ariaLive:null,ariaModal:ss,ariaMultiLine:ss,ariaMultiSelectable:ss,ariaOrientation:null,ariaOwns:dr,ariaPlaceholder:null,ariaPosInSet:vt,ariaPressed:ss,ariaReadOnly:ss,ariaRelevant:null,ariaRequired:ss,ariaRoleDescription:dr,ariaRowCount:vt,ariaRowIndex:vt,ariaRowSpan:vt,ariaSelected:ss,ariaSetSize:vt,ariaSort:null,ariaValueMax:vt,ariaValueMin:vt,ariaValueNow:vt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function oue(t,e){return e in t?t[e]:e}function aue(t,e){return oue(t,e.toLowerCase())}const cXe=ab({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Lg,acceptCharset:dr,accessKey:dr,action:null,allow:null,allowFullScreen:cn,allowPaymentRequest:cn,allowUserMedia:cn,alt:null,as:null,async:cn,autoCapitalize:null,autoComplete:dr,autoFocus:cn,autoPlay:cn,blocking:dr,capture:null,charSet:null,checked:cn,cite:null,className:dr,cols:vt,colSpan:null,content:null,contentEditable:ss,controls:cn,controlsList:dr,coords:vt|Lg,crossOrigin:null,data:null,dateTime:null,decoding:null,default:cn,defer:cn,dir:null,dirName:null,disabled:cn,download:sue,draggable:ss,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:cn,formTarget:null,headers:dr,height:vt,hidden:cn,high:vt,href:null,hrefLang:null,htmlFor:dr,httpEquiv:dr,id:null,imageSizes:null,imageSrcSet:null,inert:cn,inputMode:null,integrity:null,is:null,isMap:cn,itemId:null,itemProp:dr,itemRef:dr,itemScope:cn,itemType:dr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:cn,low:vt,manifest:null,max:null,maxLength:vt,media:null,method:null,min:null,minLength:vt,multiple:cn,muted:cn,name:null,nonce:null,noModule:cn,noValidate:cn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:cn,optimum:vt,pattern:null,ping:dr,placeholder:null,playsInline:cn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:cn,referrerPolicy:null,rel:dr,required:cn,reversed:cn,rows:vt,rowSpan:vt,sandbox:dr,scope:null,scoped:cn,seamless:cn,selected:cn,shadowRootClonable:cn,shadowRootDelegatesFocus:cn,shadowRootMode:null,shape:null,size:vt,sizes:null,slot:null,span:vt,spellCheck:ss,src:null,srcDoc:null,srcLang:null,srcSet:null,start:vt,step:null,style:null,tabIndex:vt,target:null,title:null,translate:null,type:null,typeMustMatch:cn,useMap:null,value:ss,width:vt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:dr,axis:null,background:null,bgColor:null,border:vt,borderColor:null,bottomMargin:vt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:cn,declare:cn,event:null,face:null,frame:null,frameBorder:null,hSpace:vt,leftMargin:vt,link:null,longDesc:null,lowSrc:null,marginHeight:vt,marginWidth:vt,noResize:cn,noHref:cn,noShade:cn,noWrap:cn,object:null,profile:null,prompt:null,rev:null,rightMargin:vt,rules:null,scheme:null,scrolling:ss,standby:null,summary:null,text:null,topMargin:vt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:vt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:cn,disableRemotePlayback:cn,prefix:null,property:null,results:vt,security:null,unselectable:null},space:"html",transform:aue}),uXe=ab({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:No,accentHeight:vt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:vt,amplitude:vt,arabicForm:null,ascent:vt,attributeName:null,attributeType:null,azimuth:vt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:vt,by:null,calcMode:null,capHeight:vt,className:dr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:vt,diffuseConstant:vt,direction:null,display:null,dur:null,divisor:vt,dominantBaseline:null,download:cn,dx:null,dy:null,edgeMode:null,editable:null,elevation:vt,enableBackground:null,end:null,event:null,exponent:vt,externalResourcesRequired:null,fill:null,fillOpacity:vt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Lg,g2:Lg,glyphName:Lg,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:vt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:vt,horizOriginX:vt,horizOriginY:vt,id:null,ideographic:vt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:vt,k:vt,k1:vt,k2:vt,k3:vt,k4:vt,kernelMatrix:No,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:vt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:vt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:vt,overlineThickness:vt,paintOrder:null,panose1:null,path:null,pathLength:vt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:dr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:vt,pointsAtY:vt,pointsAtZ:vt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:No,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:No,rev:No,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:No,requiredFeatures:No,requiredFonts:No,requiredFormats:No,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:vt,specularExponent:vt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:vt,strikethroughThickness:vt,string:null,stroke:null,strokeDashArray:No,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:vt,strokeOpacity:vt,strokeWidth:null,style:null,surfaceScale:vt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:No,tabIndex:vt,tableValues:null,target:null,targetX:vt,targetY:vt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:No,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:vt,underlineThickness:vt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:vt,values:null,vAlphabetic:vt,vMathematical:vt,vectorEffect:null,vHanging:vt,vIdeographic:vt,version:null,vertAdvY:vt,vertOriginX:vt,vertOriginY:vt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:vt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:oue}),lue=ab({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),cue=ab({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:aue}),uue=ab({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),dXe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},hXe=/[A-Z]/g,zH=/-[a-z]/g,fXe=/^data[-\w.:]+$/i;function pXe(t,e){const n=XR(e);let r=e,s=yo;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&fXe.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(zH,gXe);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!zH.test(i)){let o=i.replace(hXe,mXe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=f8}return new s(r,e)}function mXe(t){return"-"+t.toLowerCase()}function gXe(t){return t.charAt(1).toUpperCase()}const bXe=rue([iue,cXe,lue,cue,uue],"html"),p8=rue([iue,uXe,lue,cue,uue],"svg");var m8={},VH=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,yXe=/\n/g,vXe=/^\s*/,wXe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,xXe=/^:\s*/,_Xe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,SXe=/^[;\s]*/,EXe=/^\s+|\s+$/g,kXe=`
`,WH="/",GH="*",_f="",CXe="comment",AXe="declaration",TXe=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function s(p){var m=p.match(yXe);m&&(n+=m.length);var g=p.lastIndexOf(kXe);r=~g?p.length-g:r+p.length}function i(){var p={line:n,column:r};return function(m){return m.position=new o(p),c(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(p){var m=new Error(e.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=e.source,m.line=n,m.column=r,m.source=t,!e.silent)throw m}function l(p){var m=p.exec(t);if(m){var g=m[0];return s(g),t=t.slice(g.length),m}}function c(){l(vXe)}function u(p){var m;for(p=p||[];m=d();)m!==!1&&p.push(m);return p}function d(){var p=i();if(!(WH!=t.charAt(0)||GH!=t.charAt(1))){for(var m=2;_f!=t.charAt(m)&&(GH!=t.charAt(m)||WH!=t.charAt(m+1));)++m;if(m+=2,_f===t.charAt(m-1))return a("End of comment missing");var g=t.slice(2,m-2);return r+=2,s(g),t=t.slice(m),r+=2,p({type:CXe,comment:g})}}function h(){var p=i(),m=l(wXe);if(m){if(d(),!l(xXe))return a("property missing ':'");var g=l(_Xe),b=p({type:AXe,property:qH(m[0].replace(VH,_f)),value:g?qH(g[0].replace(VH,_f)):_f});return l(SXe),b}}function f(){var p=[];u(p);for(var m;m=h();)m!==!1&&(p.push(m),u(p));return p}return c(),f()};function qH(t){return t?t.replace(EXe,_f):_f}var PXe=Ws&&Ws.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(m8,"__esModule",{value:!0});m8.default=IXe;var NXe=PXe(TXe);function IXe(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,NXe.default)(t),s=typeof e=="function";return r.forEach(function(i){if(i.type==="declaration"){var o=i.property,a=i.value;s?e(o,a,i):a&&(n=n||{},n[o]=a)}}),n}var aT={};Object.defineProperty(aT,"__esModule",{value:!0});aT.camelCase=void 0;var RXe=/^--[a-zA-Z0-9_-]+$/,OXe=/-([a-z])/g,LXe=/^[^-]+$/,DXe=/^-(webkit|moz|ms|o|khtml)-/,MXe=/^-(ms)-/,jXe=function(t){return!t||LXe.test(t)||RXe.test(t)},FXe=function(t,e){return e.toUpperCase()},KH=function(t,e){return"".concat(e,"-")},BXe=function(t,e){return e===void 0&&(e={}),jXe(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(MXe,KH):t=t.replace(DXe,KH),t.replace(OXe,FXe))};aT.camelCase=BXe;var $Xe=Ws&&Ws.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},UXe=$Xe(m8),HXe=aT;function QR(t,e){var n={};return!t||typeof t!="string"||(0,UXe.default)(t,function(r,s){r&&s&&(n[(0,HXe.camelCase)(r,e)]=s)}),n}QR.default=QR;var zXe=QR;const VXe=yi(zXe),WXe=GXe("start");function GXe(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function qXe(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?YH(t.position):"start"in t||"end"in t?YH(t):"line"in t||"column"in t?eO(t):""}function eO(t){return JH(t&&t.line)+":"+JH(t&&t.column)}function YH(t){return eO(t&&t.start)+"-"+eO(t&&t.end)}function JH(t){return t&&typeof t=="number"?t:1}class Zs extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},o=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof e=="string"?s=e:!i.cause&&e&&(o=!0,s=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?i.ruleId=r:(i.source=r.slice(0,l),i.ruleId=r.slice(l+1))}if(!i.place&&i.ancestors&&i.ancestors){const l=i.ancestors[i.ancestors.length-1];l&&(i.place=l.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=a?a.line:void 0,this.name=qXe(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}Zs.prototype.file="";Zs.prototype.name="";Zs.prototype.reason="";Zs.prototype.message="";Zs.prototype.stack="";Zs.prototype.column=void 0;Zs.prototype.line=void 0;Zs.prototype.ancestors=void 0;Zs.prototype.cause=void 0;Zs.prototype.fatal=void 0;Zs.prototype.place=void 0;Zs.prototype.ruleId=void 0;Zs.prototype.source=void 0;const g8={}.hasOwnProperty,KXe=new Map,YXe=/[A-Z]/g,JXe=new Set(["table","tbody","thead","tfoot","tr"]),XXe=new Set(["td","th"]),due="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ZXe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=oZe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=iZe(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?p8:bXe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},i=hue(s,t,void 0);return i&&typeof i!="string"?i:s.create(t,s.Fragment,{children:i||void 0},void 0)}function hue(t,e,n){if(e.type==="element")return QXe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return eZe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return nZe(t,e,n);if(e.type==="mdxjsEsm")return tZe(t,e);if(e.type==="root")return rZe(t,e,n);if(e.type==="text")return sZe(t,e)}function QXe(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=p8,t.schema=s),t.ancestors.push(e);const i=pue(t,e.tagName,!1),o=aZe(t,e);let a=y8(t,e);return JXe.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!aXe(l):!0})),fue(t,o,i,e),b8(o,a),t.ancestors.pop(),t.schema=r,t.create(e,i,o,n)}function eZe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Y1(t,e.position)}function tZe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Y1(t,e.position)}function nZe(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=p8,t.schema=s),t.ancestors.push(e);const i=e.name===null?t.Fragment:pue(t,e.name,!0),o=lZe(t,e),a=y8(t,e);return fue(t,o,i,e),b8(o,a),t.ancestors.pop(),t.schema=r,t.create(e,i,o,n)}function rZe(t,e,n){const r={};return b8(r,y8(t,e)),t.create(e,t.Fragment,r,n)}function sZe(t,e){return e.value}function fue(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function b8(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function iZe(t,e,n){return r;function r(s,i,o,a){const c=Array.isArray(o.children)?n:e;return a?c(i,o,a):c(i,o)}}function oZe(t,e){return n;function n(r,s,i,o){const a=Array.isArray(i.children),l=WXe(r);return e(s,i,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function aZe(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&g8.call(e.properties,s)){const i=cZe(t,s,e.properties[s]);if(i){const[o,a]=i;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&XXe.has(e.tagName)?r=a:n[o]=a}}if(r){const i=n.style||(n.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function lZe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const i=r.data.estree.body[0];i.type;const o=i.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Y1(t,e.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,i=t.evaluater.evaluateExpression(a.expression)}else Y1(t,e.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function y8(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:KXe;for(;++r<e.children.length;){const i=e.children[r];let o;if(t.passKeys){const l=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(l){const c=s.get(l)||0;o=l+"-"+c,s.set(l,c+1)}}const a=hue(t,i,o);a!==void 0&&n.push(a)}return n}function cZe(t,e,n){const r=pXe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?LM(n):DM(n)),r.property==="style"){let s=typeof n=="object"?n:uZe(t,String(n));return t.stylePropertyNameCase==="css"&&(s=dZe(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?dXe[r.property]||r.property:r.attribute,n]}}function uZe(t,e){try{return VXe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new Zs("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=due+"#cannot-parse-style-attribute",s}}function pue(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let i=-1,o;for(;++i<s.length;){const a=$H(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(i&&a.type==="Literal"),optional:!1}:a}r=o}else r=$H(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return g8.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Y1(t)}function Y1(t,e){const n=new Zs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=due+"#cannot-handle-mdx-estrees-without-createevaluater",n}function dZe(t){const e={};let n;for(n in t)g8.call(t,n)&&(e[hZe(n)]=t[n]);return e}function hZe(t){let e=t.replace(YXe,fZe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function fZe(t){return"-"+t.toLowerCase()}const SP={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},pZe={};function mZe(t,e){const n=pZe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return mue(t,r,s)}function mue(t,e,n){if(gZe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return XH(t.children,e,n)}return Array.isArray(t)?XH(t,e,n):""}function XH(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=mue(t[s],e,n);return r.join("")}function gZe(t){return!!(t&&typeof t=="object")}function Mc(t,e,n,r){const s=t.length;let i=0,o;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(e,0),t.splice(...o),i+=1e4,e+=1e4}function ma(t,e){return t.length>0?(Mc(t,t.length,0,e),t):e}const ZH={}.hasOwnProperty;function bZe(t){const e={};let n=-1;for(;++n<t.length;)yZe(e,t[n]);return e}function yZe(t,e){let n;for(n in e){const s=(ZH.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let o;if(i)for(o in i){ZH.call(s,o)||(s[o]=[]);const a=i[o];vZe(s[o],Array.isArray(a)?a:a?[a]:[])}}}function vZe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Mc(t,0,0,r)}function gue(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Dg(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const dc=Oh(/[A-Za-z]/),ol=Oh(/[\dA-Za-z]/),wZe=Oh(/[#-'*+\--9=?A-Z^-~]/);function tO(t){return t!==null&&(t<32||t===127)}const nO=Oh(/\d/),xZe=Oh(/[\dA-Fa-f]/),_Ze=Oh(/[!-/:-@[-`{-~]/);function Jt(t){return t!==null&&t<-2}function oo(t){return t!==null&&(t<0||t===32)}function Un(t){return t===-2||t===-1||t===32}const SZe=Oh(/\p{P}|\p{S}/u),EZe=Oh(/\s/);function Oh(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function fr(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(l){return Un(l)?(t.enter(n),a(l)):e(l)}function a(l){return Un(l)&&i++<s?(t.consume(l),a):(t.exit(n),e(l))}}const kZe={tokenize:CZe};function CZe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),fr(t,e,"linePrefix")}function s(a){return t.enter("paragraph"),i(a)}function i(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Jt(a)?(t.consume(a),t.exit("chunkText"),i):(t.consume(a),o)}}const AZe={tokenize:TZe},QH={tokenize:PZe};function TZe(t){const e=this,n=[];let r=0,s,i,o;return a;function a(w){if(r<n.length){const _=n[r];return e.containerState=_[1],t.attempt(_[0].continuation,l,c)(w)}return c(w)}function l(w){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&v();const _=e.events.length;let S=_,E;for(;S--;)if(e.events[S][0]==="exit"&&e.events[S][1].type==="chunkFlow"){E=e.events[S][1].end;break}b(r);let k=_;for(;k<e.events.length;)e.events[k][1].end={...E},k++;return Mc(e.events,S+1,0,e.events.slice(_)),e.events.length=k,c(w)}return a(w)}function c(w){if(r===n.length){if(!s)return h(w);if(s.currentConstruct&&s.currentConstruct.concrete)return p(w);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(QH,u,d)(w)}function u(w){return s&&v(),b(r),h(w)}function d(w){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,p(w)}function h(w){return e.containerState={},t.attempt(QH,f,p)(w)}function f(w){return r++,n.push([e.currentConstruct,e.containerState]),h(w)}function p(w){if(w===null){s&&v(),b(0),t.consume(w);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),m(w)}function m(w){if(w===null){g(t.exit("chunkFlow"),!0),b(0),t.consume(w);return}return Jt(w)?(t.consume(w),g(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(w),m)}function g(w,_){const S=e.sliceStream(w);if(_&&S.push(null),w.previous=i,i&&(i.next=w),i=w,s.defineSkip(w.start),s.write(S),e.parser.lazy[w.start.line]){let E=s.events.length;for(;E--;)if(s.events[E][1].start.offset<o&&(!s.events[E][1].end||s.events[E][1].end.offset>o))return;const k=e.events.length;let x=k,I,R;for(;x--;)if(e.events[x][0]==="exit"&&e.events[x][1].type==="chunkFlow"){if(I){R=e.events[x][1].end;break}I=!0}for(b(r),E=k;E<e.events.length;)e.events[E][1].end={...R},E++;Mc(e.events,x+1,0,e.events.slice(k)),e.events.length=E}}function b(w){let _=n.length;for(;_-- >w;){const S=n[_];e.containerState=S[1],S[0].exit.call(e,t)}n.length=w}function v(){s.write([null]),i=void 0,s=void 0,e.containerState._closeFlow=void 0}}function PZe(t,e,n){return fr(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ez(t){if(t===null||oo(t)||EZe(t))return 1;if(SZe(t))return 2}function v8(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const i=t[s].resolveAll;i&&!r.includes(i)&&(e=i(e,n),r.push(i))}return e}const rO={name:"attention",resolveAll:NZe,tokenize:IZe};function NZe(t,e){let n=-1,r,s,i,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},h={...t[n][1].start};tz(d,-l),tz(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},i={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=ma(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=ma(c,[["enter",s,e],["enter",o,e],["exit",o,e],["enter",i,e]]),c=ma(c,v8(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=ma(c,[["exit",i,e],["enter",a,e],["exit",a,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=ma(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,Mc(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function IZe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=ez(r);let i;return o;function o(l){return i=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===i)return t.consume(l),a;const c=t.exit("attentionSequence"),u=ez(l),d=!u||u===2&&s||n.includes(l),h=!s||s===2&&u||n.includes(r);return c._open=!!(i===42?d:d&&(s||!h)),c._close=!!(i===42?h:h&&(u||!d)),e(l)}}function tz(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const RZe={name:"autolink",tokenize:OZe};function OZe(t,e,n){let r=0;return s;function s(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(f){return dc(f)?(t.consume(f),o):f===64?n(f):c(f)}function o(f){return f===43||f===45||f===46||ol(f)?(r=1,a(f)):c(f)}function a(f){return f===58?(t.consume(f),r=0,l):(f===43||f===45||f===46||ol(f))&&r++<32?(t.consume(f),a):(r=0,c(f))}function l(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||tO(f)?n(f):(t.consume(f),l)}function c(f){return f===64?(t.consume(f),u):wZe(f)?(t.consume(f),c):n(f)}function u(f){return ol(f)?d(f):n(f)}function d(f){return f===46?(t.consume(f),r=0,u):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):h(f)}function h(f){if((f===45||ol(f))&&r++<63){const p=f===45?h:d;return t.consume(f),p}return n(f)}}const lT={partial:!0,tokenize:LZe};function LZe(t,e,n){return r;function r(i){return Un(i)?fr(t,s,"linePrefix")(i):s(i)}function s(i){return i===null||Jt(i)?e(i):n(i)}}const bue={continuation:{tokenize:MZe},exit:jZe,name:"blockQuote",tokenize:DZe};function DZe(t,e,n){const r=this;return s;function s(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),i}return n(o)}function i(o){return Un(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function MZe(t,e,n){const r=this;return s;function s(o){return Un(o)?fr(t,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return t.attempt(bue,e,n)(o)}}function jZe(t){t.exit("blockQuote")}const yue={name:"characterEscape",tokenize:FZe};function FZe(t,e,n){return r;function r(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),s}function s(i){return _Ze(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}const vue={name:"characterReference",tokenize:BZe};function BZe(t,e,n){const r=this;let s=0,i,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),i=31,o=ol,u(d))}function c(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,o=xZe,u):(t.enter("characterReferenceValue"),i=7,o=nO,u(d))}function u(d){if(d===59&&s){const h=t.exit("characterReferenceValue");return o===ol&&!qM(r.sliceSerialize(h))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&s++<i?(t.consume(d),u):n(d)}}const nz={partial:!0,tokenize:UZe},rz={concrete:!0,name:"codeFenced",tokenize:$Ze};function $Ze(t,e,n){const r=this,s={partial:!0,tokenize:S};let i=0,o=0,a;return l;function l(E){return c(E)}function c(E){const k=r.events[r.events.length-1];return i=k&&k[1].type==="linePrefix"?k[2].sliceSerialize(k[1],!0).length:0,a=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(E)}function u(E){return E===a?(o++,t.consume(E),u):o<3?n(E):(t.exit("codeFencedFenceSequence"),Un(E)?fr(t,d,"whitespace")(E):d(E))}function d(E){return E===null||Jt(E)?(t.exit("codeFencedFence"),r.interrupt?e(E):t.check(nz,m,_)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(E))}function h(E){return E===null||Jt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(E)):Un(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),fr(t,f,"whitespace")(E)):E===96&&E===a?n(E):(t.consume(E),h)}function f(E){return E===null||Jt(E)?d(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(E))}function p(E){return E===null||Jt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(E)):E===96&&E===a?n(E):(t.consume(E),p)}function m(E){return t.attempt(s,_,g)(E)}function g(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),b}function b(E){return i>0&&Un(E)?fr(t,v,"linePrefix",i+1)(E):v(E)}function v(E){return E===null||Jt(E)?t.check(nz,m,_)(E):(t.enter("codeFlowValue"),w(E))}function w(E){return E===null||Jt(E)?(t.exit("codeFlowValue"),v(E)):(t.consume(E),w)}function _(E){return t.exit("codeFenced"),e(E)}function S(E,k,x){let I=0;return R;function R(U){return E.enter("lineEnding"),E.consume(U),E.exit("lineEnding"),C}function C(U){return E.enter("codeFencedFence"),Un(U)?fr(E,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):T(U)}function T(U){return U===a?(E.enter("codeFencedFenceSequence"),O(U)):x(U)}function O(U){return U===a?(I++,E.consume(U),O):I>=o?(E.exit("codeFencedFenceSequence"),Un(U)?fr(E,P,"whitespace")(U):P(U)):x(U)}function P(U){return U===null||Jt(U)?(E.exit("codeFencedFence"),k(U)):x(U)}}}function UZe(t,e,n){const r=this;return s;function s(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i)}function i(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const EP={name:"codeIndented",tokenize:zZe},HZe={partial:!0,tokenize:VZe};function zZe(t,e,n){const r=this;return s;function s(c){return t.enter("codeIndented"),fr(t,i,"linePrefix",5)(c)}function i(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Jt(c)?t.attempt(HZe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Jt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function VZe(t,e,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):Jt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):fr(t,i,"linePrefix",5)(o)}function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Jt(o)?s(o):n(o)}}const WZe={name:"codeText",previous:qZe,resolve:GZe,tokenize:KZe};function GZe(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function qZe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function KZe(t,e,n){let r=0,s,i;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),l):d===96?(i=t.enter("codeTextSequence"),s=0,u(d)):Jt(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||Jt(d)?(t.exit("codeTextData"),l(d)):(t.consume(d),c)}function u(d){return d===96?(t.consume(d),s++,u):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(i.type="codeTextData",c(d))}}class YZe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&wy(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),wy(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),wy(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);wy(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);wy(this.left,n.reverse())}}}function wy(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function wue(t){const e={};let n=-1,r,s,i,o,a,l,c;const u=new YZe(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,i=0,i<l.length&&l[i][1].type==="lineEndingBlank"&&(i+=2),i<l.length&&l[i][1].type==="content"))for(;++i<l.length&&l[i][1].type!=="content";)l[i][1].type==="chunkText"&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,JZe(u,n)),n=e[n],c=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(o=u.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(u.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(r[1].end={...u.get(s)[1].start},a=u.slice(s,n),a.unshift(r),u.splice(s,n-s+1,a))}}return Mc(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function JZe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const i=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,d,h=-1,f=n,p=0,m=0;const g=[m];for(;f;){for(;t.get(++s)[1]!==f;);i.push(s),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(m=h+1,g.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):g.pop(),h=g.length;h--;){const b=a.slice(g[h],g[h+1]),v=i.pop();l.push([v,v+b.length-1]),t.splice(v,2,b)}for(l.reverse(),h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}const XZe={resolve:QZe,tokenize:eQe},ZZe={partial:!0,tokenize:tQe};function QZe(t){return wue(t),t}function eQe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(a)}function s(a){return a===null?i(a):Jt(a)?t.check(ZZe,o,i)(a):(t.consume(a),s)}function i(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function tQe(t,e,n){const r=this;return s;function s(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),fr(t,i,"linePrefix")}function i(o){if(o===null||Jt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function xue(t,e,n,r,s,i,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(b){return b===60?(t.enter(r),t.enter(s),t.enter(i),t.consume(b),t.exit(i),h):b===null||b===32||b===41||tO(b)?n(b):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),m(b))}function h(b){return b===62?(t.enter(i),t.consume(b),t.exit(i),t.exit(s),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===62?(t.exit("chunkString"),t.exit(a),h(b)):b===null||b===60||Jt(b)?n(b):(t.consume(b),b===92?p:f)}function p(b){return b===60||b===62||b===92?(t.consume(b),f):f(b)}function m(b){return!u&&(b===null||b===41||oo(b))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(b)):u<c&&b===40?(t.consume(b),u++,m):b===41?(t.consume(b),u--,m):b===null||b===32||b===40||tO(b)?n(b):(t.consume(b),b===92?g:m)}function g(b){return b===40||b===41||b===92?(t.consume(b),m):m(b)}}function _ue(t,e,n,r,s,i){const o=this;let a=0,l;return c;function c(f){return t.enter(r),t.enter(s),t.consume(f),t.exit(s),t.enter(i),u}function u(f){return a>999||f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(t.exit(i),t.enter(s),t.consume(f),t.exit(s),t.exit(r),e):Jt(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||Jt(f)||a++>999?(t.exit("chunkString"),u(f)):(t.consume(f),l||(l=!Un(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(t.consume(f),a++,d):d(f)}}function Sue(t,e,n,r,s,i){let o;return a;function a(h){return h===34||h===39||h===40?(t.enter(r),t.enter(s),t.consume(h),t.exit(s),o=h===40?41:h,l):n(h)}function l(h){return h===o?(t.enter(s),t.consume(h),t.exit(s),t.exit(r),e):(t.enter(i),c(h))}function c(h){return h===o?(t.exit(i),l(o)):h===null?n(h):Jt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),fr(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||Jt(h)?(t.exit("chunkString"),c(h)):(t.consume(h),h===92?d:u)}function d(h){return h===o||h===92?(t.consume(h),u):u(h)}}function Bv(t,e){let n;return r;function r(s){return Jt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Un(s)?fr(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const nQe={name:"definition",tokenize:sQe},rQe={partial:!0,tokenize:iQe};function sQe(t,e,n){const r=this;let s;return i;function i(f){return t.enter("definition"),o(f)}function o(f){return _ue.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return s=Dg(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),l):n(f)}function l(f){return oo(f)?Bv(t,c)(f):c(f)}function c(f){return xue(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return t.attempt(rQe,d,d)(f)}function d(f){return Un(f)?fr(t,h,"whitespace")(f):h(f)}function h(f){return f===null||Jt(f)?(t.exit("definition"),r.parser.defined.push(s),e(f)):n(f)}}function iQe(t,e,n){return r;function r(a){return oo(a)?Bv(t,s)(a):n(a)}function s(a){return Sue(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function i(a){return Un(a)?fr(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Jt(a)?e(a):n(a)}}const oQe={name:"hardBreakEscape",tokenize:aQe};function aQe(t,e,n){return r;function r(i){return t.enter("hardBreakEscape"),t.consume(i),s}function s(i){return Jt(i)?(t.exit("hardBreakEscape"),e(i)):n(i)}}const lQe={name:"headingAtx",resolve:cQe,tokenize:uQe};function cQe(t,e){let n=t.length-2,r=3,s,i;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},i={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Mc(t,r,n-r+1,[["enter",s,e],["enter",i,e],["exit",i,e],["exit",s,e]])),t}function uQe(t,e,n){let r=0;return s;function s(u){return t.enter("atxHeading"),i(u)}function i(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||oo(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||Jt(u)?(t.exit("atxHeading"),e(u)):Un(u)?fr(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||oo(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const dQe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sz=["pre","script","style","textarea"],hQe={concrete:!0,name:"htmlFlow",resolveTo:mQe,tokenize:gQe},fQe={partial:!0,tokenize:yQe},pQe={partial:!0,tokenize:bQe};function mQe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function gQe(t,e,n){const r=this;let s,i,o,a,l;return c;function c(j){return u(j)}function u(j){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(j),d}function d(j){return j===33?(t.consume(j),h):j===47?(t.consume(j),i=!0,m):j===63?(t.consume(j),s=3,r.interrupt?e:M):dc(j)?(t.consume(j),o=String.fromCharCode(j),g):n(j)}function h(j){return j===45?(t.consume(j),s=2,f):j===91?(t.consume(j),s=5,a=0,p):dc(j)?(t.consume(j),s=4,r.interrupt?e:M):n(j)}function f(j){return j===45?(t.consume(j),r.interrupt?e:M):n(j)}function p(j){const W="CDATA[";return j===W.charCodeAt(a++)?(t.consume(j),a===W.length?r.interrupt?e:T:p):n(j)}function m(j){return dc(j)?(t.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||oo(j)){const W=j===47,q=o.toLowerCase();return!W&&!i&&sz.includes(q)?(s=1,r.interrupt?e(j):T(j)):dQe.includes(o.toLowerCase())?(s=6,W?(t.consume(j),b):r.interrupt?e(j):T(j)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):i?v(j):w(j))}return j===45||ol(j)?(t.consume(j),o+=String.fromCharCode(j),g):n(j)}function b(j){return j===62?(t.consume(j),r.interrupt?e:T):n(j)}function v(j){return Un(j)?(t.consume(j),v):R(j)}function w(j){return j===47?(t.consume(j),R):j===58||j===95||dc(j)?(t.consume(j),_):Un(j)?(t.consume(j),w):R(j)}function _(j){return j===45||j===46||j===58||j===95||ol(j)?(t.consume(j),_):S(j)}function S(j){return j===61?(t.consume(j),E):Un(j)?(t.consume(j),S):w(j)}function E(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),l=j,k):Un(j)?(t.consume(j),E):x(j)}function k(j){return j===l?(t.consume(j),l=null,I):j===null||Jt(j)?n(j):(t.consume(j),k)}function x(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||oo(j)?S(j):(t.consume(j),x)}function I(j){return j===47||j===62||Un(j)?w(j):n(j)}function R(j){return j===62?(t.consume(j),C):n(j)}function C(j){return j===null||Jt(j)?T(j):Un(j)?(t.consume(j),C):n(j)}function T(j){return j===45&&s===2?(t.consume(j),ee):j===60&&s===1?(t.consume(j),X):j===62&&s===4?(t.consume(j),G):j===63&&s===3?(t.consume(j),M):j===93&&s===5?(t.consume(j),F):Jt(j)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(fQe,D,O)(j)):j===null||Jt(j)?(t.exit("htmlFlowData"),O(j)):(t.consume(j),T)}function O(j){return t.check(pQe,P,D)(j)}function P(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),U}function U(j){return j===null||Jt(j)?O(j):(t.enter("htmlFlowData"),T(j))}function ee(j){return j===45?(t.consume(j),M):T(j)}function X(j){return j===47?(t.consume(j),o="",Z):T(j)}function Z(j){if(j===62){const W=o.toLowerCase();return sz.includes(W)?(t.consume(j),G):T(j)}return dc(j)&&o.length<8?(t.consume(j),o+=String.fromCharCode(j),Z):T(j)}function F(j){return j===93?(t.consume(j),M):T(j)}function M(j){return j===62?(t.consume(j),G):j===45&&s===2?(t.consume(j),M):T(j)}function G(j){return j===null||Jt(j)?(t.exit("htmlFlowData"),D(j)):(t.consume(j),G)}function D(j){return t.exit("htmlFlow"),e(j)}}function bQe(t,e,n){const r=this;return s;function s(o){return Jt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):n(o)}function i(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function yQe(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(lT,e,n)}}const vQe={name:"htmlText",tokenize:wQe};function wQe(t,e,n){const r=this;let s,i,o;return a;function a(M){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(M),l}function l(M){return M===33?(t.consume(M),c):M===47?(t.consume(M),S):M===63?(t.consume(M),w):dc(M)?(t.consume(M),x):n(M)}function c(M){return M===45?(t.consume(M),u):M===91?(t.consume(M),i=0,p):dc(M)?(t.consume(M),v):n(M)}function u(M){return M===45?(t.consume(M),f):n(M)}function d(M){return M===null?n(M):M===45?(t.consume(M),h):Jt(M)?(o=d,X(M)):(t.consume(M),d)}function h(M){return M===45?(t.consume(M),f):d(M)}function f(M){return M===62?ee(M):M===45?h(M):d(M)}function p(M){const G="CDATA[";return M===G.charCodeAt(i++)?(t.consume(M),i===G.length?m:p):n(M)}function m(M){return M===null?n(M):M===93?(t.consume(M),g):Jt(M)?(o=m,X(M)):(t.consume(M),m)}function g(M){return M===93?(t.consume(M),b):m(M)}function b(M){return M===62?ee(M):M===93?(t.consume(M),b):m(M)}function v(M){return M===null||M===62?ee(M):Jt(M)?(o=v,X(M)):(t.consume(M),v)}function w(M){return M===null?n(M):M===63?(t.consume(M),_):Jt(M)?(o=w,X(M)):(t.consume(M),w)}function _(M){return M===62?ee(M):w(M)}function S(M){return dc(M)?(t.consume(M),E):n(M)}function E(M){return M===45||ol(M)?(t.consume(M),E):k(M)}function k(M){return Jt(M)?(o=k,X(M)):Un(M)?(t.consume(M),k):ee(M)}function x(M){return M===45||ol(M)?(t.consume(M),x):M===47||M===62||oo(M)?I(M):n(M)}function I(M){return M===47?(t.consume(M),ee):M===58||M===95||dc(M)?(t.consume(M),R):Jt(M)?(o=I,X(M)):Un(M)?(t.consume(M),I):ee(M)}function R(M){return M===45||M===46||M===58||M===95||ol(M)?(t.consume(M),R):C(M)}function C(M){return M===61?(t.consume(M),T):Jt(M)?(o=C,X(M)):Un(M)?(t.consume(M),C):I(M)}function T(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(t.consume(M),s=M,O):Jt(M)?(o=T,X(M)):Un(M)?(t.consume(M),T):(t.consume(M),P)}function O(M){return M===s?(t.consume(M),s=void 0,U):M===null?n(M):Jt(M)?(o=O,X(M)):(t.consume(M),O)}function P(M){return M===null||M===34||M===39||M===60||M===61||M===96?n(M):M===47||M===62||oo(M)?I(M):(t.consume(M),P)}function U(M){return M===47||M===62||oo(M)?I(M):n(M)}function ee(M){return M===62?(t.consume(M),t.exit("htmlTextData"),t.exit("htmlText"),e):n(M)}function X(M){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),Z}function Z(M){return Un(M)?fr(t,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):F(M)}function F(M){return t.enter("htmlTextData"),o(M)}}const w8={name:"labelEnd",resolveAll:EQe,resolveTo:kQe,tokenize:CQe},xQe={tokenize:AQe},_Qe={tokenize:TQe},SQe={tokenize:PQe};function EQe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&Mc(t,0,t.length,n),t}function kQe(t,e){let n=t.length,r=0,s,i,o,a;for(;n--;)if(s=t[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const l={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[i][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[i+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=ma(a,t.slice(i+1,i+r+3)),a=ma(a,[["enter",u,e]]),a=ma(a,v8(e.parser.constructs.insideSpan.null,t.slice(i+r+4,o-3),e)),a=ma(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=ma(a,t.slice(o+1)),a=ma(a,[["exit",l,e]]),Mc(t,i,t.length,a),t}function CQe(t,e,n){const r=this;let s=r.events.length,i,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return a;function a(h){return i?i._inactive?d(h):(o=r.parser.defined.includes(Dg(r.sliceSerialize({start:i.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),l):n(h)}function l(h){return h===40?t.attempt(xQe,u,o?u:d)(h):h===91?t.attempt(_Qe,u,o?c:d)(h):o?u(h):d(h)}function c(h){return t.attempt(SQe,u,d)(h)}function u(h){return e(h)}function d(h){return i._balanced=!0,n(h)}}function AQe(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),s}function s(d){return oo(d)?Bv(t,i)(d):i(d)}function i(d){return d===41?u(d):xue(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return oo(d)?Bv(t,l)(d):u(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?Sue(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return oo(d)?Bv(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function TQe(t,e,n){const r=this;return s;function s(a){return _ue.call(r,t,i,o,"reference","referenceMarker","referenceString")(a)}function i(a){return r.parser.defined.includes(Dg(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function PQe(t,e,n){return r;function r(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),s}function s(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}const NQe={name:"labelStartImage",resolveAll:w8.resolveAll,tokenize:IQe};function IQe(t,e,n){const r=this;return s;function s(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),i}function i(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const RQe={name:"labelStartLink",resolveAll:w8.resolveAll,tokenize:OQe};function OQe(t,e,n){const r=this;return s;function s(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const kP={name:"lineEnding",tokenize:LQe};function LQe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),fr(t,e,"linePrefix")}}const KS={name:"thematicBreak",tokenize:DQe};function DQe(t,e,n){let r=0,s;return i;function i(c){return t.enter("thematicBreak"),o(c)}function o(c){return s=c,a(c)}function a(c){return c===s?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Jt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===s?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Un(c)?fr(t,a,"whitespace")(c):a(c))}}const Xi={continuation:{tokenize:BQe},exit:UQe,name:"list",tokenize:FQe},MQe={partial:!0,tokenize:HQe},jQe={partial:!0,tokenize:$Qe};function FQe(t,e,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return a;function a(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:nO(f)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(KS,n,c)(f):c(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(f)}return n(f)}function l(f){return nO(f)&&++o<10?(t.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),c(f)):n(f)}function c(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(lT,r.interrupt?n:u,t.attempt(MQe,h,d))}function u(f){return r.containerState.initialBlankLine=!0,i++,h(f)}function d(f){return Un(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=i+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function BQe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(lT,s,i);function s(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,fr(t,e,"listItemIndent",r.containerState.size+1)(a)}function i(a){return r.containerState.furtherBlankLines||!Un(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(jQe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,fr(t,t.attempt(Xi,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function $Qe(t,e,n){const r=this;return fr(t,s,"listItemIndent",r.containerState.size+1);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(i):n(i)}}function UQe(t){t.exit(this.containerState.type)}function HQe(t,e,n){const r=this;return fr(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=r.events[r.events.length-1];return!Un(i)&&o&&o[1].type==="listItemPrefixWhitespace"?e(i):n(i)}}const iz={name:"setextUnderline",resolveTo:zQe,tokenize:VQe};function zQe(t,e){let n=t.length,r,s,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",i?(t.splice(s,0,["enter",o,e]),t.splice(i+1,0,["exit",t[r][1],e]),t[r][1].end={...t[i][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function VQe(t,e,n){const r=this;let s;return i;function i(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),s=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===s?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Un(c)?fr(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Jt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const WQe={tokenize:GQe};function GQe(t){const e=this,n=t.attempt(lT,r,t.attempt(this.parser.constructs.flowInitial,s,fr(t,t.attempt(this.parser.constructs.flow,s,t.attempt(XZe,s)),"linePrefix")));return n;function r(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const qQe={resolveAll:kue()},KQe=Eue("string"),YQe=Eue("text");function Eue(t){return{resolveAll:kue(t==="text"?JQe:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],i=n.attempt(s,o,a);return o;function o(u){return c(u)?i(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),i(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const d=s[u];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function kue(t){return e;function e(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return t?t(n,r):n}}function JQe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let i=s.length,o=-1,a=0,l;for(;i--;){const c=s[i];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){i++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:r.start._bufferIndex+o,_index:r.start._index+i,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const XQe={42:Xi,43:Xi,45:Xi,48:Xi,49:Xi,50:Xi,51:Xi,52:Xi,53:Xi,54:Xi,55:Xi,56:Xi,57:Xi,62:bue},ZQe={91:nQe},QQe={[-2]:EP,[-1]:EP,32:EP},eet={35:lQe,42:KS,45:[iz,KS],60:hQe,61:iz,95:KS,96:rz,126:rz},tet={38:vue,92:yue},net={[-5]:kP,[-4]:kP,[-3]:kP,33:NQe,38:vue,42:rO,60:[RZe,vQe],91:RQe,92:[oQe,yue],93:w8,95:rO,96:WZe},ret={null:[rO,qQe]},set={null:[42,95]},iet={null:[]},oet=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:set,contentInitial:ZQe,disable:iet,document:XQe,flow:eet,flowInitial:QQe,insideSpan:ret,string:tet,text:net},Symbol.toStringTag,{value:"Module"}));function aet(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let o=[],a=[];const l={attempt:k(S),check:k(E),consume:v,enter:w,exit:_,interrupt:k(E,{interrupt:!0})},c={code:null,containerState:{},defineSkip:m,events:[],now:p,parser:t,previous:null,sliceSerialize:h,sliceStream:f,write:d};let u=e.tokenize.call(c,l);return e.resolveAll&&i.push(e),c;function d(C){return o=ma(o,C),g(),o[o.length-1]!==null?[]:(x(e,0),c.events=v8(i,c.events,c),c.events)}function h(C,T){return uet(f(C),T)}function f(C){return cet(o,C)}function p(){const{_bufferIndex:C,_index:T,line:O,column:P,offset:U}=r;return{_bufferIndex:C,_index:T,line:O,column:P,offset:U}}function m(C){s[C.line]=C.column,R()}function g(){let C;for(;r._index<o.length;){const T=o[r._index];if(typeof T=="string")for(C=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===C&&r._bufferIndex<T.length;)b(T.charCodeAt(r._bufferIndex));else b(T)}}function b(C){u=u(C)}function v(C){Jt(C)?(r.line++,r.column=1,r.offset+=C===-3?2:1,R()):C!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=C}function w(C,T){const O=T||{};return O.type=C,O.start=p(),c.events.push(["enter",O,c]),a.push(O),O}function _(C){const T=a.pop();return T.end=p(),c.events.push(["exit",T,c]),T}function S(C,T){x(C,T.from)}function E(C,T){T.restore()}function k(C,T){return O;function O(P,U,ee){let X,Z,F,M;return Array.isArray(P)?D(P):"tokenize"in P?D([P]):G(P);function G(ne){return te;function te(Y){const de=Y!==null&&ne[Y],Se=Y!==null&&ne.null,xe=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(Se)?Se:Se?[Se]:[]];return D(xe)(Y)}}function D(ne){return X=ne,Z=0,ne.length===0?ee:j(ne[Z])}function j(ne){return te;function te(Y){return M=I(),F=ne,ne.partial||(c.currentConstruct=ne),ne.name&&c.parser.constructs.disable.null.includes(ne.name)?q():ne.tokenize.call(T?Object.assign(Object.create(c),T):c,l,W,q)(Y)}}function W(ne){return C(F,M),U}function q(ne){return M.restore(),++Z<X.length?j(X[Z]):ee}}}function x(C,T){C.resolveAll&&!i.includes(C)&&i.push(C),C.resolve&&Mc(c.events,T,c.events.length-T,C.resolve(c.events.slice(T),c)),C.resolveTo&&(c.events=C.resolveTo(c.events,c))}function I(){const C=p(),T=c.previous,O=c.currentConstruct,P=c.events.length,U=Array.from(a);return{from:P,restore:ee};function ee(){r=C,c.previous=T,c.currentConstruct=O,c.events.length=P,a=U,R()}}function R(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function cet(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,i=e.end._bufferIndex;let o;if(n===s)o=[t[n].slice(r,i)];else{if(o=t.slice(n,s),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}i>0&&o.push(t[s].slice(0,i))}return o}function uet(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const i=t[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,r.push(o)}return r.join("")}function det(t){const r={constructs:bZe([oet,...(t||{}).extensions||[]]),content:s(kZe),defined:[],document:s(AZe),flow:s(WQe),lazy:{},string:s(KQe),text:s(YQe)};return r;function s(i){return o;function o(a){return aet(r,i,a)}}}function het(t){for(;!wue(t););return t}const oz=/[\0\t\n\r]/g;function fet(){let t=1,e="",n=!0,r;return s;function s(i,o,a){const l=[];let c,u,d,h,f;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),d=0,e="",n&&(i.charCodeAt(0)===65279&&d++,n=void 0);d<i.length;){if(oz.lastIndex=d,c=oz.exec(i),h=c&&c.index!==void 0?c.index:i.length,f=i.charCodeAt(h),!c){e=i.slice(d);break}if(f===10&&d===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<h&&(l.push(i.slice(d,h)),t+=h-d),f){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}d=h+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const pet=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function met(t){return t.replace(pet,get)}function get(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return gue(n.slice(i?2:1),i?16:10)}return qM(n)||t}function YS(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?az(t.position):"start"in t||"end"in t?az(t):"line"in t||"column"in t?sO(t):""}function sO(t){return lz(t&&t.line)+":"+lz(t&&t.column)}function az(t){return sO(t&&t.start)+"-"+sO(t&&t.end)}function lz(t){return t&&typeof t=="number"?t:1}const Cue={}.hasOwnProperty;function bet(t,e,n){return typeof e!="string"&&(n=e,e=void 0),yet(n)(het(det(n).document().write(fet()(t,e,!0))))}function yet(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(fe),autolinkProtocol:I,autolinkEmail:I,atxHeading:i(ge),blockQuote:i(Se),characterEscape:I,characterReference:I,codeFenced:i(xe),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(xe,o),codeText:i(Ae,o),codeTextData:I,data:I,codeFlowValue:I,definition:i(Pe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(K),hardBreakEscape:i(re),hardBreakTrailing:i(re),htmlFlow:i(le,o),htmlFlowData:I,htmlText:i(le,o),htmlTextData:I,image:i(se),label:o,link:i(fe),listItem:i(Ie),listItemValue:h,listOrdered:i(Ce,d),listUnordered:i(Ce),paragraph:i(we),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(ge),strong:i(Ue),thematicBreak:i(Be)},exit:{atxHeading:l(),atxHeadingSequence:S,autolink:l(),autolinkEmail:de,autolinkProtocol:Y,blockQuote:l(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:q,characterReferenceMarkerNumeric:q,characterReferenceValue:ne,characterReference:te,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:R,codeIndented:l(b),codeText:l(U),codeTextData:R,data:R,definition:l(),definitionDestinationString:_,definitionLabelString:v,definitionTitleString:w,emphasis:l(),hardBreakEscape:l(T),hardBreakTrailing:l(T),htmlFlow:l(O),htmlFlowData:R,htmlText:l(P),htmlTextData:R,image:l(X),label:F,labelText:Z,lineEnding:C,link:l(ee),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:W,resourceDestinationString:M,resourceTitleString:G,resource:D,setextHeading:l(x),setextHeadingLineSequence:k,setextHeadingText:E,strong:l(),thematicBreak:l()}};Aue(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ke){let Je={type:"root",children:[]};const Xe={stack:[Je],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},nt=[];let ie=-1;for(;++ie<ke.length;)if(ke[ie][1].type==="listOrdered"||ke[ie][1].type==="listUnordered")if(ke[ie][0]==="enter")nt.push(ie);else{const z=nt.pop();ie=s(ke,z,ie)}for(ie=-1;++ie<ke.length;){const z=e[ke[ie][0]];Cue.call(z,ke[ie][1].type)&&z[ke[ie][1].type].call(Object.assign({sliceSerialize:ke[ie][2].sliceSerialize},Xe),ke[ie][1])}if(Xe.tokenStack.length>0){const z=Xe.tokenStack[Xe.tokenStack.length-1];(z[1]||cz).call(Xe,void 0,z[0])}for(Je.position={start:vd(ke.length>0?ke[0][1].start:{line:1,column:1,offset:0}),end:vd(ke.length>0?ke[ke.length-2][1].end:{line:1,column:1,offset:0})},ie=-1;++ie<e.transforms.length;)Je=e.transforms[ie](Je)||Je;return Je}function s(ke,Je,Xe){let nt=Je-1,ie=-1,z=!1,J,pe,Oe,He;for(;++nt<=Xe;){const Ge=ke[nt];switch(Ge[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ge[0]==="enter"?ie++:ie--,He=void 0;break}case"lineEndingBlank":{Ge[0]==="enter"&&(J&&!He&&!ie&&!Oe&&(Oe=nt),He=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:He=void 0}if(!ie&&Ge[0]==="enter"&&Ge[1].type==="listItemPrefix"||ie===-1&&Ge[0]==="exit"&&(Ge[1].type==="listUnordered"||Ge[1].type==="listOrdered")){if(J){let $t=nt;for(pe=void 0;$t--;){const Lt=ke[$t];if(Lt[1].type==="lineEnding"||Lt[1].type==="lineEndingBlank"){if(Lt[0]==="exit")continue;pe&&(ke[pe][1].type="lineEndingBlank",z=!0),Lt[1].type="lineEnding",pe=$t}else if(!(Lt[1].type==="linePrefix"||Lt[1].type==="blockQuotePrefix"||Lt[1].type==="blockQuotePrefixWhitespace"||Lt[1].type==="blockQuoteMarker"||Lt[1].type==="listItemIndent"))break}Oe&&(!pe||Oe<pe)&&(J._spread=!0),J.end=Object.assign({},pe?ke[pe][1].start:Ge[1].end),ke.splice(pe||nt,0,["exit",J,Ge[2]]),nt++,Xe++}if(Ge[1].type==="listItemPrefix"){const $t={type:"listItem",_spread:!1,start:Object.assign({},Ge[1].start),end:void 0};J=$t,ke.splice(nt,0,["enter",$t,Ge[2]]),nt++,Xe++,Oe=void 0,He=!0}}}return ke[Je][1]._spread=z,Xe}function i(ke,Je){return Xe;function Xe(nt){a.call(this,ke(nt),nt),Je&&Je.call(this,nt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ke,Je,Xe){this.stack[this.stack.length-1].children.push(ke),this.stack.push(ke),this.tokenStack.push([Je,Xe||void 0]),ke.position={start:vd(Je.start),end:void 0}}function l(ke){return Je;function Je(Xe){ke&&ke.call(this,Xe),c.call(this,Xe)}}function c(ke,Je){const Xe=this.stack.pop(),nt=this.tokenStack.pop();if(nt)nt[0].type!==ke.type&&(Je?Je.call(this,ke,nt[0]):(nt[1]||cz).call(this,ke,nt[0]));else throw new Error("Cannot close `"+ke.type+"` ("+YS({start:ke.start,end:ke.end})+"): its not open");Xe.position.end=vd(ke.end)}function u(){return mZe(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(ke){if(this.data.expectingFirstListItemValue){const Je=this.stack[this.stack.length-2];Je.start=Number.parseInt(this.sliceSerialize(ke),10),this.data.expectingFirstListItemValue=void 0}}function f(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.lang=ke}function p(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.meta=ke}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.value=ke.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.value=ke.replace(/(\r?\n|\r)$/g,"")}function v(ke){const Je=this.resume(),Xe=this.stack[this.stack.length-1];Xe.label=Je,Xe.identifier=Dg(this.sliceSerialize(ke)).toLowerCase()}function w(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.title=ke}function _(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.url=ke}function S(ke){const Je=this.stack[this.stack.length-1];if(!Je.depth){const Xe=this.sliceSerialize(ke).length;Je.depth=Xe}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function k(ke){const Je=this.stack[this.stack.length-1];Je.depth=this.sliceSerialize(ke).codePointAt(0)===61?1:2}function x(){this.data.setextHeadingSlurpLineEnding=void 0}function I(ke){const Xe=this.stack[this.stack.length-1].children;let nt=Xe[Xe.length-1];(!nt||nt.type!=="text")&&(nt=Fe(),nt.position={start:vd(ke.start),end:void 0},Xe.push(nt)),this.stack.push(nt)}function R(ke){const Je=this.stack.pop();Je.value+=this.sliceSerialize(ke),Je.position.end=vd(ke.end)}function C(ke){const Je=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Xe=Je.children[Je.children.length-1];Xe.position.end=vd(ke.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Je.type)&&(I.call(this,ke),R.call(this,ke))}function T(){this.data.atHardBreak=!0}function O(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.value=ke}function P(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.value=ke}function U(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.value=ke}function ee(){const ke=this.stack[this.stack.length-1];if(this.data.inReference){const Je=this.data.referenceType||"shortcut";ke.type+="Reference",ke.referenceType=Je,delete ke.url,delete ke.title}else delete ke.identifier,delete ke.label;this.data.referenceType=void 0}function X(){const ke=this.stack[this.stack.length-1];if(this.data.inReference){const Je=this.data.referenceType||"shortcut";ke.type+="Reference",ke.referenceType=Je,delete ke.url,delete ke.title}else delete ke.identifier,delete ke.label;this.data.referenceType=void 0}function Z(ke){const Je=this.sliceSerialize(ke),Xe=this.stack[this.stack.length-2];Xe.label=met(Je),Xe.identifier=Dg(Je).toLowerCase()}function F(){const ke=this.stack[this.stack.length-1],Je=this.resume(),Xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Xe.type==="link"){const nt=ke.children;Xe.children=nt}else Xe.alt=Je}function M(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.url=ke}function G(){const ke=this.resume(),Je=this.stack[this.stack.length-1];Je.title=ke}function D(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function W(ke){const Je=this.resume(),Xe=this.stack[this.stack.length-1];Xe.label=Je,Xe.identifier=Dg(this.sliceSerialize(ke)).toLowerCase(),this.data.referenceType="full"}function q(ke){this.data.characterReferenceType=ke.type}function ne(ke){const Je=this.sliceSerialize(ke),Xe=this.data.characterReferenceType;let nt;Xe?(nt=gue(Je,Xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):nt=qM(Je);const ie=this.stack[this.stack.length-1];ie.value+=nt}function te(ke){const Je=this.stack.pop();Je.position.end=vd(ke.end)}function Y(ke){R.call(this,ke);const Je=this.stack[this.stack.length-1];Je.url=this.sliceSerialize(ke)}function de(ke){R.call(this,ke);const Je=this.stack[this.stack.length-1];Je.url="mailto:"+this.sliceSerialize(ke)}function Se(){return{type:"blockquote",children:[]}}function xe(){return{type:"code",lang:null,meta:null,value:""}}function Ae(){return{type:"inlineCode",value:""}}function Pe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function K(){return{type:"emphasis",children:[]}}function ge(){return{type:"heading",depth:0,children:[]}}function re(){return{type:"break"}}function le(){return{type:"html",value:""}}function se(){return{type:"image",title:null,url:"",alt:null}}function fe(){return{type:"link",title:null,url:"",children:[]}}function Ce(ke){return{type:"list",ordered:ke.type==="listOrdered",start:null,spread:ke._spread,children:[]}}function Ie(ke){return{type:"listItem",spread:ke._spread,checked:null,children:[]}}function we(){return{type:"paragraph",children:[]}}function Ue(){return{type:"strong",children:[]}}function Fe(){return{type:"text",value:""}}function Be(){return{type:"thematicBreak"}}}function vd(t){return{line:t.line,column:t.column,offset:t.offset}}function Aue(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?Aue(t,r):vet(t,r)}}function vet(t,e){let n;for(n in e)if(Cue.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function cz(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+YS({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+YS({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+YS({start:e.start,end:e.end})+") is still open")}function wet(t){const e=this;e.parser=n;function n(r){return bet(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function xet(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function _et(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Eet(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function ket(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Cet(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const uz=Aet(/[\dA-Za-z]/);function Aet(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function lb(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const i=t.charCodeAt(n);let o="";if(i===37&&uz(t.charCodeAt(n+1))&&uz(t.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const a=t.charCodeAt(n+1);i<56320&&a>56319&&a<57344?(o=String.fromCharCode(i,a),s=1):o=""}else o=String.fromCharCode(i);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function Tet(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=lb(r.toLowerCase()),i=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=i+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function Pet(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Net(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Tue(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function Iet(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Tue(t,e);const s={src:lb(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,i),t.applyData(e,i)}function Ret(t,e){const n={src:lb(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function Oet(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function Let(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Tue(t,e);const s={href:lb(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function Det(t,e){const n={href:lb(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Met(t,e,n){const r=t.all(e),s=n?jet(n):Pue(e),i={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(s||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!s?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(s||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:i,children:o};return t.patch(e,c),t.applyData(e,c)}function jet(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=Pue(n[r])}return e}function Pue(t){const e=t.spread;return e??t.children.length>1}function Fet(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,i),t.applyData(e,i)}function Bet(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function $et(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Uet(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Nue=Rue("end"),Iue=Rue("start");function Rue(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Het(t){const e=Iue(t),n=Nue(t);if(e&&n)return{start:e,end:n}}function zet(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=Iue(e.children[1]),l=Nue(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),s.push(o)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function Vet(t,e,n){const r=n?n.children:void 0,i=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const d=e.children[l],h={},f=o?o[l]:void 0;f&&(h.align=f);let p={type:"element",tagName:i,properties:h,children:[]};d&&(p.children=t.all(d),t.patch(d,p),p=t.applyData(d,p)),c.push(p)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function Wet(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const dz=9,hz=32;function Get(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const i=[];for(;r;)i.push(fz(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return i.push(fz(e.slice(s),s>0,!1)),i.join("")}function fz(t,e,n){let r=0,s=t.length;if(e){let i=t.codePointAt(r);for(;i===dz||i===hz;)r++,i=t.codePointAt(r)}if(n){let i=t.codePointAt(s-1);for(;i===dz||i===hz;)s--,i=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function qet(t,e){const n={type:"text",value:Get(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Ket(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Yet={blockquote:xet,break:_et,code:Eet,delete:ket,emphasis:Cet,footnoteReference:Tet,heading:Pet,html:Net,imageReference:Iet,image:Ret,inlineCode:Oet,linkReference:Let,link:Det,listItem:Met,list:Fet,paragraph:Bet,root:$et,strong:Uet,table:zet,tableCell:Wet,tableRow:Vet,text:qet,thematicBreak:Ket,toml:x2,yaml:x2,definition:x2,footnoteDefinition:x2};function x2(){}function Jet(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Xet(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Zet(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Jet,r=t.options.footnoteBackLabel||Xet,s=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),d=String(c.identifier).toUpperCase(),h=lb(d.toLowerCase());let f=0;const p=[],m=t.footnoteCounts.get(d);for(;m!==void 0&&++f<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,f);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=u[u.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else u.push(...p);const b={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(u,!0)};t.patch(c,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...gp(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const iO={}.hasOwnProperty,Qet={};function ett(t,e){const n=e||Qet,r=new Map,s=new Map,i=new Map,o={...Yet,...n.handlers},a={all:c,applyData:ntt,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:l,options:n,patch:ttt,wrap:stt};return Vp(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:s,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),a;function l(u,d){const h=u.type,f=a.handlers[h];if(iO.call(a.handlers,h)&&f)return f(a,u,d);if(a.options.passThrough&&a.options.passThrough.includes(h)){if("children"in u){const{children:m,...g}=u,b=gp(g);return b.children=a.all(u),b}return gp(u)}return(a.options.unknownHandler||rtt)(a,u,d)}function c(u){const d=[];if("children"in u){const h=u.children;let f=-1;for(;++f<h.length;){const p=a.one(h[f],u);if(p){if(f&&h[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=pz(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=pz(m.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function ttt(t,e){t.position&&(e.position=Het(t))}function ntt(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,i=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&i&&Object.assign(n.properties,gp(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function rtt(t,e){const n=e.data||{},r="value"in e&&!(iO.call(n,"hProperties")||iO.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function stt(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function pz(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function mz(t,e){const n=ett(t,e),r=n.one(t,void 0),s=Zet(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function itt(t,e){return t&&"run"in t?async function(n,r){const s=mz(n,{file:r,...e});await t.run(s,r)}:function(n,r){return mz(n,{file:r,...t||e})}}function gz(t){if(t)throw t}var JS=Object.prototype.hasOwnProperty,Oue=Object.prototype.toString,bz=Object.defineProperty,yz=Object.getOwnPropertyDescriptor,vz=function(e){return typeof Array.isArray=="function"?Array.isArray(e):Oue.call(e)==="[object Array]"},wz=function(e){if(!e||Oue.call(e)!=="[object Object]")return!1;var n=JS.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&JS.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var s;for(s in e);return typeof s>"u"||JS.call(e,s)},xz=function(e,n){bz&&n.name==="__proto__"?bz(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},_z=function(e,n){if(n==="__proto__")if(JS.call(e,n)){if(yz)return yz(e,n).value}else return;return e[n]},ott=function t(){var e,n,r,s,i,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=_z(a,n),s=_z(e,n),a!==s&&(u&&s&&(wz(s)||(i=vz(s)))?(i?(i=!1,o=r&&vz(r)?r:[]):o=r&&wz(r)?r:{},xz(a,{name:n,newValue:t(u,o,s)})):typeof s<"u"&&xz(a,{name:n,newValue:s}));return a};const CP=yi(ott);function oO(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function att(){const t=[],e={run:n,use:r};return e;function n(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...s);function a(l,...c){const u=t[++i];let d=-1;if(l){o(l);return}for(;++d<s.length;)(c[d]===null||c[d]===void 0)&&(c[d]=s[d]);s=c,u?ltt(u,a)(...c):o(null,...c)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function ltt(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(s);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return s(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(i,s):l instanceof Error?s(l):i(l))}function s(o,...a){n||(n=!0,e(o,...a))}function i(o){s(null,o)}}const tc={basename:ctt,dirname:utt,extname:dtt,join:htt,sep:"/"};function ctt(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');ex(t);let n=0,r=-1,s=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else o<0&&(i=!0,o=s+1),a>-1&&(t.codePointAt(s)===e.codePointAt(a--)?a<0&&(r=s):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function utt(t){if(ex(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function dtt(t){ex(t);let e=t.length,n=-1,r=0,s=-1,i=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function htt(...t){let e=-1,n;for(;++e<t.length;)ex(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":ftt(n)}function ftt(t){ex(t);const e=t.codePointAt(0)===47;let n=ptt(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function ptt(t,e){let n="",r=0,s=-1,i=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=o,i=0;continue}}else if(n.length>0){n="",r=0,s=o,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,o):n=t.slice(s+1,o),r=o-s-1;s=o,i=0}else a===46&&i>-1?i++:i=-1}return n}function ex(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const mtt={cwd:gtt};function gtt(){return"/"}function aO(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function btt(t){if(typeof t=="string")t=new URL(t);else if(!aO(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return ytt(t)}function ytt(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const AP=["history","path","basename","stem","extname","dirname"];let vtt=class{constructor(e){let n;e?aO(e)?n={path:e}:typeof e=="string"||wtt(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":mtt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<AP.length;){const i=AP[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)AP.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?tc.basename(this.path):void 0}set basename(e){PP(e,"basename"),TP(e,"basename"),this.path=tc.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?tc.dirname(this.path):void 0}set dirname(e){Sz(this.basename,"dirname"),this.path=tc.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?tc.extname(this.path):void 0}set extname(e){if(TP(e,"extname"),Sz(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=tc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){aO(e)&&(e=btt(e)),PP(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?tc.basename(this.path,this.extname):void 0}set stem(e){PP(e,"stem"),TP(e,"stem"),this.path=tc.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Zs(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}};function TP(t,e){if(t&&t.includes(tc.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+tc.sep+"`")}function PP(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Sz(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function wtt(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const xtt=function(t){const r=this.constructor.prototype,s=r[t],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},_tt={}.hasOwnProperty;class x8 extends xtt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=att()}copy(){const e=new x8;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(CP(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(RP("data",this.frozen),this.namespace[e]=n,this):_tt.call(this.namespace,e)&&this.namespace[e]||void 0:e?(RP("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=_2(e),r=this.parser||this.Parser;return NP("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),NP("process",this.parser||this.Parser),IP("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,o){const a=_2(e),l=r.parse(a);r.run(l,a,function(u,d,h){if(u||!d||!h)return c(u);const f=d,p=r.stringify(f,h);ktt(p)?h.value=p:h.result=p,c(u,h)});function c(u,d){u||!d?o(u):i?i(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),NP("processSync",this.parser||this.Parser),IP("processSync",this.compiler||this.Compiler),this.process(e,s),kz("processSync","process",n),r;function s(i,o){n=!0,gz(i),r=o}}run(e,n,r){Ez(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(o,a){const l=_2(n);s.run(e,l,c);function c(u,d,h){const f=d||e;u?a(u):o?o(f):r(void 0,f,h)}}}runSync(e,n){let r=!1,s;return this.run(e,n,i),kz("runSync","run",r),s;function i(o,a){gz(o),s=a,r=!0}}stringify(e,n){this.freeze();const r=_2(n),s=this.compiler||this.Compiler;return IP("stringify",s),Ez(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(RP("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...d]=c;l(u,d)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(s.settings=CP(!0,s.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const d=c[u];i(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===c){h=d;break}if(h===-1)r.push([c,...u]);else if(u.length>0){let[f,...p]=u;const m=r[h][1];oO(m)&&oO(f)&&(f=CP(!0,m,f)),r[h]=[c,f,...p]}}}}const Stt=new x8().freeze();function NP(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function IP(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function RP(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ez(t){if(!oO(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function kz(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function _2(t){return Ett(t)?t:new vtt(t)}function Ett(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function ktt(t){return typeof t=="string"||Ctt(t)}function Ctt(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const nc={basename:Att,dirname:Ttt,extname:Ptt,join:Ntt,sep:"/"};function Att(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');tx(t);let n=0,r=-1,s=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else o<0&&(i=!0,o=s+1),a>-1&&(t.codePointAt(s)===e.codePointAt(a--)?a<0&&(r=s):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function Ttt(t){if(tx(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Ptt(t){tx(t);let e=t.length,n=-1,r=0,s=-1,i=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function Ntt(...t){let e=-1,n;for(;++e<t.length;)tx(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Itt(n)}function Itt(t){tx(t);const e=t.codePointAt(0)===47;let n=Rtt(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Rtt(t,e){let n="",r=0,s=-1,i=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=o,i=0;continue}}else if(n.length>0){n="",r=0,s=o,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,o):n=t.slice(s+1,o),r=o-s-1;s=o,i=0}else a===46&&i>-1?i++:i=-1}return n}function tx(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Ott={cwd:Ltt};function Ltt(){return"/"}function lO(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Dtt(t){if(typeof t=="string")t=new URL(t);else if(!lO(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Mtt(t)}function Mtt(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const OP=["history","path","basename","stem","extname","dirname"];class jtt{constructor(e){let n;e?lO(e)?n={path:e}:typeof e=="string"||Ftt(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Ott.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<OP.length;){const i=OP[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)OP.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?nc.basename(this.path):void 0}set basename(e){DP(e,"basename"),LP(e,"basename"),this.path=nc.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?nc.dirname(this.path):void 0}set dirname(e){Cz(this.basename,"dirname"),this.path=nc.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?nc.extname(this.path):void 0}set extname(e){if(LP(e,"extname"),Cz(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=nc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){lO(e)&&(e=Dtt(e)),DP(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?nc.basename(this.path,this.extname):void 0}set stem(e){DP(e,"stem"),LP(e,"stem"),this.path=nc.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Zs(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function LP(t,e){if(t&&t.includes(nc.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+nc.sep+"`")}function DP(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Cz(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Ftt(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Btt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Az=[],Tz={allowDangerousHtml:!0},$tt=/^(https?|ircs?|mailto|xmpp)$/i,Utt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Htt(t){const e=ztt(t),n=Vtt(t);return Wtt(e.runSync(e.parse(n),n),t)}function ztt(t){const e=t.rehypePlugins||Az,n=t.remarkPlugins||Az,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Tz}:Tz;return Stt().use(wet).use(n).use(itt,r).use(e)}function Vtt(t){const e=t.children||"",n=new jtt;return typeof e=="string"&&(n.value=e),n}function Wtt(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,i=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||Gtt;for(const u of Utt)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+Btt+u.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),Vp(t,c),ZXe(t,{Fragment:y.Fragment,components:s,ignoreInvalidStyle:!0,jsx:y.jsx,jsxs:y.jsxs,passKeys:!0,passNode:!0});function c(u,d,h){if(u.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let f;for(f in SP)if(Object.hasOwn(SP,f)&&Object.hasOwn(u.properties,f)){const p=u.properties[f],m=SP[f];(m===null||m.includes(u.tagName))&&(u.properties[f]=l(String(p||""),f,u))}}if(u.type==="element"){let f=n?!n.includes(u.tagName):i?i.includes(u.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(u,d,h)),f&&h&&typeof d=="number")return a&&u.children?h.children.splice(d,1,...u.children):h.children.splice(d,1),d}}}function Gtt(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||$tt.test(t.slice(0,e))?t:""}const Lue=[{id:"abap",name:"ABAP",import:()=>ye(()=>import("./abap-DsBKuouk.js"),[])},{id:"actionscript-3",name:"ActionScript",import:()=>ye(()=>import("./actionscript-3-D_z4Izcz.js"),[])},{id:"ada",name:"Ada",import:()=>ye(()=>import("./ada-727ZlQH0.js"),[])},{id:"angular-html",name:"Angular HTML",import:()=>ye(()=>import("./angular-html-LfdN0zeE.js").then(t=>t.f),__vite__mapDeps([3,4,5,6]))},{id:"angular-ts",name:"Angular TypeScript",import:()=>ye(()=>import("./angular-ts-CKsD7JZE.js"),__vite__mapDeps([7,3,4,5,6,8]))},{id:"apache",name:"Apache Conf",import:()=>ye(()=>import("./apache-Dn00JSTd.js"),[])},{id:"apex",name:"Apex",import:()=>ye(()=>import("./apex-COJ4H7py.js"),[])},{id:"apl",name:"APL",import:()=>ye(()=>import("./apl-BBq3IX1j.js"),__vite__mapDeps([9,4,5,6,10,11,12]))},{id:"applescript",name:"AppleScript",import:()=>ye(()=>import("./applescript-Bu5BbsvL.js"),[])},{id:"ara",name:"Ara",import:()=>ye(()=>import("./ara-7O62HKoU.js"),[])},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>ye(()=>import("./asciidoc-BPT9niGB.js"),[])},{id:"asm",name:"Assembly",import:()=>ye(()=>import("./asm-Dhn9LcZ4.js"),[])},{id:"astro",name:"Astro",import:()=>ye(()=>import("./astro-CqkE3fuf.js"),__vite__mapDeps([13,12,5,14,6,15]))},{id:"awk",name:"AWK",import:()=>ye(()=>import("./awk-eg146-Ew.js"),[])},{id:"ballerina",name:"Ballerina",import:()=>ye(()=>import("./ballerina-Du268qiB.js"),[])},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>ye(()=>import("./bat-fje9CFhw.js"),[])},{id:"beancount",name:"Beancount",import:()=>ye(()=>import("./beancount-BwXTMy5W.js"),[])},{id:"berry",name:"Berry",aliases:["be"],import:()=>ye(()=>import("./berry-3xVqZejG.js"),[])},{id:"bibtex",name:"BibTeX",import:()=>ye(()=>import("./bibtex-xW4inM5L.js"),[])},{id:"bicep",name:"Bicep",import:()=>ye(()=>import("./bicep-DHo0CJ0O.js"),[])},{id:"blade",name:"Blade",import:()=>ye(()=>import("./blade-a8OxSdnT.js"),__vite__mapDeps([16,4,5,6,10,11,17,12]))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>ye(()=>import("./bsl-Dgyn0ogV.js"),__vite__mapDeps([18,19]))},{id:"c",name:"C",import:()=>ye(()=>import("./c-C3t2pwGQ.js"),[])},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>ye(()=>import("./cadence-DNquZEk8.js"),[])},{id:"cairo",name:"Cairo",import:()=>ye(()=>import("./cairo--RitsXJZ.js"),__vite__mapDeps([20,21]))},{id:"clarity",name:"Clarity",import:()=>ye(()=>import("./clarity-BHOwM8T6.js"),[])},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>ye(()=>import("./clojure-DxSadP1t.js"),[])},{id:"cmake",name:"CMake",import:()=>ye(()=>import("./cmake-DbXoA79R.js"),[])},{id:"cobol",name:"COBOL",import:()=>ye(()=>import("./cobol-PTqiYgYu.js"),__vite__mapDeps([22,4,5,6,11]))},{id:"codeowners",name:"CODEOWNERS",import:()=>ye(()=>import("./codeowners-Bp6g37R7.js"),[])},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>ye(()=>import("./codeql-sacFqUAJ.js"),[])},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>ye(()=>import("./coffee-dyiR41kL.js"),__vite__mapDeps([23,5]))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>ye(()=>import("./common-lisp-C7gG9l05.js"),[])},{id:"coq",name:"Coq",import:()=>ye(()=>import("./coq-Dsg_Bt_b.js"),[])},{id:"cpp",name:"C++",aliases:["c++"],import:()=>ye(()=>import("./cpp-BksuvNSY.js"),__vite__mapDeps([24,25,26,27,17]))},{id:"crystal",name:"Crystal",import:()=>ye(()=>import("./crystal-DtDmRg-F.js"),__vite__mapDeps([28,4,5,6,17,27,29]))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>ye(()=>import("./csharp-D9R-vmeu.js"),[])},{id:"css",name:"CSS",import:()=>ye(()=>import("./css-BPhBrDlE.js"),[])},{id:"csv",name:"CSV",import:()=>ye(()=>import("./csv-B0qRVHPH.js"),[])},{id:"cue",name:"CUE",import:()=>ye(()=>import("./cue-DtFQj3wx.js"),[])},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>ye(()=>import("./cypher-m2LEI-9-.js"),[])},{id:"d",name:"D",import:()=>ye(()=>import("./d-BoXegm-a.js"),[])},{id:"dart",name:"Dart",import:()=>ye(()=>import("./dart-B9wLZaAG.js"),[])},{id:"dax",name:"DAX",import:()=>ye(()=>import("./dax-ClGRhx96.js"),[])},{id:"desktop",name:"Desktop",import:()=>ye(()=>import("./desktop-DEIpsLCJ.js"),[])},{id:"diff",name:"Diff",import:()=>ye(()=>import("./diff-BgYniUM_.js"),[])},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>ye(()=>import("./docker-COcR7UxN.js"),[])},{id:"dotenv",name:"dotEnv",import:()=>ye(()=>import("./dotenv-BjQB5zDj.js"),[])},{id:"dream-maker",name:"Dream Maker",import:()=>ye(()=>import("./dream-maker-C-nORZOA.js"),[])},{id:"edge",name:"Edge",import:()=>ye(()=>import("./edge-D5gP-w-T.js"),__vite__mapDeps([30,14,4,5,6,31]))},{id:"elixir",name:"Elixir",import:()=>ye(()=>import("./elixir-CLiX3zqd.js"),__vite__mapDeps([32,4,5,6]))},{id:"elm",name:"Elm",import:()=>ye(()=>import("./elm-CmHSxxaM.js"),__vite__mapDeps([33,26,27]))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>ye(()=>import("./emacs-lisp-BX77sIaO.js"),[])},{id:"erb",name:"ERB",import:()=>ye(()=>import("./erb-BYTLMnw6.js"),__vite__mapDeps([34,4,5,6,35,36,10,11,17,37,14,38,39,24,25,26,27,29,40,41]))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>ye(()=>import("./erlang-B-DoSBHF.js"),[])},{id:"fennel",name:"Fennel",import:()=>ye(()=>import("./fennel-bCA53EVm.js"),[])},{id:"fish",name:"Fish",import:()=>ye(()=>import("./fish-w-ucz2PV.js"),[])},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>ye(()=>import("./fluent-Dayu4EKP.js"),[])},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>ye(()=>import("./fortran-fixed-form-TqA4NnZg.js"),__vite__mapDeps([42,43]))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>ye(()=>import("./fortran-free-form-DKXYxT9g.js"),[])},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>ye(()=>import("./fsharp-XplgxFYe.js"),__vite__mapDeps([44,45]))},{id:"gdresource",name:"GDResource",import:()=>ye(()=>import("./gdresource-BHYsBjWJ.js"),__vite__mapDeps([46,47,48]))},{id:"gdscript",name:"GDScript",import:()=>ye(()=>import("./gdscript-DfxzS6Rs.js"),[])},{id:"gdshader",name:"GDShader",import:()=>ye(()=>import("./gdshader-SKMF96pI.js"),[])},{id:"genie",name:"Genie",import:()=>ye(()=>import("./genie-ajMbGru0.js"),[])},{id:"gherkin",name:"Gherkin",import:()=>ye(()=>import("./gherkin--30QC5Em.js"),[])},{id:"git-commit",name:"Git Commit Message",import:()=>ye(()=>import("./git-commit-i4q6IMui.js"),__vite__mapDeps([49,50]))},{id:"git-rebase",name:"Git Rebase Message",import:()=>ye(()=>import("./git-rebase-B-v9cOL2.js"),__vite__mapDeps([51,29]))},{id:"gleam",name:"Gleam",import:()=>ye(()=>import("./gleam-B430Bg39.js"),[])},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>ye(()=>import("./glimmer-js-D-cwc0-E.js"),__vite__mapDeps([52,5,14,6,4]))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>ye(()=>import("./glimmer-ts-pgjy16dm.js"),__vite__mapDeps([53,14,6,5,4]))},{id:"glsl",name:"GLSL",import:()=>ye(()=>import("./glsl-DBO2IWDn.js"),__vite__mapDeps([26,27]))},{id:"gnuplot",name:"Gnuplot",import:()=>ye(()=>import("./gnuplot-CM8KxXT1.js"),[])},{id:"go",name:"Go",import:()=>ye(()=>import("./go-B1SYOhNW.js"),[])},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>ye(()=>import("./graphql-cDcHW_If.js"),__vite__mapDeps([37,5,14,38,39]))},{id:"groovy",name:"Groovy",import:()=>ye(()=>import("./groovy-DkBy-JyN.js"),[])},{id:"hack",name:"Hack",import:()=>ye(()=>import("./hack-D1yCygmZ.js"),__vite__mapDeps([54,4,5,6,17]))},{id:"haml",name:"Ruby Haml",import:()=>ye(()=>import("./haml-B2EZWmdv.js"),__vite__mapDeps([36,5,6]))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>ye(()=>import("./handlebars-BQGss363.js"),__vite__mapDeps([55,4,5,6,41]))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>ye(()=>import("./haskell-BILxekzW.js"),[])},{id:"haxe",name:"Haxe",import:()=>ye(()=>import("./haxe-C5wWYbrZ.js"),[])},{id:"hcl",name:"HashiCorp HCL",import:()=>ye(()=>import("./hcl-HzYwdGDm.js"),[])},{id:"hjson",name:"Hjson",import:()=>ye(()=>import("./hjson-T-Tgc4AT.js"),[])},{id:"hlsl",name:"HLSL",import:()=>ye(()=>import("./hlsl-ifBTmRxC.js"),[])},{id:"html",name:"HTML",import:()=>ye(()=>import("./html-C2L_23MC.js"),__vite__mapDeps([4,5,6]))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>ye(()=>import("./html-derivative-CSfWNPLT.js"),__vite__mapDeps([31,4,5,6]))},{id:"http",name:"HTTP",import:()=>ye(()=>import("./http-FRrOvY1W.js"),__vite__mapDeps([56,29,12,10,11,37,5,14,38,39]))},{id:"hxml",name:"HXML",import:()=>ye(()=>import("./hxml-TIA70rKU.js"),__vite__mapDeps([57,58]))},{id:"hy",name:"Hy",import:()=>ye(()=>import("./hy-BMj5Y0dO.js"),[])},{id:"imba",name:"Imba",import:()=>ye(()=>import("./imba-bv_oIlVt.js"),__vite__mapDeps([59,14]))},{id:"ini",name:"INI",aliases:["properties"],import:()=>ye(()=>import("./ini-BjABl1g7.js"),[])},{id:"java",name:"Java",import:()=>ye(()=>import("./java-xI-RfyKK.js"),[])},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>ye(()=>import("./javascript-ySlJ1b_l.js"),[])},{id:"jinja",name:"Jinja",import:()=>ye(()=>import("./jinja-DGy0s7-h.js"),__vite__mapDeps([60,4,5,6]))},{id:"jison",name:"Jison",import:()=>ye(()=>import("./jison-BqZprYcd.js"),__vite__mapDeps([61,5]))},{id:"json",name:"JSON",import:()=>ye(()=>import("./json-BQoSv7ci.js"),[])},{id:"json5",name:"JSON5",import:()=>ye(()=>import("./json5-w8dY5SsB.js"),[])},{id:"jsonc",name:"JSON with Comments",import:()=>ye(()=>import("./jsonc-TU54ms6u.js"),[])},{id:"jsonl",name:"JSON Lines",import:()=>ye(()=>import("./jsonl-DREVFZK8.js"),[])},{id:"jsonnet",name:"Jsonnet",import:()=>ye(()=>import("./jsonnet-BfivnA6A.js"),[])},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>ye(()=>import("./jssm-P4WzXJd0.js"),[])},{id:"jsx",name:"JSX",import:()=>ye(()=>import("./jsx-BAng5TT0.js"),[])},{id:"julia",name:"Julia",aliases:["jl"],import:()=>ye(()=>import("./julia-BBuGR-5E.js"),__vite__mapDeps([62,24,25,26,27,17,21,5,63]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>ye(()=>import("./kotlin-B5lbUyaz.js"),[])},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>ye(()=>import("./kusto-mebxcVVE.js"),[])},{id:"latex",name:"LaTeX",import:()=>ye(()=>import("./latex-C-cWTeAZ.js"),__vite__mapDeps([64,65,63]))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>ye(()=>import("./lean-XBlWyCtg.js"),[])},{id:"less",name:"Less",import:()=>ye(()=>import("./less-BfCpw3nA.js"),[])},{id:"liquid",name:"Liquid",import:()=>ye(()=>import("./liquid-D3W5UaiH.js"),__vite__mapDeps([66,4,5,6,12]))},{id:"log",name:"Log file",import:()=>ye(()=>import("./log-Cc5clBb7.js"),[])},{id:"logo",name:"Logo",import:()=>ye(()=>import("./logo-IuBKFhSY.js"),[])},{id:"lua",name:"Lua",import:()=>ye(()=>import("./lua-CvWAzNxB.js"),__vite__mapDeps([40,27]))},{id:"luau",name:"Luau",import:()=>ye(()=>import("./luau-Du5NY7AG.js"),[])},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>ye(()=>import("./make-Bvotw-X0.js"),[])},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>ye(()=>import("./markdown-UIAJJxZW.js"),[])},{id:"marko",name:"Marko",import:()=>ye(()=>import("./marko-z0MBrx5-.js"),__vite__mapDeps([67,6,68,8,5]))},{id:"matlab",name:"MATLAB",import:()=>ye(()=>import("./matlab-D9-PGadD.js"),[])},{id:"mdc",name:"MDC",import:()=>ye(()=>import("./mdc-DB_EDNY_.js"),__vite__mapDeps([69,45,41,31,4,5,6]))},{id:"mdx",name:"MDX",import:()=>ye(()=>import("./mdx-sdHcTMYB.js"),[])},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>ye(()=>import("./mermaid-Ci6OQyBP.js"),[])},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>ye(()=>import("./mipsasm-BC5c_5Pe.js"),[])},{id:"mojo",name:"Mojo",import:()=>ye(()=>import("./mojo-Tz6hzZYG.js"),[])},{id:"move",name:"Move",import:()=>ye(()=>import("./move-DB_GagMm.js"),[])},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>ye(()=>import("./narrat-DLbgOhZU.js"),[])},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>ye(()=>import("./nextflow-B0XVJmRM.js"),[])},{id:"nginx",name:"Nginx",import:()=>ye(()=>import("./nginx-D_VnBJ67.js"),__vite__mapDeps([70,40,27]))},{id:"nim",name:"Nim",import:()=>ye(()=>import("./nim-ZlGxZxc3.js"),__vite__mapDeps([71,27,4,5,6,10,11,26,45]))},{id:"nix",name:"Nix",import:()=>ye(()=>import("./nix-shcSOmrb.js"),[])},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>ye(()=>import("./nushell-D4Tzg5kh.js"),[])},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>ye(()=>import("./objective-c-Deuh7S70.js"),[])},{id:"objective-cpp",name:"Objective-C++",import:()=>ye(()=>import("./objective-cpp-BUEGK8hf.js"),[])},{id:"ocaml",name:"OCaml",import:()=>ye(()=>import("./ocaml-BNioltXt.js"),[])},{id:"pascal",name:"Pascal",import:()=>ye(()=>import("./pascal-JqZropPD.js"),[])},{id:"perl",name:"Perl",import:()=>ye(()=>import("./perl-CHQXSrWU.js"),__vite__mapDeps([72,4,5,6,10,11,17]))},{id:"php",name:"PHP",import:()=>ye(()=>import("./php-B5ebYQev.js"),__vite__mapDeps([73,4,5,6,10,11,17,12]))},{id:"plsql",name:"PL/SQL",import:()=>ye(()=>import("./plsql-LKU2TuZ1.js"),[])},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>ye(()=>import("./po-BFLt1xDp.js"),[])},{id:"polar",name:"Polar",import:()=>ye(()=>import("./polar-DKykz6zU.js"),[])},{id:"postcss",name:"PostCSS",import:()=>ye(()=>import("./postcss-B3ZDOciz.js"),[])},{id:"powerquery",name:"PowerQuery",import:()=>ye(()=>import("./powerquery-CSHBycmS.js"),[])},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>ye(()=>import("./powershell-BIEUsx6d.js"),[])},{id:"prisma",name:"Prisma",import:()=>ye(()=>import("./prisma-B48N-Iqd.js"),[])},{id:"prolog",name:"Prolog",import:()=>ye(()=>import("./prolog-BY-TUvya.js"),[])},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>ye(()=>import("./proto-zocC4JxJ.js"),[])},{id:"pug",name:"Pug",aliases:["jade"],import:()=>ye(()=>import("./pug-CM9l7STV.js"),__vite__mapDeps([74,5,6,4]))},{id:"puppet",name:"Puppet",import:()=>ye(()=>import("./puppet-Cza_XSSt.js"),[])},{id:"purescript",name:"PureScript",import:()=>ye(()=>import("./purescript-Bg-kzb6g.js"),[])},{id:"python",name:"Python",aliases:["py"],import:()=>ye(()=>import("./python-DhUJRlN_.js"),[])},{id:"qml",name:"QML",import:()=>ye(()=>import("./qml-D8XfuvdV.js"),__vite__mapDeps([75,5]))},{id:"qmldir",name:"QML Directory",import:()=>ye(()=>import("./qmldir-C8lEn-DE.js"),[])},{id:"qss",name:"Qt Style Sheets",import:()=>ye(()=>import("./qss-DhMKtDLN.js"),[])},{id:"r",name:"R",import:()=>ye(()=>import("./r-CwjWoCRV.js"),[])},{id:"racket",name:"Racket",import:()=>ye(()=>import("./racket-CzouJOBO.js"),[])},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>ye(()=>import("./raku-B1bQXN8T.js"),[])},{id:"razor",name:"ASP.NET Razor",import:()=>ye(()=>import("./razor-CNLDkMZG.js"),__vite__mapDeps([76,4,5,6,77]))},{id:"reg",name:"Windows Registry Script",import:()=>ye(()=>import("./reg-5LuOXUq_.js"),[])},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>ye(()=>import("./regexp-DWJ3fJO_.js"),[])},{id:"rel",name:"Rel",import:()=>ye(()=>import("./rel-DJlmqQ1C.js"),[])},{id:"riscv",name:"RISC-V",import:()=>ye(()=>import("./riscv-QhoSD0DR.js"),[])},{id:"rst",name:"reStructuredText",import:()=>ye(()=>import("./rst-4NLicBqY.js"),__vite__mapDeps([78,31,4,5,6,24,25,26,27,17,21,29,41,79,35,36,10,11,37,14,38,39,40]))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>ye(()=>import("./ruby-DeZ3UC14.js"),__vite__mapDeps([35,4,5,6,36,10,11,17,37,14,38,39,24,25,26,27,29,40,41]))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>ye(()=>import("./rust-Be6lgOlo.js"),[])},{id:"sas",name:"SAS",import:()=>ye(()=>import("./sas-BmTFh92c.js"),__vite__mapDeps([80,17]))},{id:"sass",name:"Sass",import:()=>ye(()=>import("./sass-BJ4Li9vH.js"),[])},{id:"scala",name:"Scala",import:()=>ye(()=>import("./scala-DQVVAn-B.js"),[])},{id:"scheme",name:"Scheme",import:()=>ye(()=>import("./scheme-BJGe-b2p.js"),[])},{id:"scss",name:"SCSS",import:()=>ye(()=>import("./scss-C31hgJw-.js"),__vite__mapDeps([8,6]))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>ye(()=>import("./sdbl-BLhTXw86.js"),[])},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>ye(()=>import("./shaderlab-B7qAK45m.js"),__vite__mapDeps([81,82]))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>ye(()=>import("./shellscript-atvbtKCR.js"),[])},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>ye(()=>import("./shellsession-C_rIy8kc.js"),__vite__mapDeps([83,29]))},{id:"smalltalk",name:"Smalltalk",import:()=>ye(()=>import("./smalltalk-DkLiglaE.js"),[])},{id:"solidity",name:"Solidity",import:()=>ye(()=>import("./solidity-C1w2a3ep.js"),[])},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>ye(()=>import("./soy-C-lX7w71.js"),__vite__mapDeps([84,4,5,6]))},{id:"sparql",name:"SPARQL",import:()=>ye(()=>import("./sparql-bYkjHRlG.js"),__vite__mapDeps([85,86]))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>ye(()=>import("./splunk-Cf8iN4DR.js"),[])},{id:"sql",name:"SQL",import:()=>ye(()=>import("./sql-COK4E0Yg.js"),[])},{id:"ssh-config",name:"SSH Config",import:()=>ye(()=>import("./ssh-config-BknIz3MU.js"),[])},{id:"stata",name:"Stata",import:()=>ye(()=>import("./stata-DorPZHa4.js"),__vite__mapDeps([87,17]))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>ye(()=>import("./stylus-BeQkCIfX.js"),[])},{id:"svelte",name:"Svelte",import:()=>ye(()=>import("./svelte-MSaWC3Je.js"),__vite__mapDeps([88,5,14,6,15]))},{id:"swift",name:"Swift",import:()=>ye(()=>import("./swift-BSxZ-RaX.js"),[])},{id:"system-verilog",name:"SystemVerilog",import:()=>ye(()=>import("./system-verilog-C7L56vO4.js"),[])},{id:"systemd",name:"Systemd Units",import:()=>ye(()=>import("./systemd-CUnW07Te.js"),[])},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>ye(()=>import("./talonscript-C1XDQQGZ.js"),[])},{id:"tasl",name:"Tasl",import:()=>ye(()=>import("./tasl-CQjiPCtT.js"),[])},{id:"tcl",name:"Tcl",import:()=>ye(()=>import("./tcl-DQ1-QYvQ.js"),[])},{id:"templ",name:"Templ",import:()=>ye(()=>import("./templ-dwX3ZSMB.js"),__vite__mapDeps([89,90,5,6]))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>ye(()=>import("./terraform-BbSNqyBO.js"),[])},{id:"tex",name:"TeX",import:()=>ye(()=>import("./tex-rYs2v40G.js"),__vite__mapDeps([65,63]))},{id:"toml",name:"TOML",import:()=>ye(()=>import("./toml-CB2ApiWb.js"),[])},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>ye(()=>import("./ts-tags-CipyTH0X.js"),__vite__mapDeps([91,14,6,5,26,27,4,17,10,11]))},{id:"tsv",name:"TSV",import:()=>ye(()=>import("./tsv-B_m7g4N7.js"),[])},{id:"tsx",name:"TSX",import:()=>ye(()=>import("./tsx-B6W0miNI.js"),[])},{id:"turtle",name:"Turtle",import:()=>ye(()=>import("./turtle-BMR_PYu6.js"),[])},{id:"twig",name:"Twig",import:()=>ye(()=>import("./twig-NC5TFiHP.js"),__vite__mapDeps([92,6,5,8,73,4,10,11,17,12,21,35,36,37,14,38,39,24,25,26,27,29,40,41]))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>ye(()=>import("./typescript-Dj6nwHGl.js"),[])},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>ye(()=>import("./typespec-BpWG_bgh.js"),[])},{id:"typst",name:"Typst",aliases:["typ"],import:()=>ye(()=>import("./typst-BVUVsWT6.js"),[])},{id:"v",name:"V",import:()=>ye(()=>import("./v-CAQ2eGtk.js"),[])},{id:"vala",name:"Vala",import:()=>ye(()=>import("./vala-BFOHcciG.js"),[])},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>ye(()=>import("./vb-CdO5JTpU.js"),[])},{id:"verilog",name:"Verilog",import:()=>ye(()=>import("./verilog-CJaU5se_.js"),[])},{id:"vhdl",name:"VHDL",import:()=>ye(()=>import("./vhdl-DYoNaHQp.js"),[])},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>ye(()=>import("./viml-m4uW47V2.js"),[])},{id:"vue",name:"Vue",import:()=>ye(()=>import("./vue-BuYVFjOK.js"),__vite__mapDeps([93,4,5,6,14,12,31]))},{id:"vue-html",name:"Vue HTML",import:()=>ye(()=>import("./vue-html-xdeiXROB.js"),__vite__mapDeps([94,93,4,5,6,14,12,31]))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>ye(()=>import("./vyper-nyqBNV6O.js"),[])},{id:"wasm",name:"WebAssembly",import:()=>ye(()=>import("./wasm-C6j12Q_x.js"),[])},{id:"wenyan",name:"Wenyan",aliases:[""],import:()=>ye(()=>import("./wenyan-7A4Fjokl.js"),[])},{id:"wgsl",name:"WGSL",import:()=>ye(()=>import("./wgsl-CB0Krxn9.js"),[])},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>ye(()=>import("./wikitext-DCE3LsBG.js"),[])},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>ye(()=>import("./wolfram-C3FkfJm5.js"),[])},{id:"xml",name:"XML",import:()=>ye(()=>import("./xml-e3z08dGr.js"),__vite__mapDeps([10,11]))},{id:"xsl",name:"XSL",import:()=>ye(()=>import("./xsl-Dd0NUgwM.js"),__vite__mapDeps([95,10,11]))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>ye(()=>import("./yaml-CVw76BM1.js"),[])},{id:"zenscript",name:"ZenScript",import:()=>ye(()=>import("./zenscript-HnGAYVZD.js"),[])},{id:"zig",name:"Zig",import:()=>ye(()=>import("./zig-BVz_zdnA.js"),[])}],qtt=Object.fromEntries(Lue.map(t=>[t.id,t.import])),Ktt=Object.fromEntries(Lue.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),Due={...qtt,...Ktt},Ytt=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>ye(()=>import("./andromeeda-C3khCPGq.js"),[])},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>ye(()=>import("./aurora-x-D-2ljcwZ.js"),[])},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>ye(()=>import("./ayu-dark-Cv9koXgw.js"),[])},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:()=>ye(()=>import("./catppuccin-frappe-CD_QflpE.js"),[])},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>ye(()=>import("./catppuccin-latte-DRW-0cLl.js"),[])},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>ye(()=>import("./catppuccin-macchiato-C-_shW-Y.js"),[])},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>ye(()=>import("./catppuccin-mocha-LGGdnPYs.js"),[])},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>ye(()=>import("./dark-plus-C3mMm8J8.js"),[])},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>ye(()=>import("./dracula-BzJJZx-M.js"),[])},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>ye(()=>import("./dracula-soft-BXkSAIEj.js"),[])},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>ye(()=>import("./everforest-dark-BgDCqdQA.js"),[])},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>ye(()=>import("./everforest-light-C8M2exoo.js"),[])},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>ye(()=>import("./github-dark-DHJKELXO.js"),[])},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>ye(()=>import("./github-dark-default-Cuk6v7N8.js"),[])},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>ye(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[])},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>ye(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[])},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>ye(()=>import("./github-light-DAi9KRSo.js"),[])},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>ye(()=>import("./github-light-default-D7oLnXFd.js"),[])},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>ye(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[])},{id:"houston",displayName:"Houston",type:"dark",import:()=>ye(()=>import("./houston-DnULxvSX.js"),[])},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>ye(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[])},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>ye(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[])},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>ye(()=>import("./kanagawa-wave-DWedfzmr.js"),[])},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>ye(()=>import("./laserwave-DUszq2jm.js"),[])},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>ye(()=>import("./light-plus-B7mTdjB0.js"),[])},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>ye(()=>import("./material-theme-D5KoaKCx.js"),[])},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>ye(()=>import("./material-theme-darker-BfHTSMKl.js"),[])},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>ye(()=>import("./material-theme-lighter-B0m2ddpp.js"),[])},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>ye(()=>import("./material-theme-ocean-CyktbL80.js"),[])},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>ye(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[])},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>ye(()=>import("./min-dark-CafNBF8u.js"),[])},{id:"min-light",displayName:"Min Light",type:"light",import:()=>ye(()=>import("./min-light-CTRr51gU.js"),[])},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>ye(()=>import("./monokai-D4h5O-jR.js"),[])},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>ye(()=>import("./night-owl-C39BiMTA.js"),[])},{id:"nord",displayName:"Nord",type:"dark",import:()=>ye(()=>import("./nord-Ddv68eIx.js"),[])},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>ye(()=>import("./one-dark-pro-GBQ2dnAY.js"),[])},{id:"one-light",displayName:"One Light",type:"light",import:()=>ye(()=>import("./one-light-PoHY5YXO.js"),[])},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>ye(()=>import("./plastic-3e1v2bzS.js"),[])},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>ye(()=>import("./poimandres-CS3Unz2-.js"),[])},{id:"red",displayName:"Red",type:"dark",import:()=>ye(()=>import("./red-bN70gL4F.js"),[])},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:()=>ye(()=>import("./rose-pine-CmCqftbK.js"),[])},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:()=>ye(()=>import("./rose-pine-dawn-Ds-gbosJ.js"),[])},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:()=>ye(()=>import("./rose-pine-moon-CjDtw9vr.js"),[])},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>ye(()=>import("./slack-dark-BthQWCQV.js"),[])},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>ye(()=>import("./slack-ochin-DqwNpetd.js"),[])},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>ye(()=>import("./snazzy-light-Bw305WKR.js"),[])},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>ye(()=>import("./solarized-dark-DXbdFlpD.js"),[])},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>ye(()=>import("./solarized-light-L9t79GZl.js"),[])},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>ye(()=>import("./synthwave-84-CbfX1IO0.js"),[])},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>ye(()=>import("./tokyo-night-DBQeEorK.js"),[])},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>ye(()=>import("./vesper-BEBZ7ncR.js"),[])},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>ye(()=>import("./vitesse-black-Bkuqu6BP.js"),[])},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>ye(()=>import("./vitesse-dark-D0r3Knsf.js"),[])},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>ye(()=>import("./vitesse-light-CVO1_9PV.js"),[])}],Jtt=Object.fromEntries(Ytt.map(t=>[t.id,t.import]));let Du=class extends Error{constructor(e){super(e),this.name="ShikiError"}},_8=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function Xtt(){return 2147483648}function Ztt(){return typeof performance<"u"?performance.now():Date.now()}const Qtt=(t,e)=>t+(e-t%e)%e;async function ent(t){let e,n;const r={};function s(f){n=f,r.HEAPU8=new Uint8Array(f),r.HEAPU32=new Uint32Array(f)}function i(f,p,m){r.HEAPU8.copyWithin(f,p,p+m)}function o(f){try{return e.grow(f-n.byteLength+65535>>>16),s(e.buffer),1}catch{}}function a(f){const p=r.HEAPU8.length;f=f>>>0;const m=Xtt();if(f>m)return!1;for(let g=1;g<=4;g*=2){let b=p*(1+.2/g);b=Math.min(b,f+100663296);const v=Math.min(m,Qtt(Math.max(f,b),65536));if(o(v))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(f,p,m=1024){const g=p+m;let b=p;for(;f[b]&&!(b>=g);)++b;if(b-p>16&&f.buffer&&l)return l.decode(f.subarray(p,b));let v="";for(;p<b;){let w=f[p++];if(!(w&128)){v+=String.fromCharCode(w);continue}const _=f[p++]&63;if((w&224)===192){v+=String.fromCharCode((w&31)<<6|_);continue}const S=f[p++]&63;if((w&240)===224?w=(w&15)<<12|_<<6|S:w=(w&7)<<18|_<<12|S<<6|f[p++]&63,w<65536)v+=String.fromCharCode(w);else{const E=w-65536;v+=String.fromCharCode(55296|E>>10,56320|E&1023)}}return v}function u(f,p){return f?c(r.HEAPU8,f,p):""}const d={emscripten_get_now:Ztt,emscripten_memcpy_big:i,emscripten_resize_heap:a,fd_write:()=>0};async function h(){const p=await t({env:d,wasi_snapshot_preview1:d});e=p.memory,s(e.buffer),Object.assign(r,p),r.UTF8ToString=u}return await h(),r}var tnt=Object.defineProperty,nnt=(t,e,n)=>e in t?tnt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hs=(t,e,n)=>(nnt(t,typeof e!="symbol"?e+"":e,n),n);let ks=null;function rnt(t){throw new _8(t.UTF8ToString(t.getLastOnigError()))}class cT{constructor(e){hs(this,"utf16Length"),hs(this,"utf8Length"),hs(this,"utf16Value"),hs(this,"utf8Value"),hs(this,"utf16OffsetToUtf8"),hs(this,"utf8OffsetToUtf16");const n=e.length,r=cT._utf8ByteLength(e),s=r!==n,i=s?new Uint32Array(n+1):null;s&&(i[n]=r);const o=s?new Uint32Array(r+1):null;s&&(o[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const u=e.charCodeAt(c);let d=u,h=!1;if(u>=55296&&u<=56319&&c+1<n){const f=e.charCodeAt(c+1);f>=56320&&f<=57343&&(d=(u-55296<<10)+65536|f-56320,h=!0)}s&&(i[c]=l,h&&(i[c+1]=l),d<=127?o[l+0]=c:d<=2047?(o[l+0]=c,o[l+1]=c):d<=65535?(o[l+0]=c,o[l+1]=c,o[l+2]=c):(o[l+0]=c,o[l+1]=c,o[l+2]=c,o[l+3]=c)),d<=127?a[l++]=d:d<=2047?(a[l++]=192|(d&1984)>>>6,a[l++]=128|(d&63)>>>0):d<=65535?(a[l++]=224|(d&61440)>>>12,a[l++]=128|(d&4032)>>>6,a[l++]=128|(d&63)>>>0):(a[l++]=240|(d&1835008)>>>18,a[l++]=128|(d&258048)>>>12,a[l++]=128|(d&4032)>>>6,a[l++]=128|(d&63)>>>0),h&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,s=e.length;r<s;r++){const i=e.charCodeAt(r);let o=i,a=!1;if(i>=55296&&i<=56319&&r+1<s){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(o=(i-55296<<10)+65536|l-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const Xl=class{constructor(t){if(hs(this,"id",++Xl.LAST_ID),hs(this,"_onigBinding"),hs(this,"content"),hs(this,"utf16Length"),hs(this,"utf8Length"),hs(this,"utf16OffsetToUtf8"),hs(this,"utf8OffsetToUtf16"),hs(this,"ptr"),!ks)throw new _8("Must invoke loadWasm first.");this._onigBinding=ks,this.content=t;const e=new cT(t);this.utf16Length=e.utf16Length,this.utf8Length=e.utf8Length,this.utf16OffsetToUtf8=e.utf16OffsetToUtf8,this.utf8OffsetToUtf16=e.utf8OffsetToUtf16,this.utf8Length<1e4&&!Xl._sharedPtrInUse?(Xl._sharedPtr||(Xl._sharedPtr=ks.omalloc(1e4)),Xl._sharedPtrInUse=!0,ks.HEAPU8.set(e.utf8Value,Xl._sharedPtr),this.ptr=Xl._sharedPtr):this.ptr=e.createString(ks)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===Xl._sharedPtr?Xl._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let nx=Xl;hs(nx,"LAST_ID",0);hs(nx,"_sharedPtr",0);hs(nx,"_sharedPtrInUse",!1);class snt{constructor(e){if(hs(this,"_onigBinding"),hs(this,"_ptr"),!ks)throw new _8("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=new cT(e[a]);n[a]=c.createString(ks),r[a]=c.utf8Length}const s=ks.omalloc(4*e.length);ks.HEAPU32.set(n,s/4);const i=ks.omalloc(4*e.length);ks.HEAPU32.set(r,i/4);const o=ks.createOnigScanner(s,i,e.length);for(let a=0,l=e.length;a<l;a++)ks.ofree(n[a]);ks.ofree(i),ks.ofree(s),o===0&&rnt(ks),this._onigBinding=ks,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new nx(e);const i=this._findNextMatchSync(e,n,!1,s);return e.dispose(),i}return this._findNextMatchSync(e,n,!1,s)}_findNextMatchSync(e,n,r,s){const i=this._onigBinding,o=i.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),s);if(o===0)return null;const a=i.HEAPU32;let l=o/4;const c=a[l++],u=a[l++],d=[];for(let h=0;h<u;h++){const f=e.convertUtf8OffsetToUtf16(a[l++]),p=e.convertUtf8OffsetToUtf16(a[l++]);d[h]={start:f,end:p,length:p-f}}return{index:c,captureIndices:d}}}function int(t){return typeof t.instantiator=="function"}function ont(t){return typeof t.default=="function"}function ant(t){return typeof t.data<"u"}function lnt(t){return typeof Response<"u"&&t instanceof Response}function cnt(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof _t<"u"&&_t.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let S2;function unt(t){if(S2)return S2;async function e(){ks=await ent(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),int(r)?r=await r.instantiator(n):ont(r)?r=await r.default(n):(ant(r)&&(r=r.data),lnt(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await dnt(r)(n):r=await hnt(r)(n):cnt(r)?r=await MP(r)(n):r instanceof WebAssembly.Module?r=await MP(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await MP(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return S2=e(),S2}function MP(t){return e=>WebAssembly.instantiate(t,e)}function dnt(t){return e=>WebAssembly.instantiateStreaming(t,e)}function hnt(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}let fnt;function pnt(){return fnt}async function Mue(t){return t&&await unt(t),{createScanner(e){return new snt(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new nx(e)}}}function mnt(t){return S8(t)}function S8(t){return Array.isArray(t)?gnt(t):t instanceof RegExp?t:typeof t=="object"?bnt(t):t}function gnt(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=S8(t[n]);return e}function bnt(t){let e={};for(let n in t)e[n]=S8(t[n]);return e}function jue(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Fue(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Fue(t.substring(0,t.length-1)):t.substr(~e+1)}var jP=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,E2=class{static hasCaptures(t){return t===null?!1:(jP.lastIndex=0,jP.test(t))}static replaceCaptures(t,e,n){return t.replace(jP,(r,s,i,o)=>{let a=n[parseInt(s||i,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function Bue(t,e){return t<e?-1:t>e?1:0}function $ue(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let s=0;s<n;s++){let i=Bue(t[s],e[s]);if(i!==0)return i}return 0}return n-r}function Pz(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Uue(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Hue=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Vk=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(wnt(t),e)}static createFromParsedTheme(t,e){return _nt(t,e)}_cachedMatchRoot=new Hue(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(s=>ynt(t.parent,s.parentScopes));return r?new zue(r.fontStyle,r.foreground,r.background):null}},FP=class XS{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new XS(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new XS(n,e[r]);return n}push(e){return new XS(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function ynt(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],s=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],s=!0}for(;t&&!vnt(t.scopeName,r);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function vnt(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var zue=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function wnt(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let s=0,i=e.length;s<i;s++){let o=e[s];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let d=o.scope;d=d.replace(/^[,]+/,""),d=d.replace(/[,]+$/,""),a=d.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let d=o.settings.fontStyle.split(" ");for(let h=0,f=d.length;h<f;h++)switch(d[h]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof o.settings.foreground=="string"&&Pz(o.settings.foreground)&&(c=o.settings.foreground);let u=null;typeof o.settings.background=="string"&&Pz(o.settings.background)&&(u=o.settings.background);for(let d=0,h=a.length;d<h;d++){let p=a[d].trim().split(" "),m=p[p.length-1],g=null;p.length>1&&(g=p.slice(0,p.length-1),g.reverse()),n[r++]=new xnt(m,g,s,l,c,u)}}return n}var xnt=class{constructor(t,e,n,r,s,i){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=s,this.background=i}},Iu=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(Iu||{});function _nt(t,e){t.sort((l,c)=>{let u=Bue(l.scope,c.scope);return u!==0||(u=$ue(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(s=l.background)}let i=new Snt(e),o=new zue(n,i.getId(r),i.getId(s)),a=new knt(new cO(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let u=t[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,i.getId(u.foreground),i.getId(u.background))}return new Vk(i,o,a)}var Snt=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},Ent=Object.freeze([]),cO=class Vue{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,s,i){this.scopeDepth=e,this.parentScopes=n||Ent,this.fontStyle=r,this.foreground=s,this.background=i}clone(){return new Vue(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},knt=class uO{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=n.parentScopes.length);){const i=n.parentScopes[s].length-e.parentScopes[r].length;if(i!==0)return i;r++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,i;if(r===-1?(s=e,i=""):(s=e.substring(0,r),i=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(i)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(uO._cmpBySpecificity),n}insert(e,n,r,s,i,o){if(n===""){this._doInsertHere(e,r,s,i,o);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new uO(this._mainRule.clone(),cO.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(e+1,c,r,s,i,o)}_doInsertHere(e,n,r,s,i){if(n===null){this._mainRule.acceptOverwrite(e,r,s,i);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if($ue(l.parentScopes,n)===0){l.acceptOverwrite(e,r,s,i);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),i===0&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new cO(e,n,r,s,i))}},x0=class la{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=la.getLanguageId(e),r=la.getTokenType(e),s=la.getFontStyle(e),i=la.getForeground(e),o=la.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:i,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,s,i,o,a){let l=la.getLanguageId(e),c=la.getTokenType(e),u=la.containsBalancedBrackets(e)?1:0,d=la.getFontStyle(e),h=la.getForeground(e),f=la.getBackground(e);return n!==0&&(l=n),r!==8&&(c=r),s!==null&&(u=s?1:0),i!==-1&&(d=i),o!==0&&(h=o),a!==0&&(f=a),(l<<0|c<<8|u<<10|d<<11|h<<15|f<<24)>>>0}};function Wk(t,e){const n=[],r=Cnt(t);let s=r.next();for(;s!==null;){let l=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let c=o();if(n.push({matcher:c,priority:l}),s!==",")break;s=r.next()}return n;function i(){if(s==="-"){s=r.next();const l=i();return c=>!!l&&!l(c)}if(s==="("){s=r.next();const l=a();return s===")"&&(s=r.next()),l}if(Nz(s)){const l=[];do l.push(s),s=r.next();while(Nz(s));return c=>e(l,c)}return null}function o(){const l=[];let c=i();for(;c;)l.push(c),c=i();return u=>l.every(d=>d(u))}function a(){const l=[];let c=o();for(;c&&(l.push(c),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");c=o()}return u=>l.some(d=>d(u))}}function Nz(t){return!!t&&!!t.match(/[\w\.:]+/)}function Cnt(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Wue(t){typeof t.dispose=="function"&&t.dispose()}var J1=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},Ant=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},Tnt=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Pnt=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new J1(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new Tnt;for(const n of t)Nnt(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof J1){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function Nnt(t,e,n,r){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const i=n.lookup(e);t instanceof J1?ZS({baseGrammar:i,selfGrammar:s},r):dO(t.ruleName,{baseGrammar:i,selfGrammar:s,repository:s.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new J1(a))}function dO(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Gk([r],e,n)}}function ZS(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Gk(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Gk(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Gk(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?jue({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Gk(r.patterns,{...e,repository:s},n);const i=r.include;if(!i)continue;const o=Gue(i);switch(o.kind){case 0:ZS({...e,selfGrammar:e.baseGrammar},n);break;case 1:ZS(e,n);break;case 2:dO(o.ruleName,{...e,repository:s},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:s};o.kind===4?dO(o.ruleName,l,n):ZS(l,n)}else o.kind===4?n.add(new Ant(o.scopeName,o.ruleName)):n.add(new J1(o.scopeName));break}}}var Int=class{kind=0},Rnt=class{kind=1},Ont=class{constructor(t){this.ruleName=t}kind=2},Lnt=class{constructor(t){this.scopeName=t}kind=3},Dnt=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Gue(t){if(t==="$base")return new Int;if(t==="$self")return new Rnt;const e=t.indexOf("#");if(e===-1)return new Lnt(t);if(e===0)return new Ont(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new Dnt(n,r)}}var Mnt=/\\(\d+)/,Iz=/\\(\d+)/g,jnt=-1,que=-2;var rx=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,n,r,s){this.$location=e,this.id=n,this._name=r||null,this._nameIsCapturing=E2.hasCaptures(this._name),this._contentName=s||null,this._contentNameIsCapturing=E2.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${Fue(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,n){return!this._nameIsCapturing||this._name===null||e===null||n===null?this._name:E2.replaceCaptures(this._name,e,n)}getContentName(e,n){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:E2.replaceCaptures(this._contentName,e,n)}},Fnt=class extends rx{retokenizeCapturedWithRuleId;constructor(t,e,n,r,s){super(t,e,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},Bnt=class extends rx{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,null),this._match=new X1(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Z1,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Rz=class extends rx{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Z1,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},hO=class extends rx{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s,i,o,a,l,c){super(t,e,n,r),this._begin=new X1(s,this.id),this.beginCaptures=i,this._end=new X1(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Z1;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},qk=class extends rx{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,s,i,o,a,l){super(t,e,n,r),this._begin=new X1(s,this.id),this.beginCaptures=i,this.whileCaptures=a,this._while=new X1(o,que),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Z1;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Z1,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},Kue=class ii{static createCaptureRule(e,n,r,s,i){return e.registerRule(o=>new Fnt(n,o,r,s,i))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new Bnt(e.$vscodeTextmateLocation,e.id,e.name,e.match,ii._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=jue({},r,e.repository));let i=e.patterns;return typeof i>"u"&&e.include&&(i=[{include:e.include}]),new Rz(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,ii._compilePatterns(i,n,r))}return e.while?new qk(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ii._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,ii._compileCaptures(e.whileCaptures||e.captures,n,r),ii._compilePatterns(e.patterns,n,r)):new hO(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ii._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,ii._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,ii._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let s=[];if(e){let i=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>i&&(i=a)}for(let o=0;o<=i;o++)s[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=ii.getCompiledRuleId(e[o],n,r)),s[a]=ii.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return s}static _compilePatterns(e,n,r){let s=[];if(e)for(let i=0,o=e.length;i<o;i++){const a=e[i];let l=-1;if(a.include){const c=Gue(a.include);switch(c.kind){case 0:case 1:l=ii.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=ii.getCompiledRuleId(u,n,r));break;case 3:case 4:const d=c.scopeName,h=c.kind===4?c.ruleName:null,f=n.getExternalGrammar(d,r);if(f)if(h){let p=f.repository[h];p&&(l=ii.getCompiledRuleId(p,n,f.repository))}else l=ii.getCompiledRuleId(f.repository.$self,n,f.repository);break}}else l=ii.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof Rz||c instanceof hO||c instanceof qk)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;s.push(l)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},X1=class Yue{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let s=0,i=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const c=e.charAt(a+1);c==="z"?(i.push(e.substring(s,a)),i.push("$(?!\\n)(?<!\\n)"),s=a+2):(c==="A"||c==="G")&&(o=!0),a++}this.hasAnchor=o,s===0?this.source=e:(i.push(e.substring(s,r)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=Mnt.test(this.source):this.hasBackReferences=!1}clone(){return new Yue(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>e.substring(s.start,s.end));return Iz.lastIndex=0,this.source.replace(Iz,(s,i)=>Uue(r[parseInt(i,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],s=[],i,o,a,l;for(i=0,o=this.source.length;i<o;i++)a=this.source.charAt(i),e[i]=a,n[i]=a,r[i]=a,s[i]=a,a==="\\"&&i+1<o&&(l=this.source.charAt(i+1),l==="A"?(e[i+1]="",n[i+1]="",r[i+1]="A",s[i+1]="A"):l==="G"?(e[i+1]="",n[i+1]="G",r[i+1]="",s[i+1]="G"):(e[i+1]=l,n[i+1]=l,r[i+1]=l,s[i+1]=l),i++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Z1=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new Oz(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(s=>s.resolveAnchors(e,n));return new Oz(t,r,this._items.map(s=>s.ruleId))}},Oz=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},BP=class{constructor(t,e){this.languageId=t,this.tokenType=e}},$nt=class fO{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new BP(e,8),this._embeddedLanguagesMatcher=new Unt(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?fO._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new BP(0,0);_getBasicScopeAttributes=new Hue(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new BP(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(fO.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},Unt=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Uue(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},Lz=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function Jue(t,e,n,r,s,i,o,a){const l=e.content.length;let c=!1,u=-1;if(o){const f=Hnt(t,e,n,r,s,i);s=f.stack,r=f.linePos,n=f.isFirstLine,u=f.anchorPosition}const d=Date.now();for(;!c;){if(a!==0&&Date.now()-d>a)return new Lz(s,!0);h()}return new Lz(s,!1);function h(){const f=znt(t,e,n,r,s,u);if(!f){i.produce(s,l),c=!0;return}const p=f.captureIndices,m=f.matchedRuleId,g=p&&p.length>0?p[0].end>r:!1;if(m===jnt){const b=s.getRule(t);i.produce(s,p[0].start),s=s.withContentNameScopesList(s.nameScopesList),Zy(t,e,n,s,i,b.endCaptures,p),i.produce(s,p[0].end);const v=s;if(s=s.parent,u=v.getAnchorPos(),!g&&v.getEnterPos()===r){s=v,i.produce(s,l),c=!0;return}}else{const b=t.getRule(m);i.produce(s,p[0].start);const v=s,w=b.getName(e.content,p),_=s.contentNameScopesList.pushAttributed(w,t);if(s=s.push(m,r,u,p[0].end===l,null,_,_),b instanceof hO){const S=b;Zy(t,e,n,s,i,S.beginCaptures,p),i.produce(s,p[0].end),u=p[0].end;const E=S.getContentName(e.content,p),k=_.pushAttributed(E,t);if(s=s.withContentNameScopesList(k),S.endHasBackReferences&&(s=s.withEndRule(S.getEndWithResolvedBackReferences(e.content,p))),!g&&v.hasSameRuleAs(s)){s=s.pop(),i.produce(s,l),c=!0;return}}else if(b instanceof qk){const S=b;Zy(t,e,n,s,i,S.beginCaptures,p),i.produce(s,p[0].end),u=p[0].end;const E=S.getContentName(e.content,p),k=_.pushAttributed(E,t);if(s=s.withContentNameScopesList(k),S.whileHasBackReferences&&(s=s.withEndRule(S.getWhileWithResolvedBackReferences(e.content,p))),!g&&v.hasSameRuleAs(s)){s=s.pop(),i.produce(s,l),c=!0;return}}else if(Zy(t,e,n,s,i,b.captures,p),i.produce(s,p[0].end),s=s.pop(),!g){s=s.safePop(),i.produce(s,l),c=!0;return}}p[0].end>r&&(r=p[0].end,n=!1)}}function Hnt(t,e,n,r,s,i){let o=s.beginRuleCapturedEOL?0:-1;const a=[];for(let l=s;l;l=l.pop()){const c=l.getRule(t);c instanceof qk&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=Gnt(l.rule,t,l.stack.endRule,n,r===o),d=c.findNextMatchSync(e,r,u);if(d){if(d.ruleId!==que){s=l.stack.pop();break}d.captureIndices&&d.captureIndices.length&&(i.produce(l.stack,d.captureIndices[0].start),Zy(t,e,n,l.stack,i,l.rule.whileCaptures,d.captureIndices),i.produce(l.stack,d.captureIndices[0].end),o=d.captureIndices[0].end,d.captureIndices[0].end>r&&(r=d.captureIndices[0].end,n=!1))}else{s=l.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:o,isFirstLine:n}}function znt(t,e,n,r,s,i){const o=Vnt(t,e,n,r,s,i),a=t.getInjections();if(a.length===0)return o;const l=Wnt(a,t,e,n,r,s,i);if(!l)return o;if(!o)return l;const c=o.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:o}function Vnt(t,e,n,r,s,i){const o=s.getRule(t),{ruleScanner:a,findOptions:l}=Xue(o,t,s.endRule,n,r===i),c=a.findNextMatchSync(e,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function Wnt(t,e,n,r,s,i,o){let a=Number.MAX_VALUE,l=null,c,u=0;const d=i.contentNameScopesList.getScopeNames();for(let h=0,f=t.length;h<f;h++){const p=t[h];if(!p.matcher(d))continue;const m=e.getRule(p.ruleId),{ruleScanner:g,findOptions:b}=Xue(m,e,null,r,s===o),v=g.findNextMatchSync(n,s,b);if(!v)continue;const w=v.captureIndices[0].start;if(!(w>=a)&&(a=w,l=v.captureIndices,c=v.ruleId,u=p.priority,a===s))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function Xue(t,e,n,r,s){return{ruleScanner:t.compileAG(e,n,r,s),findOptions:0}}function Gnt(t,e,n,r,s){return{ruleScanner:t.compileWhileAG(e,n,r,s),findOptions:0}}function Zy(t,e,n,r,s,i,o){if(i.length===0)return;const a=e.content,l=Math.min(i.length,o.length),c=[],u=o[0].end;for(let d=0;d<l;d++){const h=i[d];if(h===null)continue;const f=o[d];if(f.length===0)continue;if(f.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=f.start;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?s.produceFromScopes(c[c.length-1].scopes,f.start):s.produce(r,f.start),h.retokenizeCapturedWithRuleId){const m=h.getName(a,o),g=r.contentNameScopesList.pushAttributed(m,t),b=h.getContentName(a,o),v=g.pushAttributed(b,t),w=r.push(h.retokenizeCapturedWithRuleId,f.start,-1,!1,null,g,v),_=t.createOnigString(a.substring(0,f.end));Jue(t,_,n&&f.start===0,f.start,w,s,!1,0),Wue(_);continue}const p=h.getName(a,o);if(p!==null){const g=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(p,t);c.push(new qnt(g,f.end))}}for(;c.length>0;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var qnt=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function Knt(t,e,n,r,s,i,o,a){return new Jnt(t,e,n,r,s,i,o,a)}function Dz(t,e,n,r,s){const i=Wk(e,Kk),o=Kue.getCompiledRuleId(n,r,s.repository);for(const a of i)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:s,priority:a.priority})}function Kk(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let s=n;s<e.length;s++)if(Ynt(e[s],r))return n=s+1,!0;return!1})}function Ynt(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var Jnt=class{constructor(t,e,n,r,s,i,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=i,this._onigLib=a,this._basicScopeAttributesProvider=new $nt(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=Mz(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const l of Object.keys(s)){const c=Wk(l,Kk);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:s[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const s=r.injections;if(s)for(let o in s)Dz(e,o,s[o],this,r);const i=this._grammarRepository.injections(n);i&&i.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&Dz(e,l,a,this,a)}})}return e.sort((s,i)=>s.priority-i.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=Mz(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=Kue.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===pO.NULL){s=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),d=x0.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),h=this.getRule(this._rootId).getName(null,null);let f;h?f=$v.createRootAndLookUpScopeName(h,d,this):f=$v.createRoot("unknown",d),e=new pO(null,this._rootId,-1,-1,!1,null,f,f)}else s=!1,e.reset();t=t+`
`;const i=this.createOnigString(t),o=i.content.length,a=new Znt(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=Jue(this,i,s,0,e,a,!0,r);return Wue(i),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function Mz(t,e){return t=mnt(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var $v=class Zl{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,s=e?.scopePath??null;for(const i of n)s=FP.push(s,i.scopeNames),r=new Zl(r,s,i.encodedTokenAttributes);return r}static createRoot(e,n){return new Zl(null,new FP(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const s=r.getMetadataForScope(e),i=new FP(null,e),o=r.themeProvider.themeMatch(i),a=Zl.mergeAttributes(n,s,o);return new Zl(null,i,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Zl.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let s=-1,i=0,o=0;return r!==null&&(s=r.fontStyle,i=r.foregroundId,o=r.backgroundId),x0.set(e,n.languageId,n.tokenType,null,s,i,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Zl._pushAttributed(this,e,n);const r=e.split(/ /g);let s=this;for(const i of r)s=Zl._pushAttributed(s,i,n);return s}static _pushAttributed(e,n,r){const s=r.getMetadataForScope(n),i=e.scopePath.push(n),o=r.themeProvider.themeMatch(i),a=Zl.mergeAttributes(e.tokenAttributes,s,o);return new Zl(e,i,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},pO=class pf{constructor(e,n,r,s,i,o,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=i,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new pf(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:pf._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?$v.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){pf._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,s,i,o,a){return new pf(this,e,n,r,s,i,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new pf(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=$v.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new pf(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,$v.fromExtension(r,n.contentNameScopesList))}},Xnt=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Wk(n,Kk).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Wk(n,Kk).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},Znt=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(i)&&(r=x0.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(i))}if(s&&(r=x0.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},Qnt=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,s){if(!this._grammars.has(t)){let i=this._rawGrammars.get(t);if(!i)return null;this._grammars.set(t,Knt(t,i,e,n,r,s,this,this._onigLib))}return this._grammars.get(t)}},ert=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new Qnt(Vk.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(Vk.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new Xnt(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,s,i){const o=new Pnt(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,s,i)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,n=0,r=null,s=null,i=null){return this._syncRegistry.grammarForScopeName(e,n,r,s,i)}},mO=pO.NULL;class sx{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}sx.prototype.normal={};sx.prototype.property={};sx.prototype.space=void 0;function Zue(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new sx(n,r,e)}function gO(t){return t.toLowerCase()}class vo{constructor(e,n){this.attribute=n,this.property=e}}vo.prototype.attribute="";vo.prototype.booleanish=!1;vo.prototype.boolean=!1;vo.prototype.commaOrSpaceSeparated=!1;vo.prototype.commaSeparated=!1;vo.prototype.defined=!1;vo.prototype.mustUseProperty=!1;vo.prototype.number=!1;vo.prototype.overloadedBoolean=!1;vo.prototype.property="";vo.prototype.spaceSeparated=!1;vo.prototype.space=void 0;let trt=0;const un=qp(),is=qp(),Que=qp(),wt=qp(),hr=qp(),Mg=qp(),Io=qp();function qp(){return 2**++trt}const bO=Object.freeze(Object.defineProperty({__proto__:null,boolean:un,booleanish:is,commaOrSpaceSeparated:Io,commaSeparated:Mg,number:wt,overloadedBoolean:Que,spaceSeparated:hr},Symbol.toStringTag,{value:"Module"})),$P=Object.keys(bO);class E8 extends vo{constructor(e,n,r,s){let i=-1;if(super(e,n),jz(this,"space",s),typeof r=="number")for(;++i<$P.length;){const o=$P[i];jz(this,$P[i],(r&bO[o])===bO[o])}}}E8.prototype.defined=!0;function jz(t,e,n){n&&(t[e]=n)}function cb(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const i=new E8(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[gO(r)]=r,n[gO(i.attribute)]=r}return new sx(e,n,t.space)}const ede=cb({properties:{ariaActiveDescendant:null,ariaAtomic:is,ariaAutoComplete:null,ariaBusy:is,ariaChecked:is,ariaColCount:wt,ariaColIndex:wt,ariaColSpan:wt,ariaControls:hr,ariaCurrent:null,ariaDescribedBy:hr,ariaDetails:null,ariaDisabled:is,ariaDropEffect:hr,ariaErrorMessage:null,ariaExpanded:is,ariaFlowTo:hr,ariaGrabbed:is,ariaHasPopup:null,ariaHidden:is,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:hr,ariaLevel:wt,ariaLive:null,ariaModal:is,ariaMultiLine:is,ariaMultiSelectable:is,ariaOrientation:null,ariaOwns:hr,ariaPlaceholder:null,ariaPosInSet:wt,ariaPressed:is,ariaReadOnly:is,ariaRelevant:null,ariaRequired:is,ariaRoleDescription:hr,ariaRowCount:wt,ariaRowIndex:wt,ariaRowSpan:wt,ariaSelected:is,ariaSetSize:wt,ariaSort:null,ariaValueMax:wt,ariaValueMin:wt,ariaValueNow:wt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function tde(t,e){return e in t?t[e]:e}function nde(t,e){return tde(t,e.toLowerCase())}const nrt=cb({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Mg,acceptCharset:hr,accessKey:hr,action:null,allow:null,allowFullScreen:un,allowPaymentRequest:un,allowUserMedia:un,alt:null,as:null,async:un,autoCapitalize:null,autoComplete:hr,autoFocus:un,autoPlay:un,blocking:hr,capture:null,charSet:null,checked:un,cite:null,className:hr,cols:wt,colSpan:null,content:null,contentEditable:is,controls:un,controlsList:hr,coords:wt|Mg,crossOrigin:null,data:null,dateTime:null,decoding:null,default:un,defer:un,dir:null,dirName:null,disabled:un,download:Que,draggable:is,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:un,formTarget:null,headers:hr,height:wt,hidden:un,high:wt,href:null,hrefLang:null,htmlFor:hr,httpEquiv:hr,id:null,imageSizes:null,imageSrcSet:null,inert:un,inputMode:null,integrity:null,is:null,isMap:un,itemId:null,itemProp:hr,itemRef:hr,itemScope:un,itemType:hr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:un,low:wt,manifest:null,max:null,maxLength:wt,media:null,method:null,min:null,minLength:wt,multiple:un,muted:un,name:null,nonce:null,noModule:un,noValidate:un,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:un,optimum:wt,pattern:null,ping:hr,placeholder:null,playsInline:un,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:un,referrerPolicy:null,rel:hr,required:un,reversed:un,rows:wt,rowSpan:wt,sandbox:hr,scope:null,scoped:un,seamless:un,selected:un,shadowRootClonable:un,shadowRootDelegatesFocus:un,shadowRootMode:null,shape:null,size:wt,sizes:null,slot:null,span:wt,spellCheck:is,src:null,srcDoc:null,srcLang:null,srcSet:null,start:wt,step:null,style:null,tabIndex:wt,target:null,title:null,translate:null,type:null,typeMustMatch:un,useMap:null,value:is,width:wt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:hr,axis:null,background:null,bgColor:null,border:wt,borderColor:null,bottomMargin:wt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:un,declare:un,event:null,face:null,frame:null,frameBorder:null,hSpace:wt,leftMargin:wt,link:null,longDesc:null,lowSrc:null,marginHeight:wt,marginWidth:wt,noResize:un,noHref:un,noShade:un,noWrap:un,object:null,profile:null,prompt:null,rev:null,rightMargin:wt,rules:null,scheme:null,scrolling:is,standby:null,summary:null,text:null,topMargin:wt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:wt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:un,disableRemotePlayback:un,prefix:null,property:null,results:wt,security:null,unselectable:null},space:"html",transform:nde}),rrt=cb({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Io,accentHeight:wt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:wt,amplitude:wt,arabicForm:null,ascent:wt,attributeName:null,attributeType:null,azimuth:wt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:wt,by:null,calcMode:null,capHeight:wt,className:hr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:wt,diffuseConstant:wt,direction:null,display:null,dur:null,divisor:wt,dominantBaseline:null,download:un,dx:null,dy:null,edgeMode:null,editable:null,elevation:wt,enableBackground:null,end:null,event:null,exponent:wt,externalResourcesRequired:null,fill:null,fillOpacity:wt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Mg,g2:Mg,glyphName:Mg,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:wt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:wt,horizOriginX:wt,horizOriginY:wt,id:null,ideographic:wt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:wt,k:wt,k1:wt,k2:wt,k3:wt,k4:wt,kernelMatrix:Io,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:wt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:wt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:wt,overlineThickness:wt,paintOrder:null,panose1:null,path:null,pathLength:wt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:hr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:wt,pointsAtY:wt,pointsAtZ:wt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Io,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Io,rev:Io,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Io,requiredFeatures:Io,requiredFonts:Io,requiredFormats:Io,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:wt,specularExponent:wt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:wt,strikethroughThickness:wt,string:null,stroke:null,strokeDashArray:Io,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:wt,strokeOpacity:wt,strokeWidth:null,style:null,surfaceScale:wt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Io,tabIndex:wt,tableValues:null,target:null,targetX:wt,targetY:wt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Io,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:wt,underlineThickness:wt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:wt,values:null,vAlphabetic:wt,vMathematical:wt,vectorEffect:null,vHanging:wt,vIdeographic:wt,version:null,vertAdvY:wt,vertOriginX:wt,vertOriginY:wt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:wt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:tde}),rde=cb({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),sde=cb({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:nde}),ide=cb({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),srt=/[A-Z]/g,Fz=/-[a-z]/g,irt=/^data[-\w.:]+$/i;function ort(t,e){const n=gO(e);let r=e,s=vo;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&irt.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(Fz,lrt);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!Fz.test(i)){let o=i.replace(srt,art);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=E8}return new s(r,e)}function art(t){return"-"+t.toLowerCase()}function lrt(t){return t.charAt(1).toUpperCase()}const crt=Zue([ede,nrt,rde,sde,ide],"html"),ode=Zue([ede,rrt,rde,sde,ide],"svg"),urt=/["&'<>`]/g,drt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hrt=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,frt=/[|\\{}()[\]^$+*?.]/g,Bz=new WeakMap;function prt(t,e){if(t=t.replace(e.subset?mrt(e.subset):urt,r),e.subset||e.escapeOnly)return t;return t.replace(drt,n).replace(hrt,r);function n(s,i,o){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,o.charCodeAt(i+2),e)}function r(s,i,o){return e.format(s.charCodeAt(0),o.charCodeAt(i+1),e)}}function mrt(t){let e=Bz.get(t);return e||(e=grt(t),Bz.set(t,e)),e}function grt(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(frt,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const brt=/[\dA-Fa-f]/;function yrt(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!brt.test(String.fromCharCode(e))?r:r+";"}const vrt=/\d/;function wrt(t,e,n){const r="&#"+String(t);return n&&e&&!vrt.test(String.fromCharCode(e))?r:r+";"}const xrt=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],UP={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},_rt=["cent","copy","divide","gt","lt","not","para","times"],ade={}.hasOwnProperty,yO={};let k2;for(k2 in UP)ade.call(UP,k2)&&(yO[UP[k2]]=k2);const Srt=/[^\dA-Za-z]/;function Ert(t,e,n,r){const s=String.fromCharCode(t);if(ade.call(yO,s)){const i=yO[s],o="&"+i;return n&&xrt.includes(i)&&!_rt.includes(i)&&(!r||e&&e!==61&&Srt.test(String.fromCharCode(e)))?o:o+";"}return""}function krt(t,e,n){let r=yrt(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=Ert(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const i=wrt(t,e,n.omitOptionalSemicolons);i.length<r.length&&(r=i)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function jg(t,e){return prt(t,Object.assign({format:krt},e))}const Crt=/^>|^->|<!--|-->|--!>|<!-$/g,Art=[">"],Trt=["<",">"];function Prt(t,e,n,r){return r.settings.bogusComments?"<?"+jg(t.value,Object.assign({},r.settings.characterReferences,{subset:Art}))+">":"<!--"+t.value.replace(Crt,s)+"-->";function s(i){return jg(i,Object.assign({},r.settings.characterReferences,{subset:Trt}))}}function Nrt(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}const Irt=/[ \t\n\f\r]/g;function k8(t){return typeof t=="object"?t.type==="text"?$z(t.value):!1:$z(t)}function $z(t){return t.replace(Irt,"")===""}const ws=cde(1),lde=cde(-1),Rrt=[];function cde(t){return e;function e(n,r,s){const i=n?n.children:Rrt;let o=(r||0)+t,a=i[o];if(!s)for(;a&&k8(a);)o+=t,a=i[o];return a}}const Ort={}.hasOwnProperty;function ude(t){return e;function e(n,r,s){return Ort.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const C8=ude({body:Drt,caption:HP,colgroup:HP,dd:Brt,dt:Frt,head:HP,html:Lrt,li:jrt,optgroup:$rt,option:Urt,p:Mrt,rp:Uz,rt:Uz,tbody:zrt,td:Hz,tfoot:Vrt,th:Hz,thead:Hrt,tr:Wrt});function HP(t,e,n){const r=ws(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&k8(r.value.charAt(0)))}function Lrt(t,e,n){const r=ws(n,e);return!r||r.type!=="comment"}function Drt(t,e,n){const r=ws(n,e);return!r||r.type!=="comment"}function Mrt(t,e,n){const r=ws(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function jrt(t,e,n){const r=ws(n,e);return!r||r.type==="element"&&r.tagName==="li"}function Frt(t,e,n){const r=ws(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function Brt(t,e,n){const r=ws(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function Uz(t,e,n){const r=ws(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function $rt(t,e,n){const r=ws(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function Urt(t,e,n){const r=ws(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function Hrt(t,e,n){const r=ws(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function zrt(t,e,n){const r=ws(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function Vrt(t,e,n){return!ws(n,e)}function Wrt(t,e,n){const r=ws(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function Hz(t,e,n){const r=ws(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const Grt=ude({body:Yrt,colgroup:Jrt,head:Krt,html:qrt,tbody:Xrt});function qrt(t){const e=ws(t,-1);return!e||e.type!=="comment"}function Krt(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function Yrt(t){const e=ws(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&k8(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Jrt(t,e,n){const r=lde(n,e),s=ws(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&C8(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function Xrt(t,e,n){const r=lde(n,e),s=ws(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&C8(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const C2={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Zrt(t,e,n,r){const s=r.schema,i=s.space==="svg"?!1:r.settings.omitOptionalTags;let o=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;s.space==="html"&&t.tagName==="svg"&&(r.schema=ode);const c=Qrt(r,t.properties),u=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,u&&(o=!1),(c||!i||!Grt(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),o&&(s.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!o&&(!i||!C8(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function Qrt(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const i=est(t,s,e[s]);i&&n.push(i)}}for(;++r<n.length;){const i=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&i!=='"'&&i!=="'"&&(n[r]+=" ")}return n.join("")}function est(t,e,n){const r=ort(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,i=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=jg(r.attribute,Object.assign({},t.settings.characterReferences,{subset:C2.name[s][i]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?LM:DM)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=jg(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:C2.unquoted[s][i]}))),a!==n&&(t.settings.quoteSmart&&Mk(n,o)>Mk(n,t.alternative)&&(o=t.alternative),a=o+jg(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?C2.single:C2.double)[s][i],attribute:!0}))+o),l+(a&&"="+a))}const tst=["<","&"];function dde(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:jg(t.value,Object.assign({},r.settings.characterReferences,{subset:tst}))}function nst(t,e,n,r){return r.settings.allowDangerousHtml?t.value:dde(t,e,n,r)}function rst(t,e,n,r){return r.all(t)}const sst=BM("type",{invalid:ist,unknown:ost,handlers:{comment:Prt,doctype:Nrt,element:Zrt,raw:nst,root:rst,text:dde}});function ist(t){throw new Error("Expected node, not `"+t+"`")}function ost(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const ast={},lst={},cst=[];function ust(t,e){const n=ast,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:dst,all:hst,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||Lae,characterReferences:n.characterReferences||lst,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?ode:crt,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function dst(t,e,n){return sst(t,e,n,this)}function hst(t){const e=[],n=t&&t.children||cst;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function fst(t){return Array.isArray(t)?t:[t]}function uT(t,e=!1){const n=t.split(/(\r?\n)/g);let r=0;const s=[];for(let i=0;i<n.length;i+=2){const o=e?n[i]+(n[i+1]||""):n[i];s.push([o,r]),r+=n[i].length,r+=n[i+1]?.length||0}return s}function A8(t){return!t||["plaintext","txt","text","plain"].includes(t)}function T8(t){return t==="ansi"||A8(t)}function P8(t){return t==="none"}function hde(t){return P8(t)}function fde(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function pst(t,e){let n=0;const r=[];for(const s of e)s>n&&r.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function mst(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return n.length?t.map(r=>r.flatMap(s=>{const i=n.filter(o=>s.offset<o&&o<s.offset+s.content.length).map(o=>o-s.offset).sort((o,a)=>o-a);return i.length?pst(s,i):s})):t}async function pde(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function Yk(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[s,i]of Object.entries(e?.colorReplacements||{}))typeof i=="string"?n[s]=i:s===r&&Object.assign(n,i);return n}function Nf(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function mde(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&Iu.Italic&&(e["font-style"]="italic"),t.fontStyle&Iu.Bold&&(e["font-weight"]="bold"),t.fontStyle&Iu.Underline&&(e["text-decoration"]="underline")),e}function gst(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}function bst(t){const e=uT(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let i=s,o=0;for(const a of e){if(i<a.length)break;i-=a.length,o++}return{line:o,character:i}}function r(s,i){let o=0;for(let a=0;a<s;a++)o+=e[a].length;return o+=i,o}return{lines:e,indexToPos:n,posToIndex:r}}class Pi extends Error{constructor(e){super(e),this.name="ShikiError"}}const gde=new WeakMap;function dT(t,e){gde.set(t,e)}function Q1(t){return gde.get(t)}class ub{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new ub(Object.fromEntries(fst(n).map(r=>[r,mO])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,s]=e;this.lang=r,this._stacks={[s]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return zz(this._stacks[this.theme])}getScopes(e=this.theme){return zz(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function zz(t){const e=[],n=new Set;function r(s){if(n.has(s))return;n.add(s);const i=s?.nameScopesList?.scopeName;i&&e.push(i),s.parent&&r(s.parent)}return r(t),e}function yst(t,e){if(!(t instanceof ub))throw new Pi("Invalid grammar state");return t.getInternalStack(e)}function vst(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new Pi(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...s.indexToPos(o),offset:o}}else{const a=s.lines[o.line];if(a===void 0)throw new Pi(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${s.lines.length}`);if(o.character<0||o.character>a.length)throw new Pi(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,offset:s.posToIndex(o.line,o.character)}}};const s=bst(n.source),i=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));wst(i),t.set(n.meta,{decorations:i,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return mst(n,s)},code(n){if(!this.options.decorations?.length)return;const r=e(this),s=Array.from(n.children).filter(u=>u.type==="element"&&u.tagName==="span");if(s.length!==r.converter.lines.length)throw new Pi(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function i(u,d,h,f){const p=s[u];let m="",g=-1,b=-1;if(d===0&&(g=0),h===0&&(b=0),h===Number.POSITIVE_INFINITY&&(b=p.children.length),g===-1||b===-1)for(let w=0;w<p.children.length;w++)m+=bde(p.children[w]),g===-1&&m.length===d&&(g=w+1),b===-1&&m.length===h&&(b=w+1);if(g===-1)throw new Pi(`Failed to find start index for decoration ${JSON.stringify(f.start)}`);if(b===-1)throw new Pi(`Failed to find end index for decoration ${JSON.stringify(f.end)}`);const v=p.children.slice(g,b);if(!f.alwaysWrap&&v.length===p.children.length)a(p,f,"line");else if(!f.alwaysWrap&&v.length===1&&v[0].type==="element")a(v[0],f,"token");else{const w={type:"element",tagName:"span",properties:{},children:v};a(w,f,"wrapper"),p.children.splice(g,v.length,w)}}function o(u,d){s[u]=a(s[u],d,"line")}function a(u,d,h){const f=d.properties||{},p=d.transform||(m=>m);return u.tagName=d.tagName||"span",u.properties={...u.properties,...f,class:u.properties.class},d.properties?.class&&fde(u,d.properties.class),u=p(u,h)||u,u}const l=[],c=r.decorations.sort((u,d)=>d.start.offset-u.start.offset);for(const u of c){const{start:d,end:h}=u;if(d.line===h.line)i(d.line,d.character,h.character,u);else if(d.line<h.line){i(d.line,d.character,Number.POSITIVE_INFINITY,u);for(let f=d.line+1;f<h.line;f++)l.unshift(()=>o(f,u));i(h.line,0,h.character,u)}}l.forEach(u=>u())}}}function wst(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new Pi(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const s=t[r],i=n.start.offset<s.start.offset&&s.start.offset<n.end.offset,o=n.start.offset<s.end.offset&&s.end.offset<n.end.offset,a=s.start.offset<n.start.offset&&n.start.offset<s.end.offset,l=s.start.offset<n.end.offset&&n.end.offset<s.end.offset;if(i||o||a||l){if(o&&o||a&&l)continue;throw new Pi(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function bde(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(bde).join(""):""}const xst=[vst()];function Jk(t){return[...t.transformers||[],...xst]}var If=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],zP={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function _st(t,e){const n=t.indexOf("\x1B[",e);if(n!==-1){const r=t.indexOf("m",n);return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function Vz(t,e){let n=1;const r=t[e+n++];let s;if(r==="2"){const i=[t[e+n++],t[e+n++],t[e+n]].map(o=>Number.parseInt(o));i.length===3&&!i.some(o=>Number.isNaN(o))&&(s={type:"rgb",rgb:i})}else if(r==="5"){const i=Number.parseInt(t[e+n]);Number.isNaN(i)||(s={type:"table",index:Number(i)})}return[n,s]}function Sst(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],s=Number.parseInt(r);if(!Number.isNaN(s))if(s===0)e.push({type:"resetAll"});else if(s<=9)zP[s]&&e.push({type:"setDecoration",value:zP[s]});else if(s<=29){const i=zP[s-20];i&&e.push({type:"resetDecoration",value:i})}else if(s<=37)e.push({type:"setForegroundColor",value:{type:"named",name:If[s-30]}});else if(s===38){const[i,o]=Vz(t,n);o&&e.push({type:"setForegroundColor",value:o}),n+=i}else if(s===39)e.push({type:"resetForegroundColor"});else if(s<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:If[s-40]}});else if(s===48){const[i,o]=Vz(t,n);o&&e.push({type:"setBackgroundColor",value:o}),n+=i}else s===49?e.push({type:"resetBackgroundColor"}):s>=90&&s<=97?e.push({type:"setForegroundColor",value:{type:"named",name:If[s-90+8]}}):s>=100&&s<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:If[s-100+8]}})}return e}function Est(){let t=null,e=null,n=new Set;return{parse(r){const s=[];let i=0;do{const o=_st(r,i),a=o.sequence?r.substring(i,o.startPosition):r.substring(i);if(a.length>0&&s.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const l=Sst(o.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,n.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&n.add(c.value)}i=o.position}while(i<r.length);return s}}}var kst={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Cst(t=kst){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let c=0;c<If.length;c++)r.push(e(If[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let d=0;d<6;d++)r.push(n([a[c],a[u],a[d]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function i(a){return s()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return i(a.index)}}return{value:o}}function Ast(t,e,n){const r=Yk(t,n),s=uT(e),i=Cst(Object.fromEntries(If.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=Est();return s.map(a=>o.parse(a[0]).map(l=>{let c,u;l.decorations.has("reverse")?(c=l.background?i.value(l.background):t.bg,u=l.foreground?i.value(l.foreground):t.fg):(c=l.foreground?i.value(l.foreground):t.fg,u=l.background?i.value(l.background):void 0),c=Nf(c,r),u=Nf(u,r),l.decorations.has("dim")&&(c=Tst(c));let d=Iu.None;return l.decorations.has("bold")&&(d|=Iu.Bold),l.decorations.has("italic")&&(d|=Iu.Italic),l.decorations.has("underline")&&(d|=Iu.Underline),{content:l.value,offset:a[1],color:c,bgColor:u,fontStyle:d}}))}function Tst(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function N8(t,e,n={}){const{lang:r="text",theme:s=t.getLoadedThemes()[0]}=n;if(A8(r)||P8(s))return uT(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:i,colorMap:o}=t.setTheme(s);if(r==="ansi")return Ast(i,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new Du(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(i.name))throw new Du(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return Nst(e,a,i,o,n)}function Pst(...t){if(t.length===2)return Q1(t[1]);const[e,n,r={}]=t,{lang:s="text",theme:i=e.getLoadedThemes()[0]}=r;if(A8(s)||P8(i))throw new Du("Plain language does not have grammar state");if(s==="ansi")throw new Du("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(i),l=e.getLanguage(s);return new ub(Xk(n,l,o,a,r).stateStack,l.name,o.name)}function Nst(t,e,n,r,s){const i=Xk(t,e,n,r,s),o=new ub(Xk(t,e,n,r,s).stateStack,e.name,n.name);return dT(i.tokens,o),i.tokens}function Xk(t,e,n,r,s){const i=Yk(n,s),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=s,l=uT(t);let c=s.grammarState?yst(s.grammarState,n.name)??mO:s.grammarContextCode!=null?Xk(s.grammarContextCode,e,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:mO,u=[];const d=[];for(let h=0,f=l.length;h<f;h++){const[p,m]=l[h];if(p===""){u=[],d.push([]);continue}if(o>0&&p.length>=o){u=[],d.push([{content:p,offset:m,color:"",fontStyle:0}]);continue}let g,b,v;s.includeExplanation&&(g=e.tokenizeLine(p,c),b=g.tokens,v=0);const w=e.tokenizeLine2(p,c,a),_=w.tokens.length/2;for(let S=0;S<_;S++){const E=w.tokens[2*S],k=S+1<_?w.tokens[2*S+2]:p.length;if(E===k)continue;const x=w.tokens[2*S+1],I=Nf(r[x0.getForeground(x)],i),R=x0.getFontStyle(x),C={content:p.substring(E,k),offset:m+E,color:I,fontStyle:R};if(s.includeExplanation){const T=[];if(s.includeExplanation!=="scopeName")for(const P of n.settings){let U;switch(typeof P.scope){case"string":U=P.scope.split(/,/).map(ee=>ee.trim());break;case"object":U=P.scope;break;default:continue}T.push({settings:P,selectors:U.map(ee=>ee.split(/ /))})}C.explanation=[];let O=0;for(;E+O<k;){const P=b[v],U=p.substring(P.startIndex,P.endIndex);O+=U.length,C.explanation.push({content:U,scopes:s.includeExplanation==="scopeName"?Ist(P.scopes):Rst(T,P.scopes)}),v+=1}}u.push(C)}d.push(u),u=[],c=w.ruleStack}return{tokens:d,stateStack:c}}function Ist(t){return t.map(e=>({scopeName:e}))}function Rst(t,e){const n=[];for(let r=0,s=e.length;r<s;r++){const i=e[r];n[r]={scopeName:i,themeMatches:Lst(t,i,e.slice(0,r))}}return n}function Wz(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function Ost(t,e,n){if(!Wz(t[t.length-1],e))return!1;let r=t.length-2,s=n.length-1;for(;r>=0&&s>=0;)Wz(t[r],n[s])&&(r-=1),s-=1;return r===-1}function Lst(t,e,n){const r=[];for(const{selectors:s,settings:i}of t)for(const o of s)if(Ost(o,e,n)){r.push(i);break}return r}function yde(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),s=r.map(l=>{const c=N8(t,e,{...n,theme:l.theme}),u=Q1(c),d=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:d}}),i=Dst(...s.map(l=>l.tokens)),o=i[0].map((l,c)=>l.map((u,d)=>{const h={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in n&&n.includeExplanation&&(h.explanation=u.explanation),i.forEach((f,p)=>{const{content:m,explanation:g,offset:b,...v}=f[c][d];h.variants[r[p].color]=v}),h})),a=s[0].state?new ub(Object.fromEntries(s.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),s[0].state.lang):void 0;return a&&dT(o,a),o}function Dst(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const s=t.map(l=>l[r]),i=e.map(()=>[]);e.forEach((l,c)=>l.push(i[c]));const o=s.map(()=>0),a=s.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(i[c].push(u),o[c]+=1,a[c]=s[c][o[c]]):(i[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return e}function Zk(t,e,n){let r,s,i,o,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-"}=n,d=Object.entries(n.themes).filter(g=>g[1]).map(g=>({color:g[0],theme:g[1]})).sort((g,b)=>g.color===c?-1:b.color===c?1:0);if(d.length===0)throw new Du("`themes` option must not be empty");const h=yde(t,e,n);if(l=Q1(h),c&&!d.find(g=>g.color===c))throw new Du(`\`themes\` option must contain the defaultColor key \`${c}\``);const f=d.map(g=>t.getTheme(g.theme)),p=d.map(g=>g.color);i=h.map(g=>g.map(b=>Mst(b,p,u,c))),l&&dT(i,l);const m=d.map(g=>Yk(g.theme,n));s=d.map((g,b)=>(b===0&&c?"":`${u+g.color}:`)+(Nf(f[b].fg,m[b])||"inherit")).join(";"),r=d.map((g,b)=>(b===0&&c?"":`${u+g.color}-bg:`)+(Nf(f[b].bg,m[b])||"inherit")).join(";"),o=`shiki-themes ${f.map(g=>g.name).join(" ")}`,a=c?void 0:[s,r].join(";")}else if("theme"in n){const c=Yk(n.theme,n);i=N8(t,e,n);const u=t.getTheme(n.theme);r=Nf(u.bg,c),s=Nf(u.fg,c),o=u.name,l=Q1(i)}else throw new Du("Invalid options, either `theme` or `themes` must be provided");return{tokens:i,fg:s,bg:r,themeName:o,rootStyle:a,grammarState:l}}function Mst(t,e,n,r){const s={content:t.content,explanation:t.explanation,offset:t.offset},i=e.map(l=>mde(t.variants[l])),o=new Set(i.flatMap(l=>Object.keys(l))),a={};return i.forEach((l,c)=>{for(const u of o){const d=l[u]||"inherit";if(c===0&&r)a[u]=d;else{const h=u==="color"?"":u==="background-color"?"-bg":`-${u}`,f=n+e[c]+(u==="color"?"":h);a[f]=d}}}),s.htmlStyle=a,s}function Qk(t,e,n,r={meta:{},options:n,codeToHast:(s,i)=>Qk(t,s,i),codeToTokens:(s,i)=>Zk(t,s,i)}){let s=e;for(const f of Jk(n))s=f.preprocess?.call(r,s,n)||s;let{tokens:i,fg:o,bg:a,themeName:l,rootStyle:c,grammarState:u}=Zk(t,s,n);const{mergeWhitespaces:d=!0}=n;d===!0?i=Fst(i):d==="never"&&(i=Bst(i));const h={...r,get source(){return s}};for(const f of Jk(n))i=f.tokens?.call(h,i)||i;return jst(i,{...n,fg:o,bg:a,themeName:l,rootStyle:c},h,u)}function jst(t,e,n,r=Q1(t)){const s=Jk(e),i=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let c={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([p])=>!p.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:i};const d=[],h={...n,structure:a,addClassToHast:fde,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return c},get code(){return u},get lines(){return d}};if(t.forEach((p,m)=>{m&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&i.push({type:"text",value:`
`}));let g={type:"element",tagName:"span",properties:{class:"line"},children:[]},b=0;for(const v of p){let w={type:"element",tagName:"span",properties:{...v.htmlAttrs},children:[{type:"text",value:v.content}]};v.htmlStyle;const _=gst(v.htmlStyle||mde(v));_&&(w.properties.style=_);for(const S of s)w=S?.span?.call(h,w,m+1,b,g,v)||w;a==="inline"?o.children.push(w):a==="classic"&&g.children.push(w),b+=v.content.length}if(a==="classic"){for(const v of s)g=v?.line?.call(h,g,m+1)||g;d.push(g),i.push(g)}}),a==="classic"){for(const p of s)u=p?.code?.call(h,u)||u;c.children.push(u);for(const p of s)c=p?.pre?.call(h,c)||c;o.children.push(c)}let f=o;for(const p of s)f=p?.root?.call(h,f)||f;return r&&dT(f,r),f}function Fst(t){return t.map(e=>{const n=[];let r="",s=0;return e.forEach((i,o)=>{const l=!(i.fontStyle&&i.fontStyle&Iu.Underline);l&&i.content.match(/^\s+$/)&&e[o+1]?(s||(s=i.offset),r+=i.content):r?(l?n.push({...i,offset:s,content:r+i.content}):n.push({content:r,offset:s},i),s=0,r=""):n.push(i)}),n})}function Bst(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,i,o]=r;if(!s&&!o)return n;const a=[{...n,offset:n.offset+s.length,content:i}];return s&&a.unshift({content:s,offset:n.offset}),o&&a.push({content:o,offset:n.offset+s.length+i.length}),a}))}function $st(t,e,n){const r={meta:{},options:n,codeToHast:(i,o)=>Qk(t,i,o),codeToTokens:(i,o)=>Zk(t,i,o)};let s=ust(Qk(t,e,n,r));for(const i of Jk(n))s=i.postprocess?.call(r,s,n)||s;return s}const Gz={light:"#333333",dark:"#bbbbbb"},qz={light:"#fffffe",dark:"#1e1e1e"},Kz="__shiki_resolved";function I8(t){if(t?.[Kz])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?Gz.light:Gz.dark),n||(n=e.type==="light"?qz.light:qz.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const i=new Map;function o(a){if(i.has(a))return i.get(a);s+=1;const l=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(i.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const u={...a,settings:{...a.settings}};if(l){const d=o(a.settings.foreground);e.colorReplacements[d]=a.settings.foreground,u.settings.foreground=d}if(c){const d=o(a.settings.background);e.colorReplacements[d]=a.settings.background,u.settings.background=d}return u});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,Kz,{enumerable:!1,writable:!1,value:!0}),e}async function vde(t){return Array.from(new Set((await Promise.all(t.filter(e=>!T8(e)).map(async e=>await pde(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function wde(t){return(await Promise.all(t.map(async n=>hde(n)?null:I8(await pde(n))))).filter(n=>!!n)}let Ust=class extends ert{constructor(e,n,r,s={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=s,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=I8(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=Vk.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new Pi(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(i=>i.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(i=>{this._alias[i]=e.name}),this._loadedLanguagesCache=null,n.size)for(const i of n)this._resolvedGrammars.delete(i.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(i.scopeName),this._syncRegistry?._grammars?.delete(i.scopeName),this.loadLanguage(this._langMap.get(i.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const n=Array.from(this._langGraph.entries()),r=n.filter(([s,i])=>!i);if(r.length){const s=n.filter(([i,o])=>o&&o.embeddedLangs?.some(a=>r.map(([l])=>l).includes(a))).filter(i=>!r.includes(i));throw new Pi(`Missing languages ${r.map(([i])=>`\`${i}\``).join(", ")}, required by ${s.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[s,i]of n)this._resolver.addLanguage(i);for(const[s,i]of n)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}};class Hst{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let s=1;s<=n.length;s++){const i=n.slice(0,s).join(".");r=[...r,...this._injections.get(i)||[]]}return r}}let xy=0;function zst(t){xy+=1,t.warnings!==!1&&xy>=10&&xy%10===0&&console.warn(`[Shiki] ${xy} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Pi("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(I8),s=new Hst(t.engine,n),i=new Ust(s,r,n,t.langAlias);let o;function a(v){g();const w=i.getGrammar(typeof v=="string"?v:v.name);if(!w)throw new Pi(`Language \`${v}\` not found, you may need to load it first`);return w}function l(v){if(v==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};g();const w=i.getTheme(v);if(!w)throw new Pi(`Theme \`${v}\` not found, you may need to load it first`);return w}function c(v){g();const w=l(v);o!==v&&(i.setTheme(w),o=v);const _=i.getColorMap();return{theme:w,colorMap:_}}function u(){return g(),i.getLoadedThemes()}function d(){return g(),i.getLoadedLanguages()}function h(...v){g(),i.loadLanguages(v.flat(1))}async function f(...v){return h(await vde(v))}function p(...v){g();for(const w of v.flat(1))i.loadTheme(w)}async function m(...v){return g(),p(await wde(v))}function g(){if(e)throw new Pi("Shiki instance has been disposed")}function b(){e||(e=!0,i.dispose(),xy-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:d,loadLanguage:f,loadLanguageSync:h,loadTheme:m,loadThemeSync:p,dispose:b,[Symbol.dispose]:b}}async function Vst(t={}){t.loadWasm;const[e,n,r]=await Promise.all([wde(t.themes||[]),vde(t.langs||[]),t.engine||Mue(t.loadWasm||pnt())]);return zst({...t,themes:e,langs:n,engine:r})}async function Wst(t={}){const e=await Vst(t);return{getLastGrammarState:(...n)=>Pst(e,...n),codeToTokensBase:(n,r)=>N8(e,n,r),codeToTokensWithThemes:(n,r)=>yde(e,n,r),codeToTokens:(n,r)=>Zk(e,n,r),codeToHast:(n,r)=>Qk(e,n,r),codeToHtml:(n,r)=>$st(e,n,r),...e,getInternalContext:()=>e}}function Gst(t,e,n){let r,s,i;{const a=t;r=a.langs,s=a.themes,i=a.engine}async function o(a){function l(f){if(typeof f=="string"){if(T8(f))return[];const p=r[f];if(!p)throw new Du(`Language \`${f}\` is not included in this bundle. You may want to load it from external source.`);return p}return f}function c(f){if(hde(f))return"none";if(typeof f=="string"){const p=s[f];if(!p)throw new Du(`Theme \`${f}\` is not included in this bundle. You may want to load it from external source.`);return p}return f}const u=(a.themes??[]).map(f=>c(f)),d=(a.langs??[]).map(f=>l(f)),h=await Wst({engine:a.engine??i(),...a,themes:u,langs:d});return{...h,loadLanguage(...f){return h.loadLanguage(...f.map(l))},loadTheme(...f){return h.loadTheme(...f.map(c))}}}return o}function qst(t){let e;async function n(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else return e=t({...r,themes:r.themes||[],langs:r.langs||[]}),e}return n}function Kst(t){const e=qst(t);return{getSingletonHighlighter(n){return e(n)},async codeToHtml(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHtml(n,r)},async codeToHast(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHast(n,r)},async codeToTokens(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToTokens(n,r)},async codeToTokensBase(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).codeToTokensBase(n,r)},async codeToTokensWithThemes(n,r){return(await e({langs:[r.lang],themes:Object.values(r.themes).filter(Boolean)})).codeToTokensWithThemes(n,r)},async getLastGrammarState(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).getLastGrammarState(n,r)}}}const R8=Gst({langs:Due,themes:Jtt,engine:()=>Mue(ye(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:Yst}=Kst(R8),Jst=t=>R8(t),Xst={langs:["shell"],themes:["light-plus","dark-plus"]},Zst=await R8(Xst),Qst=N.memo(({messageId:t})=>{const e=N.useRef(!1),[n,r]=N.useState(!1),[s,i]=N.useState(!1),a=Bt(It.artifacts)[t],l=Bt(dD(a.runner.actions,u=>Object.values(u))),c=()=>{e.current=!0,r(!n)};return N.useEffect(()=>{if(l.length&&!n&&!e.current&&r(!0),l.length!==0&&a.type==="bundled"){const u=!l.find(d=>d.status!=="complete");s!==u&&i(u)}},[l]),y.jsxs("div",{className:"artifact border border-bolt-elements-borderColor flex flex-col overflow-hidden rounded-lg w-full transition-border duration-150",children:[y.jsxs("div",{className:"flex",children:[y.jsxs("button",{className:"flex items-stretch bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover w-full overflow-hidden",onClick:()=>{const u=It.showWorkbench.get();It.showWorkbench.set(!u)},children:[a.type=="bundled"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"p-4",children:s?y.jsx("div",{className:"i-ph:files-light",style:{fontSize:"2rem"}}):y.jsx("div",{className:"i-svg-spinners:90-ring-with-bg",style:{fontSize:"2rem"}})}),y.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor w-[1px]"})]}),y.jsxs("div",{className:"px-5 p-3.5 w-full text-left",children:[y.jsx("div",{className:"w-full text-bolt-elements-textPrimary font-medium leading-5 text-sm",children:a?.title}),y.jsx("div",{className:"w-full w-full text-bolt-elements-textSecondary text-xs mt-0.5",children:"Click to open Workbench"})]})]}),y.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor w-[1px]"}),y.jsx(Ic,{children:l.length&&a.type!=="bundled"&&y.jsx(lt.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:Go},className:"bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover",onClick:c,children:y.jsx("div",{className:"p-4",children:y.jsx("div",{className:n?"i-ph:caret-up-bold":"i-ph:caret-down-bold"})})})})]}),y.jsx(Ic,{children:a.type!=="bundled"&&n&&l.length>0&&y.jsxs(lt.div,{className:"actions",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:[y.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor h-[1px]"}),y.jsx("div",{className:"p-5 text-left bg-bolt-elements-actions-background",children:y.jsx(rit,{actions:l})})]})})]})});function eit({classsName:t,code:e}){return y.jsx("div",{className:Ne("text-xs",t),dangerouslySetInnerHTML:{__html:Zst.codeToHtml(e,{lang:"shell",theme:"dark-plus"})}})}const tit={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function nit(t){It.currentView.get()!=="code"&&It.currentView.set("code"),It.setSelectedFile(`${Hu}/${t}`)}const rit=N.memo(({actions:t})=>y.jsx(lt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:y.jsx("ul",{className:"list-none space-y-2.5",children:t.map((e,n)=>{const{status:r,type:s,content:i}=e,o=n===t.length-1;return y.jsxs(lt.li,{variants:tit,initial:"hidden",animate:"visible",transition:{duration:.2,ease:Go},children:[y.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[y.jsx("div",{className:Ne("text-lg",sit(e.status)),children:r==="running"?y.jsx(y.Fragment,{children:s!=="start"?y.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"}):y.jsx("div",{className:"i-ph:terminal-window-duotone"})}):r==="pending"?y.jsx("div",{className:"i-ph:circle-duotone"}):r==="complete"?y.jsx("div",{className:"i-ph:check"}):r==="failed"||r==="aborted"?y.jsx("div",{className:"i-ph:x"}):null}),s==="file"?y.jsxs("div",{children:["Create"," ",y.jsx("code",{className:"bg-bolt-elements-artifacts-inlineCode-background text-bolt-elements-artifacts-inlineCode-text px-1.5 py-1 rounded-md text-bolt-elements-item-contentAccent hover:underline cursor-pointer",onClick:()=>nit(e.filePath),children:e.filePath})]}):s==="shell"?y.jsx("div",{className:"flex items-center w-full min-h-[28px]",children:y.jsx("span",{className:"flex-1",children:"Run command"})}):s==="start"?y.jsx("a",{onClick:a=>{a.preventDefault(),It.currentView.set("preview")},className:"flex items-center w-full min-h-[28px]",children:y.jsx("span",{className:"flex-1",children:"Start Application"})}):null]}),(s==="shell"||s==="start")&&y.jsx(eit,{classsName:Ne("mt-1",{"mb-3.5":!o}),code:i})]},n)})})}));function sit(t){switch(t){case"pending":return"text-bolt-elements-textTertiary";case"running":return"text-bolt-elements-loader-progress";case"complete":return"text-bolt-elements-icon-success";case"aborted":return"text-bolt-elements-textSecondary";case"failed":return"text-bolt-elements-icon-error";default:return}}const iit="y",oit={CopyButtonContainer:iit},Yz=po("CodeBlock"),ait=N.memo(({className:t,code:e,language:n="plaintext",theme:r="dark-plus",disableCopy:s=!1})=>{const[i,o]=N.useState(void 0),[a,l]=N.useState(!1),c=()=>{a||(navigator.clipboard.writeText(e),l(!0),setTimeout(()=>{l(!1)},2e3))};return N.useEffect(()=>{n&&!T8(n)&&!(n in Due)&&Yz.warn(`Unsupported language '${n}'`),Yz.trace(`Language = ${n}`),(async()=>{o(await Yst(e,{lang:n,theme:r}))})()},[e]),y.jsxs("div",{className:Ne("relative group text-left",t),children:[y.jsx("div",{className:Ne(oit.CopyButtonContainer,"bg-transparant absolute top-[10px] right-[10px] rounded-md z-10 text-lg flex items-center justify-center opacity-0 group-hover:opacity-100",{"rounded-l-0 opacity-100":a}),children:!s&&y.jsx("button",{className:Ne("flex items-center bg-accent-500 p-[6px] justify-center before:bg-white before:rounded-l-md before:text-gray-500 before:border-r before:border-gray-300 rounded-md transition-theme",{"before:opacity-0":!a,"before:opacity-100":a}),title:"Copy Code",onClick:()=>c(),children:y.jsx("div",{className:"i-ph:clipboard-text-duotone"})})}),y.jsx("div",{dangerouslySetInnerHTML:{__html:i??""}})]})}),lit="x",cit={MarkdownContent:lit},uit=({title:t,children:e})=>{const[n,r]=N.useState(!1);return y.jsxs("div",{onClick:()=>r(!n),className:`
        bg-bolt-elements-background-depth-2
        shadow-md 
        rounded-lg 
        cursor-pointer 
        transition-all 
        duration-300
        ${n?"max-h-96":"max-h-13"}
        overflow-auto
        border border-bolt-elements-borderColor
      `,children:[y.jsxs("div",{className:"p-4 flex items-center gap-4 rounded-lg  text-bolt-elements-textSecondary font-medium leading-5 text-sm  border border-bolt-elements-borderColor",children:[y.jsx("div",{className:"i-ph:brain-thin text-2xl"}),y.jsxs("div",{className:"div",children:[y.jsxs("span",{children:[" ",t]})," ",!n&&y.jsx("span",{className:"text-bolt-elements-textTertiary",children:" - Click to expand"})]})]}),y.jsx("div",{className:`
        transition-opacity 
        duration-300
        p-4 
        rounded-lg 
        ${n?"opacity-100":"opacity-0"}
      `,children:e})]})},Jz=po("MarkdownComponent"),_0=N.memo(({children:t,html:e=!1,limitedMarkdown:n=!1})=>{Jz.trace("Render");const r=N.useMemo(()=>({div:({className:s,children:i,node:o,...a})=>{if(s?.includes("__boltArtifact__")){const l=o?.properties.dataMessageId;return l||Jz.error(`Invalid message id ${l}`),y.jsx(Qst,{messageId:l})}return s?.includes("__boltThought__")?y.jsx(uit,{title:"Thought process",children:i}):y.jsx("div",{className:s,...a,children:i})},pre:s=>{const{children:i,node:o,...a}=s,[l]=o?.children??[];if(l&&l.type==="element"&&l.tagName==="code"&&l.children[0].type==="text"){const{className:c,...u}=l.properties,[,d="plaintext"]=/language-(\w+)/.exec(String(c)||"")??[];return y.jsx(ait,{code:l.children[0].value,language:d,...u})}return y.jsx("pre",{...a,children:i})}}),[]);return y.jsx(Htt,{allowedElements:e8,className:cit.MarkdownContent,components:r,remarkPlugins:AYe(n),rehypePlugins:TYe(e),children:dit(t)})}),dit=t=>{if(!t||!t.includes("__boltArtifact__"))return t;const e=t.split(`
`),n=e.findIndex(r=>r.includes("__boltArtifact__"));return n===-1?t:(n>0&&e[n-1]?.trim().match(/^```\w*$/)&&(e[n-1]=""),n<e.length-1&&e[n+1]?.trim().match(/^```$/)&&(e[n+1]=""),e.join(`
`))},hit=({progress:t})=>y.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:y.jsx(lt.div,{className:"h-full bg-blue-500",initial:{width:0},animate:{width:`${t}%`},transition:{duration:.3}})}),fit=({progress:t})=>y.jsxs("div",{className:"mt-4 space-y-2",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm font-medium",children:t.message}),y.jsxs("span",{className:"text-sm text-gray-500",children:[t.progress,"%"]})]}),y.jsx(hit,{progress:t.progress||0}),t.details&&y.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[t.details.changedFiles&&t.details.changedFiles.length>0&&y.jsxs("div",{className:"mt-4",children:[y.jsx("div",{className:"font-medium mb-2",children:"Changed Files:"}),y.jsx("div",{className:"space-y-2",children:["Modified","Added","Deleted"].map(e=>{const n=t.details?.changedFiles?.filter(r=>r.startsWith(e))||[];return n.length===0?null:y.jsxs("div",{className:"space-y-1",children:[y.jsxs("div",{className:Ne("text-sm font-medium",{"text-blue-500":e==="Modified","text-green-500":e==="Added","text-red-500":e==="Deleted"}),children:[e," (",n.length,")"]}),y.jsx("div",{className:"pl-4 space-y-1",children:n.map((r,s)=>{const i=r.split(": ")[1];return y.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-2",children:[y.jsx("div",{className:Ne("w-4 h-4",{"i-ph:pencil-simple":e==="Modified","i-ph:plus":e==="Added","i-ph:trash":e==="Deleted","text-blue-500":e==="Modified","text-green-500":e==="Added","text-red-500":e==="Deleted"})}),y.jsx("span",{className:"font-mono text-xs",children:i})]},s)})})]},e)})})]}),t.details.totalSize&&y.jsxs("div",{className:"mt-1",children:["Total size: ",t.details.totalSize]}),t.details.additions!==void 0&&t.details.deletions!==void 0&&y.jsxs("div",{className:"mt-1",children:["Changes: ",y.jsxs("span",{className:"text-green-600",children:["+",t.details.additions]})," ",y.jsxs("span",{className:"text-red-600",children:["-",t.details.deletions]})]}),t.details.currentCommit&&t.details.remoteCommit&&y.jsxs("div",{className:"mt-1",children:["Updating from ",t.details.currentCommit," to ",t.details.remoteCommit]})]})]}),pit=()=>{const{isLatestBranch:t}=Rh(),[e,n]=N.useState(!1),[r,s]=N.useState(null),[i,o]=N.useState(()=>{const f=localStorage.getItem("update_settings");return f?JSON.parse(f):{autoUpdate:!1,notifyInApp:!0,checkInterval:24}}),[a,l]=N.useState(!1),[c,u]=N.useState(null);N.useEffect(()=>{localStorage.setItem("update_settings",JSON.stringify(i))},[i]);const d=async()=>{console.log("Starting update check..."),n(!0),s(null),u(null);try{const p=await fetch("/api/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:t?"main":"stable",autoUpdate:i.autoUpdate})});if(!p.ok)throw new Error(`Update check failed: ${p.statusText}`);const m=p.body?.getReader();if(!m)throw new Error("No response stream available");for(;;){const{done:g,value:b}=await m.read();if(g)break;const w=new TextDecoder().decode(b).split(`
`).filter(Boolean);for(const _ of w)try{const S=JSON.parse(_);u(S),S.error&&s(S.error),S.stage==="complete"&&(n(!1),S.error||(Ve.success("Update check completed"),S.details?.changedFiles?.length&&S.details.updateReady&&l(!0)))}catch(S){console.error("Error parsing progress update:",S)}}}catch(f){s(f instanceof Error?f.message:"Unknown error occurred"),Ut.logWarning("Update Check Failed",{type:"update",message:f instanceof Error?f.message:"Unknown error occurred"})}finally{n(!1)}},h=async()=>{l(!1);try{const p=await fetch("/api/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:t?"main":"stable",autoUpdate:!0})});if(!p.ok)throw new Error(`Update failed: ${p.statusText}`);const m=p.body?.getReader();if(!m)throw new Error("No response stream available");for(;;){const{done:g,value:b}=await m.read();if(g)break;const w=new TextDecoder().decode(b).split(`
`).filter(Boolean);for(const _ of w)try{const S=JSON.parse(_);u(S),S.error&&(s(S.error),Ve.error("Update failed")),S.stage==="complete"&&!S.error&&Ve.success("Update completed successfully")}catch(S){console.error("Error parsing update progress:",S)}}}catch(f){s(f instanceof Error?f.message:"Unknown error occurred"),Ve.error("Update failed")}};return y.jsxs("div",{className:"flex flex-col gap-6",children:[y.jsxs(lt.div,{className:"flex items-center gap-3",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[y.jsx("div",{className:"i-ph:arrow-circle-up text-xl text-purple-500"}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Updates"}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Check for and manage application updates"})]})]}),y.jsxs(lt.div,{className:"p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[y.jsx("div",{className:"i-ph:gear text-purple-500 w-5 h-5"}),y.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Update Settings"})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"Automatic Updates"}),y.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:"Automatically check and apply updates when available"})]}),y.jsx("button",{onClick:()=>o(f=>({...f,autoUpdate:!f.autoUpdate})),className:Ne("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",i.autoUpdate?"bg-purple-500":"bg-gray-200 dark:bg-gray-700"),children:y.jsx("span",{className:Ne("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",i.autoUpdate?"translate-x-6":"translate-x-1")})})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"In-App Notifications"}),y.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:"Show notifications when updates are available"})]}),y.jsx("button",{onClick:()=>o(f=>({...f,notifyInApp:!f.notifyInApp})),className:Ne("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",i.notifyInApp?"bg-purple-500":"bg-gray-200 dark:bg-gray-700"),children:y.jsx("span",{className:Ne("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",i.notifyInApp?"translate-x-6":"translate-x-1")})})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"Check Interval"}),y.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:"How often to check for updates"})]}),y.jsxs("select",{value:i.checkInterval,onChange:f=>o(p=>({...p,checkInterval:Number(f.target.value)})),className:Ne("px-3 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-bolt-elements-textPrimary","hover:bg-[#E5E5E5] dark:hover:bg-[#2A2A2A]","transition-colors duration-200"),children:[y.jsx("option",{value:"6",children:"6 hours"}),y.jsx("option",{value:"12",children:"12 hours"}),y.jsx("option",{value:"24",children:"24 hours"}),y.jsx("option",{value:"48",children:"48 hours"})]})]})]})]}),y.jsxs(lt.div,{className:"p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"i-ph:arrows-clockwise text-purple-500 w-5 h-5"}),y.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Update Status"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[c?.details?.updateReady&&!i.autoUpdate&&y.jsxs("button",{onClick:h,className:Ne("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-purple-500 text-white","hover:bg-purple-600","transition-colors duration-200"),children:[y.jsx("div",{className:"i-ph:arrow-circle-up w-4 h-4"}),"Update Now"]}),y.jsx("button",{onClick:()=>{s(null),d()},className:Ne("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-purple-500/10 hover:text-purple-500","dark:hover:bg-purple-500/20 dark:hover:text-purple-500","text-bolt-elements-textPrimary","transition-colors duration-200","disabled:opacity-50 disabled:cursor-not-allowed"),disabled:e,children:e?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(lt.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"i-ph:arrows-clockwise w-4 h-4"}),"Checking..."]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:arrows-clockwise w-4 h-4"}),"Check for Updates"]})})]})]}),c&&y.jsx(fit,{progress:c}),r&&y.jsx("div",{className:"mt-4 p-4 bg-red-100 text-red-700 rounded",children:r}),c?.details?.currentCommit&&c?.details?.remoteCommit&&y.jsxs("div",{className:"mt-4 text-sm text-bolt-elements-textSecondary",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsxs("p",{children:["Updates are fetched from: ",y.jsx("span",{className:"font-mono",children:"stackblitz-labs/bolt.diy"})," (",t?"main":"stable"," branch)"]}),y.jsxs("p",{className:"mt-1",children:["Current version: ",y.jsx("span",{className:"font-mono",children:c.details.currentCommit}),y.jsx("span",{className:"mx-2",children:""}),"Latest version: ",y.jsx("span",{className:"font-mono",children:c.details.remoteCommit})]})]}),c?.details?.compareUrl&&y.jsxs("a",{href:c.details.compareUrl,target:"_blank",rel:"noopener noreferrer",className:Ne("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-purple-500/10 hover:text-purple-500","dark:hover:bg-purple-500/20 dark:hover:text-purple-500","text-bolt-elements-textPrimary","transition-colors duration-200","w-fit"),children:[y.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Changes on GitHub"]})]}),c?.details?.additions!==void 0&&c?.details?.deletions!==void 0&&y.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:git-diff text-purple-500 w-4 h-4"}),"Changes: ",y.jsxs("span",{className:"text-green-600",children:["+",c.details.additions]})," ",y.jsxs("span",{className:"text-red-600",children:["-",c.details.deletions]})]})]}),c?.details?.changelog&&y.jsxs("div",{className:"mb-6",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("div",{className:"i-ph:scroll text-purple-500 w-5 h-5"}),y.jsx("p",{className:"font-medium",children:"Changelog"})]}),y.jsx("div",{className:"bg-[#F5F5F5] dark:bg-[#1A1A1A] rounded-lg p-4 overflow-auto max-h-[300px]",children:y.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",children:y.jsx(_0,{children:c.details.changelog})})})]}),c?.details?.compareUrl&&y.jsx("div",{className:"mt-4",children:y.jsxs("a",{href:c.details.compareUrl,target:"_blank",rel:"noopener noreferrer",className:Ne("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-purple-500/10 hover:text-purple-500","dark:hover:bg-purple-500/20 dark:hover:text-purple-500","text-bolt-elements-textPrimary","transition-colors duration-200","w-fit"),children:[y.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Changes on GitHub"]})}),c?.details?.commitMessages&&c.details.commitMessages.length>0&&y.jsxs("div",{className:"mb-6",children:[y.jsx("p",{className:"font-medium mb-2",children:"Changes in this Update:"}),y.jsx("div",{className:"bg-[#F5F5F5] dark:bg-[#1A1A1A] rounded-lg p-4 overflow-auto max-h-[400px]",children:y.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",children:c.details.commitMessages.map((f,p)=>y.jsx(_0,{children:f},p))})})]})]}),y.jsx(Ea,{open:a,onOpenChange:l,children:y.jsxs(t0,{children:[y.jsx(up,{children:"Update Available"}),y.jsx(OX,{children:y.jsxs("div",{className:"mt-4",children:[y.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary mb-4",children:["A new version is available from ",y.jsx("span",{className:"font-mono",children:"stackblitz-labs/bolt.diy"})," (",t?"main":"stable"," branch)"]}),c?.details?.compareUrl&&y.jsx("div",{className:"mb-6",children:y.jsxs("a",{href:c.details.compareUrl,target:"_blank",rel:"noopener noreferrer",className:Ne("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-purple-500/10 hover:text-purple-500","dark:hover:bg-purple-500/20 dark:hover:text-purple-500","text-bolt-elements-textPrimary","transition-colors duration-200","w-fit"),children:[y.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Changes on GitHub"]})}),c?.details?.commitMessages&&c.details.commitMessages.length>0&&y.jsxs("div",{className:"mb-6",children:[y.jsx("p",{className:"font-medium mb-2",children:"Commit Messages:"}),y.jsx("div",{className:"bg-[#F5F5F5] dark:bg-[#1A1A1A] rounded-lg p-3 space-y-2",children:c.details.commitMessages.map((f,p)=>y.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-start gap-2",children:[y.jsx("div",{className:"i-ph:git-commit text-purple-500 w-4 h-4 mt-0.5 flex-shrink-0"}),y.jsx("span",{children:f})]},p))})]}),c?.details?.totalSize&&y.jsxs("div",{className:"flex items-center gap-4 text-sm text-bolt-elements-textSecondary",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:file text-purple-500 w-4 h-4"}),"Total size: ",c.details.totalSize]}),c?.details?.additions!==void 0&&c?.details?.deletions!==void 0&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:git-diff text-purple-500 w-4 h-4"}),"Changes: ",y.jsxs("span",{className:"text-green-600",children:["+",c.details.additions]})," ",y.jsxs("span",{className:"text-red-600",children:["-",c.details.deletions]})]})]})]})}),y.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[y.jsx(TE,{type:"secondary",onClick:()=>l(!1),children:"Cancel"}),y.jsx(TE,{type:"primary",onClick:h,children:"Update Now"})]})]})})]})};function mit(){const[t,e]=N.useState({user:null,token:"",tokenType:"classic"}),[n,r]=N.useState(!0),[s,i]=N.useState(!1),[o,a]=N.useState(!1),[l,c]=N.useState(!1),u=async p=>{try{i(!0);const m=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${p}`}});if(!m.ok)throw new Error("Invalid token or unauthorized");const g=await m.json(),b={user:g,token:p,tokenType:t.tokenType};localStorage.setItem("github_connection",JSON.stringify(b)),Zn.set("githubToken",p),Zn.set("githubUsername",g.login),Zn.set("git:github.com",JSON.stringify({username:p,password:"x-oauth-basic"})),e(b),await d(p),Ve.success("Successfully connected to GitHub")}catch(m){Ut.logError("Failed to authenticate with GitHub",{error:m}),Ve.error("Failed to connect to GitHub"),e({user:null,token:"",tokenType:"classic"})}finally{i(!1)}},d=async p=>{try{a(!0);const m=await fetch("https://api.github.com/user/repos?sort=updated&per_page=10&affiliation=owner,organization_member,collaborator",{headers:{Authorization:`Bearer ${p}`}});if(!m.ok)throw new Error("Failed to fetch repositories");const g=await m.json(),b=await fetch("https://api.github.com/user/orgs",{headers:{Authorization:`Bearer ${p}`}});if(!b.ok)throw new Error("Failed to fetch organizations");const v=await b.json(),w=await fetch("https://api.github.com/users/"+t.user?.login+"/events/public",{headers:{Authorization:`Bearer ${p}`}});if(!w.ok)throw new Error("Failed to fetch events");const _=(await w.json()).slice(0,5),S=g.map(C=>fetch(C.languages_url,{headers:{Authorization:`Bearer ${p}`}}).then(T=>T.json())),E=await Promise.all(S),k={};E.forEach(C=>{Object.entries(C).forEach(([T,O])=>{k[T]=(k[T]||0)+O})});const x=g.reduce((C,T)=>C+T.stargazers_count,0),I=g.reduce((C,T)=>C+T.forks_count,0),R=t.user?.public_gists||0;e(C=>({...C,stats:{repos:g,totalStars:x,totalForks:I,organizations:v,recentActivity:_,languages:k,totalGists:R}}))}catch(m){Ut.logError("Failed to fetch GitHub stats",{error:m}),Ve.error("Failed to fetch GitHub statistics")}finally{a(!1)}};if(N.useEffect(()=>{const p=localStorage.getItem("github_connection");if(p){const m=JSON.parse(p);m.tokenType||(m.tokenType="classic"),e(m),m.user&&m.token&&d(m.token)}r(!1)},[]),N.useEffect(()=>{if(!t)return;const p=t.token,m=t.user;Zn.set("githubToken",p),Zn.set("git:github.com",JSON.stringify({username:p,password:"x-oauth-basic"})),m&&Zn.set("githubUsername",m.login)},[t]),n||s||o)return y.jsx(git,{});const h=async p=>{p.preventDefault(),await u(t.token)},f=()=>{localStorage.removeItem("github_connection"),e({user:null,token:"",tokenType:"classic"}),Ve.success("Disconnected from GitHub")};return y.jsx(lt.div,{className:"bg-[#FFFFFF] dark:bg-[#0A0A0A] rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:y.jsxs("div",{className:"p-6 space-y-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:github-logo w-5 h-5 text-bolt-elements-textPrimary"}),y.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"GitHub Connection"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Token Type"}),y.jsxs("select",{value:t.tokenType,onChange:p=>e(m=>({...m,tokenType:p.target.value})),disabled:s||!!t.user,className:Ne("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary","focus:outline-none focus:ring-1 focus:ring-purple-500","disabled:opacity-50"),children:[y.jsx("option",{value:"classic",children:"Personal Access Token (Classic)"}),y.jsx("option",{value:"fine-grained",children:"Fine-grained Token"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:t.tokenType==="classic"?"Personal Access Token":"Fine-grained Token"}),y.jsx("input",{type:"password",value:t.token,onChange:p=>e(m=>({...m,token:p.target.value})),disabled:s||!!t.user,placeholder:`Enter your GitHub ${t.tokenType==="classic"?"personal access token":"fine-grained token"}`,className:Ne("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-purple-500","disabled:opacity-50")}),y.jsxs("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:[y.jsxs("a",{href:`https://github.com/settings/tokens${t.tokenType==="fine-grained"?"/beta":"/new"}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline inline-flex items-center gap-1",children:["Get your token",y.jsx("div",{className:"i-ph:arrow-square-out w-10 h-5"})]}),y.jsx("span",{className:"mx-2",children:""}),y.jsxs("span",{children:["Required scopes:"," ",t.tokenType==="classic"?"repo, read:org, read:user":"Repository access, Organization access"]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[t.user?y.jsxs("button",{onClick:f,className:Ne("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-red-500 text-white","hover:bg-red-600"),children:[y.jsx("div",{className:"i-ph:plug-x w-4 h-4"}),"Disconnect"]}):y.jsx("button",{onClick:h,disabled:s||!t.token,className:Ne("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-purple-500 text-white","hover:bg-purple-600","disabled:opacity-50 disabled:cursor-not-allowed"),children:s?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})}),t.user&&y.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:check-circle w-4 h-4"}),"Connected to GitHub"]})]}),t.user&&t.stats&&y.jsxs("div",{className:"mt-6 border-t border-[#E5E5E5] dark:border-[#1A1A1A] pt-6",children:[y.jsx("button",{onClick:()=>c(!l),className:"w-full bg-transparent",children:y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("img",{src:t.user.avatar_url,alt:t.user.login,className:"w-16 h-16 rounded-full"}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t.user.name||t.user.login}),y.jsx("div",{className:Ne("i-ph:caret-down w-4 h-4 text-bolt-elements-textSecondary transition-transform",l?"rotate-180":"")})]}),t.user.bio&&y.jsx("p",{className:"text-sm text-start text-bolt-elements-textSecondary",children:t.user.bio}),y.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-bolt-elements-textSecondary",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:users w-4 h-4"}),t.user.followers," followers"]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:book-bookmark w-4 h-4"}),t.user.public_repos," public repos"]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:star w-4 h-4"}),t.stats.totalStars," stars"]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:git-fork w-4 h-4"}),t.stats.totalForks," forks"]})]})]})]})}),l&&y.jsxs("div",{className:"pt-4",children:[t.stats.organizations.length>0&&y.jsxs("div",{className:"mb-6",children:[y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Organizations"}),y.jsx("div",{className:"flex flex-wrap gap-3",children:t.stats.organizations.map(p=>y.jsxs("a",{href:p.html_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A] hover:bg-[#F0F0F0] dark:hover:bg-[#252525] transition-colors",children:[y.jsx("img",{src:p.avatar_url,alt:p.login,className:"w-6 h-6 rounded-md"}),y.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:p.login})]},p.login))})]}),y.jsxs("div",{className:"mb-6",children:[y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Top Languages"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t.stats.languages).sort(([,p],[,m])=>m-p).slice(0,5).map(([p])=>y.jsx("span",{className:"px-3 py-1 text-xs rounded-full bg-purple-500/10 text-purple-500 dark:bg-purple-500/20",children:p},p))})]}),y.jsxs("div",{className:"mb-6",children:[y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Recent Activity"}),y.jsx("div",{className:"space-y-3",children:t.stats.recentActivity.map(p=>y.jsxs("div",{className:"p-3 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A] text-sm",children:[y.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textPrimary",children:[y.jsx("div",{className:"i-ph:git-commit w-4 h-4 text-bolt-elements-textSecondary"}),y.jsx("span",{className:"font-medium",children:p.type.replace("Event","")}),y.jsx("span",{children:"on"}),y.jsx("a",{href:`https://github.com/${p.repo.name}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline",children:p.repo.name})]}),y.jsxs("div",{className:"mt-1 text-xs text-bolt-elements-textSecondary",children:[new Date(p.created_at).toLocaleDateString()," at"," ",new Date(p.created_at).toLocaleTimeString()]})]},p.id))})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[y.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[y.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Member Since"}),y.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:new Date(t.user.created_at).toLocaleDateString()})]}),y.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[y.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Public Gists"}),y.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t.stats.totalGists})]}),y.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[y.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Organizations"}),y.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t.stats.organizations.length})]}),y.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[y.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Languages"}),y.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:Object.keys(t.stats.languages).length})]})]}),y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Recent Repositories"}),y.jsx("div",{className:"space-y-3",children:t.stats.repos.map(p=>y.jsx("a",{href:p.html_url,target:"_blank",rel:"noopener noreferrer",className:"block p-3 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A] hover:bg-[#F0F0F0] dark:hover:bg-[#252525] transition-colors",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsxs("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:git-repository w-4 h-4 text-bolt-elements-textSecondary"}),p.name]}),p.description&&y.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-1",children:p.description}),y.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-bolt-elements-textSecondary",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:git-branch w-3 h-3"}),p.default_branch]}),y.jsx("span",{children:""}),y.jsxs("span",{children:["Updated ",new Date(p.updated_at).toLocaleDateString()]})]})]}),y.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:star w-3 h-3"}),p.stargazers_count]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:git-fork w-3 h-3"}),p.forks_count]})]})]})},p.full_name))})]})]})]})})}function git(){return y.jsx("div",{className:"flex items-center justify-center p-4",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),y.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Loading..."})]})})}const Xz=typeof window<"u"?localStorage.getItem("netlify_connection"):null,bit=Xz?JSON.parse(Xz):{user:null,token:"",stats:void 0},S0=yr(bit),VP=yr(!1),vO=yr(!1),Qy=t=>{const n={...S0.get(),...t};S0.set(n),typeof window<"u"&&localStorage.setItem("netlify_connection",JSON.stringify(n))};async function wO(t){try{vO.set(!0);const e=await fetch("https://api.netlify.com/api/v1/sites",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Failed to fetch sites: ${e.status}`);const n=await e.json(),r=S0.get();Qy({...r,stats:{sites:n,totalSites:n.length}})}catch(e){console.error("Netlify API Error:",e),Ut.logError("Failed to fetch Netlify stats",{error:e}),Ve.error("Failed to fetch Netlify statistics")}finally{vO.set(!1)}}function yit(){const t=Bt(S0),e=Bt(VP),n=Bt(vO),[r,s]=N.useState(!1);N.useEffect(()=>{(async()=>{t.user&&t.token&&await wO(t.token)})()},[t.user,t.token]);const i=async a=>{a.preventDefault(),VP.set(!0);try{const l=await fetch("https://api.netlify.com/api/v1/user",{headers:{Authorization:`Bearer ${t.token}`,"Content-Type":"application/json"}});if(!l.ok)throw new Error("Invalid token or unauthorized");const c=await l.json();Qy({user:c,token:t.token}),await wO(t.token),Ve.success("Successfully connected to Netlify")}catch(l){console.error("Auth error:",l),Ut.logError("Failed to authenticate with Netlify",{error:l}),Ve.error("Failed to connect to Netlify"),Qy({user:null,token:""})}finally{VP.set(!1)}},o=()=>{Qy({user:null,token:""}),Ve.success("Disconnected from Netlify")};return y.jsx(lt.div,{className:"bg-[#FFFFFF] dark:bg-[#0A0A0A] rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:y.jsxs("div",{className:"p-6 space-y-6",children:[y.jsx("div",{className:"flex items-center justify-between",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/netlify"}),y.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Netlify Connection"})]})}),t.user?y.jsxs("div",{className:"space-y-6",children:[y.jsx("div",{className:"flex items-center justify-between",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("button",{onClick:o,className:Ne("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-red-500 text-white","hover:bg-red-600"),children:[y.jsx("div",{className:"i-ph:plug w-4 h-4"}),"Disconnect"]}),y.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:check-circle w-4 h-4 text-green-500"}),"Connected to Netlify"]})]})}),y.jsxs("div",{className:"flex items-center gap-4 p-4 bg-[#F8F8F8] dark:bg-[#1A1A1A] rounded-lg",children:[y.jsx("img",{src:t.user.avatar_url,referrerPolicy:"no-referrer",crossOrigin:"anonymous",alt:t.user.full_name,className:"w-12 h-12 rounded-full border-2 border-[#00AD9F]"}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:t.user.full_name}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:t.user.email})]})]}),n?y.jsxs("div",{className:"flex items-center gap-2 text-sm text-bolt-elements-textSecondary",children:[y.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),"Fetching Netlify sites..."]}):y.jsxs("div",{children:[y.jsxs("button",{onClick:()=>s(!r),className:"w-full bg-transparent text-left text-sm font-medium text-bolt-elements-textPrimary mb-3 flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:buildings w-4 h-4"}),"Your Sites (",t.stats?.totalSites||0,")",y.jsx("div",{className:Ne("i-ph:caret-down w-4 h-4 ml-auto transition-transform",r?"rotate-180":"")})]}),r&&t.stats?.sites?.length?y.jsx("div",{className:"grid gap-3",children:t.stats.sites.map(a=>y.jsx("a",{href:a.admin_url,target:"_blank",rel:"noopener noreferrer",className:"block p-4 rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-[#00AD9F] dark:hover:border-[#00AD9F] transition-colors",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsxs("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:globe w-4 h-4 text-[#00AD9F]"}),a.name]}),y.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-bolt-elements-textSecondary",children:[y.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#00AD9F]",children:a.url}),a.published_deploy&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:clock w-3 h-3"}),new Date(a.published_deploy.published_at).toLocaleDateString()]})]})]})]}),a.build_settings?.provider&&y.jsx("div",{className:"text-xs text-bolt-elements-textSecondary px-2 py-1 rounded-md bg-[#F0F0F0] dark:bg-[#252525]",children:y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:git-branch w-3 h-3"}),a.build_settings.provider]})})]})},a.id))}):r?y.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:info w-4 h-4"}),"No sites found in your Netlify account"]}):null]})]}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Personal Access Token"}),y.jsx("input",{type:"password",value:t.token,onChange:a=>Qy({...t,token:a.target.value}),disabled:e,placeholder:"Enter your Netlify personal access token",className:Ne("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-[#00AD9F]","disabled:opacity-50")}),y.jsx("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:y.jsxs("a",{href:"https://app.netlify.com/user/applications#personal-access-tokens",target:"_blank",rel:"noopener noreferrer",className:"text-[#00AD9F] hover:underline inline-flex items-center gap-1",children:["Get your token",y.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})]})})]}),y.jsx("button",{onClick:i,disabled:e||!t.token,className:Ne("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-[#00AD9F] text-white","hover:bg-[#00968A]","disabled:opacity-50 disabled:cursor-not-allowed"),children:e?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})})]})]})})}function vit(){return y.jsxs("div",{className:"space-y-4",children:[y.jsxs(lt.div,{className:"flex items-center gap-2 mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[y.jsx("div",{className:"i-ph:plugs-connected w-5 h-5 text-purple-500"}),y.jsx("h2",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Connection Settings"})]}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mb-6",children:"Manage your external service connections and integrations"}),y.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[y.jsx(mit,{}),y.jsx(yit,{})]})]})}function xde(t){return vs({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.14c.138-.06.234-.1.293-.13.226-.088.39-.046.525.13.12.174.09.336-.12.48-.256.19-.6.41-1.006.654-1.244.743-2.64 1.316-4.185 1.726a17.617 17.617 0 01-10.951-.577 17.88 17.88 0 01-5.43-3.35c-.1-.074-.151-.15-.151-.22 0-.047.021-.09.051-.13zm6.565-6.218c0-1.005.247-1.863.743-2.577.495-.71 1.17-1.25 2.04-1.615.796-.335 1.756-.575 2.912-.72.39-.046 1.033-.103 1.92-.174v-.37c0-.93-.105-1.558-.3-1.875-.302-.43-.78-.65-1.44-.65h-.182c-.48.046-.896.196-1.246.46-.35.27-.575.63-.675 1.096-.06.3-.206.465-.435.51l-2.52-.315c-.248-.06-.372-.18-.372-.39 0-.046.007-.09.022-.15.247-1.29.855-2.25 1.82-2.88.976-.616 2.1-.975 3.39-1.05h.54c1.65 0 2.957.434 3.888 1.29.135.15.27.3.405.48.12.165.224.314.283.45.075.134.15.33.195.57.06.254.105.42.135.51.03.104.062.3.076.615.01.313.02.493.02.553v5.28c0 .376.06.72.165 1.036.105.313.21.54.315.674l.51.674c.09.136.136.256.136.36 0 .12-.06.226-.18.314-1.2 1.05-1.86 1.62-1.963 1.71-.165.135-.375.15-.63.045a6.062 6.062 0 01-.526-.496l-.31-.347a9.391 9.391 0 01-.317-.42l-.3-.435c-.81.886-1.603 1.44-2.4 1.665-.494.15-1.093.227-1.83.227-1.11 0-2.04-.343-2.76-1.034-.72-.69-1.08-1.665-1.08-2.94l-.05-.076zm3.753-.438c0 .566.14 1.02.425 1.364.285.34.675.512 1.155.512.045 0 .106-.007.195-.02.09-.016.134-.023.166-.023.614-.16 1.08-.553 1.424-1.178.165-.28.285-.58.36-.91.09-.32.12-.59.135-.8.015-.195.015-.54.015-1.005v-.54c-.84 0-1.484.06-1.92.18-1.275.36-1.92 1.17-1.92 2.43l-.035-.02zm9.162 7.027c.03-.06.075-.11.132-.17.362-.243.714-.41 1.05-.5a8.094 8.094 0 011.612-.24c.14-.012.28 0 .41.03.65.06 1.05.168 1.172.33.063.09.099.228.099.39v.15c0 .51-.149 1.11-.424 1.8-.278.69-.664 1.248-1.156 1.68-.073.06-.14.09-.197.09-.03 0-.06 0-.09-.012-.09-.044-.107-.12-.064-.24.54-1.26.806-2.143.806-2.64 0-.15-.03-.27-.087-.344-.145-.166-.55-.257-1.224-.257-.243 0-.533.016-.87.046-.363.045-.7.09-1 .135-.09 0-.148-.014-.18-.044-.03-.03-.036-.047-.02-.077 0-.017.006-.03.02-.063v-.06z"},child:[]}]})(t)}function _de(t){return vs({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function Sde(t){return vs({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.4446 11.5059c0 1.1021.1673 2.1585.4847 3.1563-.0378-.0028-.0691-.0058-.1058-.0058-.4209 0-.8015.16-1.0704.4512-.3454.3737-.4984.8335-.4316 1.293a1.576 1.576 0 0 0 .2148.5978c-.2319.1864-.4018.4456-.4844.7578-.0646.2448-.131.7543.2149 1.2794a1.4552 1.4552 0 0 0-.0625.1055c-.208.3923-.2207.8372-.0371 1.25.2783.6258.9696 1.1175 2.3126 1.6467.8356.3292 1.5988.5411 1.6056.543 1.1046.2847 2.104.4277 2.969.4277 1.4173 0 2.4754-.3849 3.1525-1.1446 1.538.2651 2.791.1403 3.592.006.6773.7555 1.7332 1.1387 3.1467 1.1387.8649 0 1.8643-.143 2.969-.4278.0068-.0019.77-.2138 1.6056-.543 1.343-.5292 2.0343-1.0208 2.3126-1.6466.1836-.4129.171-.8577-.037-1.25a1.4685 1.4685 0 0 0-.0626-.1056c.346-.525.2795-1.0346.2149-1.2793-.0826-.3122-.2525-.5714-.4844-.7579.11-.1816.1831-.3788.2148-.5977.0669-.4595-.0862-.9193-.4316-1.293-.2688-.2913-.6495-.4513-1.0704-.4513-.0209 0-.0376.0008-.0588.0018.3162-.9966.4846-2.0518.4846-3.1523 0-5.807-4.7362-10.5144-10.5789-10.5144-5.8426 0-10.5788 4.7073-10.5788 10.5144Zm10.5788-9.4831c5.2727 0 9.5476 4.246 9.5476 9.483a9.4201 9.4201 0 0 1-.2696 2.2365c-.0039-.0047-.0079-.011-.0117-.0156-.274-.3255-.6679-.5059-1.1075-.5059-.352 0-.714.1155-1.0763.3438-.2403.1517-.5058.422-.7793.7598-.2534-.3492-.608-.5832-1.0137-.6465a1.5174 1.5174 0 0 0-.2344-.0176c-.9263 0-1.4828.7993-1.6935 1.5177-.1046.2426-.6065 1.3482-1.3614 2.0978-1.1681 1.1601-1.4458 2.3534-.8396 3.6382-.843.1029-1.5836.0927-2.365-.006.5906-1.212.3626-2.4388-.8426-3.6322-.755-.7496-1.2568-1.8552-1.3614-2.0978-.2107-.7184-.7673-1.5177-1.6935-1.5177-.078 0-.1568.0054-.2344.0176-.4057.0633-.7604.2973-1.0137.6465-.2735-.3379-.539-.6081-.7794-.7598-.3622-.2283-.7243-.3438-1.0762-.3438-.4266 0-.8094.171-1.0821.4786a9.4208 9.4208 0 0 1-.2598-2.1936c0-5.237 4.2749-9.483 9.5475-9.483zM8.6443 7.0036c-.4838.0043-.9503.2667-1.1934.7227-.3536.6633-.1006 1.4873.5645 1.84.351.1862.4883-.5261.836-.6485.3107-.1095.841.399 1.0078.086.3536-.6634.1025-1.4874-.5625-1.84a1.3659 1.3659 0 0 0-.6524-.1602Zm6.8403 0c-.2199-.002-.4426.05-.6504.1602-.665.3526-.9181 1.1766-.5645 1.84.1669.313.6971-.1955 1.0079-.086.3476.1224.4867.8347.838.6485.6649-.3527.916-1.1767.5624-1.84-.243-.456-.7096-.7184-1.1934-.7227Zm-9.7565 1.418a.8768.8768 0 0 0-.877.877c0 .4846.3925.877.877.877a.8768.8768 0 0 0 .877-.877.8768.8768 0 0 0-.877-.877zm12.6434 0c-.4845 0-.879.3925-.879.877 0 .4846.3945.877.879.877a.8768.8768 0 0 0 .877-.877.8768.8768 0 0 0-.877-.877zM8.7927 11.459c-.179-.003-.2793.1107-.2793.416 0 .8097.3874 2.125 1.4279 2.924.207-.7123 1.3453-1.2832 1.5079-1.2012.2315.1167.2191.4417.6074.7266.3884-.285.374-.6098.6056-.7266.1627-.082 1.3009.4889 1.5079 1.2012 1.0404-.799 1.4278-2.1144 1.4278-2.924 0-1.2212-1.583.6402-3.5413.6485-1.4686-.0061-2.7266-1.0558-3.2639-1.0645zM4.312 14.4768c.5792.365 1.6964 2.2751 2.1056 3.0177.1371.2488.371.3536.582.3536.4188 0 .7465-.4138.0391-.9395-1.0636-.791-.6914-2.0846-.1836-2.1642a.4302.4302 0 0 1 .0664-.004c.4616 0 .666.7892.666.7892s.5959 1.4898 1.6213 2.508c.942.9356 1.062 1.703.4961 2.6661-.0164-.004-.0159.0236-.1484.2149-.1853.2673-.4322.4688-.7188.6152-.5062.2269-1.1397.2696-1.7833.2696-1.037 0-2.1017-.1824-2.6975-.336-.0293-.0075-3.6505-.9567-3.1916-1.8224.0771-.1454.2033-.2031.3633-.2031.6463 0 1.823.9551 2.3283.9551.113 0 .196-.0865.2285-.2031.2249-.8045-3.2787-1.0522-2.9846-2.1642.0519-.1967.193-.2757.3907-.2754.854 0 2.7704 1.4923 3.172 1.4923.0307 0 .0525-.0085.0645-.0274.2012-.3227.1096-.5865-1.3087-1.4395-1.4182-.8533-2.4315-1.329-1.8653-1.9416.0651-.0707.1574-.1015.2695-.1015.8611.0002 2.8948 1.84 2.8948 1.84s.5487.5683.8809.5683c.0762 0 .1416-.0315.1855-.1054.2355-.3946-2.1858-2.2183-2.3224-2.971-.0926-.51.0641-.7676.3555-.7676-.0006.008.1701-.0285.4942.1759zm16.2257.5918c-.1366.7526-2.5579 2.5764-2.3224 2.9709.044.074.1092.1055.1855.1055.3321 0 .881-.5684.881-.5684s2.0336-1.8397 2.8947-1.84c.1121 0 .2044.0308.2695.1016.5662.6125-.447 1.0882-1.8653 1.9415-1.4183.853-1.51 1.1168-1.3087 1.4396.012.0188.0337.0273.0644.0273.4016 0 2.3181-1.4923 3.1721-1.4923.1977-.0002.3388.0787.3907.2754.294 1.112-3.2095 1.3597-2.9846 2.1642.0325.1166.1156.2032.2285.2032.5054 0 1.682-.9552 2.3283-.9552.16 0 .2862.0577.3633.2032.459.8656-3.1623 1.8149-3.1916 1.8224-.5958.1535-1.6605.336-2.6975.336-.6351 0-1.261-.0409-1.7638-.2599-.2949-.1472-.5488-.3516-.7383-.625-.0411-.0682-.1026-.1476-.1426-.205-.5726-.9679-.455-1.7371.4903-2.676 1.0254-1.0182 1.6212-2.508 1.6212-2.508s.2044-.7891.666-.7891a.4318.4318 0 0 1 .0665.0039c.5078.0796.88 1.3732-.1836 2.1642-.7074.5257-.3797.9395.039.9395.211 0 .445-.1047.5821-.3535.4092-.7426 1.5264-2.6527 2.1056-3.0178.5588-.3524.99-.1816.8497.5918z"},child:[]}]})(t)}function Ede(t){return vs({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"},child:[]}]})(t)}function kde(t){return vs({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.3977 7.0896h-2.3106V.0676l-7.5094 6.3542V.1577h-1.1554v6.1966L4.4904 0v7.0896H1.6023v10.3976h2.8882V24l6.932-6.3591v6.2005h1.1554v-6.0469l6.9318 6.1807v-6.4879h2.8882V7.0896zm-3.4657-4.531v4.531h-5.355l5.355-4.531zm-13.2862.0676 4.8691 4.4634H5.6458V2.6262zM2.7576 16.332V8.245h7.8476l-6.1149 6.1147v1.9723H2.7576zm2.8882 5.0404v-3.8852h.0001v-2.6488l5.7763-5.7764v7.0111l-5.7764 5.2993zm12.7086.0248-5.7766-5.1509V9.0618l5.7766 5.7766v6.5588zm2.8882-5.0652h-1.733v-1.9723L13.3948 8.245h7.8478v8.087z"},child:[]}]})(t)}function wit(t){return vs({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},child:[]}]})(t)}function eC(t){return vs({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"},child:[]}]})(t)}function xit(t){return vs({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"},child:[]}]})(t)}function bp(t){return vs({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5M3 8.062C3 6.76 4.235 5.765 5.53 5.886a26.6 26.6 0 0 0 4.94 0C11.765 5.765 13 6.76 13 8.062v1.157a.93.93 0 0 1-.765.935c-.845.147-2.34.346-4.235.346s-3.39-.2-4.235-.346A.93.93 0 0 1 3 9.219zm4.542-.827a.25.25 0 0 0-.217.068l-.92.9a25 25 0 0 1-1.871-.183.25.25 0 0 0-.068.495c.55.076 1.232.149 2.02.193a.25.25 0 0 0 .189-.071l.754-.736.847 1.71a.25.25 0 0 0 .404.062l.932-.97a25 25 0 0 0 1.922-.188.25.25 0 0 0-.068-.495c-.538.074-1.207.145-1.98.189a.25.25 0 0 0-.166.076l-.754.785-.842-1.7a.25.25 0 0 0-.182-.135"},child:[]},{tag:"path",attr:{d:"M8.5 1.866a1 1 0 1 0-1 0V3h-2A4.5 4.5 0 0 0 1 7.5V8a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1v-.5A4.5 4.5 0 0 0 10.5 3h-2zM14 7.5V13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.5A3.5 3.5 0 0 1 5.5 4h5A3.5 3.5 0 0 1 14 7.5"},child:[]}]})(t)}function Zz(t){return vs({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"},child:[]}]})(t)}function O8(t){return vs({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 9h6v6H9z"},child:[]},{tag:"path",attr:{d:"M20 6c0-1.103-.897-2-2-2h-2V2h-2v2h-4V2H8v2H6c-1.103 0-2 .897-2 2v2H2v2h2v4H2v2h2v2c0 1.103.897 2 2 2h2v2h2v-2h4v2h2v-2h2c1.103 0 2-.897 2-2v-2h2v-2h-2v-4h2V8h-2V6zM6 18V6h12l.002 12H6z"},child:[]}]})(t)}function Cde(t){return vs({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zM4 19V7h16l.002 12H4z"},child:[]},{tag:"path",attr:{d:"M9.293 9.293 5.586 13l3.707 3.707 1.414-1.414L8.414 13l2.293-2.293zm5.414 0-1.414 1.414L15.586 13l-2.293 2.293 1.414 1.414L18.414 13z"},child:[]}]})(t)}function Ade(t){return vs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"},child:[]}]})(t)}function Tde(t){return vs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4z"},child:[]}]})(t)}const _it={AmazonBedrock:xde,Anthropic:Ade,Cohere:O8,Deepseek:Cde,Google:_de,Groq:eC,HuggingFace:Sde,Hyperbolic:Mre,Mistral:Dre,OpenAI:Ede,OpenRouter:Tde,Perplexity:kde,Together:eC,XAI:bp},Sit={Anthropic:"Access Claude and other Anthropic models",OpenAI:"Use GPT-4, GPT-3.5, and other OpenAI models"},Eit=()=>{const t=Rh(),[e,n]=N.useState(null),[r,s]=N.useState([]),[i,o]=N.useState(!1);N.useEffect(()=>{const u=Object.entries(t.providers||{}).filter(([f])=>!["Ollama","LMStudio","OpenAILike"].includes(f)).map(([f,p])=>({name:f,settings:p.settings,staticModels:p.staticModels||[],getDynamicModels:p.getDynamicModels,getApiKeyLink:p.getApiKeyLink,labelForGetApiKey:p.labelForGetApiKey,icon:p.icon})),d=u.sort((f,p)=>f.name.localeCompare(p.name));s(d);const h=u.every(f=>f.settings.enabled);o(h)},[t.providers]);const a=N.useCallback(u=>{r.forEach(d=>{t.updateProviderSettings(d.name,{...d.settings,enabled:u})}),o(u),Ve.success(u?"All cloud providers enabled":"All cloud providers disabled")},[r,t]),l=N.useCallback((u,d)=>{t.updateProviderSettings(u.name,{...u.settings,enabled:d}),d?(Ut.logProvider(`Provider ${u.name} enabled`,{provider:u.name}),Ve.success(`${u.name} enabled`)):(Ut.logProvider(`Provider ${u.name} disabled`,{provider:u.name}),Ve.success(`${u.name} disabled`))},[t]),c=N.useCallback((u,d)=>{const h=d.trim()||void 0;t.updateProviderSettings(u.name,{...u.settings,baseUrl:h}),Ut.logProvider(`Base URL updated for ${u.name}`,{provider:u.name,baseUrl:h}),Ve.success(`${u.name} base URL updated`),n(null)},[t]);return y.jsx("div",{className:"space-y-6",children:y.jsxs(lt.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[y.jsxs("div",{className:"flex items-center justify-between gap-4 mt-8 mb-4",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:Ne("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3","text-purple-500"),children:y.jsx(Mre,{className:"w-5 h-5"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary",children:"Cloud Providers"}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Connect to cloud-based AI models and services"})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Enable All Cloud"}),y.jsx(ka,{checked:i,onCheckedChange:a})]})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((u,d)=>y.jsxs(lt.div,{className:Ne("rounded-lg border bg-bolt-elements-background text-bolt-elements-textPrimary shadow-sm","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden group","flex flex-col"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},whileHover:{scale:1.02},children:[y.jsx("div",{className:"absolute top-0 right-0 p-2 flex gap-1",children:Cv.includes(u.name)&&y.jsx(lt.span,{className:"px-2 py-0.5 text-xs rounded-full bg-purple-500/10 text-purple-500 font-medium",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Configurable"})}),y.jsxs("div",{className:"flex items-start gap-4 p-4",children:[y.jsx(lt.div,{className:Ne("w-10 h-10 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-all duration-200",u.settings.enabled?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1},whileTap:{scale:.9},children:y.jsx("div",{className:Ne("w-6 h-6","transition-transform duration-200","group-hover:rotate-12"),children:ht.createElement(_it[u.name]||bp,{className:"w-full h-full","aria-label":`${u.name} logo`})})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between gap-4 mb-2",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-purple-500 transition-colors",children:u.name}),y.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:Sit[u.name]||(Cv.includes(u.name)?"Configure custom endpoint for this provider":"Standard AI provider integration")})]}),y.jsx(ka,{checked:u.settings.enabled,onCheckedChange:h=>l(u,h)})]}),u.settings.enabled&&Cv.includes(u.name)&&y.jsxs(lt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:[y.jsx("div",{className:"flex items-center gap-2 mt-4",children:e===u.name?y.jsx("input",{type:"text",defaultValue:u.settings.baseUrl,placeholder:`Enter ${u.name} base URL`,className:Ne("flex-1 px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),onKeyDown:h=>{h.key==="Enter"?c(u,h.currentTarget.value):h.key==="Escape"&&n(null)},onBlur:h=>c(u,h.target.value),autoFocus:!0}):y.jsx("div",{className:"flex-1 px-3 py-1.5 rounded-lg text-sm cursor-pointer group/url",onClick:()=>n(u.name),children:y.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[y.jsx("div",{className:"i-ph:link text-sm"}),y.jsx("span",{className:"group-hover/url:text-purple-500 transition-colors",children:u.settings.baseUrl||"Click to set base URL"})]})})}),L6[u.name]?.baseUrlKey&&y.jsx("div",{className:"mt-2 text-xs text-green-500",children:y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:info"}),y.jsx("span",{children:"Environment URL set in .env file"})]})})]})]})]}),y.jsx(lt.div,{className:"absolute inset-0 border-2 border-purple-500/0 rounded-lg pointer-events-none",animate:{borderColor:u.settings.enabled?"rgba(168, 85, 247, 0.2)":"rgba(168, 85, 247, 0)",scale:u.settings.enabled?1:.98},transition:{duration:.2}})]},u.name))})]})})};function L8(){const t=N.useCallback((r,s={})=>{const{type:i="info",duration:o=3e3}=s;Ve[i](r,{position:"bottom-right",autoClose:o,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})},[]),e=N.useCallback((r,s={})=>{t(r,{...s,type:"success"})},[t]),n=N.useCallback((r,s={})=>{t(r,{...s,type:"error"})},[t]);return{toast:t,success:e,error:n}}const kit={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},A2={OpenAI:{statusUrl:"https://status.openai.com/",apiUrl:"https://api.openai.com/v1/models",headers:{Authorization:"Bearer $OPENAI_API_KEY"},testModel:"gpt-3.5-turbo"},Anthropic:{statusUrl:"https://status.anthropic.com/",apiUrl:"https://api.anthropic.com/v1/messages",headers:{"x-api-key":"$ANTHROPIC_API_KEY","anthropic-version":"2024-02-29"},testModel:"claude-3-sonnet-20240229"},Cohere:{statusUrl:"https://status.cohere.com/",apiUrl:"https://api.cohere.ai/v1/models",headers:{Authorization:"Bearer $COHERE_API_KEY"},testModel:"command"},Google:{statusUrl:"https://status.cloud.google.com/",apiUrl:"https://generativelanguage.googleapis.com/v1/models",headers:{"x-goog-api-key":"$GOOGLE_API_KEY"},testModel:"gemini-pro"},HuggingFace:{statusUrl:"https://status.huggingface.co/",apiUrl:"https://api-inference.huggingface.co/models",headers:{Authorization:"Bearer $HUGGINGFACE_API_KEY"},testModel:"mistralai/Mixtral-8x7B-Instruct-v0.1"},Mistral:{statusUrl:"https://status.mistral.ai/",apiUrl:"https://api.mistral.ai/v1/models",headers:{Authorization:"Bearer $MISTRAL_API_KEY"},testModel:"mistral-tiny"},Perplexity:{statusUrl:"https://status.perplexity.com/",apiUrl:"https://api.perplexity.ai/v1/models",headers:{Authorization:"Bearer $PERPLEXITY_API_KEY"},testModel:"pplx-7b-chat"},Together:{statusUrl:"https://status.together.ai/",apiUrl:"https://api.together.xyz/v1/models",headers:{Authorization:"Bearer $TOGETHER_API_KEY"},testModel:"mistralai/Mixtral-8x7B-Instruct-v0.1"},AmazonBedrock:{statusUrl:"https://health.aws.amazon.com/health/status",apiUrl:"https://bedrock.us-east-1.amazonaws.com/models",headers:{Authorization:"Bearer $AWS_BEDROCK_CONFIG"},testModel:"anthropic.claude-3-sonnet-20240229-v1:0"},Groq:{statusUrl:"https://groqstatus.com/",apiUrl:"https://api.groq.com/v1/models",headers:{Authorization:"Bearer $GROQ_API_KEY"},testModel:"mixtral-8x7b-32768"},OpenRouter:{statusUrl:"https://status.openrouter.ai/",apiUrl:"https://openrouter.ai/api/v1/models",headers:{Authorization:"Bearer $OPEN_ROUTER_API_KEY"},testModel:"anthropic/claude-3-sonnet"},XAI:{statusUrl:"https://status.x.ai/",apiUrl:"https://api.x.ai/v1/models",headers:{Authorization:"Bearer $XAI_API_KEY"},testModel:"grok-1"},Deepseek:{statusUrl:"https://status.deepseek.com/",apiUrl:"https://api.deepseek.com/v1/models",headers:{Authorization:"Bearer $DEEPSEEK_API_KEY"},testModel:"deepseek-chat"}},T2={AmazonBedrock:xde,Anthropic:Ade,Cohere:O8,Google:_de,Groq:eC,HuggingFace:Sde,Mistral:Dre,OpenAI:Ede,OpenRouter:Tde,Perplexity:kde,Together:eC,XAI:bp,Deepseek:Cde},Pde=()=>{const[t,e]=N.useState([]),[n,r]=N.useState(!0),[s,i]=N.useState(new Date),[o,a]=N.useState(""),[l,c]=N.useState(""),[u,d]=N.useState("idle"),h=Rh(),{success:f,error:p}=L8(),m=N.useCallback(x=>{if(!h.providers)return null;const R={OpenAI:"OPENAI_API_KEY",Anthropic:"ANTHROPIC_API_KEY",Cohere:"COHERE_API_KEY",Google:"GOOGLE_GENERATIVE_AI_API_KEY",HuggingFace:"HuggingFace_API_KEY",Mistral:"MISTRAL_API_KEY",Perplexity:"PERPLEXITY_API_KEY",Together:"TOGETHER_API_KEY",AmazonBedrock:"AWS_BEDROCK_CONFIG",Groq:"GROQ_API_KEY",OpenRouter:"OPEN_ROUTER_API_KEY",XAI:"XAI_API_KEY",Deepseek:"DEEPSEEK_API_KEY"}[x];if(!R)return null;const C=kit[R]||null;return x==="Together"&&C?null:C},[h.providers]),g=N.useCallback(x=>{const I=A2[x];return I?{...I}:null},[]),b=N.useCallback(async(x,I,R)=>{try{const C=new AbortController,T=setTimeout(()=>C.abort(),1e4),O=performance.now(),P={"Content-Type":"application/json",...I},U=await fetch(x,{method:"GET",headers:P,signal:C.signal}),X=performance.now()-O;clearTimeout(T);const Z=await U.json();if(!U.ok){let M=`API returned status: ${U.status}`;return Z.error?.message?M=Z.error.message:Z.message&&(M=Z.message),{ok:!1,status:U.status,message:M,responseTime:X}}let F=[];return Array.isArray(Z)?F=Z.map(M=>M.id||M.name||""):Z.data&&Array.isArray(Z.data)?F=Z.data.map(M=>M.id||M.name||""):Z.models&&Array.isArray(Z.models)?F=Z.models.map(M=>M.id||M.name||""):Z.model&&(F=[Z.model]),!R||F.length>0?{ok:!0,status:U.status,responseTime:X,message:"API key is valid"}:R&&!F.includes(R)?{ok:!0,status:"model_not_found",message:`API key is valid (test model ${R} not found in ${F.length} available models)`,responseTime:X}:{ok:!0,status:U.status,message:"API key is valid",responseTime:X}}catch(C){return console.error(`Error checking API endpoint ${x}:`,C),{ok:!1,status:C instanceof Error?C.message:"Unknown error",message:C instanceof Error?`Connection failed: ${C.message}`:"Connection failed",responseTime:0}}},[m]),v=N.useCallback(async x=>{try{const I=async R=>{try{return(await fetch(R,{mode:"no-cors",headers:{Accept:"text/html"}})).type==="opaque"?"reachable":"unreachable"}catch(C){return console.error(`Error checking ${R}:`,C),"unreachable"}};switch(x){case"HuggingFace":{const R=await I("https://status.huggingface.co/"),T=await I("https://api-inference.huggingface.co/models");return{status:R==="reachable"&&T==="reachable"?"operational":"degraded",message:`Status page: ${R}, API: ${T}`,incidents:["Note: Limited status information due to CORS restrictions"]}}case"OpenAI":{const R=await I("https://status.openai.com/"),T=await I("https://api.openai.com/v1/models");return{status:R==="reachable"&&T==="reachable"?"operational":"degraded",message:`Status page: ${R}, API: ${T}`,incidents:["Note: Limited status information due to CORS restrictions"]}}case"Google":{const R=await I("https://status.cloud.google.com/"),T=await I("https://generativelanguage.googleapis.com/v1/models");return{status:R==="reachable"&&T==="reachable"?"operational":"degraded",message:`Status page: ${R}, API: ${T}`,incidents:["Note: Limited status information due to CORS restrictions"]}}default:return{status:"operational",message:"Basic reachability check only",incidents:["Note: Limited status information due to CORS restrictions"]}}}catch(I){return console.error(`Error fetching status for ${x}:`,I),{status:"degraded",message:"Unable to fetch status due to CORS restrictions",incidents:["Error: Unable to check service status"]}}},[]),w=N.useCallback(async(x,I)=>{const T=async O=>{try{if(["Anthropic","OpenAI","Google","HuggingFace","Mistral","Groq","Perplexity","Together"].includes(x)){const G=await v(x);return{provider:x,status:G.status,lastChecked:new Date().toISOString(),statusUrl:I.statusUrl,icon:T2[x],message:G.message,incidents:G.incidents}}const U=m(x),ee=g(x);if(!U||!ee)return{provider:x,status:"operational",lastChecked:new Date().toISOString(),statusUrl:I.statusUrl,icon:T2[x],message:U?"Status operational (configuration needed for usage)":"Status operational (API key needed for usage)",incidents:[]};const{ok:X,status:Z,message:F,responseTime:M}=await b(ee.apiUrl,ee.headers,ee.testModel);return!X&&O<2?(await new Promise(G=>setTimeout(G,2e3)),T(O+1)):{provider:x,status:X?"operational":"degraded",lastChecked:new Date().toISOString(),statusUrl:ee.statusUrl,icon:T2[x],message:X?"Service and API operational":`Service operational (API: ${F||Z})`,responseTime:M,incidents:[]}}catch(P){return console.error(`Error fetching status for ${x} (attempt ${O}):`,P),O<2?(await new Promise(U=>setTimeout(U,2e3)),T(O+1)):{provider:x,status:"degraded",lastChecked:new Date().toISOString(),statusUrl:I.statusUrl,icon:T2[x],message:"Service operational (Status check error)",responseTime:0,incidents:[]}}};return T(1)},[b,m,g,v]),_=N.useCallback(async()=>{try{r(!0);const x=await Promise.all(Object.entries(A2).map(([I,R])=>w(I,R)));e(x.sort((I,R)=>I.provider.localeCompare(R.provider))),i(new Date),f("Service statuses updated successfully")}catch(x){console.error("Error fetching all statuses:",x),p("Failed to update service statuses")}finally{r(!1)}},[w,f,p]);N.useEffect(()=>{_();const x=setInterval(_,2*60*1e3);return()=>clearInterval(x)},[_]);const S=N.useCallback(async(x,I)=>{try{d("testing");const R=A2[x];if(!R)throw new Error("Provider configuration not found");const C={...R.headers};switch(Object.keys(C).forEach(P=>{C[P].startsWith("$")&&(C[P]=C[P].replace(/\$.*/,I))}),x){case"Anthropic":C["anthropic-version"]="2024-02-29";break;case"OpenAI":C.Authorization?.startsWith("Bearer ")||(C.Authorization=`Bearer ${I}`);break;case"Google":{const P=`${R.apiUrl}?key=${I}`,U=await b(P,{},R.testModel);U.ok?(d("success"),f("API key is valid!")):(d("error"),p(`API key test failed: ${U.message}`));return}}const{ok:T,message:O}=await b(R.apiUrl,C,R.testModel);T?(d("success"),f("API key is valid!")):(d("error"),p(`API key test failed: ${O}`))}catch(R){d("error"),p("Failed to test API key: "+(R instanceof Error?R.message:"Unknown error"))}finally{setTimeout(()=>d("idle"),3e3)}},[b,f,p]),E=x=>{switch(x){case"operational":return"text-green-500";case"degraded":return"text-yellow-500";case"down":return"text-red-500";default:return"text-gray-500"}},k=x=>{switch(x){case"operational":return y.jsx(wit,{className:"w-4 h-4"});case"degraded":return y.jsx(xit,{className:"w-4 h-4"});case"down":return y.jsx(Zz,{className:"w-4 h-4"});default:return y.jsx(Zz,{className:"w-4 h-4"})}};return y.jsx("div",{className:"space-y-6",children:y.jsxs(lt.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[y.jsxs("div",{className:"flex items-center justify-between gap-2 mt-8 mb-4",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:Ne("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3","text-purple-500"),children:y.jsx(YDe,{className:"w-5 h-5"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary",children:"Service Status"}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Monitor and test the operational status of cloud LLM providers"})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary",children:["Last updated: ",s.toLocaleTimeString()]}),y.jsxs("button",{onClick:()=>_(),className:Ne("px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-4","text-bolt-elements-textPrimary","transition-all duration-200","flex items-center gap-2",n?"opacity-50 cursor-not-allowed":""),disabled:n,children:[y.jsx("div",{className:`i-ph:arrows-clockwise w-4 h-4 ${n?"animate-spin":""}`}),y.jsx("span",{children:n?"Refreshing...":"Refresh"})]})]})]}),y.jsxs("div",{className:"p-4 bg-bolt-elements-background-depth-2 rounded-lg",children:[y.jsx("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-2",children:"Test API Key"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("select",{value:l,onChange:x=>c(x.target.value),className:Ne("flex-1 px-3 py-1.5 rounded-lg text-sm max-w-[200px]","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-purple-500/30"),children:[y.jsx("option",{value:"",children:"Select Provider"}),Object.keys(A2).map(x=>y.jsx("option",{value:x,children:x},x))]}),y.jsx("input",{type:"password",value:o,onChange:x=>a(x.target.value),placeholder:"Enter API key to test",className:Ne("flex-1 px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30")}),y.jsx("button",{onClick:()=>l&&o&&S(l,o),disabled:!l||!o||u==="testing",className:Ne("px-4 py-1.5 rounded-lg text-sm","bg-purple-500 hover:bg-purple-600","text-white","transition-all duration-200","flex items-center gap-2",!l||!o||u==="testing"?"opacity-50 cursor-not-allowed":""),children:u==="testing"?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),y.jsx("span",{children:"Testing..."})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:key w-4 h-4"}),y.jsx("span",{children:"Test Key"})]})})]})]}),n&&t.length===0?y.jsx("div",{className:"text-center py-8 text-bolt-elements-textSecondary",children:"Loading service statuses..."}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((x,I)=>y.jsx(lt.div,{className:Ne("bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden rounded-lg"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:I*.1},whileHover:{scale:1.02},children:y.jsxs("div",{className:Ne("block p-4",x.statusUrl?"cursor-pointer":""),onClick:()=>x.statusUrl&&window.open(x.statusUrl,"_blank"),children:[y.jsxs("div",{className:"flex items-center justify-between gap-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[x.icon&&y.jsx("div",{className:Ne("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3",E(x.status)),children:ht.createElement(x.icon,{className:"w-5 h-5"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:x.provider}),y.jsxs("div",{className:"space-y-1",children:[y.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary",children:["Last checked: ",new Date(x.lastChecked).toLocaleTimeString()]}),x.responseTime&&y.jsxs("p",{className:"text-xs text-bolt-elements-textTertiary",children:["Response time: ",Math.round(x.responseTime),"ms"]}),x.message&&y.jsx("p",{className:"text-xs text-bolt-elements-textTertiary",children:x.message})]})]})]}),y.jsxs("div",{className:Ne("flex items-center gap-2",E(x.status)),children:[y.jsx("span",{className:"text-sm capitalize",children:x.status}),k(x.status)]})]}),x.incidents&&x.incidents.length>0&&y.jsxs("div",{className:"mt-2 border-t border-bolt-elements-borderColor pt-2",children:[y.jsx("p",{className:"text-xs font-medium text-bolt-elements-textSecondary mb-1",children:"Recent Incidents:"}),y.jsx("ul",{className:"text-xs text-bolt-elements-textTertiary space-y-1",children:x.incidents.map((R,C)=>y.jsx("li",{children:R},C))})]})]})},x.provider))})]})})};Pde.tabMetadata={icon:"i-ph:activity-bold",description:"Monitor and test LLM provider service status",category:"services"};const Qz=[{name:"deepseek-coder:6.7b",desc:"DeepSeek's code generation model",size:"4.1GB",tags:["coding","popular"]},{name:"llama2:7b",desc:"Meta's Llama 2 (7B parameters)",size:"3.8GB",tags:["general","popular"]},{name:"mistral:7b",desc:"Mistral's 7B model",size:"4.1GB",tags:["general","popular"]},{name:"gemma:7b",desc:"Google's Gemma model",size:"4.0GB",tags:["general","new"]},{name:"codellama:7b",desc:"Meta's Code Llama model",size:"4.1GB",tags:["coding","popular"]},{name:"neural-chat:7b",desc:"Intel's Neural Chat model",size:"4.1GB",tags:["chat","popular"]},{name:"phi:latest",desc:"Microsoft's Phi-2 model",size:"2.7GB",tags:["small","fast"]},{name:"qwen:7b",desc:"Alibaba's Qwen model",size:"4.1GB",tags:["general"]},{name:"solar:10.7b",desc:"Upstage's Solar model",size:"6.1GB",tags:["large","powerful"]},{name:"openchat:7b",desc:"Open-source chat model",size:"4.1GB",tags:["chat","popular"]},{name:"dolphin-phi:2.7b",desc:"Lightweight chat model",size:"1.6GB",tags:["small","fast"]},{name:"stable-code:3b",desc:"Lightweight coding model",size:"1.8GB",tags:["coding","small"]}];function ev(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(1))} ${n[r]}`}function eV(t){return`${ev(t)}/s`}function WP({className:t}){return y.jsx("svg",{viewBox:"0 0 1024 1024",className:t,fill:"currentColor",children:y.jsx("path",{d:"M684.3 322.2H339.8c-9.5.1-17.7 6.8-19.6 16.1-8.2 41.4-12.4 83.5-12.4 125.7 0 42.2 4.2 84.3 12.4 125.7 1.9 9.3 10.1 16 19.6 16.1h344.5c9.5-.1 17.7-6.8 19.6-16.1 8.2-41.4 12.4-83.5 12.4-125.7 0-42.2-4.2-84.3-12.4-125.7-1.9-9.3-10.1-16-19.6-16.1zM512 640c-176.7 0-320-143.3-320-320S335.3 0 512 0s320 143.3 320 320-143.3 320-320 320z"})})}function Cit({onModelInstalled:t}){const[e,n]=N.useState(""),[r,s]=N.useState(""),[i,o]=N.useState(!1),[a,l]=N.useState(!1),[c,u]=N.useState(null),[d,h]=N.useState([]),[f,p]=N.useState(Qz),{toast:m}=L8(),{providers:g}=Rh(),b=g?.Ollama?.settings?.baseUrl||"http://127.0.0.1:11434",v=async()=>{try{const x=await fetch(`${b}/api/tags`,{method:"GET"});if(!x.ok)throw new Error("Failed to fetch installed models");const R=(await x.json()).models||[];p(C=>C.map(T=>{const O=R.find(P=>P.name.toLowerCase()===T.name.toLowerCase());return O?{...T,installedVersion:O.digest.substring(0,8),needsUpdate:O.digest!==O.latest,latestVersion:O.latest?.substring(0,8)}:T}))}catch(x){console.error("Error checking installed models:",x)}};N.useEffect(()=>{v()},[b]);const w=async()=>{l(!0);try{await v(),m("Model versions checked")}catch(x){console.error("Failed to check model versions:",x),m("Failed to check model versions")}finally{l(!1)}},_=f.filter(x=>{const I=r===""||x.name.toLowerCase().includes(r.toLowerCase())||x.desc.toLowerCase().includes(r.toLowerCase()),R=d.length===0||d.some(C=>x.tags.includes(C));return I&&R}),S=async x=>{if(x)try{o(!0),u({status:"Starting download...",progress:0,downloadedSize:"0 B",totalSize:"Calculating...",speed:"0 B/s"}),n(""),s("");const I=await fetch(`${b}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x})});if(!I.ok)throw new Error(`HTTP error! status: ${I.status}`);const R=I.body?.getReader();if(!R)throw new Error("Failed to get response reader");let C=Date.now(),T=0;for(;;){const{done:O,value:P}=await R.read();if(O)break;const ee=new TextDecoder().decode(P).split(`
`).filter(Boolean);for(const X of ee)try{const Z=JSON.parse(X);if("status"in Z){const F=Date.now(),M=(F-C)/1e3,D=((Z.completed||0)-T)/M;u({status:Z.status,progress:Z.completed&&Z.total?Z.completed/Z.total*100:0,downloadedSize:ev(Z.completed||0),totalSize:Z.total?ev(Z.total):"Calculating...",speed:eV(D)}),C=F,T=Z.completed||0}}catch(Z){console.error("Error parsing progress:",Z)}}m("Successfully installed "+x+". The model list will refresh automatically."),setTimeout(()=>{t()},1e3)}catch(I){const R=I instanceof Error?I.message:"Unknown error occurred";console.error(`Error installing ${x}:`,R),m(`Failed to install ${x}. ${R}`)}finally{o(!1),u(null)}},E=async x=>{try{p(O=>O.map(P=>P.name===x?{...P,status:"updating"}:P));const I=await fetch(`${b}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x})});if(!I.ok)throw new Error(`HTTP error! status: ${I.status}`);const R=I.body?.getReader();if(!R)throw new Error("Failed to get response reader");let C=Date.now(),T=0;for(;;){const{done:O,value:P}=await R.read();if(O)break;const ee=new TextDecoder().decode(P).split(`
`).filter(Boolean);for(const X of ee)try{const Z=JSON.parse(X);if("status"in Z){const F=Date.now(),M=(F-C)/1e3,D=((Z.completed||0)-T)/M;u({status:Z.status,progress:Z.completed&&Z.total?Z.completed/Z.total*100:0,downloadedSize:ev(Z.completed||0),totalSize:Z.total?ev(Z.total):"Calculating...",speed:eV(D)}),C=F,T=Z.completed||0}}catch(Z){console.error("Error parsing progress:",Z)}}m("Successfully updated "+x),await v()}catch(I){const R=I instanceof Error?I.message:"Unknown error occurred";console.error(`Error updating ${x}:`,R),m(`Failed to update ${x}. ${R}`),p(C=>C.map(T=>T.name===x?{...T,status:"error"}:T))}finally{u(null)}},k=Array.from(new Set(Qz.flatMap(x=>x.tags)));return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center justify-between pt-6",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(WP,{className:"w-8 h-8 text-purple-500"}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Ollama Models"}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:"Install and manage your Ollama models"})]})]}),y.jsxs(lt.button,{onClick:w,disabled:a,className:Ne("px-4 py-2 rounded-lg","bg-purple-500/10 text-purple-500","hover:bg-purple-500/20","transition-all duration-200","flex items-center gap-2"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[a?y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin"}):y.jsx("div",{className:"i-ph:arrows-clockwise"}),"Check Updates"]})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("div",{className:"flex-1",children:y.jsxs("div",{className:"space-y-1",children:[y.jsx("input",{type:"text",className:Ne("w-full px-4 py-3 rounded-xl","bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),placeholder:"Search models or enter custom model name...",value:r||e,onChange:x=>{const I=x.target.value;s(I),n(I)},disabled:i}),y.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary px-1",children:["Browse models at"," ",y.jsxs("a",{href:"https://ollama.com/library",target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline inline-flex items-center gap-1 text-base font-medium",children:["ollama.com/library",y.jsx("div",{className:"i-ph:arrow-square-out text-sm"})]})," ","and copy model names to install"]})]})}),y.jsx(lt.button,{onClick:()=>S(e),disabled:!e||i,className:Ne("rounded-lg px-4 py-2","bg-purple-500 text-white text-sm","hover:bg-purple-600","transition-all duration-200","flex items-center gap-2",{"opacity-50 cursor-not-allowed":!e||i}),whileHover:{scale:1.02},whileTap:{scale:.98},children:i?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),y.jsx("span",{children:"Installing..."})]}):y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(WP,{className:"w-4 h-4"}),y.jsx("span",{children:"Install Model"})]})})]}),y.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(x=>y.jsx("button",{onClick:()=>{h(I=>I.includes(x)?I.filter(R=>R!==x):[...I,x])},className:Ne("px-3 py-1 rounded-full text-xs font-medium transition-all duration-200",d.includes(x)?"bg-purple-500 text-white":"bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary hover:bg-bolt-elements-background-depth-4"),children:x},x))}),y.jsx("div",{className:"grid grid-cols-1 gap-2",children:_.map(x=>y.jsxs(lt.div,{className:Ne("flex items-start gap-2 p-3 rounded-lg","bg-bolt-elements-background-depth-3","hover:bg-bolt-elements-background-depth-4","transition-all duration-200","relative group"),children:[y.jsx(WP,{className:"w-5 h-5 text-purple-500 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"flex-1 space-y-1.5",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-bolt-elements-textPrimary font-mono text-sm",children:x.name}),y.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:x.desc})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("span",{className:"text-xs text-bolt-elements-textTertiary",children:x.size}),x.installedVersion&&y.jsxs("div",{className:"mt-0.5 flex flex-col items-end gap-0.5",children:[y.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary",children:["v",x.installedVersion]}),x.needsUpdate&&x.latestVersion&&y.jsxs("span",{className:"text-xs text-purple-500",children:["v",x.latestVersion," available"]})]})]})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"flex flex-wrap gap-1",children:x.tags.map(I=>y.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-[10px] bg-bolt-elements-background-depth-4 text-bolt-elements-textTertiary",children:I},I))}),y.jsx("div",{className:"flex gap-2",children:x.installedVersion?x.needsUpdate?y.jsxs(lt.button,{onClick:()=>E(x.name),className:Ne("px-2 py-0.5 rounded-lg text-xs","bg-purple-500 text-white","hover:bg-purple-600","transition-all duration-200","flex items-center gap-1"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[y.jsx("div",{className:"i-ph:arrows-clockwise text-xs"}),"Update"]}):y.jsx("span",{className:"px-2 py-0.5 rounded-lg text-xs text-green-500 bg-green-500/10",children:"Up to date"}):y.jsxs(lt.button,{onClick:()=>S(x.name),className:Ne("px-2 py-0.5 rounded-lg text-xs","bg-purple-500 text-white","hover:bg-purple-600","transition-all duration-200","flex items-center gap-1"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[y.jsx("div",{className:"i-ph:download text-xs"}),"Install"]})})]})]})]},x.name))}),c&&y.jsxs(lt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsx("span",{className:"text-bolt-elements-textSecondary",children:c.status}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("span",{className:"text-bolt-elements-textTertiary",children:[c.downloadedSize," / ",c.totalSize]}),y.jsx("span",{className:"text-bolt-elements-textTertiary",children:c.speed}),y.jsxs("span",{className:"text-bolt-elements-textSecondary",children:[Math.round(c.progress),"%"]})]})]}),y.jsx(tT,{value:c.progress,className:"h-1"})]})]})}const Ait={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},tV={Ollama:bp,LMStudio:bp,OpenAILike:JDe},nV={Ollama:"Run open-source models locally on your machine",LMStudio:"Local model inference with LM Studio",OpenAILike:"Connect to OpenAI-compatible API endpoints"},P2="http://127.0.0.1:11434",Tit=t=>typeof t=="object"&&t!==null&&"status"in t&&typeof t.status=="string";function Pit(){const{providers:t,updateProviderSettings:e}=Rh(),[n,r]=N.useState([]),[s,i]=N.useState(!1),[o,a]=N.useState([]),[l,c]=N.useState(!1),[u,d]=N.useState(null),{toast:h}=L8();N.useEffect(()=>{const k=Object.entries(t||{}).filter(([x])=>[...D6,"OpenAILike"].includes(x)).map(([x,I])=>{const R=I,C=L6[x]?.baseUrlKey,T=C?Ait[C]:void 0;return T&&!R.settings.baseUrl&&e(x,{...R.settings,baseUrl:T}),{name:x,settings:{...R.settings,baseUrl:R.settings.baseUrl||T},staticModels:R.staticModels||[],getDynamicModels:R.getDynamicModels,getApiKeyLink:R.getApiKeyLink,labelForGetApiKey:R.labelForGetApiKey,icon:R.icon}}).sort((x,I)=>x.name==="LMStudio"?-1:I.name==="LMStudio"||x.name==="OpenAILike"?1:I.name==="OpenAILike"?-1:x.name.localeCompare(I.name));r(k)},[t,e]),N.useEffect(()=>{const E=n.every(k=>k.settings.enabled);i(E)},[n]),N.useEffect(()=>{n.find(k=>k.name==="Ollama")?.settings.enabled&&f()},[n]);const f=async()=>{try{c(!0);const k=await(await fetch("http://127.0.0.1:11434/api/tags")).json();a(k.models.map(x=>({...x,status:"idle"})))}catch(E){console.error("Error fetching Ollama models:",E)}finally{c(!1)}},p=async E=>{try{const k=await fetch(`${P2}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:E})});if(!k.ok)throw new Error(`Failed to update ${E}`);const x=k.body?.getReader();if(!x)throw new Error("No response reader available");for(;;){const{done:T,value:O}=await x.read();if(T)break;const U=new TextDecoder().decode(O).split(`
`).filter(Boolean);for(const ee of U){const X=JSON.parse(ee);if(!Tit(X)){console.error("Invalid response format:",X);continue}a(Z=>Z.map(F=>F.name===E?{...F,progress:{current:X.completed||0,total:X.total||0,status:X.status},newDigest:X.digest}:F))}}return(await(await fetch("http://127.0.0.1:11434/api/tags")).json()).models.find(T=>T.name===E)!==void 0}catch(k){return console.error(`Error updating ${E}:`,k),!1}},m=N.useCallback(async E=>{n.forEach(k=>{e(k.name,{...k.settings,enabled:E})}),h(E?"All local providers enabled":"All local providers disabled")},[n,e]),g=(E,k)=>{e(E.name,{...E.settings,enabled:k}),k?(Ut.logProvider(`Provider ${E.name} enabled`,{provider:E.name}),h(`${E.name} enabled`)):(Ut.logProvider(`Provider ${E.name} disabled`,{provider:E.name}),h(`${E.name} disabled`))},b=(E,k)=>{e(E.name,{...E.settings,baseUrl:k}),h(`${E.name} base URL updated`),d(null)},v=async E=>{const k=await p(E);h(k?`Updated ${E}`:`Failed to update ${E}`)},w=async E=>{try{if(!(await fetch(`${P2}/api/delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:E})})).ok)throw new Error(`Failed to delete ${E}`);a(x=>x.filter(I=>I.name!==E)),h(`Deleted ${E}`)}catch(k){const x=k instanceof Error?k.message:"Unknown error occurred";console.error(`Error deleting ${E}:`,x),h(`Failed to delete ${E}`)}},_=({model:E})=>y.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:code text-purple-500"}),y.jsx("span",{children:E.digest.substring(0,7)})]}),E.details&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:database text-purple-500"}),y.jsx("span",{children:E.details.parameter_size})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:cube text-purple-500"}),y.jsx("span",{children:E.details.quantization_level})]})]})]}),S=({model:E,onUpdate:k,onDelete:x})=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(lt.button,{onClick:k,disabled:E.status==="updating",className:Ne("rounded-lg p-2","bg-purple-500/10 text-purple-500","hover:bg-purple-500/20","transition-all duration-200",{"opacity-50 cursor-not-allowed":E.status==="updating"}),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Update model",children:E.status==="updating"?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),y.jsx("span",{className:"text-sm",children:"Updating..."})]}):y.jsx("div",{className:"i-ph:arrows-clockwise text-lg"})}),y.jsx(lt.button,{onClick:x,disabled:E.status==="updating",className:Ne("rounded-lg p-2","bg-red-500/10 text-red-500","hover:bg-red-500/20","transition-all duration-200",{"opacity-50 cursor-not-allowed":E.status==="updating"}),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Delete model",children:y.jsx("div",{className:"i-ph:trash text-lg"})})]});return y.jsx("div",{className:Ne("rounded-lg bg-bolt-elements-background text-bolt-elements-textPrimary shadow-sm p-4","hover:bg-bolt-elements-background-depth-2","transition-all duration-200"),role:"region","aria-label":"Local Providers Configuration",children:y.jsxs(lt.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[y.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-bolt-elements-borderColor pb-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(lt.div,{className:Ne("w-10 h-10 flex items-center justify-center rounded-xl","bg-purple-500/10 text-purple-500"),whileHover:{scale:1.05},children:y.jsx(O8,{className:"w-6 h-6"})}),y.jsxs("div",{children:[y.jsx("div",{className:"flex items-center gap-2",children:y.jsx("h2",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Local AI Models"})}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Configure and manage your local AI providers"})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Enable All"}),y.jsx(ka,{checked:s,onCheckedChange:m,"aria-label":"Toggle all local providers"})]})]}),n.filter(E=>E.name==="Ollama").map(E=>y.jsxs(lt.div,{className:Ne("bg-bolt-elements-background-depth-2 rounded-xl","hover:bg-bolt-elements-background-depth-3","transition-all duration-200 p-5","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.01},children:[y.jsxs("div",{className:"flex items-start justify-between gap-4",children:[y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx(lt.div,{className:Ne("w-12 h-12 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3",E.settings.enabled?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1,rotate:5},children:ht.createElement(tV[E.name]||bp,{className:"w-7 h-7","aria-label":`${E.name} icon`})}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h3",{className:"text-md font-semibold text-bolt-elements-textPrimary",children:E.name}),y.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500/10 text-green-500",children:"Local"})]}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:nV[E.name]})]})]}),y.jsx(ka,{checked:E.settings.enabled,onCheckedChange:k=>g(E,k),"aria-label":`Toggle ${E.name} provider`})]}),y.jsx(Ic,{children:E.settings.enabled&&y.jsx(lt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4",children:y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsx("label",{className:"text-sm text-bolt-elements-textSecondary",children:"API Endpoint"}),u===E.name?y.jsx("input",{type:"text",defaultValue:E.settings.baseUrl||P2,placeholder:"Enter Ollama base URL",className:Ne("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),onKeyDown:k=>{k.key==="Enter"?b(E,k.currentTarget.value):k.key==="Escape"&&d(null)},onBlur:k=>b(E,k.target.value),autoFocus:!0}):y.jsx("div",{onClick:()=>d(E.name),className:Ne("w-full px-3 py-2 rounded-lg text-sm cursor-pointer","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","hover:border-purple-500/30 hover:bg-bolt-elements-background-depth-4","transition-all duration-200"),children:y.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[y.jsx("div",{className:"i-ph:link text-sm"}),y.jsx("span",{children:E.settings.baseUrl||P2})]})})]})})}),E.settings.enabled&&y.jsxs(lt.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:cube-duotone text-purple-500"}),y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Installed Models"})]}),l?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Loading models..."})]}):y.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary",children:[o.length," models available"]})]}),y.jsx("div",{className:"space-y-3",children:l?y.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((k,x)=>y.jsx("div",{className:"h-20 w-full bg-bolt-elements-background-depth-3 rounded-lg animate-pulse"},x))}):o.length===0?y.jsxs("div",{className:"text-center py-8 text-bolt-elements-textSecondary",children:[y.jsx("div",{className:"i-ph:cube-transparent text-4xl mx-auto mb-2"}),y.jsx("p",{children:"No models installed yet"}),y.jsxs("p",{className:"text-sm text-bolt-elements-textTertiary px-1",children:["Browse models at"," ",y.jsxs("a",{href:"https://ollama.com/library",target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline inline-flex items-center gap-0.5 text-base font-medium",children:["ollama.com/library",y.jsx("div",{className:"i-ph:arrow-square-out text-xs"})]})," ","and copy model names to install"]})]}):o.map(k=>y.jsxs(lt.div,{className:Ne("p-4 rounded-xl","bg-bolt-elements-background-depth-3","hover:bg-bolt-elements-background-depth-4","transition-all duration-200"),whileHover:{scale:1.01},children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:k.name}),y.jsx(Nit,{status:k.status})]}),y.jsx(_,{model:k})]}),y.jsx(S,{model:k,onUpdate:()=>v(k.name),onDelete:()=>{window.confirm(`Are you sure you want to delete ${k.name}?`)&&w(k.name)}})]}),k.progress&&y.jsxs("div",{className:"mt-3",children:[y.jsx(tT,{value:Math.round(k.progress.current/k.progress.total*100),className:"h-1"}),y.jsxs("div",{className:"flex justify-between mt-1 text-xs text-bolt-elements-textSecondary",children:[y.jsx("span",{children:k.progress.status}),y.jsxs("span",{children:[Math.round(k.progress.current/k.progress.total*100),"%"]})]})]})]},k.name))}),y.jsx(Cit,{onModelInstalled:f})]})]},E.name)),y.jsxs("div",{className:"border-t border-bolt-elements-borderColor pt-6 mt-8",children:[y.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary mb-4",children:"Other Local Providers"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.filter(E=>E.name!=="Ollama").map((E,k)=>y.jsxs(lt.div,{className:Ne("bg-bolt-elements-background-depth-2 rounded-xl","hover:bg-bolt-elements-background-depth-3","transition-all duration-200 p-5","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.1},whileHover:{scale:1.01},children:[y.jsxs("div",{className:"flex items-start justify-between gap-4",children:[y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx(lt.div,{className:Ne("w-12 h-12 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3",E.settings.enabled?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1,rotate:5},children:ht.createElement(tV[E.name]||bp,{className:"w-7 h-7","aria-label":`${E.name} icon`})}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h3",{className:"text-md font-semibold text-bolt-elements-textPrimary",children:E.name}),y.jsxs("div",{className:"flex gap-1",children:[y.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500/10 text-green-500",children:"Local"}),Cv.includes(E.name)&&y.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-500/10 text-purple-500",children:"Configurable"})]})]}),y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:nV[E.name]})]})]}),y.jsx(ka,{checked:E.settings.enabled,onCheckedChange:x=>g(E,x),"aria-label":`Toggle ${E.name} provider`})]}),y.jsx(Ic,{children:E.settings.enabled&&Cv.includes(E.name)&&y.jsx(lt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4",children:y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsx("label",{className:"text-sm text-bolt-elements-textSecondary",children:"API Endpoint"}),u===E.name?y.jsx("input",{type:"text",defaultValue:E.settings.baseUrl,placeholder:`Enter ${E.name} base URL`,className:Ne("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),onKeyDown:x=>{x.key==="Enter"?b(E,x.currentTarget.value):x.key==="Escape"&&d(null)},onBlur:x=>b(E,x.target.value),autoFocus:!0}):y.jsx("div",{onClick:()=>d(E.name),className:Ne("w-full px-3 py-2 rounded-lg text-sm cursor-pointer","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","hover:border-purple-500/30 hover:bg-bolt-elements-background-depth-4","transition-all duration-200"),children:y.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[y.jsx("div",{className:"i-ph:link text-sm"}),y.jsx("span",{children:E.settings.baseUrl||"Click to set base URL"})]})})]})})})]},E.name))})]})]})})}function Nit({status:t}){if(!t||t==="idle")return null;const n={updating:{bg:"bg-yellow-500/10",text:"text-yellow-500",label:"Updating"},updated:{bg:"bg-green-500/10",text:"text-green-500",label:"Updated"},error:{bg:"bg-red-500/10",text:"text-red-500",label:"Error"}}[t];return n?y.jsx("span",{className:Ne("px-2 py-0.5 rounded-full text-xs font-medium",n.bg,n.text),children:n.label}):null}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ix(t){return t+.5|0}const zd=(t,e,n)=>Math.max(Math.min(t,n),e);function tv(t){return zd(ix(t*2.55),0,255)}function eh(t){return zd(ix(t*255),0,255)}function du(t){return zd(ix(t/2.55)/100,0,1)}function rV(t){return zd(ix(t*100),0,100)}const aa={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xO=[..."0123456789ABCDEF"],Iit=t=>xO[t&15],Rit=t=>xO[(t&240)>>4]+xO[t&15],N2=t=>(t&240)>>4===(t&15),Oit=t=>N2(t.r)&&N2(t.g)&&N2(t.b)&&N2(t.a);function Lit(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&aa[t[1]]*17,g:255&aa[t[2]]*17,b:255&aa[t[3]]*17,a:e===5?aa[t[4]]*17:255}:(e===7||e===9)&&(n={r:aa[t[1]]<<4|aa[t[2]],g:aa[t[3]]<<4|aa[t[4]],b:aa[t[5]]<<4|aa[t[6]],a:e===9?aa[t[7]]<<4|aa[t[8]]:255})),n}const Dit=(t,e)=>t<255?e(t):"";function Mit(t){var e=Oit(t)?Iit:Rit;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Dit(t.a,e):void 0}const jit=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Nde(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Fit(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Bit(t,e,n){const r=Nde(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function $it(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function D8(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=$it(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function M8(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(eh)}function j8(t,e,n){return M8(Nde,t,e,n)}function Uit(t,e,n){return M8(Bit,t,e,n)}function Hit(t,e,n){return M8(Fit,t,e,n)}function Ide(t){return(t%360+360)%360}function zit(t){const e=jit.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?tv(+e[5]):eh(+e[5]));const s=Ide(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Uit(s,i,o):e[1]==="hsv"?r=Hit(s,i,o):r=j8(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function Vit(t,e){var n=D8(t);n[0]=Ide(n[0]+e),n=j8(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Wit(t){if(!t)return;const e=D8(t),n=e[0],r=rV(e[1]),s=rV(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${du(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const sV={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},iV={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Git(){const t={},e=Object.keys(iV),n=Object.keys(sV);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,sV[i]);i=parseInt(iV[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let I2;function qit(t){I2||(I2=Git(),I2.transparent=[0,0,0,0]);const e=I2[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Kit=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Yit(t){const e=Kit.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?tv(o):zd(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?tv(r):zd(r,0,255)),s=255&(e[4]?tv(s):zd(s,0,255)),i=255&(e[6]?tv(i):zd(i,0,255)),{r,g:s,b:i,a:n}}}function Jit(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${du(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const GP=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Um=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Xit(t,e,n){const r=Um(du(t.r)),s=Um(du(t.g)),i=Um(du(t.b));return{r:eh(GP(r+n*(Um(du(e.r))-r))),g:eh(GP(s+n*(Um(du(e.g))-s))),b:eh(GP(i+n*(Um(du(e.b))-i))),a:t.a+n*(e.a-t.a)}}function R2(t,e,n){if(t){let r=D8(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=j8(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Rde(t,e){return t&&Object.assign(e||{},t)}function oV(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=eh(t[3]))):(e=Rde(t,{r:0,g:0,b:0,a:1}),e.a=eh(e.a)),e}function Zit(t){return t.charAt(0)==="r"?Yit(t):zit(t)}class ew{constructor(e){if(e instanceof ew)return e;const n=typeof e;let r;n==="object"?r=oV(e):n==="string"&&(r=Lit(e)||qit(e)||Zit(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Rde(this._rgb);return e&&(e.a=du(e.a)),e}set rgb(e){this._rgb=oV(e)}rgbString(){return this._valid?Jit(this._rgb):void 0}hexString(){return this._valid?Mit(this._rgb):void 0}hslString(){return this._valid?Wit(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Xit(this._rgb,e._rgb,n)),this}clone(){return new ew(this.rgb)}alpha(e){return this._rgb.a=eh(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ix(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return R2(this._rgb,2,e),this}darken(e){return R2(this._rgb,2,-e),this}saturate(e){return R2(this._rgb,1,e),this}desaturate(e){return R2(this._rgb,1,-e),this}rotate(e){return Vit(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ru(){}const Qit=(()=>{let t=0;return()=>t++})();function pr(t){return t==null}function Ts(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Hn(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Oa(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ul(t,e){return Oa(t)?t:e}function Pn(t,e){return typeof t>"u"?e:t}const eot=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function mr(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function qn(t,e,n,r){let s,i,o;if(Ts(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Hn(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function tC(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function nC(t){if(Ts(t))return t.map(nC);if(Hn(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=nC(t[n[s]]);return e}return t}function Ode(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function tot(t,e,n,r){if(!Ode(t))return;const s=e[t],i=n[t];Hn(s)&&Hn(i)?tw(s,i,r):e[t]=nC(i)}function tw(t,e,n){const r=Ts(e)?e:[e],s=r.length;if(!Hn(t))return t;n=n||{};const i=n.merger||tot;let o;for(let a=0;a<s;++a){if(o=r[a],!Hn(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Uv(t,e){return tw(t,e,{merger:not})}function not(t,e,n){if(!Ode(t))return;const r=e[t],s=n[t];Hn(r)&&Hn(s)?Uv(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=nC(s))}const aV={"":t=>t,x:t=>t.x,y:t=>t.y};function rot(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function sot(t){const e=rot(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function rC(t,e){return(aV[e]||(aV[e]=sot(e)))(t)}function F8(t){return t.charAt(0).toUpperCase()+t.slice(1)}const sC=t=>typeof t<"u",yh=t=>typeof t=="function",lV=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function iot(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Is=Math.PI,Pc=2*Is,oot=Pc+Is,iC=Number.POSITIVE_INFINITY,aot=Is/180,al=Is/2,tf=Is/4,cV=Is*2/3,Lde=Math.log10,E0=Math.sign;function Hv(t,e,n){return Math.abs(t-e)<n}function uV(t){const e=Math.round(t);t=Hv(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Lde(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function lot(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function cot(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function nw(t){return!cot(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function uot(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function dot(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Rf(t){return t*(Is/180)}function hot(t){return t*(180/Is)}function dV(t){if(!Oa(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function fot(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Is&&(i+=Pc),{angle:i,distance:s}}function _O(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function pot(t,e){return(t-e+oot)%Pc-Is}function Nd(t){return(t%Pc+Pc)%Pc}function Dde(t,e,n,r){const s=Nd(t),i=Nd(e),o=Nd(n),a=Nd(i-s),l=Nd(o-s),c=Nd(s-i),u=Nd(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function ya(t,e,n){return Math.max(e,Math.min(n,t))}function mot(t){return ya(t,-32768,32767)}function nv(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function B8(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Of=(t,e,n,r)=>B8(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),got=(t,e,n)=>B8(t,n,r=>t[r][e]>=n);function bot(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const Mde=["push","pop","shift","splice","unshift"];function yot(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Mde.forEach(n=>{const r="_onData"+F8(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function hV(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(Mde.forEach(i=>{delete t[i]}),delete t._chartjs)}function vot(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const jde=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Fde(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,jde.call(window,()=>{r=!1,t.apply(e,n)}))}}function wot(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const $8=t=>t==="start"?"left":t==="end"?"right":"center",oi=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,xot=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function _ot(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(s=Math.min(Of(l,u,d).lo,n?r:Of(e,u,o.getPixelForValue(d)).lo),c){const m=l.slice(0,s+1).reverse().findIndex(g=>!pr(g[a.axis]));s-=Math.max(0,m)}s=ya(s,0,r-1)}if(p){let m=Math.max(Of(l,o.axis,h,!0).hi+1,n?0:Of(e,u,o.getPixelForValue(h),!0).hi+1);if(c){const g=l.slice(m-1).findIndex(b=>!pr(b[a.axis]));m+=Math.max(0,g)}i=ya(m,s,r)-s}else i=r-s}return{start:s,count:i}}function Sot(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const O2=t=>t===0||t===1,fV=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Pc/n)),pV=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Pc/n)+1,zv={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*al)+1,easeOutSine:t=>Math.sin(t*al),easeInOutSine:t=>-.5*(Math.cos(Is*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>O2(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>O2(t)?t:fV(t,.075,.3),easeOutElastic:t=>O2(t)?t:pV(t,.075,.3),easeInOutElastic(t){return O2(t)?t:t<.5?.5*fV(t*2,.1125,.45):.5+.5*pV(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-zv.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?zv.easeInBounce(t*2)*.5:zv.easeOutBounce(t*2-1)*.5+.5};function U8(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function mV(t){return U8(t)?t:new ew(t)}function qP(t){return U8(t)?t:new ew(t).saturate(.5).darken(.1).hexString()}const Eot=["x","y","borderWidth","radius","tension"],kot=["color","borderColor","backgroundColor"];function Cot(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:kot},numbers:{type:"number",properties:Eot}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Aot(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const gV=new Map;function Tot(t,e){e=e||{};const n=t+JSON.stringify(e);let r=gV.get(n);return r||(r=new Intl.NumberFormat(t,e),gV.set(n,r)),r}function Bde(t,e,n){return Tot(e,n).format(t)}const Pot={values(t){return Ts(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=Not(t,n)}const o=Lde(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Bde(t,r,l)}};function Not(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var $de={formatters:Pot};function Iot(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$de.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const yp=Object.create(null),SO=Object.create(null);function Vv(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function KP(t,e,n){return typeof e=="string"?tw(Vv(t,e),n):tw(Vv(t,""),e)}class Rot{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>qP(s.backgroundColor),this.hoverBorderColor=(r,s)=>qP(s.borderColor),this.hoverColor=(r,s)=>qP(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return KP(this,e,n)}get(e){return Vv(this,e)}describe(e,n){return KP(SO,e,n)}override(e,n){return KP(yp,e,n)}route(e,n,r,s){const i=Vv(this,e),o=Vv(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Hn(l)?Object.assign({},c,l):Pn(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Kr=new Rot({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Cot,Aot,Iot]);function Oot(t){return!t||pr(t.size)||pr(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function bV(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function nf(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function yV(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function EO(t,e,n,r){Ude(t,e,n,r,null)}function Ude(t,e,n,r,s){let i,o,a,l,c,u,d,h;const f=e.pointStyle,p=e.rotation,m=e.radius;let g=(p||0)*aot;if(f&&typeof f=="object"&&(i=f.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(g),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,r,s/2,m,0,0,Pc):t.arc(n,r,m,0,Pc),t.closePath();break;case"triangle":u=s?s/2:m,t.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=cV,t.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=cV,t.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),t.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(g+tf)*l,d=Math.cos(g+tf)*(s?s/2-c:l),a=Math.sin(g+tf)*l,h=Math.sin(g+tf)*(s?s/2-c:l),t.arc(n-d,r-a,c,g-Is,g-al),t.arc(n+h,r-o,c,g-al,g),t.arc(n+d,r+a,c,g,g+al),t.arc(n-h,r+o,c,g+al,g+Is),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}g+=tf;case"rectRot":d=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(s?s/2:m),t.moveTo(n-d,r-a),t.lineTo(n+h,r-o),t.lineTo(n+d,r+a),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":g+=tf;case"cross":d=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(s?s/2:m),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":d=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(s?s/2:m),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),g+=tf,d=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(s?s/2:m),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=s?s/2:Math.cos(g)*m,a=Math.sin(g)*m,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(g)*(s?s/2:m),r+Math.sin(g)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function rw(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function H8(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function z8(t){t.restore()}function Lot(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Dot(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Mot(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),pr(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function jot(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Fot(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function sw(t,e,n,r,s,i={}){const o=Ts(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,Mot(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&Fot(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),pr(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),jot(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function kO(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Is,Is,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Is,al,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,al,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-al,!0),t.lineTo(n+o.topLeft,r)}const Bot=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$ot=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Uot(t,e){const n=(""+t).match(Bot);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Hot=t=>+t||0;function Hde(t,e){const n={},r=Hn(e),s=r?Object.keys(e):e,i=Hn(t)?r?o=>Pn(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=Hot(i(o));return n}function zot(t){return Hde(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Wv(t){return Hde(t,["topLeft","topRight","bottomLeft","bottomRight"])}function La(t){const e=zot(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function fi(t,e){t=t||{},e=e||Kr.font;let n=Pn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Pn(t.style,e.style);r&&!(""+r).match($ot)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Pn(t.family,e.family),lineHeight:Uot(Pn(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Pn(t.weight,e.weight),string:""};return s.string=Oot(s),s}function L2(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function Vot(t,e,n){const{min:r,max:s}=t,i=eot(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Kp(t,e){return Object.assign(Object.create(t),e)}function V8(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=Gde("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>V8([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Vde(a,l,()=>Zot(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return wV(a).includes(l)},ownKeys(a){return wV(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function k0(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:zde(t,r),setContext:i=>k0(t,i,n,r),override:i=>k0(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return Vde(i,o,()=>Got(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function zde(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:yh(n)?n:()=>n,isIndexable:yh(r)?r:()=>r}}const Wot=(t,e)=>t?t+F8(e):e,W8=(t,e)=>Hn(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Vde(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function Got(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return yh(a)&&o.isScriptable(e)&&(a=qot(e,a,t,n)),Ts(a)&&a.length&&(a=Kot(e,a,t,o.isIndexable)),W8(e,a)&&(a=k0(a,s,i&&i[e],o)),a}function qot(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),W8(t,l)&&(l=G8(s._scopes,s,t,l)),l}function Kot(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Hn(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=G8(c,s,t,u);e.push(k0(d,i,o&&o[t],a))}}return e}function Wde(t,e,n){return yh(t)?t(e,n):t}const Yot=(t,e)=>t===!0?e:typeof t=="string"?rC(e,t):void 0;function Jot(t,e,n,r,s){for(const i of e){const o=Yot(n,i);if(o){t.add(o);const a=Wde(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function G8(t,e,n,r){const s=e._rootScopes,i=Wde(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=vV(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=vV(a,o,i,l,r),l===null)?!1:V8(Array.from(a),[""],s,i,()=>Xot(e,n,r))}function vV(t,e,n,r,s){for(;n;)n=Jot(t,e,n,r,s);return n}function Xot(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Ts(s)&&Hn(n)?n:s||{}}function Zot(t,e,n,r){let s;for(const i of e)if(s=Gde(Wot(i,t),n),typeof s<"u")return W8(t,s)?G8(n,r,t,s):s}function Gde(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function wV(t){let e=t._keys;return e||(e=t._keys=Qot(t._scopes)),e}function Qot(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const eat=Number.EPSILON||1e-14,C0=(t,e)=>e<t.length&&!t[e].skip&&t[e],qde=t=>t==="x"?"y":"x";function tat(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=_O(i,s),l=_O(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:i.x-d*(o.x-s.x),y:i.y-d*(o.y-s.y)},next:{x:i.x+h*(o.x-s.x),y:i.y+h*(o.y-s.y)}}}function nat(t,e,n){const r=t.length;let s,i,o,a,l,c=C0(t,0);for(let u=0;u<r-1;++u)if(l=c,c=C0(t,u+1),!(!l||!c)){if(Hv(e[u],0,eat)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function rat(t,e,n="x"){const r=qde(n),s=t.length;let i,o,a,l=C0(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=C0(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=d-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=d+i*e[c])}}function sat(t,e="x"){const n=qde(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=C0(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=C0(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?E0(s[o-1])!==E0(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}nat(t,s,i),rat(t,i,e)}function D2(t,e,n){return Math.max(Math.min(t,n),e)}function iat(t,e){let n,r,s,i,o,a=rw(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&rw(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=D2(s.cp1x,e.left,e.right),s.cp1y=D2(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=D2(s.cp2x,e.left,e.right),s.cp2y=D2(s.cp2y,e.top,e.bottom)))}function oat(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")sat(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=tat(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&iat(t,n)}function q8(){return typeof window<"u"&&typeof document<"u"}function K8(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function oC(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const hT=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function aat(t,e){return hT(t).getPropertyValue(e)}const lat=["top","right","bottom","left"];function np(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=lat[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const cat=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function uat(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(cat(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function mf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=hT(n),i=s.boxSizing==="border-box",o=np(s,"padding"),a=np(s,"border","width"),{x:l,y:c,box:u}=uat(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:p}=e;return i&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}function dat(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&K8(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=hT(i),l=np(a,"border","width"),c=np(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=oC(a.maxWidth,i,"clientWidth"),s=oC(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||iC,maxHeight:s||iC}}const M2=t=>Math.round(t*10)/10;function hat(t,e,n,r){const s=hT(t),i=np(s,"margin"),o=oC(s.maxWidth,t,"clientWidth")||iC,a=oC(s.maxHeight,t,"clientHeight")||iC,l=dat(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const h=np(s,"border","width"),f=np(s,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=M2(Math.min(c,o,l.maxWidth)),u=M2(Math.min(u,a,l.maxHeight)),c&&!u&&(u=M2(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=M2(Math.floor(u*r))),{width:c,height:u}}function xV(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const fat=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};q8()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function _V(t,e){const n=aat(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function gf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function pat(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function mat(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=gf(t,s,n),a=gf(s,i,n),l=gf(i,e,n),c=gf(o,a,n),u=gf(a,l,n);return gf(c,u,n)}const gat=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},bat=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Fg(t,e,n){return t?gat(e,n):bat()}function Kde(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Yde(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Jde(t){return t==="angle"?{between:Dde,compare:pot,normalize:Nd}:{between:nv,compare:(e,n)=>e-n,normalize:e=>e}}function SV({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function yat(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=Jde(r),l=e.length;let{start:c,end:u,loop:d}=t,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(e[c%l][r]),s,i);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function vat(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=Jde(r),{start:u,end:d,loop:h,style:f}=yat(t,e,n),p=[];let m=!1,g=null,b,v,w;const _=()=>l(s,w,b)&&a(s,w)!==0,S=()=>a(i,b)===0||l(i,w,b),E=()=>m||_(),k=()=>!m||S();for(let x=u,I=u;x<=d;++x)v=e[x%o],!v.skip&&(b=c(v[r]),b!==w&&(m=l(b,s,i),g===null&&E()&&(g=a(b,s)===0?x:I),g!==null&&k()&&(p.push(SV({start:g,end:x,loop:h,count:o,style:f})),g=null),I=x,w=b));return g!==null&&p.push(SV({start:g,end:d,loop:h,count:o,style:f})),p}function wat(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=vat(r[s],t.points,e);i.length&&n.push(...i)}return n}function xat(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function _at(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function Sat(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=xat(n,s,i,r);if(r===!0)return EV(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return EV(t,_at(n,o,l,c),n,e)}function EV(t,e,n,r){return!r||!r.setContext||!n?e:Eat(t,e,n,r)}function Eat(t,e,n,r){const s=t._chart.getContext(),i=kV(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,d=e[0].start,h=d;function f(p,m,g,b){const v=a?-1:1;if(p!==m){for(p+=l;n[p%l].skip;)p-=v;for(;n[m%l].skip;)m+=v;p%l!==m%l&&(c.push({start:p%l,end:m%l,loop:g,style:b}),u=b,d=m%l)}}for(const p of e){d=a?d:p.start;let m=n[d%l],g;for(h=d+1;h<=p.end;h++){const b=n[h%l];g=kV(r.setContext(Kp(s,{type:"segment",p0:m,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),kat(g,u)&&f(d,h-1,p.loop,u),m=b,u=g}d<h-1&&f(d,h-1,p.loop,u)}return c}function kV(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function kat(t,e){if(!e)return!1;const n=[],r=function(s,i){return U8(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Cat{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=jde.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ou=new Cat;const CV="transparent",Aat={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=mV(t||CV),s=r.valid&&mV(e||CV);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Tat{constructor(e,n,r,s){const i=n[r];s=L2([e.to,s,i,e.from]);const o=L2([e.from,i,s]);this._active=!0,this._fn=e.fn||Aat[e.type||typeof o],this._easing=zv[e.easing]||zv.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=L2([e.to,n,s,e.from]),this._from=L2([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class Xde{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Hn(e))return;const n=Object.keys(Kr.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Hn(i))return;const o={};for(const a of n)o[a]=i[a];(Ts(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=Nat(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&Pat(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let d=i[c];const h=r.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}i[c]=d=new Tat(h,e,c,u),s.push(d)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return ou.add(this._chart,r),!0}}function Pat(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function Nat(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function AV(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function Iat(t,e,n){if(n===!1)return!1;const r=AV(t,n),s=AV(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function Rat(t){let e,n,r,s;return Hn(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Zde(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function TV(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Oa(c)&&(i||e===0||E0(e)===E0(c))&&(e+=c)}return!u&&!r.all?0:e}function Oat(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function YP(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Lat(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Dat(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function Mat(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function PV(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function NV(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=Lat(i,o,r),d=e.length;let h;for(let f=0;f<d;++f){const p=e[f],{[l]:m,[c]:g}=p,b=p._stacks||(p._stacks={});h=b[c]=Mat(s,u,m),h[a]=g,h._top=PV(h,o,!0,r.type),h._bottom=PV(h,o,!1,r.type);const v=h._visualValues||(h._visualValues={});v[a]=g}}function JP(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function jat(t,e){return Kp(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Fat(t,e,n){return Kp(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function _y(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const XP=t=>t==="reset"||t==="none",IV=(t,e)=>e?t:Object.assign({},t),Bat=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Zde(n,!0),values:null};class Qde{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=YP(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_y(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(d,h,f,p)=>d==="x"?h:d==="r"?p:f,i=n.xAxisID=Pn(r.xAxisID,JP(e,"x")),o=n.yAxisID=Pn(r.yAxisID,JP(e,"y")),a=n.rAxisID=Pn(r.rAxisID,JP(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&hV(this._data,this),e._stacked&&_y(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Hn(n)){const s=this._cachedMeta;this._data=Oat(n,s)}else if(r!==n){if(r){hV(r,this);const s=this._cachedMeta;_y(s),s._parsed=[]}n&&Object.isExtensible(n)&&yot(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=YP(n.vScale,n),n.stack!==r.stack&&(s=!0,_y(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(NV(this,n._parsed),n._stacked=YP(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,h;if(this._parsing===!1)r._parsed=s,r._sorted=!0,h=s;else{Ts(s[e])?h=this.parseArrayData(r,s,e,n):Hn(s[e])?h=this.parseObjectData(r,s,e,n):h=this.parsePrimitiveData(r,s,e,n);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=h[u],l&&(f()&&(l=!1),c=d);r._sorted=l}o&&NV(this,h)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,d=new Array(s);let h,f,p;for(h=0,f=s;h<f;++h)p=h+r,d[h]={[a]:u||i.parse(c[p],p),[l]:o.parse(n[p],p)};return d}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,d;for(l=0,c=s;l<c;++l)u=l+r,d=n[u],a[l]={x:i.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,d,h,f;for(u=0,d=s;u<d;++u)h=u+r,f=n[h],c[u]={x:i.parse(rC(f,a),h),y:o.parse(rC(f,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:Zde(s,!0),values:n._stacks[e.axis]._visualValues};return TV(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=TV(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=Bat(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=Dat(a);let h,f;function p(){f=s[h];const m=f[a.axis];return!Oa(f[e.axis])||u>m||d<m}for(h=0;h<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),i));++h);if(i){for(h=o-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Oa(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Rat(Pn(this.options.clip,Iat(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const d=s[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Fat(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=jat(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&sC(r);if(a)return IV(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Kr.elements[e]),p=()=>this.getContext(r,s,n),m=c.resolveNamedOptions(h,f,p,d);return m.$shared&&(m.$shared=l,i[o]=Object.freeze(IV(m,l))),m}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,r,n))}const c=new Xde(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||XP(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){XP(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!XP(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&_y(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class $at extends Qde{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=_ot(n,s,o);this._drawStart=a,this._drawCount=l,Sot(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,s),h=o.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,g=nw(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||s==="none",v=n+r,w=e.length;let _=n>0&&this.getParsed(n-1);for(let S=0;S<w;++S){const E=e[S],k=b?E:{};if(S<n||S>=v){k.skip=!0;continue}const x=this.getParsed(S),I=pr(x[f]),R=k[h]=o.getPixelForValue(x[h],S),C=k[f]=i||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[f],S);k.skip=isNaN(R)||isNaN(C)||I,k.stop=S>0&&Math.abs(x[h]-_[h])>g,m&&(k.parsed=x,k.raw=c.data[S]),d&&(k.options=u||this.resolveDataElementOptions(S,E.active?"active":s)),b||this.updateElement(E,S,k,s),_=x}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function rf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Y8{static override(e){Object.assign(Y8.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return rf()}parse(){return rf()}format(){return rf()}add(){return rf()}diff(){return rf()}startOf(){return rf()}endOf(){return rf()}}var Uat={_date:Y8};function Hat(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?got:Of;if(r){if(s._sharedOptions){const u=i[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(i,e,n-d),f=c(i,e,n+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:d}=s._cachedMeta,{_parsed:h}=t,f=h.slice(0,u.lo+1).reverse().findIndex(m=>!pr(m[d.axis]));u.lo-=Math.max(0,f);const p=h.slice(u.hi).findIndex(m=>!pr(m[d.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:i.length-1}}function fT(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:d,hi:h}=Hat(i[a],e,o,s);for(let f=d;f<=h;++f){const p=u[f];p.skip||r(p,c,f)}}}function zat(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function ZP(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||fT(t,n,e,function(a,l,c){!s&&!rw(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function Vat(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=fot(o,{x:e.x,y:e.y});Dde(d,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return fT(t,n,e,i),s}function Wat(t,e,n,r,s,i){let o=[];const a=zat(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(e.x,e.y,s);if(r&&!f)return;const p=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(p))&&!f)return;const g=a(e,p);g<l?(o=[{element:u,datasetIndex:d,index:h}],l=g):g===l&&o.push({element:u,datasetIndex:d,index:h})}return fT(t,n,e,c),o}function QP(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?Vat(t,e,n,s):Wat(t,e,n,r,s,i)}function RV(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return fT(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var Gat={modes:{index(t,e,n,r){const s=mf(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ZP(t,s,i,r,o):QP(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=mf(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ZP(t,s,i,r,o):QP(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=mf(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return ZP(t,s,i,r,o)},nearest(t,e,n,r){const s=mf(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return QP(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=mf(e,t);return RV(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=mf(e,t);return RV(t,s,"y",n.intersect,r)}}};const ehe=["left","top","right","bottom"];function Sy(t,e){return t.filter(n=>n.pos===e)}function OV(t,e){return t.filter(n=>ehe.indexOf(n.pos)===-1&&n.box.axis===e)}function Ey(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function qat(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function Kat(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!ehe.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function Yat(t,e){const n=Kat(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function Jat(t){const e=qat(t),n=Ey(e.filter(c=>c.box.fullSize),!0),r=Ey(Sy(e,"left"),!0),s=Ey(Sy(e,"right")),i=Ey(Sy(e,"top"),!0),o=Ey(Sy(e,"bottom")),a=OV(e,"x"),l=OV(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Sy(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function LV(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function the(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Xat(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Hn(s)){n.size&&(t[s]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[s]+=n.size}i.getPadding&&the(o,i.getPadding());const a=Math.max(0,e.outerWidth-LV(o,t,"left","right")),l=Math.max(0,e.outerHeight-LV(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Zat(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Qat(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function rv(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,Qat(a.horizontal,e));const{same:d,other:h}=Xat(e,n,a,r);c|=d&&s.length,u=u||h,l.fullSize||s.push(a)}return c&&rv(s,e,n,r)||u}function j2(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function DV(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;sC(c.start)&&(o=c.start),l.fullSize?j2(l,s.left,o,n.outerWidth-s.right-s.left,h):j2(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;sC(c.start)&&(i=c.start),l.fullSize?j2(l,i,s.top,h,n.outerHeight-s.bottom-s.top):j2(l,i,e.top+c.placed,h,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var va={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=La(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=Jat(t.boxes),l=a.vertical,c=a.horizontal;qn(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,g)=>g.box.options&&g.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},s);the(h,La(r));const f=Object.assign({maxPadding:h,w:i,h:o,x:s.left,y:s.top},s),p=Yat(l.concat(c),d);rv(a.fullSize,f,d,p),rv(l,f,d,p),rv(c,f,d,p)&&rv(l,f,d,p),Zat(f),DV(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,DV(a.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},qn(a.chartArea,m=>{const g=m.box;Object.assign(g,t.chartArea),g.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class nhe{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class elt extends nhe{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const QS="$chartjs",tlt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},MV=t=>t===null||t==="";function nlt(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[QS]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",MV(s)){const i=_V(t,"width");i!==void 0&&(t.width=i)}if(MV(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=_V(t,"height");i!==void 0&&(t.height=i)}return t}const rhe=fat?{passive:!0}:!1;function rlt(t,e,n){t&&t.addEventListener(e,n,rhe)}function slt(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,rhe)}function ilt(t,e){const n=tlt[t.type]||t.type,{x:r,y:s}=mf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function aC(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function olt(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||aC(a.addedNodes,r),o=o&&!aC(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function alt(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||aC(a.removedNodes,r),o=o&&!aC(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const iw=new Map;let jV=0;function she(){const t=window.devicePixelRatio;t!==jV&&(jV=t,iw.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function llt(t,e){iw.size||window.addEventListener("resize",she),iw.set(t,e)}function clt(t){iw.delete(t),iw.size||window.removeEventListener("resize",she)}function ult(t,e,n){const r=t.canvas,s=r&&K8(r);if(!s)return;const i=Fde((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),llt(t,i),o}function eN(t,e,n){n&&n.disconnect(),e==="resize"&&clt(t)}function dlt(t,e,n){const r=t.canvas,s=Fde(i=>{t.ctx!==null&&n(ilt(i,t))},t);return rlt(r,e,s),s}class hlt extends nhe{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(nlt(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[QS])return!1;const r=n[QS].initial;["height","width"].forEach(i=>{const o=r[i];pr(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[QS],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:olt,detach:alt,resize:ult}[n]||dlt;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:eN,detach:eN,resize:eN}[n]||slt)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return hat(e,n,r,s)}isAttached(e){const n=e&&K8(e);return!!(n&&n.isConnected)}}function flt(t){return!q8()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?elt:hlt}let Yp=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return nw(this.x)&&nw(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}};function plt(t,e){const n=t.options.ticks,r=mlt(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?blt(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return ylt(e,c,i,o/s),c;const u=glt(i,e,s);if(o>0){let d,h;const f=o>1?Math.round((l-a)/(o-1)):null;for(F2(e,c,u,pr(f)?0:a-f,a),d=0,h=o-1;d<h;d++)F2(e,c,u,i[d],i[d+1]);return F2(e,c,u,l,pr(f)?e.length:l+f),c}return F2(e,c,u),c}function mlt(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function glt(t,e,n){const r=vlt(t),s=e.length/n;if(!r)return Math.max(s,1);const i=lot(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function blt(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function ylt(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function F2(t,e,n,r,s){const i=Pn(r,0),o=Math.min(Pn(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function vlt(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const wlt=t=>t==="left"?"right":t==="right"?"left":t,FV=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,BV=(t,e)=>Math.min(e||t,t);function $V(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function xlt(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function _lt(t,e){qn(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function ky(t){return t.drawTicks?t.tickLength:0}function UV(t,e){if(!t.display)return 0;const n=fi(t.font,e),r=La(t.padding);return(Ts(t.text)?t.text.length:1)*n.lineHeight+r.height}function Slt(t,e){return Kp(t,{scale:e,type:"scale"})}function Elt(t,e,n){return Kp(t,{tick:n,index:e,type:"tick"})}function klt(t,e,n){let r=$8(t);return(n&&e!=="right"||!n&&e==="right")&&(r=wlt(r)),r}function Clt(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,f,p;const m=o-s,g=a-i;if(t.isHorizontal()){if(f=oi(r,i,a),Hn(n)){const b=Object.keys(n)[0],v=n[b];p=u[b].getPixelForValue(v)+m-e}else n==="center"?p=(c.bottom+c.top)/2+m-e:p=FV(t,n,e);h=a-i}else{if(Hn(n)){const b=Object.keys(n)[0],v=n[b];f=u[b].getPixelForValue(v)-g+e}else n==="center"?f=(c.left+c.right)/2-g+e:f=FV(t,n,e);p=oi(r,o,s),d=n==="left"?-al:al}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}class db extends Yp{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Ul(e,Number.POSITIVE_INFINITY),n=Ul(n,Number.NEGATIVE_INFINITY),r=Ul(r,Number.POSITIVE_INFINITY),s=Ul(s,Number.NEGATIVE_INFINITY),{min:Ul(e,r),max:Ul(n,s),minDefined:Oa(e),maxDefined:Oa(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Ul(n,Ul(r,n)),max:Ul(r,Ul(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){mr(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Vot(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?$V(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=plt(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){mr(this.options.afterUpdate,[this])}beforeSetDimensions(){mr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){mr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),mr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){mr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=mr(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){mr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){mr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=BV(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=ya(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),d+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-ky(e.grid)-n.padding-UV(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=hot(Math.min(Math.asin(ya((u.highest.height+6)/a,-1,1)),Math.asin(ya(l/c,-1,1))-Math.asin(ya(h/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){mr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){mr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=UV(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=ky(i)+l):(e.height=this.maxHeight,e.width=ky(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=r.padding*2,p=Rf(this.labelRotation),m=Math.cos(p),g=Math.sin(p);if(a){const b=r.mirror?0:g*d.width+m*h.height;e.height=Math.min(this.maxHeight,e.height+b+f)}else{const b=r.mirror?0:m*d.width+g*h.height;e.width=Math.min(this.maxWidth,e.width+b+f)}this._calculatePadding(c,u,g,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=s*e.width,f=r*n.height):(h=r*e.height,f=s*n.width):i==="start"?f=n.width:i==="end"?h=e.width:i!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;i==="start"?(u=0,d=e.height):i==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){mr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)pr(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=$V(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/BV(n,r));let c=0,u=0,d,h,f,p,m,g,b,v,w,_,S;for(d=0;d<n;d+=l){if(p=e[d].label,m=this._resolveTickFontOptions(d),s.font=g=m.string,b=i[g]=i[g]||{data:{},gc:[]},v=m.lineHeight,w=_=0,!pr(p)&&!Ts(p))w=bV(s,b.data,b.gc,w,p),_=v;else if(Ts(p))for(h=0,f=p.length;h<f;++h)S=p[h],!pr(S)&&!Ts(S)&&(w=bV(s,b.data,b.gc,w,S),_+=v);o.push(w),a.push(_),c=Math.max(w,c),u=Math.max(_,u)}_lt(i,n);const E=o.indexOf(c),k=a.indexOf(u),x=I=>({width:o[I]||0,height:a[I]||0});return{first:x(0),last:x(n-1),widest:x(E),highest:x(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return mot(this._alignToPixels?nf(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=Elt(this.getContext(),e,r))}return this.$context||(this.$context=Slt(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Rf(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=ky(i),f=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,g=m/2,b=function(ee){return nf(r,ee,m)};let v,w,_,S,E,k,x,I,R,C,T,O;if(o==="top")v=b(this.bottom),k=this.bottom-h,I=v-g,C=b(e.top)+g,O=e.bottom;else if(o==="bottom")v=b(this.top),C=e.top,O=b(e.bottom)-g,k=v+g,I=this.top+h;else if(o==="left")v=b(this.right),E=this.right-h,x=v-g,R=b(e.left)+g,T=e.right;else if(o==="right")v=b(this.left),R=e.left,T=b(e.right)-g,E=v+g,x=this.left+h;else if(n==="x"){if(o==="center")v=b((e.top+e.bottom)/2+.5);else if(Hn(o)){const ee=Object.keys(o)[0],X=o[ee];v=b(this.chart.scales[ee].getPixelForValue(X))}C=e.top,O=e.bottom,k=v+g,I=k+h}else if(n==="y"){if(o==="center")v=b((e.left+e.right)/2);else if(Hn(o)){const ee=Object.keys(o)[0],X=o[ee];v=b(this.chart.scales[ee].getPixelForValue(X))}E=v-g,x=E-h,R=e.left,T=e.right}const P=Pn(s.ticks.maxTicksLimit,d),U=Math.max(1,Math.ceil(d/P));for(w=0;w<d;w+=U){const ee=this.getContext(w),X=i.setContext(ee),Z=a.setContext(ee),F=X.lineWidth,M=X.color,G=Z.dash||[],D=Z.dashOffset,j=X.tickWidth,W=X.tickColor,q=X.tickBorderDash||[],ne=X.tickBorderDashOffset;_=xlt(this,w,l),_!==void 0&&(S=nf(r,_,F),c?E=x=R=T=S:k=I=C=O=S,f.push({tx1:E,ty1:k,tx2:x,ty2:I,x1:R,y1:C,x2:T,y2:O,width:F,color:M,borderDash:G,borderDashOffset:D,tickWidth:j,tickColor:W,tickBorderDash:q,tickBorderDashOffset:ne}))}return this._ticksLength=d,this._borderValue=v,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=i,h=ky(r.grid),f=h+u,p=d?-u:f,m=-Rf(this.labelRotation),g=[];let b,v,w,_,S,E,k,x,I,R,C,T,O="middle";if(s==="top")E=this.bottom-p,k=this._getXAxisLabelAlignment();else if(s==="bottom")E=this.top+p,k=this._getXAxisLabelAlignment();else if(s==="left"){const U=this._getYAxisLabelAlignment(h);k=U.textAlign,S=U.x}else if(s==="right"){const U=this._getYAxisLabelAlignment(h);k=U.textAlign,S=U.x}else if(n==="x"){if(s==="center")E=(e.top+e.bottom)/2+f;else if(Hn(s)){const U=Object.keys(s)[0],ee=s[U];E=this.chart.scales[U].getPixelForValue(ee)+f}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")S=(e.left+e.right)/2-f;else if(Hn(s)){const U=Object.keys(s)[0],ee=s[U];S=this.chart.scales[U].getPixelForValue(ee)}k=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?O="top":l==="end"&&(O="bottom"));const P=this._getLabelSizes();for(b=0,v=a.length;b<v;++b){w=a[b],_=w.label;const U=i.setContext(this.getContext(b));x=this.getPixelForTick(b)+i.labelOffset,I=this._resolveTickFontOptions(b),R=I.lineHeight,C=Ts(_)?_.length:1;const ee=C/2,X=U.color,Z=U.textStrokeColor,F=U.textStrokeWidth;let M=k;o?(S=x,k==="inner"&&(b===v-1?M=this.options.reverse?"left":"right":b===0?M=this.options.reverse?"right":"left":M="center"),s==="top"?c==="near"||m!==0?T=-C*R+R/2:c==="center"?T=-P.highest.height/2-ee*R+R:T=-P.highest.height+R/2:c==="near"||m!==0?T=R/2:c==="center"?T=P.highest.height/2-ee*R:T=P.highest.height-C*R,d&&(T*=-1),m!==0&&!U.showLabelBackdrop&&(S+=R/2*Math.sin(m))):(E=x,T=(1-C)*R/2);let G;if(U.showLabelBackdrop){const D=La(U.backdropPadding),j=P.heights[b],W=P.widths[b];let q=T-D.top,ne=0-D.left;switch(O){case"middle":q-=j/2;break;case"bottom":q-=j;break}switch(k){case"center":ne-=W/2;break;case"right":ne-=W;break;case"inner":b===v-1?ne-=W:b>0&&(ne-=W/2);break}G={left:ne,top:q,width:W+D.width,height:j+D.height,color:U.backdropColor}}g.push({label:_,font:I,textOffset:T,options:{rotation:m,color:X,strokeColor:Z,strokeWidth:F,textAlign:M,textBaseline:O,translation:[S,E],backdrop:G}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Rf(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=nf(e,this.left,o)-o/2,u=nf(e,this.right,a)+a/2,d=h=l):(d=nf(e,this.top,o)-o/2,h=nf(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&H8(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;sw(r,c,0,u,l,a)}s&&z8(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=fi(r.font),o=La(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Hn(n)?(l+=o.bottom,Ts(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=Clt(this,l,n,a);sw(e,r.text,0,0,i,{color:r.color,maxWidth:d,rotation:h,textAlign:klt(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Pn(e.grid&&e.grid.z,-1),s=Pn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==db.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return fi(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class B2{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;Plt(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,Alt(e,o,r),this.override&&Kr.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in Kr[s]&&(delete Kr[s][r],this.override&&delete yp[r])}}function Alt(t,e,n){const r=tw(Object.create(null),[n?Kr.get(n):{},Kr.get(e),t.defaults]);Kr.set(e,r),t.defaultRoutes&&Tlt(e,t.defaultRoutes),t.descriptors&&Kr.describe(e,t.descriptors)}function Tlt(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Kr.route(i,s,l,a)})}function Plt(t){return"id"in t&&"defaults"in t}class Nlt{constructor(){this.controllers=new B2(Qde,"datasets",!0),this.elements=new B2(Yp,"elements"),this.plugins=new B2(Object,"plugins"),this.scales=new B2(db,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):qn(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=F8(e);mr(r["before"+s],[],r),n[e](r),mr(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var rc=new Nlt;class Ilt{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(mr(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){pr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=Pn(r.options&&r.options.plugins,{}),i=Rlt(r);return s===!1&&!n?[]:Llt(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function Rlt(t){const e={},n=[],r=Object.keys(rc.plugins.items);for(let i=0;i<r.length;i++)n.push(rc.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Olt(t,e){return!e&&t===!1?null:t===!0?{}:t}function Llt(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=Olt(r[l],s);c!==null&&i.push({plugin:a,options:Dlt(t.config,{plugin:a,local:n[l]},c,o)})}return i}function Dlt(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function CO(t,e){const n=Kr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Mlt(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function jlt(t,e){return t===e?"_index_":"_value_"}function HV(t){if(t==="x"||t==="y"||t==="r")return t}function Flt(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function AO(t,...e){if(HV(t))return t;for(const n of e){const r=n.axis||Flt(n.position)||t.length>1&&HV(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function zV(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Blt(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return zV(t,"x",n[0])||zV(t,"y",n[0])}return{}}function $lt(t,e){const n=yp[t.type]||{scales:{}},r=e.scales||{},s=CO(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Hn(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=AO(o,a,Blt(o,t),Kr.scales[a.type]),c=jlt(l,s),u=n.scales||{};i[o]=Uv(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||CO(a,e),u=(yp[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=Mlt(d,l),f=o[h+"AxisID"]||h;i[f]=i[f]||Object.create(null),Uv(i[f],[{axis:h},r[f],u[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];Uv(a,[Kr.scales[a.type],Kr.scale])}),i}function ihe(t){const e=t.options||(t.options={});e.plugins=Pn(e.plugins,{}),e.scales=$lt(t,e)}function ohe(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Ult(t){return t=t||{},t.data=ohe(t.data),ihe(t),t}const VV=new Map,ahe=new Set;function $2(t,e){let n=VV.get(t);return n||(n=e(),VV.set(t,n),ahe.add(n)),n}const Cy=(t,e,n)=>{const r=rC(e,n);r!==void 0&&t.add(r)};let Hlt=class{constructor(e){this._config=Ult(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ohe(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ihe(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $2(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return $2(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return $2(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return $2(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>Cy(l,e,d))),u.forEach(d=>Cy(l,s,d)),u.forEach(d=>Cy(l,yp[i]||{},d)),u.forEach(d=>Cy(l,Kr,d)),u.forEach(d=>Cy(l,SO,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),ahe.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,yp[n]||{},Kr.datasets[n]||{},{type:n},Kr,SO]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=WV(this._resolverCache,e,s);let l=o;if(Vlt(o,n)){i.$shared=!1,r=yh(r)?r():r;const c=this.createResolver(e,r,a);l=k0(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=WV(this._resolverCache,e,r);return Hn(n)?k0(i,n,void 0,s):i}};function WV(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:V8(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const zlt=t=>Hn(t)&&Object.getOwnPropertyNames(t).some(e=>yh(t[e]));function Vlt(t,e){const{isScriptable:n,isIndexable:r}=zde(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(yh(a)||zlt(a))||o&&Ts(a))return!0}return!1}var Wlt="4.4.8";const Glt=["top","bottom","left","right","chartArea"];function GV(t,e){return t==="top"||t==="bottom"||Glt.indexOf(t)===-1&&e==="x"}function qV(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function KV(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),mr(n&&n.onComplete,[t],e)}function qlt(t){const e=t.chart,n=e.options.animation;mr(n&&n.onProgress,[t],e)}function lhe(t){return q8()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const eE={},YV=t=>{const e=lhe(t);return Object.values(eE).filter(n=>n.canvas===e).pop()};function Klt(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function Ylt(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function U2(t,e,n){return t.options.clip?t[n]:e[n]}function Jlt(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:U2(n,e,"left"),right:U2(n,e,"right"),top:U2(r,e,"top"),bottom:U2(r,e,"bottom")}:e}let pT=class{static defaults=Kr;static instances=eE;static overrides=yp;static registry=rc;static version=Wlt;static getChart=YV;static register(...e){rc.add(...e),JV()}static unregister(...e){rc.remove(...e),JV()}constructor(e,n){const r=this.config=new Hlt(n),s=lhe(e),i=YV(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||flt(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Qit(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ilt,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=wot(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],eE[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ou.listen(this,"complete",KV),ou.listen(this,"progress",qlt),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return pr(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return rc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xV(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yV(this.canvas,this.ctx),this}stop(){return ou.stop(this),this}resize(e,n){ou.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,xV(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),mr(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};qn(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=AO(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),qn(i,o=>{const a=o.options,l=a.id,c=AO(l,a),u=Pn(a.type,o.dtype);(a.position===void 0||GV(a.position,c)!==GV(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const h=rc.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),qn(s,(o,a)=>{o||delete r[a]}),qn(r,o=>{va.configure(this,o,o.options),va.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(qV("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||CO(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=rc.getController(a),{datasetElementType:c,dataElementType:u}=Kr.datasets[a];Object.assign(l,{dataElementType:rc.getElement(u),datasetElementType:c&&rc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){qn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!s&&i.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||qn(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(qV("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){qn(this.scales,e=>{va.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!lV(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;Klt(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!lV(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;va.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],qn(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,yh(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ou.has(this)?this.attached&&!ou.running(this)&&ou.start(this):(this.draw(),KV({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,s=!r.disabled,i=Jlt(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&H8(n,{left:r.left===!1?0:i.left-r.left,right:r.right===!1?this.width:i.right+r.right,top:r.top===!1?0:i.top-r.top,bottom:r.bottom===!1?this.height:i.bottom+r.bottom}),e.controller.draw(),s&&z8(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return rw(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=Gat.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Kp(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);sC(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ou.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),yV(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete eE[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};qn(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){qn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},qn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!tC(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=iot(e),c=Ylt(e,this._lastEvent,r,l);r&&(this._lastEvent=null,mr(i.onHover,[e,a,this],this),l&&mr(i.onClick,[e,a,this],this));const u=!tC(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}};function JV(){return qn(pT.instances,t=>t._plugins.invalidate())}function che(t,e,n=e){t.lineCap=Pn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Pn(n.borderDash,e.borderDash)),t.lineDashOffset=Pn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Pn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Pn(n.borderWidth,e.borderWidth),t.strokeStyle=Pn(n.borderColor,e.borderColor)}function Xlt(t,e,n){t.lineTo(n.x,n.y)}function Zlt(t){return t.stepped?Lot:t.tension||t.cubicInterpolationMode==="monotone"?Dot:Xlt}function uhe(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function Qlt(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=uhe(s,n,r),u=Zlt(i);let{move:d=!0,reverse:h}=r||{},f,p,m;for(f=0;f<=c;++f)p=s[(a+(h?c-f:f))%o],!p.skip&&(d?(t.moveTo(p.x,p.y),d=!1):u(t,m,p,h,i.stepped),m=p);return l&&(p=s[(a+(h?c:0))%o],u(t,m,p,h,i.stepped)),!!l}function ect(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=uhe(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,h,f,p,m,g,b;const v=_=>(o+(c?a-_:_))%i,w=()=>{m!==g&&(t.lineTo(u,g),t.lineTo(u,m),t.lineTo(u,b))};for(l&&(f=s[v(0)],t.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=s[v(h)],f.skip)continue;const _=f.x,S=f.y,E=_|0;E===p?(S<m?m=S:S>g&&(g=S),u=(d*u+_)/++d):(w(),t.lineTo(_,S),p=E,d=0,m=g=S),b=S}w()}function TO(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?ect:Qlt}function tct(t){return t.stepped?pat:t.tension||t.cubicInterpolationMode==="monotone"?mat:gf}function nct(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),che(t,e.options),t.stroke(s)}function rct(t,e,n,r){const{segments:s,options:i}=e,o=TO(e);for(const a of s)che(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const sct=typeof Path2D=="function";function ict(t,e,n,r){sct&&!e.options.segment?nct(t,e,n,r):rct(t,e,n,r)}class oct extends Yp{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;oat(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Sat(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=wat(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=tct(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],f=i[d],p=i[h];if(f===p){a.push(f);continue}const m=Math.abs((s-f[n])/(p[n]-f[n])),g=l(f,p,m,r.stepped);g[n]=e[n],a.push(g)}return a.length===1?a[0]:a}pathSegment(e,n,r){return TO(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=TO(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),ict(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function XV(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class act extends Yp{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(e-i,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return XV(this,e,"x",n)}inYRange(e,n){return XV(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!rw(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,EO(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const ZV=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},lct=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class QV extends Yp{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=mr(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=fi(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ZV(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let d=e;i.textAlign="left",i.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,m)=>{const g=r+n/2+i.measureText(p.text).width;(m===0||c[c.length-1]+g+2*a>o)&&(d+=u,c[c.length-(m>0?0:1)]=0,f+=u,h++),l[m]={left:0,top:f,row:h,width:g,height:s},c[c.length-1]+=g+a}),d}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,f=0,p=0,m=0;return this.legendItems.forEach((g,b)=>{const{itemWidth:v,itemHeight:w}=cct(r,n,i,g,s);b>0&&f+w+2*a>u&&(d+=h+a,c.push({width:h,height:f}),p+=h+a,m++,h=f=0),l[b]={left:p,top:f,col:m,width:v,height:w},h=Math.max(h,v),f+=w+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Fg(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=oi(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=oi(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=oi(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=oi(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;H8(e,this),this._draw(),z8(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=Kr.color,l=Fg(e.rtl,this.left,this.width),c=fi(o.font),{padding:u}=o,d=c.size,h=d/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:m,itemHeight:g}=ZV(o,d),b=function(E,k,x){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;s.save();const I=Pn(x.lineWidth,1);if(s.fillStyle=Pn(x.fillStyle,a),s.lineCap=Pn(x.lineCap,"butt"),s.lineDashOffset=Pn(x.lineDashOffset,0),s.lineJoin=Pn(x.lineJoin,"miter"),s.lineWidth=I,s.strokeStyle=Pn(x.strokeStyle,a),s.setLineDash(Pn(x.lineDash,[])),o.usePointStyle){const R={radius:m*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:I},C=l.xPlus(E,p/2),T=k+h;Ude(s,R,C,T,o.pointStyleWidth&&p)}else{const R=k+Math.max((d-m)/2,0),C=l.leftForLtr(E,p),T=Wv(x.borderRadius);s.beginPath(),Object.values(T).some(O=>O!==0)?kO(s,{x:C,y:R,w:p,h:m,radius:T}):s.rect(C,R,p,m),s.fill(),I!==0&&s.stroke()}s.restore()},v=function(E,k,x){sw(s,x.text,E,k+g/2,c,{strikethrough:x.hidden,textAlign:l.textAlign(x.textAlign)})},w=this.isHorizontal(),_=this._computeTitleHeight();w?f={x:oi(i,this.left+u,this.right-r[0]),y:this.top+u+_,line:0}:f={x:this.left+u,y:oi(i,this.top+_+u,this.bottom-n[0].height),line:0},Kde(this.ctx,e.textDirection);const S=g+u;this.legendItems.forEach((E,k)=>{s.strokeStyle=E.fontColor,s.fillStyle=E.fontColor;const x=s.measureText(E.text).width,I=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),R=p+h+x;let C=f.x,T=f.y;l.setWidth(this.width),w?k>0&&C+R+u>this.right&&(T=f.y+=S,f.line++,C=f.x=oi(i,this.left+u,this.right-r[f.line])):k>0&&T+S>this.bottom&&(C=f.x=C+n[f.line].width+u,f.line++,T=f.y=oi(i,this.top+_+u,this.bottom-n[f.line].height));const O=l.x(C);if(b(O,T,E),C=xot(I,C+p+h,w?C+R:this.right,e.rtl),v(l.x(C),T,E),w)f.x+=R+u;else if(typeof E.text!="string"){const P=c.lineHeight;f.y+=dhe(E,P)+u}else f.y+=S}),Yde(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=fi(n.font),s=La(n.padding);if(!n.display)return;const i=Fg(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=oi(e.align,d,this.right-h);else{const p=this.columnSizes.reduce((m,g)=>Math.max(m,g.height),0);u=c+oi(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=oi(a,d,d+h);o.textAlign=i.textAlign($8(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,sw(o,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=fi(e.font),r=La(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(nv(e,this.left,this.right)&&nv(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],nv(e,s.left,s.left+s.width)&&nv(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!hct(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=lct(s,r);s&&!i&&mr(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&mr(n.onHover,[e,r,this],this)}else r&&mr(n.onClick,[e,r,this],this)}}function cct(t,e,n,r,s){const i=uct(r,t,e,n),o=dct(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function uct(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function dct(t,e,n){let r=t;return typeof e.text!="string"&&(r=dhe(e,n)),r}function dhe(t,e){const n=t.text?t.text.length:0;return e*n}function hct(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var fct={id:"legend",_element:QV,start(t,e,n){const r=t.legend=new QV({ctx:t.ctx,options:n,chart:t});va.configure(t,r,n),va.addBox(t,r)},stop(t){va.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;va.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=La(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class hhe extends Yp{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Ts(r.text)?r.text.length:1;this._padding=La(r.padding);const i=s*fi(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=oi(a,r,i),d=n+e,c=i-r):(o.position==="left"?(u=r+e,d=oi(a,s,n),l=Is*-.5):(u=i-e,d=oi(a,n,s),l=Is*.5),c=s-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=fi(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);sw(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:$8(n.align),textBaseline:"middle",translation:[o,a]})}}function pct(t,e){const n=new hhe({ctx:t.ctx,options:e,chart:t});va.configure(t,n,e),va.addBox(t,n),t.titleBlock=n}var mct={id:"title",_element:hhe,start(t,e,n){pct(t,n)},stop(t){const e=t.titleBlock;va.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;va.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const sv={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=_O(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Ql(t,e){return e&&(Ts(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function au(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function gct(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function eW(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=fi(e.bodyFont),c=fi(e.titleFont),u=fi(e.footerFont),d=i.length,h=s.length,f=r.length,p=La(e.padding);let m=p.height,g=0,b=r.reduce((_,S)=>_+S.before.length+S.lines.length+S.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const _=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*_+(b-f)*l.lineHeight+(b-1)*e.bodySpacing}h&&(m+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let v=0;const w=function(_){g=Math.max(g,n.measureText(_).width+v)};return n.save(),n.font=c.string,qn(t.title,w),n.font=l.string,qn(t.beforeBody.concat(t.afterBody),w),v=e.displayColors?o+2+e.boxPadding:0,qn(r,_=>{qn(_.before,w),qn(_.lines,w),qn(_.after,w)}),v=0,n.font=u.string,qn(t.footer,w),n.restore(),g+=p.width,{width:g,height:m}}function bct(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function yct(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function vct(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),yct(c,t,e,n)&&(c="center"),c}function tW(t,e,n){const r=n.yAlign||e.yAlign||bct(t,n);return{xAlign:n.xAlign||e.xAlign||vct(t,e,n,r),yAlign:r}}function wct(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function xct(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function nW(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Wv(o);let p=wct(e,a);const m=xct(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,h)+s:a==="right"&&(p+=Math.max(d,f)+s),{x:ya(p,0,r.width-e.width),y:ya(m,0,r.height-e.height)}}function H2(t,e,n){const r=La(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function rW(t){return Ql([],au(t))}function _ct(t,e,n){return Kp(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function sW(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const fhe={beforeTitle:ru,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:ru,beforeBody:ru,beforeLabel:ru,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return pr(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ru,afterBody:ru,beforeFooter:ru,footer:ru,afterFooter:ru};function Ji(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?fhe[e].call(n,r):s}class iW extends Yp{static positioners=sv;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new Xde(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=_ct(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Ji(r,"beforeTitle",this,e),i=Ji(r,"title",this,e),o=Ji(r,"afterTitle",this,e);let a=[];return a=Ql(a,au(s)),a=Ql(a,au(i)),a=Ql(a,au(o)),a}getBeforeBody(e,n){return rW(Ji(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return qn(e,i=>{const o={before:[],lines:[],after:[]},a=sW(r,i);Ql(o.before,au(Ji(a,"beforeLabel",this,i))),Ql(o.lines,Ji(a,"label",this,i)),Ql(o.after,au(Ji(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return rW(Ji(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Ji(r,"beforeFooter",this,e),i=Ji(r,"footer",this,e),o=Ji(r,"afterFooter",this,e);let a=[];return a=Ql(a,au(s)),a=Ql(a,au(i)),a=Ql(a,au(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(gct(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),qn(a,u=>{const d=sW(e.callbacks,u);s.push(Ji(d,"labelColor",this,u)),i.push(Ji(d,"labelPointStyle",this,u)),o.push(Ji(d,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=sv[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=eW(this,r),c=Object.assign({},a,l),u=tW(this.chart,r,c),d=nW(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Wv(a),{x:h,y:f}=e,{width:p,height:m}=n;let g,b,v,w,_,S;return i==="center"?(_=f+m/2,s==="left"?(g=h,b=g-o,w=_+o,S=_-o):(g=h+p,b=g+o,w=_-o,S=_+o),v=g):(s==="left"?b=h+Math.max(l,u)+o:s==="right"?b=h+p-Math.max(c,d)-o:b=this.caretX,i==="top"?(w=f,_=w-o,g=b-o,v=b+o):(w=f+m,_=w+o,g=b+o,v=b-o),S=w),{x1:g,x2:b,x3:v,y1:w,y2:_,y3:S}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=Fg(r.rtl,this.x,this.width);for(e.x=H2(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=fi(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=fi(i.bodyFont),d=H2(this,"left",i),h=s.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(i.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},g=s.leftForLtr(h,c)+c/2,b=p+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,EO(e,m,g,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,EO(e,m,g,b)}else{e.lineWidth=Hn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=s.leftForLtr(h,c),g=s.leftForLtr(s.xPlus(h,1),c-2),b=Wv(o.borderRadius);Object.values(b).some(v=>v!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,kO(e,{x:m,y:p,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),kO(e,{x:g,y:p+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(m,p,c,l),e.strokeRect(m,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(g,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=fi(r.bodyFont);let h=d.lineHeight,f=0;const p=Fg(r.rtl,this.x,this.width),m=function(x){n.fillText(x,p.x(e.x+f),e.y+h/2),e.y+=h+i},g=p.textAlign(o);let b,v,w,_,S,E,k;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=H2(this,g,r),n.fillStyle=r.bodyColor,qn(this.beforeBody,m),f=a&&g!=="right"?o==="center"?c/2+u:c+2+u:0,_=0,E=s.length;_<E;++_){for(b=s[_],v=this.labelTextColors[_],n.fillStyle=v,qn(b.before,m),w=b.lines,a&&w.length&&(this._drawColorBox(n,e,_,p,r),h=Math.max(d.lineHeight,l)),S=0,k=w.length;S<k;++S)m(w[S]),h=d.lineHeight;qn(b.after,m)}f=0,h=d.lineHeight,qn(this.afterBody,m),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Fg(r.rtl,this.x,this.width);for(e.x=H2(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=fi(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=Wv(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=sv[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=eW(this,e),l=Object.assign({},o,this._size),c=tW(n,e,l),u=nW(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=La(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),Kde(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Yde(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!tC(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!tC(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=sv[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}var Sct={id:"tooltip",_element:iW,positioners:sv,afterInit(t,e,n){n&&(t.tooltip=new iW({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fhe},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Ect=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function kct(t,e,n,r){const s=t.indexOf(e);if(s===-1)return Ect(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const Cct=(t,e)=>t===null?null:ya(Math.round(t),0,e);function oW(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Act extends db{static id="category";static defaults={ticks:{callback:oW}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(pr(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:kct(r,e,Pn(n,e),this._addedLabels),Cct(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return oW.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Tct(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=i||1,p=u-1,{min:m,max:g}=e,b=!pr(o),v=!pr(a),w=!pr(c),_=(g-m)/(d+1);let S=uV((g-m)/p/f)*f,E,k,x,I;if(S<1e-14&&!b&&!v)return[{value:m},{value:g}];I=Math.ceil(g/S)-Math.floor(m/S),I>p&&(S=uV(I*S/p/f)*f),pr(l)||(E=Math.pow(10,l),S=Math.ceil(S*E)/E),s==="ticks"?(k=Math.floor(m/S)*S,x=Math.ceil(g/S)*S):(k=m,x=g),b&&v&&i&&uot((a-o)/i,S/1e3)?(I=Math.round(Math.min((a-o)/S,u)),S=(a-o)/I,k=o,x=a):w?(k=b?o:k,x=v?a:x,I=c-1,S=(x-k)/I):(I=(x-k)/S,Hv(I,Math.round(I),S/1e3)?I=Math.round(I):I=Math.ceil(I));const R=Math.max(dV(S),dV(k));E=Math.pow(10,pr(l)?R:l),k=Math.round(k*E)/E,x=Math.round(x*E)/E;let C=0;for(b&&(h&&k!==o?(n.push({value:o}),k<o&&C++,Hv(Math.round((k+C*S)*E)/E,o,aW(o,_,t))&&C++):k<o&&C++);C<I;++C){const T=Math.round((k+C*S)*E)/E;if(v&&T>a)break;n.push({value:T})}return v&&h&&x!==a?n.length&&Hv(n[n.length-1].value,a,aW(a,_,t))?n[n.length-1].value=a:n.push({value:a}):(!v||x===a)&&n.push({value:x}),n}function aW(t,e,{horizontal:n,minRotation:r}){const s=Rf(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class Pct extends db{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return pr(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=E0(s),c=E0(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=Tct(s,i);return e.bounds==="ticks"&&dot(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Bde(e,this.chart.options.locale,this.options.ticks.format)}}class Nct extends Pct{static id="linear";static defaults={ticks:{callback:$de.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Oa(e)?e:0,this.max=Oa(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Rf(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const mT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},no=Object.keys(mT);function lW(t,e){return t-e}function cW(t,e){if(pr(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Oa(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(nw(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function uW(t,e,n,r){const s=no.length;for(let i=no.indexOf(t);i<s-1;++i){const o=mT[no[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return no[i]}return no[s-1]}function Ict(t,e,n,r,s){for(let i=no.length-1;i>=no.indexOf(n);i--){const o=no[i];if(mT[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return no[n?no.indexOf(n):0]}function Rct(t){for(let e=no.indexOf(t)+1,n=no.length;e<n;++e)if(mT[no[e]].common)return no[e]}function dW(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=B8(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function Oct(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function hW(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:Oct(t,r,s,n)}class fW extends db{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new Uat._date(e.adapters.date);s.init(n),Uv(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:cW(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Oa(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Oa(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=bot(s,i,o);return this._unit=n.unit||(r.autoSkip?uW(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):Ict(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Rct(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),hW(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ya(n,0,o),r=ya(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||uW(i.minUnit,n,r,this._getLabelCapacity(n)),a=Pn(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=nw(l)||l===!0,u={};let d=n,h,f;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<r;h=+e.add(h,a,o),f++)dW(u,h,p);return(h===r||s.bounds==="ticks"||f===1)&&dW(u,h,p),Object.keys(u).sort(lW).map(m=>+m)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return mr(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=r[n],f=c&&d&&h&&h.major;return this._adapter.format(e,s||(f?d:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Rf(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,hW(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(cW(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return vot(e.sort(lW))}}function z2(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Of(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Of(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class yTt extends fW{static id="timeseries";static defaults=fW.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=z2(n,this.min),this._tableRange=z2(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(z2(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return z2(this._table,r*this._tableRange+this._minPos,!0)}}const phe="label";function pW(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Lct(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function mhe(t,e){t.labels=e}function ghe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:phe;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function Dct(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:phe;const n={labels:[],datasets:[]};return mhe(n,t.labels),ghe(n,t.datasets,e),n}function Mct(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=t,f=N.useRef(null),p=N.useRef(null),m=()=>{f.current&&(p.current=new pT(f.current,{type:o,data:Dct(a,i),options:l&&{...l},plugins:c}),pW(e,p.current))},g=()=>{pW(e,null),p.current&&(p.current.destroy(),p.current=null)};return N.useEffect(()=>{!s&&p.current&&l&&Lct(p.current,l)},[s,l]),N.useEffect(()=>{!s&&p.current&&mhe(p.current.config.data,a.labels)},[s,a.labels]),N.useEffect(()=>{!s&&p.current&&a.datasets&&ghe(p.current.config.data,a.datasets,i)},[s,a.datasets]),N.useEffect(()=>{p.current&&(s?(g(),setTimeout(m)):p.current.update(d))},[s,l,a.labels,a.datasets,d]),N.useEffect(()=>{p.current&&(g(),setTimeout(m))},[o]),N.useEffect(()=>(m(),()=>g()),[]),ht.createElement("canvas",{ref:f,role:"img",height:n,width:r,...h},u)}const jct=N.forwardRef(Mct);function Fct(t,e){return pT.register(e),N.forwardRef((n,r)=>ht.createElement(jct,{...n,ref:r,type:t}))}const Bct=Fct("line",$at),mW={userTabs:[],developerTabs:[]},$ct=Ere((t,e)=>({...mW,get:()=>({userTabs:e().userTabs,developerTabs:e().developerTabs}),set:n=>t(n),reset:()=>t(mW)}));pT.register(Act,Nct,act,oct,mct,Sct,fct);const Ld={normal:{metrics:1e3},energySaver:{metrics:5e3}},Ai={cpu:{warning:70,critical:90},memory:{warning:80,critical:95},fps:{warning:30,critical:15}},Uct={update:.1},Ay=[{name:"Performance",description:"Maximum performance with frequent updates",settings:{updateInterval:Ld.normal.metrics,enableAnimations:!0,backgroundProcessing:!0,networkThrottling:!1}},{name:"Balanced",description:"Optimal balance between performance and energy efficiency",settings:{updateInterval:2e3,enableAnimations:!0,backgroundProcessing:!0,networkThrottling:!1}},{name:"Energy Saver",description:"Maximum energy efficiency with reduced updates",settings:{updateInterval:Ld.energySaver.metrics,enableAnimations:!1,backgroundProcessing:!1,networkThrottling:!0}}],gW={cpu:{usage:0,cores:[]},memory:{used:0,total:0,percentage:0,heap:{used:0,total:0,limit:0}},uptime:0,network:{downlink:0,latency:0,type:"unknown",bytesReceived:0,bytesSent:0},performance:{fps:0,pageLoad:0,domReady:0,resources:{total:0,size:0,loadTime:0},timing:{ttfb:0,fcp:0,lcp:0}},health:{score:0,issues:[],suggestions:[]}},bW={timestamps:Array(10).fill(new Date().toLocaleTimeString()),cpu:Array(10).fill(0),memory:Array(10).fill(0),battery:Array(10).fill(0),network:Array(10).fill(0)},Hct=20,Ty=10,zct=()=>{const[t,e]=N.useState(()=>gW),[n,r]=N.useState(()=>bW),[s,i]=N.useState(!1),[o,a]=N.useState(!1),[l,c]=N.useState(()=>({updatesReduced:0,timeInSaverMode:0,estimatedEnergySaved:0})),[u,d]=N.useState(()=>Ay[1]),[h,f]=N.useState([]),p=N.useRef(null),{hasUpdate:m}=bse(),g=Sre($ct),b=N.useCallback(()=>(g.reset(),g.get()),[g]);N.useEffect(()=>{const U=setInterval(()=>{const ee=g.get(),X=["debug","update"],Z=ee.userTabs.map(F=>X.includes(F.id)?{...F,visible:F.id==="debug"?t.cpu.usage>80:m}:F);g.set({...ee,userTabs:Z})},5e3);return()=>{clearInterval(U)}},[t.cpu.usage,m,g]),N.useEffect(()=>{const P=()=>{console.log("TaskManagerTab: Resetting to defaults"),e(gW),r(bW),i(!1),a(!1),c({updatesReduced:0,timeInSaverMode:0,estimatedEnergySaved:0}),d(Ay[1]),f([]),p.current=null;const X=b();console.log("TaskManagerTab: Reset tab configuration:",X)},U=X=>{X instanceof StorageEvent?X.key==="tabConfiguration"&&X.newValue===null&&P():X instanceof CustomEvent&&X.type==="tabConfigReset"&&P()},ee=async()=>{try{const X=localStorage.getItem("energySaverMode"),Z=localStorage.getItem("autoEnergySaver"),F=localStorage.getItem("selectedProfile");if(X&&i(JSON.parse(X)),Z&&a(JSON.parse(Z)),F){const M=Ay.find(G=>G.name===F);M&&d(M)}await I()}catch(X){console.error("Failed to initialize TaskManagerTab:",X),P()}};return window.addEventListener("storage",U),window.addEventListener("tabConfigReset",U),ee(),()=>{window.removeEventListener("storage",U),window.removeEventListener("tabConfigReset",U)}},[]);const v=async()=>{try{const P=await E(),U=performance.getEntriesByType("navigation")[0],ee=U.loadEventEnd-U.startTime,X=U.domContentLoadedEventEnd-U.startTime,Z=performance.getEntriesByType("resource"),F={total:Z.length,size:Z.reduce((W,q)=>W+(q.transferSize||0),0),loadTime:Math.max(0,...Z.map(W=>W.duration))},M=U.responseStart-U.requestStart,D=performance.getEntriesByType("paint").find(W=>W.name==="first-contentful-paint")?.startTime||0,j=await k();return{fps:P,pageLoad:ee,domReady:X,resources:F,timing:{ttfb:M,fcp:D,lcp:j?.startTime||0}}}catch(P){return console.error("Failed to get performance metrics:",P),{}}};N.useEffect(()=>{let P=!0;const U=async()=>{if(P)try{await I()}catch(X){console.error("Failed to update metrics:",X)}};U();const ee=setInterval(U,s?Ld.energySaver.metrics:Ld.normal.metrics);return()=>{P=!1,clearInterval(ee)}},[s]);const w=P=>{i(P),localStorage.setItem("energySaverMode",JSON.stringify(P)),Ve.success(P?"Energy Saver mode enabled":"Energy Saver mode disabled")},_=P=>{a(P),localStorage.setItem("autoEnergySaver",JSON.stringify(P)),Ve.success(P?"Auto Energy Saver enabled":"Auto Energy Saver disabled"),P||(i(!1),localStorage.setItem("energySaverMode","false"))},S=N.useCallback(()=>{if(!s){p.current=null,c({updatesReduced:0,timeInSaverMode:0,estimatedEnergySaved:0});return}p.current||(p.current=Date.now());const P=Math.max(0,(Date.now()-(p.current||Date.now()))/1e3),U=60/(Ld.normal.metrics/1e3),ee=60/(Ld.energySaver.metrics/1e3),X=Math.floor((U-ee)*(P/60)),Z=Uct.update,F=X*Z/3600;c({updatesReduced:X,timeInSaverMode:P,estimatedEnergySaved:F})},[s]);N.useEffect(()=>{const P=setInterval(S,1e3);return()=>clearInterval(P)},[S]);const E=async()=>new Promise(P=>{const U={value:0},ee=performance.now(),X=Z=>{U.value++,Z-ee>=1e3?P(Math.round(U.value*1e3/(Z-ee))):requestAnimationFrame(X)};requestAnimationFrame(X)}),k=async()=>new Promise(P=>{new PerformanceObserver(U=>{const ee=U.getEntries();P(ee[ee.length-1])}).observe({entryTypes:["largest-contentful-paint"]}),setTimeout(()=>P(void 0),3e3)}),x=P=>{const U=[],ee=[];let X=100;return P.cpu.usage>Ai.cpu.critical?(X-=30,U.push("Critical CPU usage"),ee.push("Consider closing resource-intensive applications")):P.cpu.usage>Ai.cpu.warning&&(X-=15,U.push("High CPU usage"),ee.push("Monitor system processes for unusual activity")),P.memory.percentage>Ai.memory.critical?(X-=30,U.push("Critical memory usage"),ee.push("Close unused applications to free up memory")):P.memory.percentage>Ai.memory.warning&&(X-=15,U.push("High memory usage"),ee.push("Consider freeing up memory by closing background applications")),P.performance.fps<Ai.fps.critical?(X-=20,U.push("Very low frame rate"),ee.push("Disable animations or switch to power saver mode")):P.performance.fps<Ai.fps.warning&&(X-=10,U.push("Low frame rate"),ee.push("Consider reducing visual effects")),P.battery&&!P.battery.charging&&P.battery.level<20&&(X-=10,U.push("Low battery"),ee.push("Connect to power source or enable power saver mode")),{score:Math.max(0,X),issues:U,suggestions:ee}},I=async()=>{try{const P=performance.memory||{jsHeapSizeLimit:0,totalJSHeapSize:0,usedJSHeapSize:0},U=P.totalJSHeapSize/(1024*1024),ee=P.usedJSHeapSize/(1024*1024),X=ee/U*100,Z=await R();let F;try{const q=await navigator.getBattery();F={level:q.level*100,charging:q.charging,timeRemaining:q.charging?q.chargingTime:q.dischargingTime}}catch{console.log("Battery API not available")}const M=navigator.connection||navigator.mozConnection||navigator.webkitConnection,G={downlink:M?.downlink||0,uplink:M?.uplink,latency:M?.rtt||0,type:M?.type||"unknown",activeConnections:M?.activeConnections,bytesReceived:M?.bytesReceived||0,bytesSent:M?.bytesSent||0},D=await v(),j={cpu:{usage:Z,cores:[],temperature:void 0,frequency:void 0},memory:{used:Math.round(ee),total:Math.round(U),percentage:Math.round(X),heap:{used:Math.round(ee),total:Math.round(U),limit:Math.round(U)}},uptime:performance.now()/1e3,battery:F,network:G,performance:D,health:{score:0,issues:[],suggestions:[]}};j.health=x(j),O(j),e(j);const W=new Date().toLocaleTimeString();r(q=>{const ne=[...q.timestamps,W].slice(-Ty),te=[...q.cpu,j.cpu.usage].slice(-Ty),Y=[...q.memory,j.memory.percentage].slice(-Ty),de=[...q.battery,F?.level||0].slice(-Ty),Se=[...q.network,G.downlink].slice(-Ty);return{timestamps:ne,cpu:te,memory:Y,battery:de,network:Se}})}catch(P){console.error("Failed to update system metrics:",P)}},R=async()=>{try{const P=performance.now();let U=0;for(let M=0;M<1e4;M++)U+=Math.random();U<0&&console.log("Unexpected negative result");const X=performance.now()-P,Z=50;return 100-Math.max(0,Math.min(100,(Z-X)/Z*100))}catch(P){return console.error("Failed to get CPU usage:",P),0}};N.useEffect(()=>{const P=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!P)return;const U=()=>{e(ee=>({...ee,network:{downlink:P.downlink||0,latency:P.rtt||0,type:P.type||"unknown",bytesReceived:P.bytesReceived||0,bytesSent:P.bytesSent||0}}))};return P.addEventListener("change",U),()=>P.removeEventListener("change",U)},[]),N.useEffect(()=>{const P=setInterval(()=>{s||I()},s?Ld.energySaver.metrics:Ld.normal.metrics);return()=>{clearInterval(P)}},[s]);const C=P=>P>80?"text-red-500":P>50?"text-yellow-500":"text-gray-500",T=(P,U,ee)=>{const X={labels:n.timestamps,datasets:[{label:U,data:P,borderColor:ee,fill:!1,tension:.4}]},Z={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100,grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{grid:{display:!1}}},plugins:{legend:{display:!1}},animation:{duration:0}};return y.jsx("div",{className:"h-32",children:y.jsx(Bct,{data:X,options:Z})})};N.useEffect(()=>{if(!o){i(!1);return}const P=async()=>{try{const ee=await navigator.getBattery(),X=!ee.charging&&ee.level*100<=Hct;i(X)}catch{console.log("Battery API not available")}};P();const U=setInterval(P,6e4);return()=>clearInterval(U)},[o]);const O=P=>{const U=[];P.cpu.usage>Ai.cpu.critical&&U.push({type:"error",message:"Critical CPU usage detected",timestamp:Date.now(),metric:"cpu",threshold:Ai.cpu.critical,value:P.cpu.usage}),P.memory.percentage>Ai.memory.critical&&U.push({type:"error",message:"Critical memory usage detected",timestamp:Date.now(),metric:"memory",threshold:Ai.memory.critical,value:P.memory.percentage}),P.performance.fps<Ai.fps.critical&&U.push({type:"warning",message:"Very low frame rate detected",timestamp:Date.now(),metric:"fps",threshold:Ai.fps.critical,value:P.performance.fps}),U.length>0&&(f(ee=>[...ee,...U]),U.forEach(ee=>{Ve.warning(ee.message)}))};return y.jsxs("div",{className:"flex flex-col gap-6",children:[y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Power Management"}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"checkbox",id:"autoEnergySaver",checked:o,onChange:P=>_(P.target.checked),className:"form-checkbox h-4 w-4 text-purple-600 rounded border-gray-300 dark:border-gray-700"}),y.jsx("div",{className:"i-ph:gauge-duotone w-4 h-4 text-bolt-elements-textSecondary"}),y.jsx("label",{htmlFor:"autoEnergySaver",className:"text-sm text-bolt-elements-textSecondary",children:"Auto Energy Saver"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"checkbox",id:"energySaver",checked:s,onChange:P=>!o&&w(P.target.checked),disabled:o,className:"form-checkbox h-4 w-4 text-purple-600 rounded border-gray-300 dark:border-gray-700 disabled:opacity-50"}),y.jsx("div",{className:"i-ph:leaf-duotone w-4 h-4 text-bolt-elements-textSecondary"}),y.jsxs("label",{htmlFor:"energySaver",className:Ne("text-sm text-bolt-elements-textSecondary",{"opacity-50":o}),children:["Energy Saver",s&&y.jsx("span",{className:"ml-2 text-xs text-bolt-elements-textSecondary",children:"Active"})]})]}),y.jsxs("div",{className:"relative",children:[y.jsx("select",{value:u.name,onChange:P=>{const U=Ay.find(ee=>ee.name===P.target.value);U&&(d(U),Ve.success(`Switched to ${U.name} power profile`))},className:"pl-8 pr-8 py-1.5 rounded-md bg-bolt-background-secondary dark:bg-[#1E1E1E] border border-bolt-border dark:border-bolt-borderDark text-sm text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimaryDark hover:border-bolt-action-primary dark:hover:border-bolt-action-primary focus:outline-none focus:ring-1 focus:ring-bolt-action-primary appearance-none min-w-[160px] cursor-pointer transition-colors duration-150",style:{WebkitAppearance:"none",MozAppearance:"none"},children:Ay.map(P=>y.jsx("option",{value:P.name,className:"py-2 px-3 bg-bolt-background-secondary dark:bg-[#1E1E1E] text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimaryDark hover:bg-bolt-background-tertiary dark:hover:bg-bolt-backgroundDark-tertiary cursor-pointer",children:P.name},P.name))}),y.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 pointer-events-none",children:y.jsx("div",{className:Ne("w-4 h-4 text-bolt-elements-textSecondary",{"i-ph:lightning-fill text-yellow-500":u.name==="Performance","i-ph:scales-fill text-blue-500":u.name==="Balanced","i-ph:leaf-fill text-green-500":u.name==="Energy Saver"})})}),y.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none",children:y.jsx("div",{className:"i-ph:caret-down w-4 h-4 text-bolt-elements-textSecondary opacity-75"})})]})]})]}),y.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:u.description})]}),y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"System Health"}),y.jsx("div",{className:"grid grid-cols-1 gap-4",children:y.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Health Score"}),y.jsxs("span",{className:Ne("text-lg font-medium",{"text-green-500":t.health.score>=80,"text-yellow-500":t.health.score>=60&&t.health.score<80,"text-red-500":t.health.score<60}),children:[t.health.score,"%"]})]}),t.health.issues.length>0&&y.jsxs("div",{className:"mt-2",children:[y.jsx("div",{className:"text-sm font-medium text-bolt-elements-textSecondary mb-1",children:"Issues:"}),y.jsx("ul",{className:"text-sm text-bolt-elements-textSecondary space-y-1",children:t.health.issues.map((P,U)=>y.jsxs("li",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:warning-circle-fill text-yellow-500 w-4 h-4"}),P]},U))})]}),t.health.suggestions.length>0&&y.jsxs("div",{className:"mt-2",children:[y.jsx("div",{className:"text-sm font-medium text-bolt-elements-textSecondary mb-1",children:"Suggestions:"}),y.jsx("ul",{className:"text-sm text-bolt-elements-textSecondary space-y-1",children:t.health.suggestions.map((P,U)=>y.jsxs("li",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:lightbulb-fill text-purple-500 w-4 h-4"}),P]},U))})]})]})})]}),y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"System Metrics"}),y.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[y.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"CPU Usage"}),y.jsxs("span",{className:Ne("text-sm font-medium",C(t.cpu.usage)),children:[Math.round(t.cpu.usage),"%"]})]}),T(n.cpu,"CPU","#9333ea"),t.cpu.temperature&&y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Temperature: ",t.cpu.temperature,"C"]}),t.cpu.frequency&&y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Frequency: ",(t.cpu.frequency/1e3).toFixed(1)," GHz"]})]}),y.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Memory Usage"}),y.jsxs("span",{className:Ne("text-sm font-medium",C(t.memory.percentage)),children:[Math.round(t.memory.percentage),"%"]})]}),T(n.memory,"Memory","#2563eb"),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Used: ",sf(t.memory.used)]}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Total: ",sf(t.memory.total)]}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Heap: ",sf(t.memory.heap.used)," / ",sf(t.memory.heap.total)]})]}),y.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Performance"}),y.jsxs("span",{className:Ne("text-sm font-medium",{"text-red-500":t.performance.fps<Ai.fps.critical,"text-yellow-500":t.performance.fps<Ai.fps.warning,"text-green-500":t.performance.fps>=Ai.fps.warning}),children:[Math.round(t.performance.fps)," FPS"]})]}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Page Load: ",(t.performance.pageLoad/1e3).toFixed(2),"s"]}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["DOM Ready: ",(t.performance.domReady/1e3).toFixed(2),"s"]}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["TTFB: ",(t.performance.timing.ttfb/1e3).toFixed(2),"s"]}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Resources: ",t.performance.resources.total," (",sf(t.performance.resources.size),")"]})]}),y.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Network"}),y.jsxs("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:[t.network.downlink.toFixed(1)," Mbps"]})]}),T(n.network,"Network","#f59e0b"),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Type: ",t.network.type]}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Latency: ",t.network.latency,"ms"]}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Received: ",sf(t.network.bytesReceived)]}),y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Sent: ",sf(t.network.bytesSent)]})]})]}),t.battery&&y.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Battery"}),y.jsxs("div",{className:"flex items-center gap-2",children:[t.battery.charging&&y.jsx("div",{className:"i-ph:lightning-fill w-4 h-4 text-bolt-action-primary"}),y.jsxs("span",{className:Ne("text-sm font-medium",t.battery.level>20?"text-bolt-elements-textPrimary":"text-red-500"),children:[Math.round(t.battery.level),"%"]})]})]}),T(n.battery,"Battery","#22c55e"),t.battery.timeRemaining&&y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:[t.battery.charging?"Time to full: ":"Time remaining: ",Wct(t.battery.timeRemaining)]}),t.battery.temperature&&y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Temperature: ",t.battery.temperature,"C"]}),t.battery.cycles&&y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Charge cycles: ",t.battery.cycles]}),t.battery.health&&y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Battery health: ",t.battery.health,"%"]})]}),h.length>0&&y.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Recent Alerts"}),y.jsx("button",{onClick:()=>f([]),className:"text-xs text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary",children:"Clear All"})]}),y.jsx("div",{className:"space-y-2",children:h.slice(-5).map((P,U)=>y.jsxs("div",{className:Ne("flex items-center gap-2 text-sm",{"text-red-500":P.type==="error","text-yellow-500":P.type==="warning","text-blue-500":P.type==="info"}),children:[y.jsx("div",{className:Ne("w-4 h-4",{"i-ph:warning-circle-fill":P.type==="warning","i-ph:x-circle-fill":P.type==="error","i-ph:info-fill":P.type==="info"})}),y.jsx("span",{children:P.message}),y.jsx("span",{className:"text-xs text-bolt-elements-textSecondary ml-auto",children:new Date(P.timestamp).toLocaleTimeString()})]},U))})]}),s&&y.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[y.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Energy Savings"}),y.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Updates Reduced"}),y.jsx("p",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:l.updatesReduced})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Time in Saver Mode"}),y.jsxs("p",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:[Math.floor(l.timeInSaverMode/60),"m ",Math.floor(l.timeInSaverMode%60),"s"]})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Energy Saved"}),y.jsxs("p",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:[l.estimatedEnergySaved.toFixed(2)," mWh"]})]})]})]})]})]})},Vct=N.memo(zct),sf=t=>{if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`},Wct=t=>{if(!isFinite(t)||t===0)return"Unknown";const e=Math.floor(t/3600),n=Math.floor(t%3600/60);return e>0?`${e}h ${n}m`:`${n}m`},Gct={profile:"Manage your profile and account settings",settings:"Configure application preferences",notifications:"View and manage your notifications",features:"Explore new and upcoming features",data:"Manage your data and storage","cloud-providers":"Configure cloud AI providers and models","local-providers":"Configure local AI providers and models","service-status":"Monitor cloud LLM service status",connection:"Check connection status and settings",debug:"Debug tools and system information","event-logs":"View system events and logs",update:"Check for updates and release notes","task-manager":"Monitor system resources and processes","tab-management":"Configure visible tabs and their order"},qct=new Set(["task-manager","service-status","update","local-providers"]),Kct=()=>y.jsx("div",{className:"absolute top-2 right-2 px-1.5 py-0.5 rounded-full bg-purple-500/10 dark:bg-purple-500/20",children:y.jsx("span",{className:"text-[10px] font-medium text-purple-600 dark:text-purple-400",children:"BETA"})}),Yct=({checked:t,onCheckedChange:e,id:n,label:r})=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs(t6,{id:n,checked:t,onCheckedChange:e,className:Ne("relative inline-flex h-6 w-11 items-center rounded-full","transition-all duration-300 ease-[cubic-bezier(0.87,_0,_0.13,_1)]","bg-gray-200 dark:bg-gray-700","data-[state=checked]:bg-purple-500","focus:outline-none focus:ring-2 focus:ring-purple-500/20","cursor-pointer","group"),children:[y.jsx(lt.span,{className:Ne("absolute left-[2px] top-[2px]","inline-block h-5 w-5 rounded-full","bg-white shadow-lg","transition-shadow duration-300","group-hover:shadow-md group-active:shadow-sm","group-hover:scale-95 group-active:scale-90"),initial:!1,transition:{type:"spring",stiffness:500,damping:30,duration:.2},animate:{x:t?"1.25rem":"0rem"},children:y.jsx(lt.div,{className:"absolute inset-0 rounded-full bg-white",initial:!1,animate:{scale:t?1:.8},transition:{duration:.2}})}),y.jsxs("span",{className:"sr-only",children:["Toggle ",r]})]}),y.jsx("div",{className:"flex items-center gap-2",children:y.jsx("label",{htmlFor:n,className:"text-sm text-gray-500 dark:text-gray-400 select-none cursor-pointer whitespace-nowrap w-[88px]",children:r})})]}),Jct=({open:t,onClose:e})=>{const[n,r]=N.useState(null),[s,i]=N.useState(null),[o,a]=N.useState(!1),l=Bt(Zd),c=Bt(Rre),u=Bt(Qd),{hasUpdate:d,currentVersion:h,acknowledgeUpdate:f}=bse(),{hasNewFeatures:p,unviewedFeatures:m,acknowledgeAllFeatures:g}=vMe(),{hasUnreadNotifications:b,unreadNotifications:v,markAllAsRead:w}=wMe(),{hasConnectionIssues:_,currentIssue:S,acknowledgeIssue:E}=EMe(),{hasActiveWarnings:k,activeIssues:x,acknowledgeAllIssues:I}=AMe(),R=N.useMemo(()=>new Map(d0.map(G=>[G.id,G])),[]),C=N.useMemo(()=>{if(!l?.userTabs||!Array.isArray(l.userTabs))return console.warn("Invalid tab configuration, resetting to defaults"),Ire(),[];const G=u?.preferences?.notifications===!1;if(c){const D=new Set,j=[],W=q=>{D.has(q.id)||(D.add(q.id),j.push({id:q.id,visible:!0,window:"developer",order:q.order||j.length}))};return l.developerTabs?.forEach(q=>W(q)),l.userTabs.forEach(q=>W(q)),d0.forEach(q=>W(q)),j.push({id:"tab-management",visible:!0,window:"developer",order:j.length,isExtraDevTab:!0}),j.sort((q,ne)=>q.order-ne.order)}return l.userTabs.filter(D=>!D?.id||D.id==="notifications"&&G?!1:D.visible&&D.window==="user").sort((D,j)=>D.order-j.order)},[l,c,u?.preferences?.notifications,R]),T={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},O={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:200,damping:20,mass:.6}}};N.useEffect(()=>{t?r(null):(r(null),i(null),a(!1))},[t]);const P=()=>{r(null),i(null),a(!1),e()},U=()=>{o?a(!1):n&&r(null)},ee=G=>{console.log("Developer mode changed:",G),$De(G)};N.useEffect(()=>{console.log("Current developer mode:",c)},[c]);const X=G=>{if(G==="tab-management")return y.jsx(p9,{});switch(G){case"profile":return y.jsx(X8e,{});case"settings":return y.jsx(Z8e,{});case"notifications":return y.jsx(xFe,{});case"features":return y.jsx(LYe,{});case"data":return y.jsx(DYe,{});case"cloud-providers":return y.jsx(Eit,{});case"local-providers":return y.jsx(Pit,{});case"connection":return y.jsx(vit,{});case"debug":return y.jsx(eXe,{});case"event-logs":return y.jsx(nXe,{});case"update":return y.jsx(pit,{});case"task-manager":return y.jsx(Vct,{});case"service-status":return y.jsx(Pde,{});default:return null}},Z=G=>{switch(G){case"update":return d;case"features":return p;case"notifications":return b;case"connection":return _;case"debug":return k;default:return!1}},F=G=>{switch(G){case"update":return`New update available (v${h})`;case"features":return`${m.length} new feature${m.length===1?"":"s"} to explore`;case"notifications":return`${v.length} unread notification${v.length===1?"":"s"}`;case"connection":return S==="disconnected"?"Connection lost":S==="high-latency"?"High latency detected":"Connection issues detected";case"debug":{const D=x.filter(W=>W.type==="warning").length,j=x.filter(W=>W.type==="error").length;return`${D} warning${D===1?"":"s"}, ${j} error${j===1?"":"s"}`}default:return""}},M=G=>{switch(i(G),r(G),a(!1),G){case"update":f();break;case"features":g();break;case"notifications":w();break;case"connection":E();break;case"debug":I();break}setTimeout(()=>i(null),500)};return y.jsx(Ea,{open:t,children:y.jsx(Gf,{children:y.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-[100]",children:[y.jsx(qf,{asChild:!0,children:y.jsx(lt.div,{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),y.jsx(Kf,{"aria-describedby":void 0,onEscapeKeyDown:P,onPointerDownOutside:P,className:"relative z-[101]",children:y.jsxs(lt.div,{className:Ne("w-[1200px] h-[90vh]","bg-[#FAFAFA] dark:bg-[#0A0A0A]","rounded-2xl shadow-2xl","border border-[#E5E5E5] dark:border-[#1A1A1A]","flex flex-col overflow-hidden","relative"),initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},children:[y.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-2xl",children:y.jsx(J8e,{})}),y.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[y.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[y.jsxs("div",{className:"flex items-center space-x-4",children:[(n||o)&&y.jsx("button",{onClick:U,className:"flex items-center justify-center w-8 h-8 rounded-full bg-transparent hover:bg-purple-500/10 dark:hover:bg-purple-500/20 group transition-all duration-200",children:y.jsx("div",{className:"i-ph:arrow-left w-4 h-4 text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"})}),y.jsx(up,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o?"Tab Management":n?kv[n]:"Control Panel"})]}),y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsx("div",{className:"flex items-center gap-2 min-w-[140px] border-r border-gray-200 dark:border-gray-800 pr-6",children:y.jsx(Yct,{id:"developer-mode",checked:c,onCheckedChange:ee,label:c?"Developer Mode":"User Mode"})}),y.jsx("div",{className:"border-l border-gray-200 dark:border-gray-800 pl-6",children:y.jsx(B8e,{onSelectTab:M})}),y.jsx("button",{onClick:P,className:"flex items-center justify-center w-8 h-8 rounded-full bg-transparent hover:bg-purple-500/10 dark:hover:bg-purple-500/20 group transition-all duration-200",children:y.jsx("div",{className:"i-ph:x w-4 h-4 text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"})})]})]}),y.jsx("div",{className:Ne("flex-1","overflow-y-auto","hover:overflow-y-auto","scrollbar scrollbar-w-2","scrollbar-track-transparent","scrollbar-thumb-[#E5E5E5] hover:scrollbar-thumb-[#CCCCCC]","dark:scrollbar-thumb-[#333333] dark:hover:scrollbar-thumb-[#444444]","will-change-scroll","touch-auto"),children:y.jsx(lt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"p-6",children:o?y.jsx(p9,{}):n?X(n):y.jsx(lt.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 relative",variants:T,initial:"hidden",animate:"visible",children:y.jsx(Ic,{mode:"popLayout",children:C.map(G=>y.jsx(lt.div,{layout:!0,variants:O,className:"aspect-[1.5/1]",children:y.jsx(pMe,{tab:G,onClick:()=>M(G.id),isActive:n===G.id,hasUpdate:Z(G.id),statusMessage:F(G.id),description:Gct[G.id],isLoading:s===G.id,className:"h-full relative",children:qct.has(G.id)&&y.jsx(Kct,{})})},G.id))})})},n||"home")})]})]})})]})})})},Xct=N.memo(({onClick:t})=>y.jsx(Pr,{onClick:t,icon:"i-ph:gear",size:"xl",title:"Settings",className:"text-[#666] hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive/10 transition-colors"})),vp=N.forwardRef(({tooltip:t,children:e,sideOffset:n=5,className:r="",arrowClassName:s="",tooltipStyle:i={},position:o="top",maxWidth:a=250,delay:l=0},c)=>y.jsxs(Z6,{delayDuration:l,children:[y.jsx(Q6,{asChild:!0,children:e}),y.jsx(eM,{children:y.jsxs(tM,{side:o,className:`
              z-[2000]
              px-2.5
              py-1.5
              max-h-[300px]
              select-none
              rounded-md
              bg-bolt-elements-background-depth-3
              text-bolt-elements-textPrimary
              text-sm
              leading-tight
              shadow-lg
              animate-in
              fade-in-0
              zoom-in-95
              data-[state=closed]:animate-out
              data-[state=closed]:fade-out-0
              data-[state=closed]:zoom-out-95
              ${r}
            `,sideOffset:n,style:{maxWidth:a,...i},children:[y.jsx("div",{className:"break-words",children:t}),y.jsx(nM,{className:`
                fill-bolt-elements-background-depth-3
                ${s}
              `,width:12,height:6})]})})]})),V2="<boltArtifact",yW="</boltArtifact>",Zct="<boltAction",vW="</boltAction>",W2=po("MessageParser");function wW(t){const e=/^\s*```\w*\n([\s\S]*?)\n\s*```\s*$/,n=t.match(e);return n?n[1]:t}function xW(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}class Qct{constructor(e={}){this._options=e}#t=new Map;parse(e,n){let r=this.#t.get(e);r||(r={position:0,insideAction:!1,insideArtifact:!1,currentAction:{content:""},actionId:0},this.#t.set(e,r));let s="",i=r.position,o=!1;for(;i<n.length;){if(r.insideArtifact){const a=r.currentArtifact;if(a===void 0&&ha("Artifact not initialized"),r.insideAction){const l=n.indexOf(vW,i),c=r.currentAction;if(l!==-1){c.content+=n.slice(i,l);let u=c.content.trim();"type"in c&&c.type==="file"&&(c.filePath.endsWith(".md")||(u=wW(u),u=xW(u)),u+=`
`),c.content=u,this._options.callbacks?.onActionClose?.({artifactId:a.id,messageId:e,actionId:String(r.actionId-1),action:c}),r.insideAction=!1,r.currentAction={content:""},i=l+vW.length}else{if("type"in c&&c.type==="file"){let u=n.slice(i);c.filePath.endsWith(".md")||(u=wW(u),u=xW(u)),this._options.callbacks?.onActionStream?.({artifactId:a.id,messageId:e,actionId:String(r.actionId-1),action:{...c,content:u,filePath:c.filePath}})}break}}else{const l=n.indexOf(Zct,i),c=n.indexOf(yW,i);if(l!==-1&&(c===-1||l<c)){const u=n.indexOf(">",l);if(u!==-1)r.insideAction=!0,r.currentAction=this.#n(n,l,u),this._options.callbacks?.onActionOpen?.({artifactId:a.id,messageId:e,actionId:String(r.actionId++),action:r.currentAction}),i=u+1;else break}else if(c!==-1)this._options.callbacks?.onArtifactClose?.({messageId:e,...a}),r.insideArtifact=!1,r.currentArtifact=void 0,i=c+yW.length;else break}}else if(n[i]==="<"&&n[i+1]!=="/"){let a=i,l="";for(;a<n.length&&l.length<V2.length;){if(l+=n[a],l===V2){const c=n[a+1];if(c&&c!==">"&&c!==" "){s+=n.slice(i,a+1),i=a+1;break}const u=n.indexOf(">",a);if(u!==-1){const d=n.slice(i,u+1),h=this.#e(d,"title"),f=this.#e(d,"type"),p=this.#e(d,"id");h||W2.warn("Artifact title missing"),p||W2.warn("Artifact id missing"),r.insideArtifact=!0;const m={id:p,title:h,type:f};r.currentArtifact=m,this._options.callbacks?.onArtifactOpen?.({messageId:e,...m});const g=this._options.artifactElement??eut;s+=g({messageId:e}),i=u+1}else o=!0;break}else if(!V2.startsWith(l)){s+=n.slice(i,a+1),i=a+1;break}a++}if(a===n.length&&V2.startsWith(l))break}else s+=n[i],i++;if(o)break}return r.position=i,s}reset(){this.#t.clear()}#n(e,n,r){const s=e.slice(n,r+1),i=this.#e(s,"type"),o={type:i,content:""};if(i==="file"){const a=this.#e(s,"filePath");a||W2.debug("File path not specified"),o.filePath=a}else["shell","start"].includes(i)||W2.warn(`Unknown action type '${i}'`);return o}#e(e,n){const r=e.match(new RegExp(`${n}="([^"]*)"`,"i"));return r?r[1]:void 0}}const eut=t=>`<div ${['class="__boltArtifact__"',...Object.entries(t).map(([n,r])=>`data-${tut(n)}=${JSON.stringify(r)}`)].join(" ")}></div>`;function tut(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}const Py=po("useMessageParser"),nut=new Qct({callbacks:{onArtifactOpen:t=>{Py.trace("onArtifactOpen",t),It.showWorkbench.set(!0),It.addArtifact(t)},onArtifactClose:t=>{Py.trace("onArtifactClose"),It.updateArtifact(t,{closed:!0})},onActionOpen:t=>{Py.trace("onActionOpen",t.action),t.action.type==="file"&&It.addAction(t)},onActionClose:t=>{Py.trace("onActionClose",t.action),t.action.type!=="file"&&It.addAction(t),It.runAction(t)},onActionStream:t=>{Py.trace("onActionStream",t.action),It.runAction(t,!0)}}}),rut=t=>Array.isArray(t.content)?t.content.find(e=>e.type==="text")?.text||"":t.content;function sut(){const[t,e]=N.useState({}),n=N.useCallback((r,s)=>{for(const[i,o]of r.entries())if(o.role==="assistant"||o.role==="user"){const a=nut.parse(o.id,rut(o));e(l=>({...l,[i]:(l[i]||"")+a}))}},[]);return{parsedMessages:t,parseMessages:n}}const _W=po("usePromptEnhancement");function iut(){const[t,e]=N.useState(!1),[n,r]=N.useState(!1);return{enhancingPrompt:t,promptEnhanced:n,enhancePrompt:async(o,a,l,c,u)=>{e(!0),r(!1);const d={message:o,model:l,provider:c};u&&(d.apiKeys=u);const f=(await fetch("/api/enhancer",{method:"POST",body:JSON.stringify(d)})).body?.getReader(),p=o;if(f){const m=new TextDecoder;let g="",b;try{for(a("");;){const{value:v,done:w}=await f.read();if(w)break;g+=m.decode(v),_W.trace("Set input",g),a(g)}}catch(v){b=v,a(p)}finally{b&&_W.error(b),e(!1),r(!0),setTimeout(()=>{a(g)})}}},resetEnhancer:()=>{e(!1),r(!1)}}}const out=["input","textarea"];class aut{#t=new EventTarget;dispatch(e){this.#t.dispatchEvent(new Event(e))}on(e,n){return this.#t.addEventListener(e,n),()=>{this.#t.removeEventListener(e,n)}}}const bhe=new aut;function lut(){const t=Bt(PDe);N.useEffect(()=>{const e=n=>{if(!(document.activeElement&&out.includes(document.activeElement.tagName.toLowerCase())&&!n.altKey&&!n.metaKey&&!n.ctrlKey))for(const[r,s]of Object.entries(t)){const i=s.key.toLowerCase()===n.key.toLowerCase()||`Key${s.key.toUpperCase()}`===n.code,a=(s.ctrlOrMetaKey?_k&&n.metaKey||!_k&&n.ctrlKey:!0)&&(s.ctrlKey===void 0||s.ctrlKey===n.ctrlKey)&&(s.metaKey===void 0||s.metaKey===n.metaKey)&&(s.shiftKey===void 0||s.shiftKey===n.shiftKey)&&(s.altKey===void 0||s.altKey===n.altKey);if(i&&a){s.isPreventDefault&&(n.preventDefault(),n.stopPropagation()),bhe.dispatch(r),s.action();break}}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t])}function cut(t={}){const{duration:e=800,easing:n="ease-in-out",cubicBezier:r=[.42,0,.58,1],bottomThreshold:s=50}=t,i=N.useRef(!0),o=N.useRef(),a=N.useRef(),l=N.useRef(),c=N.useRef(),u=N.useRef(0),d=N.useCallback((m,g,b,v)=>{const w=m.scrollTop,_=g-w,S=performance.now(),E=v==="cubic-bezier"?r:[.42,0,.58,1],k=I=>{const[,R,,C]=E,T=3*R,O=3*(C-R)-T,P=1-T-O;return(ee=>((P*ee+O)*ee+T)*ee)(I)},x=I=>{const R=I-S,C=Math.min(R/b,1),T=k(C),O=w+_*T;i.current&&(m.scrollTop=O),C<1&&i.current&&(c.current=requestAnimationFrame(x))};c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(x)},[r]),h=N.useCallback(m=>{const{scrollTop:g,scrollHeight:b,clientHeight:v}=m;return b-g-v<=s},[s]),f=N.useCallback(m=>{if(m){const g=new ResizeObserver(()=>{if(i.current&&o.current){const{scrollHeight:b,clientHeight:v}=o.current,w=b-v;d(o.current,w,e,n)}});g.observe(m),l.current=g}else l.current?.disconnect(),l.current=void 0,c.current&&(cancelAnimationFrame(c.current),c.current=void 0)},[e,n,d]),p=N.useCallback(m=>{m?(a.current=()=>{const{scrollTop:g}=m;g<u.current?i.current=!1:h(m)&&(i.current=!0),u.current=g},m.addEventListener("scroll",a.current),o.current=m):(a.current&&o.current&&o.current.removeEventListener("scroll",a.current),c.current&&(cancelAnimationFrame(c.current),c.current=void 0),o.current=void 0,a.current=void 0)},[h]);return[f,p]}function yhe({initialDescription:t=uc.get(),customChatId:e,syncWithGlobalStore:n}){const r=Bt(Lo),[s,i]=N.useState(!1),[o,a]=N.useState(t),[l,c]=N.useState();N.useEffect(()=>{c(e||r)},[e,r]),N.useEffect(()=>{a(t)},[t]);const u=N.useCallback(()=>i(b=>!b),[]),d=N.useCallback(b=>{a(b.target.value)},[]),h=N.useCallback(async()=>{if(!An||!l)return t;try{return(await m0(An,l))?.description||t}catch(b){return console.error("Failed to fetch latest description:",b),t}},[An,l,t]),f=N.useCallback(async()=>{const b=await h();a(b),u()},[h,u]),p=N.useCallback(b=>{const v=b.trim();if(v===t)return u(),!1;const w=v.length>0&&v.length<=100,_=/^[a-zA-Z0-9\s\-_.,!?()[\]{}'"]+$/.test(v);return w?_?!0:(Ve.error("Description can only contain letters, numbers, spaces, and basic punctuation."),!1):(Ve.error("Description must be between 1 and 100 characters."),!1)},[]),m=N.useCallback(async b=>{if(b.preventDefault(),!!p(o)){try{if(!An){Ve.error("Chat persistence is not available");return}if(!l){Ve.error("Chat Id is not available");return}await NFe(An,l,o),n&&uc.set(o),Ve.success("Chat description updated successfully")}catch(v){Ve.error("Failed to update chat description: "+v.message)}u()}},[o,An,l,t,e]),g=N.useCallback(async b=>{b.key==="Escape"&&await f()},[f]);return{editing:s,handleChange:d,handleBlur:f,handleSubmit:m,handleKeyDown:g,currentDescription:o,toggleEditMode:u}}const vhe=(t=1024)=>{const[e,n]=N.useState(window.innerWidth<t);return N.useEffect(()=>{const r=()=>n(window.innerWidth<t);return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[t]),e};function uut({item:t,onDelete:e,onDuplicate:n,exportChat:r}){const{id:s}=Iye(),i=s===t.urlId,{editing:o,handleChange:a,handleBlur:l,handleSubmit:c,handleKeyDown:u,currentDescription:d,toggleEditMode:h}=yhe({initialDescription:t.description,customChatId:t.id,syncWithGlobalStore:i});return y.jsx("div",{className:Ne("group rounded-lg text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50/80 dark:hover:bg-gray-800/30 overflow-hidden flex justify-between items-center px-3 py-2 transition-colors",{"text-gray-900 dark:text-white bg-gray-50/80 dark:bg-gray-800/30":i}),children:o?y.jsxs("form",{onSubmit:c,className:"flex-1 flex items-center gap-2",children:[y.jsx("input",{type:"text",className:"flex-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-white rounded-md px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-800 focus:outline-none focus:ring-1 focus:ring-purple-500/50",autoFocus:!0,value:d,onChange:a,onBlur:l,onKeyDown:u}),y.jsx("button",{type:"submit",className:"i-ph:check h-4 w-4 text-gray-500 hover:text-purple-500 transition-colors",onMouseDown:c})]}):y.jsxs("a",{href:`/chat/${t.urlId}`,className:"flex w-full relative truncate block",children:[y.jsx(vp,{tooltip:d,children:y.jsx("span",{className:"truncate pr-24",children:d})}),y.jsx("div",{className:Ne("absolute right-0 top-0 bottom-0 flex items-center bg-white dark:bg-gray-950 group-hover:bg-gray-50/80 dark:group-hover:bg-gray-800/30 px-2",{"bg-gray-50/80 dark:bg-gray-800/30":i}),children:y.jsxs("div",{className:"flex items-center gap-2.5 text-gray-400 dark:text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity",children:[y.jsx(G2,{toolTipContent:"Export",icon:"i-ph:download-simple h-4 w-4",onClick:f=>{f.preventDefault(),r(t.id)}}),n&&y.jsx(G2,{toolTipContent:"Duplicate",icon:"i-ph:copy h-4 w-4",onClick:()=>n?.(t.id)}),y.jsx(G2,{toolTipContent:"Rename",icon:"i-ph:pencil-fill h-4 w-4",onClick:f=>{f.preventDefault(),h()}}),y.jsx(cSe,{asChild:!0,children:y.jsx(G2,{toolTipContent:"Delete",icon:"i-ph:trash h-4 w-4",className:"hover:text-red-500",onClick:f=>{f.preventDefault(),e?.(f)}})})]})})]})})}const G2=N.forwardRef(({toolTipContent:t,icon:e,className:n,onClick:r},s)=>y.jsx(vp,{tooltip:t,position:"bottom",sideOffset:4,children:y.jsx("button",{ref:s,type:"button",className:`text-gray-400 dark:text-gray-500 hover:text-purple-500 dark:hover:text-purple-400 transition-colors ${e} ${n||""}`,onClick:r})}));function dut(t){const e=t.toSorted((s,i)=>Date.parse(i.timestamp)-Date.parse(s.timestamp)),n={},r=[];return e.forEach(s=>{const i=hut(new Date(s.timestamp));if(i in n)n[i].items.push(s);else{const o={category:i,items:[s]};n[i]=o,r.push(o)}}),r}function hut(t){if(vFe(t))return"Today";if(wFe(t))return"Yesterday";if(bFe(t))return $3(t,"EEE");const e=kie(new Date,30);return pFe(t,e)?"Past 30 Days":yFe(t)?$3(t,"LLL"):$3(t,"LLL yyyy")}function fut({items:t=[],searchFields:e=["description"],debounceMs:n=300}){const[r,s]=N.useState(""),i=N.useCallback(Vw(s,n),[]),o=N.useCallback(l=>{i(l.target.value)},[i]),a=N.useMemo(()=>{if(!r.trim())return t;const l=r.toLowerCase();return t.filter(c=>e.some(u=>{const d=c[u];return typeof d=="string"?d.toLowerCase().includes(l):!1}))},[t,r,e]);return{searchQuery:r,filteredItems:a,handleSearchChange:o}}const put={closed:{opacity:0,visibility:"hidden",left:"-340px",transition:{duration:.2,ease:Go}},open:{opacity:1,visibility:"initial",left:0,transition:{duration:.2,ease:Go}}};function mut(){const[t,e]=N.useState(new Date);return N.useEffect(()=>{const n=setInterval(()=>{e(new Date)},6e4);return()=>clearInterval(n)},[]),y.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 border-b border-gray-100 dark:border-gray-800/50",children:[y.jsx("div",{className:"h-4 w-4 i-lucide:clock opacity-80"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("span",{children:t.toLocaleDateString()}),y.jsx("span",{children:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})}const gut=()=>{const{duplicateCurrentChat:t,exportChat:e}=Qoe(),n=N.useRef(null),[r,s]=N.useState([]),[i,o]=N.useState(!1),[a,l]=N.useState(null),[c,u]=N.useState(!1),d=Bt(Qd),{filteredItems:h,handleSearchChange:f}=fut({items:r,searchFields:["description"]}),p=N.useCallback(()=>{An&&FS(An).then(S=>S.filter(E=>E.urlId&&E.description)).then(s).catch(S=>Ve.error(S.message))},[]),m=N.useCallback((S,E)=>{S.preventDefault(),An&&cR(An,E.id).then(()=>{p(),Lo.get()===E.id&&(window.location.pathname="/")}).catch(k=>{Ve.error("Failed to delete conversation"),uD.error(k)})},[]),g=()=>{l(null)};N.useEffect(()=>{i&&p()},[i]),N.useEffect(()=>{function k(x){c||(x.pageX<40&&o(!0),n.current&&x.clientX>n.current.getBoundingClientRect().right+40&&o(!1))}return window.addEventListener("mousemove",k),()=>{window.removeEventListener("mousemove",k)}},[c]);const b=(S,E)=>{S.preventDefault(),l({type:"delete",item:E})},v=async S=>{await t(S),p()},w=()=>{u(!0),o(!1)},_=()=>{u(!1)};return y.jsxs(y.Fragment,{children:[y.jsxs(lt.div,{ref:n,initial:"closed",animate:i?"open":"closed",variants:put,style:{width:"340px"},className:Ne("flex selection-accent flex-col side-menu fixed top-0 h-full","bg-white dark:bg-gray-950 border-r border-gray-100 dark:border-gray-800/50","shadow-sm text-sm",c?"z-40":"z-sidebar"),children:[y.jsxs("div",{className:"h-12 flex items-center justify-between px-4 border-b border-gray-100 dark:border-gray-800/50 bg-gray-50/50 dark:bg-gray-900/50",children:[y.jsx("div",{className:"text-gray-900 dark:text-white font-medium"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:d?.username||"Guest User"}),y.jsx("div",{className:"flex items-center justify-center w-[32px] h-[32px] overflow-hidden bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-500 rounded-full shrink-0",children:d?.avatar?y.jsx("img",{src:d.avatar,alt:d?.username||"User",className:"w-full h-full object-cover",loading:"eager",decoding:"sync"}):y.jsx("div",{className:"i-ph:user-fill text-lg"})})]})]}),y.jsx(mut,{}),y.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[y.jsxs("div",{className:"p-4 space-y-3",children:[y.jsxs("a",{href:"/",className:"flex gap-2 items-center bg-purple-50 dark:bg-purple-500/10 text-purple-700 dark:text-purple-300 hover:bg-purple-100 dark:hover:bg-purple-500/20 rounded-lg px-4 py-2 transition-colors",children:[y.jsx("span",{className:"inline-block i-lucide:message-square h-4 w-4"}),y.jsx("span",{className:"text-sm font-medium",children:"Start new chat"})]}),y.jsxs("div",{className:"relative w-full",children:[y.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:y.jsx("span",{className:"i-lucide:search h-4 w-4 text-gray-400 dark:text-gray-500"})}),y.jsx("input",{className:"w-full bg-gray-50 dark:bg-gray-900 relative pl-9 pr-3 py-2 rounded-lg focus:outline-none focus:ring-1 focus:ring-purple-500/50 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-500 border border-gray-200 dark:border-gray-800",type:"search",placeholder:"Search chats...",onChange:f,"aria-label":"Search chats"})]})]}),y.jsx("div",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium px-4 py-2",children:"Your Chats"}),y.jsxs("div",{className:"flex-1 overflow-auto px-3 pb-3",children:[h.length===0&&y.jsx("div",{className:"px-4 text-gray-500 dark:text-gray-400 text-sm",children:r.length===0?"No previous conversations":"No matches found"}),y.jsxs(Ea,{open:a!==null,children:[dut(h).map(({category:S,items:E})=>y.jsxs("div",{className:"mt-2 first:mt-0 space-y-1",children:[y.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 sticky top-0 z-1 bg-white dark:bg-gray-950 px-4 py-1",children:S}),y.jsx("div",{className:"space-y-0.5 pr-1",children:E.map(k=>y.jsx(uut,{item:k,exportChat:e,onDelete:x=>b(x,k),onDuplicate:()=>v(k.id)},k.id))})]},S)),y.jsx(t0,{onBackdrop:g,onClose:g,children:a?.type==="delete"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"p-6 bg-white dark:bg-gray-950",children:[y.jsx(up,{className:"text-gray-900 dark:text-white",children:"Delete Chat?"}),y.jsxs(OX,{className:"mt-2 text-gray-600 dark:text-gray-400",children:[y.jsxs("p",{children:["You are about to delete"," ",y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.item.description})]}),y.jsx("p",{className:"mt-2",children:"Are you sure you want to delete this chat?"})]})]}),y.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800",children:[y.jsx(TE,{type:"secondary",onClick:g,children:"Cancel"}),y.jsx(TE,{type:"danger",onClick:S=>{m(S,a.item),g()},children:"Delete"})]})]})})]})]}),y.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 dark:border-gray-800 px-4 py-3",children:[y.jsx(Xct,{onClick:w}),y.jsx(mSe,{})]})]})]}),y.jsx(Jct,{open:c,onClose:_})]})},whe=typeof document<"u"?ht.useLayoutEffect:()=>{};function but(t){const e=N.useRef(null);return whe(()=>{e.current=t},[t]),N.useCallback((...n)=>{const r=e.current;return r?.(...n)},[])}const Lh=t=>{var e;return(e=t?.ownerDocument)!==null&&e!==void 0?e:document},Lf=t=>t&&"window"in t&&t.window===t?t:Lh(t).defaultView||window;function yut(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function vut(t){return yut(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let wut=!1;function J8(){return wut}function xhe(t,e){if(!J8())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let n=e;for(;n!==null;){if(n===t)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:vut(n)?n=n.host:n=n.parentNode}return!1}const PO=(t=document)=>{var e;if(!J8())return t.activeElement;let n=t.activeElement;for(;n&&"shadowRoot"in n&&(!((e=n.shadowRoot)===null||e===void 0)&&e.activeElement);)n=n.shadowRoot.activeElement;return n};function _he(t){return J8()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function xut(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function _ut(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function She(t){let e=null;return()=>(e==null&&(e=t()),e)}const Sut=She(function(){return _ut(/^Mac/i)}),Eut=She(function(){return xut(/Android/i)});function Ehe(){let t=N.useRef(new Map),e=N.useCallback((s,i,o,a)=>{let l=a?.once?(...c)=>{t.current.delete(o),o(...c)}:o;t.current.set(o,{type:i,eventTarget:s,fn:l,options:a}),s.addEventListener(i,l,a)},[]),n=N.useCallback((s,i,o,a)=>{var l;let c=((l=t.current.get(o))===null||l===void 0?void 0:l.fn)||o;s.removeEventListener(i,c,a),t.current.delete(o)},[]),r=N.useCallback(()=>{t.current.forEach((s,i)=>{n(s.eventTarget,s.type,i,s.options)})},[n]);return N.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function kut(t){return t.mozInputSource===0&&t.isTrusted?!0:Eut()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}class khe{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function Che(t){let e=N.useRef({isFocused:!1,observer:null});whe(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=but(r=>{t?.(r)});return N.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let s=r.target,i=o=>{e.current.isFocused=!1,s.disabled&&n(new khe("blur",o)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};s.addEventListener("focusout",i,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&s.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let a=s===document.activeElement?null:document.activeElement;s.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),s.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(s,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let Cut=!1,ox=null,NO=new Set,Gv=new Map,wp=!1,IO=!1;const Aut={Tab:!0,Escape:!0};function X8(t,e){for(let n of NO)n(t,e)}function Tut(t){return!(t.metaKey||!Sut()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function lC(t){wp=!0,Tut(t)&&(ox="keyboard",X8("keyboard",t))}function ga(t){ox="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(wp=!0,X8("pointer",t))}function Ahe(t){kut(t)&&(wp=!0,ox="virtual")}function The(t){t.target===window||t.target===document||Cut||!t.isTrusted||(!wp&&!IO&&(ox="virtual",X8("virtual",t)),wp=!1,IO=!1)}function Phe(){wp=!1,IO=!0}function RO(t){if(typeof window>"u"||Gv.get(Lf(t)))return;const e=Lf(t),n=Lh(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){wp=!0,r.apply(this,arguments)},n.addEventListener("keydown",lC,!0),n.addEventListener("keyup",lC,!0),n.addEventListener("click",Ahe,!0),e.addEventListener("focus",The,!0),e.addEventListener("blur",Phe,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",ga,!0),n.addEventListener("pointermove",ga,!0),n.addEventListener("pointerup",ga,!0)):(n.addEventListener("mousedown",ga,!0),n.addEventListener("mousemove",ga,!0),n.addEventListener("mouseup",ga,!0)),e.addEventListener("beforeunload",()=>{Nhe(t)},{once:!0}),Gv.set(e,{focus:r})}const Nhe=(t,e)=>{const n=Lf(t),r=Lh(t);e&&r.removeEventListener("DOMContentLoaded",e),Gv.has(n)&&(n.HTMLElement.prototype.focus=Gv.get(n).focus,r.removeEventListener("keydown",lC,!0),r.removeEventListener("keyup",lC,!0),r.removeEventListener("click",Ahe,!0),n.removeEventListener("focus",The,!0),n.removeEventListener("blur",Phe,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",ga,!0),r.removeEventListener("pointermove",ga,!0),r.removeEventListener("pointerup",ga,!0)):(r.removeEventListener("mousedown",ga,!0),r.removeEventListener("mousemove",ga,!0),r.removeEventListener("mouseup",ga,!0)),Gv.delete(n))};function Put(t){const e=Lh(t);let n;return e.readyState!=="loading"?RO(t):(n=()=>{RO(t)},e.addEventListener("DOMContentLoaded",n)),()=>Nhe(t,n)}typeof document<"u"&&Put();function Ihe(){return ox!=="pointer"}const Nut=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Iut(t,e,n){let r=Lh(n?.target);const s=typeof window<"u"?Lf(n?.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?Lf(n?.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?Lf(n?.target).HTMLElement:HTMLElement,a=typeof window<"u"?Lf(n?.target).KeyboardEvent:KeyboardEvent;return t=t||r.activeElement instanceof s&&!Nut.has(r.activeElement.type)||r.activeElement instanceof i||r.activeElement instanceof o&&r.activeElement.isContentEditable,!(t&&e==="keyboard"&&n instanceof a&&!Aut[n.key])}function Rut(t,e,n){RO(),N.useEffect(()=>{let r=(s,i)=>{Iut(!!n?.isTextInput,s,i)&&t(Ihe())};return NO.add(r),()=>{NO.delete(r)}},e)}function Out(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:s}=t;const i=N.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),s&&s(!1),!0},[r,s]),o=Che(i),a=N.useCallback(l=>{const c=Lh(l.target),u=c?PO(c):PO();l.target===l.currentTarget&&u===_he(l.nativeEvent)&&(n&&n(l),s&&s(!0),o(l))},[s,n,o]);return{focusProps:{onFocus:!e&&(n||s||r)?a:void 0,onBlur:!e&&(r||s)?i:void 0}}}function Lut(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:s}=t,i=N.useRef({isFocusWithin:!1}),{addGlobalListener:o,removeAllGlobalListeners:a}=Ehe(),l=N.useCallback(d=>{d.currentTarget.contains(d.target)&&i.current.isFocusWithin&&!d.currentTarget.contains(d.relatedTarget)&&(i.current.isFocusWithin=!1,a(),n&&n(d),s&&s(!1))},[n,s,i,a]),c=Che(l),u=N.useCallback(d=>{if(!d.currentTarget.contains(d.target))return;const h=Lh(d.target),f=PO(h);if(!i.current.isFocusWithin&&f===_he(d.nativeEvent)){r&&r(d),s&&s(!0),i.current.isFocusWithin=!0,c(d);let p=d.currentTarget;o(h,"focus",m=>{if(i.current.isFocusWithin&&!xhe(p,m.target)){let g=new khe("blur",new h.defaultView.FocusEvent("blur",{relatedTarget:m.target}));g.target=p,g.currentTarget=p,l(g)}},{capture:!0})}},[r,s,c,o,l]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:l}}}let cC=!1,tN=0;function OO(){cC=!0,setTimeout(()=>{cC=!1},50)}function SW(t){t.pointerType==="touch"&&OO()}function Dut(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",SW):document.addEventListener("touchend",OO),tN++,()=>{tN--,!(tN>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",SW):document.removeEventListener("touchend",OO))}}function Mut(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:s}=t,[i,o]=N.useState(!1),a=N.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;N.useEffect(Dut,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=Ehe(),{hoverProps:u,triggerHoverEnd:d}=N.useMemo(()=>{let h=(m,g)=>{if(a.pointerType=g,s||g==="touch"||a.isHovered||!m.currentTarget.contains(m.target))return;a.isHovered=!0;let b=m.currentTarget;a.target=b,l(Lh(m.target),"pointerover",v=>{a.isHovered&&a.target&&!xhe(a.target,v.target)&&f(v,v.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:b,pointerType:g}),n&&n(!0),o(!0)},f=(m,g)=>{let b=a.target;a.pointerType="",a.target=null,!(g==="touch"||!a.isHovered||!b)&&(a.isHovered=!1,c(),r&&r({type:"hoverend",target:b,pointerType:g}),n&&n(!1),o(!1))},p={};return typeof PointerEvent<"u"?(p.onPointerEnter=m=>{cC&&m.pointerType==="mouse"||h(m,m.pointerType)},p.onPointerLeave=m=>{!s&&m.currentTarget.contains(m.target)&&f(m,m.pointerType)}):(p.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},p.onMouseEnter=m=>{!a.ignoreEmulatedMouseEvents&&!cC&&h(m,"mouse"),a.ignoreEmulatedMouseEvents=!1},p.onMouseLeave=m=>{!s&&m.currentTarget.contains(m.target)&&f(m,"mouse")}),{hoverProps:p,triggerHoverEnd:f}},[e,n,r,s,a,l,c]);return N.useEffect(()=>{s&&d({currentTarget:a.target},a.pointerType)},[s]),{hoverProps:u,isHovered:i}}function jut(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,s=N.useRef({isFocused:!1,isFocusVisible:e||Ihe()}),[i,o]=N.useState(!1),[a,l]=N.useState(()=>s.current.isFocused&&s.current.isFocusVisible),c=N.useCallback(()=>l(s.current.isFocused&&s.current.isFocusVisible),[]),u=N.useCallback(f=>{s.current.isFocused=f,o(f),c()},[c]);Rut(f=>{s.current.isFocusVisible=f,c()},[],{isTextInput:n});let{focusProps:d}=Out({isDisabled:r,onFocusChange:u}),{focusWithinProps:h}=Lut({isDisabled:!r,onFocusWithinChange:u});return{isFocused:i,isFocusVisible:a,focusProps:r?h:d}}var Fut=Object.defineProperty,But=(t,e,n)=>e in t?Fut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nN=(t,e,n)=>(But(t,typeof e!="symbol"?e+"":e,n),n);let $ut=class{constructor(){nN(this,"current",this.detect()),nN(this,"handoffState","pending"),nN(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},rp=new $ut;function ax(t){return rp.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}function Rhe(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Jp(){let t=[],e={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),e.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Rhe(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=Jp();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function gT(){let[t]=N.useState(Jp);return N.useEffect(()=>()=>t.dispose(),[t]),t}let Rs=(t,e)=>{rp.isServer?N.useEffect(t,e):N.useLayoutEffect(t,e)};function qu(t){let e=N.useRef(t);return Rs(()=>{e.current=t},[t]),e}let _n=function(t){let e=qu(t);return ht.useCallback((...n)=>e.current(...n),[e])};function Uut(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function Hut(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function zut({disabled:t=!1}={}){let e=N.useRef(null),[n,r]=N.useState(!1),s=gT(),i=_n(()=>{e.current=null,r(!1),s.dispose()}),o=_n(a=>{if(s.dispose(),e.current===null){e.current=a.currentTarget,r(!0);{let l=ax(a.currentTarget);s.addEventListener(l,"pointerup",i,!1),s.addEventListener(l,"pointermove",c=>{if(e.current){let u=Uut(c);r(Hut(u,e.current.getBoundingClientRect()))}},!1),s.addEventListener(l,"pointercancel",i,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:o,onPointerUp:i,onClick:i}}}function LO(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Da(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Da),r}var A0=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(A0||{}),Vd=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Vd||{});function El(){let t=Wut();return N.useCallback(e=>Vut({mergeRefs:t,...e}),[t])}function Vut({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:a}){a=a??Gut;let l=Ohe(e,t);if(i)return q2(l,n,r,o,a);let c=s??0;if(c&2){let{static:u=!1,...d}=l;if(u)return q2(d,n,r,o,a)}if(c&1){let{unmount:u=!0,...d}=l;return Da(u?0:1,{0(){return null},1(){return q2({...d,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return q2(l,n,r,o,a)}function q2(t,e={},n,r,s){let{as:i=n,children:o,refName:a="ref",...l}=rN(t,["unmount","static"]),c=t.ref!==void 0?{[a]:t.ref}:{},u=typeof o=="function"?o(e):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let d={};if(e){let h=!1,f=[];for(let[p,m]of Object.entries(e))typeof m=="boolean"&&(h=!0),m===!0&&f.push(p.replace(/([A-Z])/g,g=>`-${g.toLowerCase()}`));if(h){d["data-headlessui-state"]=f.join(" ");for(let p of f)d[`data-${p}`]=""}}if(i===N.Fragment&&(Object.keys(bf(l)).length>0||Object.keys(bf(d)).length>0))if(!N.isValidElement(u)||Array.isArray(u)&&u.length>1){if(Object.keys(bf(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(bf(l)).concat(Object.keys(bf(d))).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`))}else{let h=u.props,f=h?.className,p=typeof f=="function"?(...b)=>LO(f(...b),l.className):LO(f,l.className),m=p?{className:p}:{},g=Ohe(u.props,bf(rN(l,["ref"])));for(let b in d)b in g&&delete d[b];return N.cloneElement(u,Object.assign({},g,d,c,{ref:s(qut(u),c.ref)},m))}return N.createElement(i,Object.assign({},rN(l,["ref"]),i!==N.Fragment&&c,i!==N.Fragment&&d),u)}function Wut(){let t=N.useRef([]),e=N.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function Gut(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function Ohe(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var i;return(i=s?.preventDefault)==null?void 0:i.call(s)}]);for(let r in n)Object.assign(e,{[r](s,...i){let o=n[r];for(let a of o){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;a(s,...i)}}});return e}function DO(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];for(let r in n)Object.assign(e,{[r](...s){let i=n[r];for(let o of i)o?.(...s)}});return e}function Xo(t){var e;return Object.assign(N.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function bf(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function rN(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function qut(t){return ht.version.split(".")[0]>="19"?t.props.ref:t.ref}let Kut="span";var ow=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(ow||{});function Yut(t,e){var n;let{features:r=1,...s}=t,i={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return El()({ourProps:i,theirProps:s,slot:{},defaultTag:Kut,name:"Hidden"})}let uC=Xo(Yut);function Lhe(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=e?.getAttribute("disabled")==="";return r&&Jut(n)?!1:r}function Jut(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let Dhe=Symbol();function Mhe(t,e=!0){return Object.assign(t,{[Dhe]:e})}function gl(...t){let e=N.useRef(t);N.useEffect(()=>{e.current=t},[t]);let n=_n(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||r?.[Dhe])?void 0:n}var Dd=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Dd||{});let Xut=N.createContext(()=>{});function Zut({value:t,children:e}){return ht.createElement(Xut.Provider,{value:t},e)}function Qut(t){if(t===null)return{width:0,height:0};let{width:e,height:n}=t.getBoundingClientRect();return{width:e,height:n}}function edt(t,e=!1){let[n,r]=N.useReducer(()=>({}),{}),s=N.useMemo(()=>Qut(t),[t,n]);return Rs(()=>{if(!t)return;let i=new ResizeObserver(r);return i.observe(t),()=>{i.disconnect()}},[t]),e?{width:`${s.width}px`,height:`${s.height}px`}:s}let tdt=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};function jhe(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=e[s].call(n,...i);o&&(n=o,r.forEach(a=>a()))}}}function Fhe(t){return N.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}let ndt=new tdt(()=>jhe(()=>[],{ADD(t){return this.includes(t)?this:[...this,t]},REMOVE(t){let e=this.indexOf(t);if(e===-1)return this;let n=this.slice();return n.splice(e,1),n}}));function Bhe(t,e){let n=ndt.get(e),r=N.useId(),s=Fhe(n);if(Rs(()=>{if(t)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,t]),!t)return!1;let i=s.indexOf(r),o=s.length;return i===-1&&(i=o,o+=1),i===o-1}function rdt(t,e,n){let r=qu(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});N.useEffect(()=>{if(!t)return;let s=e===null?null:e instanceof HTMLElement?e:e.current;if(!s)return;let i=Jp();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}return()=>i.dispose()},[e,r,t])}let MO=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),sdt=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Ru=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Ru||{}),dC=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(dC||{}),idt=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(idt||{});function bT(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(MO)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function odt(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(sdt)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Z8=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Z8||{});function $he(t,e=0){var n;return t===((n=ax(t))==null?void 0:n.body)?!1:Da(e,{0(){return t.matches(MO)},1(){let r=t;for(;r!==null;){if(r.matches(MO))return!0;r=r.parentElement}return!1}})}var adt=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(adt||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let ldt=["textarea","input"].join(",");function cdt(t){var e,n;return(n=(e=t?.matches)==null?void 0:e.call(t,ldt))!=null?n:!1}function udt(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),i=e(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Df(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?udt(t):t:e&64?odt(t):bT(t);s.length>0&&o.length>1&&(o=o.filter(f=>!s.some(p=>p!=null&&"current"in p?p?.current===f:p===f))),r=r??i.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},u=0,d=o.length,h;do{if(u>=d||u+d<=0)return 0;let f=l+u;if(e&16)f=(f+d)%d;else{if(f<0)return 3;if(f>=d)return 1}h=o[f],h?.focus(c),u+=a}while(h!==i.activeElement);return e&6&&cdt(h)&&h.select(),2}function Uhe(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ddt(){return/Android/gi.test(window.navigator.userAgent)}function hdt(){return Uhe()||ddt()}function Ny(t,e,n,r){let s=qu(n);N.useEffect(()=>{if(!t)return;function i(o){s.current(o)}return document.addEventListener(e,i,r),()=>document.removeEventListener(e,i,r)},[t,e,r])}function Hhe(t,e,n,r){let s=qu(n);N.useEffect(()=>{if(!t)return;function i(o){s.current(o)}return window.addEventListener(e,i,r),()=>window.removeEventListener(e,i,r)},[t,e,r])}const EW=30;function fdt(t,e,n){let r=Bhe(t,"outside-click"),s=qu(n),i=N.useCallback(function(l,c){if(l.defaultPrevented)return;let u=c(l);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function h(f){return typeof f=="function"?h(f()):Array.isArray(f)||f instanceof Set?f:[f]}(e);for(let h of d)if(h!==null&&(h.contains(u)||l.composed&&l.composedPath().includes(h)))return;return!$he(u,Z8.Loose)&&u.tabIndex!==-1&&l.preventDefault(),s.current(l,u)},[s,e]),o=N.useRef(null);Ny(r,"pointerdown",l=>{var c,u;o.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target},!0),Ny(r,"mousedown",l=>{var c,u;o.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target},!0),Ny(r,"click",l=>{hdt()||o.current&&(i(l,()=>o.current),o.current=null)},!0);let a=N.useRef({x:0,y:0});Ny(r,"touchstart",l=>{a.current.x=l.touches[0].clientX,a.current.y=l.touches[0].clientY},!0),Ny(r,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-a.current.x)>=EW||Math.abs(c.y-a.current.y)>=EW))return i(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),Hhe(r,"blur",l=>i(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function hb(...t){return N.useMemo(()=>ax(...t),[...t])}function pdt(t,e,n,r){let s=qu(n);N.useEffect(()=>{t=t??window;function i(o){s.current(o)}return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)},[t,e,r])}function mdt(t,e){return N.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||e?.tagName==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function gdt(){let t;return{before({doc:e}){var n;let r=e.documentElement,s=(n=e.defaultView)!=null?n:window;t=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,t-s);n.style(r,"paddingRight",`${i}px`)}}}function bdt(){return Uhe()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(i=>i()).some(i=>i.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let a=Jp();a.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>a.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;e.addEventListener(t,"click",a=>{if(a.target instanceof HTMLElement)try{let l=a.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),u=t.querySelector(c);u&&!r(u)&&(o=u)}catch{}},!0),e.addEventListener(t,"touchstart",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(a.target,"touchAction","none")}),e.addEventListener(t,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),e.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;i!==l&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function ydt(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function vdt(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Mf=jhe(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:Jp(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:vdt(n)},s=[bdt(),gdt(),ydt()];s.forEach(({before:i})=>i?.(r)),s.forEach(({after:i})=>i?.(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Mf.subscribe(()=>{let t=Mf.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&Mf.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Mf.dispatch("TEARDOWN",n)}});function wdt(t,e,n=()=>({containers:[]})){let r=Fhe(Mf),s=e?r.get(e):void 0,i=s?s.count>0:!1;return Rs(()=>{if(!(!e||!t))return Mf.dispatch("PUSH",e,n),()=>Mf.dispatch("POP",e,n)},[t,e]),i}function xdt(t,e,n=()=>[document.body]){let r=Bhe(t,"scroll-lock");wdt(r,e,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],n]}})}function _dt(t=0){let[e,n]=N.useState(t),r=N.useCallback(l=>n(l),[e]),s=N.useCallback(l=>n(c=>c|l),[e]),i=N.useCallback(l=>(e&l)===l,[e]),o=N.useCallback(l=>n(c=>c&~l),[n]),a=N.useCallback(l=>n(c=>c^l),[n]);return{flags:e,setFlag:r,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:a}}var Sdt={},kW,CW;typeof Sn<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((kW=Sn==null?void 0:Sdt)==null?void 0:kW.NODE_ENV)==="test"&&typeof((CW=Element?.prototype)==null?void 0:CW.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Edt=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(Edt||{});function Q8(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function ej(t,e,n,r){let[s,i]=N.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=_dt(t&&s?3:0),c=N.useRef(!1),u=N.useRef(!1),d=gT();return Rs(()=>{var h;if(t){if(n&&i(!0),!e){n&&a(3);return}return(h=r?.start)==null||h.call(r,n),kdt(e,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){u.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var f;u.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),n||i(!1),(f=r?.end)==null||f.call(r,n))}})}},[t,n,e,d]),t?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function kdt(t,{prepare:e,run:n,done:r,inFlight:s}){let i=Jp();return Adt(t,{prepare:e,inFlight:s}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(Cdt(t,r))})}),i.dispose}function Cdt(t,e){var n,r;let s=Jp();if(!t)return s.dispose;let i=!1;s.add(()=>{i=!0});let o=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(e(),s.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{i||e()}),s.dispose)}function Adt(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function Tdt(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}const zhe={...Yg},Pdt=zhe.useInsertionEffect,Ndt=Pdt||(t=>t());function Vhe(t){const e=N.useRef(()=>{});return Ndt(()=>{e.current=t}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}var jO=typeof document<"u"?N.useLayoutEffect:N.useEffect;let AW=!1,Idt=0;const TW=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Idt++;function Rdt(){const[t,e]=N.useState(()=>AW?TW():void 0);return jO(()=>{t==null&&e(TW())},[]),N.useEffect(()=>{AW=!0},[]),t}const Odt=zhe.useId,Ldt=Odt||Rdt;function Ddt(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const Mdt=N.createContext(null),jdt=N.createContext(null),Fdt=()=>{var t;return((t=N.useContext(Mdt))==null?void 0:t.id)||null},Bdt=()=>N.useContext(jdt),$dt="data-floating-ui-focusable";function Udt(t){const{open:e=!1,onOpenChange:n,elements:r}=t,s=Ldt(),i=N.useRef({}),[o]=N.useState(()=>Ddt()),a=Fdt()!=null,[l,c]=N.useState(r.reference),u=Vhe((f,p,m)=>{i.current.openEvent=f?p:void 0,o.emit("openchange",{open:f,event:p,reason:m,nested:a}),n?.(f,p,m)}),d=N.useMemo(()=>({setPositionReference:c}),[]),h=N.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return N.useMemo(()=>({dataRef:i,open:e,onOpenChange:u,elements:h,events:o,floatingId:s,refs:d}),[e,u,h,o,s,d])}function Hdt(t){t===void 0&&(t={});const{nodeId:e}=t,n=Udt({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,s=r.elements,[i,o]=N.useState(null),[a,l]=N.useState(null),u=s?.domReference||i,d=N.useRef(null),h=Bdt();jO(()=>{u&&(d.current=u)},[u]);const f=Kre({...t,elements:{...s,...a&&{reference:a}}}),p=N.useCallback(w=>{const _=Oi(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;l(_),f.refs.setReference(_)},[f.refs]),m=N.useCallback(w=>{(Oi(w)||w===null)&&(d.current=w,o(w)),(Oi(f.refs.reference.current)||f.refs.reference.current===null||w!==null&&!Oi(w))&&f.refs.setReference(w)},[f.refs]),g=N.useMemo(()=>({...f.refs,setReference:m,setPositionReference:p,domReference:d}),[f.refs,m,p]),b=N.useMemo(()=>({...f.elements,domReference:u}),[f.elements,u]),v=N.useMemo(()=>({...f,...r,refs:g,elements:b,nodeId:e}),[f,g,b,e,r]);return jO(()=>{r.dataRef.current.floatingContext=v;const w=h?.nodesRef.current.find(_=>_.id===e);w&&(w.context=v)}),N.useMemo(()=>({...f,context:v,refs:g,elements:b}),[f,g,b,v])}const PW="active",NW="selected";function sN(t,e,n){const r=new Map,s=n==="item";let i=t;if(s&&t){const{[PW]:o,[NW]:a,...l}=t;i=l}return{...n==="floating"&&{tabIndex:-1,[$dt]:""},...i,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(s&&[PW,NW].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var d;(d=r.get(c))==null||d.push(u),o[c]=function(){for(var h,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(h=r.get(c))==null?void 0:h.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[c]=u}),o),{})}}function zdt(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),s=N.useCallback(a=>sN(a,t,"reference"),e),i=N.useCallback(a=>sN(a,t,"floating"),n),o=N.useCallback(a=>sN(a,t,"item"),r);return N.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:o}),[s,i,o])}function IW(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const Vdt=t=>({name:"inner",options:t,async fn(e){const{listRef:n,overflowRef:r,onFallbackChange:s,offset:i=0,index:o=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=Lc(t,e),{rects:d,elements:{floating:h}}=e,f=n.current[o],p=c?.current||h,m=h.clientTop||p.clientTop,g=h.clientTop!==0,b=p.clientTop!==0,v=h===p;if(!f)return{};const w={...e,...await z6(-f.offsetTop-h.clientTop-d.reference.height/2-f.offsetHeight/2-i).fn(e)},_=await L3(IW(w,p.scrollHeight+m+h.clientTop),u),S=await L3(w,{...u,elementContext:"reference"}),E=ci(0,_.top),k=w.y+E,R=(p.scrollHeight>p.clientHeight?C=>C:R1)(ci(0,p.scrollHeight+(g&&v||b?m*2:0)-E-ci(0,_.bottom)));if(p.style.maxHeight=R+"px",p.scrollTop=E,s){const C=p.offsetHeight<f.offsetHeight*zu(a,n.current.length)-1||S.top>=-l||S.bottom>=-l;Jg.flushSync(()=>s(C))}return r&&(r.current=await L3(IW({...w,y:k},p.offsetHeight+m+h.clientTop),u)),{y:k}}});function Wdt(t,e){const{open:n,elements:r}=t,{enabled:s=!0,overflowRef:i,scrollRef:o,onChange:a}=e,l=Vhe(a),c=N.useRef(!1),u=N.useRef(null),d=N.useRef(null);N.useEffect(()=>{if(!s)return;function f(m){if(m.ctrlKey||!p||i.current==null)return;const g=m.deltaY,b=i.current.top>=-.5,v=i.current.bottom>=-.5,w=p.scrollHeight-p.clientHeight,_=g<0?-1:1,S=g<0?"max":"min";p.scrollHeight<=p.clientHeight||(!b&&g>0||!v&&g<0?(m.preventDefault(),Jg.flushSync(()=>{l(E=>E+Math[S](g,w*_))})):/firefox/i.test(Tdt())&&(p.scrollTop+=g))}const p=o?.current||r.floating;if(n&&p)return p.addEventListener("wheel",f),requestAnimationFrame(()=>{u.current=p.scrollTop,i.current!=null&&(d.current={...i.current})}),()=>{u.current=null,d.current=null,p.removeEventListener("wheel",f)}},[s,n,r.floating,i,o,l]);const h=N.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const f=o?.current||r.floating;if(!(!i.current||!f||!c.current)){if(u.current!==null){const p=f.scrollTop-u.current;(i.current.bottom<-.5&&p<-1||i.current.top<-.5&&p>1)&&Jg.flushSync(()=>l(m=>m+p))}requestAnimationFrame(()=>{u.current=f.scrollTop})}}}),[r.floating,l,i,o]);return N.useMemo(()=>s?{floating:h}:{},[s,h])}let lx=N.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});lx.displayName="FloatingContext";let tj=N.createContext(null);tj.displayName="PlacementContext";function Gdt(t){return N.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function qdt(){return N.useContext(lx).setReference}function Kdt(){let{getFloatingProps:t,slot:e}=N.useContext(lx);return N.useCallback((...n)=>Object.assign({},t(...n),{"data-anchor":e.anchor}),[t,e])}function Ydt(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=N.useContext(tj),n=N.useMemo(()=>t,[JSON.stringify(t,(s,i)=>{var o;return(o=i?.outerHTML)!=null?o:i})]);Rs(()=>{e?.(n??null)},[e,n]);let r=N.useContext(lx);return N.useMemo(()=>[r.setFloating,t?r.styles:{}],[r.setFloating,t,r.styles])}let RW=4;function Jdt({children:t,enabled:e=!0}){let[n,r]=N.useState(null),[s,i]=N.useState(0),o=N.useRef(null),[a,l]=N.useState(null);Xdt(a);let c=e&&n!==null&&a!==null,{to:u="bottom",gap:d=0,offset:h=0,padding:f=0,inner:p}=Zdt(n,a),[m,g="center"]=u.split(" ");Rs(()=>{c&&i(0)},[c]);let{refs:b,floatingStyles:v,context:w}=Hdt({open:c,placement:m==="selection"?g==="center"?"bottom":`bottom-${g}`:g==="center"?`${m}`:`${m}-${g}`,strategy:"absolute",transform:!1,middleware:[z6({mainAxis:m==="selection"?0:d,crossAxis:h}),Yre({padding:f}),m!=="selection"&&Jre({padding:f}),m==="selection"&&p?Vdt({...p,padding:f,overflowRef:o,offset:s,minItemsVisible:RW,referenceOverflowThreshold:f,onFallbackChange(C){var T,O;if(!C)return;let P=w.elements.floating;if(!P)return;let U=parseFloat(getComputedStyle(P).scrollPaddingBottom)||0,ee=Math.min(RW,P.childElementCount),X=0,Z=0;for(let F of(O=(T=w.elements.floating)==null?void 0:T.childNodes)!=null?O:[])if(F instanceof HTMLElement){let M=F.offsetTop,G=M+F.clientHeight+U,D=P.scrollTop,j=D+P.clientHeight;if(M>=D&&G<=j)ee--;else{Z=Math.max(0,Math.min(G,j)-Math.max(M,D)),X=F.clientHeight;break}}ee>=1&&i(F=>{let M=X*ee-Z+U;return F>=M?F:M})}}):null,Xre({padding:f,apply({availableWidth:C,availableHeight:T,elements:O}){Object.assign(O.floating.style,{overflow:"auto",maxWidth:`${C}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${T}px)`})}})].filter(Boolean),whileElementsMounted:Gre}),[_=m,S=g]=w.placement.split("-");m==="selection"&&(_="selection");let E=N.useMemo(()=>({anchor:[_,S].filter(Boolean).join(" ")}),[_,S]),k=Wdt(w,{overflowRef:o,onChange:i}),{getReferenceProps:x,getFloatingProps:I}=zdt([k]),R=_n(C=>{l(C),b.setFloating(C)});return N.createElement(tj.Provider,{value:r},N.createElement(lx.Provider,{value:{setFloating:R,setReference:b.setReference,styles:v,getReferenceProps:x,getFloatingProps:I,slot:E}},t))}function Xdt(t){Rs(()=>{if(!t)return;let e=new MutationObserver(()=>{let n=window.getComputedStyle(t).maxHeight,r=parseFloat(n);if(isNaN(r))return;let s=parseInt(n);isNaN(s)||r!==s&&(t.style.maxHeight=`${Math.ceil(r)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function Zdt(t,e){var n,r,s;let i=iN((n=t?.gap)!=null?n:"var(--anchor-gap, 0)",e),o=iN((r=t?.offset)!=null?r:"var(--anchor-offset, 0)",e),a=iN((s=t?.padding)!=null?s:"var(--anchor-padding, 0)",e);return{...t,gap:i,offset:o,padding:a}}function iN(t,e,n=void 0){let r=gT(),s=_n((l,c)=>{if(l==null)return[n,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[n,null];let u=OW(l,c);return[u,d=>{let h=Whe(l);{let f=h.map(p=>window.getComputedStyle(c).getPropertyValue(p));r.requestAnimationFrame(function p(){r.nextFrame(p);let m=!1;for(let[b,v]of h.entries()){let w=window.getComputedStyle(c).getPropertyValue(v);if(f[b]!==w){f[b]=w,m=!0;break}}if(!m)return;let g=OW(l,c);u!==g&&(d(g),u=g)})}return r.dispose}]}return[n,null]}),i=N.useMemo(()=>s(t,e)[0],[t,e]),[o=i,a]=N.useState();return Rs(()=>{let[l,c]=s(t,e);if(a(l),!!c)return c(a)},[t,e]),o}function Whe(t){let e=/var\((.*)\)/.exec(t);if(e){let n=e[1].indexOf(",");if(n===-1)return[e[1]];let r=e[1].slice(0,n).trim(),s=e[1].slice(n+1).trim();return s?[r,...Whe(s)]:[r]}return[]}function OW(t,e){let n=document.createElement("div");e.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",t,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return e.removeChild(n),r}let yT=N.createContext(null);yT.displayName="OpenClosedContext";var Fo=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Fo||{});function vT(){return N.useContext(yT)}function Ghe({value:t,children:e}){return ht.createElement(yT.Provider,{value:t},e)}function Qdt({children:t}){return ht.createElement(yT.Provider,{value:null},t)}function eht(t){let e=_n(t),n=N.useRef(!1);N.useEffect(()=>(n.current=!1,()=>{n.current=!0,Rhe(()=>{n.current&&e()})}),[e])}function tht(){let t=typeof document>"u";return"useSyncExternalStore"in Yg?(e=>e.useSyncExternalStore)(Yg)(()=>()=>{},()=>!1,()=>!t):!1}function nj(){let t=tht(),[e,n]=N.useState(rp.isHandoffComplete);return e&&rp.isHandoffComplete===!1&&n(!1),N.useEffect(()=>{e!==!0&&n(!0)},[e]),N.useEffect(()=>rp.handoff(),[]),t?!1:e}let nht=N.createContext(!1);function rht(){return N.useContext(nht)}function sht(t){let e=rht(),n=N.useContext(Khe),r=hb(t),[s,i]=N.useState(()=>{var o;if(!e&&n!==null)return(o=n.current)!=null?o:null;if(rp.isServer)return null;let a=r?.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return N.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),N.useEffect(()=>{e||n!==null&&i(n.current)},[n,i,e]),s}let qhe=N.Fragment,iht=Xo(function(t,e){let n=t,r=N.useRef(null),s=gl(Mhe(d=>{r.current=d}),e),i=hb(r),o=sht(r),[a]=N.useState(()=>{var d;return rp.isServer?null:(d=i?.createElement("div"))!=null?d:null}),l=N.useContext(FO),c=nj();Rs(()=>{!o||!a||o.contains(a)||(a.setAttribute("data-headlessui-portal",""),o.appendChild(a))},[o,a]),Rs(()=>{if(a&&l)return l.register(a)},[l,a]),eht(()=>{var d;!o||!a||(a instanceof Node&&o.contains(a)&&o.removeChild(a),o.childNodes.length<=0&&((d=o.parentElement)==null||d.removeChild(o)))});let u=El();return c?!o||!a?null:Jg.createPortal(u({ourProps:{ref:s},theirProps:n,slot:{},defaultTag:qhe,name:"Portal"}),a):null});function oht(t,e){let n=gl(e),{enabled:r=!0,...s}=t,i=El();return r?ht.createElement(iht,{...s,ref:n}):i({ourProps:{ref:n},theirProps:s,slot:{},defaultTag:qhe,name:"Portal"})}let aht=N.Fragment,Khe=N.createContext(null);function lht(t,e){let{target:n,...r}=t,s={ref:gl(e)},i=El();return ht.createElement(Khe.Provider,{value:n},i({ourProps:s,theirProps:r,defaultTag:aht,name:"Popover.Group"}))}let FO=N.createContext(null);function cht(){let t=N.useContext(FO),e=N.useRef([]),n=_n(i=>(e.current.push(i),t&&t.register(i),()=>r(i))),r=_n(i=>{let o=e.current.indexOf(i);o!==-1&&e.current.splice(o,1),t&&t.unregister(i)}),s=N.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,N.useMemo(()=>function({children:i}){return ht.createElement(FO.Provider,{value:s},i)},[s])]}let uht=Xo(oht),dht=Xo(lht),hht=Object.assign(uht,{Group:dht});function fht({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=hb(n),s=_n(()=>{var i,o;let a=[];for(let l of t)l!==null&&(l instanceof HTMLElement?a.push(l):"current"in l&&l.current instanceof HTMLElement&&a.push(l.current));if(e!=null&&e.current)for(let l of e.current)a.push(l);for(let l of(i=r?.querySelectorAll("html > *, body > *"))!=null?i:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((o=n?.getRootNode())==null?void 0:o.host))||a.some(c=>l.contains(c))||a.push(l));return a});return{resolveContainers:s,contains:_n(i=>s().some(o=>o.contains(i)))}}let Yhe=N.createContext(null);function Jhe({children:t,node:e}){let[n,r]=N.useState(null),s=Xhe(e??n);return ht.createElement(Yhe.Provider,{value:s},t,s===null&&ht.createElement(uC,{features:ow.Hidden,ref:i=>{var o,a;if(i){for(let l of(a=(o=ax(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l!=null&&l.contains(i)){r(l);break}}}}))}function Xhe(t=null){var e;return(e=N.useContext(Yhe))!=null?e:t}function pht(){let t=N.useRef(!1);return Rs(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var Ou=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Ou||{});function Zhe(){let t=N.useRef(0);return Hhe(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function Qhe(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:tfe)!==N.Fragment||ht.Children.count(t.children)===1}let wT=N.createContext(null);wT.displayName="TransitionContext";var mht=(t=>(t.Visible="visible",t.Hidden="hidden",t))(mht||{});function ght(){let t=N.useContext(wT);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function bht(){let t=N.useContext(xT);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let xT=N.createContext(null);xT.displayName="NestingContext";function _T(t){return"children"in t?_T(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function efe(t,e){let n=qu(t),r=N.useRef([]),s=pht(),i=gT(),o=_n((f,p=Vd.Hidden)=>{let m=r.current.findIndex(({el:g})=>g===f);m!==-1&&(Da(p,{[Vd.Unmount](){r.current.splice(m,1)},[Vd.Hidden](){r.current[m].state="hidden"}}),i.microTask(()=>{var g;!_T(r)&&s.current&&((g=n.current)==null||g.call(n))}))}),a=_n(f=>{let p=r.current.find(({el:m})=>m===f);return p?p.state!=="visible"&&(p.state="visible"):r.current.push({el:f,state:"visible"}),()=>o(f,Vd.Unmount)}),l=N.useRef([]),c=N.useRef(Promise.resolve()),u=N.useRef({enter:[],leave:[]}),d=_n((f,p,m)=>{l.current.splice(0),e&&(e.chains.current[p]=e.chains.current[p].filter(([g])=>g!==f)),e?.chains.current[p].push([f,new Promise(g=>{l.current.push(g)})]),e?.chains.current[p].push([f,new Promise(g=>{Promise.all(u.current[p].map(([b,v])=>v)).then(()=>g())})]),p==="enter"?c.current=c.current.then(()=>e?.wait.current).then(()=>m(p)):m(p)}),h=_n((f,p,m)=>{Promise.all(u.current[p].splice(0).map(([g,b])=>b)).then(()=>{var g;(g=l.current.shift())==null||g()}).then(()=>m(p))});return N.useMemo(()=>({children:r,register:a,unregister:o,onStart:d,onStop:h,wait:c,chains:u}),[a,o,r,d,h,u,c])}let tfe=N.Fragment,nfe=A0.RenderStrategy;function yht(t,e){var n,r;let{transition:s=!0,beforeEnter:i,afterEnter:o,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:p,leaveTo:m,...g}=t,[b,v]=N.useState(null),w=N.useRef(null),_=Qhe(t),S=gl(..._?[w,e,v]:e===null?[]:[e]),E=(n=g.unmount)==null||n?Vd.Unmount:Vd.Hidden,{show:k,appear:x,initial:I}=ght(),[R,C]=N.useState(k?"visible":"hidden"),T=bht(),{register:O,unregister:P}=T;Rs(()=>O(w),[O,w]),Rs(()=>{if(E===Vd.Hidden&&w.current){if(k&&R!=="visible"){C("visible");return}return Da(R,{hidden:()=>P(w),visible:()=>O(w)})}},[R,w,O,P,k,E]);let U=nj();Rs(()=>{if(_&&U&&R==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,R,U,_]);let ee=I&&!x,X=x&&k&&I,Z=N.useRef(!1),F=efe(()=>{Z.current||(C("hidden"),P(w))},T),M=_n(te=>{Z.current=!0;let Y=te?"enter":"leave";F.onStart(w,Y,de=>{de==="enter"?i?.():de==="leave"&&a?.()})}),G=_n(te=>{let Y=te?"enter":"leave";Z.current=!1,F.onStop(w,Y,de=>{de==="enter"?o?.():de==="leave"&&l?.()}),Y==="leave"&&!_T(F)&&(C("hidden"),P(w))});N.useEffect(()=>{_&&s||(M(k),G(k))},[k,_,s]);let D=!(!s||!_||!U||ee),[,j]=ej(D,b,k,{start:M,end:G}),W=bf({ref:S,className:((r=LO(g.className,X&&c,X&&u,j.enter&&c,j.enter&&j.closed&&u,j.enter&&!j.closed&&d,j.leave&&f,j.leave&&!j.closed&&p,j.leave&&j.closed&&m,!j.transition&&k&&h))==null?void 0:r.trim())||void 0,...Q8(j)}),q=0;R==="visible"&&(q|=Fo.Open),R==="hidden"&&(q|=Fo.Closed),j.enter&&(q|=Fo.Opening),j.leave&&(q|=Fo.Closing);let ne=El();return ht.createElement(xT.Provider,{value:F},ht.createElement(Ghe,{value:q},ne({ourProps:W,theirProps:g,defaultTag:tfe,features:nfe,visible:R==="visible",name:"Transition.Child"})))}function vht(t,e){let{show:n,appear:r=!1,unmount:s=!0,...i}=t,o=N.useRef(null),a=Qhe(t),l=gl(...a?[o,e]:e===null?[]:[e]);nj();let c=vT();if(n===void 0&&c!==null&&(n=(c&Fo.Open)===Fo.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=N.useState(n?"visible":"hidden"),h=efe(()=>{n||d("hidden")}),[f,p]=N.useState(!0),m=N.useRef([n]);Rs(()=>{f!==!1&&m.current[m.current.length-1]!==n&&(m.current.push(n),p(!1))},[m,n]);let g=N.useMemo(()=>({show:n,appear:r,initial:f}),[n,r,f]);Rs(()=>{n?d("visible"):!_T(h)&&o.current!==null&&d("hidden")},[n,h]);let b={unmount:s},v=_n(()=>{var S;f&&p(!1),(S=t.beforeEnter)==null||S.call(t)}),w=_n(()=>{var S;f&&p(!1),(S=t.beforeLeave)==null||S.call(t)}),_=El();return ht.createElement(xT.Provider,{value:h},ht.createElement(wT.Provider,{value:g},_({ourProps:{...b,as:N.Fragment,children:ht.createElement(rfe,{ref:l,...b,...i,beforeEnter:v,beforeLeave:w})},theirProps:{},defaultTag:N.Fragment,features:nfe,visible:u==="visible",name:"Transition"})))}function wht(t,e){let n=N.useContext(wT)!==null,r=vT()!==null;return ht.createElement(ht.Fragment,null,!n&&r?ht.createElement(BO,{ref:e,...t}):ht.createElement(rfe,{ref:e,...t}))}let BO=Xo(vht),rfe=Xo(yht),xht=Xo(wht),_ht=Object.assign(BO,{Child:xht,Root:BO});var Sht=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Sht||{}),Eht=(t=>(t[t.TogglePopover=0]="TogglePopover",t[t.ClosePopover=1]="ClosePopover",t[t.SetButton=2]="SetButton",t[t.SetButtonId=3]="SetButtonId",t[t.SetPanel=4]="SetPanel",t[t.SetPanelId=5]="SetPanelId",t))(Eht||{});let kht={0:t=>({...t,popoverState:Da(t.popoverState,{0:1,1:0}),__demoMode:!1}),1(t){return t.popoverState===1?t:{...t,popoverState:1,__demoMode:!1}},2(t,e){return t.button===e.button?t:{...t,button:e.button}},3(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},4(t,e){return t.panel===e.panel?t:{...t,panel:e.panel}},5(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}}},rj=N.createContext(null);rj.displayName="PopoverContext";function ST(t){let e=N.useContext(rj);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ST),n}return e}let ET=N.createContext(null);ET.displayName="PopoverAPIContext";function sj(t){let e=N.useContext(ET);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,sj),n}return e}let ij=N.createContext(null);ij.displayName="PopoverGroupContext";function sfe(){return N.useContext(ij)}let kT=N.createContext(null);kT.displayName="PopoverPanelContext";function Cht(){return N.useContext(kT)}function Aht(t,e){return Da(e.type,kht,t,e)}let Tht="div";function Pht(t,e){var n;let{__demoMode:r=!1,...s}=t,i=N.useRef(null),o=gl(e,Mhe(F=>{i.current=F})),a=N.useRef([]),l=N.useReducer(Aht,{__demoMode:r,popoverState:r?0:1,buttons:a,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:N.createRef(),afterPanelSentinel:N.createRef(),afterButtonSentinel:N.createRef()}),[{popoverState:c,button:u,buttonId:d,panel:h,panelId:f,beforePanelSentinel:p,afterPanelSentinel:m,afterButtonSentinel:g},b]=l,v=hb((n=i.current)!=null?n:u),w=N.useMemo(()=>{if(!u||!h)return!1;for(let q of document.querySelectorAll("body > *"))if(Number(q?.contains(u))^Number(q?.contains(h)))return!0;let F=bT(),M=F.indexOf(u),G=(M+F.length-1)%F.length,D=(M+1)%F.length,j=F[G],W=F[D];return!h.contains(j)&&!h.contains(W)},[u,h]),_=qu(d),S=qu(f),E=N.useMemo(()=>({buttonId:_,panelId:S,close:()=>b({type:1})}),[_,S,b]),k=sfe(),x=k?.registerPopover,I=_n(()=>{var F;return(F=k?.isFocusWithinPopoverGroup())!=null?F:v?.activeElement&&(u?.contains(v.activeElement)||h?.contains(v.activeElement))});N.useEffect(()=>x?.(E),[x,E]);let[R,C]=cht(),T=Xhe(u),O=fht({mainTreeNode:T,portals:R,defaultContainers:[u,h]});pdt(v?.defaultView,"focus",F=>{var M,G,D,j,W,q;F.target!==window&&F.target instanceof HTMLElement&&c===0&&(I()||u&&h&&(O.contains(F.target)||(G=(M=p.current)==null?void 0:M.contains)!=null&&G.call(M,F.target)||(j=(D=m.current)==null?void 0:D.contains)!=null&&j.call(D,F.target)||(q=(W=g.current)==null?void 0:W.contains)!=null&&q.call(W,F.target)||b({type:1})))},!0),fdt(c===0,O.resolveContainers,(F,M)=>{b({type:1}),$he(M,Z8.Loose)||(F.preventDefault(),u?.focus())});let P=_n(F=>{b({type:1});let M=F?F instanceof HTMLElement?F:"current"in F&&F.current instanceof HTMLElement?F.current:u:u;M?.focus()}),U=N.useMemo(()=>({close:P,isPortalled:w}),[P,w]),ee=N.useMemo(()=>({open:c===0,close:P}),[c,P]),X={ref:o},Z=El();return ht.createElement(Jhe,{node:T},ht.createElement(Jdt,null,ht.createElement(kT.Provider,{value:null},ht.createElement(rj.Provider,{value:l},ht.createElement(ET.Provider,{value:U},ht.createElement(Zut,{value:P},ht.createElement(Ghe,{value:Da(c,{0:Fo.Open,1:Fo.Closed})},ht.createElement(C,null,Z({ourProps:X,theirProps:s,slot:ee,defaultTag:Tht,name:"Popover"})))))))))}let Nht="button";function Iht(t,e){let n=N.useId(),{id:r=`headlessui-popover-button-${n}`,disabled:s=!1,autoFocus:i=!1,...o}=t,[a,l]=ST("Popover.Button"),{isPortalled:c}=sj("Popover.Button"),u=N.useRef(null),d=`headlessui-focus-sentinel-${N.useId()}`,h=sfe(),f=h?.closeOthers,p=Cht()!==null;N.useEffect(()=>{if(!p)return l({type:3,buttonId:r}),()=>{l({type:3,buttonId:null})}},[p,r,l]);let[m]=N.useState(()=>Symbol()),g=gl(u,e,qdt(),_n(M=>{if(!p){if(M)a.buttons.current.push(m);else{let G=a.buttons.current.indexOf(m);G!==-1&&a.buttons.current.splice(G,1)}a.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),M&&l({type:2,button:M})}})),b=gl(u,e),v=hb(u),w=_n(M=>{var G,D,j;if(p){if(a.popoverState===1)return;switch(M.key){case Dd.Space:case Dd.Enter:M.preventDefault(),(D=(G=M.target).click)==null||D.call(G),l({type:1}),(j=a.button)==null||j.focus();break}}else switch(M.key){case Dd.Space:case Dd.Enter:M.preventDefault(),M.stopPropagation(),a.popoverState===1&&f?.(a.buttonId),l({type:0});break;case Dd.Escape:if(a.popoverState!==0)return f?.(a.buttonId);if(!u.current||v!=null&&v.activeElement&&!u.current.contains(v.activeElement))return;M.preventDefault(),M.stopPropagation(),l({type:1});break}}),_=_n(M=>{p||M.key===Dd.Space&&M.preventDefault()}),S=_n(M=>{var G,D;Lhe(M.currentTarget)||s||(p?(l({type:1}),(G=a.button)==null||G.focus()):(M.preventDefault(),M.stopPropagation(),a.popoverState===1&&f?.(a.buttonId),l({type:0}),(D=a.button)==null||D.focus()))}),E=_n(M=>{M.preventDefault(),M.stopPropagation()}),{isFocusVisible:k,focusProps:x}=jut({autoFocus:i}),{isHovered:I,hoverProps:R}=Mut({isDisabled:s}),{pressed:C,pressProps:T}=zut({disabled:s}),O=a.popoverState===0,P=N.useMemo(()=>({open:O,active:C||O,disabled:s,hover:I,focus:k,autofocus:i}),[O,I,k,C,s,i]),U=mdt(t,a.button),ee=DO(p?{ref:b,type:U,onKeyDown:w,onClick:S,disabled:s||void 0,autoFocus:i}:{ref:g,id:a.buttonId,type:U,"aria-expanded":a.popoverState===0,"aria-controls":a.panel?a.panelId:void 0,disabled:s||void 0,autoFocus:i,onKeyDown:w,onKeyUp:_,onClick:S,onMouseDown:E},x,R,T),X=Zhe(),Z=_n(()=>{let M=a.panel;if(!M)return;function G(){Da(X.current,{[Ou.Forwards]:()=>Df(M,Ru.First),[Ou.Backwards]:()=>Df(M,Ru.Last)})===dC.Error&&Df(bT().filter(D=>D.dataset.headlessuiFocusGuard!=="true"),Da(X.current,{[Ou.Forwards]:Ru.Next,[Ou.Backwards]:Ru.Previous}),{relativeTo:a.button})}G()}),F=El();return ht.createElement(ht.Fragment,null,F({ourProps:ee,theirProps:o,slot:P,defaultTag:Nht,name:"Popover.Button"}),O&&!p&&c&&ht.createElement(uC,{id:d,ref:a.afterButtonSentinel,features:ow.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Z}))}let Rht="div",Oht=A0.RenderStrategy|A0.Static;function ife(t,e){let n=N.useId(),{id:r=`headlessui-popover-backdrop-${n}`,transition:s=!1,...i}=t,[{popoverState:o},a]=ST("Popover.Backdrop"),[l,c]=N.useState(null),u=gl(e,c),d=vT(),[h,f]=ej(s,l,d!==null?(d&Fo.Open)===Fo.Open:o===0),p=_n(b=>{if(Lhe(b.currentTarget))return b.preventDefault();a({type:1})}),m=N.useMemo(()=>({open:o===0}),[o]),g={ref:u,id:r,"aria-hidden":!0,onClick:p,...Q8(f)};return El()({ourProps:g,theirProps:i,slot:m,defaultTag:Rht,features:Oht,visible:h,name:"Popover.Backdrop"})}let Lht="div",Dht=A0.RenderStrategy|A0.Static;function Mht(t,e){let n=N.useId(),{id:r=`headlessui-popover-panel-${n}`,focus:s=!1,anchor:i,portal:o=!1,modal:a=!1,transition:l=!1,...c}=t,[u,d]=ST("Popover.Panel"),{close:h,isPortalled:f}=sj("Popover.Panel"),p=`headlessui-focus-sentinel-before-${n}`,m=`headlessui-focus-sentinel-after-${n}`,g=N.useRef(null),b=Gdt(i),[v,w]=Ydt(b),_=Kdt();b&&(o=!0);let[S,E]=N.useState(null),k=gl(g,e,b?v:null,_n(M=>d({type:4,panel:M})),E),x=hb(g);Rs(()=>(d({type:5,panelId:r}),()=>{d({type:5,panelId:null})}),[r,d]);let I=vT(),[R,C]=ej(l,S,I!==null?(I&Fo.Open)===Fo.Open:u.popoverState===0);rdt(R,u.button,()=>{d({type:1})});let T=u.__demoMode?!1:a&&R;xdt(T,x);let O=_n(M=>{var G;switch(M.key){case Dd.Escape:if(u.popoverState!==0||!g.current||x!=null&&x.activeElement&&!g.current.contains(x.activeElement))return;M.preventDefault(),M.stopPropagation(),d({type:1}),(G=u.button)==null||G.focus();break}});N.useEffect(()=>{var M;t.static||u.popoverState===1&&((M=t.unmount)==null||M)&&d({type:4,panel:null})},[u.popoverState,t.unmount,t.static,d]),N.useEffect(()=>{if(u.__demoMode||!s||u.popoverState!==0||!g.current)return;let M=x?.activeElement;g.current.contains(M)||Df(g.current,Ru.First)},[u.__demoMode,s,g.current,u.popoverState]);let P=N.useMemo(()=>({open:u.popoverState===0,close:h}),[u.popoverState,h]),U=DO(b?_():{},{ref:k,id:r,onKeyDown:O,onBlur:s&&u.popoverState===0?M=>{var G,D,j,W,q;let ne=M.relatedTarget;ne&&g.current&&((G=g.current)!=null&&G.contains(ne)||(d({type:1}),((j=(D=u.beforePanelSentinel.current)==null?void 0:D.contains)!=null&&j.call(D,ne)||(q=(W=u.afterPanelSentinel.current)==null?void 0:W.contains)!=null&&q.call(W,ne))&&ne.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...c.style,...w,"--button-width":edt(u.button,!0).width},...Q8(C)}),ee=Zhe(),X=_n(()=>{let M=g.current;if(!M)return;function G(){Da(ee.current,{[Ou.Forwards]:()=>{var D;Df(M,Ru.First)===dC.Error&&((D=u.afterPanelSentinel.current)==null||D.focus())},[Ou.Backwards]:()=>{var D;(D=u.button)==null||D.focus({preventScroll:!0})}})}G()}),Z=_n(()=>{let M=g.current;if(!M)return;function G(){Da(ee.current,{[Ou.Forwards]:()=>{if(!u.button)return;let D=bT(),j=D.indexOf(u.button),W=D.slice(0,j+1),q=[...D.slice(j+1),...W];for(let ne of q.slice())if(ne.dataset.headlessuiFocusGuard==="true"||S!=null&&S.contains(ne)){let te=q.indexOf(ne);te!==-1&&q.splice(te,1)}Df(q,Ru.First,{sorted:!1})},[Ou.Backwards]:()=>{var D;Df(M,Ru.Previous)===dC.Error&&((D=u.button)==null||D.focus())}})}G()}),F=El();return ht.createElement(Qdt,null,ht.createElement(kT.Provider,{value:r},ht.createElement(ET.Provider,{value:{close:h,isPortalled:f}},ht.createElement(hht,{enabled:o?t.static||R:!1},R&&f&&ht.createElement(uC,{id:p,ref:u.beforePanelSentinel,features:ow.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:X}),F({ourProps:U,theirProps:c,slot:P,defaultTag:Lht,features:Dht,visible:R,name:"Popover.Panel"}),R&&f&&ht.createElement(uC,{id:m,ref:u.afterPanelSentinel,features:ow.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Z})))))}let jht="div";function Fht(t,e){let n=N.useRef(null),r=gl(n,e),[s,i]=N.useState([]),o=_n(m=>{i(g=>{let b=g.indexOf(m);if(b!==-1){let v=g.slice();return v.splice(b,1),v}return g})}),a=_n(m=>(i(g=>[...g,m]),()=>o(m))),l=_n(()=>{var m;let g=ax(n);if(!g)return!1;let b=g.activeElement;return(m=n.current)!=null&&m.contains(b)?!0:s.some(v=>{var w,_;return((w=g.getElementById(v.buttonId.current))==null?void 0:w.contains(b))||((_=g.getElementById(v.panelId.current))==null?void 0:_.contains(b))})}),c=_n(m=>{for(let g of s)g.buttonId.current!==m&&g.close()}),u=N.useMemo(()=>({registerPopover:a,unregisterPopover:o,isFocusWithinPopoverGroup:l,closeOthers:c}),[a,o,l,c]),d=N.useMemo(()=>({}),[]),h=t,f={ref:r},p=El();return ht.createElement(Jhe,null,ht.createElement(ij.Provider,{value:u},p({ourProps:f,theirProps:h,slot:d,defaultTag:jht,name:"Popover.Group"})))}let Bht=Xo(Pht),$ht=Xo(Iht),Uht=Xo(ife),Hht=Xo(ife),zht=Xo(Mht),Vht=Xo(Fht),oN=Object.assign(Bht,{Button:$ht,Backdrop:Hht,Overlay:Uht,Panel:zht,Group:Vht});const ofe=t=>({js:"javascript",jsx:"jsx",ts:"typescript",tsx:"tsx",json:"json",html:"html",css:"css",py:"python",java:"java",rb:"ruby",cpp:"cpp",c:"c",cs:"csharp",go:"go",rs:"rust",php:"php",swift:"swift",md:"plaintext",sh:"bash"})[t]||"typescript",Wht=N.memo(({onClick:t,isFullscreen:e})=>y.jsx("button",{onClick:t,className:"ml-4 p-1 rounded hover:bg-bolt-elements-background-depth-3 text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary transition-colors",title:e?"Exit Fullscreen":"Enter Fullscreen",children:y.jsx("div",{className:e?"i-ph:corners-in":"i-ph:corners-out"})})),Ght=N.memo(({isFullscreen:t,children:e})=>t?y.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/50 flex items-center justify-center p-6",children:y.jsx("div",{className:"w-full h-full max-w-[90vw] max-h-[90vh] bg-bolt-elements-background-depth-2 rounded-lg border border-bolt-elements-borderColor shadow-xl overflow-hidden",children:e})}):y.jsx(y.Fragment,{children:e})),qht=1024*1024,Kht=/[\x00-\x08\x0E-\x1F]/,LW=t=>t.length>qht||Kht.test(t),Yht=(t,e)=>{try{if(LW(t)||LW(e))return{beforeLines:[],afterLines:[],hasChanges:!1,lineChanges:{before:new Set,after:new Set},unifiedBlocks:[],isBinary:!0};const n=u=>u.replace(/\r\n/g,`
`).split(`
`).map(d=>d.trimEnd()),r=n(t),s=n(e);if(r.join(`
`)===s.join(`
`))return{beforeLines:r,afterLines:s,hasChanges:!1,lineChanges:{before:new Set,after:new Set},unifiedBlocks:[],isBinary:!1};const i={before:new Set,after:new Set},o=[];let a=0,l=0;for(;a<r.length||l<s.length;)if(a<r.length&&l<s.length&&r[a]===s[l])o.push({lineNumber:l,content:s[l],type:"unchanged",correspondingLine:a}),a++,l++;else{let u=!1;const d=3;for(let h=1;h<=d&&a+h<r.length&&l+h<s.length;h++)if(r[a+h]===s[l]){for(let f=0;f<h;f++)i.before.add(a+f),o.push({lineNumber:a+f,content:r[a+f],type:"removed",correspondingLine:l,charChanges:[{value:r[a+f],type:"removed"}]});a+=h,u=!0;break}else if(r[a]===s[l+h]){for(let f=0;f<h;f++)i.after.add(l+f),o.push({lineNumber:l+f,content:s[l+f],type:"added",correspondingLine:a,charChanges:[{value:s[l+f],type:"added"}]});l+=h,u=!0;break}if(!u)if(a<r.length&&l<s.length){const h=r[a],f=s[l];let p=0;for(;p<h.length&&p<f.length&&h[p]===f[p];)p++;let m=0;for(;m<h.length-p&&m<f.length-p&&h[h.length-1-m]===f[f.length-1-m];)m++;const g=h.slice(0,p),b=h.slice(p,h.length-m),v=f.slice(p,f.length-m),w=h.slice(h.length-m);b||v?(b&&(i.before.add(a),o.push({lineNumber:a,content:h,type:"removed",correspondingLine:l,charChanges:[{value:g,type:"unchanged"},{value:b,type:"removed"},{value:w,type:"unchanged"}]}),a++),v&&(i.after.add(l),o.push({lineNumber:l,content:f,type:"added",correspondingLine:a-1,charChanges:[{value:g,type:"unchanged"},{value:v,type:"added"},{value:w,type:"unchanged"}]}),l++)):(a<r.length&&(i.before.add(a),o.push({lineNumber:a,content:r[a],type:"removed",correspondingLine:l,charChanges:[{value:r[a],type:"removed"}]}),a++),l<s.length&&(i.after.add(l),o.push({lineNumber:l,content:s[l],type:"added",correspondingLine:a-1,charChanges:[{value:s[l],type:"added"}]}),l++))}else a<r.length&&(i.before.add(a),o.push({lineNumber:a,content:r[a],type:"removed",correspondingLine:l,charChanges:[{value:r[a],type:"removed"}]}),a++),l<s.length&&(i.after.add(l),o.push({lineNumber:l,content:s[l],type:"added",correspondingLine:a-1,charChanges:[{value:s[l],type:"added"}]}),l++)}const c=o.sort((u,d)=>u.lineNumber-d.lineNumber);return{beforeLines:r,afterLines:s,hasChanges:i.before.size>0||i.after.size>0,lineChanges:i,unifiedBlocks:c,isBinary:!1}}catch(n){return console.error("Error processing changes:",n),{beforeLines:[],afterLines:[],hasChanges:!1,lineChanges:{before:new Set,after:new Set},unifiedBlocks:[],error:!0,isBinary:!1}}},afe="w-9 shrink-0 pl-2 py-1 text-left font-mono text-bolt-elements-textTertiary border-r border-bolt-elements-borderColor bg-bolt-elements-background-depth-1",lfe="px-1 py-1 font-mono whitespace-pre flex-1 group-hover:bg-bolt-elements-background-depth-2 text-bolt-elements-textPrimary",Jht="h-full overflow-auto diff-panel-content",Xht={added:"bg-green-500/10 dark:bg-green-500/20 border-l-4 border-green-500",removed:"bg-red-500/10 dark:bg-red-500/20 border-l-4 border-red-500",unchanged:""},Zht={added:"text-green-700 dark:text-green-500 bg-green-500/10 dark:bg-green-500/20",removed:"text-red-700 dark:text-red-500 bg-red-500/10 dark:bg-red-500/20",unchanged:"text-bolt-elements-textPrimary"},Qht=t=>y.jsx("div",{className:"h-full flex items-center justify-center p-4",children:y.jsxs("div",{className:"text-center text-bolt-elements-textTertiary",children:[y.jsx("div",{className:`i-ph:${t==="binary"?"file-x":"warning-circle"} text-4xl text-red-400 mb-2 mx-auto`}),y.jsx("p",{className:"font-medium text-bolt-elements-textPrimary",children:t==="binary"?"Binary file detected":"Error processing file"}),y.jsx("p",{className:"text-sm mt-1",children:t==="binary"?"Diff view is not available for binary files":"Could not generate diff preview"})]})}),eft=N.memo(({beforeCode:t,language:e,highlighter:n,theme:r})=>y.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4",children:[y.jsxs("div",{className:"text-center text-bolt-elements-textTertiary",children:[y.jsx("div",{className:"i-ph:files text-4xl text-green-400 mb-2 mx-auto"}),y.jsx("p",{className:"font-medium text-bolt-elements-textPrimary",children:"Files are identical"}),y.jsx("p",{className:"text-sm mt-1",children:"Both versions match exactly"})]}),y.jsxs("div",{className:"mt-4 w-full max-w-2xl bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor overflow-hidden",children:[y.jsx("div",{className:"p-2 text-xs font-bold text-bolt-elements-textTertiary border-b border-bolt-elements-borderColor",children:"Current Content"}),y.jsx("div",{className:"overflow-auto max-h-96",children:t.split(`
`).map((s,i)=>y.jsxs("div",{className:"flex group min-w-fit",children:[y.jsx("div",{className:afe,children:i+1}),y.jsxs("div",{className:lfe,children:[y.jsx("span",{className:"mr-2",children:" "}),y.jsx("span",{dangerouslySetInnerHTML:{__html:n?n.codeToHtml(s,{lang:e,theme:r==="dark"?"github-dark":"github-light"}).replace(/<\/?pre[^>]*>/g,"").replace(/<\/?code[^>]*>/g,""):s}})]})]},i))})]})]})),tft=(t,e)=>N.useMemo(()=>Yht(t,e),[t,e]),nft=N.memo(({lineNumber:t,content:e,type:n,highlighter:r,language:s,block:i,theme:o})=>{const a=Xht[n],l=()=>{if(n==="unchanged"||!i.charChanges){const c=r?r.codeToHtml(e,{lang:s,theme:o==="dark"?"github-dark":"github-light"}).replace(/<\/?pre[^>]*>/g,"").replace(/<\/?code[^>]*>/g,""):e;return y.jsx("span",{dangerouslySetInnerHTML:{__html:c}})}return y.jsx(y.Fragment,{children:i.charChanges.map((c,u)=>{const d=Zht[c.type],h=r?r.codeToHtml(c.value,{lang:s,theme:o==="dark"?"github-dark":"github-light"}).replace(/<\/?pre[^>]*>/g,"").replace(/<\/?code[^>]*>/g,""):c.value;return y.jsx("span",{className:d,dangerouslySetInnerHTML:{__html:h}},u)})})};return y.jsxs("div",{className:"flex group min-w-fit",children:[y.jsx("div",{className:afe,children:t+1}),y.jsxs("div",{className:`${lfe} ${a}`,children:[y.jsxs("span",{className:"mr-2 text-bolt-elements-textTertiary",children:[n==="added"&&y.jsx("span",{className:"text-green-700 dark:text-green-500",children:"+"}),n==="removed"&&y.jsx("span",{className:"text-red-700 dark:text-red-500",children:"-"}),n==="unchanged"&&" "]}),l()]})]})}),rft=N.memo(({filename:t,hasChanges:e,onToggleFullscreen:n,isFullscreen:r,beforeCode:s,afterCode:i})=>{const{additions:o,deletions:a}=N.useMemo(()=>e?b0(s,i,{newlineIsToken:!1,ignoreWhitespace:!0,ignoreCase:!1}).reduce((u,d)=>(d.added&&(u.additions+=d.value.split(`
`).length),d.removed&&(u.deletions+=d.value.split(`
`).length),u),{additions:0,deletions:0}):{additions:0,deletions:0},[e,s,i]),l=o>0||a>0;return y.jsxs("div",{className:"flex items-center bg-bolt-elements-background-depth-1 p-2 text-sm text-bolt-elements-textPrimary shrink-0",children:[y.jsx("div",{className:"i-ph:file mr-2 h-4 w-4 shrink-0"}),y.jsx("span",{className:"truncate",children:t}),y.jsxs("span",{className:"ml-auto shrink-0 flex items-center gap-2",children:[e?y.jsxs(y.Fragment,{children:[l&&y.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[o>0&&y.jsxs("span",{className:"text-green-700 dark:text-green-500",children:["+",o]}),a>0&&y.jsxs("span",{className:"text-red-700 dark:text-red-500",children:["-",a]})]}),y.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:"Modified"}),y.jsx("span",{className:"text-bolt-elements-textTertiary text-xs",children:new Date().toLocaleTimeString()})]}):y.jsx("span",{className:"text-green-700 dark:text-green-400",children:"No Changes"}),y.jsx(Wht,{onClick:n,isFullscreen:r})]})]})}),sft=N.memo(({beforeCode:t,afterCode:e,filename:n,language:r})=>{const[s,i]=N.useState(!1),[o,a]=N.useState(null),l=Bt(i1),c=N.useCallback(()=>{i(p=>!p)},[]),{unifiedBlocks:u,hasChanges:d,isBinary:h,error:f}=tft(t,e);return N.useEffect(()=>{Jst({themes:["github-dark","github-light"],langs:["typescript","javascript","json","html","css","jsx","tsx","python","php","java","c","cpp","csharp","go","ruby","rust","plaintext"]}).then(a)},[]),h||f?Qht(h?"binary":"error"):y.jsx(Ght,{isFullscreen:s,children:y.jsxs("div",{className:"w-full h-full flex flex-col",children:[y.jsx(rft,{filename:n,hasChanges:d,onToggleFullscreen:c,isFullscreen:s,beforeCode:t,afterCode:e}),y.jsx("div",{className:Jht,children:d?y.jsx("div",{className:"overflow-x-auto min-w-full",children:u.map((p,m)=>y.jsx(nft,{lineNumber:p.lineNumber,content:p.content,type:p.type,highlighter:o,language:r,block:p,theme:l},`${p.lineNumber}-${m}`))}):y.jsx(eft,{beforeCode:t,language:r,highlighter:o,theme:l})})]})})}),ift=N.memo(({fileHistory:t,setFileHistory:e})=>{const n=Bt(It.files),r=Bt(It.selectedFile),s=Bt(It.currentDocument),i=Bt(It.unsavedFiles);if(N.useEffect(()=>{if(r&&s){const h=n[r];if(!h||!("content"in h))return;const f=t[r],p=s.value,m=p.replace(/\r\n/g,`
`).trim(),g=(f?.originalContent||h.content).replace(/\r\n/g,`
`).trim();if(!f){if(m!==g){const S=b0(h.content,p);e(E=>({...E,[r]:{originalContent:h.content,lastModified:Date.now(),changes:S,versions:[{timestamp:Date.now(),content:p}],changeSource:"auto-save"}}))}return}const v=f.versions[f.versions.length-1]?.content.replace(/\r\n/g,`
`).trim();if(m===v)return;const w=Pv(r);if(Ioe(w,f.originalContent,p)){const S=b0(f.originalContent,p);if(S.some(k=>(k.added||k.removed)&&k.value.trim().length>0)){const k={originalContent:f.originalContent,lastModified:Date.now(),changes:[...f.changes,...S].slice(-100),versions:[...f.versions,{timestamp:Date.now(),content:p}].slice(-10),changeSource:"auto-save"};e(x=>({...x,[r]:k}))}}}},[r,s?.value,n,e,i]),!r||!s)return y.jsx("div",{className:"flex w-full h-full justify-center items-center bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary",children:"Select a file to view differences"});const o=n[r],a=o&&"content"in o?o.content:"",l=s.value,u=t[r]?.originalContent||a,d=ofe(r.split(".").pop()||"");try{return y.jsx("div",{className:"h-full overflow-hidden",children:y.jsx(sft,{beforeCode:u,afterCode:l,language:d,filename:r,lightTheme:"github-light",darkTheme:"github-dark"})})}catch(h){return console.error("DiffView render error:",h),y.jsx("div",{className:"flex w-full h-full justify-center items-center bg-bolt-elements-background-depth-1 text-red-400",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"i-ph:warning-circle text-4xl mb-2"}),y.jsx("p",{children:"Failed to render diff view"})]})})}});let $O=[],cfe=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?cfe:$O).push(n=n+t[e])})();function oft(t){if(t<768)return!1;for(let e=0,n=$O.length;;){let r=e+n>>1;if(t<$O[r])n=r;else if(t>=cfe[r])e=r+1;else return!0;if(e==n)return!1}}function DW(t){return t>=127462&&t<=127487}const MW=8205;function aft(t,e,n=!0,r=!0){return(n?ufe:lft)(t,e,r)}function ufe(t,e,n){if(e==t.length)return e;e&&dfe(t.charCodeAt(e))&&hfe(t.charCodeAt(e-1))&&e--;let r=aN(t,e);for(e+=jW(r);e<t.length;){let s=aN(t,e);if(r==MW||s==MW||n&&oft(s))e+=jW(s),r=s;else if(DW(s)){let i=0,o=e-2;for(;o>=0&&DW(aN(t,o));)i++,o-=2;if(i%2==0)break;e+=2}else break}return e}function lft(t,e,n){for(;e>0;){let r=ufe(t,e-2,n);if(r<e)return r;e--}return 0}function aN(t,e){let n=t.charCodeAt(e);if(!hfe(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return dfe(r)?(n-55296<<10)+(r-56320)+65536:n}function dfe(t){return t>=56320&&t<57344}function hfe(t){return t>=55296&&t<56320}function jW(t){return t<65536?1:2}let jn=class ffe{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=T0(this,e,n);let s=[];return this.decompose(0,e,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(n,this.length,s,1),hc.from(s,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=T0(this,e,n);let r=[];return this.decompose(e,n,r,0),hc.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),s=new qv(this),i=new qv(e);for(let o=n,a=n;;){if(s.next(o),i.next(o),o=0,s.lineBreak!=i.lineBreak||s.done!=i.done||s.value!=i.value)return!1;if(a+=s.value.length,s.done||a>=r)return!0}}iter(e=1){return new qv(this,e)}iterRange(e,n=this.length){return new pfe(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(e).from;r=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new mfe(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ffe.empty:e.length<=32?new Hr(e):hc.from(Hr.split(e,[]))}};class Hr extends jn{constructor(e,n=cft(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,s){for(let i=0;;i++){let o=this.text[i],a=s+o.length;if((n?r:a)>=e)return new uft(s,a,r,o);s=a+1,r++}}decompose(e,n,r,s){let i=e<=0&&n>=this.length?this:new Hr(FW(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(s&1){let o=r.pop(),a=tE(i.text,o.text.slice(),0,i.length);if(a.length<=32)r.push(new Hr(a,o.length+i.length));else{let l=a.length>>1;r.push(new Hr(a.slice(0,l)),new Hr(a.slice(l)))}}else r.push(i)}replace(e,n,r){if(!(r instanceof Hr))return super.replace(e,n,r);[e,n]=T0(this,e,n);let s=tE(this.text,tE(r.text,FW(this.text,0,e)),n),i=this.length+r.length-(n-e);return s.length<=32?new Hr(s,i):hc.from(Hr.split(s,[]),i)}sliceString(e,n=this.length,r=`
`){[e,n]=T0(this,e,n);let s="";for(let i=0,o=0;i<=n&&o<this.text.length;o++){let a=this.text[o],l=i+a.length;i>e&&o&&(s+=r),e<l&&n>i&&(s+=a.slice(Math.max(0,e-i),n-i)),i=l+1}return s}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],s=-1;for(let i of e)r.push(i),s+=i.length+1,r.length==32&&(n.push(new Hr(r,s)),r=[],s=-1);return s>-1&&n.push(new Hr(r,s)),n}}class hc extends jn{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,s){for(let i=0;;i++){let o=this.children[i],a=s+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,s);s=a+1,r=l+1}}decompose(e,n,r,s){for(let i=0,o=0;o<=n&&i<this.children.length;i++){let a=this.children[i],l=o+a.length;if(e<=l&&n>=o){let c=s&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?r.push(a):a.decompose(e-o,n-o,r,c)}o=l+1}}replace(e,n,r){if([e,n]=T0(this,e,n),r.lines<this.lines)for(let s=0,i=0;s<this.children.length;s++){let o=this.children[s],a=i+o.length;if(e>=i&&n<=a){let l=o.replace(e-i,n-i,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[s]=l,new hc(u,this.length-(n-e)+r.length)}return super.replace(i,a,l)}i=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=T0(this,e,n);let s="";for(let i=0,o=0;i<this.children.length&&o<=n;i++){let a=this.children[i],l=o+a.length;o>e&&i&&(s+=r),e<l&&n>o&&(s+=a.sliceString(e-o,n-o,r)),o=l+1}return s}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof hc))return 0;let r=0,[s,i,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=n,i+=n){if(s==o||i==a)return r;let l=this.children[s],c=e.children[i];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let f of e)r+=f.lines;if(r<32){let f=[];for(let p of e)p.flatten(f);return new Hr(f,n)}let s=Math.max(32,r>>5),i=s<<1,o=s>>1,a=[],l=0,c=-1,u=[];function d(f){let p;if(f.lines>i&&f instanceof hc)for(let m of f.children)d(m);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Hr&&l&&(p=u[u.length-1])instanceof Hr&&f.lines+p.lines<=32?(l+=f.lines,c+=f.length+1,u[u.length-1]=new Hr(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>s&&h(),l+=f.lines,c+=f.length+1,u.push(f))}function h(){l!=0&&(a.push(u.length==1?u[0]:hc.from(u,c)),c=-1,l=u.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new hc(a,n)}}jn.empty=new Hr([""],0);function cft(t){let e=-1;for(let n of t)e+=n.length+1;return e}function tE(t,e,n=0,r=1e9){for(let s=0,i=0,o=!0;i<t.length&&s<=r;i++){let a=t[i],l=s+a.length;l>=n&&(l>r&&(a=a.slice(0,r-s)),s<n&&(a=a.slice(n-s)),o?(e[e.length-1]+=a,o=!1):e.push(a)),s=l+1}return e}function FW(t,e,n){return tE(t,[""],e,n)}class qv{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Hr?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],i=this.offsets[r],o=i>>1,a=s instanceof Hr?s.text.length:s.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((i&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Hr){let l=s.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=s.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Hr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class pfe{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new qv(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*n,this.value=s.length<=r?s:n<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class mfe{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:s}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(jn.prototype[Symbol.iterator]=function(){return this.iter()},qv.prototype[Symbol.iterator]=pfe.prototype[Symbol.iterator]=mfe.prototype[Symbol.iterator]=function(){return this});class uft{constructor(e,n,r,s){this.from=e,this.to=n,this.number=r,this.text=s}get length(){return this.to-this.from}}function T0(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Gs(t,e,n=!0,r=!0){return aft(t,e,n,r)}function dft(t){return t>=56320&&t<57344}function hft(t){return t>=55296&&t<56320}function sl(t,e){let n=t.charCodeAt(e);if(!hft(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return dft(r)?(n-55296<<10)+(r-56320)+65536:n}function oj(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ku(t){return t<65536?1:2}const UO=/\r\n?|\n/;var di=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(di||(di={}));class Nc{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,s=0;n<this.sections.length;){let i=this.sections[n++],o=this.sections[n++];o<0?(e(r,s,i),s+=i):s+=o,r+=i}}iterChangedRanges(e,n=!1){HO(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],s=this.sections[n++];s<0?e.push(r,s):e.push(s,r)}return new Nc(e)}composeDesc(e){return this.empty?e:e.empty?this:gfe(this,e)}mapDesc(e,n=!1){return e.empty?this:zO(this,e,n)}mapPos(e,n=-1,r=di.Simple){let s=0,i=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=s+a;if(l<0){if(c>e)return i+(e-s);i+=a}else{if(r!=di.Simple&&c>=e&&(r==di.TrackDel&&s<e&&c>e||r==di.TrackBefore&&s<e||r==di.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==s||n<0?i:i+l;i+=l}s=c}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return i}touchesRange(e,n=e){for(let r=0,s=0;r<this.sections.length&&s<=n;){let i=this.sections[r++],o=this.sections[r++],a=s+i;if(o>=0&&s<=n&&a>=e)return s<e&&a>n?"cover":!0;s=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],s=this.sections[n++];e+=(e?" ":"")+r+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Nc(e)}static create(e){return new Nc(e)}}class fs extends Nc{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return HO(this,(n,r,s,i,o)=>e=e.replace(s,s+(r-n),o),!1),e}mapDesc(e,n=!1){return zO(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let s=0,i=0;s<n.length;s+=2){let o=n[s],a=n[s+1];if(a>=0){n[s]=a,n[s+1]=o;let l=s>>1;for(;r.length<l;)r.push(jn.empty);r.push(o?e.slice(i,i+o):jn.empty)}i+=o}return new fs(n,r)}compose(e){return this.empty?e:e.empty?this:gfe(this,e,!0)}map(e,n=!1){return e.empty?this:zO(this,e,n,!0)}iterChanges(e,n=!1){HO(this,e,n)}get desc(){return Nc.create(this.sections)}filter(e){let n=[],r=[],s=[],i=new aw(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&i.len==0;){if(i.done)break e;let u=Math.min(i.len,l-a);li(s,u,-1);let d=i.ins==-1?-1:i.off==0?i.ins:0;li(n,u,d),d>0&&Wd(r,n,i.text),i.forward(u),a+=u}let c=e[o++];for(;a<c;){if(i.done)break e;let u=Math.min(i.len,c-a);li(n,u,-1),li(s,u,i.ins==-1?-1:i.off==0?i.ins:0),i.forward(u),a+=u}}return{changes:new fs(n,r),filtered:Nc.create(s)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],s=this.sections[n+1];s<0?e.push(r):s==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let s=[],i=[],o=0,a=null;function l(u=!1){if(!u&&!s.length)return;o<n&&li(s,n-o,-1);let d=new fs(s,i);a=a?a.compose(d.map(a)):d,s=[],i=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof fs){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:h=d,insert:f}=u;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?jn.of(f.split(r||UO)):f:jn.empty,m=p.length;if(d==h&&m==0)return;d<o&&l(),d>o&&li(s,d-o,-1),li(s,h-d,m),Wd(i,s,p),o=h}}return c(e),l(!a),a}static empty(e){return new fs(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let s=0;s<e.length;s++){let i=e[s];if(typeof i=="number")n.push(i,-1);else{if(!Array.isArray(i)||typeof i[0]!="number"||i.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(i.length==1)n.push(i[0],0);else{for(;r.length<s;)r.push(jn.empty);r[s]=jn.of(i.slice(1)),n.push(i[0],r[s].length)}}}return new fs(n,r)}static createSet(e,n){return new fs(e,n)}}function li(t,e,n,r=!1){if(e==0&&n<=0)return;let s=t.length-2;s>=0&&n<=0&&n==t[s+1]?t[s]+=e:s>=0&&e==0&&t[s]==0?t[s+1]+=n:r?(t[s]+=e,t[s+1]+=n):t.push(e,n)}function Wd(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(jn.empty);t.push(n)}}function HO(t,e,n){let r=t.inserted;for(let s=0,i=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)s+=a,i+=a;else{let c=s,u=i,d=jn.empty;for(;c+=a,u+=l,l&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(s,c,i,u,d),s=c,i=u}}}function zO(t,e,n,r=!1){let s=[],i=r?[]:null,o=new aw(t),a=new aw(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);li(s,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(li(s,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(li(s,0,o.ins),i&&Wd(i,s,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;li(s,c,l<o.i?o.ins:0),i&&l<o.i&&Wd(i,s,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return i?fs.createSet(s,i):Nc.create(s);throw new Error("Mismatched change set lengths")}}}function gfe(t,e,n=!1){let r=[],s=n?[]:null,i=new aw(t),o=new aw(e);for(let a=!1;;){if(i.done&&o.done)return s?fs.createSet(r,s):Nc.create(r);if(i.ins==0)li(r,i.len,0,a),i.next();else if(o.len==0&&!o.done)li(r,0,o.ins,a),s&&Wd(s,r,o.text),o.next();else{if(i.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(i.len2,o.len),c=r.length;if(i.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;li(r,l,u,a),s&&u&&Wd(s,r,o.text)}else o.ins==-1?(li(r,i.off?0:i.len,l,a),s&&Wd(s,r,i.textBit(l))):(li(r,i.off?0:i.len,o.off?0:o.ins,a),s&&!o.off&&Wd(s,r,o.text));a=(i.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),i.forward2(l),o.forward(l)}}}}class aw{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?jn.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?jn.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class jf{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,s;return this.empty?r=s=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new jf(r,s,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ot.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ot.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ot.range(e.anchor,e.head)}static create(e,n,r){return new jf(e,n,r)}}class ot{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ot.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ot([this.main],0)}addRange(e,n=!0){return ot.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,ot.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ot(e.ranges.map(n=>jf.fromJSON(n)),e.main)}static single(e,n=e){return new ot([ot.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<e.length;s++){let i=e[s];if(i.empty?i.from<=r:i.from<r)return ot.normalized(e.slice(),n);r=i.to}return new ot(e,n)}static cursor(e,n=0,r,s){return jf.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(s??16777215)<<6)}static range(e,n,r,s){let i=(r??16777215)<<6|(s==null?7:Math.min(6,s));return n<e?jf.create(n,e,48|i):jf.create(e,n,(n>e?8:0)|i)}static normalized(e,n=0){let r=e[n];e.sort((s,i)=>s.from-i.from),n=e.indexOf(r);for(let s=1;s<e.length;s++){let i=e[s],o=e[s-1];if(i.empty?i.from<=o.to:i.from<o.to){let a=o.from,l=Math.max(i.to,o.to);s<=n&&n--,e.splice(--s,2,i.anchor>i.head?ot.range(l,a):ot.range(a,l))}}return new ot(e,n)}}function bfe(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let aj=0;class Ot{constructor(e,n,r,s,i){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=s,this.id=aj++,this.default=e([]),this.extensions=typeof i=="function"?i(this):i}get reader(){return this}static define(e={}){return new Ot(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:lj),!!e.static,e.enables)}of(e){return new nE([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new nE(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new nE(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function lj(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class nE{constructor(e,n,r,s){this.dependencies=e,this.facet=n,this.type=r,this.value=s,this.id=aj++}dynamicSlot(e){var n;let r=this.value,s=this.facet.compareInput,i=this.id,o=e[i]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||VO(d,u)){let f=r(d);if(a?!BW(f,d.values[o],s):!s(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[i];if(p!=null){let m=fC(h,p);if(this.dependencies.every(g=>g instanceof Ot?h.facet(g)===d.facet(g):g instanceof Ls?h.field(g,!1)==d.field(g,!1):!0)||(a?BW(f=r(d),m,s):s(f=r(d),m)))return d.values[o]=m,0}else f=r(d);return d.values[o]=f,1}}}}function BW(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function VO(t,e){let n=!1;for(let r of e)Kv(t,r)&1&&(n=!0);return n}function fft(t,e,n){let r=n.map(l=>t[l.id]),s=n.map(l=>l.type),i=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let d=fC(l,r[u]);if(s[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(l){for(let c of r)Kv(l,c);return l.values[o]=a(l),1},update(l,c){if(!VO(l,i))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=VO(l,r),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&lj(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const K2=Ot.define({static:!0});class Ls{constructor(e,n,r,s,i){this.id=e,this.createF=n,this.updateF=r,this.compareF=s,this.spec=i,this.provides=void 0}static define(e){let n=new Ls(aj++,e.create,e.update,e.compare||((r,s)=>r===s),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(K2).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,s)=>{let i=r.values[n],o=this.updateF(i,s);return this.compareF(i,o)?0:(r.values[n]=o,1)},reconfigure:(r,s)=>{let i=r.facet(K2),o=s.facet(K2),a;return(a=i.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[n]=a.create(r),1):s.config.address[this.id]!=null?(r.values[n]=s.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,K2.of({field:this,create:e})]}get extension(){return this}}const Sf={lowest:4,low:3,default:2,high:1,highest:0};function Iy(t){return e=>new yfe(e,t)}const Dh={highest:Iy(Sf.highest),high:Iy(Sf.high),default:Iy(Sf.default),low:Iy(Sf.low),lowest:Iy(Sf.lowest)};class yfe{constructor(e,n){this.inner=e,this.prec=n}}class fb{of(e){return new WO(this,e)}reconfigure(e){return fb.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class WO{constructor(e,n){this.compartment=e,this.inner=n}}class hC{constructor(e,n,r,s,i,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=s,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let s=[],i=Object.create(null),o=new Map;for(let h of pft(e,n,o))h instanceof Ls?s.push(h):(i[h.facet.id]||(i[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],c=[];for(let h of s)a[h.id]=c.length<<1,c.push(f=>h.slot(f));let u=r?.config.facets;for(let h in i){let f=i[h],p=f[0].facet,m=u&&u[h]||[];if(f.every(g=>g.type==0))if(a[p.id]=l.length<<1|1,lj(m,f))l.push(r.facet(p));else{let g=p.combine(f.map(b=>b.value));l.push(r&&p.compare(g,r.facet(p))?r.facet(p):g)}else{for(let g of f)g.type==0?(a[g.id]=l.length<<1|1,l.push(g.value)):(a[g.id]=c.length<<1,c.push(b=>g.dynamicSlot(b)));a[p.id]=c.length<<1,c.push(g=>fft(g,p,f))}}let d=c.map(h=>h(a));return new hC(e,o,d,a,l,i)}}function pft(t,e,n){let r=[[],[],[],[],[]],s=new Map;function i(o,a){let l=s.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof WO&&n.delete(o.compartment)}if(s.set(o,a),Array.isArray(o))for(let c of o)i(c,a);else if(o instanceof WO){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),i(c,a)}else if(o instanceof yfe)i(o.inner,o.prec);else if(o instanceof Ls)r[a].push(o),o.provides&&i(o.provides,a);else if(o instanceof nE)r[a].push(o),o.facet.extensions&&i(o.facet.extensions,Sf.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);i(c,a)}}return i(t,Sf.default),r.reduce((o,a)=>o.concat(a))}function Kv(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let s=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|s}function fC(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const vfe=Ot.define(),GO=Ot.define({combine:t=>t.some(e=>e),static:!0}),wfe=Ot.define({combine:t=>t.length?t[0]:void 0,static:!0}),xfe=Ot.define(),_fe=Ot.define(),Sfe=Ot.define(),Efe=Ot.define({combine:t=>t.length?t[0]:!1});class Qu{constructor(e,n){this.type=e,this.value=n}static define(){return new mft}}class mft{of(e){return new Qu(this,e)}}class gft{constructor(e){this.map=e}of(e){return new mn(this,e)}}class mn{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new mn(this.type,n)}is(e){return this.type==e}static define(e={}){return new gft(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let s of e){let i=s.map(n);i&&r.push(i)}return r}}mn.reconfigure=mn.define();mn.appendConfig=mn.define();class as{constructor(e,n,r,s,i,o){this.startState=e,this.changes=n,this.selection=r,this.effects=s,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,r&&bfe(r,n.newLength),i.some(a=>a.type==as.time)||(this.annotations=i.concat(as.time.of(Date.now())))}static create(e,n,r,s,i,o){return new as(e,n,r,s,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(as.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}as.time=Qu.define();as.userEvent=Qu.define();as.addToHistory=Qu.define();as.remote=Qu.define();function bft(t,e){let n=[];for(let r=0,s=0;;){let i,o;if(r<t.length&&(s==e.length||e[s]>=t[r]))i=t[r++],o=t[r++];else if(s<e.length)i=e[s++],o=e[s++];else return n;!n.length||n[n.length-1]<i?n.push(i,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function kfe(t,e,n){var r;let s,i,o;return n?(s=e.changes,i=fs.empty(e.changes.length),o=t.changes.compose(e.changes)):(s=e.changes.map(t.changes),i=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(s)),{changes:o,selection:e.selection?e.selection.map(i):(r=t.selection)===null||r===void 0?void 0:r.map(s),effects:mn.mapEffects(t.effects,s).concat(mn.mapEffects(e.effects,i)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function qO(t,e,n){let r=e.selection,s=Bg(e.annotations);return e.userEvent&&(s=s.concat(as.userEvent.of(e.userEvent))),{changes:e.changes instanceof fs?e.changes:fs.of(e.changes||[],n,t.facet(wfe)),selection:r&&(r instanceof ot?r:ot.single(r.anchor,r.head)),effects:Bg(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Cfe(t,e,n){let r=qO(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let i=1;i<e.length;i++){e[i].filter===!1&&(n=!1);let o=!!e[i].sequential;r=kfe(r,qO(t,e[i],o?r.changes.newLength:t.doc.length),o)}let s=as.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return vft(n?yft(s):s)}function yft(t){let e=t.startState,n=!0;for(let s of e.facet(xfe)){let i=s(t);if(i===!1){n=!1;break}Array.isArray(i)&&(n=n===!0?i:bft(n,i))}if(n!==!0){let s,i;if(n===!1)i=t.changes.invertedDesc,s=fs.empty(e.doc.length);else{let o=t.changes.filter(n);s=o.changes,i=o.filtered.mapDesc(o.changes).invertedDesc}t=as.create(e,s,t.selection&&t.selection.map(i),mn.mapEffects(t.effects,i),t.annotations,t.scrollIntoView)}let r=e.facet(_fe);for(let s=r.length-1;s>=0;s--){let i=r[s](t);i instanceof as?t=i:Array.isArray(i)&&i.length==1&&i[0]instanceof as?t=i[0]:t=Cfe(e,Bg(i),!1)}return t}function vft(t){let e=t.startState,n=e.facet(Sfe),r=t;for(let s=n.length-1;s>=0;s--){let i=n[s](t);i&&Object.keys(i).length&&(r=kfe(r,qO(e,i,t.changes.newLength),!0))}return r==t?t:as.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const wft=[];function Bg(t){return t==null?wft:Array.isArray(t)?t:[t]}var ls=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ls||(ls={}));const xft=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let KO;try{KO=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function _ft(t){if(KO)return KO.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||xft.test(n)))return!0}return!1}function Sft(t){return e=>{if(!/\S/.test(e))return ls.Space;if(_ft(e))return ls.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ls.Word;return ls.Other}}class Tn{constructor(e,n,r,s,i,o){this.config=e,this.doc=n,this.selection=r,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Kv(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Kv(this,r),fC(this,r)}update(...e){return Cfe(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:s}=n;for(let a of e.effects)a.is(fb.reconfigure)?(n&&(s=new Map,n.compartments.forEach((l,c)=>s.set(c,l)),n=null),s.set(a.value.compartment,a.value.extension)):a.is(mn.reconfigure)?(n=null,r=a.value):a.is(mn.appendConfig)&&(n=null,r=Bg(r).concat(a.value));let i;n?i=e.startState.values.slice():(n=hC.resolve(r,s,this),i=new Tn(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(GO)?e.newSelection:e.newSelection.asSingle();new Tn(n,e.newDoc,o,i,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ot.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),s=this.changes(r.changes),i=[r.range],o=Bg(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(s);for(let h=0;h<a;h++)i[h]=i[h].map(u);let d=s.mapDesc(c,!0);i.push(l.range.map(d)),s=s.compose(u),o=mn.mapEffects(o,u).concat(mn.mapEffects(Bg(l.effects),d))}return{changes:s,selection:ot.create(i,n.mainIndex),effects:o}}changes(e=[]){return e instanceof fs?e:fs.of(e,this.doc.length,this.facet(Tn.lineSeparator))}toText(e){return jn.of(e.split(this.facet(Tn.lineSeparator)||UO))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Kv(this,n),fC(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let s=e[r];s instanceof Ls&&this.config.address[s.id]!=null&&(n[r]=s.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let i in r)if(Object.prototype.hasOwnProperty.call(e,i)){let o=r[i],a=e[i];s.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Tn.create({doc:e.doc,selection:ot.fromJSON(e.selection),extensions:n.extensions?s.concat([n.extensions]):s})}static create(e={}){let n=hC.resolve(e.extensions||[],new Map),r=e.doc instanceof jn?e.doc:jn.of((e.doc||"").split(n.staticFacet(Tn.lineSeparator)||UO)),s=e.selection?e.selection instanceof ot?e.selection:ot.single(e.selection.anchor,e.selection.head):ot.single(0);return bfe(s,r.length),n.staticFacet(GO)||(s=s.asSingle()),new Tn(n,r,s,n.dynamicSlots.map(()=>null),(i,o)=>o.create(i),null)}get tabSize(){return this.facet(Tn.tabSize)}get lineBreak(){return this.facet(Tn.lineSeparator)||`
`}get readOnly(){return this.facet(Efe)}phrase(e,...n){for(let r of this.facet(Tn.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let i=+(s||1);return!i||i>n.length?r:n[i-1]})),e}languageDataAt(e,n,r=-1){let s=[];for(let i of this.facet(vfe))for(let o of i(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&s.push(o[e]);return s}charCategorizer(e){return Sft(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:s}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Gs(n,o,!1);if(i(n.slice(l,o))!=ls.Word)break;o=l}for(;a<s;){let l=Gs(n,a);if(i(n.slice(a,l))!=ls.Word)break;a=l}return o==a?null:ot.range(o+r,a+r)}}Tn.allowMultipleSelections=GO;Tn.tabSize=Ot.define({combine:t=>t.length?t[0]:4});Tn.lineSeparator=wfe;Tn.readOnly=Efe;Tn.phrases=Ot.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(s=>t[s]==e[s])}});Tn.languageData=vfe;Tn.changeFilter=xfe;Tn.transactionFilter=_fe;Tn.transactionExtender=Sfe;fb.reconfigure=mn.define();function Xp(t,e,n={}){let r={};for(let s of t)for(let i of Object.keys(s)){let o=s[i],a=r[i];if(a===void 0)r[i]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,i))r[i]=n[i](a,o);else throw new Error("Config merge conflict for field "+i)}for(let s in e)r[s]===void 0&&(r[s]=e[s]);return r}class xp{eq(e){return this==e}range(e,n=e){return YO.create(e,n,this)}}xp.prototype.startSide=xp.prototype.endSide=0;xp.prototype.point=!1;xp.prototype.mapMode=di.TrackDel;let YO=class Afe{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new Afe(e,n,r)}};function JO(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class cj{constructor(e,n,r,s){this.from=e,this.to=n,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,s=0){let i=r?this.to:this.from;for(let o=s,a=i.length;;){if(o==a)return o;let l=o+a>>1,c=i[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,r,s){for(let i=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,i);i<o;i++)if(s(this.from[i]+e,this.to[i]+e,this.value[i])===!1)return!1}map(e,n){let r=[],s=[],i=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,h,f;if(u==d){let p=n.mapPos(u,c.startSide,c.mapMode);if(p==null||(h=f=p,c.startSide!=c.endSide&&(f=n.mapPos(u,c.endSide),f<h)))continue}else if(h=n.mapPos(u,c.startSide),f=n.mapPos(d,c.endSide),h>f||h==f&&c.startSide>0&&c.endSide<=0)continue;(f-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(a=Math.max(a,f-h)),r.push(c),s.push(h-o),i.push(f-o))}return{mapped:r.length?new cj(s,i,r,a):null,pos:o}}}class Dn{constructor(e,n,r,s){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=s}static create(e,n,r,s){return new Dn(e,n,r,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:s=0,filterTo:i=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(JO)),this.isEmpty)return n.length?Dn.of(n):this;let a=new Tfe(this,null,-1).goto(0),l=0,c=[],u=new _p;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||s>this.chunkEnd(a.chunkIndex)||i<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||s>a.to||i<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(YO.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Dn.empty:this.nextLayer.update({add:c,filter:o,filterFrom:s,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],s=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)s=Math.max(s,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(s=Math.max(s,u.maxPoint),n.push(u),r.push(d))}}let i=this.nextLayer.map(e);return n.length==0?i:new Dn(r,n,i||Dn.empty,s)}between(e,n,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let i=this.chunkPos[s],o=this.chunk[s];if(n>=i&&e<=i+o.length&&o.between(i,e-i,n-i,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return lw.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return lw.from(e).goto(n)}static compare(e,n,r,s,i=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=i),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=i),l=$W(o,a,r),c=new Ry(o,l,i),u=new Ry(a,l,i);r.iterGaps((d,h,f)=>UW(c,d,u,h,f,s)),r.empty&&r.length==0&&UW(c,0,u,0,0,s)}static eq(e,n,r=0,s){s==null&&(s=999999999);let i=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(i.length!=o.length)return!1;if(!i.length)return!0;let a=$W(i,o),l=new Ry(i,a,0).goto(r),c=new Ry(o,a,0).goto(r);for(;;){if(l.to!=c.to||!XO(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>s)return!0;l.next(),c.next()}}static spans(e,n,r,s,i=-1){let o=new Ry(e,null,i).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);s.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(s.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new _p;for(let s of e instanceof YO?[e]:n?Eft(e):e)r.add(s.from,s.to,s.value);return r.finish()}static join(e){if(!e.length)return Dn.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let s=e[r];s!=Dn.empty;s=s.nextLayer)n=new Dn(s.chunkPos,s.chunk,n,Math.max(s.maxPoint,n.maxPoint));return n}}Dn.empty=new Dn([],[],null,-1);function Eft(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(JO(e,r)>0)return t.slice().sort(JO);e=r}return t}Dn.empty.nextLayer=Dn.empty;class _p{finishChunk(e){this.chunks.push(new cj(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new _p)).add(e,n,r)}addInner(e,n,r){let s=e-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(Dn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Dn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function $W(t,e,n){let r=new Map;for(let i of t)for(let o=0;o<i.chunk.length;o++)i.chunk[o].maxPoint<=0&&r.set(i.chunk[o],i.chunkPos[o]);let s=new Set;for(let i of e)for(let o=0;o<i.chunk.length;o++){let a=r.get(i.chunk[o]);a!=null&&(n?n.mapPos(a):a)==i.chunkPos[o]&&!n?.touchesRange(a,a+i.chunk[o].length)&&s.add(i.chunk[o])}return s}class Tfe{constructor(e,n,r,s=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class lw{constructor(e){this.heap=e}static from(e,n=null,r=-1){let s=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&s.push(new Tfe(o,n,r,i));return s.length==1?s[0]:new lw(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)lN(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)lN(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),lN(this.heap,0)}}}function lN(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let s=t[r];if(r+1<t.length&&s.compare(t[r+1])>=0&&(s=t[r+1],r++),n.compare(s)<0)break;t[r]=n,t[e]=s,e=r}}class Ry{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=lw.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Y2(this.active,e),Y2(this.activeTo,e),Y2(this.activeRank,e),this.minActive=HW(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:s,rank:i}=this.cursor;for(;n<this.activeRank.length&&(i-this.activeRank[n]||s-this.activeTo[n])>0;)n++;J2(this.active,n,r),J2(this.activeTo,n,s),J2(this.activeRank,n,i),e&&J2(e,n,this.cursor.from),this.minActive=HW(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Y2(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let i=this.cursor.value;if(!i.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function UW(t,e,n,r,s,i){t.goto(e),n.goto(r);let o=r+s,a=r,l=r-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,h=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&XO(t.activeForPoint(t.to),n.activeForPoint(n.to))||i.comparePoint(a,h,t.point,n.point):h>a&&!XO(t.active,n.active)&&i.compareRange(a,h,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&i.boundChange&&i.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function XO(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Y2(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function J2(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function HW(t,e){let n=-1,r=1e9;for(let s=0;s<e.length;s++)(e[s]-r||t[s].endSide-t[n].endSide)<0&&(n=s,r=e[s]);return n}function CT(t,e,n=t.length){let r=0;for(let s=0;s<n&&s<t.length;)t.charCodeAt(s)==9?(r+=e-r%e,s++):(r++,s=Gs(t,s));return r}function kft(t,e,n,r){for(let s=0,i=0;;){if(i>=e)return s;if(s==t.length)break;i+=t.charCodeAt(s)==9?n-i%n:1,s=Gs(t,s)}return t.length}const ZO="",zW=typeof Symbol>"u"?"__"+ZO:Symbol.for(ZO),QO=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),VW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class vh{constructor(e,n){this.rules=[];let{finish:r}=n||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function i(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))i(f.split(/,\s*/).map(m=>o.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");i(s(f),p,u,h)}else p!=null&&u.push(f.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(u.length||h)&&l.push((r&&!d&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)i(s(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=VW[zW]||1;return VW[zW]=e+1,ZO+e.toString(36)}static mount(e,n,r){let s=e[QO],i=r&&r.nonce;s?i&&s.setNonce(i):s=new Cft(e,i),s.mount(Array.isArray(n)?n:[n],e)}}let WW=new Map;class Cft{constructor(e,n){let r=e.ownerDocument||e,s=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let i=WW.get(r);if(i)return e[QO]=i;this.sheet=new s.CSSStyleSheet,WW.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[QO]=this}mount(e,n){let r=this.sheet,s=0,i=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<i&&l>-1&&(this.modules.splice(l,1),i--,l=-1),l==-1){if(this.modules.splice(i++,0,a),r)for(let c=0;c<a.rules.length;c++)r.insertRule(a.rules[c],s++)}else{for(;i<l;)s+=this.modules[i++].rules.length;s+=a.rules.length,i++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var wh={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},cw={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Aft=typeof navigator<"u"&&/Mac/.test(navigator.platform),Tft=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Vs=0;Vs<10;Vs++)wh[48+Vs]=wh[96+Vs]=String(Vs);for(var Vs=1;Vs<=24;Vs++)wh[Vs+111]="F"+Vs;for(var Vs=65;Vs<=90;Vs++)wh[Vs]=String.fromCharCode(Vs+32),cw[Vs]=String.fromCharCode(Vs);for(var cN in wh)cw.hasOwnProperty(cN)||(cw[cN]=wh[cN]);function Pft(t){var e=Aft&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Tft&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?cw:wh)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function uw(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function eL(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function rE(t,e){if(!e.anchorNode)return!1;try{return eL(t,e.anchorNode)}catch{return!1}}function dw(t){return t.nodeType==3?Ep(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Yv(t,e,n,r){return n?GW(t,e,n,r,-1)||GW(t,e,n,r,1):!1}function Sp(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function pC(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function GW(t,e,n,r,s){for(;;){if(t==n&&e==r)return!0;if(e==(s<0?0:jc(t))){if(t.nodeName=="DIV")return!1;let i=t.parentNode;if(!i||i.nodeType!=1)return!1;e=Sp(t)+(s<0?0:1),t=i}else if(t.nodeType==1){if(t=t.childNodes[e+(s<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=s<0?jc(t):0}else return!1}}function jc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function AT(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Nft(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Pfe(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function Ift(t,e,n,r,s,i,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let h,f=u==l.body,p=1,m=1;if(f)h=Nft(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let v=u.getBoundingClientRect();({scaleX:p,scaleY:m}=Pfe(u,v)),h={left:v.left,right:v.left+u.clientWidth*p,top:v.top,bottom:v.top+u.clientHeight*m}}let g=0,b=0;if(s=="nearest")e.top<h.top?(b=e.top-(h.top+o),n>0&&e.bottom>h.bottom+b&&(b=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(b=e.bottom-h.bottom+o,n<0&&e.top-b<h.top&&(b=e.top-(h.top+o)));else{let v=e.bottom-e.top,w=h.bottom-h.top;b=(s=="center"&&v<=w?e.top+v/2-w/2:s=="start"||s=="center"&&n<0?e.top-o:e.bottom-w+o)-h.top}if(r=="nearest"?e.left<h.left?(g=e.left-(h.left+i),n>0&&e.right>h.right+g&&(g=e.right-h.right+i)):e.right>h.right&&(g=e.right-h.right+i,n<0&&e.left<h.left+g&&(g=e.left-(h.left+i))):g=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==a?e.left-i:e.right-(h.right-h.left)+i)-h.left,g||b)if(f)c.scrollBy(g,b);else{let v=0,w=0;if(b){let _=u.scrollTop;u.scrollTop+=b/m,w=(u.scrollTop-_)*m}if(g){let _=u.scrollLeft;u.scrollLeft+=g/p,v=(u.scrollLeft-_)*p}e={left:e.left-v,top:e.top-w,right:e.right-v,bottom:e.bottom-w},v&&Math.abs(v-g)<1&&(r="nearest"),w&&Math.abs(w-b)<1&&(s="nearest")}if(f)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function Rft(t){let e=t.ownerDocument,n,r;for(let s=t.parentNode;s&&!(s==e.body||n&&r);)if(s.nodeType==1)!r&&s.scrollHeight>s.clientHeight&&(r=s),!n&&s.scrollWidth>s.clientWidth&&(n=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:n,y:r}}class Oft{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?jc(n):0),r,Math.min(e.focusOffset,r?jc(r):0))}set(e,n,r,s){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=s}}let Hm=null;function Nfe(t){if(t.setActive)return t.setActive();if(Hm)return t.focus(Hm);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Hm==null?{get preventScroll(){return Hm={preventScroll:!0},!0}}:void 0),!Hm){Hm=!1;for(let n=0;n<e.length;){let r=e[n++],s=e[n++],i=e[n++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=i&&(r.scrollLeft=i)}}}let qW;function Ep(t,e,n=e){let r=qW||(qW=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function $g(t,e,n,r){let s={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=r);let i=new KeyboardEvent("keydown",s);i.synthetic=!0,t.dispatchEvent(i);let o=new KeyboardEvent("keyup",s);return o.synthetic=!0,t.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function Lft(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Ife(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Dft(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,jc(n));;)if(r){if(n.nodeType!=1)return!1;let s=n.childNodes[r-1];s.contentEditable=="false"?r--:(n=s,r=jc(n))}else{if(n==t)return!0;r=Sp(n),n=n.parentNode}}function Rfe(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Ofe(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=jc(n)}else if(n.parentNode&&!pC(n))r=Sp(n),n=n.parentNode;else return null}}function Lfe(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!pC(n))r=Sp(n)+1,n=n.parentNode;else return null}}class hi{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new hi(e.parentNode,Sp(e),n)}static after(e,n){return new hi(e.parentNode,Sp(e)+1,n)}}const uj=[];class ir{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,s=null,i;for(let o of this.children){if(o.flags&7){if(!o.dom&&(i=s?s.nextSibling:r.firstChild)){let a=ir.get(i);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(i)}o.sync(e,n),o.flags&=-8}if(i=s?s.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&i!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;i&&i!=o.dom;)i=KW(i);else r.insertBefore(o.dom,i);s=o.dom}for(i=s?s.nextSibling:r.firstChild,i&&n&&n.node==r&&(n.written=!0);i;)i=KW(i)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let s=jc(e)==0?0:n==0?-1:1;for(;;){let i=e.parentNode;if(i==this.dom)break;s==0&&i.firstChild!=i.lastChild&&(e==i.firstChild?s=-1:s=1),e=i}s<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ir.get(r);)r=r.nextSibling;if(!r)return this.length;for(let s=0,i=0;;s++){let o=this.children[s];if(o.dom==r)return i;i+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let s=-1,i=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let d=this.children[l],h=c+d.length;if(c<e&&h>n)return d.domBoundsAround(e,n,c);if(h>=e&&s==-1&&(s=l,i=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=h,c=h+d.breakAfter}return{from:i,to:a<0?r+this.length:a,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=uj){this.markDirty();for(let s=e;s<n;s++){let i=this.children[s];i.parent==this&&r.indexOf(i)<0&&i.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let s=0;s<r.length;s++)r[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Dfe(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,s,i,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ir.prototype.breakAfter=0;function KW(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Dfe{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Mfe(t,e,n,r,s,i,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=i.length?i[i.length-1]:null,h=d?d.breakAfter:o;if(!(e==r&&u&&!o&&!h&&i.length<2&&u.merge(n,s,i.length?d:null,n==0,a,l))){if(r<c.length){let f=c[r];f&&(s<f.length||f.breakAfter&&d?.breakAfter)?(e==r&&(f=f.split(s),s=0),!h&&d&&f.merge(0,s,d,!0,0,l)?i[i.length-1]=f:((s||f.children.length&&!f.children[0].length)&&f.merge(0,s,null,!1,0,l),i.push(f))):f?.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,n>0&&(!o&&i.length&&u.merge(n,u.length,i[0],!1,a,0)?u.breakAfter=i.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<r&&i.length;)if(c[r-1].become(i[i.length-1]))r--,i.pop(),l=i.length?0:a;else if(c[e].become(i[0]))e++,i.shift(),a=i.length?0:l;else break;!i.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||i.length)&&t.replaceChildren(e,r,i)}}function jfe(t,e,n,r,s,i){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let h of r)d+=h.length;t.length+=d,Mfe(t,c,u,a,l,r,0,s,i)}let eo=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},tL=typeof document<"u"?document:{documentElement:{style:{}}};const nL=/Edge\/(\d+)/.exec(eo.userAgent),Ffe=/MSIE \d/.test(eo.userAgent),rL=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(eo.userAgent),TT=!!(Ffe||rL||nL),YW=!TT&&/gecko\/(\d+)/i.test(eo.userAgent),uN=!TT&&/Chrome\/(\d+)/.exec(eo.userAgent),JW="webkitFontSmoothing"in tL.documentElement.style,Bfe=!TT&&/Apple Computer/.test(eo.vendor),XW=Bfe&&(/Mobile\/\w+/.test(eo.userAgent)||eo.maxTouchPoints>2);var Tt={mac:XW||/Mac/.test(eo.platform),windows:/Win/.test(eo.platform),linux:/Linux|X11/.test(eo.platform),ie:TT,ie_version:Ffe?tL.documentMode||6:rL?+rL[1]:nL?+nL[1]:0,gecko:YW,gecko_version:YW?+(/Firefox\/(\d+)/.exec(eo.userAgent)||[0,0])[1]:0,chrome:!!uN,chrome_version:uN?+uN[1]:0,ios:XW,android:/Android\b/.test(eo.userAgent),webkit:JW,safari:Bfe,webkit_version:JW?+(/\bAppleWebKit\/(\d+)/.exec(eo.userAgent)||[0,0])[1]:0,tabSize:tL.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Mft=256;class bl extends ir{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof bl)||this.length-(n-e)+r.length>Mft||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new bl(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new hi(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return jft(this.dom,e,n)}}class Ku extends ir{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let s of n)s.setParent(this)}setAttrs(e){if(Ife(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,s,i,o){return r&&(!(r instanceof Ku&&r.mark.eq(this.mark))||e&&i<=0||n<this.length&&o<=0)?!1:(jfe(this,e,n,r?r.children.slice():[],i-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,s=-1,i=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),s<0&&r>=e&&(s=i),r=l,i++}let o=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Ku(this.mark,n,o)}domAtPos(e){return $fe(this,e)}coordsAt(e,n){return Hfe(this,e,n)}}function jft(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let s=e,i=e,o=0;e==0&&n<0||e==r&&n>=0?Tt.chrome||Tt.gecko||(e?(s--,o=1):i<r&&(i++,o=-1)):n<0?s--:i<r&&i++;let a=Ep(t,s,i).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Tt.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?AT(l,o<0):l||null}class Ff extends ir{static create(e,n,r){return new Ff(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=Ff.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,s,i,o){return r&&(!(r instanceof Ff)||!this.widget.compare(r.widget)||e>0&&i<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Ff&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return jn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,s=this.posAtStart;return r?r.slice(s,s+this.length):jn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?hi.before(this.dom):hi.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let s=this.dom.getClientRects(),i=null;if(!s.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?s.length-1:0;i=s[a],!(e>0?a==0:a==s.length-1||i.top<i.bottom);a+=o?-1:1);return AT(i,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class P0 extends ir{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof P0&&e.side==this.side}split(){return new P0(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?hi.before(this.dom):hi.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return jn.empty}get isHidden(){return!0}}bl.prototype.children=Ff.prototype.children=P0.prototype.children=uj;function $fe(t,e){let n=t.dom,{children:r}=t,s=0;for(let i=0;s<r.length;s++){let o=r[s],a=i+o.length;if(!(a==i&&o.getSide()<=0)){if(e>i&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-i);if(e<=i)break;i=a}}for(let i=s;i>0;i--){let o=r[i-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let i=s;i<r.length;i++){let o=r[i];if(o.dom.parentNode==n)return o.domAtPos(0)}return new hi(n,0)}function Ufe(t,e,n){let r,{children:s}=t;n>0&&e instanceof Ku&&s.length&&(r=s[s.length-1])instanceof Ku&&r.mark.eq(e.mark)?Ufe(r,e.children[0],n-1):(s.push(e),e.setParent(t)),t.length+=e.length}function Hfe(t,e,n){let r=null,s=-1,i=null,o=-1;function a(c,u){for(let d=0,h=0;d<c.children.length&&h<=u;d++){let f=c.children[d],p=h+f.length;p>=u&&(f.children.length?a(f,u-h):(!i||i.isHidden&&n>0)&&(p>u||h==p&&f.getSide()>0)?(i=f,o=u-h):(h<u||h==p&&f.getSide()<0&&!f.isHidden)&&(r=f,s=u-h)),h=p}}a(t,e);let l=(n<0?r:i)||r||i;return l?l.coordsAt(Math.max(0,l==r?s:o),n):Fft(t)}function Fft(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=dw(e);return n[n.length-1]||null}function sL(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const ZW=Object.create(null);function mC(t,e,n){if(t==e)return!0;t||(t=ZW),e||(e=ZW);let r=Object.keys(t),s=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=s.length-(n&&s.indexOf(n)>-1?1:0))return!1;for(let i of r)if(i!=n&&(s.indexOf(i)==-1||t[i]!==e[i]))return!1;return!0}function iL(t,e,n){let r=!1;if(e)for(let s in e)n&&s in n||(r=!0,s=="style"?t.style.cssText="":t.removeAttribute(s));if(n)for(let s in n)e&&e[s]==n[s]||(r=!0,s=="style"?t.style.cssText=n[s]:t.setAttribute(s,n[s]));return r}function Bft(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class pb{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Li=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Li||(Li={}));class In extends xp{constructor(e,n,r,s){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(e){return new cx(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new xh(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,s;if(e.isBlockGap)r=-5e8,s=4e8;else{let{start:i,end:o}=zfe(e,n);r=(i?n?-3e8:-1:5e8)-1,s=(o?n?2e8:1:-6e8)+1}return new xh(e,r,s,n,e.widget||null,!0)}static line(e){return new ux(e)}static set(e,n=!1){return Dn.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}In.none=Dn.empty;class cx extends In{constructor(e){let{start:n,end:r}=zfe(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof cx&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&mC(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}cx.prototype.point=!1;class ux extends In{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ux&&this.spec.class==e.spec.class&&mC(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}ux.prototype.mapMode=di.TrackBefore;ux.prototype.point=!0;class xh extends In{constructor(e,n,r,s,i,o){super(n,r,i,e),this.block=s,this.isReplace=o,this.mapMode=s?n<=0?di.TrackBefore:di.TrackAfter:di.TrackDel}get type(){return this.startSide!=this.endSide?Li.WidgetRange:this.startSide<=0?Li.WidgetBefore:Li.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof xh&&$ft(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}xh.prototype.point=!0;function zfe(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function $ft(t,e){return t==e||!!(t&&e&&t.compare(e))}function sE(t,e,n,r=0){let s=n.length-1;s>=0&&n[s]+r>=t?n[s]=Math.max(n[s],e):n.push(t,e)}class os extends ir{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,s,i,o){if(r){if(!(r instanceof os))return!1;this.dom||r.transferDOM(this)}return s&&this.setDeco(r?r.attrs:null),jfe(this,e,n,r?r.children.slice():[],i,o),!0}split(e){let n=new os;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:s}=this.childPos(e);s&&(n.append(this.children[r].split(s),0),this.children[r].merge(s,this.children[r].length,null,!1,0,0),r++);for(let i=r;i<this.children.length;i++)n.append(this.children[i],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){mC(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){Ufe(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=sL(n,this.attrs||{})),r&&(this.attrs=sL({class:r},this.attrs||{}))}domAtPos(e){return $fe(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(Ife(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(iL(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let s=this.dom.lastChild;for(;s&&ir.get(s)instanceof Ku;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((r=ir.get(s))===null||r===void 0?void 0:r.isEditable)==!1&&(!Tt.ios||!this.children.some(i=>i instanceof bl))){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof bl)||/[^ -~]/.test(r.text))return null;let s=dw(r.dom);if(s.length!=1)return null;e+=s[0].width,n=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=Hfe(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:s}=this.parent.view.viewState,i=r.bottom-r.top;if(Math.abs(i-s.lineHeight)<2&&s.textHeight<i){let o=(i-s.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof os&&this.children.length==0&&e.children.length==0&&mC(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,s=0;r<e.children.length;r++){let i=e.children[r],o=s+i.length;if(o>=n){if(i instanceof os)return i;if(o>n)break}s=o+i.breakAfter}return null}}class Mu extends ir{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,s,i,o){return r&&(!(r instanceof Mu)||!this.widget.compare(r.widget)||e>0&&i<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?hi.before(this.dom):hi.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Mu(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return uj}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):jn.empty}domBoundsAround(){return null}become(e){return e instanceof Mu&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof oL?null:AT(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class oL extends pb{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Jv{constructor(e,n,r,s){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Mu&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new os),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(X2(new P0(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Mu)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:i,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=i,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(X2(new bl(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=0}}span(e,n,r,s){this.buildText(n-e,r,s),this.pos=n,this.openStart<0&&(this.openStart=s)}point(e,n,r,s,i,o){if(this.disallowBlockEffectsFor[o]&&r instanceof xh){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof xh)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Mu(r.widget||N0.block,a,r));else{let l=Ff.create(r.widget||N0.inline,a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&i<=s.length&&(e<n||r.startSide>0),u=!l.isEditable&&(e<n||i>s.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),c&&(d.append(X2(new P0(1),s),i),i=s.length+Math.max(0,i-s.length)),d.append(X2(l,s),i),this.atCursorPos=u,this.pendingBuffer=u?e<n||i>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=i)}static build(e,n,r,s,i){let o=new Jv(e,n,r,i);return o.openEnd=Dn.spans(s,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function X2(t,e){for(let n of e)t=new Ku(n,[t],t.length);return t}class N0 extends pb{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}N0.inline=new N0("span");N0.block=new N0("div");var Er=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Er||(Er={}));const kp=Er.LTR,dj=Er.RTL;function Vfe(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Uft=Vfe("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Hft=Vfe("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),aL=Object.create(null),Hl=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);aL[e]=n,aL[n]=-e}function Wfe(t){return t<=247?Uft[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Hft[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const zft=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Gd{get dir(){return this.level%2?dj:kp}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,s){let i=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(i<0||(s!=0?s<0?a.from<n:a.to>n:e[i].level>a.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}function Gfe(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],s=e[n];if(r.from!=s.from||r.to!=s.to||r.direction!=s.direction||!Gfe(r.inner,s.inner))return!1}return!0}const sr=[];function Vft(t,e,n,r,s){for(let i=0;i<=r.length;i++){let o=i?r[i-1].to:e,a=i<r.length?r[i].from:n,l=i?256:s;for(let c=o,u=l,d=l;c<a;c++){let h=Wfe(t.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),sr[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=o,u=l,d=l;c<a;c++){let h=sr[c];if(h==128)c<a-1&&u==sr[c+1]&&u&24?h=sr[c]=u:sr[c]=256;else if(h==64){let f=c+1;for(;f<a&&sr[f]==64;)f++;let p=c&&u==8||f<n&&sr[f]==8?d==1?1:8:256;for(let m=c;m<f;m++)sr[m]=p;c=f-1}else h==8&&d==1&&(sr[c]=1);u=h,h&7&&(d=h)}}}function Wft(t,e,n,r,s){let i=s==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:n;for(let d=c,h,f,p;d<u;d++)if(f=aL[h=t.charCodeAt(d)])if(f<0){for(let m=a-3;m>=0;m-=3)if(Hl[m+1]==-f){let g=Hl[m+2],b=g&2?s:g&4?g&1?i:s:0;b&&(sr[d]=sr[Hl[m]]=b),a=m;break}}else{if(Hl.length==189)break;Hl[a++]=d,Hl[a++]=h,Hl[a++]=l}else if((p=sr[d])==2||p==1){let m=p==s;l=m?0:1;for(let g=a-3;g>=0;g-=3){let b=Hl[g+2];if(b&2)break;if(m)Hl[g+2]|=2;else{if(b&4)break;Hl[g+2]|=4}}}}}function Gft(t,e,n,r){for(let s=0,i=r;s<=n.length;s++){let o=s?n[s-1].to:t,a=s<n.length?n[s].from:e;for(let l=o;l<a;){let c=sr[l];if(c==256){let u=l+1;for(;;)if(u==a){if(s==n.length)break;u=n[s++].to,a=s<n.length?n[s].from:e}else if(sr[u]==256)u++;else break;let d=i==1,h=(u<e?sr[u]:r)==1,f=d==h?d?1:2:r;for(let p=u,m=s,g=m?n[m-1].to:t;p>l;)p==g&&(p=n[--m].from,g=m?n[m-1].to:t),sr[--p]=f;l=u}else i=c,l++}}}function lL(t,e,n,r,s,i,o){let a=r%2?2:1;if(r%2==s%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==i.length||l<i[c].from){let m=sr[l];m!=a&&(u=!1,d=m==16)}let h=!u&&a==1?[]:null,f=u?r:r+1,p=l;e:for(;;)if(c<i.length&&p==i[c].from){if(d)break e;let m=i[c];if(!u)for(let g=m.to,b=c+1;;){if(g==n)break e;if(b<i.length&&i[b].from==g)g=i[b++].to;else{if(sr[g]==a)break e;break}}if(c++,h)h.push(m);else{m.from>l&&o.push(new Gd(l,m.from,f));let g=m.direction==kp!=!(f%2);cL(t,g?r+1:r,s,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==n||(u?sr[p]!=a:sr[p]==a))break;p++}h?lL(t,l,p,r+1,s,h,o):l<p&&o.push(new Gd(l,p,f)),l=p}else for(let l=n,c=i.length;l>e;){let u=!0,d=!1;if(!c||l>i[c-1].to){let m=sr[l-1];m!=a&&(u=!1,d=m==16)}let h=!u&&a==1?[]:null,f=u?r:r+1,p=l;e:for(;;)if(c&&p==i[c-1].to){if(d)break e;let m=i[--c];if(!u)for(let g=m.from,b=c;;){if(g==e)break e;if(b&&i[b-1].to==g)g=i[--b].from;else{if(sr[g-1]==a)break e;break}}if(h)h.push(m);else{m.to<l&&o.push(new Gd(m.to,l,f));let g=m.direction==kp!=!(f%2);cL(t,g?r+1:r,s,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(u?sr[p-1]!=a:sr[p-1]==a))break;p--}h?lL(t,p,l,r+1,s,h,o):p<l&&o.push(new Gd(p,l,f)),l=p}}function cL(t,e,n,r,s,i,o){let a=e%2?2:1;Vft(t,s,i,r,a),Wft(t,s,i,r,a),Gft(s,i,r,a),lL(t,s,i,e,n,r,o)}function qft(t,e,n){if(!t)return[new Gd(0,0,e==dj?1:0)];if(e==kp&&!n.length&&!zft.test(t))return qfe(t.length);if(n.length)for(;t.length>sr.length;)sr[sr.length]=256;let r=[],s=e==kp?0:1;return cL(t,s,s,n,0,t.length,r),r}function qfe(t){return[new Gd(0,t,0)]}let Kfe="";function Kft(t,e,n,r,s){var i;let o=r.head-t.from,a=Gd.find(e,o,(i=r.bidiLevel)!==null&&i!==void 0?i:-1,r.assoc),l=e[a],c=l.side(s,n);if(o==c){let h=a+=s?1:-1;if(h<0||h>=e.length)return null;l=e[a=h],o=l.side(!s,n),c=l.side(s,n)}let u=Gs(t.text,o,l.forward(s,n));(u<l.from||u>l.to)&&(u=c),Kfe=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(s?e.length-1:0)?null:e[a+(s?1:-1)];return d&&u==c&&d.level+(s?0:1)<l.level?ot.cursor(d.side(!s,n)+t.from,d.forward(s,n)?1:-1,d.level):ot.cursor(u+t.from,l.forward(s,n)?-1:1,l.level)}function Yft(t,e,n){for(let r=e;r<n;r++){let s=Wfe(t.charCodeAt(r));if(s==1)return kp;if(s==2||s==4)return dj}return kp}const Yfe=Ot.define(),Jfe=Ot.define(),Xfe=Ot.define(),Zfe=Ot.define(),uL=Ot.define(),Qfe=Ot.define(),epe=Ot.define(),hj=Ot.define(),fj=Ot.define(),tpe=Ot.define({combine:t=>t.some(e=>e)}),npe=Ot.define({combine:t=>t.some(e=>e)}),rpe=Ot.define();class Ug{constructor(e,n="nearest",r="nearest",s=5,i=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=s,this.xMargin=i,this.isSnapshot=o}map(e){return e.empty?this:new Ug(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ug(ot.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Z2=mn.define({map:(t,e)=>t.map(e)}),spe=mn.define();function Bo(t,e,n){let r=t.facet(Zfe);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Cu=Ot.define({combine:t=>t.length?t[0]:!0});let Jft=0;const iv=Ot.define();class Ks{constructor(e,n,r,s,i){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=s,this.extension=i(this)}static define(e,n){const{eventHandlers:r,eventObservers:s,provide:i,decorations:o}=n||{};return new Ks(Jft++,e,r,s,a=>{let l=[iv.of(a)];return o&&l.push(hw.of(c=>{let u=c.plugin(a);return u?o(u):In.none})),i&&l.push(i(a)),l})}static fromClass(e,n){return Ks.define(r=>new e(r),n)}}class dN{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Bo(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Bo(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Bo(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ipe=Ot.define(),PT=Ot.define(),hw=Ot.define(),ope=Ot.define(),pj=Ot.define(),ape=Ot.define();function QW(t,e){let n=t.state.facet(ape);if(!n.length)return n;let r=n.map(i=>i instanceof Function?i(t):i),s=[];return Dn.spans(r,e.from,e.to,{point(){},span(i,o,a,l){let c=i-e.from,u=o-e.from,d=s;for(let h=a.length-1;h>=0;h--,l--){let f=a[h].spec.bidiIsolate,p;if(f==null&&(f=Yft(e.text,c,u)),l>0&&d.length&&(p=d[d.length-1]).to==c&&p.direction==f)p.to=u,d=p.inner;else{let m={from:c,to:u,direction:f,inner:[]};d.push(m),d=m.inner}}}}),s}const lpe=Ot.define();function mj(t){let e=0,n=0,r=0,s=0;for(let i of t.state.facet(lpe)){let o=i(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(s=Math.max(s,o.bottom)))}return{left:e,right:n,top:r,bottom:s}}const ov=Ot.define();class Ta{constructor(e,n,r,s){this.fromA=e,this.toA=n,this.fromB=r,this.toB=s}join(e){return new Ta(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let s=e[n-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let s=0,i=0,o=0,a=0;;s++){let l=s==e.length?null:e[s],c=o-a,u=l?l.fromB:1e9;for(;i<n.length&&n[i]<u;){let d=n[i],h=n[i+1],f=Math.max(a,d),p=Math.min(u,h);if(f<=p&&new Ta(f+c,p+c,f,p).addToSet(r),h>u)break;i+=2}if(!l)return r;new Ta(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class gC{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=fs.empty(this.startState.doc.length);for(let i of r)this.changes=this.changes.compose(i.changes);let s=[];this.changes.iterChangedRanges((i,o,a,l)=>s.push(new Ta(i,o,a,l))),this.changedRanges=s}static create(e,n,r){return new gC(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class eG extends ir{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=In.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new os],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ta(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?s=this.domChanged.newSel.head:!rpt(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let i=s>-1?Zft(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new Ta(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(Tt.ie||Tt.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=tpt(o,a,e.changes);return r=Ta.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Tt.chrome||Tt.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||s.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Mu&&o.widget instanceof oL&&i.push(o.dom);s.updateGaps(i)}updateChildren(e,n,r){let s=r?r.range.addToSet(e.slice()):e,i=this.childCursor(n);for(let o=s.length-1;;o--){let a=o>=0?s[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,h,f,p,m;if(r&&r.range.fromB<d&&r.range.toB>u){let _=Jv.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),S=Jv.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);f=_.breakAtStart,p=_.openStart,m=S.openEnd;let E=this.compositionView(r);S.breakAtStart?E.breakAfter=1:S.content.length&&E.merge(E.length,E.length,S.content[0],!1,S.openStart,0)&&(E.breakAfter=S.content[0].breakAfter,S.content.shift()),_.content.length&&E.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),h=_.content.concat(E).concat(S.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:m}=Jv.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:g,off:b}=i.findPos(c,1),{i:v,off:w}=i.findPos(l,-1);Mfe(this,v,w,g,b,h,f,p,m)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(spe)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new bl(e.text.nodeValue);n.flags|=8;for(let{deco:s}of e.marks)n=new Ku(s,[n],n.length);let r=new os;return r.append(n,0),r}fixCompositionDOM(e){let n=(i,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=ir.get(i);a&&a!=o&&(a.dom=null),o.setDOM(i)},r=this.childPos(e.range.fromB,1),s=this.children[r.i];n(e.line,s);for(let i=e.marks.length-1;i>=-1;i--)r=s.childPos(r.off,1),s=s.children[r.i],n(i>=0?e.marks[i].node:e.text,s)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,s=r==this.dom,i=!s&&!(this.view.state.facet(Cu)||this.dom.tabIndex>-1)&&rE(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(s||n||i))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Tt.gecko&&a.empty&&!this.hasComposition&&Xft(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new hi(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Yv(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Yv(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Tt.android&&Tt.chrome&&this.dom.contains(u.focusNode)&&npt(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=uw(this.view.root);if(d)if(a.empty){if(Tt.gecko){let h=Qft(l.node,l.offset);if(h&&h!=3){let f=(h==1?Ofe:Lfe)(l.node,l.offset);f&&(l=new hi(f.node,f.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),h.setEnd(c.node,c.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}i&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new hi(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new hi(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Yv(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=uw(e.root),{anchorNode:s,anchorOffset:i}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=os.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(s,i)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let s=e.offset;!r&&s<n.childNodes.length;s++){let i=ir.get(n.childNodes[s]);i instanceof os&&(r=i.domAtPos(0))}for(let s=e.offset-1;!r&&s>=0;s--){let i=ir.get(n.childNodes[s]);i instanceof os&&(r=i.domAtPos(i.length))}return r?new hi(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=ir.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let s=this.children[n];if(r<s.length||s instanceof os)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,s=0;for(let i=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=i-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof os&&!(r instanceof os&&n>=0)))r=a,s=c;else if(r&&c==e&&l==e&&a instanceof Mu&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(r=null)}i=c}return r?r.coordsAt(e-s,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),s=this.children[n];if(!(s instanceof os))return null;for(;s.children.length;){let{i:a,off:l}=s.childPos(r,1);for(;;a++){if(a==s.children.length)return null;if((s=s.children[a]).length)break}r=l}if(!(s instanceof bl))return null;let i=Gs(s.text,r);if(i==r)return null;let o=Ep(s.dom,r,i).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:s}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Er.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(h>s)break;if(c>=r){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,m=p?dw(p):[];if(m.length){let g=m[m.length-1],b=l?g.right-f.left:f.right-g.left;b>a&&(a=b,this.minWidth=i,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Er.RTL:Er.LTR}measureTextSize(){for(let i of this.children)if(i instanceof os){let o=i.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=dw(e.firstChild)[0];n=e.getBoundingClientRect().height,r=i?i.width/27:7,s=i?i.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:s}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new Dfe(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,s=0;;s++){let i=s==n.viewports.length?null:n.viewports[s],o=i?i.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(In.replace({widget:new oL(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!i)break;r=i.to+1}return In.set(e)}updateDeco(){let e=1,n=this.view.state.facet(hw).map(i=>(this.dynamicDecorationMap[e++]=typeof i=="function")?i(this.view):i),r=!1,s=this.view.state.facet(ope).map((i,o)=>{let a=typeof i=="function";return a&&(r=!0),a?i(this.view):i});for(s.length&&(this.dynamicDecorationMap[e++]=r,n.push(Dn.join(s))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(rpe))try{if(c(this.view,e.range,e))return!0}catch(u){Bo(this.view.state,u,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!r)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let i=mj(this.view),o={left:r.left-i.left,top:r.top-i.top,right:r.right+i.right,bottom:r.bottom+i.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;Ift(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Er.LTR)}}function Xft(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function cpe(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=Ofe(n.focusNode,n.focusOffset),s=Lfe(n.focusNode,n.focusOffset),i=r||s;if(s&&r&&s.node!=r.node){let a=ir.get(s.node);if(!a||a instanceof bl&&a.text!=s.node.nodeValue)i=s;else if(t.docView.lastCompositionAfterCursor){let l=ir.get(r.node);!l||l instanceof bl&&l.text!=r.node.nodeValue||(i=s)}}if(t.docView.lastCompositionAfterCursor=i!=r,!i)return null;let o=e-i.offset;return{from:o,to:o+i.node.nodeValue.length,node:i.node}}function Zft(t,e,n){let r=cpe(t,n);if(!r)return null;let{node:s,from:i,to:o}=r,a=s.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,c=new Ta(l.mapPos(i),l.mapPos(o),i,o),u=[];for(let d=s.parentNode;;d=d.parentNode){let h=ir.get(d);if(h instanceof Ku)u.push({node:d,deco:h.mark});else{if(h instanceof os||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:s,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new cx({inclusive:!0,attributes:Bft(d),tagName:d.tagName.toLowerCase()})});else return null}}}function Qft(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let ept=class{constructor(){this.changes=[]}compareRange(e,n){sE(e,n,this.changes)}comparePoint(e,n){sE(e,n,this.changes)}boundChange(e){sE(e,e,this.changes)}};function tpt(t,e,n){let r=new ept;return Dn.compare(t,e,n,r),r.changes}function npt(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function rpt(t,e){let n=!1;return e&&t.iterChangedRanges((r,s)=>{r<e.to&&s>e.from&&(n=!0)}),n}function spt(t,e,n=1){let r=t.charCategorizer(e),s=t.doc.lineAt(e),i=e-s.from;if(s.length==0)return ot.cursor(e);i==0?n=1:i==s.length&&(n=-1);let o=i,a=i;n<0?o=Gs(s.text,i,!1):a=Gs(s.text,i);let l=r(s.text.slice(o,a));for(;o>0;){let c=Gs(s.text,o,!1);if(r(s.text.slice(c,o))!=l)break;o=c}for(;a<s.length;){let c=Gs(s.text,a);if(r(s.text.slice(a,c))!=l)break;a=c}return ot.range(o+s.from,a+s.from)}function ipt(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function opt(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function hN(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function tG(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function nG(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function dL(t,e,n){let r,s,i,o,a=!1,l,c,u,d;for(let p=t.firstChild;p;p=p.nextSibling){let m=dw(p);for(let g=0;g<m.length;g++){let b=m[g];s&&hN(s,b)&&(b=tG(nG(b,s.bottom),s.top));let v=ipt(e,b),w=opt(n,b);if(v==0&&w==0)return p.nodeType==3?rG(p,e,n):dL(p,e,n);if(!r||o>w||o==w&&i>v){r=p,s=b,i=v,o=w;let _=w?n<b.top?-1:1:v?e<b.left?-1:1:0;a=!_||(_>0?g<m.length-1:g>0)}v==0?n>b.bottom&&(!u||u.bottom<b.bottom)?(l=p,u=b):n<b.top&&(!d||d.top>b.top)&&(c=p,d=b):u&&hN(u,b)?u=nG(u,b.bottom):d&&hN(d,b)&&(d=tG(d,b.top))}}if(u&&u.bottom>=n?(r=l,s=u):d&&d.top<=n&&(r=c,s=d),!r)return{node:t,offset:0};let h=Math.max(s.left,Math.min(s.right,e));if(r.nodeType==3)return rG(r,h,n);if(a&&r.contentEditable!="false")return dL(r,h,n);let f=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(s.left+s.right)/2?1:0);return{node:t,offset:f}}function rG(t,e,n){let r=t.nodeValue.length,s=-1,i=1e9,o=0;for(let a=0;a<r;a++){let l=Ep(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<i){let h=e>=(u.left+u.right)/2,f=h;if((Tt.chrome||Tt.gecko)&&Ep(t,a).getBoundingClientRect().left==u.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};s=a+(f?1:0),i=d}}}return{node:t,offset:s>-1?s:o>0?t.nodeValue.length:0}}function upe(t,e,n,r=-1){var s,i;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,h=d-a;if(h<0)return 0;if(h>c)return t.state.doc.length;for(let _=t.viewState.heightOracle.textHeight/2,S=!1;l=t.elementAtHeight(h),l.type!=Li.Text;)for(;h=r>0?l.bottom+_:l.top-_,!(h>=0&&h<=c);){if(S)return n?null:0;S=!0,r=-r}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:sG(t,o,l,u,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:sG(t,o,l,u,d);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,g=m.elementFromPoint(u,d);g&&!t.contentDOM.contains(g)&&(g=null),g||(u=Math.max(o.left+1,Math.min(o.right-1,u)),g=m.elementFromPoint(u,d),g&&!t.contentDOM.contains(g)&&(g=null));let b,v=-1;if(g&&((s=t.docView.nearest(g))===null||s===void 0?void 0:s.isEditable)!=!1){if(p.caretPositionFromPoint){let _=p.caretPositionFromPoint(u,d);_&&({offsetNode:b,offset:v}=_)}else if(p.caretRangeFromPoint){let _=p.caretRangeFromPoint(u,d);_&&({startContainer:b,startOffset:v}=_,(!t.contentDOM.contains(b)||Tt.safari&&apt(b,v,u)||Tt.chrome&&lpt(b,v,u))&&(b=void 0))}b&&(v=Math.min(jc(b),v))}if(!b||!t.docView.dom.contains(b)){let _=os.find(t.docView,f);if(!_)return h>l.top+l.height/2?l.to:l.from;({node:b,offset:v}=dL(_.dom,u,d))}let w=t.docView.nearest(b);if(!w)return null;if(w.isWidget&&((i=w.dom)===null||i===void 0?void 0:i.nodeType)==1){let _=w.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(b,v)+w.posAtStart}function sG(t,e,n,r,s){let i=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((s-n.top-(t.defaultLineHeight-a)*.5)/a);i+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+kft(o,i,t.state.tabSize)}function apt(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let s=t.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Ep(t,r-1,r).getBoundingClientRect().left>n}function lpt(t,e,n){if(e!=0)return!1;for(let s=t;;){let i=s.parentNode;if(!i||i.nodeType!=1||i.firstChild!=s)return!1;if(i.classList.contains("cm-line"))break;s=i}let r=t.nodeType==1?t.getBoundingClientRect():Ep(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function hL(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==Li.Text))return r}return n}function cpt(t,e,n,r){let s=hL(t,e.head),i=!r||s.type!=Li.Text||!(t.lineWrapping||s.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(i){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(s.from),l=t.posAtCoords({x:n==(a==Er.LTR)?o.right-1:o.left+1,y:(i.top+i.bottom)/2});if(l!=null)return ot.cursor(l,n?-1:1)}return ot.cursor(n?s.to:s.from,n?-1:1)}function iG(t,e,n,r){let s=t.state.doc.lineAt(e.head),i=t.bidiSpans(s),o=t.textDirectionAt(s.from);for(let a=e,l=null;;){let c=Kft(s,i,o,a,n),u=Kfe;if(!c){if(s.number==(n?t.state.doc.lines:1))return a;u=`
`,s=t.state.doc.line(s.number+(n?1:-1)),i=t.bidiSpans(s),c=t.visualLineSide(s,!n)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function upt(t,e,n){let r=t.state.charCategorizer(e),s=r(n);return i=>{let o=r(i);return s==ls.Space&&(s=o),s==o}}function dpt(t,e,n,r){let s=e.head,i=n?1:-1;if(s==(n?t.state.doc.length:0))return ot.cursor(s,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(s,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=i<0?c.top:c.bottom;else{let f=t.viewState.lineBlockAt(s);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(s-f.from))),a=(i<0?f.top:f.bottom)+u}let d=l.left+o,h=r??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*i,m=upe(t,{x:d,y:p},!1,i);if(p<l.top||p>l.bottom||(i<0?m<s:m>s)){let g=t.docView.coordsForChar(m),b=!g||p<g.top?-1:1;return ot.cursor(m,b,void 0,o)}}}function iE(t,e,n){for(;;){let r=0;for(let s of t)s.between(e-1,e+1,(i,o,a)=>{if(e>i&&e<o){let l=r||n||(e-i<o-e?-1:1);e=l<0?i:o,r=l}});if(!r)return e}}function fN(t,e,n){let r=iE(t.state.facet(pj).map(s=>s(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:ot.cursor(r,r<n.from?1:-1)}const av="";class hpt{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Tn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=av}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let s=e;;){this.findPointBefore(r,s);let i=this.text.length;this.readNode(s);let o=s.nextSibling;if(o==n)break;let a=ir.get(s),l=ir.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:pC(s))||pC(o)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>i)&&this.lineBreak(),s=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let i=-1,o=1,a;if(this.lineSeparator?(i=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=s.exec(n))&&(i=a.index,o=a[0].length),this.append(n.slice(r,i<0?n.length:i)),i<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=i+o}}readNode(e){if(e.cmIgnore)return;let n=ir.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(fpt(e,r.node,r.offset)?n:0))}}function fpt(t,e,n){for(;;){if(!e||n<jc(e))return!1;if(e==t)return!0;n=Sp(e)+1,e=e.parentNode}}class oG{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class ppt{constructor(e,n,r,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=i||o?[]:bpt(e),l=new hpt(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=ypt(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=i&&i.node==a.focusNode&&i.offset==a.focusOffset||!eL(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!eL(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Tt.ios||Tt.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),h=Math.max(l,c),f=u.from-d,p=u.to-h;(f==0||f==1||d==0)&&(p==0||p==-1||h==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=ot.single(c,l)}}}function dpe(t,e){let n,{newSel:r}=e,s=t.state.selection.main,i=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=s.from,c=null;(i===8||Tt.android&&e.text.length<a-o)&&(l=s.to,c="end");let u=gpt(t.state.doc.sliceString(o,a,av),e.text,l-o,c);u&&(Tt.chrome&&i==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==av+av&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:jn.of(e.text.slice(u.from,u.toB).split(av))})}else r&&(!t.hasFocus&&t.state.facet(Cu)||r.main.eq(s))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!s.empty&&r&&r.main.empty?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,s.to)}:(Tt.mac||Tt.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=ot.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:jn.of([n.insert.toString().replace("."," ")])}):n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,s.to))}:Tt.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=ot.single(r.main.anchor-1,r.main.head-1)),n={from:s.from,to:s.to,insert:jn.of([" "])}),n)return gj(t,n,r,i);if(r&&!r.main.eq(s)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function gj(t,e,n,r=-1){if(Tt.ios&&t.inputState.flushIOSKey(e))return!0;let s=t.state.selection.main;if(Tt.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&t.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&$g(t.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&$g(t.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&$g(t.contentDOM,"Delete",46)))return!0;let i=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=mpt(t,e,n));return t.state.facet(Qfe).some(l=>l(t,e.from,e.to,i,a))||t.dispatch(a()),!0}function mpt(t,e,n){let r,s=t.state,i=s.selection.main;if(e.from>=i.from&&e.to<=i.to&&e.to-e.from>=(i.to-i.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=i.from<e.from?s.sliceDoc(i.from,e.from):"",l=i.to>e.to?s.sliceDoc(e.to,i.to):"";r=s.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=s.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(s.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=i.to&&e.to>=i.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&cpe(t,n.main.head);if(d){let p=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-p}}else u=t.state.doc.lineAt(i.head);let h=i.to-e.to,f=i.to-i.from;r=s.changeByRange(p=>{if(p.from==i.from&&p.to==i.to)return{changes:a,range:l||p.map(a)};let m=p.to-h,g=m-c.length;if(p.to-p.from!=f||t.state.sliceDoc(g,m)!=c||p.to>=u.from&&p.from<=u.to)return{range:p};let b=s.changes({from:g,to:m,insert:e.insert}),v=p.to-i.to;return{changes:b,range:l?ot.range(Math.max(0,l.anchor+v),Math.max(0,l.head+v)):p.map(b)}})}else r={changes:a,selection:l&&s.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),s.update(r,{userEvent:o,scrollIntoView:!0})}function gpt(t,e,n,r){let s=Math.min(t.length,e.length),i=0;for(;i<s&&t.charCodeAt(i)==e.charCodeAt(i);)i++;if(i==s&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,i-Math.min(o,a));n-=o+l-i}if(o<i&&t.length<e.length){let l=n<=i&&n>=o?i-n:0;i-=l,a=i+(a-o),o=i}else if(a<i){let l=n<=i&&n>=a?i-n:0;i-=l,o=i+(o-a),a=i}return{from:i,toA:o,toB:a}}function bpt(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}=t.observer.selectionRange;return n&&(e.push(new oG(n,r)),(s!=n||i!=r)&&e.push(new oG(s,i))),e}function ypt(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?ot.single(n+e,r+e):null}class vpt{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Tt.safari&&e.contentDOM.addEventListener("input",()=>null),Tt.gecko&&Dpt(e.contentDOM.ownerDocument)}handleEvent(e){!Apt(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let s of r.observers)s(this.view,n);for(let s of r.handlers){if(n.defaultPrevented)break;if(s(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=wpt(e),r=this.handlers,s=this.view.contentDOM;for(let i in n)if(i!="scroll"){let o=!n[i].handlers.length,a=r[i];a&&o!=!a.handlers.length&&(s.removeEventListener(i,this.handleEvent),a=null),a||s.addEventListener(i,this.handleEvent,{passive:o})}for(let i in r)i!="scroll"&&!n[i]&&s.removeEventListener(i,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&fpe.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Tt.android&&Tt.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Tt.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=hpe.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||xpt.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,$g(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Tt.safari&&!Tt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function aG(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(s){Bo(n.state,s)}}}function wpt(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let s=r.spec;if(s&&s.domEventHandlers)for(let i in s.domEventHandlers){let o=s.domEventHandlers[i];o&&n(i).handlers.push(aG(r.value,o))}if(s&&s.domEventObservers)for(let i in s.domEventObservers){let o=s.domEventObservers[i];o&&n(i).observers.push(aG(r.value,o))}}for(let r in yl)n(r).handlers.push(yl[r]);for(let r in Ma)n(r).observers.push(Ma[r]);return e}const hpe=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],xpt="dthko",fpe=[16,17,18,20,91,92,224,225],Q2=6;function eS(t){return Math.max(0,t)*.7+8}function _pt(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Spt{constructor(e,n,r,s){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Rft(e.contentDOM),this.atoms=e.state.facet(pj).map(o=>o(e));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Tn.allowMultipleSelections)&&Ept(e,n),this.dragging=Cpt(e,n)&&gpe(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&_pt(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,s=0,i=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:i,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=mj(this.view);e.clientX-l.left<=s+Q2?n=-eS(s-e.clientX):e.clientX+l.right>=o-Q2&&(n=eS(e.clientX-o)),e.clientY-l.top<=i+Q2?r=-eS(i-e.clientY):e.clientY+l.bottom>=a-Q2&&(r=eS(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let s=e.ranges[r],i=null;if(s.empty){let o=iE(this.atoms,s.from,0);o!=s.from&&(i=ot.cursor(o,-1))}else{let o=iE(this.atoms,s.from,-1),a=iE(this.atoms,s.to,1);(o!=s.from||a!=s.to)&&(i=ot.range(s.from==s.anchor?o:a,s.from==s.head?o:a))}i&&(n||(n=e.ranges.slice()),n[r]=i)}return n?ot.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Ept(t,e){let n=t.state.facet(Yfe);return n.length?n[0](e):Tt.mac?e.metaKey:e.ctrlKey}function kpt(t,e){let n=t.state.facet(Jfe);return n.length?n[0](e):Tt.mac?!e.altKey:!e.ctrlKey}function Cpt(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=uw(t.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let i=0;i<s.length;i++){let o=s[i];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Apt(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ir.get(n))&&r.ignoreEvent(e))return!1;return!0}const yl=Object.create(null),Ma=Object.create(null),ppe=Tt.ie&&Tt.ie_version<15||Tt.ios&&Tt.webkit_version<604;function Tpt(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),mpe(t,n.value)},50)}function NT(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function mpe(t,e){e=NT(t.state,hj,e);let{state:n}=t,r,s=1,i=n.toText(e),o=i.lines==n.selection.ranges.length;if(fL!=null&&n.selection.ranges.every(l=>l.empty)&&fL==i.toString()){let l=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?i.line(s++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:ot.cursor(c.from+d.length)}})}else o?r=n.changeByRange(l=>{let c=i.line(s++);return{changes:{from:l.from,to:l.to,insert:c.text},range:ot.cursor(l.from+c.length)}}):r=n.replaceSelection(i);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Ma.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};yl.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ma.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ma.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};yl.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(Xfe))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=Ipt(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new Spt(t,e,n,r)),r&&t.observer.ignore(()=>{Nfe(t.contentDOM);let i=t.root.activeElement;i&&!i.contains(t.contentDOM)&&i.blur()});let s=t.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function lG(t,e,n,r){if(r==1)return ot.cursor(e,n);if(r==2)return spt(t.state,e,n);{let s=os.find(t.docView,e),i=t.state.doc.lineAt(s?s.posAtEnd:e),o=s?s.posAtStart:i.from,a=s?s.posAtEnd:i.to;return a<t.state.doc.length&&a==i.to&&a++,ot.range(o,a)}}let cG=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Ppt(t,e,n,r){let s=os.find(t.docView,e);if(!s)return 1;let i=e-s.posAtStart;if(i==0)return 1;if(i==s.length)return-1;let o=s.coordsAt(i,-1);if(o&&cG(n,r,o))return-1;let a=s.coordsAt(i,1);return a&&cG(n,r,a)?1:o&&o.bottom>=r?-1:1}function uG(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Ppt(t,n,e.clientX,e.clientY)}}const Npt=Tt.ie&&Tt.ie_version<=11;let dG=null,hG=0,fG=0;function gpe(t){if(!Npt)return t.detail;let e=dG,n=fG;return dG=t,fG=Date.now(),hG=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(hG+1)%3:1}function Ipt(t,e){let n=uG(t,e),r=gpe(e),s=t.state.selection;return{update(i){i.docChanged&&(n.pos=i.changes.mapPos(n.pos),s=s.map(i.changes))},get(i,o,a){let l=uG(t,i),c,u=lG(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let d=lG(t,n.pos,n.bias,r),h=Math.min(d.from,u.from),f=Math.max(d.to,u.to);u=h<u.from?ot.range(h,f):ot.range(f,h)}return o?s.replaceRange(s.main.extend(u.from,u.to)):a&&r==1&&s.ranges.length>1&&(c=Rpt(s,l.pos))?c:a?s.addRange(u):ot.create([u])}}}function Rpt(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:s}=t.ranges[n];if(r<=e&&s>=e)return ot.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}yl.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let s=t.docView.nearest(e.target);if(s&&s.isWidget){let i=s.posAtStart,o=i+s.length;(i>=n.to||o<=n.from)&&(n=ot.range(i,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",NT(t.state,fj,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};yl.dragend=t=>(t.inputState.draggedContent=null,!1);function pG(t,e,n,r){if(n=NT(t.state,hj,n),!n)return;let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:i}=t.inputState,o=r&&i&&kpt(t,e)?{from:i.from,to:i.to}:null,a={from:s,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}yl.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),s=0,i=()=>{++s==n.length&&pG(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=i,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),i()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return pG(t,e,r,!0),!0}return!1};yl.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=ppe?null:e.clipboardData;return n?(mpe(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Tpt(t),!1)};function Opt(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function Lpt(t){let e=[],n=[],r=!1;for(let s of t.selection.ranges)s.empty||(e.push(t.sliceDoc(s.from,s.to)),n.push(s));if(!e.length){let s=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>s&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),s=o.number}r=!0}return{text:NT(t,fj,e.join(t.lineBreak)),ranges:n,linewise:r}}let fL=null;yl.copy=yl.cut=(t,e)=>{let{text:n,ranges:r,linewise:s}=Lpt(t.state);if(!n&&!s)return!1;fL=s?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let i=ppe?null:e.clipboardData;return i?(i.clearData(),i.setData("text/plain",n),!0):(Opt(t,n),!1)};const bpe=Qu.define();function ype(t,e){let n=[];for(let r of t.facet(epe)){let s=r(t,e);s&&n.push(s)}return n?t.update({effects:n,annotations:bpe.of(!0)}):null}function vpe(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=ype(t.state,e);n?t.dispatch(n):t.update([])}},10)}Ma.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),vpe(t)};Ma.blur=t=>{t.observer.clearSelectionRange(),vpe(t)};Ma.compositionstart=Ma.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ma.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Tt.chrome&&Tt.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ma.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};yl.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let i=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(i&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return gj(t,{from:l,to:c,insert:t.state.toText(i)},null),!0}}let s;if(Tt.chrome&&Tt.android&&(s=hpe.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let i=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Tt.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Tt.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ma.compositionend(t,e),20),!1};const mG=new Set;function Dpt(t){mG.has(t)||(mG.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const gG=["pre-wrap","normal","pre-line","break-spaces"];let I0=!1;function bG(){I0=!1}class Mpt{constructor(e){this.lineWrapping=e,this.doc=jn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return gG.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let s=e[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(e,n,r,s,i,o){let a=gG.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=s,this.lineLength=i,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class jpt{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class fc{constructor(e,n,r,s,i){this.from=e,this.length=n,this.top=r,this.height=s,this._content=i}get type(){return typeof this._content=="number"?Li.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof xh?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new fc(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var gr=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(gr||(gr={}));const oE=.001;class Di{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>oE&&(I0=!0),this.height=e)}replace(e,n,r){return Di.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,s){let i=this,o=r.doc;for(let a=s.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=s[a],h=i.lineAt(l,gr.ByPosNoHeight,r.setDoc(n),0,0),f=h.to>=c?h:i.lineAt(c,gr.ByPosNoHeight,r,0,0);for(d+=f.to-c,c=f.to;a>0&&h.from<=s[a-1].toA;)l=s[a-1].fromA,u=s[a-1].fromB,a--,l<h.from&&(h=i.lineAt(l,gr.ByPosNoHeight,r,0,0));u+=h.from-l,l=h.from;let p=bj.build(r.setDoc(o),e,u,d);i=bC(i,i.replace(l,c,p))}return i.updateHeight(r,0)}static empty(){return new Ro(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,s=0,i=0;for(;;)if(n==r)if(s>i*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,s-=a.size}else if(i>s*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,i-=a.size}else break;else if(s<i){let a=e[n++];a&&(s+=a.size)}else{let a=e[--r];a&&(i+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new Fpt(Di.of(e.slice(0,n)),o,Di.of(e.slice(r)))}}function bC(t,e){return t==e?t:(t.constructor!=e.constructor&&(I0=!0),e)}Di.prototype.size=1;class wpe extends Di{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,s){return new fc(s,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,s,i){return this.blockAt(0,r,s,i)}forEachLine(e,n,r,s,i,o){e<=i+this.length&&n>=i&&o(this.blockAt(0,r,s,i))}updateHeight(e,n=0,r=!1,s){return s&&s.from<=n&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ro extends wpe{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,s){return new fc(s,this.length,r,this.height,this.breaks)}replace(e,n,r){let s=r[0];return r.length==1&&(s instanceof Ro||s instanceof zs&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof zs?s=new Ro(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Di.of(r)}updateHeight(e,n=0,r=!1,s){return s&&s.from<=n&&s.more?this.setHeight(s.heights[s.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class zs extends Di{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,s=e.doc.lineAt(n+this.length).number,i=s-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*i);o=l/i,this.length>i+1&&(a=(this.height-l)/(this.length-i-1))}else o=this.height/i;return{firstLine:r,lastLine:s,perLine:o,perChar:a}}blockAt(e,n,r,s){let{firstLine:i,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,s);if(n.lineWrapping){let c=s+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,h=Math.max(r,e-d/2);return new fc(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(o-i,Math.floor((e-r)/a))),{from:u,length:d}=n.doc.line(i+c);return new fc(u,d,r+a*c,a,0)}}lineAt(e,n,r,s,i){if(n==gr.ByHeight)return this.blockAt(e,r,s,i);if(n==gr.ByPosNoHeight){let{from:f,to:p}=r.doc.lineAt(e);return new fc(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,i),c=r.doc.lineAt(e),u=a+c.length*l,d=c.number-o,h=s+a*d+l*(c.from-i-d);return new fc(c.from,c.length,Math.max(s,Math.min(h,s+this.height-u)),u,0)}forEachLine(e,n,r,s,i,o){e=Math.max(e,i),n=Math.min(n,i+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,i);for(let u=e,d=s;u<=n;){let h=r.doc.lineAt(u);if(u==e){let p=h.number-a;d+=l*p+c*(e-i-p)}let f=l+c*h.length;o(new fc(h.from,h.length,d,f,0)),d+=f,u=h.to+1}}replace(e,n,r){let s=this.length-n;if(s>0){let i=r[r.length-1];i instanceof zs?r[r.length-1]=new zs(i.length+s):r.push(null,new zs(s-1))}if(e>0){let i=r[0];i instanceof zs?r[0]=new zs(e+i.length):r.unshift(new zs(e-1),null)}return Di.of(r)}decomposeLeft(e,n){n.push(new zs(e-1),null)}decomposeRight(e,n){n.push(null,new zs(this.length-e-1))}updateHeight(e,n=0,r=!1,s){let i=n+this.length;if(s&&s.from<=n+this.length&&s.more){let o=[],a=Math.max(n,s.from),l=-1;for(s.from>n&&o.push(new zs(s.from-n-1).updateHeight(e,n));a<=i&&s.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=s.heights[s.index++];l==-1?l=d:Math.abs(d-l)>=oE&&(l=-2);let h=new Ro(u,d);h.outdated=!1,o.push(h),a+=u+1}a<=i&&o.push(null,new zs(i-a).updateHeight(e,a));let c=Di.of(o);return(l<0||Math.abs(c.height-this.height)>=oE||Math.abs(l-this.heightMetrics(e,n).perLine)>=oE)&&(I0=!0),bC(this,c)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Fpt extends Di{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,s){let i=r+this.left.height;return e<i?this.left.blockAt(e,n,r,s):this.right.blockAt(e,n,i,s+this.left.length+this.break)}lineAt(e,n,r,s,i){let o=s+this.left.height,a=i+this.left.length+this.break,l=n==gr.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,r,s,i):this.right.lineAt(e,n,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==gr.ByPosNoHeight?gr.ByPosNoHeight:gr.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,s,i).join(c)}forEachLine(e,n,r,s,i,o){let a=s+this.left.height,l=i+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,s,i,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let c=this.lineAt(l,gr.ByPos,r,s,i);e<c.from&&this.left.forEachLine(e,c.from-1,r,s,i,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,a,l,o)}}replace(e,n,r){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,n-s,r));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let a of r)i.push(a);if(e>0&&yG(i,o-1),n<this.length){let a=i.length;this.decomposeRight(n,i),yG(i,a)}return Di.of(i)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,s=r+this.break;if(e>=s)return this.right.decomposeRight(e-s,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<s&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Di.of(this.break?[e,null,n]:[e,n]):(this.left=bC(this.left,e),this.right=bC(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,s){let{left:i,right:o}=this,a=n+i.length+this.break,l=null;return s&&s.from<=n+i.length&&s.more?l=i=i.updateHeight(e,n,r,s):i.updateHeight(e,n,r),s&&s.from<=a+o.length&&s.more?l=o=o.updateHeight(e,a,r,s):o.updateHeight(e,a,r),l?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function yG(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof zs&&(r=t[e+1])instanceof zs&&t.splice(e-1,3,new zs(n.length+1+r.length))}const Bpt=5;class bj{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Ro?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Ro(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0,i=r.widget?r.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new wpe(o,s,r)):(o||i||s>=Bpt)&&this.addLineDeco(s,i,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ro(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new zs(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ro)return e;let n=new Ro(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let s=this.ensureLine();s.length+=r,s.collapsed+=r,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Ro)&&!this.isCovered?this.nodes.push(new Ro(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let s of this.nodes)s instanceof Ro&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(e,n,r,s){let i=new bj(r,e);return Dn.spans(n,r,s,i,0),i.finish(r)}}function $pt(t,e,n){let r=new Upt;return Dn.compare(t,e,n,r,0),r.changes}class Upt{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,s){(e<n||r&&r.heightRelevant||s&&s.heightRelevant)&&sE(e,n,this.changes,5)}}function Hpt(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,s=r.defaultView||window,i=Math.max(0,n.left),o=Math.min(s.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(s.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();i=Math.max(i,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=Math.min(c==t.parentNode?s.innerHeight:l,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:i-n.left,right:Math.max(i,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function zpt(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function Vpt(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class pN{constructor(e,n,r,s){this.from=e,this.to=n,this.size=r,this.displaySize=s}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],i=n[r];if(s.from!=i.from||s.to!=i.to||s.size!=i.size)return!1}return!0}draw(e,n){return In.replace({widget:new Wpt(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Wpt extends pb{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class vG{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=wG,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Er.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(PT).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new Mpt(n),this.stateDeco=e.facet(hw).filter(r=>typeof r!="function"),this.heightMap=Di.empty().applyChanges(this.stateDeco,jn.empty,this.heightOracle.setDoc(e.doc),[new Ta(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=In.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let s=r?n.head:n.anchor;if(!e.some(({from:i,to:o})=>s>=i&&s<=o)){let{from:i,to:o}=this.lineBlockAt(s);e.push(new tS(i,o))}}return this.viewports=e.sort((r,s)=>r.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?wG:new yj(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(lv(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(hw).filter(u=>typeof u!="function");let s=e.changedRanges,i=Ta.extendWithRanges(s,$pt(r,this.stateDeco,e?e.changes:fs.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);bG(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),(this.heightMap.height!=o||I0)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(npe)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),s=this.heightOracle,i=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Er.RTL:Er.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:_,scaleY:S}=Pfe(n,a);(_>.005&&Math.abs(this.scaleX-_)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=_,this.scaleY=S,c|=16,o=l=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,h=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=Rfe(e.scrollDOM);let p=(this.printing?Vpt:Hpt)(n,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(l=!0)),!this.inView&&!this.scrollTarget&&!zpt(e.dom))return 0;let v=a.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let _=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(_)&&(o=!0),o||s.lineWrapping&&Math.abs(v-this.contentDOMWidth)>s.charWidth){let{lineHeight:S,charWidth:E,textHeight:k}=e.docView.measureTextSize();o=S>0&&s.refresh(i,S,E,k,v/E,_),o&&(e.docView.minWidth=0,c|=16)}m>0&&g>0?u=Math.max(m,g):m<0&&g<0&&(u=Math.min(m,g)),bG();for(let S of this.viewports){let E=S.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(S);this.heightMap=(o?Di.empty().applyChanges(this.stateDeco,jn.empty,this.heightOracle,[new Ta(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new jpt(S.from,E))}I0&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new tS(s.lineAt(o-r*1e3,gr.ByHeight,i,0,0).from,s.lineAt(a+(1-r)*1e3,gr.ByHeight,i,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=s.lineAt(c,gr.ByPos,i,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?h=d.top:h=d.bottom-u,l=new tS(s.lineAt(h-1e3/2,gr.ByHeight,i,0,0).from,s.lineAt(h+u+1e3/2,gr.ByHeight,i,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),s=n.mapPos(e.to,1);return new tS(this.heightMap.lineAt(r,gr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,gr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,gr.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(n,gr.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||s<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||i>=a+Math.max(10,Math.min(r,250)))&&s>o-2*1e3&&i<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let s of e)n.touchesRange(s.from,s.to)||r.push(new pN(n.mapPos(s.from),n.mapPos(s.to),s.size,s.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,i=s>>1,o=s<<1;if(this.defaultTextDirection!=Er.LTR&&!r)return[];let a=[],l=(u,d,h,f)=>{if(d-u<i)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let b of m)if(b>u&&b<d){l(u,b-10,h,f),l(b+10,d,h,f);return}let g=qpt(e,b=>b.from>=h.from&&b.to<=h.to&&Math.abs(b.from-u)<i&&Math.abs(b.to-d)<i&&!m.some(v=>b.from<v&&b.to>v));if(!g){if(d<h.to&&n&&r&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(ot.cursor(d),!1,!0).head;w>u&&(d=w)}let b=this.gapSize(h,u,d,f),v=r||b<2e6?b:2e6;g=new pN(u,d,b,v)}a.push(g)},c=u=>{if(u.length<o||u.type!=Li.Text)return;let d=Gpt(u.from,u.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(r){let m=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,b;if(h!=null){let v=rS(d,h),w=((this.visibleBottom-this.visibleTop)/2+m)/u.height;g=v-w,b=v+w}else g=(this.visibleTop-u.top-m)/u.height,b=(this.visibleBottom-u.top+m)/u.height;f=nS(d,g),p=nS(d,b)}else{let m=d.total*this.heightOracle.charWidth,g=s*this.heightOracle.charWidth,b=0;if(m>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+b<this.pixelViewport.left&&(b=E.size-E.displaySize);let v=this.pixelViewport.left+b,w=this.pixelViewport.right+b,_,S;if(h!=null){let E=rS(d,h),k=((w-v)/2+g)/m;_=E-k,S=E+k}else _=(v-g)/m,S=(w+g)/m;f=nS(d,_),p=nS(d,S)}f>u.from&&l(u.from,f,u,d),p<u.to&&l(p,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,r,s){let i=rS(s,r)-rS(s,n);return this.heightOracle.lineWrapping?e.height*i:s.total*this.heightOracle.charWidth*i}updateLineGaps(e){pN.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=In.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];Dn.spans(n,this.viewport.from,this.viewport.to,{span(i,o){r.push({from:i,to:o})},point(){}},20);let s=0;if(r.length!=this.visibleRanges.length)s=12;else for(let i=0;i<r.length&&!(s&8);i++){let o=this.visibleRanges[i],a=r[i];(o.from!=a.from||o.to!=a.to)&&(s|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(s|=8))}return this.visibleRanges=r,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||lv(this.heightMap.lineAt(e,gr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||lv(this.heightMap.lineAt(this.scaler.fromDOM(e),gr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return lv(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class tS{constructor(e,n){this.from=e,this.to=n}}function Gpt(t,e,n){let r=[],s=t,i=0;return Dn.spans(n,t,e,{span(){},point(o,a){o>s&&(r.push({from:s,to:o}),i+=o-s),s=a}},20),s<e&&(r.push({from:s,to:e}),i+=e-s),{total:i,ranges:r}}function nS({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let s=0;;s++){let{from:i,to:o}=e[s],a=o-i;if(r<=a)return i+r;r-=a}}function rS(t,e){let n=0;for(let{from:r,to:s}of t.ranges){if(e<=s){n+=e-r;break}n+=s-r}return n/t.total}function qpt(t,e){for(let n of t)if(e(n))return n}const wG={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class yj{constructor(e,n,r){let s=0,i=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=n.lineAt(a,gr.ByPos,e,0,0).top,u=n.lineAt(l,gr.ByPos,e,0,0).bottom;return s+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let a of this.viewports)a.domTop=o+(a.top-i)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),i=a.bottom}toDOM(e){for(let n=0,r=0,s=0;;n++){let i=n<this.viewports.length?this.viewports[n]:null;if(!i||e<i.top)return s+(e-r)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);r=i.bottom,s=i.domBottom}}fromDOM(e){for(let n=0,r=0,s=0;;n++){let i=n<this.viewports.length?this.viewports[n]:null;if(!i||e<i.domTop)return r+(e-s)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);r=i.bottom,s=i.domBottom}}eq(e){return e instanceof yj?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function lv(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new fc(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(s=>lv(s,e)):t._content)}const sS=Ot.define({combine:t=>t.join(" ")}),pL=Ot.define({combine:t=>t.indexOf(!0)>-1}),mL=vh.newName(),xpe=vh.newName(),_pe=vh.newName(),Spe={"&light":"."+xpe,"&dark":"."+_pe};function gL(t,e,n){return new vh(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return t;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):t+" "+r}})}const Kpt=gL("."+mL,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Spe),Ypt={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},mN=Tt.ie&&Tt.ie_version<=11;class Jpt{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Oft,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Tt.ie&&Tt.ie_version<=11||Tt.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Tt.chrome&&Tt.chrome_version<126)&&(this.editContext=new Zpt(e),e.state.facet(Cu)&&(e.contentDOM.editContext=this.editContext.editContext)),mN&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(Cu)?r.root.activeElement!=this.dom:!rE(this.dom,s))return;let i=s.anchorNode&&r.docView.nearest(s.anchorNode);if(i&&i.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Tt.ie&&Tt.ie_version<=11||Tt.android&&Tt.chrome)&&!r.state.selection.main.empty&&s.focusNode&&Yv(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=uw(e.root);if(!n)return!1;let r=Tt.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Xpt(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let s=rE(this.dom,r);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Dft(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Ypt),mN&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),mN&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let s=()=>{let i=this.delayedAndroidKey;i&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=i.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&i.force&&$g(this.dom,i.key,i.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,s=!1;for(let i of e){let o=this.readMutation(i);o&&(o.typeOver&&(s=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:s}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),s=this.selectionChanged&&rE(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new ppt(this.view,e,n,r);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,s=dpe(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=xG(n,e.previousSibling||e.target.previousSibling,-1),s=xG(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Cu)!=e.state.facet(Cu)&&(e.view.contentDOM.editContext=e.state.facet(Cu)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function xG(t,e,n){for(;e;){let r=ir.get(e);if(r&&r.parent==t)return r;let s=e.parentNode;e=s!=t.dom?s:n>0?e.nextSibling:e.previousSibling}return null}function _G(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Yv(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function Xpt(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return _G(t,s)}let n=null;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?_G(t,n):null}class Zpt{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let s=e.state.selection.main,{anchor:i,head:o}=s,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:jn.of(r.text.split(`
`))};if(c.from==this.from&&i<this.from?c.from=i:c.to==this.to&&i>this.to&&(c.to=i),c.from==c.to&&!c.insert.length){let u=ot.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));u.main.eq(s)||e.dispatch({selection:u,userEvent:"select"});return}if((Tt.mac||Tt.android)&&c.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:jn.of([r.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);gj(e,c,ot.single(this.toEditorPos(r.selectionStart,u),this.toEditorPos(r.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let s=[],i=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);i=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||i||new DOMRect,s.push(i)}n.updateCharacterBounds(r.rangeStart,s)},this.handlers.textformatupdate=r=>{let s=[];for(let i of r.getTextFormats()){let o=i.underlineStyle,a=i.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(i.rangeStart),c=this.toEditorPos(i.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;s.push(In.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:spe.of(In.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let s=uw(r.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,s=this.pendingContextChange;return e.changes.iterChanges((i,o,a,l,c)=>{if(r)return;let u=c.length-(o-i);if(s&&o>=s.to)if(s.from==i&&s.to==o&&s.insert.eq(c)){s=this.pendingContextChange=null,n+=u,this.to+=u;return}else s=null,this.revertPending(e.state);if(i+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(i<this.to){if(i<this.from||o>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(i),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),s&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),s=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(r,s)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Rt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(s=>s.forEach(i=>r(i,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Lft(e.parent)||document,this.viewState=new vG(e.state||Tn.create(e)),e.scrollTo&&e.scrollTo.is(Z2)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(iv).map(s=>new dN(s));for(let s of this.plugins)s.update(this);this.observer=new Jpt(this),this.inputState=new vpt(this),this.inputState.ensureHandlers(this.plugins),this.docView=new eG(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof as?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,s,i=this.state;for(let h of e){if(h.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=h.state}if(this.destroyed){this.viewState.state=i;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(bpe))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=ype(i,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(u=null)):this.observer.clear(),i.facet(Tn.phrases)!=this.state.facet(Tn.phrases))return this.setState(i);s=gC.create(this,i,e),s.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Ug(f.empty?f:ot.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Z2)&&(d=f.value.clip(this.state))}this.viewState.update(s,d),this.bidiCache=yC.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),n=this.docView.update(s),this.state.facet(ov)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(sS)!=s.state.facet(sS)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!s.empty)for(let h of this.state.facet(uL))try{h(s)}catch(f){Bo(this.state,f,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!dpe(this,u)&&c.force&&$g(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new vG(e),this.plugins=e.facet(iv).map(r=>new dN(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new eG(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(iv),r=e.state.facet(iv);if(n!=r){let s=[];for(let i of r){let o=n.indexOf(i);if(o<0)s.push(new dN(i));else{let a=this.plugins[o];a.mustUpdate=e,s.push(a)}}for(let i of this.plugins)i.mustUpdate!=e&&i.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Bo(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,s=r.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:o}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Rfe(r))i=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(s);i=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(f=>{try{return f.read(this)}catch(p){return Bo(this.state,p),SG}}),d=gC.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let f=0;f<c.length;f++)if(u[f]!=SG)try{let p=c[f];p.write&&p.write(u[f],this)}catch(p){Bo(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-o;if(p>1||p<-1){s=s+p,r.scrollTop=s/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(uL))a(n)}get themeClasses(){return mL+" "+(this.state.facet(pL)?_pe:xpe)+" "+this.state.facet(sS)}updateAttrs(){let e=EG(this,ipe,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Cu)?"true":"false",class:"cm-content",style:`${Tt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),EG(this,PT,n);let r=this.observer.ignore(()=>{let s=iL(this.contentDOM,this.contentAttrs,n),i=iL(this.dom,this.editorAttrs,e);return s||i});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let s of r.effects)if(s.is(Rt.announce)){n&&(this.announceDOM.textContent=""),n=!1;let i=this.announceDOM.appendChild(document.createElement("div"));i.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(ov);let e=this.state.facet(Rt.cspNonce);vh.mount(this.root,this.styleModules.concat(Kpt).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return fN(this,e,iG(this,e,n,r))}moveByGroup(e,n){return fN(this,e,iG(this,e,n,r=>upt(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),s=this.textDirectionAt(e.from),i=r[n?r.length-1:0];return ot.cursor(i.side(n,s)+e.from,i.forward(!n,s)?1:-1)}moveToLineBoundary(e,n,r=!0){return cpt(this,e,n,r)}moveVertically(e,n,r){return fN(this,e,dpt(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),upe(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(e),i=this.bidiSpans(s),o=i[Gd.find(i,e-s.from,-1,n)];return AT(r,o.dir==Er.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(tpe)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Qpt)return qfe(e.length);let n=this.textDirectionAt(e.from),r;for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n&&(i.fresh||Gfe(i.isolates,r=QW(this,e))))return i.order;r||(r=QW(this,e));let s=qft(e.text,n,r);return this.bidiCache.push(new yC(e.from,e.to,n,r,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Tt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Nfe(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Z2.of(new Ug(typeof e=="number"?ot.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Z2.of(new Ug(ot.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ks.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Ks.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=vh.newName(),s=[sS.of(r),ov.of(gL(`.${r}`,e))];return n&&n.dark&&s.push(pL.of(!0)),s}static baseTheme(e){return Dh.lowest(ov.of(gL("."+mL,e,Spe)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),s=r&&ir.get(r)||ir.get(e);return((n=s?.rootView)===null||n===void 0?void 0:n.view)||null}}Rt.styleModule=ov;Rt.inputHandler=Qfe;Rt.clipboardInputFilter=hj;Rt.clipboardOutputFilter=fj;Rt.scrollHandler=rpe;Rt.focusChangeEffect=epe;Rt.perLineTextDirection=tpe;Rt.exceptionSink=Zfe;Rt.updateListener=uL;Rt.editable=Cu;Rt.mouseSelectionStyle=Xfe;Rt.dragMovesSelection=Jfe;Rt.clickAddsSelectionRange=Yfe;Rt.decorations=hw;Rt.outerDecorations=ope;Rt.atomicRanges=pj;Rt.bidiIsolatedRanges=ape;Rt.scrollMargins=lpe;Rt.darkTheme=pL;Rt.cspNonce=Ot.define({combine:t=>t.length?t[0]:""});Rt.contentAttributes=PT;Rt.editorAttributes=ipe;Rt.lineWrapping=Rt.contentAttributes.of({class:"cm-lineWrapping"});Rt.announce=mn.define();const Qpt=4096,SG={};class yC{constructor(e,n,r,s,i,o){this.from=e,this.to=n,this.dir=r,this.isolates=s,this.fresh=i,this.order=o}static update(e,n){if(n.empty&&!e.some(i=>i.fresh))return e;let r=[],s=e.length?e[e.length-1].dir:Er.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir==s&&!n.touchesRange(o.from,o.to)&&r.push(new yC(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function EG(t,e,n){for(let r=t.state.facet(e),s=r.length-1;s>=0;s--){let i=r[s],o=typeof i=="function"?i(t):i;o&&sL(o,n)}return n}const emt=Tt.mac?"mac":Tt.windows?"win":Tt.linux?"linux":"key";function tmt(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let s,i,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(r="Alt-"+r),i&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function iS(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const nmt=Dh.default(Rt.domEventHandlers({keydown(t,e){return kpe(Epe(e.state),t,e,"editor")}})),IT=Ot.define({enables:nmt}),kG=new WeakMap;function Epe(t){let e=t.facet(IT),n=kG.get(e);return n||kG.set(e,n=imt(e.reduce((r,s)=>r.concat(s),[]))),n}function rmt(t,e,n){return kpe(Epe(t.state),e,t,n)}let Fd=null;const smt=4e3;function imt(t,e=emt){let n=Object.create(null),r=Object.create(null),s=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},i=(o,a,l,c,u)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(b=>tmt(b,e));for(let b=1;b<p.length;b++){let v=p.slice(0,b).join(" ");s(v,!0),f[v]||(f[v]={preventDefault:!0,stopPropagation:!1,run:[w=>{let _=Fd={view:w,prefix:v,scope:o};return setTimeout(()=>{Fd==_&&(Fd=null)},smt),!0}]})}let m=p.join(" ");s(m,!1);let g=f[m]||(f[m]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&g.run.push(l),c&&(g.preventDefault=!0),u&&(g.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in u)u[h].run.push(f=>d(f,bL))}let l=o[e]||o.key;if(l)for(let c of a)i(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&i(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let bL=null;function kpe(t,e,n,r){bL=e;let s=Pft(e),i=sl(s,0),o=ku(i)==s.length&&s!=" ",a="",l=!1,c=!1,u=!1;Fd&&Fd.view==n&&Fd.scope==r&&(a=Fd.prefix+" ",fpe.indexOf(e.keyCode)<0&&(c=!0,Fd=null));let d=new Set,h=g=>{if(g){for(let b of g.run)if(!d.has(b)&&(d.add(b),b(n)))return g.stopPropagation&&(u=!0),!0;g.preventDefault&&(g.stopPropagation&&(u=!0),c=!0)}return!1},f=t[r],p,m;return f&&(h(f[a+iS(s,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Tt.windows&&e.ctrlKey&&e.altKey)&&(p=wh[e.keyCode])&&p!=s?(h(f[a+iS(p,e,!0)])||e.shiftKey&&(m=cw[e.keyCode])!=s&&m!=p&&h(f[a+iS(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+iS(s,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),bL=null,l}class dx{constructor(e,n,r,s,i){this.className=e,this.left=n,this.top=r,this.width=s,this.height=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let s=e.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let i=Cpe(e);return[new dx(n,s.left-i.left,s.top-i.top,null,s.bottom-s.top)]}else return omt(e,n,r)}}function Cpe(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Er.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function CG(t,e,n,r){let s=t.coordsAtPos(e,n*2);if(!s)return r;let i=t.dom.getBoundingClientRect(),o=(s.top+s.bottom)/2,a=t.posAtCoords({x:i.left+1,y:o}),l=t.posAtCoords({x:i.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function omt(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),s=Math.min(n.to,t.viewport.to),i=t.textDirection==Er.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=Cpe(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=a.right-(u?parseInt(u.paddingRight):0),f=hL(t,r),p=hL(t,s),m=f.type==Li.Text?f:null,g=p.type==Li.Text?p:null;if(m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=CG(t,r,1,m)),g&&(t.lineWrapping||p.widgetLineBreaks)&&(g=CG(t,s,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return v(w(n.from,n.to,m));{let S=m?w(n.from,null,m):_(f,!1),E=g?w(null,n.to,g):_(p,!0),k=[];return(m||f).to<(g||p).from-(m&&g?1:0)||f.widgetLineBreaks>1&&S.bottom+t.defaultLineHeight/2<E.top?k.push(b(d,S.bottom,h,E.top)):S.bottom<E.top&&t.elementAtHeight((S.bottom+E.top)/2).type==Li.Text&&(S.bottom=E.top=(S.bottom+E.top)/2),v(S).concat(k).concat(v(E))}function b(S,E,k,x){return new dx(e,S-l.left,E-l.top,k-S,x-E)}function v({top:S,bottom:E,horizontal:k}){let x=[];for(let I=0;I<k.length;I+=2)x.push(b(k[I],S,k[I+1],E));return x}function w(S,E,k){let x=1e9,I=-1e9,R=[];function C(P,U,ee,X,Z){let F=t.coordsAtPos(P,P==k.to?-2:2),M=t.coordsAtPos(ee,ee==k.from?2:-2);!F||!M||(x=Math.min(F.top,M.top,x),I=Math.max(F.bottom,M.bottom,I),Z==Er.LTR?R.push(i&&U?d:F.left,i&&X?h:M.right):R.push(!i&&X?d:M.left,!i&&U?h:F.right))}let T=S??k.from,O=E??k.to;for(let P of t.visibleRanges)if(P.to>T&&P.from<O)for(let U=Math.max(P.from,T),ee=Math.min(P.to,O);;){let X=t.state.doc.lineAt(U);for(let Z of t.bidiSpans(X)){let F=Z.from+X.from,M=Z.to+X.from;if(F>=ee)break;M>U&&C(Math.max(F,U),S==null&&F<=T,Math.min(M,ee),E==null&&M>=O,Z.dir)}if(U=X.to+1,U>=ee)break}return R.length==0&&C(T,S==null,O,E==null,t.textDirection),{top:x,bottom:I,horizontal:R}}function _(S,E){let k=a.top+(E?S.top:S.bottom);return{top:k,bottom:k,horizontal:[]}}}function amt(t,e){return t.constructor==e.constructor&&t.eq(e)}class lmt{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(aE)!=e.state.facet(aE)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(aE);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!amt(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let s of e)s.update&&n&&s.constructor&&this.drawn[r].constructor&&s.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const aE=Ot.define();function Ape(t){return[Ks.define(e=>new lmt(e,t)),aE.of(t)]}const Tpe=!(Tt.ios&&Tt.webkit&&Tt.webkit_version<534),fw=Ot.define({combine(t){return Xp(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function cmt(t={}){return[fw.of(t),umt,dmt,hmt,npe.of(!0)]}function Ppe(t){return t.startState.facet(fw)!=t.state.facet(fw)}const umt=Ape({above:!0,markers(t){let{state:e}=t,n=e.facet(fw),r=[];for(let s of e.selection.ranges){let i=s==e.selection.main;if(s.empty?!i||Tpe:n.drawRangeCursor){let o=i?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=s.empty?s:ot.cursor(s.head,s.head>s.anchor?-1:1);for(let l of dx.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=Ppe(t);return n&&AG(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){AG(e.state,t)},class:"cm-cursorLayer"});function AG(t,e){e.style.animationDuration=t.facet(fw).cursorBlinkRate+"ms"}const dmt=Ape({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:dx.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Ppe(t)},class:"cm-selectionLayer"}),yL={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Tpe&&(yL[".cm-line"].caretColor=yL[".cm-content"].caretColor="transparent !important");const hmt=Dh.highest(Rt.theme(yL)),Npe=mn.define({map(t,e){return t==null?null:e.mapPos(t)}}),cv=Ls.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(Npe)?r.value:n,t)}}),fmt=Ks.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(cv);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(cv)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(cv),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(cv)!=t&&this.view.dispatch({effects:Npe.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function pmt(){return[cv,fmt]}const TG=Ks.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(t){let{view:e}=t,n=e.viewState.editorHeight-e.defaultLineHeight-e.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:`padding-bottom: ${n}px`})}});function mmt(){return[TG,PT.of(t=>{var e;return((e=t.plugin(TG))===null||e===void 0?void 0:e.attrs)||null})]}function gmt(){return ymt}const bmt=In.line({class:"cm-activeLine"}),ymt=Ks.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let s=t.lineBlockAt(r.head);s.from>e&&(n.push(bmt.range(s.from)),e=s.from)}return In.set(n)}},{decorations:t=>t.decorations}),Oy="-10000px";class vmt{constructor(e,n,r,s){this.facet=n,this.createTooltipView=r,this.removeTooltipView=s,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let i=null;this.tooltipViews=this.tooltips.map(o=>i=r(o,i))}update(e,n){var r;let s=e.state.facet(this.facet),i=s.filter(l=>l);if(s===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<i.length;l++){let c=i[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=s,this.tooltips=i,this.tooltipViews=o,!0}}function wmt(t={}){return lE.of(t)}function xmt(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const lE=Ot.define({combine:t=>{var e,n,r;return{position:Tt.ios?"absolute":((e=t.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(s=>s.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(s=>s.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||xmt}}}),PG=new WeakMap,Ipe=Ks.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(lE);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new vmt(t,vj,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(lE);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",n.dom.appendChild(s)}return n.dom.style.position=this.position,n.dom.style.top=Oy,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(Tt.gecko)n=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==Oy&&i.style.left=="0px"){let o=i.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(t=i.width/this.parent.offsetWidth,e=i.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),s=mj(this.view);return{visible:{left:r.left+s.left,top:r.top+s.top,right:r.right-s.right,bottom:r.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((i,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(lE).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:s,scaleY:i}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],h=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1)){u.style.top=Oy;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,m=h.right-h.left,g=(e=PG.get(c))!==null&&e!==void 0?e:h.bottom-h.top,b=c.offset||Smt,v=this.view.textDirection==Er.LTR,w=h.width>r.right-r.left?v?r.left:r.right-h.width:v?Math.max(r.left,Math.min(d.left-(f?14:0)+b.x,r.right-m)):Math.min(Math.max(r.left,d.left-m+(f?14:0)-b.x),r.right-m),_=this.above[a];!l.strictSide&&(_?d.top-g-p-b.y<r.top:d.bottom+g+p+b.y>r.bottom)&&_==r.bottom-d.bottom>d.top-r.top&&(_=this.above[a]=!_);let S=(_?d.top-r.top:r.bottom-d.bottom)-p;if(S<g&&c.resize!==!1){if(S<this.view.defaultLineHeight){u.style.top=Oy;continue}PG.set(c,g),u.style.height=(g=S)/i+"px"}else u.style.height&&(u.style.height="");let E=_?d.top-g-p-b.y:d.bottom+p+b.y,k=w+m;if(c.overlap!==!0)for(let x of o)x.left<k&&x.right>w&&x.top<E+g&&x.bottom>E&&(E=_?x.top-g-2-p:x.bottom+p+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/i+"px",NG(u,(w-t.parent.left)/s)):(u.style.top=E/i+"px",NG(u,w/s)),f){let x=d.left+(v?b.x:-b.x)-(w+14-7);f.style.left=x/s+"px"}c.overlap!==!0&&o.push({left:w,top:E,right:k,bottom:E+g}),u.classList.toggle("cm-tooltip-above",_),u.classList.toggle("cm-tooltip-below",!_),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Oy}},{eventObservers:{scroll(){this.maybeMeasure()}}});function NG(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const _mt=Rt.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Smt={x:0,y:0},vj=Ot.define({enables:[Ipe,_mt]});function Rpe(t,e){let n=t.plugin(Ipe);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const IG=Ot.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function vC(t,e){let n=t.plugin(Ope),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Ope=Ks.fromClass(class{constructor(t){this.input=t.state.facet(wC),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(IG);this.top=new oS(t,!0,e.topContainer),this.bottom=new oS(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(IG);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new oS(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new oS(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(wC);if(n!=this.input){let r=n.filter(l=>l),s=[],i=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),s.push(u),(u.top?i:o).push(u)}this.specs=r,this.panels=s,this.top.sync(i),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Rt.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});let oS=class{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=RG(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=RG(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function RG(t){let e=t.nextSibling;return t.remove(),e}const wC=Ot.define({enables:Ope});class Yu extends xp{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Yu.prototype.elementClass="";Yu.prototype.toDOM=void 0;Yu.prototype.mapMode=di.TrackBefore;Yu.prototype.startSide=Yu.prototype.endSide=-1;Yu.prototype.point=!0;const cE=Ot.define(),Emt=Ot.define(),kmt={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Dn.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Xv=Ot.define();function Cmt(t){return[Lpe(),Xv.of(Object.assign(Object.assign({},kmt),t))]}const OG=Ot.define({combine:t=>t.some(e=>e)});function Lpe(t){return[Amt]}const Amt=Ks.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Xv).map(e=>new DG(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(OG),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(OG)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Dn.iter(this.view.state.facet(cE),this.view.viewport.from),r=[],s=this.gutters.map(i=>new Tmt(i,this.view.viewport,-this.view.documentPadding.top));for(let i of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(i.type)){let o=!0;for(let a of i.type)if(a.type==Li.Text&&o){vL(n,r,a.from);for(let l of s)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of s)l.widget(this.view,a)}else if(i.type==Li.Text){vL(n,r,i.from);for(let o of s)o.line(this.view,i,r)}else if(i.widget)for(let o of s)o.widget(this.view,i);for(let i of s)i.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Xv),n=t.state.facet(Xv),r=t.docChanged||t.heightChanged||t.viewportChanged||!Dn.eq(t.startState.facet(cE),t.state.facet(cE),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let s of this.gutters)s.update(t)&&(r=!0);else{r=!0;let s=[];for(let i of n){let o=e.indexOf(i);o<0?s.push(new DG(this.view,i)):(this.gutters[o].update(t),s.push(this.gutters[o]))}for(let i of this.gutters)i.dom.remove(),s.indexOf(i)<0&&i.destroy();for(let i of s)this.dom.appendChild(i.dom);this.gutters=s}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Rt.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Er.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function LG(t){return Array.isArray(t)?t:[t]}function vL(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Tmt{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Dn.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:s}=this,i=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==s.elements.length){let a=new Dpe(e,o,i,r);s.elements.push(a),s.dom.appendChild(a.dom)}else s.elements[this.i].update(e,o,i,r);this.height=n.bottom,this.i++}line(e,n,r){let s=[];vL(this.cursor,s,n.from),r.length&&(s=s.concat(r));let i=this.gutter.config.lineMarker(e,n,s);i&&s.unshift(i);let o=this.gutter;s.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,s)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),s=r?[r]:null;for(let i of e.state.facet(Emt)){let o=i(e,n.widget,n);o&&(s||(s=[])).push(o)}s&&this.addElement(e,n,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class DG{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,s=>{let i=s.target,o;if(i!=this.dom&&this.dom.contains(i)){for(;i.parentNode!=this.dom;)i=i.parentNode;let l=i.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=s.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,s)&&s.preventDefault()});this.markers=LG(n.markers(e)),n.initialSpacer&&(this.spacer=new Dpe(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=LG(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let r=e.view.viewport;return!Dn.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Dpe{constructor(e,n,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,s)}update(e,n,r,s){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Pmt(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,n){let r="cm-gutterElement",s=this.dom.firstChild;for(let i=0,o=0;;){let a=o,l=i<n.length?n[i++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(s);let d=s.nextSibling;s.remove(),s=d}}if(!l)break;l.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(l.toDOM(e),s)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function Pmt(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const Nmt=Ot.define(),Imt=Ot.define(),pg=Ot.define({combine(t){return Xp(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let s in n){let i=r[s],o=n[s];r[s]=i?(a,l,c)=>i(a,l,c)||o(a,l,c):o}return r}})}});class gN extends Yu{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function bN(t,e){return t.state.facet(pg).formatNumber(e,t.state)}const Rmt=Xv.compute([pg],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Nmt)},lineMarker(e,n,r){return r.some(s=>s.toDOM)?null:new gN(bN(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let s of e.state.facet(Imt)){let i=s(e,n,r);if(i)return i}return null},lineMarkerChange:e=>e.startState.facet(pg)!=e.state.facet(pg),initialSpacer(e){return new gN(bN(e,MG(e.state.doc.lines)))},updateSpacer(e,n){let r=bN(n.view,MG(n.view.state.doc.lines));return r==e.number?e:new gN(r)},domEventHandlers:t.facet(pg).domEventHandlers}));function Omt(t={}){return[pg.of(t),Lpe(),Rmt]}function MG(t){let e=9;for(;e<t;)e=e*10+9;return e}const Lmt=new class extends Yu{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Dmt=cE.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let s=t.doc.lineAt(r.head).from;s>n&&(n=s,e.push(Lmt.range(s)))}return Dn.of(e)});function Mmt(){return Dmt}const jmt=1024;let Fmt=0;class wa{constructor(e,n){this.from=e,this.to=n}}class vn{constructor(e={}){this.id=Fmt++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ho.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}vn.closedBy=new vn({deserialize:t=>t.split(" ")});vn.openedBy=new vn({deserialize:t=>t.split(" ")});vn.group=new vn({deserialize:t=>t.split(" ")});vn.isolate=new vn({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});vn.contextHash=new vn({perNode:!0});vn.lookAhead=new vn({perNode:!0});vn.mounted=new vn({perNode:!0});class pw{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[vn.mounted.id]}}const Bmt=Object.create(null);class ho{constructor(e,n,r,s=0){this.name=e,this.props=n,this.id=r,this.flags=s}static define(e){let n=e.props&&e.props.length?Object.create(null):Bmt,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new ho(e.name||"",n,e.id,r);if(e.props){for(let i of e.props)if(Array.isArray(i)||(i=i(s)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[i[0].id]=i[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(vn.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let s of r.split(" "))n[s]=e[r];return r=>{for(let s=r.prop(vn.group),i=-1;i<(s?s.length:0);i++){let o=n[i<0?r.name:s[i]];if(o)return o}}}}ho.none=new ho("",Object.create(null),0,8);class Mpe{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let s=null;for(let i of e){let o=i(r);o&&(s||(s=Object.assign({},r.props)),s[o[0].id]=o[1])}n.push(s?new ho(r.name,s,r.id,r.flags):r)}return new Mpe(n)}}const aS=new WeakMap,jG=new WeakMap;var Nr;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Nr||(Nr={}));class gs{constructor(e,n,r,s,i){if(this.type=e,this.children=n,this.positions=r,this.length=s,this.props=null,i&&i.length){this.props=Object.create(null);for(let[o,a]of i)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=pw.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let s=r.toString();s&&(n&&(n+=","),n+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new xC(this.topNode,e)}cursorAt(e,n=0,r=0){let s=aS.get(this)||this.topNode,i=new xC(s);return i.moveTo(e,n),aS.set(this,i._tree),i}get topNode(){return new pi(this,0,0,null)}resolve(e,n=0){let r=mw(aS.get(this)||this.topNode,e,n,!1);return aS.set(this,r),r}resolveInner(e,n=0){let r=mw(jG.get(this)||this.topNode,e,n,!0);return jG.set(this,r),r}resolveStack(e,n=0){return Hmt(this,e,n)}iterate(e){let{enter:n,leave:r,from:s=0,to:i=this.length}=e,o=e.mode||0,a=(o&Nr.IncludeAnonymous)>0;for(let l=this.cursor(o|Nr.IncludeAnonymous);;){let c=!1;if(l.from<=i&&l.to>=s&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:_j(ho.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,s)=>new gs(this.type,n,r,s,this.propValues),e.makeTree||((n,r,s)=>new gs(ho.none,n,r,s)))}static build(e){return zmt(e)}}gs.empty=new gs(ho.none,[],[],0);class wj{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new wj(this.buffer,this.index)}}class _h{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return ho.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],s=this.set.types[n],i=s.name;if(/\W/.test(i)&&!s.isError&&(i=JSON.stringify(i)),e+=4,r==e)return i;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,n,r,s,i){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(jpe(i,s,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let s=this.buffer,i=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){i[l++]=s[a++],i[l++]=s[a++]-r;let c=i[l++]=s[a++]-r;i[l++]=s[a++]-e,o=Math.max(o,c)}return new _h(i,o,this.set)}}function jpe(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function mw(t,e,n,r){for(var s;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof pi&&t.index<0?null:t.parent;if(!o)return t;t=o}let i=r?0:Nr.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof pi&&o.index<0&&((s=a.enter(e,n,i))===null||s===void 0?void 0:s.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,i);if(!o)return t;t=o}}class Fpe{cursor(e=0){return new xC(this,e)}getChild(e,n=null,r=null){let s=FG(this,e,n,r);return s.length?s[0]:null}getChildren(e,n=null,r=null){return FG(this,e,n,r)}resolve(e,n=0){return mw(this,e,n,!1)}resolveInner(e,n=0){return mw(this,e,n,!0)}matchContext(e){return wL(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let s=n.lastChild;if(!s||s.to!=n.to)break;s.type.isError&&s.from==s.to?(r=n,n=s.prevSibling):n=s}return r}get node(){return this}get next(){return this.parent}}class pi extends Fpe{constructor(e,n,r,s){super(),this._tree=e,this.from=n,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,s,i=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(jpe(s,r,d,d+u.length)){if(u instanceof _h){if(i&Nr.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,n,r-d,s);if(h>-1)return new vc(new $mt(o,u,e,d),null,h)}else if(i&Nr.IncludeAnonymous||!u.type.isAnonymous||xj(u)){let h;if(!(i&Nr.IgnoreMounts)&&(h=pw.get(u))&&!h.overlay)return new pi(h.tree,d,e,o);let f=new pi(u,d,e,o);return i&Nr.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?u.children.length-1:0,n,r,s)}}}if(i&Nr.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let s;if(!(r&Nr.IgnoreOverlays)&&(s=pw.get(this._tree))&&s.overlay){let i=e-this.from;for(let{from:o,to:a}of s.overlay)if((n>0?o<=i:o<i)&&(n<0?a>=i:a>i))return new pi(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function FG(t,e,n,r){let s=t.cursor(),i=[];if(!s.firstChild())return i;if(n!=null){for(let o=!1;!o;)if(o=s.type.is(n),!s.nextSibling())return i}for(;;){if(r!=null&&s.type.is(r))return i;if(s.type.is(e)&&i.push(s.node),!s.nextSibling())return r==null?i:[]}}function wL(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class $mt{constructor(e,n,r,s){this.parent=e,this.buffer=n,this.index=r,this.start=s}}class vc extends Fpe{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:s}=this.context,i=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.context.start,r);return i<0?null:new vc(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Nr.ExcludeBuffers)return null;let{buffer:s}=this.context,i=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return i<0?null:new vc(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new vc(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new vc(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,s=this.index+4,i=r.buffer[this.index+3];if(i>s){let o=r.buffer[this.index+1];e.push(r.slice(s,i,o)),n.push(0)}return new gs(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Bpe(t){if(!t.length)return null;let e=0,n=t[0];for(let i=1;i<t.length;i++){let o=t[i];(o.from>n.from||o.to<n.to)&&(n=o,e=i)}let r=n instanceof pi&&n.index<0?null:n.parent,s=t.slice();return r?s[e]=r:s.splice(e,1),new Umt(s,n)}class Umt{constructor(e,n){this.heads=e,this.node=n}get next(){return Bpe(this.heads)}}function Hmt(t,e,n){let r=t.resolveInner(e,n),s=null;for(let i=r instanceof pi?r:r.context.parent;i;i=i.parent)if(i.index<0){let o=i.parent;(s||(s=[r])).push(o.resolve(e,n)),i=o}else{let o=pw.get(i.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new pi(o.tree,o.overlay[0].from+i.from,-1,i);(s||(s=[r])).push(mw(a,e,n,!1))}}return s?Bpe(s):r}class xC{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof pi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[e]],this.from=r+s.buffer[e+1],this.to=r+s.buffer[e+2],!0}yield(e){return e?e instanceof pi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:s}=this.buffer,i=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.buffer.start,r);return i<0?!1:(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Nr.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Nr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Nr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let i=0;i<this.index;i++)if(s.buffer.buffer[i+3]<this.index)return!1;({index:n,parent:r}=s)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let i=n+e,o=e<0?-1:r._tree.children.length;i!=o;i+=e){let a=r._tree.children[i];if(this.mode&Nr.IncludeAnonymous||a instanceof _h||!a.type.isAnonymous||xj(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let s=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==s){if(s==this.index)return o;n=o,r=i+1;break e}s=this.stack[--i]}for(let s=r;s<this.stack.length;s++)n=new vc(this.buffer,n,this.stack[s]);return this.bufferNode=new vc(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&n&&n(this),s=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,s=!0}}}matchContext(e){if(!this.buffer)return wL(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let s=e.length-1,i=this.stack.length-1;s>=0;i--){if(i<0)return wL(this._tree,e,s);let o=r[n.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[s]&&e[s]!=o.name)return!1;s--}}return!0}}function xj(t){return t.children.some(e=>e instanceof _h||!e.type.isAnonymous||xj(e))}function zmt(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:s=jmt,reused:i=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new wj(n,n.length):n,l=r.types,c=0,u=0;function d(S,E,k,x,I,R){let{id:C,start:T,end:O,size:P}=a,U=u,ee=c;for(;P<0;)if(a.next(),P==-1){let G=i[C];k.push(G),x.push(T-S);return}else if(P==-3){c=C;return}else if(P==-4){u=C;return}else throw new RangeError(`Unrecognized record size: ${P}`);let X=l[C],Z,F,M=T-S;if(O-T<=s&&(F=g(a.pos-E,I))){let G=new Uint16Array(F.size-F.skip),D=a.pos-F.size,j=G.length;for(;a.pos>D;)j=b(F.start,G,j);Z=new _h(G,O-F.start,r),M=F.start-S}else{let G=a.pos-P;a.next();let D=[],j=[],W=C>=o?C:-1,q=0,ne=O;for(;a.pos>G;)W>=0&&a.id==W&&a.size>=0?(a.end<=ne-s&&(p(D,j,T,q,a.end,ne,W,U,ee),q=D.length,ne=a.end),a.next()):R>2500?h(T,G,D,j):d(T,G,D,j,W,R+1);if(W>=0&&q>0&&q<D.length&&p(D,j,T,q,T,ne,W,U,ee),D.reverse(),j.reverse(),W>-1&&q>0){let te=f(X,ee);Z=_j(X,D,j,0,D.length,0,O-T,te,te)}else Z=m(X,D,j,O-T,U-O,ee)}k.push(Z),x.push(M)}function h(S,E,k,x){let I=[],R=0,C=-1;for(;a.pos>E;){let{id:T,start:O,end:P,size:U}=a;if(U>4)a.next();else{if(C>-1&&O<C)break;C<0&&(C=P-s),I.push(T,O,P),R++,a.next()}}if(R){let T=new Uint16Array(R*4),O=I[I.length-2];for(let P=I.length-3,U=0;P>=0;P-=3)T[U++]=I[P],T[U++]=I[P+1]-O,T[U++]=I[P+2]-O,T[U++]=U;k.push(new _h(T,I[2]-O,r)),x.push(O-S)}}function f(S,E){return(k,x,I)=>{let R=0,C=k.length-1,T,O;if(C>=0&&(T=k[C])instanceof gs){if(!C&&T.type==S&&T.length==I)return T;(O=T.prop(vn.lookAhead))&&(R=x[C]+T.length+O)}return m(S,k,x,I,R,E)}}function p(S,E,k,x,I,R,C,T,O){let P=[],U=[];for(;S.length>x;)P.push(S.pop()),U.push(E.pop()+k-I);S.push(m(r.types[C],P,U,R-I,T-R,O)),E.push(I-k)}function m(S,E,k,x,I,R,C){if(R){let T=[vn.contextHash,R];C=C?[T].concat(C):[T]}if(I>25){let T=[vn.lookAhead,I];C=C?[T].concat(C):[T]}return new gs(S,E,k,x,C)}function g(S,E){let k=a.fork(),x=0,I=0,R=0,C=k.end-s,T={size:0,start:0,skip:0};e:for(let O=k.pos-S;k.pos>O;){let P=k.size;if(k.id==E&&P>=0){T.size=x,T.start=I,T.skip=R,R+=4,x+=4,k.next();continue}let U=k.pos-P;if(P<0||U<O||k.start<C)break;let ee=k.id>=o?4:0,X=k.start;for(k.next();k.pos>U;){if(k.size<0)if(k.size==-3)ee+=4;else break e;else k.id>=o&&(ee+=4);k.next()}I=X,x+=P,R+=ee}return(E<0||x==S)&&(T.size=x,T.start=I,T.skip=R),T.size>4?T:void 0}function b(S,E,k){let{id:x,start:I,end:R,size:C}=a;if(a.next(),C>=0&&x<o){let T=k;if(C>4){let O=a.pos-(C-4);for(;a.pos>O;)k=b(S,E,k)}E[--k]=T,E[--k]=R-S,E[--k]=I-S,E[--k]=x}else C==-3?c=x:C==-4&&(u=x);return k}let v=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,v,w,-1,0);let _=(e=t.length)!==null&&e!==void 0?e:v.length?w[0]+v[0].length:0;return new gs(l[t.topID],v.reverse(),w.reverse(),_)}const BG=new WeakMap;function uE(t,e){if(!t.isAnonymous||e instanceof _h||e.type!=t)return 1;let n=BG.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof gs)){n=1;break}n+=uE(t,r)}BG.set(e,n)}return n}function _j(t,e,n,r,s,i,o,a,l){let c=0;for(let p=r;p<s;p++)c+=uE(t,e[p]);let u=Math.ceil(c*1.5/8),d=[],h=[];function f(p,m,g,b,v){for(let w=g;w<b;){let _=w,S=m[w],E=uE(t,p[w]);for(w++;w<b;w++){let k=uE(t,p[w]);if(E+k>=u)break;E+=k}if(w==_+1){if(E>u){let k=p[_];f(k.children,k.positions,0,k.children.length,m[_]+v);continue}d.push(p[_])}else{let k=m[w-1]+p[w-1].length-S;d.push(_j(t,p,m,_,w,S,k,null,l))}h.push(S+v-i)}}return f(e,n,r,s,0),(a||l)(d,h,o)}class STt{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof vc?this.setBuffer(e.context.buffer,e.index,n):e instanceof pi&&this.map.set(e.tree,n)}get(e){return e instanceof vc?this.getBuffer(e.context.buffer,e.index):e instanceof pi?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ju{constructor(e,n,r,s,i=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=s,this.open=(i?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let s=[new ju(0,e.length,e,0,!1,r)];for(let i of n)i.to>e.length&&s.push(i);return s}static applyChanges(e,n,r=128){if(!n.length)return e;let s=[],i=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||c){let f=Math.max(h.from,l)-c,p=Math.min(h.to,d)-c;h=f>=p?null:new ju(f,p,h.tree,h.offset+c,a>0,!!u)}if(h&&s.push(h),o.to>d)break;o=i<e.length?e[i++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return s}}class Vmt{startParse(e,n,r){return typeof e=="string"&&(e=new Wmt(e)),r=r?r.length?r.map(s=>new wa(s.from,s.to)):[new wa(0,0)]:[new wa(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let s=this.startParse(e,n,r);for(;;){let i=s.advance();if(i)return i}}}class Wmt{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function ETt(t){return(e,n,r,s)=>new qmt(e,t,n,r,s)}class $G{constructor(e,n,r,s,i){this.parser=e,this.parse=n,this.overlay=r,this.target=s,this.from=i}}function UG(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class Gmt{constructor(e,n,r,s,i,o,a){this.parser=e,this.predicate=n,this.mounts=r,this.index=s,this.start=i,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const xL=new vn({perNode:!0});class qmt{constructor(e,n,r,s,i){this.nest=n,this.input=r,this.fragments=s,this.ranges=i,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new gs(r.type,r.children,r.positions,r.length,r.propValues.concat([[xL,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[vn.mounted.id]=new pw(n,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new Jmt(this.fragments),n=null,r=null,s=new xC(new pi(this.baseTree,this.ranges[0].from,0,null),Nr.IncludeAnonymous|Nr.IgnoreMounts);e:for(let i,o;;){let a=!0,l;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)a=!1;else if(e.hasNode(s)){if(n){let c=n.mounts.find(u=>u.frag.from<=s.from&&u.frag.to>=s.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let d=u.from+c.pos,h=u.to+c.pos;d>=s.from&&h<=s.to&&!n.ranges.some(f=>f.from<h&&f.to>d)&&n.ranges.push({from:d,to:h})}}a=!1}else if(r&&(o=Kmt(r.ranges,s.from,s.to)))a=o!=2;else if(!s.type.isAnonymous&&(i=this.nest(s,this.input))&&(s.from<s.to||!i.overlay)){s.tree||Ymt(s);let c=e.findMounts(s.from,i.parser);if(typeof i.overlay=="function")n=new Gmt(i.parser,i.overlay,c,this.inner.length,s.from,s.tree,n);else{let u=VG(this.ranges,i.overlay||(s.from<s.to?[new wa(s.from,s.to)]:[]));u.length&&UG(u),(u.length||!i.overlay)&&this.inner.push(new $G(i.parser,u.length?i.parser.startParse(this.input,WG(c,u),u):i.parser.startParse(""),i.overlay?i.overlay.map(d=>new wa(d.from-s.from,d.to-s.from)):null,s.tree,u.length?u[0].from:s.from)),i.overlay?u.length&&(r={ranges:u,depth:0,prev:r}):a=!1}}else if(n&&(l=n.predicate(s))&&(l===!0&&(l=new wa(s.from,s.to)),l.from<l.to)){let c=n.ranges.length-1;c>=0&&n.ranges[c].to==l.from?n.ranges[c]={from:n.ranges[c].from,to:l.to}:n.ranges.push(l)}if(a&&s.firstChild())n&&n.depth++,r&&r.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(n&&!--n.depth){let c=VG(this.ranges,n.ranges);c.length&&(UG(c),this.inner.splice(n.index,0,new $G(n.parser,n.parser.startParse(this.input,WG(n.mounts,c),c),n.ranges.map(u=>new wa(u.from-n.start,u.to-n.start)),n.target,c[0].from))),n=n.prev}r&&!--r.depth&&(r=r.prev)}}}}function Kmt(t,e,n){for(let r of t){if(r.from>=n)break;if(r.to>e)return r.from<=e&&r.to>=n?2:1}return 0}function HG(t,e,n,r,s,i){if(e<n){let o=t.buffer[e+1];r.push(t.slice(e,n,o)),s.push(o-i)}}function Ymt(t){let{node:e}=t,n=[],r=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let s=t.tree,i=s.children.indexOf(r),o=s.children[i],a=o.buffer,l=[i];function c(u,d,h,f,p,m){let g=n[m],b=[],v=[];HG(o,u,g,b,v,f);let w=a[g+1],_=a[g+2];l.push(b.length);let S=m?c(g+4,a[g+3],o.set.types[a[g]],w,_-w,m-1):e.toTree();return b.push(S),v.push(w-f),HG(o,a[g+3],d,b,v,f),new gs(h,b,v,p)}s.children[i]=c(0,a.length,ho.none,0,o.length,n.length-1);for(let u of l){let d=t.tree.children[u],h=t.tree.positions[u];t.yield(new pi(d,h+t.from,u,t._tree))}}class zG{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(Nr.IncludeAnonymous|Nr.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,Nr.IgnoreOverlays|Nr.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof gs)n=n.children[0];else break}return!1}}class Jmt{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(n=r.tree.prop(xL))!==null&&n!==void 0?n:r.to,this.inner=new zG(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(xL))!==null&&e!==void 0?e:n.to,this.inner=new zG(n.tree,-n.offset)}}findMounts(e,n){var r;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let i=this.inner.cursor.node;i;i=i.parent){let o=(r=i.tree)===null||r===void 0?void 0:r.prop(vn.mounted);if(o&&o.parser==n)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=i.to)break;l.tree==this.curFrag.tree&&s.push({frag:l,pos:i.from-l.offset,mount:o})}}}return s}}function VG(t,e){let n=null,r=e;for(let s=1,i=0;s<t.length;s++){let o=t[s-1].to,a=t[s].from;for(;i<r.length;i++){let l=r[i];if(l.from>=a)break;l.to<=o||(n||(r=n=e.slice()),l.from<o?(n[i]=new wa(l.from,o),l.to>a&&n.splice(i+1,0,new wa(a,l.to))):l.to>a?n[i--]=new wa(a,l.to):n.splice(i--,1))}}return r}function Xmt(t,e,n,r){let s=0,i=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=s==t.length?1e9:o?t[s].to:t[s].from,d=i==e.length?1e9:a?e[i].to:e[i].from;if(o!=a){let h=Math.max(l,n),f=Math.min(u,d,r);h<f&&c.push(new wa(h,f))}if(l=Math.min(u,d),l==1e9)break;u==l&&(o?(o=!1,s++):o=!0),d==l&&(a?(a=!1,i++):a=!0)}return c}function WG(t,e){let n=[];for(let{pos:r,mount:s,frag:i}of t){let o=r+(s.overlay?s.overlay[0].from:0),a=o+s.tree.length,l=Math.max(i.from,o),c=Math.min(i.to,a);if(s.overlay){let u=s.overlay.map(h=>new wa(h.from+r,h.to+r)),d=Xmt(e,u,l,c);for(let h=0,f=l;;h++){let p=h==d.length,m=p?c:d[h].from;if(m>f&&n.push(new ju(f,m,s.tree,-o,i.from>=f||i.openStart,i.to<=m||i.openEnd)),p)break;f=d[h].to}}else n.push(new ju(l,c,s.tree,-o,i.from>=o||i.openStart,i.to<=a||i.openEnd))}return n}let Zmt=0;class ba{constructor(e,n,r,s){this.name=e,this.set=n,this.base=r,this.modified=s,this.id=Zmt++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof ba&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let s=new ba(r,[],null,[]);if(s.set.push(s),n)for(let i of n.set)s.set.push(i);return s}static defineModifier(e){let n=new _C(e);return r=>r.modified.indexOf(n)>-1?r:_C.get(r.base||r,r.modified.concat(n).sort((s,i)=>s.id-i.id))}}let Qmt=0;class _C{constructor(e){this.name=e,this.instances=[],this.id=Qmt++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&egt(n,a.modified));if(r)return r;let s=[],i=new ba(e.name,s,e,n);for(let a of n)a.instances.push(i);let o=tgt(n);for(let a of e.set)if(!a.modified.length)for(let l of o)s.push(_C.get(a,l));return i}}function egt(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function tgt(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,s=e.length;r<s;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function ngt(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let s of n.split(" "))if(s){let i=[],o=2,a=s;for(let d=0;;){if(a=="..."&&d>0&&d+3==s.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+s);if(i.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==s.length)break;let f=s[d++];if(d==s.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+s);a=s.slice(d)}let l=i.length-1,c=i[l];if(!c)throw new RangeError("Invalid path: "+s);let u=new SC(r,o,l>0?i.slice(0,l):null);e[c]=u.sort(e[c])}}return $pe.add(e)}const $pe=new vn;class SC{constructor(e,n,r,s){this.tags=e,this.mode=n,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}SC.empty=new SC([],2,null);function Upe(t,e){let n=Object.create(null);for(let i of t)if(!Array.isArray(i.tag))n[i.tag.id]=i.class;else for(let o of i.tag)n[o.id]=i.class;let{scope:r,all:s=null}=e||{};return{style:i=>{let o=s;for(let a of i)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function rgt(t,e){let n=null;for(let r of t){let s=r.style(e);s&&(n=n?n+" "+s:s)}return n}function sgt(t,e,n,r=0,s=t.length){let i=new igt(r,Array.isArray(e)?e:[e],n);i.highlightRange(t.cursor(),r,s,"",i.highlighters),i.flush(s)}class igt{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,s,i){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(i=this.highlighters.filter(f=>!f.scope||f.scope(o)));let c=s,u=ogt(e)||SC.empty,d=rgt(i,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(s+=(s?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let h=e.tree&&e.tree.prop(vn.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(g=>!g.scope||g.scope(h.tree.type)),m=e.firstChild();for(let g=0,b=a;;g++){let v=g<h.overlay.length?h.overlay[g]:null,w=v?v.from+a:l,_=Math.max(n,b),S=Math.min(r,w);if(_<S&&m)for(;e.from<S&&(this.highlightRange(e,_,S,s,i),this.startSpan(Math.min(S,e.to),c),!(e.to>=w||!e.nextSibling())););if(!v||w>r)break;b=v.to+a,b>n&&(this.highlightRange(f.cursor(),Math.max(n,v.from+a),Math.min(r,b),"",p),this.startSpan(Math.min(r,b),c))}m&&e.parent()}else if(e.firstChild()){h&&(s="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,s,i),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function ogt(t){let e=t.type.prop($pe);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Et=ba.define,lS=Et(),Md=Et(),GG=Et(Md),qG=Et(Md),jd=Et(),cS=Et(jd),yN=Et(jd),ec=Et(),of=Et(ec),zl=Et(),Vl=Et(),_L=Et(),Ly=Et(_L),uS=Et(),qe={comment:lS,lineComment:Et(lS),blockComment:Et(lS),docComment:Et(lS),name:Md,variableName:Et(Md),typeName:GG,tagName:Et(GG),propertyName:qG,attributeName:Et(qG),className:Et(Md),labelName:Et(Md),namespace:Et(Md),macroName:Et(Md),literal:jd,string:cS,docString:Et(cS),character:Et(cS),attributeValue:Et(cS),number:yN,integer:Et(yN),float:Et(yN),bool:Et(jd),regexp:Et(jd),escape:Et(jd),color:Et(jd),url:Et(jd),keyword:zl,self:Et(zl),null:Et(zl),atom:Et(zl),unit:Et(zl),modifier:Et(zl),operatorKeyword:Et(zl),controlKeyword:Et(zl),definitionKeyword:Et(zl),moduleKeyword:Et(zl),operator:Vl,derefOperator:Et(Vl),arithmeticOperator:Et(Vl),logicOperator:Et(Vl),bitwiseOperator:Et(Vl),compareOperator:Et(Vl),updateOperator:Et(Vl),definitionOperator:Et(Vl),typeOperator:Et(Vl),controlOperator:Et(Vl),punctuation:_L,separator:Et(_L),bracket:Ly,angleBracket:Et(Ly),squareBracket:Et(Ly),paren:Et(Ly),brace:Et(Ly),content:ec,heading:of,heading1:Et(of),heading2:Et(of),heading3:Et(of),heading4:Et(of),heading5:Et(of),heading6:Et(of),contentSeparator:Et(ec),list:Et(ec),quote:Et(ec),emphasis:Et(ec),strong:Et(ec),link:Et(ec),monospace:Et(ec),strikethrough:Et(ec),inserted:Et(),deleted:Et(),changed:Et(),invalid:Et(),meta:uS,documentMeta:Et(uS),annotation:Et(uS),processingInstruction:Et(uS),definition:ba.defineModifier("definition"),constant:ba.defineModifier("constant"),function:ba.defineModifier("function"),standard:ba.defineModifier("standard"),local:ba.defineModifier("local"),special:ba.defineModifier("special")};for(let t in qe){let e=qe[t];e instanceof ba&&(e.name=t)}Upe([{tag:qe.link,class:"tok-link"},{tag:qe.heading,class:"tok-heading"},{tag:qe.emphasis,class:"tok-emphasis"},{tag:qe.strong,class:"tok-strong"},{tag:qe.keyword,class:"tok-keyword"},{tag:qe.atom,class:"tok-atom"},{tag:qe.bool,class:"tok-bool"},{tag:qe.url,class:"tok-url"},{tag:qe.labelName,class:"tok-labelName"},{tag:qe.inserted,class:"tok-inserted"},{tag:qe.deleted,class:"tok-deleted"},{tag:qe.literal,class:"tok-literal"},{tag:qe.string,class:"tok-string"},{tag:qe.number,class:"tok-number"},{tag:[qe.regexp,qe.escape,qe.special(qe.string)],class:"tok-string2"},{tag:qe.variableName,class:"tok-variableName"},{tag:qe.local(qe.variableName),class:"tok-variableName tok-local"},{tag:qe.definition(qe.variableName),class:"tok-variableName tok-definition"},{tag:qe.special(qe.variableName),class:"tok-variableName2"},{tag:qe.definition(qe.propertyName),class:"tok-propertyName tok-definition"},{tag:qe.typeName,class:"tok-typeName"},{tag:qe.namespace,class:"tok-namespace"},{tag:qe.className,class:"tok-className"},{tag:qe.macroName,class:"tok-macroName"},{tag:qe.propertyName,class:"tok-propertyName"},{tag:qe.operator,class:"tok-operator"},{tag:qe.comment,class:"tok-comment"},{tag:qe.meta,class:"tok-meta"},{tag:qe.invalid,class:"tok-invalid"},{tag:qe.punctuation,class:"tok-punctuation"}]);var vN;const mg=new vn;function agt(t){return Ot.define({combine:t?e=>e.concat(t):void 0})}const lgt=new vn;class ll{constructor(e,n,r=[],s=""){this.data=e,this.name=s,Tn.prototype.hasOwnProperty("tree")||Object.defineProperty(Tn.prototype,"tree",{get(){return Ys(this)}}),this.parser=n,this.extension=[Sh.of(this),Tn.languageData.of((i,o,a)=>{let l=KG(i,o,a),c=l.type.prop(mg);if(!c)return[];let u=i.facet(c),d=l.type.prop(lgt);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,i)){let p=i.facet(f.facet);return f.type=="replace"?p:p.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return KG(e,n,r).type.prop(mg)==this.data}findRegions(e){let n=e.facet(Sh);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],s=(i,o)=>{if(i.prop(mg)==this.data){r.push({from:o,to:o+i.length});return}let a=i.prop(vn.mounted);if(a){if(a.tree.prop(mg)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+i.length});return}else if(a.overlay){let l=r.length;if(s(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<i.children.length;l++){let c=i.children[l];c instanceof gs&&s(c,i.positions[l]+o)}};return s(Ys(e),0),r}get allowsNesting(){return!0}}ll.setState=mn.define();function KG(t,e,n){let r=t.facet(Sh),s=Ys(t).topNode;if(!r||r.allowsNesting)for(let i=s;i;i=i.enter(e,n,Nr.ExcludeBuffers))i.type.isTop&&(s=i);return s}class SL extends ll{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=agt(e.languageData);return new SL(n,e.parser.configure({props:[mg.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new SL(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ys(t){let e=t.field(ll.state,!1);return e?e.tree:gs.empty}class cgt{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Dy=null;class EC{constructor(e,n,r=[],s,i,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=s,this.treeLen=i,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new EC(e,n,[],gs.empty,0,r,[],null)}startParse(){return this.parser.startParse(new cgt(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=gs.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(ju.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ju.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Dy;Dy=this;try{return e()}finally{Dy=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=YG(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:s,treeLen:i,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,h)=>l.push({fromA:c,toA:u,fromB:d,toB:h})),r=ju.applyChanges(r,l),s=gs.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new EC(this.parser,n,r,s,i,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:i}=this.skipped[r];s<e.to&&i>e.from&&(this.fragments=YG(this.fragments,s,i),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Vmt{createParse(n,r,s){let i=s[0].from,o=s[s.length-1].to;return{parsedPos:i,advance(){let l=Dy;if(l){for(let c of s)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new gs(ho.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Dy}}function YG(t,e,n){return ju.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class R0{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new R0(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=EC.create(e.facet(Sh).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new R0(r)}}ll.state=Ls.define({create:R0.init,update(t,e){for(let n of e.effects)if(n.is(ll.setState))return n.value;return e.startState.facet(Sh)!=e.state.facet(Sh)?R0.init(e.state):t.apply(e)}});let Hpe=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Hpe=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const wN=typeof navigator<"u"&&(!((vN=navigator.scheduling)===null||vN===void 0)&&vN.isInputPending)?()=>navigator.scheduling.isInputPending():null,ugt=Ks.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ll.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ll.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Hpe(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,i=r.field(ll.state);if(i.tree==i.context.tree&&i.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!wN?Math.max(25,e.timeRemaining()-5):1e9),a=i.context.treeLen<s&&r.doc.length>s+1e3,l=i.context.work(()=>wN&&wN()||Date.now()>o,s+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:ll.setState.of(new R0(i.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Bo(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Sh=Ot.define({combine(t){return t.length?t[0]:null},enables:t=>[ll.state,ugt,Rt.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class CTt{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class $s{constructor(e,n,r,s,i,o=void 0){this.name=e,this.alias=n,this.extensions=r,this.filename=s,this.loadFunc=i,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:r}=e;if(!n){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(r)}return new $s(e.name,(e.alias||[]).concat(e.name).map(s=>s.toLowerCase()),e.extensions||[],e.filename,n,r)}static matchFilename(e,n){for(let s of e)if(s.filename&&s.filename.test(n))return s;let r=/\.([^.]+)$/.exec(n);if(r){for(let s of e)if(s.extensions.indexOf(r[1])>-1)return s}return null}static matchLanguageName(e,n,r=!0){n=n.toLowerCase();for(let s of e)if(s.alias.some(i=>i==n))return s;if(r)for(let s of e)for(let i of s.alias){let o=n.indexOf(i);if(o>-1&&(i.length>2||!/\w/.test(n[o-1])&&!/\w/.test(n[o+i.length])))return s}return null}}const dgt=Ot.define(),mb=Ot.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function kC(t){let e=t.facet(mb);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function gw(t,e){let n="",r=t.tabSize,s=t.facet(mb)[0];if(s=="	"){for(;e>=r;)n+="	",e-=r;s=" "}for(let i=0;i<e;i++)n+=s;return n}function Sj(t,e){t instanceof Tn&&(t=new RT(t));for(let r of t.state.facet(dgt)){let s=r(t,e);if(s!==void 0)return s}let n=Ys(t.state);return n.length>=e?fgt(t,n,e):null}class RT{constructor(e,n={}){this.state=e,this.options=n,this.unit=kC(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:i}=this.options;return s!=null&&s>=r.from&&s<=r.to?i&&s==e?{text:"",from:e}:(n<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,n);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,n=1){let{text:r,from:s}=this.lineAt(e,n),i=this.countColumn(r,e-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(i+=o-this.countColumn(r,r.search(/\S|$/))),i}countColumn(e,n=e.length){return CT(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:s}=this.lineAt(e,n),i=this.options.overrideIndentation;if(i){let o=i(s);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const hgt=new vn;function fgt(t,e,n){let r=e.resolveStack(n),s=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(s!=r.node){let i=[];for(let o=s;o&&!(o.from==r.node.from&&o.type==r.node.type);o=o.parent)i.push(o);for(let o=i.length-1;o>=0;o--)r={node:i[o],next:r}}return zpe(r,t,n)}function zpe(t,e,n){for(let r=t;r;r=r.next){let s=mgt(r.node);if(s)return s(Ej.create(e,n,r))}return 0}function pgt(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function mgt(t){let e=t.type.prop(hgt);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(vn.closedBy))){let s=t.lastChild,i=s&&r.indexOf(s.name)>-1;return o=>Vpe(o,!0,1,void 0,i&&!pgt(o)?s.from:void 0)}return t.parent==null?ggt:null}function ggt(){return 0}class Ej extends RT{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new Ej(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(bgt(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return zpe(this.context.next,this.base,this.pos)}}function bgt(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function ygt(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let s=t.options.simulateBreak,i=t.state.doc.lineAt(n.from),o=s==null||s<=i.from?i.to:Math.min(i.to,s);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(i.text.slice(n.to-i.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function ATt({closing:t,align:e=!0,units:n=1}){return r=>Vpe(r,e,n,t)}function Vpe(t,e,n,r,s){let i=t.textAfter,o=i.match(/^\s*/)[0].length,a=r&&i.slice(o,o+r.length)==r||s==t.pos+o,l=e?ygt(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const TTt=t=>t.baseIndent;function PTt({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const vgt=200;function wgt(){return Tn.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,s=n.lineAt(r);if(r>s.from+vgt)return t;let i=n.sliceString(s.from,r);if(!e.some(c=>c.test(i)))return t;let{state:o}=t,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let d=Sj(o,u.from);if(d==null)continue;let h=/^\s*/.exec(u.text)[0],f=gw(o,d);h!=f&&l.push({from:u.from,to:u.from+h.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const xgt=Ot.define(),_gt=new vn;function NTt(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function Sgt(t,e,n){let r=Ys(t);if(r.length<n)return null;let s=r.resolveStack(n,1),i=null;for(let o=s;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(i&&a.from<e)break;let l=a.type.prop(_gt);if(l&&(a.to<r.length-50||r.length==t.doc.length||!Egt(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(i=c)}}return i}function Egt(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function JG(t,e,n){for(let r of t.facet(xgt)){let s=r(t,e,n);if(s)return s}return Sgt(t,e,n)}function Wpe(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Gpe=mn.define({map:Wpe}),kj=mn.define({map:Wpe}),CC=Ls.define({create(){return In.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(Gpe)&&!kgt(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(qpe),s=r?In.replace({widget:new Tgt(r(e.state,n.value))}):XG;t=t.update({add:[s.range(n.value.from,n.value.to)]})}else n.is(kj)&&(t=t.update({filter:(r,s)=>n.value.from!=r||n.value.to!=s,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(s,i)=>{s<r&&i>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(s,i)=>i<=r||s>=r}))}return t},provide:t=>Rt.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,s)=>{n.push(r,s)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],s=t[n++];if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(XG.range(r,s))}return In.set(e,!0)}});function EL(t,e,n){var r;let s=null;return(r=t.field(CC,!1))===null||r===void 0||r.between(e,n,(i,o)=>{(!s||s.from>i)&&(s={from:i,to:o})}),s}function kgt(t,e,n){let r=!1;return t.between(e,e,(s,i)=>{s==e&&i==n&&(r=!0)}),r}const Cgt={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},qpe=Ot.define({combine(t){return Xp(t,Cgt)}});function Agt(t){return[CC,Igt]}function Kpe(t,e){let{state:n}=t,r=n.facet(qpe),s=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=EL(t.state,a.from,a.to);l&&t.dispatch({effects:kj.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,s,e);let i=document.createElement("span");return i.textContent=r.placeholderText,i.setAttribute("aria-label",n.phrase("folded code")),i.title=n.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=s,i}const XG=In.replace({widget:new class extends pb{toDOM(t){return Kpe(t,null)}}});class Tgt extends pb{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Kpe(e,this.value)}}const Pgt={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class xN extends Yu{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function Ngt(t={}){let e=Object.assign(Object.assign({},Pgt),t),n=new xN(e,!0),r=new xN(e,!1),s=Ks.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Sh)!=o.state.facet(Sh)||o.startState.field(CC,!1)!=o.state.field(CC,!1)||Ys(o.startState)!=Ys(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new _p;for(let l of o.viewportLineBlocks){let c=EL(o.state,l.from,l.to)?r:JG(o.state,l.from,l.to)?n:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:i}=e;return[s,Cmt({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(s))===null||a===void 0?void 0:a.markers)||Dn.empty},initialSpacer(){return new xN(e,!1)},domEventHandlers:Object.assign(Object.assign({},i),{click:(o,a,l)=>{if(i.click&&i.click(o,a,l))return!0;let c=EL(o.state,a.from,a.to);if(c)return o.dispatch({effects:kj.of(c)}),!0;let u=JG(o.state,a.from,a.to);return u?(o.dispatch({effects:Gpe.of(u)}),!0):!1}})}),Agt()]}const Igt=Rt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class OT{constructor(e,n){this.specs=e;let r;function s(a){let l=vh.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const i=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,o=n.scope;this.scope=o instanceof ll?a=>a.prop(mg)==o.data:o?a=>a==o:void 0,this.style=Upe(e.map(a=>({tag:a.tag,class:a.class||s(Object.assign({},a,{tag:null}))})),{all:i}).style,this.module=r?new vh(r):null,this.themeType=n.themeType}static define(e,n){return new OT(e,n||{})}}const kL=Ot.define(),Rgt=Ot.define({combine(t){return t.length?[t[0]]:null}});function _N(t){let e=t.facet(kL);return e.length?e:t.facet(Rgt)}function Ogt(t,e){let n=[Dgt],r;return t instanceof OT&&(t.module&&n.push(Rt.styleModule.of(t.module)),r=t.themeType),r?n.push(kL.computeN([Rt.darkTheme],s=>s.facet(Rt.darkTheme)==(r=="dark")?[t]:[])):n.push(kL.of(t)),n}class Lgt{constructor(e){this.markCache=Object.create(null),this.tree=Ys(e.state),this.decorations=this.buildDeco(e,_N(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Ys(e.state),r=_N(e.state),s=r!=_N(e.startState),{viewport:i}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<i.to&&!s&&n.type==this.tree.type&&o>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=i.to)}buildDeco(e,n){if(!n||!this.tree.length)return In.none;let r=new _p;for(let{from:s,to:i}of e.visibleRanges)sgt(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=In.mark({class:l})))},s,i);return r.finish()}}const Dgt=Dh.high(Ks.fromClass(Lgt,{decorations:t=>t.decorations})),Mgt=Rt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Ype=1e4,Jpe="()[]{}",Xpe=Ot.define({combine(t){return Xp(t,{afterCursor:!0,brackets:Jpe,maxScanDistance:Ype,renderMatch:Bgt})}}),jgt=In.mark({class:"cm-matchingBracket"}),Fgt=In.mark({class:"cm-nonmatchingBracket"});function Bgt(t){let e=[],n=t.matched?jgt:Fgt;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const $gt=Ls.define({create(){return In.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Xpe);for(let s of e.state.selection.ranges){if(!s.empty)continue;let i=wc(e.state,s.head,-1,r)||s.head>0&&wc(e.state,s.head-1,1,r)||r.afterCursor&&(wc(e.state,s.head,1,r)||s.head<e.state.doc.length&&wc(e.state,s.head+1,-1,r));i&&(n=n.concat(r.renderMatch(i,e.state)))}return In.set(n,!0)},provide:t=>Rt.decorations.from(t)}),Ugt=[$gt,Mgt];function Hgt(t={}){return[Xpe.of(t),Ugt]}const zgt=new vn;function CL(t,e,n){let r=t.prop(e<0?vn.openedBy:vn.closedBy);if(r)return r;if(t.name.length==1){let s=n.indexOf(t.name);if(s>-1&&s%2==(e<0?1:0))return[n[s+e]]}return null}function AL(t){let e=t.type.prop(zgt);return e?e(t.node):t}function wc(t,e,n,r={}){let s=r.maxScanDistance||Ype,i=r.brackets||Jpe,o=Ys(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=CL(l.type,n,i);if(c&&l.from<l.to){let u=AL(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Vgt(t,e,n,l,u,c,i)}}return Wgt(t,e,n,o,a.type,s,i)}function Vgt(t,e,n,r,s,i,o){let a=r.parent,l={from:s.from,to:s.to},c=0,u=a?.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&i.indexOf(u.type.name)>-1&&u.from<u.to){let d=AL(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(CL(u.type,n,o))c++;else if(CL(u.type,-n,o)){if(c==0){let d=AL(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Wgt(t,e,n,r,s,i,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=i;){let f=u.value;n<0&&(h+=f.length);let p=e+h*n;for(let m=n>0?0:f.length-1,g=n>0?f.length:-1;m!=g;m+=n){let b=o.indexOf(f[m]);if(!(b<0||r.resolveInner(p+m,1).type!=s))if(b%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:p+m,to:p+m+1},matched:b>>1==l>>1};d--}}n>0&&(h+=f.length)}return u.done?{start:c,matched:!1}:null}const Ggt=Object.create(null),ZG=[ho.none],QG=[],eq=Object.create(null),qgt=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])qgt[t]=Kgt(Ggt,e);function SN(t,e){QG.indexOf(t)>-1||(QG.push(t),console.warn(e))}function Kgt(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||qe[c];u?typeof u=="function"?l.length?l=l.map(u):SN(c,`Modifier ${c} used at start of tag`):l.length?SN(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:SN(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),s=r+" "+n.map(a=>a.id),i=eq[s];if(i)return i.id;let o=eq[s]=ho.define({id:ZG.length,name:r,props:[ngt({[r]:n})]});return ZG.push(o),o.id}Er.RTL,Er.LTR;class Zpe{constructor(e,n,r,s){this.state=e,this.pos=n,this.explicit=r,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Ys(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),s=n.text.slice(r-n.from,this.pos-n.from),i=s.search(Qpe(e,!1));return i<0?null:{from:r+i,to:this.pos,text:s.slice(i)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function tq(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Ygt(t){let e=Object.create(null),n=Object.create(null);for(let{label:s}of t){e[s[0]]=!0;for(let i=1;i<s.length;i++)n[s[i]]=!0}let r=tq(e)+tq(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Jgt(t){let e=t.map(s=>typeof s=="string"?{label:s}:s),[n,r]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:Ygt(e);return s=>{let i=s.matchBefore(r);return i||s.explicit?{from:i?i.from:s.pos,options:e,validFor:n}:null}}function ITt(t,e){return n=>{for(let r=Ys(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class nq{constructor(e,n,r,s){this.completion=e,this.source=n,this.match=r,this.score=s}}function sp(t){return t.selection.main.from}function Qpe(t,e){var n;let{source:r}=t,s=e&&r[0]!="^",i=r[r.length-1]!="$";return!s&&!i?t:new RegExp(`${s?"^":""}(?:${r})${i?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const Cj=Qu.define();function Xgt(t,e,n,r){let{main:s}=t.selection,i=n-s.from,o=r-s.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=s&&n!=r&&t.sliceDoc(a.from+i,a.from+o)!=t.sliceDoc(n,r))return{range:a};let l=t.toText(e);return{changes:{from:a.from+i,to:r==s.from?a.to:a.from+o,insert:l},range:ot.cursor(a.from+i+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const rq=new WeakMap;function Zgt(t){if(!Array.isArray(t))return t;let e=rq.get(t);return e||rq.set(t,e=Jgt(t)),e}const AC=mn.define(),bw=mn.define();class Qgt{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=sl(e,n),s=ku(r);this.chars.push(r);let i=e.slice(n,n+s),o=i.toUpperCase();this.folded.push(sl(o==i?i.toLowerCase():o,0)),n+=s}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:s,precise:i,byWord:o}=this;if(n.length==1){let v=sl(e,0),w=ku(v),_=w==e.length?0:-100;if(v!=n[0])if(v==r[0])_+=-200;else return null;return this.ret(_,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let v=0,w=Math.min(e.length,200);v<w&&c<l;){let _=sl(e,v);(_==n[c]||_==r[c])&&(s[c++]=v),v+=ku(_)}if(c<l)return null}let u=0,d=0,h=!1,f=0,p=-1,m=-1,g=/[a-z]/.test(e),b=!0;for(let v=0,w=Math.min(e.length,200),_=0;v<w&&d<l;){let S=sl(e,v);a<0&&(u<l&&S==n[u]&&(i[u++]=v),f<l&&(S==n[f]||S==r[f]?(f==0&&(p=v),m=v+1,f++):f=0));let E,k=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(E=oj(S))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!v||k==1&&g||_==0&&k!=0)&&(n[d]==S||r[d]==S&&(h=!0)?o[d++]=v:o.length&&(b=!1)),_=k,v+=ku(S)}return d==l&&o[0]==0&&b?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-900-e.length,[p,m]):d==l?this.result(-100+(h?-200:0)+-700+(b?0:-1100),o,e):n.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,n,r){let s=[],i=0;for(let o of n){let a=o+(this.astral?ku(sl(r,o)):1);i&&s[i-1]==o?s[i-1]=a:(s[i++]=o,s[i++]=a)}return this.ret(e-r.length,s)}}class e0t{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Ps=Ot.define({combine(t){return Xp(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:t0t,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>sq(e(r),n(r)),optionClass:(e,n)=>r=>sq(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function sq(t,e){return t?e?t+" "+e:t:e}function t0t(t,e,n,r,s,i){let o=t.textDirection==Er.RTL,a=o,l=!1,c="top",u,d,h=e.left-s.left,f=s.right-e.right,p=r.right-r.left,m=r.bottom-r.top;if(a&&h<Math.min(p,f)?a=!1:!a&&f<Math.min(p,h)&&(a=!0),p<=(a?h:f))u=Math.max(s.top,Math.min(n.top,s.bottom-m))-e.top,d=Math.min(400,a?h:f);else{l=!0,d=Math.min(400,(o?e.right:s.right-e.left)-30);let v=s.bottom-e.bottom;v>=m||v>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let g=(e.bottom-e.top)/i.offsetHeight,b=(e.right-e.left)/i.offsetWidth;return{style:`${c}: ${u/g}px; max-width: ${d/b}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function n0t(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,s,i){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<i.length;){let u=i[c++],d=i[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(a.slice(u,d))),h.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function EN(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let s=Math.floor(e/n);return{from:s*n,to:(s+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class r0t{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let s=e.state.field(n),{options:i,selected:o}=s.open,a=e.state.facet(Ps);this.optionContent=n0t(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=EN(i.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Ps).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:bw.of(null)})}),this.showOptions(i,s.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=s){let{options:i,selected:o,disabled:a}=r.open;(!s.open||s.open.options!=i)&&(this.range=EN(i.length,o,e.state.facet(Ps).maxRenderedOptions),this.showOptions(i,r.id)),this.updateSel(),a!=((n=s.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=EN(n.options.length,n.selected,this.view.state.facet(Ps).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:s}=r;if(!s)return;let i=typeof s=="string"?document.createTextNode(s):s(r);if(!i)return;"then"in i?i.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Bo(this.view.state,o,"completion info")):this.addInfoPane(i,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:i}=e;r.appendChild(s),this.infoDestroy=i||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,s=this.range.from;r;r=r.nextSibling,s++)r.nodeName!="LI"||!r.id?s--:s==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&i0t(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),i=this.space;if(!i){let o=this.dom.ownerDocument.documentElement;i={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return s.top>Math.min(i.bottom,n.bottom)-10||s.bottom<Math.max(i.top,n.top)+10?null:this.view.state.facet(Ps).positionInfo(this.view,n,s,r,i,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const s=document.createElement("ul");s.id=n,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions")),s.addEventListener("mousedown",o=>{o.target==s&&o.preventDefault()});let i=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let h=typeof c=="string"?c:c.name;if(h!=i&&(o>r.from||r.from==0))if(i=h,typeof c!="string"&&c.header)s.appendChild(c.header(c));else{let f=s.appendChild(document.createElement("completion-section"));f.textContent=h}}const u=s.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,this.view,l);f&&u.appendChild(f)}}return r.from&&s.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function s0t(t,e){return n=>new r0t(n,t,e)}function i0t(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/s:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/s)}function iq(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function o0t(t,e){let n=[],r=null,s=c=>{n.push(c);let{section:u}=c.completion;if(u){r||(r=[]);let d=typeof u=="string"?u:u.name;r.some(h=>h.name==d)||r.push(typeof u=="string"?{name:d}:u)}},i=e.facet(Ps);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)s(new nq(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),h,f=i.filterStrict?new e0t(d):new Qgt(d);for(let p of c.result.options)if(h=f.match(p.label)){let m=p.displayLabel?u?u(p,h.matched):[]:h.matched;s(new nq(p,c.source,m,h.score+(p.boost||0)))}}}if(r){let c=Object.create(null),u=0,d=(h,f)=>{var p,m;return((p=h.rank)!==null&&p!==void 0?p:1e9)-((m=f.rank)!==null&&m!==void 0?m:1e9)||(h.name<f.name?-1:1)};for(let h of r.sort(d))u-=1e5,c[h.name]=u;for(let h of n){let{section:f}=h.completion;f&&(h.score+=c[typeof f=="string"?f:f.name])}}let o=[],a=null,l=i.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):iq(c.completion)>iq(a)&&(o[o.length-1]=c),a=c.completion}return o}class gg{constructor(e,n,r,s,i,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=s,this.selected=i,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new gg(this.options,oq(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,s,i,o){if(s&&!o&&e.some(c=>c.isPending))return s.setDisabled();let a=o0t(e,n);if(!a.length)return s&&e.some(c=>c.isPending)?s.setDisabled():null;let l=n.facet(Ps).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let c=s.options[s.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new gg(a,oq(r,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:h0t,above:i.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new gg(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new gg(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class TC{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new TC(u0t,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Ps),i=(r.override||n.languageDataAt("autocomplete",sp(n)).map(Zgt)).map(l=>(this.active.find(u=>u.source==l)||new xa(l,this.active.some(u=>u.state!=0)?1:0)).update(e,r));i.length==this.active.length&&i.every((l,c)=>l==this.active[c])&&(i=this.active);let o=this.open,a=e.effects.some(l=>l.is(Aj));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||i.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!a0t(i,this.active)||a?o=gg.build(i,n,this.id,o,r,a):o&&o.disabled&&!i.some(l=>l.isPending)&&(o=null),!o&&i.every(l=>!l.isPending)&&i.some(l=>l.hasResult())&&(i=i.map(l=>l.hasResult()?new xa(l.source,0):l));for(let l of e.effects)l.is(tme)&&(o=o&&o.setSelected(l.value,this.id));return i==this.active&&o==this.open?this:new TC(i,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?l0t:c0t}}function a0t(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let s=n==t.length,i=r==e.length;if(s||i)return s==i;if(t[n++].result!=e[r++].result)return!1}}const l0t={"aria-autocomplete":"list"},c0t={};function oq(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const u0t=[];function eme(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(Cj);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class xa{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=eme(e,n),s=this;(r&8||r&16&&this.touches(e))&&(s=new xa(s.source,0)),r&4&&s.state==0&&(s=new xa(this.source,1)),s=s.updateFor(e,r);for(let i of e.effects)if(i.is(AC))s=new xa(s.source,1,i.value);else if(i.is(bw))s=new xa(s.source,0);else if(i.is(Aj))for(let o of i.value)o.source==s.source&&(s=o);return s}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(sp(e.state))}}class Hg extends xa{constructor(e,n,r,s,i,o){super(e,3,n),this.limit=r,this.result=s,this.from=i,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=sp(e.state);if(a>o||!s||n&2&&(sp(e.startState)==this.from||a<this.limit))return new xa(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return d0t(s.validFor,e.state,i,o)?new Hg(this.source,this.explicit,l,s,i,o):s.update&&(s=s.update(s,i,o,new Zpe(e.state,a,!1)))?new Hg(this.source,this.explicit,l,s,s.from,(r=s.to)!==null&&r!==void 0?r:sp(e.state)):new xa(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Hg(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new xa(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function d0t(t,e,n,r){if(!t)return!1;let s=e.sliceDoc(n,r);return typeof t=="function"?t(s,n,r,e):Qpe(t,!0).test(s)}const Aj=mn.define({map(t,e){return t.map(n=>n.map(e))}}),tme=mn.define(),to=Ls.define({create(){return TC.start()},update(t,e){return t.update(e)},provide:t=>[vj.from(t,e=>e.tooltip),Rt.contentAttributes.from(t,e=>e.attrs)]});function Tj(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(to).active.find(s=>s.source==e.source);return r instanceof Hg?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},Xgt(t.state,n,r.from,r.to)),{annotations:Cj.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}const h0t=s0t(to,Tj);function dS(t,e="option"){return n=>{let r=n.state.field(to,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Ps).interactionDelay)return!1;let s=1,i;e=="page"&&(i=Rpe(n,r.open.tooltip))&&(s=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+s*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:tme.of(a)}),!0}}const nme=t=>{let e=t.state.field(to,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Ps).interactionDelay?!1:Tj(t,e.open.options[e.open.selected])},aq=t=>t.state.field(to,!1)?(t.dispatch({effects:AC.of(!0)}),!0):!1,f0t=t=>{let e=t.state.field(to,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:bw.of(null)}),!0)};class p0t{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const m0t=50,g0t=1e3,b0t=Ks.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(to).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(to),n=t.state.facet(Ps);if(!t.selectionSet&&!t.docChanged&&t.startState.field(to)==e)return;let r=t.transactions.some(i=>{let o=eme(i,n);return o&8||(i.selection||i.docChanged)&&!(o&3)});for(let i=0;i<this.running.length;i++){let o=this.running[i];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>m0t&&Date.now()-o.time>g0t){for(let a of o.context.abortListeners)try{a()}catch(l){Bo(this.view.state,l)}o.context.abortListeners=null,this.running.splice(i--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(i=>i.effects.some(o=>o.is(AC)))&&(this.pendingStart=!0);let s=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(i=>i.isPending&&!this.running.some(o=>o.active.source==i.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let i of t.transactions)i.isUserEvent("input.type")?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(to);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ps).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=sp(e),r=new Zpe(e,n,t.explicit,this.view),s=new p0t(t,r);this.running.push(s),Promise.resolve(t.source(r)).then(i=>{s.context.aborted||(s.done=i||null,this.scheduleAccept())},i=>{this.view.dispatch({effects:bw.of(null)}),Bo(this.view.state,i)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ps).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Ps),r=this.view.state.field(to);for(let s=0;s<this.running.length;s++){let i=this.running[s];if(i.done===void 0)continue;if(this.running.splice(s--,1),i.done){let a=sp(i.updates.length?i.updates[0].startState:this.view.state),l=Math.min(a,i.done.from+(i.active.explicit?0:1)),c=new Hg(i.active.source,i.active.explicit,l,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:a);for(let u of i.updates)c=c.update(u,n);if(c.hasResult()){e.push(c);continue}}let o=r.active.find(a=>a.source==i.active.source);if(o&&o.isPending)if(i.done==null){let a=new xa(i.active.source,0);for(let l of i.updates)a=a.update(l,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:Aj.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(to,!1);if(e&&e.tooltip&&this.view.state.facet(Ps).closeOnBlur){let n=e.open&&Rpe(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:bw.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:AC.of(!1)}),20),this.composing=0}}}),y0t=typeof navigator=="object"&&/Win/.test(navigator.platform),v0t=Dh.highest(Rt.domEventHandlers({keydown(t,e){let n=e.state.field(to,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(y0t&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],s=n.active.find(o=>o.source==r.source),i=r.completion.commitCharacters||s.result.commitCharacters;return i&&i.indexOf(t.key)>-1&&Tj(e,r),!1}})),rme=Rt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class w0t{constructor(e,n,r,s){this.field=e,this.line=n,this.from=r,this.to=s}}class Pj{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,di.TrackDel),r=e.mapPos(this.to,1,di.TrackDel);return n==null||r==null?null:new Pj(this.field,n,r)}}class Nj{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],s=[n],i=e.doc.lineAt(n),o=/^\s*/.exec(i.text)[0];for(let l of this.lines){if(r.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let d=0;d<u;d++)c+=e.facet(mb);s.push(n+c.length-u),l=c+l.slice(u)}r.push(l),n+=l.length+1}let a=this.fieldPositions.map(l=>new Pj(l.field,s[l.line]+l.from,s[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let n=[],r=[],s=[],i;for(let o of e.split(/\r\n?|\n/)){for(;i=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=i[1]?+i[1]:null,l=i[2]||i[3]||"",c=-1,u=l.replace(/\\[{}]/g,d=>d[1]);for(let d=0;d<n.length;d++)(a!=null?n[d].seq==a:u&&n[d].name==u)&&(c=d);if(c<0){let d=0;for(;d<n.length&&(a==null||n[d].seq!=null&&n[d].seq<a);)d++;n.splice(d,0,{seq:a,name:u}),c=d;for(let h of s)h.field>=c&&h.field++}s.push(new w0t(c,r.length,i.index,i.index+u.length)),o=o.slice(0,i.index)+l+o.slice(i.index+i[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let u of s)u.line==r.length&&u.from>c&&(u.from--,u.to--);return l}),r.push(o)}return new Nj(r,s)}}let x0t=In.widget({widget:new class extends pb{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),_0t=In.mark({class:"cm-snippetField"});class gb{constructor(e,n){this.ranges=e,this.active=n,this.deco=In.set(e.map(r=>(r.from==r.to?x0t:_0t).range(r.from,r.to)))}map(e){let n=[];for(let r of this.ranges){let s=r.map(e);if(!s)return null;n.push(s)}return new gb(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const hx=mn.define({map(t,e){return t&&t.map(e)}}),S0t=mn.define(),yw=Ls.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(hx))return n.value;if(n.is(S0t)&&t)return new gb(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>Rt.decorations.from(t,e=>e?e.deco:In.none)});function Ij(t,e){return ot.create(t.filter(n=>n.field==e).map(n=>ot.range(n.from,n.to)))}function E0t(t){let e=Nj.parse(t);return(n,r,s,i)=>{let{text:o,ranges:a}=e.instantiate(n.state,s),{main:l}=n.state.selection,c={changes:{from:s,to:i==l.from?l.to:i,insert:jn.of(o)},scrollIntoView:!0,annotations:r?[Cj.of(r),as.userEvent.of("input.complete")]:void 0};if(a.length&&(c.selection=Ij(a,0)),a.some(u=>u.field>0)){let u=new gb(a,0),d=c.effects=[hx.of(u)];n.state.field(yw,!1)===void 0&&d.push(mn.appendConfig.of([yw,P0t,N0t,rme]))}n.dispatch(n.state.update(c))}}function sme(t){return({state:e,dispatch:n})=>{let r=e.field(yw,!1);if(!r||t<0&&r.active==0)return!1;let s=r.active+t,i=t>0&&!r.ranges.some(o=>o.field==s+t);return n(e.update({selection:Ij(r.ranges,s),effects:hx.of(i?null:new gb(r.ranges,s)),scrollIntoView:!0})),!0}}const k0t=({state:t,dispatch:e})=>t.field(yw,!1)?(e(t.update({effects:hx.of(null)})),!0):!1,C0t=sme(1),A0t=sme(-1),T0t=[{key:"Tab",run:C0t,shift:A0t},{key:"Escape",run:k0t}],lq=Ot.define({combine(t){return t.length?t[0]:T0t}}),P0t=Dh.highest(IT.compute([lq],t=>t.facet(lq)));function RTt(t,e){return Object.assign(Object.assign({},e),{apply:E0t(t)})}const N0t=Rt.domEventHandlers({mousedown(t,e){let n=e.state.field(yw,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let s=n.ranges.find(i=>i.from<=r&&i.to>=r);return!s||s.field==n.active?!1:(e.dispatch({selection:Ij(n.ranges,s.field),effects:hx.of(n.ranges.some(i=>i.field>s.field)?new gb(n.ranges,s.field):null),scrollIntoView:!0}),!0)}}),PC={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Bf=mn.define({map(t,e){let n=e.mapPos(t,-1,di.TrackAfter);return n??void 0}}),Rj=new class extends xp{};Rj.startSide=1;Rj.endSide=-1;const ime=Ls.define({create(){return Dn.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(Bf)&&(t=t.update({add:[Rj.range(n.value,n.value+1)]}));return t}});function I0t(){return[D0t,ime]}const kN="()[]{}<>";function R0t(t){for(let e=0;e<kN.length;e+=2)if(kN.charCodeAt(e)==t)return kN.charAt(e+1);return oj(t<128?t:t+1)}function O0t(t,e){return t.languageDataAt("closeBrackets",e)[0]||PC}const L0t=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),D0t=Rt.inputHandler.of((t,e,n,r)=>{if((L0t?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let s=t.state.selection.main;if(r.length>2||r.length==2&&ku(sl(r,0))==1||e!=s.from||n!=s.to)return!1;let i=M0t(t.state,r);return i?(t.dispatch(i),!0):!1});function M0t(t,e){let n=O0t(t,t.selection.main.head),r=n.brackets||PC.brackets;for(let s of r){let i=R0t(sl(s,0));if(e==s)return i==s?B0t(t,s,r.indexOf(s+s+s)>-1,n):j0t(t,s,i,n.before||PC.before);if(e==i&&ome(t,t.selection.main.from))return F0t(t,s,i)}return null}function ome(t,e){let n=!1;return t.field(ime).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function Oj(t,e){let n=t.sliceString(e,e+2);return n.slice(0,ku(sl(n,0)))}function j0t(t,e,n,r){let s=null,i=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Bf.of(o.to+e.length),range:ot.range(o.anchor+e.length,o.head+e.length)};let a=Oj(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:Bf.of(o.head+e.length),range:ot.cursor(o.head+e.length)}:{range:s=o}});return s?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function F0t(t,e,n){let r=null,s=t.changeByRange(i=>i.empty&&Oj(t.doc,i.head)==n?{changes:{from:i.head,to:i.head+n.length,insert:n},range:ot.cursor(i.head+n.length)}:r={range:i});return r?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function B0t(t,e,n,r){let s=r.stringPrefixes||PC.stringPrefixes,i=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Bf.of(a.to+e.length),range:ot.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=Oj(t.doc,l),u;if(c==e){if(cq(t,l))return{changes:{insert:e+e,from:l},effects:Bf.of(l+e.length),range:ot.cursor(l+e.length)};if(ome(t,l)){let h=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:ot.cursor(l+h.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(u=uq(t,l-2*e.length,s))>-1&&cq(t,u))return{changes:{insert:e+e+e+e,from:l},effects:Bf.of(l+e.length),range:ot.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=ls.Word&&uq(t,l,s)>-1&&!$0t(t,l,e,s))return{changes:{insert:e+e,from:l},effects:Bf.of(l+e.length),range:ot.cursor(l+e.length)}}return{range:i=a}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function cq(t,e){let n=Ys(t).resolveInner(e+1);return n.parent&&n.from==e}function $0t(t,e,n,r){let s=Ys(t).resolveInner(e,-1),i=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(s.from,Math.min(s.to,s.from+n.length+i)),l=a.indexOf(n);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let u=s.firstChild;for(;u&&u.from==s.from&&u.to-u.from>n.length+l;){if(t.sliceDoc(u.to-n.length,u.to)==n)return!1;u=u.firstChild}return!0}let c=s.to==e&&s.parent;if(!c)break;s=c}return!1}function uq(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=ls.Word)return e;for(let s of n){let i=e-s.length;if(t.sliceDoc(i,e)==s&&r(t.sliceDoc(i-1,i))!=ls.Word)return i}return-1}function U0t(t={}){return[v0t,to,Ps.of(t),b0t,z0t,rme]}const H0t=[{key:"Ctrl-Space",run:aq},{mac:"Alt-`",run:aq},{key:"Escape",run:f0t},{key:"ArrowDown",run:dS(!0)},{key:"ArrowUp",run:dS(!1)},{key:"PageDown",run:dS(!0,"page")},{key:"PageUp",run:dS(!1,"page")},{key:"Enter",run:nme}],z0t=Dh.highest(IT.computeN([Ps],t=>t.facet(Ps).defaultKeymap?[H0t]:[])),V0t=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=Dj(t.state,n.from);return r.line?W0t(t):r.block?q0t(t):!1};function Lj(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let s=t(e,n);return s?(r(n.update(s)),!0):!1}}const W0t=Lj(J0t,0),G0t=Lj(ame,0),q0t=Lj((t,e)=>ame(t,e,Y0t(e)),0);function Dj(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const My=50;function K0t(t,{open:e,close:n},r,s){let i=t.sliceDoc(r-My,r),o=t.sliceDoc(s,s+My),a=/\s*$/.exec(i)[0].length,l=/^\s*/.exec(o)[0].length,c=i.length-a;if(i.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:s+l,margin:l&&1}};let u,d;s-r<=2*My?u=d=t.sliceDoc(r,s):(u=t.sliceDoc(r,r+My),d=t.sliceDoc(s-My,s));let h=/^\s*/.exec(u)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return u.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:r+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:s-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function Y0t(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),s=n.to<=r.to?r:t.doc.lineAt(n.to);s.from>r.from&&s.from==n.to&&(s=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let i=e.length-1;i>=0&&e[i].to>r.from?e[i].to=s.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:s.to})}return e}function ame(t,e,n=e.selection.ranges){let r=n.map(i=>Dj(e,i.from).block);if(!r.every(i=>i))return null;let s=n.map((i,o)=>K0t(e,r[o],i.from,i.to));if(t!=2&&!s.every(i=>i))return{changes:e.changes(n.map((i,o)=>s[o]?[]:[{from:i.from,insert:r[o].open+" "},{from:i.to,insert:" "+r[o].close}]))};if(t!=1&&s.some(i=>i)){let i=[];for(let o=0,a;o<s.length;o++)if(a=s[o]){let l=r[o],{open:c,close:u}=a;i.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:i}}return null}function J0t(t,e,n=e.selection.ranges){let r=[],s=-1;for(let{from:i,to:o}of n){let a=r.length,l=1e9,c=Dj(e,i).line;if(c){for(let u=i;u<=o;){let d=e.doc.lineAt(u);if(d.from>s&&(i==o||o>d.from)){s=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<l&&(l=h),r.push({line:d,comment:p,token:c,indent:h,empty:f,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(i=>i.comment<0&&(!i.empty||i.single))){let i=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of r)(d||!u)&&i.push({from:a.from+c,insert:l+" "});let o=e.changes(i);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(i=>i.comment>=0)){let i=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,i.push({from:c,to:u})}return{changes:i}}return null}const TL=Qu.define(),X0t=Qu.define(),Z0t=Ot.define(),lme=Ot.define({combine(t){return Xp(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,s)=>e(r,s)||n(r,s)})}}),cme=Ls.define({create(){return xc.empty},update(t,e){let n=e.state.facet(lme),r=e.annotation(TL);if(r){let l=so.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return l?u=NC(u,u.length,n.minDepth,l):u=hme(u,e.startState.selection),new xc(c==0?r.rest:u,c==0?u:r.rest)}let s=e.annotation(X0t);if((s=="full"||s=="before")&&(t=t.isolate()),e.annotation(as.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let i=so.fromTransaction(e),o=e.annotation(as.time),a=e.annotation(as.userEvent);return i?t=t.addChanges(i,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(s=="full"||s=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new xc(t.done.map(so.fromJSON),t.undone.map(so.fromJSON))}});function Q0t(t={}){return[cme,lme.of(t),Rt.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?ume:e.inputType=="historyRedo"?PL:null;return r?(e.preventDefault(),r(n)):!1}})]}function LT(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let s=n.field(cme,!1);if(!s)return!1;let i=s.pop(t,n,e);return i?(r(i),!0):!1}}const ume=LT(0,!1),PL=LT(1,!1),ebt=LT(0,!0),tbt=LT(1,!0);class so{constructor(e,n,r,s,i){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=s,this.selectionsAfter=i}setSelAfter(e){return new so(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new so(e.changes&&fs.fromJSON(e.changes),[],e.mapped&&Nc.fromJSON(e.mapped),e.startSelection&&ot.fromJSON(e.startSelection),e.selectionsAfter.map(ot.fromJSON))}static fromTransaction(e,n){let r=_a;for(let s of e.startState.facet(Z0t)){let i=s(e);i.length&&(r=r.concat(i))}return!r.length&&e.changes.empty?null:new so(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,_a)}static selection(e){return new so(void 0,_a,void 0,void 0,e)}}function NC(t,e,n,r){let s=e+1>n+20?e-n-1:0,i=t.slice(s,e);return i.push(r),i}function nbt(t,e){let n=[],r=!1;return t.iterChangedRanges((s,i)=>n.push(s,i)),e.iterChangedRanges((s,i,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(r=!0)}}),r}function rbt(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function dme(t,e){return t.length?e.length?t.concat(e):t:e}const _a=[],sbt=200;function hme(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-sbt));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),NC(t,t.length-1,1e9,n.setSelAfter(r)))}else return[so.selection([e])]}function ibt(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function CN(t,e){if(!t.length)return t;let n=t.length,r=_a;for(;n;){let s=obt(t[n-1],e,r);if(s.changes&&!s.changes.empty||s.effects.length){let i=t.slice(0,n);return i[n-1]=s,i}else e=s.mapped,n--,r=s.selectionsAfter}return r.length?[so.selection(r)]:_a}function obt(t,e,n){let r=dme(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):_a,n);if(!t.changes)return so.selection(r);let s=t.changes.map(e),i=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(i):i;return new so(s,mn.mapEffects(t.effects,e),o,t.startSelection.map(i),r)}const abt=/^(input\.type|delete)($|\.)/;class xc{constructor(e,n,r=0,s=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=s}isolate(){return this.prevTime?new xc(this.done,this.undone):this}addChanges(e,n,r,s,i){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||abt.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(i,nbt(a.changes,e.changes))||r=="input.type.compose")?o=NC(o,o.length-1,s.minDepth,new so(e.changes.compose(a.changes),dme(mn.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,_a)):o=NC(o,o.length,s.minDepth,e),new xc(o,_a,n,r)}addSelection(e,n,r,s){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:_a;return i.length>0&&n-this.prevTime<s&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&rbt(i[i.length-1],e)?this:new xc(hme(this.done,e),this.undone,n,r)}addMapping(e){return new xc(CN(this.done,e),CN(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let s=e==0?this.done:this.undone;if(s.length==0)return null;let i=s[s.length-1],o=i.selectionsAfter[0]||n.selection;if(r&&i.selectionsAfter.length)return n.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:TL.of({side:e,rest:ibt(s),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let a=s.length==1?_a:s.slice(0,s.length-1);return i.mapped&&(a=CN(a,i.mapped)),n.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:TL.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}xc.empty=new xc(_a,_a);const lbt=[{key:"Mod-z",run:ume,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:PL,preventDefault:!0},{linux:"Ctrl-Shift-z",run:PL,preventDefault:!0},{key:"Mod-u",run:ebt,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:tbt,preventDefault:!0}];function bb(t,e){return ot.create(t.ranges.map(e),t.mainIndex)}function zc(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function kl({state:t,dispatch:e},n){let r=bb(t.selection,n);return r.eq(t.selection,!0)?!1:(e(zc(t,r)),!0)}function DT(t,e){return ot.cursor(e?t.to:t.from)}function fme(t,e){return kl(t,n=>n.empty?t.moveByChar(n,e):DT(n,e))}function wi(t){return t.textDirectionAt(t.state.selection.main.head)==Er.LTR}const pme=t=>fme(t,!wi(t)),mme=t=>fme(t,wi(t));function gme(t,e){return kl(t,n=>n.empty?t.moveByGroup(n,e):DT(n,e))}const cbt=t=>gme(t,!wi(t)),ubt=t=>gme(t,wi(t));function dbt(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function MT(t,e,n){let r=Ys(t).resolveInner(e.head),s=n?vn.closedBy:vn.openedBy;for(let l=e.head;;){let c=n?r.childAfter(l):r.childBefore(l);if(!c)break;dbt(t,c,s)?r=c:l=n?c.to:c.from}let i=r.type.prop(s),o,a;return i&&(o=n?wc(t,r.from,1):wc(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,ot.cursor(a,n?-1:1)}const hbt=t=>kl(t,e=>MT(t.state,e,!wi(t))),fbt=t=>kl(t,e=>MT(t.state,e,wi(t)));function bme(t,e){return kl(t,n=>{if(!n.empty)return DT(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const yme=t=>bme(t,!1),vme=t=>bme(t,!0);function wme(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,s;if(e){for(let i of t.state.facet(Rt.scrollMargins)){let o=i(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(r=Math.max(o?.bottom,r))}s=t.scrollDOM.clientHeight-n-r}else s=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,s-5)}}function xme(t,e){let n=wme(t),{state:r}=t,s=bb(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):DT(o,e));if(s.eq(r.selection))return!1;let i;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(i=Rt.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(zc(r,s),{effects:i}),!0}const dq=t=>xme(t,!1),NL=t=>xme(t,!0);function Mh(t,e,n){let r=t.lineBlockAt(e.head),s=t.moveToLineBoundary(e,n);if(s.head==e.head&&s.head!=(n?r.to:r.from)&&(s=t.moveToLineBoundary(e,n,!1)),!n&&s.head==r.from&&r.length){let i=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;i&&e.head!=r.from+i&&(s=ot.cursor(r.from+i))}return s}const pbt=t=>kl(t,e=>Mh(t,e,!0)),mbt=t=>kl(t,e=>Mh(t,e,!1)),gbt=t=>kl(t,e=>Mh(t,e,!wi(t))),bbt=t=>kl(t,e=>Mh(t,e,wi(t))),ybt=t=>kl(t,e=>ot.cursor(t.lineBlockAt(e.head).from,1)),vbt=t=>kl(t,e=>ot.cursor(t.lineBlockAt(e.head).to,-1));function wbt(t,e,n){let r=!1,s=bb(t.selection,i=>{let o=wc(t,i.head,-1)||wc(t,i.head,1)||i.head>0&&wc(t,i.head-1,1)||i.head<t.doc.length&&wc(t,i.head+1,-1);if(!o||!o.end)return i;r=!0;let a=o.start.from==i.head?o.end.to:o.end.from;return ot.cursor(a)});return r?(e(zc(t,s)),!0):!1}const xbt=({state:t,dispatch:e})=>wbt(t,e);function Ua(t,e){let n=bb(t.state.selection,r=>{let s=e(r);return ot.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(zc(t.state,n)),!0)}function _me(t,e){return Ua(t,n=>t.moveByChar(n,e))}const Sme=t=>_me(t,!wi(t)),Eme=t=>_me(t,wi(t));function kme(t,e){return Ua(t,n=>t.moveByGroup(n,e))}const _bt=t=>kme(t,!wi(t)),Sbt=t=>kme(t,wi(t)),Ebt=t=>Ua(t,e=>MT(t.state,e,!wi(t))),kbt=t=>Ua(t,e=>MT(t.state,e,wi(t)));function Cme(t,e){return Ua(t,n=>t.moveVertically(n,e))}const Ame=t=>Cme(t,!1),Tme=t=>Cme(t,!0);function Pme(t,e){return Ua(t,n=>t.moveVertically(n,e,wme(t).height))}const hq=t=>Pme(t,!1),fq=t=>Pme(t,!0),Cbt=t=>Ua(t,e=>Mh(t,e,!0)),Abt=t=>Ua(t,e=>Mh(t,e,!1)),Tbt=t=>Ua(t,e=>Mh(t,e,!wi(t))),Pbt=t=>Ua(t,e=>Mh(t,e,wi(t))),Nbt=t=>Ua(t,e=>ot.cursor(t.lineBlockAt(e.head).from)),Ibt=t=>Ua(t,e=>ot.cursor(t.lineBlockAt(e.head).to)),pq=({state:t,dispatch:e})=>(e(zc(t,{anchor:0})),!0),mq=({state:t,dispatch:e})=>(e(zc(t,{anchor:t.doc.length})),!0),gq=({state:t,dispatch:e})=>(e(zc(t,{anchor:t.selection.main.anchor,head:0})),!0),bq=({state:t,dispatch:e})=>(e(zc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Rbt=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Obt=({state:t,dispatch:e})=>{let n=jT(t).map(({from:r,to:s})=>ot.range(r,Math.min(s+1,t.doc.length)));return e(t.update({selection:ot.create(n),userEvent:"select"})),!0},Lbt=({state:t,dispatch:e})=>{let n=bb(t.selection,r=>{let s=Ys(t),i=s.resolveStack(r.from,1);if(r.empty){let o=s.resolveStack(r.from,-1);o.node.from>=i.node.from&&o.node.to<=i.node.to&&(i=o)}for(let o=i;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return ot.range(a.to,a.from)}return r});return n.eq(t.selection)?!1:(e(zc(t,n)),!0)},Dbt=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=ot.create([n.main]):n.main.empty||(r=ot.create([ot.cursor(n.main.head)])),r?(e(zc(t,r)),!0):!1};function fx(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,s=r.changeByRange(i=>{let{from:o,to:a}=i;if(o==a){let l=e(i);l<o?(n="delete.backward",l=hS(t,l,!1)):l>o&&(n="delete.forward",l=hS(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=hS(t,o,!1),a=hS(t,a,!0);return o==a?{range:i}:{changes:{from:o,to:a},range:ot.cursor(o,o<i.head?-1:1)}});return s.changes.empty?!1:(t.dispatch(r.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Rt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function hS(t,e,n){if(t instanceof Rt)for(let r of t.state.facet(Rt.atomicRanges).map(s=>s(t)))r.between(e,e,(s,i)=>{s<e&&i>e&&(e=n?i:s)});return e}const Nme=(t,e,n)=>fx(t,r=>{let s=r.from,{state:i}=t,o=i.doc.lineAt(s),a,l;if(n&&!e&&s>o.from&&s<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,s-o.from))){if(a[a.length-1]=="	")return s-1;let c=CT(a,i.tabSize),u=c%kC(i)||kC(i);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)s--;l=s}else l=Gs(o.text,s-o.from,e,e)+o.from,l==s&&o.number!=(e?i.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,s-o.from))&&(l=Gs(o.text,l-o.from,!1,!1)+o.from);return l}),IL=t=>Nme(t,!1,!0),Ime=t=>Nme(t,!0,!1),Rme=(t,e)=>fx(t,n=>{let r=n.head,{state:s}=t,i=s.doc.lineAt(r),o=s.charCategorizer(r);for(let a=null;;){if(r==(e?i.to:i.from)){r==n.head&&i.number!=(e?s.doc.lines:1)&&(r+=e?1:-1);break}let l=Gs(i.text,r-i.from,e)+i.from,c=i.text.slice(Math.min(r,l)-i.from,Math.max(r,l)-i.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=n.head)&&(a=u),r=l}return r}),Ome=t=>Rme(t,!1),Mbt=t=>Rme(t,!0),jbt=t=>fx(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Fbt=t=>fx(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),Bbt=t=>fx(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),$bt=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:jn.of(["",""])},range:ot.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Ubt=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let s=r.from,i=t.doc.lineAt(s),o=s==i.from?s-1:Gs(i.text,s-i.from,!1)+i.from,a=s==i.to?s+1:Gs(i.text,s-i.from,!0)+i.from;return{changes:{from:o,to:a,insert:t.doc.slice(s,a).append(t.doc.slice(o,s))},range:ot.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function jT(t){let e=[],n=-1;for(let r of t.selection.ranges){let s=t.doc.lineAt(r.from),i=t.doc.lineAt(r.to);if(!r.empty&&r.to==i.from&&(i=t.doc.lineAt(r.to-1)),n>=s.number){let o=e[e.length-1];o.to=i.to,o.ranges.push(r)}else e.push({from:s.from,to:i.to,ranges:[r]});n=i.number+1}return e}function Lme(t,e,n){if(t.readOnly)return!1;let r=[],s=[];for(let i of jT(t)){if(n?i.to==t.doc.length:i.from==0)continue;let o=t.doc.lineAt(n?i.to+1:i.from-1),a=o.length+1;if(n){r.push({from:i.to,to:o.to},{from:i.from,insert:o.text+t.lineBreak});for(let l of i.ranges)s.push(ot.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:i.from},{from:i.to,insert:t.lineBreak+o.text});for(let l of i.ranges)s.push(ot.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:ot.create(s,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Hbt=({state:t,dispatch:e})=>Lme(t,e,!1),zbt=({state:t,dispatch:e})=>Lme(t,e,!0);function Dme(t,e,n){if(t.readOnly)return!1;let r=[];for(let s of jT(t))n?r.push({from:s.from,insert:t.doc.slice(s.from,s.to)+t.lineBreak}):r.push({from:s.to,insert:t.lineBreak+t.doc.slice(s.from,s.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Vbt=({state:t,dispatch:e})=>Dme(t,e,!1),Wbt=({state:t,dispatch:e})=>Dme(t,e,!0),Gbt=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(jT(e).map(({from:s,to:i})=>(s>0?s--:i<e.doc.length&&i++,{from:s,to:i}))),r=bb(e.selection,s=>{let i;if(t.lineWrapping){let o=t.lineBlockAt(s.head),a=t.coordsAtPos(s.head,s.assoc||1);a&&(i=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(s,!0,i)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function qbt(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Ys(t).resolveInner(e),r=n.childBefore(e),s=n.childAfter(e),i;return r&&s&&r.to<=e&&s.from>=e&&(i=r.type.prop(vn.closedBy))&&i.indexOf(s.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(s.from).from&&!/\S/.test(t.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}const yq=Mme(!1),Kbt=Mme(!0);function Mme(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(s=>{let{from:i,to:o}=s,a=e.doc.lineAt(i),l=!t&&i==o&&qbt(e,i);t&&(i=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new RT(e,{simulateBreak:i,simulateDoubleBreak:!!l}),u=Sj(c,i);for(u==null&&(u=CT(/^\s*/.exec(e.doc.lineAt(i).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:i,to:o}=l:i>a.from&&i<a.from+100&&!/\S/.test(a.text.slice(0,i))&&(i=a.from);let d=["",gw(e,u)];return l&&d.push(gw(e,c.lineIndent(a.from,-1))),{changes:{from:i,to:o,insert:jn.of(d)},range:ot.cursor(i+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Mj(t,e){let n=-1;return t.changeByRange(r=>{let s=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,s,r),n=a.number),o=a.to+1}let i=t.changes(s);return{changes:s,range:ot.range(i.mapPos(r.anchor,1),i.mapPos(r.head,1))}})}const Ybt=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new RT(t,{overrideIndentation:i=>{let o=n[i];return o??-1}}),s=Mj(t,(i,o,a)=>{let l=Sj(r,i.from);if(l==null)return;/\S/.test(i.text)||(l=0);let c=/^\s*/.exec(i.text)[0],u=gw(t,l);(c!=u||a.from<i.from+c.length)&&(n[i.from]=l,o.push({from:i.from,to:i.from+c.length,insert:u}))});return s.changes.empty||e(t.update(s,{userEvent:"indent"})),!0},Jbt=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Mj(t,(n,r)=>{r.push({from:n.from,insert:t.facet(mb)})}),{userEvent:"input.indent"})),!0),jme=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Mj(t,(n,r)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let i=CT(s,t.tabSize),o=0,a=gw(t,Math.max(0,i-kC(t)));for(;o<s.length&&o<a.length&&s.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+s.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),Xbt=t=>(t.setTabFocusMode(),!0),Zbt=[{key:"Ctrl-b",run:pme,shift:Sme,preventDefault:!0},{key:"Ctrl-f",run:mme,shift:Eme},{key:"Ctrl-p",run:yme,shift:Ame},{key:"Ctrl-n",run:vme,shift:Tme},{key:"Ctrl-a",run:ybt,shift:Nbt},{key:"Ctrl-e",run:vbt,shift:Ibt},{key:"Ctrl-d",run:Ime},{key:"Ctrl-h",run:IL},{key:"Ctrl-k",run:jbt},{key:"Ctrl-Alt-h",run:Ome},{key:"Ctrl-o",run:$bt},{key:"Ctrl-t",run:Ubt},{key:"Ctrl-v",run:NL}],Qbt=[{key:"ArrowLeft",run:pme,shift:Sme,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cbt,shift:_bt,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:gbt,shift:Tbt,preventDefault:!0},{key:"ArrowRight",run:mme,shift:Eme,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:ubt,shift:Sbt,preventDefault:!0},{mac:"Cmd-ArrowRight",run:bbt,shift:Pbt,preventDefault:!0},{key:"ArrowUp",run:yme,shift:Ame,preventDefault:!0},{mac:"Cmd-ArrowUp",run:pq,shift:gq},{mac:"Ctrl-ArrowUp",run:dq,shift:hq},{key:"ArrowDown",run:vme,shift:Tme,preventDefault:!0},{mac:"Cmd-ArrowDown",run:mq,shift:bq},{mac:"Ctrl-ArrowDown",run:NL,shift:fq},{key:"PageUp",run:dq,shift:hq},{key:"PageDown",run:NL,shift:fq},{key:"Home",run:mbt,shift:Abt,preventDefault:!0},{key:"Mod-Home",run:pq,shift:gq},{key:"End",run:pbt,shift:Cbt,preventDefault:!0},{key:"Mod-End",run:mq,shift:bq},{key:"Enter",run:yq,shift:yq},{key:"Mod-a",run:Rbt},{key:"Backspace",run:IL,shift:IL},{key:"Delete",run:Ime},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ome},{key:"Mod-Delete",mac:"Alt-Delete",run:Mbt},{mac:"Mod-Backspace",run:Fbt},{mac:"Mod-Delete",run:Bbt}].concat(Zbt.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),eyt=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:hbt,shift:Ebt},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:fbt,shift:kbt},{key:"Alt-ArrowUp",run:Hbt},{key:"Shift-Alt-ArrowUp",run:Vbt},{key:"Alt-ArrowDown",run:zbt},{key:"Shift-Alt-ArrowDown",run:Wbt},{key:"Escape",run:Dbt},{key:"Mod-Enter",run:Kbt},{key:"Alt-l",mac:"Ctrl-l",run:Obt},{key:"Mod-i",run:Lbt,preventDefault:!0},{key:"Mod-[",run:jme},{key:"Mod-]",run:Jbt},{key:"Mod-Alt-\\",run:Ybt},{key:"Shift-Mod-k",run:Gbt},{key:"Shift-Mod-\\",run:xbt},{key:"Mod-/",run:V0t},{key:"Alt-A",run:G0t},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Xbt}].concat(Qbt);function Us(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var s=n[r];typeof s=="string"?t.setAttribute(r,s):s!=null&&(t[r]=s)}e++}for(;e<arguments.length;e++)Fme(t,arguments[e]);return t}function Fme(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Fme(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const vq=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class vw{constructor(e,n,r=0,s=e.length,i,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,s),this.bufferStart=r,this.normalize=i?a=>i(vq(a)):vq,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return sl(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=oj(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=ku(e);let s=this.normalize(n);if(s.length)for(let i=0,o=r;;i++){let a=s.charCodeAt(i),l=this.match(a,o,this.bufferPos+this.bufferStart);if(i==s.length-1){if(l)return this.value=l,this;break}o==r&&i<n.length&&n.charCodeAt(i)==a&&o++}}}match(e,n,r){let s=null;for(let i=0;i<this.matches.length;i+=2){let o=this.matches[i],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?s={from:this.matches[i+1],to:r}:(this.matches[i]++,a=!0)),a||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:n,to:r}:this.matches.push(1,n)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(vw.prototype[Symbol.iterator]=function(){return this});const Bme={from:-1,to:-1,match:/.*/.exec("")},jj="gm"+(/x/.unicode==null?"":"u");class $me{constructor(e,n,r,s=0,i=e.length){if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=Bme,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Ume(e,n,r,s,i);this.re=new RegExp(n,jj+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(s);this.curLineStart=o.from,this.matchPos=IC(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,s=r+n[0].length;if(this.matchPos=IC(this.text,s+(r==s?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<s||r>this.value.to)&&(!this.test||this.test(r,s,n)))return this.value={from:r,to:s,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const AN=new WeakMap;class zg{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let s=AN.get(e);if(!s||s.from>=r||s.to<=n){let a=new zg(n,e.sliceString(n,r));return AN.set(e,a),a}if(s.from==n&&s.to==r)return s;let{text:i,from:o}=s;return o>n&&(i=e.sliceString(n,o)+i,o=n),s.to<r&&(i+=e.sliceString(s.to,r)),AN.set(e,new zg(o,i)),new zg(n,i.slice(n-o,r-o))}}class Ume{constructor(e,n,r,s,i){this.text=e,this.to=i,this.done=!1,this.value=Bme,this.matchPos=IC(e,s),this.re=new RegExp(n,jj+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=zg.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,s=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,s,n)))return this.value={from:r,to:s,match:n},this.matchPos=IC(this.text,s+(r==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=zg.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&($me.prototype[Symbol.iterator]=Ume.prototype[Symbol.iterator]=function(){return this});function tyt(t){try{return new RegExp(t,jj),!0}catch{return!1}}function IC(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function RL(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Us("input",{class:"cm-textfield",name:"line",value:e}),r=Us("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),t.dispatch({effects:Zv.of(!1)}),t.focus()):i.keyCode==13&&(i.preventDefault(),s())},onsubmit:i=>{i.preventDefault(),s()}},Us("label",t.state.phrase("Go to line"),": ",n)," ",Us("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Us("button",{name:"close",onclick:()=>{t.dispatch({effects:Zv.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function s(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!i)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=i,h=u?+u.slice(1):0,f=c?+c:a.number;if(c&&d){let g=f/100;l&&(g=g*(l=="-"?-1:1)+a.number/o.doc.lines),f=Math.round(o.doc.lines*g)}else c&&l&&(f=f*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),m=ot.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[Zv.of(!1),Rt.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:r}}const Zv=mn.define(),wq=Ls.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Zv)&&(t=n.value);return t},provide:t=>wC.from(t,e=>e?RL:null)}),nyt=t=>{let e=vC(t,RL);if(!e){let n=[Zv.of(!0)];t.state.field(wq,!1)==null&&n.push(mn.appendConfig.of([wq,ryt])),t.dispatch({effects:n}),e=vC(t,RL)}return e&&e.dom.querySelector("input").select(),!0},ryt=Rt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),syt=({state:t,dispatch:e})=>{let{selection:n}=t,r=ot.create(n.ranges.map(s=>t.wordAt(s.head)||ot.cursor(s.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function iyt(t,e){let{main:n,ranges:r}=t.selection,s=t.wordAt(n.head),i=s&&s.from==n.from&&s.to==n.to;for(let o=!1,a=new vw(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new vw(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(i){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const oyt=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(i=>i.from===i.to))return syt({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(i=>t.sliceDoc(i.from,i.to)!=r))return!1;let s=iyt(t,r);return s?(e(t.update({selection:t.selection.addRange(ot.range(s.from,s.to),!1),effects:Rt.scrollIntoView(s.to)})),!0):!1},yb=Ot.define({combine(t){return Xp(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new yyt(e),scrollToMatch:e=>Rt.scrollIntoView(e)})}});class Hme{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||tyt(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new uyt(this):new lyt(this)}getCursor(e,n=0,r){let s=e.doc?e:Tn.create({doc:e});return r==null&&(r=s.doc.length),this.regexp?eg(this,s,n,r):Qm(this,s,n,r)}}class zme{constructor(e){this.spec=e}}function Qm(t,e,n,r){return new vw(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:s=>s.toLowerCase(),t.wholeWord?ayt(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function ayt(t,e){return(n,r,s,i)=>((i>n||i+s.length<r)&&(i=Math.max(0,n-2),s=t.sliceString(i,Math.min(t.length,r+2))),(e(RC(s,n-i))!=ls.Word||e(OC(s,n-i))!=ls.Word)&&(e(OC(s,r-i))!=ls.Word||e(RC(s,r-i))!=ls.Word))}class lyt extends zme{constructor(e){super(e)}nextMatch(e,n,r){let s=Qm(this.spec,e,r,e.doc.length).nextOverlapping();if(s.done){let i=Math.min(e.doc.length,n+this.spec.unquoted.length);s=Qm(this.spec,e,0,i).nextOverlapping()}return s.done||s.value.from==n&&s.value.to==r?null:s.value}prevMatchInRange(e,n,r){for(let s=r;;){let i=Math.max(n,s-1e4-this.spec.unquoted.length),o=Qm(this.spec,e,i,s),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(i==n)return null;s-=1e4}}prevMatch(e,n,r){let s=this.prevMatchInRange(e,0,n);return s||(s=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=n||s.to!=r)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Qm(this.spec,e,0,e.doc.length),s=[];for(;!r.next().done;){if(s.length>=n)return null;s.push(r.value)}return s}highlight(e,n,r,s){let i=Qm(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)s(i.value.from,i.value.to)}}function eg(t,e,n,r){return new $me(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?cyt(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function RC(t,e){return t.slice(Gs(t,e,!1),e)}function OC(t,e){return t.slice(e,Gs(t,e))}function cyt(t){return(e,n,r)=>!r[0].length||(t(RC(r.input,r.index))!=ls.Word||t(OC(r.input,r.index))!=ls.Word)&&(t(OC(r.input,r.index+r[0].length))!=ls.Word||t(RC(r.input,r.index+r[0].length))!=ls.Word)}class uyt extends zme{nextMatch(e,n,r){let s=eg(this.spec,e,r,e.doc.length).next();return s.done&&(s=eg(this.spec,e,0,n).next()),s.done?null:s.value}prevMatchInRange(e,n,r){for(let s=1;;s++){let i=Math.max(n,r-s*1e4),o=eg(this.spec,e,i,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(i==n||a.from>i+10))return a;if(i==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let s=r.length;s>0;s--){let i=+r.slice(0,s);if(i>0&&i<e.match.length)return e.match[i]+r.slice(s)}return n})}matchAll(e,n){let r=eg(this.spec,e,0,e.doc.length),s=[];for(;!r.next().done;){if(s.length>=n)return null;s.push(r.value)}return s}highlight(e,n,r,s){let i=eg(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!i.next().done;)s(i.value.from,i.value.to)}}const ww=mn.define(),Fj=mn.define(),th=Ls.define({create(t){return new TN(OL(t).create(),null)},update(t,e){for(let n of e.effects)n.is(ww)?t=new TN(n.value.create(),t.panel):n.is(Fj)&&(t=new TN(t.query,n.value?Bj:null));return t},provide:t=>wC.from(t,e=>e.panel)});class TN{constructor(e,n){this.query=e,this.panel=n}}const dyt=In.mark({class:"cm-searchMatch"}),hyt=In.mark({class:"cm-searchMatch cm-searchMatch-selected"}),fyt=Ks.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(th))}update(t){let e=t.state.field(th);(e!=t.startState.field(th)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return In.none;let{view:n}=this,r=new _p;for(let s=0,i=n.visibleRanges,o=i.length;s<o;s++){let{from:a,to:l}=i[s];for(;s<o-1&&l>i[s+1].from-2*250;)l=i[++s].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(h=>h.from==c&&h.to==u);r.add(c,u,d?hyt:dyt)})}return r.finish()}},{decorations:t=>t.decorations});function px(t){return e=>{let n=e.state.field(th,!1);return n&&n.query.spec.valid?t(e,n):Gme(e)}}const LC=px((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let s=ot.single(r.from,r.to),i=t.state.facet(yb);return t.dispatch({selection:s,effects:[$j(t,r),i.scrollToMatch(s.main,t)],userEvent:"select.search"}),Wme(t),!0}),DC=px((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,s=e.prevMatch(n,r,r);if(!s)return!1;let i=ot.single(s.from,s.to),o=t.state.facet(yb);return t.dispatch({selection:i,effects:[$j(t,s),o.scrollToMatch(i.main,t)],userEvent:"select.search"}),Wme(t),!0}),pyt=px((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ot.create(n.map(r=>ot.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),myt=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:s}=n.main,i=[],o=0;for(let a=new vw(t.doc,t.sliceDoc(r,s));!a.next().done;){if(i.length>1e3)return!1;a.value.from==r&&(o=i.length),i.push(ot.range(a.value.from,a.value.to))}return e(t.update({selection:ot.create(i,o),userEvent:"select.search.matches"})),!0},xq=px((t,{query:e})=>{let{state:n}=t,{from:r,to:s}=n.selection.main;if(n.readOnly)return!1;let i=e.nextMatch(n,r,r);if(!i)return!1;let o=i,a=[],l,c,u=[];if(o.from==r&&o.to==s&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Rt.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let d=a.length==0||a[0].from>=i.to?0:i.to-i.from-c.length;l=ot.single(o.from-d,o.to-d),u.push($j(t,o)),u.push(n.facet(yb).scrollToMatch(l.main,t))}return t.dispatch({changes:a,selection:l,effects:u,userEvent:"input.replace"}),!0}),gyt=px((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(s=>{let{from:i,to:o}=s;return{from:i,to:o,insert:e.getReplacement(s)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Rt.announce.of(r),userEvent:"input.replace.all"}),!0});function Bj(t){return t.state.facet(yb).createPanel(t)}function OL(t,e){var n,r,s,i,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(yb);return new Hme({search:((n=e?.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(s=e?.literal)!==null&&s!==void 0?s:c.literal,regexp:(i=e?.regexp)!==null&&i!==void 0?i:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function Vme(t){let e=vC(t,Bj);return e&&e.dom.querySelector("[main-field]")}function Wme(t){let e=Vme(t);e&&e==t.root.activeElement&&e.select()}const Gme=t=>{let e=t.state.field(th,!1);if(e&&e.panel){let n=Vme(t);if(n&&n!=t.root.activeElement){let r=OL(t.state,e.query.spec);r.valid&&t.dispatch({effects:ww.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Fj.of(!0),e?ww.of(OL(t.state,e.query.spec)):mn.appendConfig.of(wyt)]});return!0},qme=t=>{let e=t.state.field(th,!1);if(!e||!e.panel)return!1;let n=vC(t,Bj);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Fj.of(!1)}),!0},byt=[{key:"Mod-f",run:Gme,scope:"editor search-panel"},{key:"F3",run:LC,shift:DC,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:LC,shift:DC,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:qme,scope:"editor search-panel"},{key:"Mod-Shift-l",run:myt},{key:"Mod-Alt-g",run:nyt},{key:"Mod-d",run:oyt,preventDefault:!0}];class yyt{constructor(e){this.view=e;let n=this.query=e.state.field(th).query.spec;this.commit=this.commit.bind(this),this.searchField=Us("input",{value:n.search,placeholder:Co(e,"Find"),"aria-label":Co(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Us("input",{value:n.replace,placeholder:Co(e,"Replace"),"aria-label":Co(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Us("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Us("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Us("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(s,i,o){return Us("button",{class:"cm-button",name:s,onclick:i,type:"button"},o)}this.dom=Us("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,r("next",()=>LC(e),[Co(e,"next")]),r("prev",()=>DC(e),[Co(e,"previous")]),r("select",()=>pyt(e),[Co(e,"all")]),Us("label",null,[this.caseField,Co(e,"match case")]),Us("label",null,[this.reField,Co(e,"regexp")]),Us("label",null,[this.wordField,Co(e,"by word")]),...e.state.readOnly?[]:[Us("br"),this.replaceField,r("replace",()=>xq(e),[Co(e,"replace")]),r("replaceAll",()=>gyt(e),[Co(e,"replace all")])],Us("button",{name:"close",onclick:()=>qme(e),"aria-label":Co(e,"close"),type:"button"},[""])])}commit(){let e=new Hme({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ww.of(e)}))}keydown(e){rmt(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?DC:LC)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),xq(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(ww)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(yb).top}}function Co(t,e){return t.state.phrase(e)}const fS=30,pS=/[\s\.,:;?!]/;function $j(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),s=t.state.doc.lineAt(n).to,i=Math.max(r.from,e-fS),o=Math.min(s,n+fS),a=t.state.sliceDoc(i,o);if(i!=r.from){for(let l=0;l<fS;l++)if(!pS.test(a[l+1])&&pS.test(a[l])){a=a.slice(l);break}}if(o!=s){for(let l=a.length-1;l>a.length-fS;l--)if(!pS.test(a[l-1])&&pS.test(a[l])){a=a.slice(0,l);break}}return Rt.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const vyt=Rt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),wyt=[th,Dh.low(fyt),vyt];function xyt(){return y.jsx("div",{className:"flex items-center justify-center absolute inset-0 z-10 text-sm bg-tk-elements-app-backgroundColor text-tk-elements-app-textColor",children:"File format cannot be displayed."})}function MC(){return MC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MC.apply(null,arguments)}var Kme=t=>{var{theme:e,settings:n={},styles:r=[]}=t,s={".cm-gutters":{}},i={};n.background&&(i.backgroundColor=n.background),n.backgroundImage&&(i.backgroundImage=n.backgroundImage),n.foreground&&(i.color=n.foreground),n.fontSize&&(i.fontSize=n.fontSize),(n.background||n.foreground)&&(s["&"]=i),n.fontFamily&&(s["&.cm-editor .cm-scroller"]={fontFamily:n.fontFamily}),n.gutterBackground&&(s[".cm-gutters"].backgroundColor=n.gutterBackground),n.gutterForeground&&(s[".cm-gutters"].color=n.gutterForeground),n.gutterBorder&&(s[".cm-gutters"].borderRightColor=n.gutterBorder),n.caret&&(s[".cm-content"]={caretColor:n.caret},s[".cm-cursor, .cm-dropCursor"]={borderLeftColor:n.caret});var o={};n.gutterActiveForeground&&(o.color=n.gutterActiveForeground),n.lineHighlight&&(s[".cm-activeLine"]={backgroundColor:n.lineHighlight},o.backgroundColor=n.lineHighlight),s[".cm-activeLineGutter"]=o,n.selection&&(s["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:n.selection+" !important"}),n.selectionMatch&&(s["& .cm-selectionMatch"]={backgroundColor:n.selectionMatch});var a=Rt.theme(s,{dark:e==="dark"}),l=OT.define(r),c=[a,Ogt(l)];return c},_yt={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Syt=[{tag:[qe.keyword,qe.operatorKeyword,qe.modifier,qe.color,qe.constant(qe.name),qe.standard(qe.name),qe.standard(qe.tagName),qe.special(qe.brace),qe.atom,qe.bool,qe.special(qe.variableName)],color:"#0000ff"},{tag:[qe.moduleKeyword,qe.controlKeyword],color:"#af00db"},{tag:[qe.name,qe.deleted,qe.character,qe.macroName,qe.propertyName,qe.variableName,qe.labelName,qe.definition(qe.name)],color:"#0070c1"},{tag:qe.heading,fontWeight:"bold",color:"#0070c1"},{tag:[qe.typeName,qe.className,qe.tagName,qe.number,qe.changed,qe.annotation,qe.self,qe.namespace],color:"#267f99"},{tag:[qe.function(qe.variableName),qe.function(qe.propertyName)],color:"#795e26"},{tag:[qe.number],color:"#098658"},{tag:[qe.operator,qe.punctuation,qe.separator,qe.url,qe.escape,qe.regexp],color:"#383a42"},{tag:[qe.regexp],color:"#af00db"},{tag:[qe.special(qe.string),qe.processingInstruction,qe.string,qe.inserted],color:"#a31515"},{tag:[qe.angleBracket],color:"#383a42"},{tag:qe.strong,fontWeight:"bold"},{tag:qe.emphasis,fontStyle:"italic"},{tag:qe.strikethrough,textDecoration:"line-through"},{tag:[qe.meta,qe.comment],color:"#008000"},{tag:qe.link,color:"#4078f2",textDecoration:"underline"},{tag:qe.invalid,color:"#e45649"}];function Eyt(t){var{theme:e="light",settings:n={},styles:r=[]}={};return Kme({theme:e,settings:MC({},_yt,n),styles:[...Syt,...r]})}var kyt=Eyt(),Cyt={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Ayt=[{tag:[qe.keyword,qe.operatorKeyword,qe.modifier,qe.color,qe.constant(qe.name),qe.standard(qe.name),qe.standard(qe.tagName),qe.special(qe.brace),qe.atom,qe.bool,qe.special(qe.variableName)],color:"#569cd6"},{tag:[qe.controlKeyword,qe.moduleKeyword],color:"#c586c0"},{tag:[qe.name,qe.deleted,qe.character,qe.macroName,qe.propertyName,qe.variableName,qe.labelName,qe.definition(qe.name)],color:"#9cdcfe"},{tag:qe.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[qe.typeName,qe.className,qe.tagName,qe.number,qe.changed,qe.annotation,qe.self,qe.namespace],color:"#4ec9b0"},{tag:[qe.function(qe.variableName),qe.function(qe.propertyName)],color:"#dcdcaa"},{tag:[qe.number],color:"#b5cea8"},{tag:[qe.operator,qe.punctuation,qe.separator,qe.url,qe.escape,qe.regexp],color:"#d4d4d4"},{tag:[qe.regexp],color:"#d16969"},{tag:[qe.special(qe.string),qe.processingInstruction,qe.string,qe.inserted],color:"#ce9178"},{tag:[qe.angleBracket],color:"#808080"},{tag:qe.strong,fontWeight:"bold"},{tag:qe.emphasis,fontStyle:"italic"},{tag:qe.strikethrough,textDecoration:"line-through"},{tag:[qe.meta,qe.comment],color:"#6a9955"},{tag:qe.link,color:"#6a9955",textDecoration:"underline"},{tag:qe.invalid,color:"#ff0000"}];function Tyt(t){var{theme:e="dark",settings:n={},styles:r=[]}={};return Kme({theme:e,settings:MC({},Cyt,n),styles:[...Ayt,...r]})}var Pyt=Tyt();Rt.theme({},{dark:!0});const LL=new fb;function Nyt(t,e={}){return[Iyt(e),t==="dark"?LL.of([Xme()]):LL.of([Jme()])]}function Yme(t){return LL.reconfigure(t==="dark"?Xme():Jme())}function Iyt(t){return Rt.theme({"&":{fontSize:t.fontSize??"12px"},"&.cm-editor":{height:"100%",background:"var(--cm-backgroundColor)",color:"var(--cm-textColor)"},".cm-cursor":{borderLeft:"var(--cm-cursor-width) solid var(--cm-cursor-backgroundColor)"},".cm-scroller":{lineHeight:"1.5","&:focus-visible":{outline:"none"}},".cm-line":{padding:"0 0 0 4px"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorFocused) !important",opacity:"var(--cm-selection-backgroundOpacityFocused, 0.3)"},"&:not(.cm-focused) > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorBlured)",opacity:"var(--cm-selection-backgroundOpacityBlured, 0.3)"},"&.cm-focused > .cm-scroller .cm-matchingBracket":{backgroundColor:"var(--cm-matching-bracket)"},".cm-activeLine":{background:"var(--cm-activeLineBackgroundColor)"},".cm-gutters":{background:"var(--cm-gutter-backgroundColor)",borderRight:0,color:"var(--cm-gutter-textColor)"},".cm-gutter":{"&.cm-lineNumbers":{fontFamily:"Roboto Mono, monospace",fontSize:t.gutterFontSize??t.fontSize??"12px",minWidth:"40px"},"& .cm-activeLineGutter":{background:"transparent",color:"var(--cm-gutter-activeLineTextColor)"},"&.cm-foldGutter .cm-gutterElement > .fold-icon":{cursor:"pointer",color:"var(--cm-foldGutter-textColor)",transform:"translateY(2px)","&:hover":{color:"var(--cm-foldGutter-textColorHover)"}}},".cm-foldGutter .cm-gutterElement":{padding:"0 4px"},".cm-tooltip-autocomplete > ul > li":{minHeight:"18px"},".cm-panel.cm-search label":{marginLeft:"2px",fontSize:"12px"},".cm-panel.cm-search .cm-button":{fontSize:"12px"},".cm-panel.cm-search .cm-textfield":{fontSize:"12px"},".cm-panel.cm-search input[type=checkbox]":{position:"relative",transform:"translateY(2px)",marginRight:"4px"},".cm-panels":{borderColor:"var(--cm-panels-borderColor)"},".cm-panels-bottom":{borderTop:"1px solid var(--cm-panels-borderColor)",backgroundColor:"transparent"},".cm-panel.cm-search":{background:"var(--cm-search-backgroundColor)",color:"var(--cm-search-textColor)",padding:"8px"},".cm-search .cm-button":{background:"var(--cm-search-button-backgroundColor)",borderColor:"var(--cm-search-button-borderColor)",color:"var(--cm-search-button-textColor)",borderRadius:"4px","&:hover":{color:"var(--cm-search-button-textColorHover)"},"&:focus-visible":{outline:"none",borderColor:"var(--cm-search-button-borderColorFocused)"},"&:hover:not(:focus-visible)":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorHover)"},"&:hover:focus-visible":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorFocused)"}},".cm-panel.cm-search [name=close]":{top:"6px",right:"6px",padding:"0 6px",fontSize:"1rem",backgroundColor:"var(--cm-search-closeButton-backgroundColor)",color:"var(--cm-search-closeButton-textColor)","&:hover":{"border-radius":"6px",color:"var(--cm-search-closeButton-textColorHover)",backgroundColor:"var(--cm-search-closeButton-backgroundColorHover)"}},".cm-search input":{background:"var(--cm-search-input-backgroundColor)",borderColor:"var(--cm-search-input-borderColor)",color:"var(--cm-search-input-textColor)",outline:"none",borderRadius:"4px","&:focus-visible":{borderColor:"var(--cm-search-input-borderColorFocused)"}},".cm-tooltip":{background:"var(--cm-tooltip-backgroundColor)",border:"1px solid transparent",borderColor:"var(--cm-tooltip-borderColor)",color:"var(--cm-tooltip-textColor)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected]":{background:"var(--cm-tooltip-backgroundColorSelected)",color:"var(--cm-tooltip-textColorSelected)"},".cm-searchMatch":{backgroundColor:"var(--cm-searchMatch-backgroundColor)"},".cm-tooltip.cm-readonly-tooltip":{padding:"4px",whiteSpace:"nowrap",backgroundColor:"var(--bolt-elements-bg-depth-2)",borderColor:"var(--bolt-elements-borderColorActive)","& .cm-tooltip-arrow:before":{borderTopColor:"var(--bolt-elements-borderColorActive)"},"& .cm-tooltip-arrow:after":{borderTopColor:"transparent"}}})}function Jme(){return kyt}function Xme(){return Pyt}const Ryt={key:"Tab",run:Oyt,shift:jme};function Oyt({state:t,dispatch:e}){return t.readOnly?!1:(e(t.update(Lyt(t,(n,r,s)=>{s.push({from:n,to:r,insert:t.facet(mb)})}),{userEvent:"input.indent"})),!0)}function Lyt(t,e){return t.changeByRange(n=>{const r=[],s=t.doc.lineAt(n.from);if(n.from===n.to)e(n.from,void 0,r,s);else if(n.from<n.to&&n.to<=s.to)e(n.from,n.to,r,s);else{let o=-1;for(let a=n.from;a<=n.to;){const l=t.doc.lineAt(a);l.number>o&&(n.empty||n.to>l.from)&&(e(l.from,void 0,r,l),o=l.number),a=l.to+1}}const i=t.changes(r);return{changes:r,range:ot.range(i.mapPos(n.anchor,1),i.mapPos(n.head,1))}})}const Dyt=[$s.of({name:"VUE",extensions:["vue"],async load(){return ye(()=>import("./index-D18qpNJ5.js"),__vite__mapDeps([96,97,98,1,2,99,100])).then(t=>t.vue())}}),$s.of({name:"TS",extensions:["ts"],async load(){return ye(()=>import("./index-Du7OXBm3.js"),__vite__mapDeps([100,98,1,2])).then(t=>t.javascript({typescript:!0}))}}),$s.of({name:"JS",extensions:["js","mjs","cjs"],async load(){return ye(()=>import("./index-Du7OXBm3.js"),__vite__mapDeps([100,98,1,2])).then(t=>t.javascript())}}),$s.of({name:"TSX",extensions:["tsx"],async load(){return ye(()=>import("./index-Du7OXBm3.js"),__vite__mapDeps([100,98,1,2])).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),$s.of({name:"JSX",extensions:["jsx"],async load(){return ye(()=>import("./index-Du7OXBm3.js"),__vite__mapDeps([100,98,1,2])).then(t=>t.javascript({jsx:!0}))}}),$s.of({name:"HTML",extensions:["html"],async load(){return ye(()=>import("./index-CDArbnrH.js"),__vite__mapDeps([97,98,1,2,99,100])).then(t=>t.html())}}),$s.of({name:"CSS",extensions:["css"],async load(){return ye(()=>import("./index-B3Lg-fVh.js"),__vite__mapDeps([99,98,1,2])).then(t=>t.css())}}),$s.of({name:"SASS",extensions:["sass"],async load(){return ye(()=>import("./index-DaPVH0pc.js"),__vite__mapDeps([101,98,1,2,99])).then(t=>t.sass({indented:!0}))}}),$s.of({name:"SCSS",extensions:["scss"],async load(){return ye(()=>import("./index-DaPVH0pc.js"),__vite__mapDeps([101,98,1,2,99])).then(t=>t.sass({indented:!1}))}}),$s.of({name:"JSON",extensions:["json"],async load(){return ye(()=>import("./index-ChTepeN2.js"),__vite__mapDeps([102,98,1,2])).then(t=>t.json())}}),$s.of({name:"Markdown",extensions:["md"],async load(){return ye(()=>import("./index-BUepXmvw.js"),__vite__mapDeps([103,97,98,1,2,99,100])).then(t=>t.markdown())}}),$s.of({name:"Wasm",extensions:["wat"],async load(){return ye(()=>import("./index-CTU6qCCA.js"),__vite__mapDeps([104,98,1,2])).then(t=>t.wast())}}),$s.of({name:"Python",extensions:["py"],async load(){return ye(()=>import("./index-Dw48G5d-.js"),__vite__mapDeps([105,98,1,2])).then(t=>t.python())}}),$s.of({name:"C++",extensions:["cpp"],async load(){return ye(()=>import("./index-BCaZpILw.js"),__vite__mapDeps([106,98,1,2])).then(t=>t.cpp())}})];async function Myt(t){const e=$s.matchFilename(Dyt,t);if(e)return await e.load()}const jyt=po("CodeMirrorEditor"),Zme=mn.define(),Fyt=Ls.define({create:()=>[],update(t,e){if(!e.state.readOnly)return[];for(const n of e.effects)if(n.is(Zme)&&n.value)return Uyt(e.state);return[]},provide:t=>vj.computeN([t],e=>e.field(t))}),Qme=mn.define(),_q=Ls.define({create(){return!0},update(t,e){for(const n of e.effects)if(n.is(Qme))return n.value;return t}}),ege=N.memo(({id:t,doc:e,debounceScroll:n=100,debounceChange:r=150,autoFocusOnDocumentChange:s=!1,editable:i=!0,onScroll:o,onChange:a,onSave:l,theme:c,settings:u,className:d=""})=>{W0.trace("CodeMirrorEditor");const[h]=N.useState(new fb),f=N.useRef(null),p=N.useRef(),m=N.useRef(),g=N.useRef(),b=N.useRef(),v=N.useRef(o),w=N.useRef(a),_=N.useRef(l);return N.useEffect(()=>{v.current=o,w.current=a,_.current=l,g.current=e,m.current=c}),N.useEffect(()=>{const S=Vw(k=>{w.current?.(k)},r),E=new Rt({parent:f.current,dispatchTransactions(k){const x=E.state.selection;E.update(k);const I=E.state.selection,R=I!==x&&(I===void 0||x===void 0||!I.eq(x));g.current&&(k.some(C=>C.docChanged)||R)&&(S({selection:E.state.selection,content:E.state.doc.toString()}),b.current.set(g.current.filePath,E.state))}});return p.current=E,()=>{p.current?.destroy(),p.current=void 0}},[]),N.useEffect(()=>{p.current&&p.current.dispatch({effects:[Yme(c)]})},[c]),N.useEffect(()=>{b.current=new Map},[t]),N.useEffect(()=>{const S=b.current,E=p.current,k=m.current;if(!e){const I=Sq("",k,u,v,n,_,[h.of([])]);E.setState(I),Byt(E);return}if(e.isBinary)return;e.filePath===""&&jyt.warn("File path should not be empty");let x=S.get(e.filePath);x||(x=Sq(e.value,k,u,v,n,_,[h.of([])]),S.set(e.filePath,x)),E.setState(x),$yt(E,k,i,h,s,e)},[e?.value,i,e?.filePath,s]),y.jsxs("div",{className:Ne("relative h-full",d),children:[e?.isBinary&&y.jsx(xyt,{}),y.jsx("div",{className:"h-full overflow-hidden",ref:f})]})});ege.displayName="CodeMirrorEditor";function Sq(t,e,n,r,s,i,o){return Tn.create({doc:t,extensions:[Rt.domEventHandlers({scroll:Vw((a,l)=>{a.target===l.scrollDOM&&r.current?.({left:l.scrollDOM.scrollLeft,top:l.scrollDOM.scrollTop})},s),keydown:(a,l)=>l.state.readOnly?(l.dispatch({effects:[Zme.of(a.key!=="Escape")]}),!0):!1}),Nyt(e,n),Q0t(),IT.of([...eyt,...lbt,...byt,{key:"Tab",run:nme},{key:"Mod-s",preventDefault:!0,run:()=>(i.current?.(),!0)},Ryt]),mb.of("	"),U0t({closeOnBlur:!1}),wmt({position:"absolute",parent:document.body,tooltipSpace:a=>{const l=a.dom.getBoundingClientRect();return{top:l.top-50,left:l.left,bottom:l.bottom,right:l.right+10}}}),I0t(),Omt(),mmt(),pmt(),cmt(),Hgt(),Tn.tabSize.of(n?.tabSize??2),wgt(),Fyt,_q,Tn.readOnly.from(_q,a=>!a),Mmt(),gmt(),Ngt({markerDOM:a=>{const l=document.createElement("div");return l.className=`fold-icon ${a?"i-ph-caret-down-bold":"i-ph-caret-right-bold"}`,l}}),...o]})}function Byt(t){t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:""}}),t.scrollDOM.scrollTo(0,0)}function $yt(t,e,n,r,s,i){i.value!==t.state.doc.toString()&&t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:i.value}}),t.dispatch({effects:[Qme.of(n&&!i.isBinary)]}),Myt(i.filePath).then(o=>{o&&(t.dispatch({effects:[r.reconfigure([o]),Yme(e)]}),requestAnimationFrame(()=>{const a=t.scrollDOM.scrollLeft,l=t.scrollDOM.scrollTop,c=i.scroll?.left??0,u=i.scroll?.top??0;s&&n&&(a!==c||l!==u?t.scrollDOM.addEventListener("scroll",()=>{t.focus()},{once:!0}):t.focus()),t.scrollDOM.scrollTo(c,u)}))})}function Uyt(t){return t.readOnly?t.selection.ranges.filter(e=>e.empty).map(e=>({pos:e.head,above:!0,strictSide:!0,arrow:!0,create:()=>{const n=document.createElement("div");return n.className="cm-readonly-tooltip",n.textContent="Cannot edit file while AI response is being generated",{dom:n}}})):[]}const bg=N.memo(({className:t,disabledClassName:e,disabled:n=!1,children:r,onClick:s})=>y.jsx("button",{className:Ne("flex items-center shrink-0 gap-1.5 px-1.5 rounded-md py-0.5 text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[Ne("opacity-30",e)]:n},t),disabled:n,onClick:i=>{n||s?.(i)},children:r})),Hyt=N.memo,zyt=Hyt(({selected:t,options:e,setSelected:n})=>{const r=!!e.middle,s=t===e.left.value,i=r&&e.middle?t===e.middle.value:!1;return y.jsxs("div",{className:"flex items-center flex-wrap shrink-0 gap-1 bg-bolt-elements-background-depth-1 overflow-hidden rounded-full p-1",children:[y.jsx(PN,{selected:s,setSelected:()=>n?.(e.left.value),children:e.left.text}),e.middle&&y.jsx(PN,{selected:i,setSelected:()=>n?.(e.middle.value),children:e.middle.text}),y.jsx(PN,{selected:!s&&!i,setSelected:()=>n?.(e.right.value),children:e.right.text})]})}),PN=N.memo(({selected:t,children:e,setSelected:n})=>y.jsxs("button",{onClick:n,className:Ne("bg-transparent text-sm px-2.5 py-0.5 rounded-full relative",t?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive"),children:[y.jsx("span",{className:"relative z-10",children:e}),t&&y.jsx(lt.span,{layoutId:"pill-tab",transition:{duration:.2,ease:Go},className:"absolute inset-0 z-0 bg-bolt-elements-item-backgroundAccent rounded-full"})]})),{createElement:O0,createContext:Vyt,forwardRef:tge,useCallback:Zi,useContext:nge,useEffect:ip,useImperativeHandle:rge,useLayoutEffect:Wyt,useMemo:Gyt,useRef:Qi,useState:Vg}=Yg,Eq=Yg[`useId${Math.random()}`.slice(0,5)],qyt=Wyt,FT=Vyt(null);FT.displayName="PanelGroupContext";const op=qyt,Kyt=typeof Eq=="function"?Eq:()=>null;let Yyt=0;function Uj(t=null){const e=Kyt(),n=Qi(t||e||null);return n.current===null&&(n.current=""+Yyt++),t??n.current}function sge({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:i,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:h,style:f,tagName:p="div",...m}){const g=nge(FT);if(g===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:b,expandPanel:v,getPanelSize:w,getPanelStyle:_,groupId:S,isPanelCollapsed:E,reevaluatePanelConstraints:k,registerPanel:x,resizePanel:I,unregisterPanel:R}=g,C=Uj(o),T=Qi({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:a,minSize:l},id:C,idIsFromProps:o!==void 0,order:h});Qi({didLogMissingDefaultSizeWarning:!1}),op(()=>{const{callbacks:P,constraints:U}=T.current,ee={...U};T.current.id=C,T.current.idIsFromProps=o!==void 0,T.current.order=h,P.onCollapse=c,P.onExpand=u,P.onResize=d,U.collapsedSize=n,U.collapsible=r,U.defaultSize=s,U.maxSize=a,U.minSize=l,(ee.collapsedSize!==U.collapsedSize||ee.collapsible!==U.collapsible||ee.maxSize!==U.maxSize||ee.minSize!==U.minSize)&&k(T.current,ee)}),op(()=>{const P=T.current;return x(P),()=>{R(P)}},[h,C,x,R]),rge(i,()=>({collapse:()=>{b(T.current)},expand:P=>{v(T.current,P)},getId(){return C},getSize(){return w(T.current)},isCollapsed(){return E(T.current)},isExpanded(){return!E(T.current)},resize:P=>{I(T.current,P)}}),[b,v,w,E,C,I]);const O=_(T.current,s);return O0(p,{...m,children:t,className:e,id:o,style:{...O,...f},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":S,"data-panel-id":C,"data-panel-size":parseFloat(""+O.flexGrow).toFixed(1)})}const Qv=tge((t,e)=>O0(sge,{...t,forwardedRef:e}));sge.displayName="Panel";Qv.displayName="forwardRef(Panel)";let DL=null,$f=null;function Jyt(t,e){if(e){const n=(e&cge)!==0,r=(e&uge)!==0,s=(e&dge)!==0,i=(e&hge)!==0;if(n)return s?"se-resize":i?"ne-resize":"e-resize";if(r)return s?"sw-resize":i?"nw-resize":"w-resize";if(s)return"s-resize";if(i)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Xyt(){$f!==null&&(document.head.removeChild($f),DL=null,$f=null)}function NN(t,e){const n=Jyt(t,e);DL!==n&&(DL=n,$f===null&&($f=document.createElement("style"),document.head.appendChild($f)),$f.innerHTML=`*{cursor: ${n}!important;}`)}function ige(t){return t.type==="keydown"}function oge(t){return t.type.startsWith("pointer")}function age(t){return t.type.startsWith("mouse")}function BT(t){if(oge(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(age(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function Zyt(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Qyt(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function evt(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:Aq(t),b:Aq(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;fn(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:Cq(kq(n.a)),b:Cq(kq(n.b))};if(s.a===s.b){const i=r.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let a=i.length;for(;a--;){const l=i[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(s.a-s.b)}const tvt=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function nvt(t){var e;const n=getComputedStyle((e=lge(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function rvt(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||nvt(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||tvt.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function kq(t){let e=t.length;for(;e--;){const n=t[e];if(fn(n,"Missing node"),rvt(n))return n}return null}function Cq(t){return t&&Number(getComputedStyle(t).zIndex)||0}function Aq(t){const e=[];for(;t;)e.push(t),t=lge(t);return e}function lge(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const cge=1,uge=2,dge=4,hge=8,svt=Zyt()==="coarse";let dl=[],Wg=!1,Bd=new Map,$T=new Map;const xw=new Set;function ivt(t,e,n,r,s){var i;const{ownerDocument:o}=e,a={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:s},l=(i=Bd.get(o))!==null&&i!==void 0?i:0;return Bd.set(o,l+1),xw.add(a),jC(),function(){var u;$T.delete(t),xw.delete(a);const d=(u=Bd.get(o))!==null&&u!==void 0?u:1;if(Bd.set(o,d-1),jC(),d===1&&Bd.delete(o),dl.includes(a)){const h=dl.indexOf(a);h>=0&&dl.splice(h,1),zj(),s("up",!0,null)}}}function Tq(t){const{target:e}=t,{x:n,y:r}=BT(t);Wg=!0,Hj({target:e,x:n,y:r}),jC(),dl.length>0&&(FC("down",t),t.preventDefault(),t.stopPropagation())}function jy(t){const{x:e,y:n}=BT(t);if(Wg&&t.buttons===0&&(Wg=!1,FC("up",t)),!Wg){const{target:r}=t;Hj({target:r,x:e,y:n})}FC("move",t),zj(),dl.length>0&&t.preventDefault()}function zm(t){const{target:e}=t,{x:n,y:r}=BT(t);$T.clear(),Wg=!1,dl.length>0&&t.preventDefault(),FC("up",t),Hj({target:e,x:n,y:r}),zj(),jC()}function Hj({target:t,x:e,y:n}){dl.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),xw.forEach(s=>{const{element:i,hitAreaMargins:o}=s,a=i.getBoundingClientRect(),{bottom:l,left:c,right:u,top:d}=a,h=svt?o.coarse:o.fine;if(e>=c-h&&e<=u+h&&n>=d-h&&n<=l+h){if(r!==null&&document.contains(r)&&i!==r&&!i.contains(r)&&!r.contains(i)&&evt(r,i)>0){let p=r,m=!1;for(;p&&!p.contains(i);){if(Qyt(p.getBoundingClientRect(),a)){m=!0;break}p=p.parentElement}if(m)return}dl.push(s)}})}function IN(t,e){$T.set(t,e)}function zj(){let t=!1,e=!1;dl.forEach(r=>{const{direction:s}=r;s==="horizontal"?t=!0:e=!0});let n=0;$T.forEach(r=>{n|=r}),t&&e?NN("intersection",n):t?NN("horizontal",n):e?NN("vertical",n):Xyt()}function jC(){Bd.forEach((t,e)=>{const{body:n}=e;n.removeEventListener("contextmenu",zm),n.removeEventListener("pointerdown",Tq),n.removeEventListener("pointerleave",jy),n.removeEventListener("pointermove",jy)}),window.removeEventListener("pointerup",zm),window.removeEventListener("pointercancel",zm),xw.size>0&&(Wg?(dl.length>0&&Bd.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("contextmenu",zm),n.addEventListener("pointerleave",jy),n.addEventListener("pointermove",jy))}),window.addEventListener("pointerup",zm),window.addEventListener("pointercancel",zm)):Bd.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("pointerdown",Tq,{capture:!0}),n.addEventListener("pointermove",jy))}))}function FC(t,e){xw.forEach(n=>{const{setResizeHandlerState:r}=n,s=dl.includes(n);r(t,s,e)})}function ovt(){const[t,e]=Vg(0);return Zi(()=>e(n=>n+1),[])}function fn(t,e){if(!t)throw console.error(e),Error(e)}const Vj=10;function Cp(t,e,n=Vj){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Au(t,e,n=Vj){return Cp(t,e,n)===0}function Oo(t,e,n){return Cp(t,e,n)===0}function avt(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],i=e[r];if(!Oo(s,i,n))return!1}return!0}function yg({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];fn(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:i,maxSize:o=100,minSize:a=0}=r;if(Cp(n,a)<0)if(i){const l=(s+a)/2;Cp(n,l)<0?n=s:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(Vj)),n}function uv({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:i}){if(Oo(t,0))return e;const o=[...e],[a,l]=r;fn(a!=null,"Invalid first pivot index"),fn(l!=null,"Invalid second pivot index");let c=0;if(i==="keyboard"){{const d=t<0?l:a,h=n[d];fn(h,`Panel constraints not found for index ${d}`);const{collapsedSize:f=0,collapsible:p,minSize:m=0}=h;if(p){const g=e[d];if(fn(g!=null,`Previous layout not found for panel index ${d}`),Oo(g,f)){const b=m-g;Cp(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}{const d=t<0?a:l,h=n[d];fn(h,`No panel constraints found for index ${d}`);const{collapsedSize:f=0,collapsible:p,minSize:m=0}=h;if(p){const g=e[d];if(fn(g!=null,`Previous layout not found for panel index ${d}`),Oo(g,m)){const b=g-f;Cp(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}}{const d=t<0?1:-1;let h=t<0?l:a,f=0;for(;;){const m=e[h];fn(m!=null,`Previous layout not found for panel index ${h}`);const b=yg({panelConstraints:n,panelIndex:h,size:100})-m;if(f+=b,h+=d,h<0||h>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-p:p}{let h=t<0?a:l;for(;h>=0&&h<n.length;){const f=Math.abs(t)-Math.abs(c),p=e[h];fn(p!=null,`Previous layout not found for panel index ${h}`);const m=p-f,g=yg({panelConstraints:n,panelIndex:h,size:m});if(!Oo(p,g)&&(c+=p-g,o[h]=g,c.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?h--:h++}}if(avt(s,o))return s;{const d=t<0?l:a,h=e[d];fn(h!=null,`Previous layout not found for panel index ${d}`);const f=h+c,p=yg({panelConstraints:n,panelIndex:d,size:f});if(o[d]=p,!Oo(p,f)){let m=f-p,b=t<0?l:a;for(;b>=0&&b<n.length;){const v=o[b];fn(v!=null,`Previous layout not found for panel index ${b}`);const w=v+m,_=yg({panelConstraints:n,panelIndex:b,size:w});if(Oo(v,_)||(m-=_-v,o[b]=_),Oo(m,0))break;t>0?b--:b++}}}const u=o.reduce((d,h)=>h+d,0);return Oo(u,100)?o:s}function lvt({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,i=0,o=0;const a=n[0];fn(a!=null,"No pivot index found"),e.forEach((d,h)=>{const{constraints:f}=d,{maxSize:p=100,minSize:m=0}=f;h===a?(r=m,s=p):(i+=m,o+=p)});const l=Math.min(s,100-i),c=Math.max(r,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function _w(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function fge(t,e,n=document){const s=_w(t,n).findIndex(i=>i.getAttribute("data-panel-resize-handle-id")===e);return s??null}function pge(t,e,n){const r=fge(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function mge(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function UT(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function cvt(t,e,n,r=document){var s,i,o,a;const l=UT(e,r),c=_w(t,r),u=l?c.indexOf(l):-1,d=(s=(i=n[u])===null||i===void 0?void 0:i.id)!==null&&s!==void 0?s:null,h=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,h]}function uvt({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:i,setLayout:o}){Qi({didWarnAboutMissingResizeHandle:!1}),op(()=>{if(!i)return;const a=_w(n,i);for(let l=0;l<s.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=lvt({layout:r,panelsArray:s,pivotIndices:[l,l+1]}),h=a[l];if(h!=null){const f=s[l];fn(f,`No panel data found for index "${l}"`),h.setAttribute("aria-controls",f.id),h.setAttribute("aria-valuemax",""+Math.round(c)),h.setAttribute("aria-valuemin",""+Math.round(u)),h.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,s,i]),ip(()=>{if(!i)return;const a=e.current;fn(a,"Eager values not found");const{panelDataArray:l}=a,c=mge(n,i);fn(c!=null,`No group found for id "${n}"`);const u=_w(n,i);fn(u,`No resize handles found for group id "${n}"`);const d=u.map(h=>{const f=h.getAttribute("data-panel-resize-handle-id");fn(f,"Resize handle element has no handle id attribute");const[p,m]=cvt(n,f,l,i);if(p==null||m==null)return()=>{};const g=b=>{if(!b.defaultPrevented)switch(b.key){case"Enter":{b.preventDefault();const v=l.findIndex(w=>w.id===p);if(v>=0){const w=l[v];fn(w,`No panel data found for index ${v}`);const _=r[v],{collapsedSize:S=0,collapsible:E,minSize:k=0}=w.constraints;if(_!=null&&E){const x=uv({delta:Oo(_,S)?k-S:S-_,initialLayout:r,panelConstraints:l.map(I=>I.constraints),pivotIndices:pge(n,f,i),prevLayout:r,trigger:"keyboard"});r!==x&&o(x)}}break}}};return h.addEventListener("keydown",g),()=>{h.removeEventListener("keydown",g)}});return()=>{d.forEach(h=>h())}},[i,t,e,n,r,s,o])}function Pq(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function gge(t,e){const n=t==="horizontal",{x:r,y:s}=BT(e);return n?r:s}function dvt(t,e,n,r,s){const i=n==="horizontal",o=UT(e,s);fn(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute("data-panel-group-id");fn(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const c=gge(n,t),u=mge(a,s);fn(u,`No group element found for id "${a}"`);const d=u.getBoundingClientRect(),h=i?d.width:d.height;return(c-l)/h*100}function hvt(t,e,n,r,s,i){if(ige(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:s!=null?a=s:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:dvt(t,e,n,r,i)}function fvt({panelDataArray:t}){const e=Array(t.length),n=t.map(i=>i.constraints);let r=0,s=100;for(let i=0;i<t.length;i++){const o=n[i];fn(o,`Panel constraints not found for index ${i}`);const{defaultSize:a}=o;a!=null&&(r++,e[i]=a,s-=a)}for(let i=0;i<t.length;i++){const o=n[i];fn(o,`Panel constraints not found for index ${i}`);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,c=s/l;r++,e[i]=c,s-=c}return e}function Vm(t,e,n){e.forEach((r,s)=>{const i=t[s];fn(i,`Panel data not found for index ${s}`);const{callbacks:o,constraints:a,id:l}=i,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||r!==d){n[l]=r;const{onCollapse:h,onExpand:f,onResize:p}=o;p&&p(r,d),u&&(h||f)&&(f&&(d==null||Au(d,c))&&!Au(r,c)&&f(),h&&(d==null||!Au(d,c))&&Au(r,c)&&h())}})}function mS(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function pvt({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:i=3}){const o=n[s];let a;return o==null?a=t!=null?t.toPrecision(i):"1":r.length===1?a="1":a=o.toPrecision(i),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function mvt(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function Nq(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function bge(t){return`react-resizable-panels:${t}`}function yge(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:i}=e;return s?r:i?`${i}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function vge(t,e){try{const n=bge(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function gvt(t,e,n){var r,s;const i=(r=vge(t,n))!==null&&r!==void 0?r:{},o=yge(e);return(s=i[o])!==null&&s!==void 0?s:null}function bvt(t,e,n,r,s){var i;const o=bge(t),a=yge(e),l=(i=vge(t,s))!==null&&i!==void 0?i:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function Iq({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((i,o)=>i+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(i=>`${i}%`).join(", ")}`);if(!Oo(r,100)&&n.length>0)for(let i=0;i<e.length;i++){const o=n[i];fn(o!=null,`No layout data found for index ${i}`);const a=100/r*o;n[i]=a}let s=0;for(let i=0;i<e.length;i++){const o=n[i];fn(o!=null,`No layout data found for index ${i}`);const a=yg({panelConstraints:e,panelIndex:i,size:o});o!=a&&(s+=o-a,n[i]=a)}if(!Oo(s,0))for(let i=0;i<e.length;i++){const o=n[i];fn(o!=null,`No layout data found for index ${i}`);const a=o+s,l=yg({panelConstraints:e,panelIndex:i,size:a});if(o!==l&&(s-=l-o,n[i]=l,Oo(s,0)))break}return n}const yvt=100,dv={getItem:t=>(Nq(dv),dv.getItem(t)),setItem:(t,e)=>{Nq(dv),dv.setItem(t,e)}},Rq={};function wge({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:i=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=dv,style:c,tagName:u="div",...d}){const h=Uj(i),f=Qi(null),[p,m]=Vg(null),[g,b]=Vg([]),v=ovt(),w=Qi({}),_=Qi(new Map),S=Qi(0),E=Qi({autoSaveId:t,direction:r,dragState:p,id:h,keyboardResizeBy:a,onLayout:o,storage:l}),k=Qi({layout:g,panelDataArray:[],panelDataArrayChanged:!1});Qi({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),rge(s,()=>({getId:()=>E.current.id,getLayout:()=>{const{layout:j}=k.current;return j},setLayout:j=>{const{onLayout:W}=E.current,{layout:q,panelDataArray:ne}=k.current,te=Iq({layout:j,panelConstraints:ne.map(Y=>Y.constraints)});Pq(q,te)||(b(te),k.current.layout=te,W&&W(te),Vm(ne,te,w.current))}}),[]),op(()=>{E.current.autoSaveId=t,E.current.direction=r,E.current.dragState=p,E.current.id=h,E.current.onLayout=o,E.current.storage=l}),uvt({committedValuesRef:E,eagerValuesRef:k,groupId:h,layout:g,panelDataArray:k.current.panelDataArray,setLayout:b,panelGroupElement:f.current}),ip(()=>{const{panelDataArray:j}=k.current;if(t){if(g.length===0||g.length!==j.length)return;let W=Rq[t];W==null&&(W=mvt(bvt,yvt),Rq[t]=W);const q=[...j],ne=new Map(_.current);W(t,q,ne,g,l)}},[t,g,l]),ip(()=>{});const x=Zi(j=>{const{onLayout:W}=E.current,{layout:q,panelDataArray:ne}=k.current;if(j.constraints.collapsible){const te=ne.map(xe=>xe.constraints),{collapsedSize:Y=0,panelSize:de,pivotIndices:Se}=af(ne,j,q);if(fn(de!=null,`Panel size not found for panel "${j.id}"`),!Au(de,Y)){_.current.set(j.id,de);const Ae=tg(ne,j)===ne.length-1?de-Y:Y-de,Pe=uv({delta:Ae,initialLayout:q,panelConstraints:te,pivotIndices:Se,prevLayout:q,trigger:"imperative-api"});mS(q,Pe)||(b(Pe),k.current.layout=Pe,W&&W(Pe),Vm(ne,Pe,w.current))}}},[]),I=Zi((j,W)=>{const{onLayout:q}=E.current,{layout:ne,panelDataArray:te}=k.current;if(j.constraints.collapsible){const Y=te.map(K=>K.constraints),{collapsedSize:de=0,panelSize:Se=0,minSize:xe=0,pivotIndices:Ae}=af(te,j,ne),Pe=W??xe;if(Au(Se,de)){const K=_.current.get(j.id),ge=K!=null&&K>=Pe?K:Pe,le=tg(te,j)===te.length-1?Se-ge:ge-Se,se=uv({delta:le,initialLayout:ne,panelConstraints:Y,pivotIndices:Ae,prevLayout:ne,trigger:"imperative-api"});mS(ne,se)||(b(se),k.current.layout=se,q&&q(se),Vm(te,se,w.current))}}},[]),R=Zi(j=>{const{layout:W,panelDataArray:q}=k.current,{panelSize:ne}=af(q,j,W);return fn(ne!=null,`Panel size not found for panel "${j.id}"`),ne},[]),C=Zi((j,W)=>{const{panelDataArray:q}=k.current,ne=tg(q,j);return pvt({defaultSize:W,dragState:p,layout:g,panelData:q,panelIndex:ne})},[p,g]),T=Zi(j=>{const{layout:W,panelDataArray:q}=k.current,{collapsedSize:ne=0,collapsible:te,panelSize:Y}=af(q,j,W);return fn(Y!=null,`Panel size not found for panel "${j.id}"`),te===!0&&Au(Y,ne)},[]),O=Zi(j=>{const{layout:W,panelDataArray:q}=k.current,{collapsedSize:ne=0,collapsible:te,panelSize:Y}=af(q,j,W);return fn(Y!=null,`Panel size not found for panel "${j.id}"`),!te||Cp(Y,ne)>0},[]),P=Zi(j=>{const{panelDataArray:W}=k.current;W.push(j),W.sort((q,ne)=>{const te=q.order,Y=ne.order;return te==null&&Y==null?0:te==null?-1:Y==null?1:te-Y}),k.current.panelDataArrayChanged=!0,v()},[v]);op(()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;const{autoSaveId:j,onLayout:W,storage:q}=E.current,{layout:ne,panelDataArray:te}=k.current;let Y=null;if(j){const Se=gvt(j,te,q);Se&&(_.current=new Map(Object.entries(Se.expandToSizes)),Y=Se.layout)}Y==null&&(Y=fvt({panelDataArray:te}));const de=Iq({layout:Y,panelConstraints:te.map(Se=>Se.constraints)});Pq(ne,de)||(b(de),k.current.layout=de,W&&W(de),Vm(te,de,w.current))}}),op(()=>{const j=k.current;return()=>{j.layout=[]}},[]);const U=Zi(j=>{let W=!1;const q=f.current;return q&&window.getComputedStyle(q,null).getPropertyValue("direction")==="rtl"&&(W=!0),function(te){te.preventDefault();const Y=f.current;if(!Y)return()=>null;const{direction:de,dragState:Se,id:xe,keyboardResizeBy:Ae,onLayout:Pe}=E.current,{layout:K,panelDataArray:ge}=k.current,{initialLayout:re}=Se??{},le=pge(xe,j,Y);let se=hvt(te,j,de,Se,Ae,Y);const fe=de==="horizontal";fe&&W&&(se=-se);const Ce=ge.map(Ue=>Ue.constraints),Ie=uv({delta:se,initialLayout:re??K,panelConstraints:Ce,pivotIndices:le,prevLayout:K,trigger:ige(te)?"keyboard":"mouse-or-touch"}),we=!mS(K,Ie);(oge(te)||age(te))&&S.current!=se&&(S.current=se,!we&&se!==0?fe?IN(j,se<0?cge:uge):IN(j,se<0?dge:hge):IN(j,0)),we&&(b(Ie),k.current.layout=Ie,Pe&&Pe(Ie),Vm(ge,Ie,w.current))}},[]),ee=Zi((j,W)=>{const{onLayout:q}=E.current,{layout:ne,panelDataArray:te}=k.current,Y=te.map(K=>K.constraints),{panelSize:de,pivotIndices:Se}=af(te,j,ne);fn(de!=null,`Panel size not found for panel "${j.id}"`);const Ae=tg(te,j)===te.length-1?de-W:W-de,Pe=uv({delta:Ae,initialLayout:ne,panelConstraints:Y,pivotIndices:Se,prevLayout:ne,trigger:"imperative-api"});mS(ne,Pe)||(b(Pe),k.current.layout=Pe,q&&q(Pe),Vm(te,Pe,w.current))},[]),X=Zi((j,W)=>{const{layout:q,panelDataArray:ne}=k.current,{collapsedSize:te=0,collapsible:Y}=W,{collapsedSize:de=0,collapsible:Se,maxSize:xe=100,minSize:Ae=0}=j.constraints,{panelSize:Pe}=af(ne,j,q);Pe!=null&&(Y&&Se&&Au(Pe,te)?Au(te,de)||ee(j,de):Pe<Ae?ee(j,Ae):Pe>xe&&ee(j,xe))},[ee]),Z=Zi((j,W)=>{const{direction:q}=E.current,{layout:ne}=k.current;if(!f.current)return;const te=UT(j,f.current);fn(te,`Drag handle element not found for id "${j}"`);const Y=gge(q,W);m({dragHandleId:j,dragHandleRect:te.getBoundingClientRect(),initialCursorPosition:Y,initialLayout:ne})},[]),F=Zi(()=>{m(null)},[]),M=Zi(j=>{const{panelDataArray:W}=k.current,q=tg(W,j);q>=0&&(W.splice(q,1),delete w.current[j.id],k.current.panelDataArrayChanged=!0,v())},[v]),G=Gyt(()=>({collapsePanel:x,direction:r,dragState:p,expandPanel:I,getPanelSize:R,getPanelStyle:C,groupId:h,isPanelCollapsed:T,isPanelExpanded:O,reevaluatePanelConstraints:X,registerPanel:P,registerResizeHandle:U,resizePanel:ee,startDragging:Z,stopDragging:F,unregisterPanel:M,panelGroupElement:f.current}),[x,p,r,I,R,C,h,T,O,X,P,U,ee,Z,F,M]),D={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return O0(FT.Provider,{value:G},O0(u,{...d,children:e,className:n,id:i,ref:f,style:{...D,...c},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":h}))}const ML=tge((t,e)=>O0(wge,{...t,forwardedRef:e}));wge.displayName="PanelGroup";ML.displayName="forwardRef(PanelGroup)";function tg(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function af(t,e,n){const r=tg(t,e),i=r===t.length-1?[r-1,r]:[r,r+1],o=n[r];return{...e.constraints,panelSize:o,pivotIndices:i}}function vvt({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){ip(()=>{if(t||n==null||r==null)return;const s=UT(e,r);if(s==null)return;const i=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=s.getAttribute("data-panel-group-id");fn(a,`No group element found for id "${a}"`);const l=_w(a,r),c=fge(a,e,r);fn(c!==null,`No resize element found for id "${e}"`);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return s.addEventListener("keydown",i),()=>{s.removeEventListener("keydown",i)}},[r,t,e,n])}function jL({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:i,onDragging:o,onFocus:a,style:l={},tabIndex:c=0,tagName:u="div",...d}){var h,f;const p=Qi(null),m=Qi({onDragging:o});ip(()=>{m.current.onDragging=o});const g=nge(FT);if(g===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:b,groupId:v,registerResizeHandle:w,startDragging:_,stopDragging:S,panelGroupElement:E}=g,k=Uj(s),[x,I]=Vg("inactive"),[R,C]=Vg(!1),[T,O]=Vg(null),P=Qi({state:x});op(()=>{P.current.state=x}),ip(()=>{if(n)O(null);else{const Z=w(k);O(()=>Z)}},[n,k,w]);const U=(h=r?.coarse)!==null&&h!==void 0?h:15,ee=(f=r?.fine)!==null&&f!==void 0?f:5;return ip(()=>{if(n||T==null)return;const Z=p.current;return fn(Z,"Element ref not attached"),ivt(k,Z,b,{coarse:U,fine:ee},(M,G,D)=>{if(G)switch(M){case"down":{I("drag"),fn(D,'Expected event to be defined for "down" action'),_(k,D);const{onDragging:j}=m.current;j&&j(!0);break}case"move":{const{state:j}=P.current;j!=="drag"&&I("hover"),fn(D,'Expected event to be defined for "move" action'),T(D);break}case"up":{I("hover"),S();const{onDragging:j}=m.current;j&&j(!1);break}}else I("inactive")})},[U,b,n,ee,w,k,T,_,S]),vvt({disabled:n,handleId:k,resizeHandler:T,panelGroupElement:E}),O0(u,{...d,children:t,className:e,id:s,onBlur:()=>{C(!1),i?.()},onFocus:()=>{C(!0),a?.()},ref:p,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...l},tabIndex:c,"data-panel-group-direction":b,"data-panel-group-id":v,"data-resize-handle":"","data-resize-handle-active":x==="drag"?"pointer":R?"keyboard":void 0,"data-resize-handle-state":x,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":k})}jL.displayName="PanelResizeHandle";const Oq=N.memo(({className:t,children:e})=>y.jsx("div",{className:Ne("flex items-center gap-2 bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary border-b border-bolt-elements-borderColor px-4 py-1 min-h-[34px] text-sm",t),children:e}));function wvt(){return globalThis.innerWidth<640}var Wj="ContextMenu",[xvt,OTt]=Fa(Wj,[MA]),Ui=MA(),[_vt,xge]=xvt(Wj),_ge=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,dir:s,modal:i=!0}=t,[o,a]=N.useState(!1),l=Ui(e),c=ps(r),u=N.useCallback(d=>{a(d),c(d)},[c]);return y.jsx(_vt,{scope:e,open:o,onOpenChange:u,modal:i,children:y.jsx(Yse,{...l,dir:s,open:o,onOpenChange:u,modal:i,children:n})})};_ge.displayName=Wj;var Sge="ContextMenuTrigger",Ege=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:r=!1,...s}=t,i=xge(Sge,n),o=Ui(n),a=N.useRef({x:0,y:0}),l=N.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=N.useRef(0),u=N.useCallback(()=>window.clearTimeout(c.current),[]),d=h=>{a.current={x:h.clientX,y:h.clientY},i.onOpenChange(!0)};return N.useEffect(()=>u,[u]),N.useEffect(()=>void(r&&u()),[r,u]),y.jsxs(y.Fragment,{children:[y.jsx(Jse,{...o,virtualRef:l}),y.jsx(En.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...s,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:Mt(t.onContextMenu,h=>{u(),d(h),h.preventDefault()}),onPointerDown:r?t.onPointerDown:Mt(t.onPointerDown,gS(h=>{u(),c.current=window.setTimeout(()=>d(h),700)})),onPointerMove:r?t.onPointerMove:Mt(t.onPointerMove,gS(u)),onPointerCancel:r?t.onPointerCancel:Mt(t.onPointerCancel,gS(u)),onPointerUp:r?t.onPointerUp:Mt(t.onPointerUp,gS(u))})]})});Ege.displayName=Sge;var Svt="ContextMenuPortal",kge=t=>{const{__scopeContextMenu:e,...n}=t,r=Ui(e);return y.jsx(Xse,{...r,...n})};kge.displayName=Svt;var Cge="ContextMenuContent",Age=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=xge(Cge,n),i=Ui(n),o=N.useRef(!1);return y.jsx(Zse,{...i,...r,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),!a.defaultPrevented&&o.current&&a.preventDefault(),o.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),!a.defaultPrevented&&!s.modal&&(o.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Age.displayName=Cge;var Evt="ContextMenuGroup",Tge=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(Qse,{...s,...r,ref:e})});Tge.displayName=Evt;var kvt="ContextMenuLabel",Cvt=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(eie,{...s,...r,ref:e})});Cvt.displayName=kvt;var Avt="ContextMenuItem",Pge=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(tie,{...s,...r,ref:e})});Pge.displayName=Avt;var Tvt="ContextMenuCheckboxItem",Pvt=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(nie,{...s,...r,ref:e})});Pvt.displayName=Tvt;var Nvt="ContextMenuRadioGroup",Ivt=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(rie,{...s,...r,ref:e})});Ivt.displayName=Nvt;var Rvt="ContextMenuRadioItem",Ovt=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(sie,{...s,...r,ref:e})});Ovt.displayName=Rvt;var Lvt="ContextMenuItemIndicator",Dvt=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(iie,{...s,...r,ref:e})});Dvt.displayName=Lvt;var Mvt="ContextMenuSeparator",jvt=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(oie,{...s,...r,ref:e})});jvt.displayName=Mvt;var Fvt="ContextMenuArrow",Bvt=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(aie,{...s,...r,ref:e})});Bvt.displayName=Fvt;var $vt="ContextMenuSubTrigger",Uvt=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(lie,{...s,...r,ref:e})});Uvt.displayName=$vt;var Hvt="ContextMenuSubContent",zvt=N.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=Ui(n);return y.jsx(cie,{...s,...r,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zvt.displayName=Hvt;function gS(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var Vvt=_ge,Wvt=Ege,Gvt=kge,qvt=Age,Kvt=Tge,Yvt=Pge;const FL=po("FileTree"),Jvt=8,Xvt=[/\/node_modules\//,/\/\.next/,/\/\.astro/],Nge=N.memo(({files:t={},onFileSelect:e,selectedFile:n,rootFolder:r,hideRoot:s=!1,collapsed:i=!1,allowFolderSelection:o=!1,hiddenFiles:a,className:l,unsavedFiles:c,fileHistory:u={}})=>{W0.trace("FileTree");const d=N.useMemo(()=>[...Xvt,...a??[]],[a]),h=N.useMemo(()=>e1t(t,r,s,d),[t,r,s,d]),[f,p]=N.useState(()=>i?new Set(h.filter(w=>w.kind==="folder").map(w=>w.fullPath)):new Set);N.useEffect(()=>{if(i){p(new Set(h.filter(w=>w.kind==="folder").map(w=>w.fullPath)));return}p(w=>{const _=new Set;for(const S of h)S.kind==="folder"&&w.has(S.fullPath)&&_.add(S.fullPath);return _})},[h,i]);const m=N.useMemo(()=>{const w=[];let _=Number.MAX_SAFE_INTEGER;for(const S of h){const E=S.depth;_===E&&(_=Number.MAX_SAFE_INTEGER),f.has(S.fullPath)&&(_=Math.min(_,E)),!(_<E)&&w.push(S)}return w},[h,f]),g=w=>{p(_=>{const S=new Set(_);return S.has(w)?S.delete(w):S.add(w),S})},b=w=>{try{navigator.clipboard.writeText(w.fullPath)}catch(_){FL.error(_)}},v=w=>{try{navigator.clipboard.writeText(w.fullPath.substring((r||"").length))}catch(_){FL.error(_)}};return y.jsx("div",{className:Ne("text-sm",l,"overflow-y-auto"),children:m.map(w=>{switch(w.kind){case"file":return y.jsx(Qvt,{selected:n===w.fullPath,file:w,unsavedChanges:c?.has(w.fullPath),fileHistory:u,onCopyPath:()=>{b(w)},onCopyRelativePath:()=>{v(w)},onClick:()=>{e?.(w.fullPath)}},w.id);case"folder":return y.jsx(Zvt,{folder:w,selected:o&&n===w.fullPath,collapsed:f.has(w.fullPath),onCopyPath:()=>{b(w)},onCopyRelativePath:()=>{v(w)},onClick:()=>{g(w.fullPath)}},w.id);default:return}})})});function Lq({onSelect:t,children:e}){return y.jsxs(Yvt,{onSelect:t,className:"flex items-center gap-2 px-2 py-1.5 outline-0 text-sm text-bolt-elements-textPrimary cursor-pointer ws-nowrap text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive rounded-md",children:[y.jsx("span",{className:"size-4 shrink-0"}),y.jsx("span",{children:e})]})}function Ige({onCopyPath:t,onCopyRelativePath:e,children:n}){return y.jsxs(Vvt,{children:[y.jsx(Wvt,{children:n}),y.jsx(Gvt,{children:y.jsx(qvt,{style:{zIndex:998},className:"border border-bolt-elements-borderColor rounded-md z-context-menu bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-2 data-[state=open]:animate-in animate-duration-100 data-[state=open]:fade-in-0 data-[state=open]:zoom-in-98 w-56",children:y.jsxs(Kvt,{className:"p-1 border-b-px border-solid border-bolt-elements-borderColor",children:[y.jsx(Lq,{onSelect:t,children:"Copy path"}),y.jsx(Lq,{onSelect:e,children:"Copy relative path"})]})})})]})}function Zvt({folder:t,collapsed:e,selected:n=!1,onCopyPath:r,onCopyRelativePath:s,onClick:i}){return y.jsx(Ige,{onCopyPath:r,onCopyRelativePath:s,children:y.jsx(Rge,{className:Ne("group",{"bg-transparent text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive":!n,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":n}),depth:t.depth,iconClasses:Ne({"i-ph:caret-right scale-98":e,"i-ph:caret-down scale-98":!e}),onClick:i,children:t.name})})}function Qvt({file:{depth:t,name:e,fullPath:n},onClick:r,onCopyPath:s,onCopyRelativePath:i,selected:o,unsavedChanges:a=!1,fileHistory:l={}}){const c=l[n],{additions:u,deletions:d}=N.useMemo(()=>{if(!c?.originalContent)return{additions:0,deletions:0};const f=c.originalContent.replace(/\r\n/g,`
`),p=c.versions[c.versions.length-1]?.content.replace(/\r\n/g,`
`)||"";return f===p?{additions:0,deletions:0}:b0(f,p,{newlineIsToken:!1,ignoreWhitespace:!0,ignoreCase:!1}).reduce((g,b)=>(b.added&&(g.additions+=b.value.split(`
`).length),b.removed&&(g.deletions+=b.value.split(`
`).length),g),{additions:0,deletions:0})},[c]),h=u>0||d>0;return y.jsx(Ige,{onCopyPath:s,onCopyRelativePath:i,children:y.jsx(Rge,{className:Ne("group",{"bg-transparent hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-item-contentDefault":!o,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":o}),depth:t,iconClasses:Ne("i-ph:file-duotone scale-98",{"group-hover:text-bolt-elements-item-contentActive":!o}),onClick:r,children:y.jsxs("div",{className:Ne("flex items-center",{"group-hover:text-bolt-elements-item-contentActive":!o}),children:[y.jsx("div",{className:"flex-1 truncate pr-2",children:e}),y.jsxs("div",{className:"flex items-center gap-1",children:[h&&y.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[u>0&&y.jsxs("span",{className:"text-green-500",children:["+",u]}),d>0&&y.jsxs("span",{className:"text-red-500",children:["-",d]})]}),a&&y.jsx("span",{className:"i-ph:circle-fill scale-68 shrink-0 text-orange-500"})]})]})})})}function Rge({depth:t,iconClasses:e,onClick:n,className:r,children:s}){return y.jsxs("button",{className:Ne("flex items-center gap-1.5 w-full pr-2 border-2 border-transparent text-faded py-0.5",r),style:{paddingLeft:`${6+t*Jvt}px`},onClick:()=>n?.(),children:[y.jsx("div",{className:Ne("scale-120 shrink-0",e)}),y.jsx("div",{className:"truncate w-full text-left",children:s})]})}function e1t(t,e="/",n,r){const s=new Set,i=[];let o=0;e==="/"&&!n&&(o=1,i.push({kind:"folder",name:"/",depth:0,id:0,fullPath:"/"}));for(const[a,l]of Object.entries(t)){const c=a.split("/").filter(p=>p),u=c.at(-1);if(!u||t1t(a,u,r))continue;let d="",h=0,f=0;for(;h<c.length;){const p=c[h],m=d+=`/${p}`;if(!m.startsWith(e)||n&&m===e){h++;continue}h===c.length-1&&l?.type==="file"?i.push({kind:"file",id:i.length,name:p,fullPath:m,depth:f+o}):s.has(m)||(s.add(m),i.push({kind:"folder",id:i.length,name:p,fullPath:m,depth:f+o})),h++,f++}}return n1t(e,i,n)}function t1t(t,e,n){return n.some(r=>typeof r=="string"?e===r:r.test(t))}function n1t(t,e,n){FL.trace("sortFileList");const r=new Map,s=new Map;e.sort((a,l)=>r1t(a,l));for(const a of e){r.set(a.fullPath,a);const l=a.fullPath.slice(0,a.fullPath.lastIndexOf("/"));l!==t.slice(0,t.lastIndexOf("/"))&&(s.has(l)||s.set(l,[]),s.get(l)?.push(a))}const i=[],o=a=>{const l=r.get(a);l&&i.push(l);const c=s.get(a);if(c)for(const u of c)u.kind==="folder"?o(u.fullPath):i.push(u)};if(n){const a=s.get(t)||[];for(const l of a)o(l.fullPath)}else o(t);return i}function r1t(t,e){return t.kind!==e.kind?t.kind==="folder"?-1:1:t.name.localeCompare(e.name,void 0,{numeric:!0,sensitivity:"base"})}const s1t=new RegExp(`^${Hu.split("/").slice(0,-1).join("/").replaceAll("/","\\/")}/`),i1t={open:{y:0,opacity:1,transition:{duration:.15,ease:Go}},close:{y:6,opacity:0,transition:{duration:.15,ease:Go}}},o1t=N.memo(({files:t,pathSegments:e=[],onFileSelect:n})=>{W0.trace("FileBreadcrumb");const[r,s]=N.useState(null),i=N.useRef(null),o=N.useRef([]),a=l=>{s(c=>c===l?null:l)};return N.useEffect(()=>{const l=c=>{r!==null&&!i.current?.contains(c.target)&&!o.current.some(u=>u?.contains(c.target))&&s(null)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[r]),t===void 0||e.length===0?null:y.jsx("div",{className:"flex",children:e.map((l,c)=>{const u=c===e.length-1,d=e.slice(0,c).join("/");if(!s1t.test(d))return null;const h=r===c;return y.jsx("div",{className:"relative flex items-center",children:y.jsxs(BA,{open:h,modal:!1,children:[y.jsx($A,{asChild:!0,children:y.jsxs("span",{ref:f=>{o.current[c]=f},className:Ne("flex items-center gap-1.5 cursor-pointer shrink-0",{"text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!h,"text-bolt-elements-textPrimary underline":h,"pr-4":u}),onClick:()=>a(c),children:[u&&y.jsx("div",{className:"i-ph:file-duotone"}),l]})}),c>0&&!u&&y.jsx("span",{className:"i-ph:caret-right inline-block mx-1"}),y.jsx(Ic,{children:h&&y.jsx(UA,{children:y.jsx(HA,{className:"z-file-tree-breadcrumb",asChild:!0,align:"start",side:"bottom",avoidCollisions:!1,children:y.jsxs(lt.div,{ref:i,initial:"close",animate:"open",exit:"close",variants:i1t,children:[y.jsx("div",{className:"rounded-lg overflow-hidden",children:y.jsx("div",{className:"max-h-[50vh] min-w-[300px] overflow-scroll bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor shadow-sm rounded-lg",children:y.jsx(Nge,{files:t,hideRoot:!0,rootFolder:d,collapsed:!0,allowFolderSelection:!0,selectedFile:`${d}/${l}`,onFileSelect:f=>{s(null),n?.(f)}})})}),y.jsx(F8e,{className:"fill-bolt-elements-borderColor"})]})})})})]})},c)})})});var Oge={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={};return(()=>{var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.FitAddon=void 0,r.FitAddon=class{activate(s){this._terminal=s}dispose(){}fit(){const s=this.proposeDimensions();if(!s||!this._terminal||isNaN(s.cols)||isNaN(s.rows))return;const i=this._terminal._core;this._terminal.rows===s.rows&&this._terminal.cols===s.cols||(i._renderService.clear(),this._terminal.resize(s.cols,s.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const s=this._terminal._core,i=s._renderService.dimensions;if(i.css.cell.width===0||i.css.cell.height===0)return;const o=this._terminal.options.scrollback===0?0:s.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(a.getPropertyValue("height")),c=Math.max(0,parseInt(a.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),d=l-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),h=c-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(h/i.css.cell.width)),rows:Math.max(1,Math.floor(d/i.css.cell.height))}}}})(),n})())})(Oge);var a1t=Oge.exports,Lge={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={6:(o,a)=>{function l(u){try{const d=new URL(u),h=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return u.toLocaleLowerCase().startsWith(h.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(u,d,h,f={}){this._terminal=u,this._regex=d,this._handler=h,this._options=f}provideLinks(u,d){const h=c.computeLink(u,this._regex,this._terminal,this._handler);d(this._addCallbacks(h))}_addCallbacks(u){return u.map(d=>(d.leave=this._options.leave,d.hover=(h,f)=>{if(this._options.hover){const{range:p}=d;this._options.hover(h,f,p)}},d))}};class c{static computeLink(d,h,f,p){const m=new RegExp(h.source,(h.flags||"")+"g"),[g,b]=c._getWindowedLineStrings(d-1,f),v=g.join("");let w;const _=[];for(;w=m.exec(v);){const S=w[0];if(!l(S))continue;const[E,k]=c._mapStrIdx(f,b,0,w.index),[x,I]=c._mapStrIdx(f,E,k,S.length);if(E===-1||k===-1||x===-1||I===-1)continue;const R={start:{x:k+1,y:E+1},end:{x:I,y:x+1}};_.push({range:R,text:S,activate:p})}return _}static _getWindowedLineStrings(d,h){let f,p=d,m=d,g=0,b="";const v=[];if(f=h.buffer.active.getLine(d)){const w=f.translateToString(!0);if(f.isWrapped&&w[0]!==" "){for(g=0;(f=h.buffer.active.getLine(--p))&&g<2048&&(b=f.translateToString(!0),g+=b.length,v.push(b),f.isWrapped&&b.indexOf(" ")===-1););v.reverse()}for(v.push(w),g=0;(f=h.buffer.active.getLine(++m))&&f.isWrapped&&g<2048&&(b=f.translateToString(!0),g+=b.length,v.push(b),b.indexOf(" ")===-1););}return[v,p]}static _mapStrIdx(d,h,f,p){const m=d.buffer.active,g=m.getNullCell();let b=f;for(;p;){const v=m.getLine(h);if(!v)return[-1,-1];for(let w=b;w<v.length;++w){v.getCell(w,g);const _=g.getChars();if(g.getWidth()&&(p-=_.length||1,w===v.length-1&&_==="")){const S=m.getLine(h+1);S&&S.isWrapped&&(S.getCell(0,g),g.getWidth()===2&&(p+=1))}if(p<0)return[h,w]}h++,b=0}return[h,b]}}a.LinkComputer=c}},r={};function s(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return n[o](l,l.exports,s),l.exports}var i={};return(()=>{var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;const a=s(6),l=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function c(u,d){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(u=c,d={}){this._handler=u,this._options=d}activate(u){this._terminal=u;const d=this._options,h=d.urlRegex||l;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,h,this._handler,d))}dispose(){this._linkProvider?.dispose()}}})(),i})())})(Lge);var l1t=Lge.exports,Dge={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(globalThis,()=>(()=>{var n={4567:function(o,a,l){var c=this&&this.__decorate||function(v,w,_,S){var E,k=arguments.length,x=k<3?w:S===null?S=Object.getOwnPropertyDescriptor(w,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,w,_,S);else for(var I=v.length-1;I>=0;I--)(E=v[I])&&(x=(k<3?E(x):k>3?E(w,_,x):E(w,_))||x);return k>3&&x&&Object.defineProperty(w,_,x),x},u=this&&this.__param||function(v,w){return function(_,S){w(_,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const d=l(9042),h=l(9924),f=l(844),p=l(4725),m=l(2585),g=l(3656);let b=a.AccessibilityManager=class extends f.Disposable{constructor(v,w,_,S){super(),this._terminal=v,this._coreBrowserService=_,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let E=0;E<this._terminal.rows;E++)this._rowElements[E]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[E]);if(this._topBoundaryFocusListener=E=>this._handleBoundaryFocus(E,0),this._bottomBoundaryFocusListener=E=>this._handleBoundaryFocus(E,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new h.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(E=>this._handleResize(E.rows))),this.register(this._terminal.onRender(E=>this._refreshRows(E.start,E.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(E=>this._handleChar(E))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(E=>this._handleTab(E))),this.register(this._terminal.onKey(E=>this._handleKey(E.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,g.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,f.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(v){for(let w=0;w<v;w++)this._handleChar(" ")}_handleChar(v){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==v&&(this._charsToAnnounce+=v):this._charsToAnnounce+=v,v===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(v){this._clearLiveRegion(),/\p{Control}/u.test(v)||this._charsToConsume.push(v)}_refreshRows(v,w){this._liveRegionDebouncer.refresh(v,w,this._terminal.rows)}_renderRows(v,w){const _=this._terminal.buffer,S=_.lines.length.toString();for(let E=v;E<=w;E++){const k=_.lines.get(_.ydisp+E),x=[],I=k?.translateToString(!0,void 0,void 0,x)||"",R=(_.ydisp+E+1).toString(),C=this._rowElements[E];C&&(I.length===0?(C.innerText="",this._rowColumns.set(C,[0,1])):(C.textContent=I,this._rowColumns.set(C,x)),C.setAttribute("aria-posinset",R),C.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(v,w){const _=v.target,S=this._rowElements[w===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(w===0?"1":`${this._terminal.buffer.lines.length}`)||v.relatedTarget!==S)return;let E,k;if(w===0?(E=_,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(E=this._rowElements.shift(),k=_,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),w===0){const x=this._createAccessibilityTreeNode();this._rowElements.unshift(x),this._rowContainer.insertAdjacentElement("afterbegin",x)}else{const x=this._createAccessibilityTreeNode();this._rowElements.push(x),this._rowContainer.appendChild(x)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(w===0?-1:1),this._rowElements[w===0?1:this._rowElements.length-2].focus(),v.preventDefault(),v.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const v=document.getSelection();if(!v)return;if(v.isCollapsed)return void(this._rowContainer.contains(v.anchorNode)&&this._terminal.clearSelection());if(!v.anchorNode||!v.focusNode)return void console.error("anchorNode and/or focusNode are null");let w={node:v.anchorNode,offset:v.anchorOffset},_={node:v.focusNode,offset:v.focusOffset};if((w.node.compareDocumentPosition(_.node)&Node.DOCUMENT_POSITION_PRECEDING||w.node===_.node&&w.offset>_.offset)&&([w,_]=[_,w]),w.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(w={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(w.node))return;const S=this._rowElements.slice(-1)[0];if(_.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(_={node:S,offset:S.textContent?.length??0}),!this._rowContainer.contains(_.node))return;const E=({node:I,offset:R})=>{const C=I instanceof Text?I.parentNode:I;let T=parseInt(C?.getAttribute("aria-posinset"),10)-1;if(isNaN(T))return console.warn("row is invalid. Race condition?"),null;const O=this._rowColumns.get(C);if(!O)return console.warn("columns is null. Race condition?"),null;let P=R<O.length?O[R]:O.slice(-1)[0]+1;return P>=this._terminal.cols&&(++T,P=0),{row:T,column:P}},k=E(w),x=E(_);if(k&&x){if(k.row>x.row||k.row===x.row&&k.column>=x.column)throw new Error("invalid range");this._terminal.select(k.column,k.row,(x.row-k.row)*this._terminal.cols-k.column+x.column)}}_handleResize(v){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let w=this._rowContainer.children.length;w<this._terminal.rows;w++)this._rowElements[w]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[w]);for(;this._rowElements.length>v;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const v=this._coreBrowserService.mainDocument.createElement("div");return v.setAttribute("role","listitem"),v.tabIndex=-1,this._refreshRowDimensions(v),v}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let v=0;v<this._terminal.rows;v++)this._refreshRowDimensions(this._rowElements[v])}}_refreshRowDimensions(v){v.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=b=c([u(1,m.IInstantiationService),u(2,p.ICoreBrowserService),u(3,p.IRenderService)],b)},3614:(o,a)=>{function l(h){return h.replace(/\r?\n/g,"\r")}function c(h,f){return f?"\x1B[200~"+h+"\x1B[201~":h}function u(h,f,p,m){h=c(h=l(h),p.decPrivateModes.bracketedPasteMode&&m.rawOptions.ignoreBracketedPasteMode!==!0),p.triggerDataEvent(h,!0),f.value=""}function d(h,f,p){const m=p.getBoundingClientRect(),g=h.clientX-m.left-10,b=h.clientY-m.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${g}px`,f.style.top=`${b}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=l,a.bracketTextForPaste=c,a.copyHandler=function(h,f){h.clipboardData&&h.clipboardData.setData("text/plain",f.selectionText),h.preventDefault()},a.handlePasteEvent=function(h,f,p,m){h.stopPropagation(),h.clipboardData&&u(h.clipboardData.getData("text/plain"),f,p,m)},a.paste=u,a.moveTextAreaUnderMouseCursor=d,a.rightClickHandler=function(h,f,p,m,g){d(h,f,p),g&&m.rightClickSelect(h),f.value=m.selectionText,f.select()}},7239:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const c=l(1505);a.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(u,d,h){this._css.set(u,d,h)}getCss(u,d){return this._css.get(u,d)}setColor(u,d,h){this._color.set(u,d,h)}getColor(u,d){return this._color.get(u,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(l,c,u,d){l.addEventListener(c,u,d);let h=!1;return{dispose:()=>{h||(h=!0,l.removeEventListener(c,u,d))}}}},3551:function(o,a,l){var c=this&&this.__decorate||function(b,v,w,_){var S,E=arguments.length,k=E<3?v:_===null?_=Object.getOwnPropertyDescriptor(v,w):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,v,w,_);else for(var x=b.length-1;x>=0;x--)(S=b[x])&&(k=(E<3?S(k):E>3?S(v,w,k):S(v,w))||k);return E>3&&k&&Object.defineProperty(v,w,k),k},u=this&&this.__param||function(b,v){return function(w,_){v(w,_,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier=void 0;const d=l(3656),h=l(8460),f=l(844),p=l(2585),m=l(4725);let g=a.Linkifier=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(b,v,w,_,S){super(),this._element=b,this._mouseService=v,this._renderService=w,this._bufferService=_,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new h.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new h.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(b){this._lastMouseEvent=b;const v=this._positionFromMouseEvent(b,this._element,this._mouseService);if(!v)return;this._isMouseOut=!1;const w=b.composedPath();for(let _=0;_<w.length;_++){const S=w[_];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&v.x===this._lastBufferCell.x&&v.y===this._lastBufferCell.y||(this._handleHover(v),this._lastBufferCell=v)}_handleHover(b){if(this._activeLine!==b.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(b,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,b)||(this._clearCurrentLink(),this._askForLink(b,!0))}_askForLink(b,v){this._activeProviderReplies&&v||(this._activeProviderReplies?.forEach(_=>{_?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=b.y);let w=!1;for(const[_,S]of this._linkProviderService.linkProviders.entries())v?this._activeProviderReplies?.get(_)&&(w=this._checkLinkProviderResult(_,b,w)):S.provideLinks(b.y,E=>{if(this._isMouseOut)return;const k=E?.map(x=>({link:x}));this._activeProviderReplies?.set(_,k),w=this._checkLinkProviderResult(_,b,w),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(b.y,this._activeProviderReplies)})}_removeIntersectingLinks(b,v){const w=new Set;for(let _=0;_<v.size;_++){const S=v.get(_);if(S)for(let E=0;E<S.length;E++){const k=S[E],x=k.link.range.start.y<b?0:k.link.range.start.x,I=k.link.range.end.y>b?this._bufferService.cols:k.link.range.end.x;for(let R=x;R<=I;R++){if(w.has(R)){S.splice(E--,1);break}w.add(R)}}}}_checkLinkProviderResult(b,v,w){if(!this._activeProviderReplies)return w;const _=this._activeProviderReplies.get(b);let S=!1;for(let E=0;E<b;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(S=!0);if(!S&&_){const E=_.find(k=>this._linkAtPosition(k.link,v));E&&(w=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!w)for(let E=0;E<this._activeProviderReplies.size;E++){const k=this._activeProviderReplies.get(E)?.find(x=>this._linkAtPosition(x.link,v));if(k){w=!0,this._handleNewLink(k);break}}return w}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(b){if(!this._currentLink)return;const v=this._positionFromMouseEvent(b,this._element,this._mouseService);v&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,v)&&this._currentLink.link.activate(b,this._currentLink.link.text)}_clearCurrentLink(b,v){this._currentLink&&this._lastMouseEvent&&(!b||!v||this._currentLink.link.range.start.y>=b&&this._currentLink.link.range.end.y<=v)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(b){if(!this._lastMouseEvent)return;const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._linkAtPosition(b.link,v)&&(this._currentLink=b,this._currentLink.state={decorations:{underline:b.link.decorations===void 0||b.link.decorations.underline,pointerCursor:b.link.decorations===void 0||b.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,b.link,this._lastMouseEvent),b.link.decorations={},Object.defineProperties(b.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:w=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==w&&(this._currentLink.state.decorations.pointerCursor=w,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",w))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:w=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==w&&(this._currentLink.state.decorations.underline=w,this._currentLink.state.isHovered&&this._fireUnderlineEvent(b.link,w))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(w=>{if(!this._currentLink)return;const _=w.start===0?0:w.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+w.end;if(this._currentLink.link.range.start.y>=_&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(_,S),this._lastMouseEvent)){const E=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);E&&this._askForLink(E,!1)}})))}_linkHover(b,v,w){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!0),this._currentLink.state.decorations.pointerCursor&&b.classList.add("xterm-cursor-pointer")),v.hover&&v.hover(w,v.text)}_fireUnderlineEvent(b,v){const w=b.range,_=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(w.start.x-1,w.start.y-_-1,w.end.x,w.end.y-_-1,void 0);(v?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(b,v,w){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!1),this._currentLink.state.decorations.pointerCursor&&b.classList.remove("xterm-cursor-pointer")),v.leave&&v.leave(w,v.text)}_linkAtPosition(b,v){const w=b.range.start.y*this._bufferService.cols+b.range.start.x,_=b.range.end.y*this._bufferService.cols+b.range.end.x,S=v.y*this._bufferService.cols+v.x;return w<=S&&S<=_}_positionFromMouseEvent(b,v,w){const _=w.getCoords(b,v,this._bufferService.cols,this._bufferService.rows);if(_)return{x:_[0],y:_[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(b,v,w,_,S){return{x1:b,y1:v,x2:w,y2:_,cols:this._bufferService.cols,fg:S}}};a.Linkifier=g=c([u(1,m.IMouseService),u(2,m.IRenderService),u(3,p.IBufferService),u(4,m.ILinkProviderService)],g)},9042:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(o,a,l){var c=this&&this.__decorate||function(m,g,b,v){var w,_=arguments.length,S=_<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,g,b,v);else for(var E=m.length-1;E>=0;E--)(w=m[E])&&(S=(_<3?w(S):_>3?w(g,b,S):w(g,b))||S);return _>3&&S&&Object.defineProperty(g,b,S),S},u=this&&this.__param||function(m,g){return function(b,v){g(b,v,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const d=l(511),h=l(2585);let f=a.OscLinkProvider=class{constructor(m,g,b){this._bufferService=m,this._optionsService=g,this._oscLinkService=b}provideLinks(m,g){const b=this._bufferService.buffer.lines.get(m-1);if(!b)return void g(void 0);const v=[],w=this._optionsService.rawOptions.linkHandler,_=new d.CellData,S=b.getTrimmedLength();let E=-1,k=-1,x=!1;for(let I=0;I<S;I++)if(k!==-1||b.hasContent(I)){if(b.loadCell(I,_),_.hasExtendedAttrs()&&_.extended.urlId){if(k===-1){k=I,E=_.extended.urlId;continue}x=_.extended.urlId!==E}else k!==-1&&(x=!0);if(x||k!==-1&&I===S-1){const R=this._oscLinkService.getLinkData(E)?.uri;if(R){const C={start:{x:k+1,y:m},end:{x:I+(x||I!==S-1?0:1),y:m}};let T=!1;if(!w?.allowNonHttpProtocols)try{const O=new URL(R);["http:","https:"].includes(O.protocol)||(T=!0)}catch{T=!0}T||v.push({text:R,range:C,activate:(O,P)=>w?w.activate(O,P,C):p(0,P),hover:(O,P)=>w?.hover?.(O,P,C),leave:(O,P)=>w?.leave?.(O,P,C)})}x=!1,_.hasExtendedAttrs()&&_.extended.urlId?(k=I,E=_.extended.urlId):(k=-1,E=-1)}}g(v)}};function p(m,g){if(confirm(`Do you want to navigate to ${g}?

WARNING: This link could potentially be dangerous`)){const b=window.open();if(b){try{b.opener=null}catch{}b.location.href=g}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=f=c([u(0,h.IBufferService),u(1,h.IOptionsService),u(2,h.IOscLinkService)],f)},6193:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(l,c){this._renderCallback=l,this._coreBrowserService=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},3236:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const c=l(3614),u=l(3656),d=l(3551),h=l(9042),f=l(3730),p=l(1680),m=l(3107),g=l(5744),b=l(2950),v=l(1296),w=l(428),_=l(4269),S=l(5114),E=l(8934),k=l(3230),x=l(9312),I=l(4725),R=l(6731),C=l(8055),T=l(8969),O=l(8460),P=l(844),U=l(6114),ee=l(8437),X=l(2584),Z=l(7399),F=l(5941),M=l(9074),G=l(2585),D=l(5435),j=l(4567),W=l(779);class q extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(te={}){super(te),this.browser=U,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new P.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(G.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(W.LinkProviderService),this._instantiationService.setService(I.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((Y,de)=>this.refresh(Y,de))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(Y=>this._reportWindowsOptions(Y))),this.register(this._inputHandler.onColor(Y=>this._handleColorEvent(Y))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(Y=>this._afterResize(Y.cols,Y.rows))),this.register((0,P.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(te){if(this._themeService)for(const Y of te){let de,Se="";switch(Y.index){case 256:de="foreground",Se="10";break;case 257:de="background",Se="11";break;case 258:de="cursor",Se="12";break;default:de="ansi",Se="4;"+Y.index}switch(Y.type){case 0:const xe=C.color.toColorRGB(de==="ansi"?this._themeService.colors.ansi[Y.index]:this._themeService.colors[de]);this.coreService.triggerDataEvent(`${X.C0.ESC}]${Se};${(0,F.toRgbString)(xe)}${X.C1_ESCAPED.ST}`);break;case 1:if(de==="ansi")this._themeService.modifyColors(Ae=>Ae.ansi[Y.index]=C.channels.toColor(...Y.color));else{const Ae=de;this._themeService.modifyColors(Pe=>Pe[Ae]=C.channels.toColor(...Y.color))}break;case 2:this._themeService.restoreColor(Y.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(te){te?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(j.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(te){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(X.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(X.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const te=this.buffer.ybase+this.buffer.y,Y=this.buffer.lines.get(te);if(!Y)return;const de=Math.min(this.buffer.x,this.cols-1),Se=this._renderService.dimensions.css.cell.height,xe=Y.getWidth(de),Ae=this._renderService.dimensions.css.cell.width*xe,Pe=this.buffer.y*this._renderService.dimensions.css.cell.height,K=de*this._renderService.dimensions.css.cell.width;this.textarea.style.left=K+"px",this.textarea.style.top=Pe+"px",this.textarea.style.width=Ae+"px",this.textarea.style.height=Se+"px",this.textarea.style.lineHeight=Se+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",Y=>{this.hasSelection()&&(0,c.copyHandler)(Y,this._selectionService)}));const te=Y=>(0,c.handlePasteEvent)(Y,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",te)),this.register((0,u.addDisposableDomListener)(this.element,"paste",te)),U.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",Y=>{Y.button===2&&(0,c.rightClickHandler)(Y,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",Y=>{(0,c.rightClickHandler)(Y,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),U.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",Y=>{Y.button===1&&(0,c.moveTextAreaUnderMouseCursor)(Y,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",te=>this._keyUp(te),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",te=>this._keyDown(te),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",te=>this._keyPress(te),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",te=>this._compositionHelper.compositionupdate(te))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",te=>this._inputEvent(te),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(te){if(!te)throw new Error("Terminal requires a parent element.");if(te.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=te.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),te.appendChild(this.element);const Y=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),Y.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",de=>this.updateCursorStyle(de))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),Y.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",h.promptLabel),U.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,te.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(I.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",de=>this._handleTextAreaFocus(de))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(w.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(I.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(I.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(_.CharacterJoinerService),this._instantiationService.setService(I.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(I.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(de=>this._onRender.fire(de))),this.onResize(de=>this._renderService.resize(de.cols,de.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(b.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(I.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(Y);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(p.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(de=>this.scrollLines(de.amount,de.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(x.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(I.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(de=>this.scrollLines(de.amount,de.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(de=>this._renderService.handleSelectionChanged(de.start,de.end,de.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(de=>{this.textarea.value=de,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(de=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(m.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",de=>this._selectionService.handleMouseDown(de))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(j.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",de=>this._handleScreenReaderModeOptionChange(de))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(g.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",de=>{!this._overviewRulerRenderer&&de&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(g.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(v.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const te=this,Y=this.element;function de(Ae){const Pe=te._mouseService.getMouseReportCoords(Ae,te.screenElement);if(!Pe)return!1;let K,ge;switch(Ae.overrideType||Ae.type){case"mousemove":ge=32,Ae.buttons===void 0?(K=3,Ae.button!==void 0&&(K=Ae.button<3?Ae.button:3)):K=1&Ae.buttons?0:4&Ae.buttons?1:2&Ae.buttons?2:3;break;case"mouseup":ge=0,K=Ae.button<3?Ae.button:3;break;case"mousedown":ge=1,K=Ae.button<3?Ae.button:3;break;case"wheel":if(te._customWheelEventHandler&&te._customWheelEventHandler(Ae)===!1||te.viewport.getLinesScrolled(Ae)===0)return!1;ge=Ae.deltaY<0?0:1,K=4;break;default:return!1}return!(ge===void 0||K===void 0||K>4)&&te.coreMouseService.triggerMouseEvent({col:Pe.col,row:Pe.row,x:Pe.x,y:Pe.y,button:K,action:ge,ctrl:Ae.ctrlKey,alt:Ae.altKey,shift:Ae.shiftKey})}const Se={mouseup:null,wheel:null,mousedrag:null,mousemove:null},xe={mouseup:Ae=>(de(Ae),Ae.buttons||(this._document.removeEventListener("mouseup",Se.mouseup),Se.mousedrag&&this._document.removeEventListener("mousemove",Se.mousedrag)),this.cancel(Ae)),wheel:Ae=>(de(Ae),this.cancel(Ae,!0)),mousedrag:Ae=>{Ae.buttons&&de(Ae)},mousemove:Ae=>{Ae.buttons||de(Ae)}};this.register(this.coreMouseService.onProtocolChange(Ae=>{Ae?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Ae)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Ae?Se.mousemove||(Y.addEventListener("mousemove",xe.mousemove),Se.mousemove=xe.mousemove):(Y.removeEventListener("mousemove",Se.mousemove),Se.mousemove=null),16&Ae?Se.wheel||(Y.addEventListener("wheel",xe.wheel,{passive:!1}),Se.wheel=xe.wheel):(Y.removeEventListener("wheel",Se.wheel),Se.wheel=null),2&Ae?Se.mouseup||(Se.mouseup=xe.mouseup):(this._document.removeEventListener("mouseup",Se.mouseup),Se.mouseup=null),4&Ae?Se.mousedrag||(Se.mousedrag=xe.mousedrag):(this._document.removeEventListener("mousemove",Se.mousedrag),Se.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(Y,"mousedown",Ae=>{if(Ae.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Ae))return de(Ae),Se.mouseup&&this._document.addEventListener("mouseup",Se.mouseup),Se.mousedrag&&this._document.addEventListener("mousemove",Se.mousedrag),this.cancel(Ae)})),this.register((0,u.addDisposableDomListener)(Y,"wheel",Ae=>{if(!Se.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Ae)===!1)return!1;if(!this.buffer.hasScrollback){const Pe=this.viewport.getLinesScrolled(Ae);if(Pe===0)return;const K=X.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Ae.deltaY<0?"A":"B");let ge="";for(let re=0;re<Math.abs(Pe);re++)ge+=K;return this.coreService.triggerDataEvent(ge,!0),this.cancel(Ae,!0)}return this.viewport.handleWheel(Ae)?this.cancel(Ae):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(Y,"touchstart",Ae=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Ae),this.cancel(Ae)},{passive:!0})),this.register((0,u.addDisposableDomListener)(Y,"touchmove",Ae=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Ae)?void 0:this.cancel(Ae)},{passive:!1}))}refresh(te,Y){this._renderService?.refreshRows(te,Y)}updateCursorStyle(te){this._selectionService?.shouldColumnSelect(te)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(te,Y,de=0){de===1?(super.scrollLines(te,Y,de),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(te)}paste(te){(0,c.paste)(te,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(te){this._customKeyEventHandler=te}attachCustomWheelEventHandler(te){this._customWheelEventHandler=te}registerLinkProvider(te){return this._linkProviderService.registerLinkProvider(te)}registerCharacterJoiner(te){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const Y=this._characterJoinerService.register(te);return this.refresh(0,this.rows-1),Y}deregisterCharacterJoiner(te){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(te)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(te){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+te)}registerDecoration(te){return this._decorationService.registerDecoration(te)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(te,Y,de){this._selectionService.setSelection(te,Y,de)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(te,Y){this._selectionService?.selectLines(te,Y)}_keyDown(te){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(te)===!1)return!1;const Y=this.browser.isMac&&this.options.macOptionIsMeta&&te.altKey;if(!Y&&!this._compositionHelper.keydown(te))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;Y||te.key!=="Dead"&&te.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const de=(0,Z.evaluateKeyboardEvent)(te,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(te),de.type===3||de.type===2){const Se=this.rows-1;return this.scrollLines(de.type===2?-Se:Se),this.cancel(te,!0)}return de.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,te)||(de.cancel&&this.cancel(te,!0),!de.key||!!(te.key&&!te.ctrlKey&&!te.altKey&&!te.metaKey&&te.key.length===1&&te.key.charCodeAt(0)>=65&&te.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(de.key!==X.C0.ETX&&de.key!==X.C0.CR||(this.textarea.value=""),this._onKey.fire({key:de.key,domEvent:te}),this._showCursor(),this.coreService.triggerDataEvent(de.key,!0),!this.optionsService.rawOptions.screenReaderMode||te.altKey||te.ctrlKey?this.cancel(te,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(te,Y){const de=te.isMac&&!this.options.macOptionIsMeta&&Y.altKey&&!Y.ctrlKey&&!Y.metaKey||te.isWindows&&Y.altKey&&Y.ctrlKey&&!Y.metaKey||te.isWindows&&Y.getModifierState("AltGraph");return Y.type==="keypress"?de:de&&(!Y.keyCode||Y.keyCode>47)}_keyUp(te){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(te)===!1||(function(Y){return Y.keyCode===16||Y.keyCode===17||Y.keyCode===18}(te)||this.focus(),this.updateCursorStyle(te),this._keyPressHandled=!1)}_keyPress(te){let Y;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(te)===!1)return!1;if(this.cancel(te),te.charCode)Y=te.charCode;else if(te.which===null||te.which===void 0)Y=te.keyCode;else{if(te.which===0||te.charCode===0)return!1;Y=te.which}return!(!Y||(te.altKey||te.ctrlKey||te.metaKey)&&!this._isThirdLevelShift(this.browser,te)||(Y=String.fromCharCode(Y),this._onKey.fire({key:Y,domEvent:te}),this._showCursor(),this.coreService.triggerDataEvent(Y,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(te){if(te.data&&te.inputType==="insertText"&&(!te.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const Y=te.data;return this.coreService.triggerDataEvent(Y,!0),this.cancel(te),!0}return!1}resize(te,Y){te!==this.cols||Y!==this.rows?super.resize(te,Y):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(te,Y){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let te=1;te<this.rows;te++)this.buffer.lines.push(this.buffer.getBlankLine(ee.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const te=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=te,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(X.C0.ESC+"[I"):this.coreService.triggerDataEvent(X.C0.ESC+"[O")}_reportWindowsOptions(te){if(this._renderService)switch(te){case D.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const Y=this._renderService.dimensions.css.canvas.width.toFixed(0),de=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${X.C0.ESC}[4;${de};${Y}t`);break;case D.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const Se=this._renderService.dimensions.css.cell.width.toFixed(0),xe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${X.C0.ESC}[6;${xe};${Se}t`)}}cancel(te,Y){if(this.options.cancelEvents||Y)return te.preventDefault(),te.stopPropagation(),!1}}a.Terminal=q},9924:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(l,c=1e3){this._renderCallback=l,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const h=d-this._lastRefreshMs,f=this._debounceThresholdMS-h;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c)}}},1680:function(o,a,l){var c=this&&this.__decorate||function(b,v,w,_){var S,E=arguments.length,k=E<3?v:_===null?_=Object.getOwnPropertyDescriptor(v,w):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,v,w,_);else for(var x=b.length-1;x>=0;x--)(S=b[x])&&(k=(E<3?S(k):E>3?S(v,w,k):S(v,w))||k);return E>3&&k&&Object.defineProperty(v,w,k),k},u=this&&this.__param||function(b,v){return function(w,_){v(w,_,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const d=l(3656),h=l(4725),f=l(8460),p=l(844),m=l(2585);let g=a.Viewport=class extends p.Disposable{constructor(b,v,w,_,S,E,k,x){super(),this._viewportElement=b,this._scrollArea=v,this._bufferService=w,this._optionsService=_,this._charSizeService=S,this._renderService=E,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(I=>this._activeBuffer=I.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(I=>this._renderDimensions=I)),this._handleThemeChange(x.colors),this.register(x.onChangeColors(I=>this._handleThemeChange(I))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(b){this._viewportElement.style.backgroundColor=b.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(b){if(b)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const v=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==v&&(this._lastRecordedBufferHeight=v,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const b=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==b&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=b),this._refreshAnimationFrame=null}syncScrollArea(b=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(b);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(b)}_handleScroll(b){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const v=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:v,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const b=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(b*(this._smoothScrollState.target-this._smoothScrollState.origin)),b<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(b,v){const w=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(v<0&&this._viewportElement.scrollTop!==0||v>0&&w<this._lastRecordedBufferHeight)||(b.cancelable&&b.preventDefault(),!1)}handleWheel(b){const v=this._getPixelsScrolled(b);return v!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+v:this._smoothScrollState.target+=v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=v,this._bubbleScroll(b,v))}scrollLines(b){if(b!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const v=b*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:b,suppressScrollEvent:!1})}_getPixelsScrolled(b){if(b.deltaY===0||b.shiftKey)return 0;let v=this._applyScrollModifier(b.deltaY,b);return b.deltaMode===WheelEvent.DOM_DELTA_LINE?v*=this._currentRowHeight:b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._currentRowHeight*this._bufferService.rows),v}getBufferElements(b,v){let w,_="";const S=[],E=v??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let x=b;x<E;x++){const I=k.get(x);if(!I)continue;const R=k.get(x+1)?.isWrapped;if(_+=I.translateToString(!R),!R||x===k.length-1){const C=document.createElement("div");C.textContent=_,S.push(C),_.length>0&&(w=C),_=""}}return{bufferElements:S,cursorElement:w}}getLinesScrolled(b){if(b.deltaY===0||b.shiftKey)return 0;let v=this._applyScrollModifier(b.deltaY,b);return b.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(v/=this._currentRowHeight+0,this._wheelPartialScroll+=v,v=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._bufferService.rows),v}_applyScrollModifier(b,v){const w=this._optionsService.rawOptions.fastScrollModifier;return w==="alt"&&v.altKey||w==="ctrl"&&v.ctrlKey||w==="shift"&&v.shiftKey?b*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:b*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(b){this._lastTouchY=b.touches[0].pageY}handleTouchMove(b){const v=this._lastTouchY-b.touches[0].pageY;return this._lastTouchY=b.touches[0].pageY,v!==0&&(this._viewportElement.scrollTop+=v,this._bubbleScroll(b,v))}};a.Viewport=g=c([u(2,m.IBufferService),u(3,m.IOptionsService),u(4,h.ICharSizeService),u(5,h.IRenderService),u(6,h.ICoreBrowserService),u(7,h.IThemeService)],g)},3107:function(o,a,l){var c=this&&this.__decorate||function(m,g,b,v){var w,_=arguments.length,S=_<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,g,b,v);else for(var E=m.length-1;E>=0;E--)(w=m[E])&&(S=(_<3?w(S):_>3?w(g,b,S):w(g,b))||S);return _>3&&S&&Object.defineProperty(g,b,S),S},u=this&&this.__param||function(m,g){return function(b,v){g(b,v,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const d=l(4725),h=l(844),f=l(2585);let p=a.BufferDecorationRenderer=class extends h.Disposable{constructor(m,g,b,v,w){super(),this._screenElement=m,this._bufferService=g,this._coreBrowserService=b,this._decorationService=v,this._renderService=w,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(_=>this._removeDecoration(_))),this.register((0,h.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const m of this._decorationService.decorations)this._renderDecoration(m);this._dimensionsChanged=!1}_renderDecoration(m){this._refreshStyle(m),this._dimensionsChanged&&this._refreshXPosition(m)}_createElement(m){const g=this._coreBrowserService.mainDocument.createElement("div");g.classList.add("xterm-decoration"),g.classList.toggle("xterm-decoration-top-layer",m?.options?.layer==="top"),g.style.width=`${Math.round((m.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,g.style.height=(m.options.height||1)*this._renderService.dimensions.css.cell.height+"px",g.style.top=(m.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",g.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const b=m.options.x??0;return b&&b>this._bufferService.cols&&(g.style.display="none"),this._refreshXPosition(m,g),g}_refreshStyle(m){const g=m.marker.line-this._bufferService.buffers.active.ydisp;if(g<0||g>=this._bufferService.rows)m.element&&(m.element.style.display="none",m.onRenderEmitter.fire(m.element));else{let b=this._decorationElements.get(m);b||(b=this._createElement(m),m.element=b,this._decorationElements.set(m,b),this._container.appendChild(b),m.onDispose(()=>{this._decorationElements.delete(m),b.remove()})),b.style.top=g*this._renderService.dimensions.css.cell.height+"px",b.style.display=this._altBufferIsActive?"none":"block",m.onRenderEmitter.fire(b)}}_refreshXPosition(m,g=m.element){if(!g)return;const b=m.options.x??0;(m.options.anchor||"left")==="right"?g.style.right=b?b*this._renderService.dimensions.css.cell.width+"px":"":g.style.left=b?b*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(m){this._decorationElements.get(m)?.remove(),this._decorationElements.delete(m),m.dispose()}};a.BufferDecorationRenderer=p=c([u(1,f.IBufferService),u(2,d.ICoreBrowserService),u(3,f.IDecorationService),u(4,d.IRenderService)],p)},5871:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const c of this._zones)if(c.color===l.options.overviewRulerOptions.color&&c.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,l.marker.line))return;if(this._lineAdjacentToZone(c,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(c,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,c){return c>=l.startBufferLine&&c<=l.endBufferLine}_lineAdjacentToZone(l,c,u){return c>=l.startBufferLine-this._linePadding[u||"full"]&&c<=l.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(l,c){l.startBufferLine=Math.min(l.startBufferLine,c),l.endBufferLine=Math.max(l.endBufferLine,c)}}},5744:function(o,a,l){var c=this&&this.__decorate||function(w,_,S,E){var k,x=arguments.length,I=x<3?_:E===null?E=Object.getOwnPropertyDescriptor(_,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(w,_,S,E);else for(var R=w.length-1;R>=0;R--)(k=w[R])&&(I=(x<3?k(I):x>3?k(_,S,I):k(_,S))||I);return x>3&&I&&Object.defineProperty(_,S,I),I},u=this&&this.__param||function(w,_){return function(S,E){_(S,E,w)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const d=l(5871),h=l(4725),f=l(844),p=l(2585),m={full:0,left:0,center:0,right:0},g={full:0,left:0,center:0,right:0},b={full:0,left:0,center:0,right:0};let v=a.OverviewRulerRenderer=class extends f.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(w,_,S,E,k,x,I){super(),this._viewportElement=w,this._screenElement=_,this._bufferService=S,this._decorationService=E,this._renderService=k,this._optionsService=x,this._coreBrowserService=I,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,f.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const w=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);g.full=this._canvas.width,g.left=w,g.center=_,g.right=w,this._refreshDrawHeightConstants(),b.full=0,b.left=0,b.center=g.left,b.right=g.left+g.center}_refreshDrawHeightConstants(){m.full=Math.round(2*this._coreBrowserService.dpr);const w=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(w,12),6)*this._coreBrowserService.dpr);m.left=_,m.center=_,m.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;const w=this._colorZoneStore.zones;for(const _ of w)_.position!=="full"&&this._renderColorZone(_);for(const _ of w)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(w){this._ctx.fillStyle=w.color,this._ctx.fillRect(b[w.position||"full"],Math.round((this._canvas.height-1)*(w.startBufferLine/this._bufferService.buffers.active.lines.length)-m[w.position||"full"]/2),g[w.position||"full"],Math.round((this._canvas.height-1)*((w.endBufferLine-w.startBufferLine)/this._bufferService.buffers.active.lines.length)+m[w.position||"full"]))}_queueRefresh(w,_){this._shouldUpdateDimensions=w||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=v=c([u(2,p.IBufferService),u(3,p.IDecorationService),u(4,h.IRenderService),u(5,p.IOptionsService),u(6,h.ICoreBrowserService)],v)},2950:function(o,a,l){var c=this&&this.__decorate||function(m,g,b,v){var w,_=arguments.length,S=_<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,g,b,v);else for(var E=m.length-1;E>=0;E--)(w=m[E])&&(S=(_<3?w(S):_>3?w(g,b,S):w(g,b))||S);return _>3&&S&&Object.defineProperty(g,b,S),S},u=this&&this.__param||function(m,g){return function(b,v){g(b,v,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const d=l(4725),h=l(2585),f=l(2584);let p=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(m,g,b,v,w,_){this._textarea=m,this._compositionView=g,this._bufferService=b,this._optionsService=v,this._coreService=w,this._renderService=_,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(m){this._compositionView.textContent=m.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(m){if(this._isComposing||this._isSendingComposition){if(m.keyCode===229||m.keyCode===16||m.keyCode===17||m.keyCode===18)return!1;this._finalizeComposition(!1)}return m.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(m){if(this._compositionView.classList.remove("active"),this._isComposing=!1,m){const g={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let b;this._isSendingComposition=!1,g.start+=this._dataAlreadySent.length,b=this._isComposing?this._textarea.value.substring(g.start,g.end):this._textarea.value.substring(g.start),b.length>0&&this._coreService.triggerDataEvent(b,!0)}},0)}else{this._isSendingComposition=!1;const g=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(g,!0)}}_handleAnyTextareaChanges(){const m=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const g=this._textarea.value,b=g.replace(m,"");this._dataAlreadySent=b,g.length>m.length?this._coreService.triggerDataEvent(b,!0):g.length<m.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):g.length===m.length&&g!==m&&this._coreService.triggerDataEvent(g,!0)}},0)}updateCompositionElements(m){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const g=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),b=this._renderService.dimensions.css.cell.height,v=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,w=g*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=w+"px",this._compositionView.style.top=v+"px",this._compositionView.style.height=b+"px",this._compositionView.style.lineHeight=b+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const _=this._compositionView.getBoundingClientRect();this._textarea.style.left=w+"px",this._textarea.style.top=v+"px",this._textarea.style.width=Math.max(_.width,1)+"px",this._textarea.style.height=Math.max(_.height,1)+"px",this._textarea.style.lineHeight=_.height+"px"}m||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=p=c([u(2,h.IBufferService),u(3,h.IOptionsService),u(4,h.ICoreService),u(5,d.IRenderService)],p)},9806:(o,a)=>{function l(c,u,d){const h=d.getBoundingClientRect(),f=c.getComputedStyle(d),p=parseInt(f.getPropertyValue("padding-left")),m=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-h.left-p,u.clientY-h.top-m]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=l,a.getCoords=function(c,u,d,h,f,p,m,g,b){if(!p)return;const v=l(c,u,d);return v?(v[0]=Math.ceil((v[0]+(b?m/2:0))/m),v[1]=Math.ceil(v[1]/g),v[0]=Math.min(Math.max(v[0],1),h+(b?1:0)),v[1]=Math.min(Math.max(v[1],1),f),v):void 0}},9504:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const c=l(2584);function u(g,b,v,w){const _=g-d(g,v),S=b-d(b,v),E=Math.abs(_-S)-function(k,x,I){let R=0;const C=k-d(k,I),T=x-d(x,I);for(let O=0;O<Math.abs(C-T);O++){const P=h(k,x)==="A"?-1:1;I.buffer.lines.get(C+P*O)?.isWrapped&&R++}return R}(g,b,v);return m(E,p(h(g,b),w))}function d(g,b){let v=0,w=b.buffer.lines.get(g),_=w?.isWrapped;for(;_&&g>=0&&g<b.rows;)v++,w=b.buffer.lines.get(--g),_=w?.isWrapped;return v}function h(g,b){return g>b?"A":"B"}function f(g,b,v,w,_,S){let E=g,k=b,x="";for(;E!==v||k!==w;)E+=_?1:-1,_&&E>S.cols-1?(x+=S.buffer.translateBufferLineToString(k,!1,g,E),E=0,g=0,k++):!_&&E<0&&(x+=S.buffer.translateBufferLineToString(k,!1,0,g+1),E=S.cols-1,g=E,k--);return x+S.buffer.translateBufferLineToString(k,!1,g,E)}function p(g,b){const v=b?"O":"[";return c.C0.ESC+v+g}function m(g,b){g=Math.floor(g);let v="";for(let w=0;w<g;w++)v+=b;return v}a.moveToCellSequence=function(g,b,v,w){const _=v.buffer.x,S=v.buffer.y;if(!v.buffer.hasScrollback)return function(x,I,R,C,T,O){return u(I,C,T,O).length===0?"":m(f(x,I,x,I-d(I,T),!1,T).length,p("D",O))}(_,S,0,b,v,w)+u(S,b,v,w)+function(x,I,R,C,T,O){let P;P=u(I,C,T,O).length>0?C-d(C,T):I;const U=C,ee=function(X,Z,F,M,G,D){let j;return j=u(F,M,G,D).length>0?M-d(M,G):Z,X<F&&j<=M||X>=F&&j<M?"C":"D"}(x,I,R,C,T,O);return m(f(x,P,R,U,ee==="C",T).length,p(ee,O))}(_,S,g,b,v,w);let E;if(S===b)return E=_>g?"D":"C",m(Math.abs(_-g),p(E,w));E=S>b?"D":"C";const k=Math.abs(S-b);return m(function(x,I){return I.cols-x}(S>b?g:_,v)+(k-1)*v.cols+1+((S>b?_:g)-1),p(E,w))}},1296:function(o,a,l){var c=this&&this.__decorate||function(O,P,U,ee){var X,Z=arguments.length,F=Z<3?P:ee===null?ee=Object.getOwnPropertyDescriptor(P,U):ee;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(O,P,U,ee);else for(var M=O.length-1;M>=0;M--)(X=O[M])&&(F=(Z<3?X(F):Z>3?X(P,U,F):X(P,U))||F);return Z>3&&F&&Object.defineProperty(P,U,F),F},u=this&&this.__param||function(O,P){return function(U,ee){P(U,ee,O)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const d=l(3787),h=l(2550),f=l(2223),p=l(6171),m=l(6052),g=l(4725),b=l(8055),v=l(8460),w=l(844),_=l(2585),S="xterm-dom-renderer-owner-",E="xterm-rows",k="xterm-fg-",x="xterm-bg-",I="xterm-focus",R="xterm-selection";let C=1,T=a.DomRenderer=class extends w.Disposable{constructor(O,P,U,ee,X,Z,F,M,G,D,j,W,q){super(),this._terminal=O,this._document=P,this._element=U,this._screenElement=ee,this._viewportElement=X,this._helperContainer=Z,this._linkifier2=F,this._charSizeService=G,this._optionsService=D,this._bufferService=j,this._coreBrowserService=W,this._themeService=q,this._terminalClass=C++,this._rowElements=[],this._selectionRenderModel=(0,m.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new v.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(E),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(R),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,p.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ne=>this._injectCss(ne))),this._injectCss(this._themeService.colors),this._rowFactory=M.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ne=>this._handleLinkHover(ne))),this.register(this._linkifier2.onHideLinkUnderline(ne=>this._handleLinkLeave(ne))),this.register((0,w.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new h.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const O=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*O,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*O),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/O),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/O),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const U of this._rowElements)U.style.width=`${this.dimensions.css.canvas.width}px`,U.style.height=`${this.dimensions.css.cell.height}px`,U.style.lineHeight=`${this.dimensions.css.cell.height}px`,U.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const P=`${this._terminalSelector} .${E} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=P,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(O){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let P=`${this._terminalSelector} .${E} { color: ${O.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;P+=`${this._terminalSelector} .${E} .xterm-dim { color: ${b.color.multiplyOpacity(O.foreground,.5).css};}`,P+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const U=`blink_underline_${this._terminalClass}`,ee=`blink_bar_${this._terminalClass}`,X=`blink_block_${this._terminalClass}`;P+=`@keyframes ${U} { 50% {  border-bottom-style: hidden; }}`,P+=`@keyframes ${ee} { 50% {  box-shadow: none; }}`,P+=`@keyframes ${X} { 0% {  background-color: ${O.cursor.css};  color: ${O.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${O.cursor.css}; }}`,P+=`${this._terminalSelector} .${E}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${U} 1s step-end infinite;}${this._terminalSelector} .${E}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ee} 1s step-end infinite;}${this._terminalSelector} .${E}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-block { background-color: ${O.cursor.css}; color: ${O.cursorAccent.css};}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${O.cursor.css} !important; color: ${O.cursorAccent.css} !important;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${O.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${O.cursor.css} inset;}${this._terminalSelector} .${E} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${O.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,P+=`${this._terminalSelector} .${R} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${R} div { position: absolute; background-color: ${O.selectionBackgroundOpaque.css};}${this._terminalSelector} .${R} div { position: absolute; background-color: ${O.selectionInactiveBackgroundOpaque.css};}`;for(const[Z,F]of O.ansi.entries())P+=`${this._terminalSelector} .${k}${Z} { color: ${F.css}; }${this._terminalSelector} .${k}${Z}.xterm-dim { color: ${b.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${x}${Z} { background-color: ${F.css}; }`;P+=`${this._terminalSelector} .${k}${f.INVERTED_DEFAULT_COLOR} { color: ${b.color.opaque(O.background).css}; }${this._terminalSelector} .${k}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${b.color.multiplyOpacity(b.color.opaque(O.background),.5).css}; }${this._terminalSelector} .${x}${f.INVERTED_DEFAULT_COLOR} { background-color: ${O.foreground.css}; }`,this._themeStyleElement.textContent=P}_setDefaultSpacing(){const O=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${O}px`,this._rowFactory.defaultSpacing=O}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(O,P){for(let U=this._rowElements.length;U<=P;U++){const ee=this._document.createElement("div");this._rowContainer.appendChild(ee),this._rowElements.push(ee)}for(;this._rowElements.length>P;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(O,P){this._refreshRowElements(O,P),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(I),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(I),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(O,P,U){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(O,P,U),this.renderRows(0,this._bufferService.rows-1),!O||!P)return;this._selectionRenderModel.update(this._terminal,O,P,U);const ee=this._selectionRenderModel.viewportStartRow,X=this._selectionRenderModel.viewportEndRow,Z=this._selectionRenderModel.viewportCappedStartRow,F=this._selectionRenderModel.viewportCappedEndRow;if(Z>=this._bufferService.rows||F<0)return;const M=this._document.createDocumentFragment();if(U){const G=O[0]>P[0];M.appendChild(this._createSelectionElement(Z,G?P[0]:O[0],G?O[0]:P[0],F-Z+1))}else{const G=ee===Z?O[0]:0,D=Z===X?P[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(Z,G,D));const j=F-Z-1;if(M.appendChild(this._createSelectionElement(Z+1,0,this._bufferService.cols,j)),Z!==F){const W=X===F?P[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(F,0,W))}}this._selectionContainer.appendChild(M)}_createSelectionElement(O,P,U,ee=1){const X=this._document.createElement("div"),Z=P*this.dimensions.css.cell.width;let F=this.dimensions.css.cell.width*(U-P);return Z+F>this.dimensions.css.canvas.width&&(F=this.dimensions.css.canvas.width-Z),X.style.height=ee*this.dimensions.css.cell.height+"px",X.style.top=O*this.dimensions.css.cell.height+"px",X.style.left=`${Z}px`,X.style.width=`${F}px`,X}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const O of this._rowElements)O.replaceChildren()}renderRows(O,P){const U=this._bufferService.buffer,ee=U.ybase+U.y,X=Math.min(U.x,this._bufferService.cols-1),Z=this._optionsService.rawOptions.cursorBlink,F=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let G=O;G<=P;G++){const D=G+U.ydisp,j=this._rowElements[G],W=U.lines.get(D);if(!j||!W)break;j.replaceChildren(...this._rowFactory.createRow(W,D,D===ee,F,M,X,Z,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!0)}_handleLinkLeave(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!1)}_setCellUnderline(O,P,U,ee,X,Z){U<0&&(O=0),ee<0&&(P=0);const F=this._bufferService.rows-1;U=Math.max(Math.min(U,F),0),ee=Math.max(Math.min(ee,F),0),X=Math.min(X,this._bufferService.cols);const M=this._bufferService.buffer,G=M.ybase+M.y,D=Math.min(M.x,X-1),j=this._optionsService.rawOptions.cursorBlink,W=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let ne=U;ne<=ee;++ne){const te=ne+M.ydisp,Y=this._rowElements[ne],de=M.lines.get(te);if(!Y||!de)break;Y.replaceChildren(...this._rowFactory.createRow(de,te,te===G,W,q,D,j,this.dimensions.css.cell.width,this._widthCache,Z?ne===U?O:0:-1,Z?(ne===ee?P:X)-1:-1))}}};a.DomRenderer=T=c([u(7,_.IInstantiationService),u(8,g.ICharSizeService),u(9,_.IOptionsService),u(10,_.IBufferService),u(11,g.ICoreBrowserService),u(12,g.IThemeService)],T)},3787:function(o,a,l){var c=this&&this.__decorate||function(E,k,x,I){var R,C=arguments.length,T=C<3?k:I===null?I=Object.getOwnPropertyDescriptor(k,x):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(E,k,x,I);else for(var O=E.length-1;O>=0;O--)(R=E[O])&&(T=(C<3?R(T):C>3?R(k,x,T):R(k,x))||T);return C>3&&T&&Object.defineProperty(k,x,T),T},u=this&&this.__param||function(E,k){return function(x,I){k(x,I,E)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const d=l(2223),h=l(643),f=l(511),p=l(2585),m=l(8055),g=l(4725),b=l(4269),v=l(6171),w=l(3734);let _=a.DomRendererRowFactory=class{constructor(E,k,x,I,R,C,T){this._document=E,this._characterJoinerService=k,this._optionsService=x,this._coreBrowserService=I,this._coreService=R,this._decorationService=C,this._themeService=T,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,k,x){this._selectionStart=E,this._selectionEnd=k,this._columnSelectMode=x}createRow(E,k,x,I,R,C,T,O,P,U,ee){const X=[],Z=this._characterJoinerService.getJoinedCharacters(k),F=this._themeService.colors;let M,G=E.getNoBgTrimmedLength();x&&G<C+1&&(G=C+1);let D=0,j="",W=0,q=0,ne=0,te=!1,Y=0,de=!1,Se=0;const xe=[],Ae=U!==-1&&ee!==-1;for(let Pe=0;Pe<G;Pe++){E.loadCell(Pe,this._workCell);let K=this._workCell.getWidth();if(K===0)continue;let ge=!1,re=Pe,le=this._workCell;if(Z.length>0&&Pe===Z[0][0]){ge=!0;const J=Z.shift();le=new b.JoinedCellData(this._workCell,E.translateToString(!0,J[0],J[1]),J[1]-J[0]),re=J[1]-1,K=le.getWidth()}const se=this._isCellInSelection(Pe,k),fe=x&&Pe===C,Ce=Ae&&Pe>=U&&Pe<=ee;let Ie=!1;this._decorationService.forEachDecorationAtCell(Pe,k,void 0,J=>{Ie=!0});let we=le.getChars()||h.WHITESPACE_CELL_CHAR;if(we===" "&&(le.isUnderline()||le.isOverline())&&(we=""),Se=K*O-P.get(we,le.isBold(),le.isItalic()),M){if(D&&(se&&de||!se&&!de&&le.bg===W)&&(se&&de&&F.selectionForeground||le.fg===q)&&le.extended.ext===ne&&Ce===te&&Se===Y&&!fe&&!ge&&!Ie){le.isInvisible()?j+=h.WHITESPACE_CELL_CHAR:j+=we,D++;continue}D&&(M.textContent=j),M=this._document.createElement("span"),D=0,j=""}else M=this._document.createElement("span");if(W=le.bg,q=le.fg,ne=le.extended.ext,te=Ce,Y=Se,de=se,ge&&C>=Pe&&C<=re&&(C=Pe),!this._coreService.isCursorHidden&&fe&&this._coreService.isCursorInitialized){if(xe.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&xe.push("xterm-cursor-blink"),xe.push(I==="bar"?"xterm-cursor-bar":I==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":xe.push("xterm-cursor-outline");break;case"block":xe.push("xterm-cursor-block");break;case"bar":xe.push("xterm-cursor-bar");break;case"underline":xe.push("xterm-cursor-underline")}}if(le.isBold()&&xe.push("xterm-bold"),le.isItalic()&&xe.push("xterm-italic"),le.isDim()&&xe.push("xterm-dim"),j=le.isInvisible()?h.WHITESPACE_CELL_CHAR:le.getChars()||h.WHITESPACE_CELL_CHAR,le.isUnderline()&&(xe.push(`xterm-underline-${le.extended.underlineStyle}`),j===" "&&(j=""),!le.isUnderlineColorDefault()))if(le.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${w.AttributeData.toColorRGB(le.getUnderlineColor()).join(",")})`;else{let J=le.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&le.isBold()&&J<8&&(J+=8),M.style.textDecorationColor=F.ansi[J].css}le.isOverline()&&(xe.push("xterm-overline"),j===" "&&(j="")),le.isStrikethrough()&&xe.push("xterm-strikethrough"),Ce&&(M.style.textDecoration="underline");let Ue=le.getFgColor(),Fe=le.getFgColorMode(),Be=le.getBgColor(),ke=le.getBgColorMode();const Je=!!le.isInverse();if(Je){const J=Ue;Ue=Be,Be=J;const pe=Fe;Fe=ke,ke=pe}let Xe,nt,ie,z=!1;switch(this._decorationService.forEachDecorationAtCell(Pe,k,void 0,J=>{J.options.layer!=="top"&&z||(J.backgroundColorRGB&&(ke=50331648,Be=J.backgroundColorRGB.rgba>>8&16777215,Xe=J.backgroundColorRGB),J.foregroundColorRGB&&(Fe=50331648,Ue=J.foregroundColorRGB.rgba>>8&16777215,nt=J.foregroundColorRGB),z=J.options.layer==="top")}),!z&&se&&(Xe=this._coreBrowserService.isFocused?F.selectionBackgroundOpaque:F.selectionInactiveBackgroundOpaque,Be=Xe.rgba>>8&16777215,ke=50331648,z=!0,F.selectionForeground&&(Fe=50331648,Ue=F.selectionForeground.rgba>>8&16777215,nt=F.selectionForeground)),z&&xe.push("xterm-decoration-top"),ke){case 16777216:case 33554432:ie=F.ansi[Be],xe.push(`xterm-bg-${Be}`);break;case 50331648:ie=m.channels.toColor(Be>>16,Be>>8&255,255&Be),this._addStyle(M,`background-color:#${S((Be>>>0).toString(16),"0",6)}`);break;default:Je?(ie=F.foreground,xe.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):ie=F.background}switch(Xe||le.isDim()&&(Xe=m.color.multiplyOpacity(ie,.5)),Fe){case 16777216:case 33554432:le.isBold()&&Ue<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ue+=8),this._applyMinimumContrast(M,ie,F.ansi[Ue],le,Xe,void 0)||xe.push(`xterm-fg-${Ue}`);break;case 50331648:const J=m.channels.toColor(Ue>>16&255,Ue>>8&255,255&Ue);this._applyMinimumContrast(M,ie,J,le,Xe,nt)||this._addStyle(M,`color:#${S(Ue.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,ie,F.foreground,le,Xe,nt)||Je&&xe.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}xe.length&&(M.className=xe.join(" "),xe.length=0),fe||ge||Ie?M.textContent=j:D++,Se!==this.defaultSpacing&&(M.style.letterSpacing=`${Se}px`),X.push(M),Pe=re}return M&&D&&(M.textContent=j),X}_applyMinimumContrast(E,k,x,I,R,C){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,v.treatGlyphAsBackgroundColor)(I.getCode()))return!1;const T=this._getContrastCache(I);let O;if(R||C||(O=T.getColor(k.rgba,x.rgba)),O===void 0){const P=this._optionsService.rawOptions.minimumContrastRatio/(I.isDim()?2:1);O=m.color.ensureContrastRatio(R||k,C||x,P),T.setColor((R||k).rgba,(C||x).rgba,O??null)}return!!O&&(this._addStyle(E,`color:${O.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,k){E.setAttribute("style",`${E.getAttribute("style")||""}${k};`)}_isCellInSelection(E,k){const x=this._selectionStart,I=this._selectionEnd;return!(!x||!I)&&(this._columnSelectMode?x[0]<=I[0]?E>=x[0]&&k>=x[1]&&E<I[0]&&k<=I[1]:E<x[0]&&k>=x[1]&&E>=I[0]&&k<=I[1]:k>x[1]&&k<I[1]||x[1]===I[1]&&k===x[1]&&E>=x[0]&&E<I[0]||x[1]<I[1]&&k===I[1]&&E<I[0]||x[1]<I[1]&&k===x[1]&&E>=x[0])}};function S(E,k,x){for(;E.length<x;)E=k+E;return E}a.DomRendererRowFactory=_=c([u(1,g.ICharacterJoinerService),u(2,p.IOptionsService),u(3,g.ICoreBrowserService),u(4,p.ICoreService),u(5,p.IDecorationService),u(6,g.IThemeService)],_)},2550:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(l,c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=l.createElement("span");u.classList.add("xterm-char-measure-element");const d=l.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const h=l.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontStyle="italic";const f=l.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold",f.style.fontStyle="italic",this._measureElements=[u,d,h,f],this._container.appendChild(u),this._container.appendChild(d),this._container.appendChild(h),this._container.appendChild(f),c.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,c,u,d){l===this._font&&c===this._fontSize&&u===this._weight&&d===this._weightBold||(this._font=l,this._fontSize=c,this._weight=u,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(l,c,u){let d=0;if(!c&&!u&&l.length===1&&(d=l.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const p=this._measure(l,0);return p>0&&(this._flat[d]=p),p}let h=l;c&&(h+="B"),u&&(h+="I");let f=this._holey.get(h);if(f===void 0){let p=0;c&&(p|=1),u&&(p|=2),f=this._measure(l,p),f>0&&this._holey.set(h,f)}return f}_measure(l,c){const u=this._measureElements[c];return u.textContent=l.repeat(32),u.offsetWidth/32}}},2223:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const c=l(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(o,a)=>{function l(u){return 57508<=u&&u<=57558}function c(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(a,"__esModule",{value:!0}),a.computeNextVariantOffset=a.createRenderDimensions=a.treatGlyphAsBackgroundColor=a.allowRescaling=a.isEmoji=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},a.isPowerlineGlyph=l,a.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},a.isEmoji=c,a.allowRescaling=function(u,d,h,f){return d===1&&h>Math.ceil(1.5*f)&&u!==void 0&&u>255&&!c(u)&&!l(u)&&!function(p){return 57344<=p&&p<=63743}(u)},a.treatGlyphAsBackgroundColor=function(u){return l(u)||function(d){return 9472<=d&&d<=9631}(u)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},a.computeNextVariantOffset=function(u,d,h=0){return(u-(2*Math.round(d)-h))%(2*Math.round(d))}},6052:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class l{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,d,h,f=!1){if(this.selectionStart=d,this.selectionEnd=h,!d||!h||d[0]===h[0]&&d[1]===h[1])return void this.clear();const p=u.buffers.active.ydisp,m=d[1]-p,g=h[1]-p,b=Math.max(m,0),v=Math.min(g,u.rows-1);b>=u.rows||v<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=m,this.viewportEndRow=g,this.viewportCappedStartRow=b,this.viewportCappedEndRow=v,this.startCol=d[0],this.endCol=h[0])}isCellSelected(u,d,h){return!!this.hasSelection&&(h-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&h>=this.viewportCappedStartRow&&d<this.endCol&&h<=this.viewportCappedEndRow:d<this.startCol&&h>=this.viewportCappedStartRow&&d>=this.endCol&&h<=this.viewportCappedEndRow:h>this.viewportStartRow&&h<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&h===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&h===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&h===this.viewportStartRow&&d>=this.startCol)}}a.createSelectionRenderModel=function(){return new l}},456:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,c=this.selectionEnd;return!(!l||!c)&&(l[1]>c[1]||l[1]===c[1]&&l[0]>c[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(o,a,l){var c=this&&this.__decorate||function(v,w,_,S){var E,k=arguments.length,x=k<3?w:S===null?S=Object.getOwnPropertyDescriptor(w,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,w,_,S);else for(var I=v.length-1;I>=0;I--)(E=v[I])&&(x=(k<3?E(x):k>3?E(w,_,x):E(w,_))||x);return k>3&&x&&Object.defineProperty(w,_,x),x},u=this&&this.__param||function(v,w){return function(_,S){w(_,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const d=l(2585),h=l(8460),f=l(844);let p=a.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(v,w,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new h.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new b(this._optionsService))}catch{this._measureStrategy=this.register(new g(v,w,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const v=this._measureStrategy.measure();v.width===this.width&&v.height===this.height||(this.width=v.width,this.height=v.height,this._onCharSizeChange.fire())}};a.CharSizeService=p=c([u(2,d.IOptionsService)],p);class m extends f.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(w,_){w!==void 0&&w>0&&_!==void 0&&_>0&&(this._result.width=w,this._result.height=_)}}class g extends m{constructor(w,_,S){super(),this._document=w,this._parentElement=_,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class b extends m{constructor(w){super(),this._optionsService=w,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const _=this._ctx.measureText("W");if(!("width"in _&&"fontBoundingBoxAscent"in _&&"fontBoundingBoxDescent"in _))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const w=this._ctx.measureText("W");return this._validateAndSet(w.width,w.fontBoundingBoxAscent+w.fontBoundingBoxDescent),this._result}}},4269:function(o,a,l){var c=this&&this.__decorate||function(b,v,w,_){var S,E=arguments.length,k=E<3?v:_===null?_=Object.getOwnPropertyDescriptor(v,w):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,v,w,_);else for(var x=b.length-1;x>=0;x--)(S=b[x])&&(k=(E<3?S(k):E>3?S(v,w,k):S(v,w))||k);return E>3&&k&&Object.defineProperty(v,w,k),k},u=this&&this.__param||function(b,v){return function(w,_){v(w,_,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const d=l(3734),h=l(643),f=l(511),p=l(2585);class m extends d.AttributeData{constructor(v,w,_){super(),this.content=0,this.combinedData="",this.fg=v.fg,this.bg=v.bg,this.combinedData=w,this._width=_}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(v){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=m;let g=a.CharacterJoinerService=class Mge{constructor(v){this._bufferService=v,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(v){const w={id:this._nextCharacterJoinerId++,handler:v};return this._characterJoiners.push(w),w.id}deregister(v){for(let w=0;w<this._characterJoiners.length;w++)if(this._characterJoiners[w].id===v)return this._characterJoiners.splice(w,1),!0;return!1}getJoinedCharacters(v){if(this._characterJoiners.length===0)return[];const w=this._bufferService.buffer.lines.get(v);if(!w||w.length===0)return[];const _=[],S=w.translateToString(!0);let E=0,k=0,x=0,I=w.getFg(0),R=w.getBg(0);for(let C=0;C<w.getTrimmedLength();C++)if(w.loadCell(C,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==I||this._workCell.bg!==R){if(C-E>1){const T=this._getJoinedRanges(S,x,k,w,E);for(let O=0;O<T.length;O++)_.push(T[O])}E=C,x=k,I=this._workCell.fg,R=this._workCell.bg}k+=this._workCell.getChars().length||h.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){const C=this._getJoinedRanges(S,x,k,w,E);for(let T=0;T<C.length;T++)_.push(C[T])}return _}_getJoinedRanges(v,w,_,S,E){const k=v.substring(w,_);let x=[];try{x=this._characterJoiners[0].handler(k)}catch(I){console.error(I)}for(let I=1;I<this._characterJoiners.length;I++)try{const R=this._characterJoiners[I].handler(k);for(let C=0;C<R.length;C++)Mge._mergeRanges(x,R[C])}catch(R){console.error(R)}return this._stringRangesToCellRanges(x,S,E),x}_stringRangesToCellRanges(v,w,_){let S=0,E=!1,k=0,x=v[S];if(x){for(let I=_;I<this._bufferService.cols;I++){const R=w.getWidth(I),C=w.getString(I).length||h.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!E&&x[0]<=k&&(x[0]=I,E=!0),x[1]<=k){if(x[1]=I,x=v[++S],!x)break;x[0]<=k?(x[0]=I,E=!0):E=!1}k+=C}}x&&(x[1]=this._bufferService.cols)}}static _mergeRanges(v,w){let _=!1;for(let S=0;S<v.length;S++){const E=v[S];if(_){if(w[1]<=E[0])return v[S-1][1]=w[1],v;if(w[1]<=E[1])return v[S-1][1]=Math.max(w[1],E[1]),v.splice(S,1),v;v.splice(S,1),S--}else{if(w[1]<=E[0])return v.splice(S,0,w),v;if(w[1]<=E[1])return E[0]=Math.min(w[0],E[0]),v;w[0]<E[1]&&(E[0]=Math.min(w[0],E[0]),_=!0)}}return _?v[v.length-1][1]=w[1]:v.push(w),v}};a.CharacterJoinerService=g=c([u(0,p.IBufferService)],g)},5114:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;const c=l(844),u=l(8460),d=l(3656);class h extends c.Disposable{constructor(m,g,b){super(),this._textarea=m,this._window=g,this.mainDocument=b,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new f(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(v=>this._screenDprMonitor.setWindow(v))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(m){this._window!==m&&(this._window=m,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}a.CoreBrowserService=h;class f extends c.Disposable{constructor(m){super(),this._parentWindow=m,this._windowResizeListener=this.register(new c.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,c.toDisposable)(()=>this.clearListener()))}setWindow(m){this._parentWindow=m,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkProviderService=void 0;const c=l(844);class u extends c.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,c.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(h){return this.linkProviders.push(h),{dispose:()=>{const f=this.linkProviders.indexOf(h);f!==-1&&this.linkProviders.splice(f,1)}}}}a.LinkProviderService=u},8934:function(o,a,l){var c=this&&this.__decorate||function(p,m,g,b){var v,w=arguments.length,_=w<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(p,m,g,b);else for(var S=p.length-1;S>=0;S--)(v=p[S])&&(_=(w<3?v(_):w>3?v(m,g,_):v(m,g))||_);return w>3&&_&&Object.defineProperty(m,g,_),_},u=this&&this.__param||function(p,m){return function(g,b){m(g,b,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const d=l(4725),h=l(9806);let f=a.MouseService=class{constructor(p,m){this._renderService=p,this._charSizeService=m}getCoords(p,m,g,b,v){return(0,h.getCoords)(window,p,m,g,b,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,v)}getMouseReportCoords(p,m){const g=(0,h.getCoordsRelativeToElement)(window,p,m);if(this._charSizeService.hasValidSize)return g[0]=Math.min(Math.max(g[0],0),this._renderService.dimensions.css.canvas.width-1),g[1]=Math.min(Math.max(g[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(g[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(g[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(g[0]),y:Math.floor(g[1])}}};a.MouseService=f=c([u(0,d.IRenderService),u(1,d.ICharSizeService)],f)},3230:function(o,a,l){var c=this&&this.__decorate||function(v,w,_,S){var E,k=arguments.length,x=k<3?w:S===null?S=Object.getOwnPropertyDescriptor(w,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,w,_,S);else for(var I=v.length-1;I>=0;I--)(E=v[I])&&(x=(k<3?E(x):k>3?E(w,_,x):E(w,_))||x);return k>3&&x&&Object.defineProperty(w,_,x),x},u=this&&this.__param||function(v,w){return function(_,S){w(_,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const d=l(6193),h=l(4725),f=l(8460),p=l(844),m=l(7226),g=l(2585);let b=a.RenderService=class extends p.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(v,w,_,S,E,k,x,I){super(),this._rowCount=v,this._charSizeService=S,this._renderer=this.register(new p.MutableDisposable),this._pausedResizeTask=new m.DebouncedIdleTask,this._observerDisposable=this.register(new p.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((R,C)=>this._renderRows(R,C),x),this.register(this._renderDebouncer),this.register(x.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(_.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(E.onDecorationRegistered(()=>this._fullRefresh())),this.register(E.onDecorationRemoved(()=>this._fullRefresh())),this.register(_.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(_.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register(I.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(x.window,w),this.register(x.onWindowChange(R=>this._registerIntersectionObserver(R,w)))}_registerIntersectionObserver(v,w){if("IntersectionObserver"in v){const _=new v.IntersectionObserver(S=>this._handleIntersectionChange(S[S.length-1]),{threshold:0});_.observe(w),this._observerDisposable.value=(0,p.toDisposable)(()=>_.disconnect())}}_handleIntersectionChange(v){this._isPaused=v.isIntersecting===void 0?v.intersectionRatio===0:!v.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(v,w,_=!1){this._isPaused?this._needsFullRefresh=!0:(_||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(v,w,this._rowCount))}_renderRows(v,w){this._renderer.value&&(v=Math.min(v,this._rowCount-1),w=Math.min(w,this._rowCount-1),this._renderer.value.renderRows(v,w),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:v,end:w}),this._onRender.fire({start:v,end:w}),this._isNextRenderRedrawOnly=!0)}resize(v,w){this._rowCount=w,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(v){this._renderer.value=v,this._renderer.value&&(this._renderer.value.onRequestRedraw(w=>this.refreshRows(w.start,w.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(v){return this._renderDebouncer.addRefreshCallback(v)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(v,w){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(v,w)):this._renderer.value.handleResize(v,w),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(v,w,_){this._selectionState.start=v,this._selectionState.end=w,this._selectionState.columnSelectMode=_,this._renderer.value?.handleSelectionChanged(v,w,_)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};a.RenderService=b=c([u(2,g.IOptionsService),u(3,h.ICharSizeService),u(4,g.IDecorationService),u(5,g.IBufferService),u(6,h.ICoreBrowserService),u(7,h.IThemeService)],b)},9312:function(o,a,l){var c=this&&this.__decorate||function(x,I,R,C){var T,O=arguments.length,P=O<3?I:C===null?C=Object.getOwnPropertyDescriptor(I,R):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(x,I,R,C);else for(var U=x.length-1;U>=0;U--)(T=x[U])&&(P=(O<3?T(P):O>3?T(I,R,P):T(I,R))||P);return O>3&&P&&Object.defineProperty(I,R,P),P},u=this&&this.__param||function(x,I){return function(R,C){I(R,C,x)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const d=l(9806),h=l(9504),f=l(456),p=l(4725),m=l(8460),g=l(844),b=l(6114),v=l(4841),w=l(511),_=l(2585),S="",E=new RegExp(S,"g");let k=a.SelectionService=class extends g.Disposable{constructor(x,I,R,C,T,O,P,U,ee){super(),this._element=x,this._screenElement=I,this._linkifier=R,this._bufferService=C,this._coreService=T,this._mouseService=O,this._optionsService=P,this._renderService=U,this._coreBrowserService=ee,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new w.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new m.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new m.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new m.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=X=>this._handleMouseMove(X),this._mouseUpListener=X=>this._handleMouseUp(X),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(X=>this._handleTrim(X)),this.register(this._bufferService.buffers.onBufferActivate(X=>this._handleBufferActivate(X))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,g.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const x=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!x||!I||x[0]===I[0]&&x[1]===I[1])}get selectionText(){const x=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;if(!x||!I)return"";const R=this._bufferService.buffer,C=[];if(this._activeSelectionMode===3){if(x[0]===I[0])return"";const T=x[0]<I[0]?x[0]:I[0],O=x[0]<I[0]?I[0]:x[0];for(let P=x[1];P<=I[1];P++){const U=R.translateBufferLineToString(P,!0,T,O);C.push(U)}}else{const T=x[1]===I[1]?I[0]:void 0;C.push(R.translateBufferLineToString(x[1],!0,x[0],T));for(let O=x[1]+1;O<=I[1]-1;O++){const P=R.lines.get(O),U=R.translateBufferLineToString(O,!0);P?.isWrapped?C[C.length-1]+=U:C.push(U)}if(x[1]!==I[1]){const O=R.lines.get(I[1]),P=R.translateBufferLineToString(I[1],!0,0,I[0]);O&&O.isWrapped?C[C.length-1]+=P:C.push(P)}}return C.map(T=>T.replace(E," ")).join(b.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(x){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),b.isLinux&&x&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(x){const I=this._getMouseBufferCoords(x),R=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!!(R&&C&&I)&&this._areCoordsInSelection(I,R,C)}isCellInSelection(x,I){const R=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!R||!C)&&this._areCoordsInSelection([x,I],R,C)}_areCoordsInSelection(x,I,R){return x[1]>I[1]&&x[1]<R[1]||I[1]===R[1]&&x[1]===I[1]&&x[0]>=I[0]&&x[0]<R[0]||I[1]<R[1]&&x[1]===R[1]&&x[0]<R[0]||I[1]<R[1]&&x[1]===I[1]&&x[0]>=I[0]}_selectWordAtCursor(x,I){const R=this._linkifier.currentLink?.link?.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,v.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const C=this._getMouseBufferCoords(x);return!!C&&(this._selectWordAt(C,I),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(x,I){this._model.clearSelection(),x=Math.max(x,0),I=Math.min(I,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,x],this._model.selectionEnd=[this._bufferService.cols,I],this.refresh(),this._onSelectionChange.fire()}_handleTrim(x){this._model.handleTrim(x)&&this.refresh()}_getMouseBufferCoords(x){const I=this._mouseService.getCoords(x,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(I)return I[0]--,I[1]--,I[1]+=this._bufferService.buffer.ydisp,I}_getMouseEventScrollAmount(x){let I=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,x,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return I>=0&&I<=R?0:(I>R&&(I-=R),I=Math.min(Math.max(I,-50),50),I/=50,I/Math.abs(I)+Math.round(14*I))}shouldForceSelection(x){return b.isMac?x.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:x.shiftKey}handleMouseDown(x){if(this._mouseDownTimeStamp=x.timeStamp,(x.button!==2||!this.hasSelection)&&x.button===0){if(!this._enabled){if(!this.shouldForceSelection(x))return;x.stopPropagation()}x.preventDefault(),this._dragScrollAmount=0,this._enabled&&x.shiftKey?this._handleIncrementalClick(x):x.detail===1?this._handleSingleClick(x):x.detail===2?this._handleDoubleClick(x):x.detail===3&&this._handleTripleClick(x),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(x){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(x))}_handleSingleClick(x){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(x)?3:0,this._model.selectionStart=this._getMouseBufferCoords(x),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const I=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);I&&I.length!==this._model.selectionStart[0]&&I.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(x){this._selectWordAtCursor(x,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(x){const I=this._getMouseBufferCoords(x);I&&(this._activeSelectionMode=2,this._selectLineAt(I[1]))}shouldColumnSelect(x){return x.altKey&&!(b.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(x){if(x.stopImmediatePropagation(),!this._model.selectionStart)return;const I=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(x),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(x),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const C=R.lines.get(this._model.selectionEnd[1]);C&&C.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}I&&I[0]===this._model.selectionEnd[0]&&I[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const x=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(x.ydisp+this._bufferService.rows,x.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=x.ydisp),this.refresh()}}_handleMouseUp(x){const I=x.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&I<500&&x.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(x,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const C=(0,h.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(C,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const x=this._model.finalSelectionStart,I=this._model.finalSelectionEnd,R=!(!x||!I||x[0]===I[0]&&x[1]===I[1]);R?x&&I&&(this._oldSelectionStart&&this._oldSelectionEnd&&x[0]===this._oldSelectionStart[0]&&x[1]===this._oldSelectionStart[1]&&I[0]===this._oldSelectionEnd[0]&&I[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(x,I,R)):this._oldHasSelection&&this._fireOnSelectionChange(x,I,R)}_fireOnSelectionChange(x,I,R){this._oldSelectionStart=x,this._oldSelectionEnd=I,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(x){this.clearSelection(),this._trimListener.dispose(),this._trimListener=x.activeBuffer.lines.onTrim(I=>this._handleTrim(I))}_convertViewportColToCharacterIndex(x,I){let R=I;for(let C=0;I>=C;C++){const T=x.loadCell(C,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:T>1&&I!==C&&(R+=T-1)}return R}setSelection(x,I,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[x,I],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(x){this._isClickInSelection(x)||(this._selectWordAtCursor(x,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(x,I,R=!0,C=!0){if(x[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,O=T.lines.get(x[1]);if(!O)return;const P=T.translateBufferLineToString(x[1],!1);let U=this._convertViewportColToCharacterIndex(O,x[0]),ee=U;const X=x[0]-U;let Z=0,F=0,M=0,G=0;if(P.charAt(U)===" "){for(;U>0&&P.charAt(U-1)===" ";)U--;for(;ee<P.length&&P.charAt(ee+1)===" ";)ee++}else{let W=x[0],q=x[0];O.getWidth(W)===0&&(Z++,W--),O.getWidth(q)===2&&(F++,q++);const ne=O.getString(q).length;for(ne>1&&(G+=ne-1,ee+=ne-1);W>0&&U>0&&!this._isCharWordSeparator(O.loadCell(W-1,this._workCell));){O.loadCell(W-1,this._workCell);const te=this._workCell.getChars().length;this._workCell.getWidth()===0?(Z++,W--):te>1&&(M+=te-1,U-=te-1),U--,W--}for(;q<O.length&&ee+1<P.length&&!this._isCharWordSeparator(O.loadCell(q+1,this._workCell));){O.loadCell(q+1,this._workCell);const te=this._workCell.getChars().length;this._workCell.getWidth()===2?(F++,q++):te>1&&(G+=te-1,ee+=te-1),ee++,q++}}ee++;let D=U+X-Z+M,j=Math.min(this._bufferService.cols,ee-U+Z+F-M-G);if(I||P.slice(U,ee).trim()!==""){if(R&&D===0&&O.getCodePoint(0)!==32){const W=T.lines.get(x[1]-1);if(W&&O.isWrapped&&W.getCodePoint(this._bufferService.cols-1)!==32){const q=this._getWordAt([this._bufferService.cols-1,x[1]-1],!1,!0,!1);if(q){const ne=this._bufferService.cols-q.start;D-=ne,j+=ne}}}if(C&&D+j===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const W=T.lines.get(x[1]+1);if(W?.isWrapped&&W.getCodePoint(0)!==32){const q=this._getWordAt([0,x[1]+1],!1,!1,!0);q&&(j+=q.length)}}return{start:D,length:j}}}_selectWordAt(x,I){const R=this._getWordAt(x,I);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,x[1]--;this._model.selectionStart=[R.start,x[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(x){const I=this._getWordAt(x,!0);if(I){let R=x[1];for(;I.start<0;)I.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;I.start+I.length>this._bufferService.cols;)I.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?I.start:I.start+I.length,R]}}_isCharWordSeparator(x){return x.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(x.getChars())>=0}_selectLineAt(x){const I=this._bufferService.buffer.getWrappedRangeForLine(x),R={start:{x:0,y:I.first},end:{x:this._bufferService.cols-1,y:I.last}};this._model.selectionStart=[0,I.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,v.getRangeLength)(R,this._bufferService.cols)}};a.SelectionService=k=c([u(3,_.IBufferService),u(4,_.ICoreService),u(5,p.IMouseService),u(6,_.IOptionsService),u(7,p.IRenderService),u(8,p.ICoreBrowserService)],k)},4725:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ILinkProviderService=a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const c=l(8343);a.ICharSizeService=(0,c.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),a.IMouseService=(0,c.createDecorator)("MouseService"),a.IRenderService=(0,c.createDecorator)("RenderService"),a.ISelectionService=(0,c.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,c.createDecorator)("ThemeService"),a.ILinkProviderService=(0,c.createDecorator)("LinkProviderService")},6731:function(o,a,l){var c=this&&this.__decorate||function(k,x,I,R){var C,T=arguments.length,O=T<3?x:R===null?R=Object.getOwnPropertyDescriptor(x,I):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(k,x,I,R);else for(var P=k.length-1;P>=0;P--)(C=k[P])&&(O=(T<3?C(O):T>3?C(x,I,O):C(x,I))||O);return T>3&&O&&Object.defineProperty(x,I,O),O},u=this&&this.__param||function(k,x){return function(I,R){x(I,R,k)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const d=l(7239),h=l(8055),f=l(8460),p=l(844),m=l(2585),g=h.css.toColor("#ffffff"),b=h.css.toColor("#000000"),v=h.css.toColor("#ffffff"),w=h.css.toColor("#000000"),_={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[h.css.toColor("#2e3436"),h.css.toColor("#cc0000"),h.css.toColor("#4e9a06"),h.css.toColor("#c4a000"),h.css.toColor("#3465a4"),h.css.toColor("#75507b"),h.css.toColor("#06989a"),h.css.toColor("#d3d7cf"),h.css.toColor("#555753"),h.css.toColor("#ef2929"),h.css.toColor("#8ae234"),h.css.toColor("#fce94f"),h.css.toColor("#729fcf"),h.css.toColor("#ad7fa8"),h.css.toColor("#34e2e2"),h.css.toColor("#eeeeec")],x=[0,95,135,175,215,255];for(let I=0;I<216;I++){const R=x[I/36%6|0],C=x[I/6%6|0],T=x[I%6];k.push({css:h.channels.toCss(R,C,T),rgba:h.channels.toRgba(R,C,T)})}for(let I=0;I<24;I++){const R=8+10*I;k.push({css:h.channels.toCss(R,R,R),rgba:h.channels.toRgba(R,R,R)})}return k})());let S=a.ThemeService=class extends p.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:g,background:b,cursor:v,cursorAccent:w,selectionForeground:void 0,selectionBackgroundTransparent:_,selectionBackgroundOpaque:h.color.blend(b,_),selectionInactiveBackgroundTransparent:_,selectionInactiveBackgroundOpaque:h.color.blend(b,_),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const x=this._colors;if(x.foreground=E(k.foreground,g),x.background=E(k.background,b),x.cursor=E(k.cursor,v),x.cursorAccent=E(k.cursorAccent,w),x.selectionBackgroundTransparent=E(k.selectionBackground,_),x.selectionBackgroundOpaque=h.color.blend(x.background,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundTransparent=E(k.selectionInactiveBackground,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundOpaque=h.color.blend(x.background,x.selectionInactiveBackgroundTransparent),x.selectionForeground=k.selectionForeground?E(k.selectionForeground,h.NULL_COLOR):void 0,x.selectionForeground===h.NULL_COLOR&&(x.selectionForeground=void 0),h.color.isOpaque(x.selectionBackgroundTransparent)&&(x.selectionBackgroundTransparent=h.color.opacity(x.selectionBackgroundTransparent,.3)),h.color.isOpaque(x.selectionInactiveBackgroundTransparent)&&(x.selectionInactiveBackgroundTransparent=h.color.opacity(x.selectionInactiveBackgroundTransparent,.3)),x.ansi=a.DEFAULT_ANSI_COLORS.slice(),x.ansi[0]=E(k.black,a.DEFAULT_ANSI_COLORS[0]),x.ansi[1]=E(k.red,a.DEFAULT_ANSI_COLORS[1]),x.ansi[2]=E(k.green,a.DEFAULT_ANSI_COLORS[2]),x.ansi[3]=E(k.yellow,a.DEFAULT_ANSI_COLORS[3]),x.ansi[4]=E(k.blue,a.DEFAULT_ANSI_COLORS[4]),x.ansi[5]=E(k.magenta,a.DEFAULT_ANSI_COLORS[5]),x.ansi[6]=E(k.cyan,a.DEFAULT_ANSI_COLORS[6]),x.ansi[7]=E(k.white,a.DEFAULT_ANSI_COLORS[7]),x.ansi[8]=E(k.brightBlack,a.DEFAULT_ANSI_COLORS[8]),x.ansi[9]=E(k.brightRed,a.DEFAULT_ANSI_COLORS[9]),x.ansi[10]=E(k.brightGreen,a.DEFAULT_ANSI_COLORS[10]),x.ansi[11]=E(k.brightYellow,a.DEFAULT_ANSI_COLORS[11]),x.ansi[12]=E(k.brightBlue,a.DEFAULT_ANSI_COLORS[12]),x.ansi[13]=E(k.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),x.ansi[14]=E(k.brightCyan,a.DEFAULT_ANSI_COLORS[14]),x.ansi[15]=E(k.brightWhite,a.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const I=Math.min(x.ansi.length-16,k.extendedAnsi.length);for(let R=0;R<I;R++)x.ansi[R+16]=E(k.extendedAnsi[R],a.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let x=0;x<this._restoreColors.ansi.length;++x)this._colors.ansi[x]=this._restoreColors.ansi[x]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(k,x){if(k!==void 0)try{return h.css.toColor(k)}catch{}return x}a.ThemeService=S=c([u(0,m.IOptionsService)],S)},6349:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const c=l(8460),u=l(844);class d extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;const p=new Array(f);for(let m=0;m<Math.min(f,this.length);m++)p[m]=this._array[this._getCyclicIndex(m)];this._array=p,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let p=this._length;p<f;p++)this._array[p]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,p){this._array[this._getCyclicIndex(f)]=p}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,p,...m){if(p){for(let g=f;g<this._length-p;g++)this._array[this._getCyclicIndex(g)]=this._array[this._getCyclicIndex(g+p)];this._length-=p,this.onDeleteEmitter.fire({index:f,amount:p})}for(let g=this._length-1;g>=f;g--)this._array[this._getCyclicIndex(g+m.length)]=this._array[this._getCyclicIndex(g)];for(let g=0;g<m.length;g++)this._array[this._getCyclicIndex(f+g)]=m[g];if(m.length&&this.onInsertEmitter.fire({index:f,amount:m.length}),this._length+m.length>this._maxLength){const g=this._length+m.length-this._maxLength;this._startIndex+=g,this._length=this._maxLength,this.onTrimEmitter.fire(g)}else this._length+=m.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,p,m){if(!(p<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+m<0)throw new Error("Cannot shift elements in list beyond index 0");if(m>0){for(let b=p-1;b>=0;b--)this.set(f+b+m,this.get(f+b));const g=f+p+m-this._length;if(g>0)for(this._length+=g;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let g=0;g<p;g++)this.set(f+g+m,this.get(f+g))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}a.CircularList=d},1439:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function l(c,u=5){if(typeof c!="object")return c;const d=Array.isArray(c)?[]:{};for(const h in c)d[h]=u<=1?c[h]:c[h]&&l(c[h],u-1);return d}},8055:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=0,c=0,u=0,d=0;var h,f,p,m,g;function b(w){const _=w.toString(16);return _.length<2?"0"+_:_}function v(w,_){return w<_?(_+.05)/(w+.05):(w+.05)/(_+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(w){w.toCss=function(_,S,E,k){return k!==void 0?`#${b(_)}${b(S)}${b(E)}${b(k)}`:`#${b(_)}${b(S)}${b(E)}`},w.toRgba=function(_,S,E,k=255){return(_<<24|S<<16|E<<8|k)>>>0},w.toColor=function(_,S,E,k){return{css:w.toCss(_,S,E,k),rgba:w.toRgba(_,S,E,k)}}}(h||(a.channels=h={})),function(w){function _(S,E){return d=Math.round(255*E),[l,c,u]=g.toChannels(S.rgba),{css:h.toCss(l,c,u,d),rgba:h.toRgba(l,c,u,d)}}w.blend=function(S,E){if(d=(255&E.rgba)/255,d===1)return{css:E.css,rgba:E.rgba};const k=E.rgba>>24&255,x=E.rgba>>16&255,I=E.rgba>>8&255,R=S.rgba>>24&255,C=S.rgba>>16&255,T=S.rgba>>8&255;return l=R+Math.round((k-R)*d),c=C+Math.round((x-C)*d),u=T+Math.round((I-T)*d),{css:h.toCss(l,c,u),rgba:h.toRgba(l,c,u)}},w.isOpaque=function(S){return(255&S.rgba)==255},w.ensureContrastRatio=function(S,E,k){const x=g.ensureContrastRatio(S.rgba,E.rgba,k);if(x)return h.toColor(x>>24&255,x>>16&255,x>>8&255)},w.opaque=function(S){const E=(255|S.rgba)>>>0;return[l,c,u]=g.toChannels(E),{css:h.toCss(l,c,u),rgba:E}},w.opacity=_,w.multiplyOpacity=function(S,E){return d=255&S.rgba,_(S,d*E/255)},w.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(f||(a.color=f={})),function(w){let _,S;try{const E=document.createElement("canvas");E.width=1,E.height=1;const k=E.getContext("2d",{willReadFrequently:!0});k&&(_=k,_.globalCompositeOperation="copy",S=_.createLinearGradient(0,0,1,1))}catch{}w.toColor=function(E){if(E.match(/#[\da-f]{3,8}/i))switch(E.length){case 4:return l=parseInt(E.slice(1,2).repeat(2),16),c=parseInt(E.slice(2,3).repeat(2),16),u=parseInt(E.slice(3,4).repeat(2),16),h.toColor(l,c,u);case 5:return l=parseInt(E.slice(1,2).repeat(2),16),c=parseInt(E.slice(2,3).repeat(2),16),u=parseInt(E.slice(3,4).repeat(2),16),d=parseInt(E.slice(4,5).repeat(2),16),h.toColor(l,c,u,d);case 7:return{css:E,rgba:(parseInt(E.slice(1),16)<<8|255)>>>0};case 9:return{css:E,rgba:parseInt(E.slice(1),16)>>>0}}const k=E.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return l=parseInt(k[1]),c=parseInt(k[2]),u=parseInt(k[3]),d=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),h.toColor(l,c,u,d);if(!_||!S)throw new Error("css.toColor: Unsupported css format");if(_.fillStyle=S,_.fillStyle=E,typeof _.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(_.fillRect(0,0,1,1),[l,c,u,d]=_.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:h.toRgba(l,c,u,d),css:E}}}(p||(a.css=p={})),function(w){function _(S,E,k){const x=S/255,I=E/255,R=k/255;return .2126*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.7152*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}w.relativeLuminance=function(S){return _(S>>16&255,S>>8&255,255&S)},w.relativeLuminance2=_}(m||(a.rgb=m={})),function(w){function _(E,k,x){const I=E>>24&255,R=E>>16&255,C=E>>8&255;let T=k>>24&255,O=k>>16&255,P=k>>8&255,U=v(m.relativeLuminance2(T,O,P),m.relativeLuminance2(I,R,C));for(;U<x&&(T>0||O>0||P>0);)T-=Math.max(0,Math.ceil(.1*T)),O-=Math.max(0,Math.ceil(.1*O)),P-=Math.max(0,Math.ceil(.1*P)),U=v(m.relativeLuminance2(T,O,P),m.relativeLuminance2(I,R,C));return(T<<24|O<<16|P<<8|255)>>>0}function S(E,k,x){const I=E>>24&255,R=E>>16&255,C=E>>8&255;let T=k>>24&255,O=k>>16&255,P=k>>8&255,U=v(m.relativeLuminance2(T,O,P),m.relativeLuminance2(I,R,C));for(;U<x&&(T<255||O<255||P<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),O=Math.min(255,O+Math.ceil(.1*(255-O))),P=Math.min(255,P+Math.ceil(.1*(255-P))),U=v(m.relativeLuminance2(T,O,P),m.relativeLuminance2(I,R,C));return(T<<24|O<<16|P<<8|255)>>>0}w.blend=function(E,k){if(d=(255&k)/255,d===1)return k;const x=k>>24&255,I=k>>16&255,R=k>>8&255,C=E>>24&255,T=E>>16&255,O=E>>8&255;return l=C+Math.round((x-C)*d),c=T+Math.round((I-T)*d),u=O+Math.round((R-O)*d),h.toRgba(l,c,u)},w.ensureContrastRatio=function(E,k,x){const I=m.relativeLuminance(E>>8),R=m.relativeLuminance(k>>8);if(v(I,R)<x){if(R<I){const O=_(E,k,x),P=v(I,m.relativeLuminance(O>>8));if(P<x){const U=S(E,k,x);return P>v(I,m.relativeLuminance(U>>8))?O:U}return O}const C=S(E,k,x),T=v(I,m.relativeLuminance(C>>8));if(T<x){const O=_(E,k,x);return T>v(I,m.relativeLuminance(O>>8))?C:O}return C}},w.reduceLuminance=_,w.increaseLuminance=S,w.toChannels=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]}}(g||(a.rgba=g={})),a.toPaddedHex=b,a.contrastRatio=v},8969:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const c=l(844),u=l(2585),d=l(4348),h=l(7866),f=l(744),p=l(7302),m=l(6975),g=l(8460),b=l(1753),v=l(1480),w=l(7994),_=l(9282),S=l(5435),E=l(5981),k=l(2660);let x=!1;class I extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new g.EventEmitter),this._onScroll.event(C=>{this._onScrollApi?.fire(C.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(C){for(const T in C)this.optionsService.options[T]=C[T]}constructor(C){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new g.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new g.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new g.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new g.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new p.OptionsService(C)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(h.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(m.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(b.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(v.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(w.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,g.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,g.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,g.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,g.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new E.WriteBuffer((T,O)=>this._inputHandler.parse(T,O))),this.register((0,g.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(C,T){this._writeBuffer.write(C,T)}writeSync(C,T){this._logService.logLevel<=u.LogLevelEnum.WARN&&!x&&(this._logService.warn("writeSync is unreliable and will be removed soon."),x=!0),this._writeBuffer.writeSync(C,T)}input(C,T=!0){this.coreService.triggerDataEvent(C,T)}resize(C,T){isNaN(C)||isNaN(T)||(C=Math.max(C,f.MINIMUM_COLS),T=Math.max(T,f.MINIMUM_ROWS),this._bufferService.resize(C,T))}scroll(C,T=!1){this._bufferService.scroll(C,T)}scrollLines(C,T,O){this._bufferService.scrollLines(C,T,O)}scrollPages(C){this.scrollLines(C*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(C){const T=C-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(C,T){return this._inputHandler.registerEscHandler(C,T)}registerDcsHandler(C,T){return this._inputHandler.registerDcsHandler(C,T)}registerCsiHandler(C,T){return this._inputHandler.registerCsiHandler(C,T)}registerOscHandler(C,T){return this._inputHandler.registerOscHandler(C,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let C=!1;const T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?C=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(C=!0),C?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const C=[];C.push(this.onLineFeed(_.updateWindowsModeWrappedState.bind(null,this._bufferService))),C.push(this.registerCsiHandler({final:"H"},()=>((0,_.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const T of C)T.dispose()})}}}a.CoreTerminal=I},8460:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.runAndSubscribe=a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===l)return void this._listeners.splice(c,1)}}})),this._event}fire(l,c){const u=[];for(let d=0;d<this._listeners.length;d++)u.push(this._listeners[d]);for(let d=0;d<u.length;d++)u[d].call(void 0,l,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(l,c){return l(u=>c.fire(u))},a.runAndSubscribe=function(l,c){return c(void 0),l(u=>c(u))}},5435:function(o,a,l){var c=this&&this.__decorate||function(Z,F,M,G){var D,j=arguments.length,W=j<3?F:G===null?G=Object.getOwnPropertyDescriptor(F,M):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(Z,F,M,G);else for(var q=Z.length-1;q>=0;q--)(D=Z[q])&&(W=(j<3?D(W):j>3?D(F,M,W):D(F,M))||W);return j>3&&W&&Object.defineProperty(F,M,W),W},u=this&&this.__param||function(Z,F){return function(M,G){F(M,G,Z)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const d=l(2584),h=l(7116),f=l(2015),p=l(844),m=l(482),g=l(8437),b=l(8460),v=l(643),w=l(511),_=l(3734),S=l(2585),E=l(1480),k=l(6242),x=l(6351),I=l(5941),R={"(":0,")":1,"*":2,"+":3,"-":1,".":2},C=131072;function T(Z,F){if(Z>24)return F.setWinLines||!1;switch(Z){case 1:return!!F.restoreWin;case 2:return!!F.minimizeWin;case 3:return!!F.setWinPosition;case 4:return!!F.setWinSizePixels;case 5:return!!F.raiseWin;case 6:return!!F.lowerWin;case 7:return!!F.refreshWin;case 8:return!!F.setWinSizeChars;case 9:return!!F.maximizeWin;case 10:return!!F.fullscreenWin;case 11:return!!F.getWinState;case 13:return!!F.getWinPosition;case 14:return!!F.getWinSizePixels;case 15:return!!F.getScreenSizePixels;case 16:return!!F.getCellSizePixels;case 18:return!!F.getWinSizeChars;case 19:return!!F.getScreenSizeChars;case 20:return!!F.getIconTitle;case 21:return!!F.getWinTitle;case 22:return!!F.pushTitle;case 23:return!!F.popTitle;case 24:return!!F.setWinLines}return!1}var O;(function(Z){Z[Z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Z[Z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(O||(a.WindowsOptionsReportType=O={}));let P=0;class U extends p.Disposable{getAttrData(){return this._curAttrData}constructor(F,M,G,D,j,W,q,ne,te=new f.EscapeSequenceParser){super(),this._bufferService=F,this._charsetService=M,this._coreService=G,this._logService=D,this._optionsService=j,this._oscLinkService=W,this._coreMouseService=q,this._unicodeService=ne,this._parser=te,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new m.StringToUtf32,this._utf8Decoder=new m.Utf8ToUtf32,this._workCell=new w.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=g.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new b.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new b.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new b.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new b.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new b.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new b.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new b.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new b.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new b.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new b.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new b.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new b.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new b.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ee(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(Y=>this._activeBuffer=Y.activeBuffer)),this._parser.setCsiHandlerFallback((Y,de)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(Y),params:de.toArray()})}),this._parser.setEscHandlerFallback(Y=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(Y)})}),this._parser.setExecuteHandlerFallback(Y=>{this._logService.debug("Unknown EXECUTE code: ",{code:Y})}),this._parser.setOscHandlerFallback((Y,de,Se)=>{this._logService.debug("Unknown OSC code: ",{identifier:Y,action:de,data:Se})}),this._parser.setDcsHandlerFallback((Y,de,Se)=>{de==="HOOK"&&(Se=Se.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(Y),action:de,payload:Se})}),this._parser.setPrintHandler((Y,de,Se)=>this.print(Y,de,Se)),this._parser.registerCsiHandler({final:"@"},Y=>this.insertChars(Y)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},Y=>this.scrollLeft(Y)),this._parser.registerCsiHandler({final:"A"},Y=>this.cursorUp(Y)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},Y=>this.scrollRight(Y)),this._parser.registerCsiHandler({final:"B"},Y=>this.cursorDown(Y)),this._parser.registerCsiHandler({final:"C"},Y=>this.cursorForward(Y)),this._parser.registerCsiHandler({final:"D"},Y=>this.cursorBackward(Y)),this._parser.registerCsiHandler({final:"E"},Y=>this.cursorNextLine(Y)),this._parser.registerCsiHandler({final:"F"},Y=>this.cursorPrecedingLine(Y)),this._parser.registerCsiHandler({final:"G"},Y=>this.cursorCharAbsolute(Y)),this._parser.registerCsiHandler({final:"H"},Y=>this.cursorPosition(Y)),this._parser.registerCsiHandler({final:"I"},Y=>this.cursorForwardTab(Y)),this._parser.registerCsiHandler({final:"J"},Y=>this.eraseInDisplay(Y,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},Y=>this.eraseInDisplay(Y,!0)),this._parser.registerCsiHandler({final:"K"},Y=>this.eraseInLine(Y,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},Y=>this.eraseInLine(Y,!0)),this._parser.registerCsiHandler({final:"L"},Y=>this.insertLines(Y)),this._parser.registerCsiHandler({final:"M"},Y=>this.deleteLines(Y)),this._parser.registerCsiHandler({final:"P"},Y=>this.deleteChars(Y)),this._parser.registerCsiHandler({final:"S"},Y=>this.scrollUp(Y)),this._parser.registerCsiHandler({final:"T"},Y=>this.scrollDown(Y)),this._parser.registerCsiHandler({final:"X"},Y=>this.eraseChars(Y)),this._parser.registerCsiHandler({final:"Z"},Y=>this.cursorBackwardTab(Y)),this._parser.registerCsiHandler({final:"`"},Y=>this.charPosAbsolute(Y)),this._parser.registerCsiHandler({final:"a"},Y=>this.hPositionRelative(Y)),this._parser.registerCsiHandler({final:"b"},Y=>this.repeatPrecedingCharacter(Y)),this._parser.registerCsiHandler({final:"c"},Y=>this.sendDeviceAttributesPrimary(Y)),this._parser.registerCsiHandler({prefix:">",final:"c"},Y=>this.sendDeviceAttributesSecondary(Y)),this._parser.registerCsiHandler({final:"d"},Y=>this.linePosAbsolute(Y)),this._parser.registerCsiHandler({final:"e"},Y=>this.vPositionRelative(Y)),this._parser.registerCsiHandler({final:"f"},Y=>this.hVPosition(Y)),this._parser.registerCsiHandler({final:"g"},Y=>this.tabClear(Y)),this._parser.registerCsiHandler({final:"h"},Y=>this.setMode(Y)),this._parser.registerCsiHandler({prefix:"?",final:"h"},Y=>this.setModePrivate(Y)),this._parser.registerCsiHandler({final:"l"},Y=>this.resetMode(Y)),this._parser.registerCsiHandler({prefix:"?",final:"l"},Y=>this.resetModePrivate(Y)),this._parser.registerCsiHandler({final:"m"},Y=>this.charAttributes(Y)),this._parser.registerCsiHandler({final:"n"},Y=>this.deviceStatus(Y)),this._parser.registerCsiHandler({prefix:"?",final:"n"},Y=>this.deviceStatusPrivate(Y)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},Y=>this.softReset(Y)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},Y=>this.setCursorStyle(Y)),this._parser.registerCsiHandler({final:"r"},Y=>this.setScrollRegion(Y)),this._parser.registerCsiHandler({final:"s"},Y=>this.saveCursor(Y)),this._parser.registerCsiHandler({final:"t"},Y=>this.windowOptions(Y)),this._parser.registerCsiHandler({final:"u"},Y=>this.restoreCursor(Y)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},Y=>this.insertColumns(Y)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},Y=>this.deleteColumns(Y)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},Y=>this.selectProtected(Y)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},Y=>this.requestMode(Y,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},Y=>this.requestMode(Y,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new k.OscHandler(Y=>(this.setTitle(Y),this.setIconName(Y),!0))),this._parser.registerOscHandler(1,new k.OscHandler(Y=>this.setIconName(Y))),this._parser.registerOscHandler(2,new k.OscHandler(Y=>this.setTitle(Y))),this._parser.registerOscHandler(4,new k.OscHandler(Y=>this.setOrReportIndexedColor(Y))),this._parser.registerOscHandler(8,new k.OscHandler(Y=>this.setHyperlink(Y))),this._parser.registerOscHandler(10,new k.OscHandler(Y=>this.setOrReportFgColor(Y))),this._parser.registerOscHandler(11,new k.OscHandler(Y=>this.setOrReportBgColor(Y))),this._parser.registerOscHandler(12,new k.OscHandler(Y=>this.setOrReportCursorColor(Y))),this._parser.registerOscHandler(104,new k.OscHandler(Y=>this.restoreIndexedColor(Y))),this._parser.registerOscHandler(110,new k.OscHandler(Y=>this.restoreFgColor(Y))),this._parser.registerOscHandler(111,new k.OscHandler(Y=>this.restoreBgColor(Y))),this._parser.registerOscHandler(112,new k.OscHandler(Y=>this.restoreCursorColor(Y))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const Y in h.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:Y},()=>this.selectCharset("("+Y)),this._parser.registerEscHandler({intermediates:")",final:Y},()=>this.selectCharset(")"+Y)),this._parser.registerEscHandler({intermediates:"*",final:Y},()=>this.selectCharset("*"+Y)),this._parser.registerEscHandler({intermediates:"+",final:Y},()=>this.selectCharset("+"+Y)),this._parser.registerEscHandler({intermediates:"-",final:Y},()=>this.selectCharset("-"+Y)),this._parser.registerEscHandler({intermediates:".",final:Y},()=>this.selectCharset("."+Y)),this._parser.registerEscHandler({intermediates:"/",final:Y},()=>this.selectCharset("/"+Y));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(Y=>(this._logService.error("Parsing error: ",Y),Y)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new x.DcsHandler((Y,de)=>this.requestStatusString(Y,de)))}_preserveStack(F,M,G,D){this._parseStack.paused=!0,this._parseStack.cursorStartX=F,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=G,this._parseStack.position=D}_logSlowResolvingAsync(F){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([F,new Promise((M,G)=>setTimeout(()=>G("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(F,M){let G,D=this._activeBuffer.x,j=this._activeBuffer.y,W=0;const q=this._parseStack.paused;if(q){if(G=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(G),G;D=this._parseStack.cursorStartX,j=this._parseStack.cursorStartY,this._parseStack.paused=!1,F.length>C&&(W=this._parseStack.position+C)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof F=="string"?` "${F}"`:` "${Array.prototype.map.call(F,Y=>String.fromCharCode(Y)).join("")}"`),typeof F=="string"?F.split("").map(Y=>Y.charCodeAt(0)):F),this._parseBuffer.length<F.length&&this._parseBuffer.length<C&&(this._parseBuffer=new Uint32Array(Math.min(F.length,C))),q||this._dirtyRowTracker.clearRange(),F.length>C)for(let Y=W;Y<F.length;Y+=C){const de=Y+C<F.length?Y+C:F.length,Se=typeof F=="string"?this._stringDecoder.decode(F.substring(Y,de),this._parseBuffer):this._utf8Decoder.decode(F.subarray(Y,de),this._parseBuffer);if(G=this._parser.parse(this._parseBuffer,Se))return this._preserveStack(D,j,Se,Y),this._logSlowResolvingAsync(G),G}else if(!q){const Y=typeof F=="string"?this._stringDecoder.decode(F,this._parseBuffer):this._utf8Decoder.decode(F,this._parseBuffer);if(G=this._parser.parse(this._parseBuffer,Y))return this._preserveStack(D,j,Y,0),this._logSlowResolvingAsync(G),G}this._activeBuffer.x===D&&this._activeBuffer.y===j||this._onCursorMove.fire();const ne=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),te=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);te<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(te,this._bufferService.rows-1),Math.min(ne,this._bufferService.rows-1))}print(F,M,G){let D,j;const W=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,ne=this._bufferService.cols,te=this._coreService.decPrivateModes.wraparound,Y=this._coreService.modes.insertMode,de=this._curAttrData;let Se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&G-M>0&&Se.getWidth(this._activeBuffer.x-1)===2&&Se.setCellFromCodepoint(this._activeBuffer.x-1,0,1,de);let xe=this._parser.precedingJoinState;for(let Ae=M;Ae<G;++Ae){if(D=F[Ae],D<127&&W){const re=W[String.fromCharCode(D)];re&&(D=re.charCodeAt(0))}const Pe=this._unicodeService.charProperties(D,xe);j=E.UnicodeService.extractWidth(Pe);const K=E.UnicodeService.extractShouldJoin(Pe),ge=K?E.UnicodeService.extractWidth(xe):0;if(xe=Pe,q&&this._onA11yChar.fire((0,m.stringFromCodePoint)(D)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+j-ge>ne){if(te){const re=Se;let le=this._activeBuffer.x-ge;for(this._activeBuffer.x=ge,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),Se=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ge>0&&Se instanceof g.BufferLine&&Se.copyCellsFrom(re,le,0,ge,!1);le<ne;)re.setCellFromCodepoint(le++,0,1,de)}else if(this._activeBuffer.x=ne-1,j===2)continue}if(K&&this._activeBuffer.x){const re=Se.getWidth(this._activeBuffer.x-1)?1:2;Se.addCodepointToCell(this._activeBuffer.x-re,D,j);for(let le=j-ge;--le>=0;)Se.setCellFromCodepoint(this._activeBuffer.x++,0,0,de)}else if(Y&&(Se.insertCells(this._activeBuffer.x,j-ge,this._activeBuffer.getNullCell(de)),Se.getWidth(ne-1)===2&&Se.setCellFromCodepoint(ne-1,v.NULL_CELL_CODE,v.NULL_CELL_WIDTH,de)),Se.setCellFromCodepoint(this._activeBuffer.x++,D,j,de),j>0)for(;--j;)Se.setCellFromCodepoint(this._activeBuffer.x++,0,0,de)}this._parser.precedingJoinState=xe,this._activeBuffer.x<ne&&G-M>0&&Se.getWidth(this._activeBuffer.x)===0&&!Se.hasContent(this._activeBuffer.x)&&Se.setCellFromCodepoint(this._activeBuffer.x,0,1,de),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(F,M){return F.final!=="t"||F.prefix||F.intermediates?this._parser.registerCsiHandler(F,M):this._parser.registerCsiHandler(F,G=>!T(G.params[0],this._optionsService.rawOptions.windowOptions)||M(G))}registerDcsHandler(F,M){return this._parser.registerDcsHandler(F,new x.DcsHandler(M))}registerEscHandler(F,M){return this._parser.registerEscHandler(F,M)}registerOscHandler(F,M){return this._parser.registerOscHandler(F,new k.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);F.hasWidth(this._activeBuffer.x)&&!F.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const F=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-F),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(F=this._bufferService.cols-1){this._activeBuffer.x=Math.min(F,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(F,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=F,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=F,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(F,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+F,this._activeBuffer.y+M)}cursorUp(F){const M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,F.params[0]||1)):this._moveCursor(0,-(F.params[0]||1)),!0}cursorDown(F){const M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,F.params[0]||1)):this._moveCursor(0,F.params[0]||1),!0}cursorForward(F){return this._moveCursor(F.params[0]||1,0),!0}cursorBackward(F){return this._moveCursor(-(F.params[0]||1),0),!0}cursorNextLine(F){return this.cursorDown(F),this._activeBuffer.x=0,!0}cursorPrecedingLine(F){return this.cursorUp(F),this._activeBuffer.x=0,!0}cursorCharAbsolute(F){return this._setCursor((F.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(F){return this._setCursor(F.length>=2?(F.params[1]||1)-1:0,(F.params[0]||1)-1),!0}charPosAbsolute(F){return this._setCursor((F.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(F){return this._moveCursor(F.params[0]||1,0),!0}linePosAbsolute(F){return this._setCursor(this._activeBuffer.x,(F.params[0]||1)-1),!0}vPositionRelative(F){return this._moveCursor(0,F.params[0]||1),!0}hVPosition(F){return this.cursorPosition(F),!0}tabClear(F){const M=F.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(F){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=F.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(F){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=F.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(F){const M=F.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(F,M,G,D=!1,j=!1){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.replaceCells(M,G,this._activeBuffer.getNullCell(this._eraseAttrData()),j),D&&(W.isWrapped=!1)}_resetBufferLine(F,M=!1){const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);G&&(G.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+F),G.isWrapped=!1)}eraseInDisplay(F,M=!1){let G;switch(this._restrictCursor(this._bufferService.cols),F.params[0]){case 0:for(G=this._activeBuffer.y,this._dirtyRowTracker.markDirty(G),this._eraseInBufferLine(G++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);G<this._bufferService.rows;G++)this._resetBufferLine(G,M);this._dirtyRowTracker.markDirty(G);break;case 1:for(G=this._activeBuffer.y,this._dirtyRowTracker.markDirty(G),this._eraseInBufferLine(G,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(G+1).isWrapped=!1);G--;)this._resetBufferLine(G,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(G=this._bufferService.rows,this._dirtyRowTracker.markDirty(G-1);G--;)this._resetBufferLine(G,M);this._dirtyRowTracker.markDirty(0);break;case 3:const D=this._activeBuffer.lines.length-this._bufferService.rows;D>0&&(this._activeBuffer.lines.trimStart(D),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-D,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-D,0),this._onScroll.fire(0))}return!0}eraseInLine(F,M=!1){switch(this._restrictCursor(this._bufferService.cols),F.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(F){this._restrictCursor();let M=F.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=this._activeBuffer.ybase+this._activeBuffer.y,D=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-D+1;for(;M--;)this._activeBuffer.lines.splice(j-1,1),this._activeBuffer.lines.splice(G,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(F){this._restrictCursor();let M=F.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=this._activeBuffer.ybase+this._activeBuffer.y;let D;for(D=this._bufferService.rows-1-this._activeBuffer.scrollBottom,D=this._bufferService.rows-1+this._activeBuffer.ybase-D;M--;)this._activeBuffer.lines.splice(G,1),this._activeBuffer.lines.splice(D,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(F){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,F.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(F){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,F.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(F){let M=F.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(F){let M=F.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(g.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(F){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=F.params[0]||1;for(let G=this._activeBuffer.scrollTop;G<=this._activeBuffer.scrollBottom;++G){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+G);D.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),D.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(F){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=F.params[0]||1;for(let G=this._activeBuffer.scrollTop;G<=this._activeBuffer.scrollBottom;++G){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+G);D.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),D.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(F){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=F.params[0]||1;for(let G=this._activeBuffer.scrollTop;G<=this._activeBuffer.scrollBottom;++G){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+G);D.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),D.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(F){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=F.params[0]||1;for(let G=this._activeBuffer.scrollTop;G<=this._activeBuffer.scrollBottom;++G){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+G);D.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),D.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(F){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(F.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(F){const M=this._parser.precedingJoinState;if(!M)return!0;const G=F.params[0]||1,D=E.UnicodeService.extractWidth(M),j=this._activeBuffer.x-D,W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(j),q=new Uint32Array(W.length*G);let ne=0;for(let Y=0;Y<W.length;){const de=W.codePointAt(Y)||0;q[ne++]=de,Y+=de>65535?2:1}let te=ne;for(let Y=1;Y<G;++Y)q.copyWithin(te,0,ne),te+=ne;return this.print(q,0,te),!0}sendDeviceAttributesPrimary(F){return F.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(F){return F.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(F.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(F){return(this._optionsService.rawOptions.termName+"").indexOf(F)===0}setMode(F){for(let M=0;M<F.length;M++)switch(F.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(F){for(let M=0;M<F.length;M++)switch(F.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,h.DEFAULT_CHARSET),this._charsetService.setgCharset(1,h.DEFAULT_CHARSET),this._charsetService.setgCharset(2,h.DEFAULT_CHARSET),this._charsetService.setgCharset(3,h.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(F){for(let M=0;M<F.length;M++)switch(F.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(F){for(let M=0;M<F.length;M++)switch(F.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),F.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(F,M){const G=this._coreService.decPrivateModes,{activeProtocol:D,activeEncoding:j}=this._coreMouseService,W=this._coreService,{buffers:q,cols:ne}=this._bufferService,{active:te,alt:Y}=q,de=this._optionsService.rawOptions,Se=K=>K?1:2,xe=F.params[0];return Ae=xe,Pe=M?xe===2?4:xe===4?Se(W.modes.insertMode):xe===12?3:xe===20?Se(de.convertEol):0:xe===1?Se(G.applicationCursorKeys):xe===3?de.windowOptions.setWinLines?ne===80?2:ne===132?1:0:0:xe===6?Se(G.origin):xe===7?Se(G.wraparound):xe===8?3:xe===9?Se(D==="X10"):xe===12?Se(de.cursorBlink):xe===25?Se(!W.isCursorHidden):xe===45?Se(G.reverseWraparound):xe===66?Se(G.applicationKeypad):xe===67?4:xe===1e3?Se(D==="VT200"):xe===1002?Se(D==="DRAG"):xe===1003?Se(D==="ANY"):xe===1004?Se(G.sendFocus):xe===1005?4:xe===1006?Se(j==="SGR"):xe===1015?4:xe===1016?Se(j==="SGR_PIXELS"):xe===1048?1:xe===47||xe===1047||xe===1049?Se(te===Y):xe===2004?Se(G.bracketedPasteMode):0,W.triggerDataEvent(`${d.C0.ESC}[${M?"":"?"}${Ae};${Pe}$y`),!0;var Ae,Pe}_updateAttrColor(F,M,G,D,j){return M===2?(F|=50331648,F&=-16777216,F|=_.AttributeData.fromColorRGB([G,D,j])):M===5&&(F&=-50331904,F|=33554432|255&G),F}_extractColor(F,M,G){const D=[0,0,-1,0,0,0];let j=0,W=0;do{if(D[W+j]=F.params[M+W],F.hasSubParams(M+W)){const q=F.getSubParams(M+W);let ne=0;do D[1]===5&&(j=1),D[W+ne+1+j]=q[ne];while(++ne<q.length&&ne+W+1+j<D.length);break}if(D[1]===5&&W+j>=2||D[1]===2&&W+j>=5)break;D[1]&&(j=1)}while(++W+M<F.length&&W+j<D.length);for(let q=2;q<D.length;++q)D[q]===-1&&(D[q]=0);switch(D[0]){case 38:G.fg=this._updateAttrColor(G.fg,D[1],D[3],D[4],D[5]);break;case 48:G.bg=this._updateAttrColor(G.bg,D[1],D[3],D[4],D[5]);break;case 58:G.extended=G.extended.clone(),G.extended.underlineColor=this._updateAttrColor(G.extended.underlineColor,D[1],D[3],D[4],D[5])}return W}_processUnderline(F,M){M.extended=M.extended.clone(),(!~F||F>5)&&(F=1),M.extended.underlineStyle=F,M.fg|=268435456,F===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(F){F.fg=g.DEFAULT_ATTR_DATA.fg,F.bg=g.DEFAULT_ATTR_DATA.bg,F.extended=F.extended.clone(),F.extended.underlineStyle=0,F.extended.underlineColor&=-67108864,F.updateExtended()}charAttributes(F){if(F.length===1&&F.params[0]===0)return this._processSGR0(this._curAttrData),!0;const M=F.length;let G;const D=this._curAttrData;for(let j=0;j<M;j++)G=F.params[j],G>=30&&G<=37?(D.fg&=-50331904,D.fg|=16777216|G-30):G>=40&&G<=47?(D.bg&=-50331904,D.bg|=16777216|G-40):G>=90&&G<=97?(D.fg&=-50331904,D.fg|=16777224|G-90):G>=100&&G<=107?(D.bg&=-50331904,D.bg|=16777224|G-100):G===0?this._processSGR0(D):G===1?D.fg|=134217728:G===3?D.bg|=67108864:G===4?(D.fg|=268435456,this._processUnderline(F.hasSubParams(j)?F.getSubParams(j)[0]:1,D)):G===5?D.fg|=536870912:G===7?D.fg|=67108864:G===8?D.fg|=1073741824:G===9?D.fg|=2147483648:G===2?D.bg|=134217728:G===21?this._processUnderline(2,D):G===22?(D.fg&=-134217729,D.bg&=-134217729):G===23?D.bg&=-67108865:G===24?(D.fg&=-268435457,this._processUnderline(0,D)):G===25?D.fg&=-536870913:G===27?D.fg&=-67108865:G===28?D.fg&=-1073741825:G===29?D.fg&=2147483647:G===39?(D.fg&=-67108864,D.fg|=16777215&g.DEFAULT_ATTR_DATA.fg):G===49?(D.bg&=-67108864,D.bg|=16777215&g.DEFAULT_ATTR_DATA.bg):G===38||G===48||G===58?j+=this._extractColor(F,j,D):G===53?D.bg|=1073741824:G===55?D.bg&=-1073741825:G===59?(D.extended=D.extended.clone(),D.extended.underlineColor=-1,D.updateExtended()):G===100?(D.fg&=-67108864,D.fg|=16777215&g.DEFAULT_ATTR_DATA.fg,D.bg&=-67108864,D.bg|=16777215&g.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",G);return!0}deviceStatus(F){switch(F.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const M=this._activeBuffer.y+1,G=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${M};${G}R`)}return!0}deviceStatusPrivate(F){if(F.params[0]===6){const M=this._activeBuffer.y+1,G=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${M};${G}R`)}return!0}softReset(F){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(F){const M=F.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const G=M%2==1;return this._optionsService.options.cursorBlink=G,!0}setScrollRegion(F){const M=F.params[0]||1;let G;return(F.length<2||(G=F.params[1])>this._bufferService.rows||G===0)&&(G=this._bufferService.rows),G>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=G-1,this._setCursor(0,0)),!0}windowOptions(F){if(!T(F.params[0],this._optionsService.rawOptions.windowOptions))return!0;const M=F.length>1?F.params[1]:0;switch(F.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(O.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(O.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(F){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(F){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(F){return this._windowTitle=F,this._onTitleChange.fire(F),!0}setIconName(F){return this._iconName=F,!0}setOrReportIndexedColor(F){const M=[],G=F.split(";");for(;G.length>1;){const D=G.shift(),j=G.shift();if(/^\d+$/.exec(D)){const W=parseInt(D);if(X(W))if(j==="?")M.push({type:0,index:W});else{const q=(0,I.parseColor)(j);q&&M.push({type:1,index:W,color:q})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(F){const M=F.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(F,M){this._getCurrentLinkId()&&this._finishHyperlink();const G=F.split(":");let D;const j=G.findIndex(W=>W.startsWith("id="));return j!==-1&&(D=G[j].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:D,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(F,M){const G=F.split(";");for(let D=0;D<G.length&&!(M>=this._specialColors.length);++D,++M)if(G[D]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{const j=(0,I.parseColor)(G[D]);j&&this._onColor.fire([{type:1,index:this._specialColors[M],color:j}])}return!0}setOrReportFgColor(F){return this._setOrReportSpecialColor(F,0)}setOrReportBgColor(F){return this._setOrReportSpecialColor(F,1)}setOrReportCursorColor(F){return this._setOrReportSpecialColor(F,2)}restoreIndexedColor(F){if(!F)return this._onColor.fire([{type:2}]),!0;const M=[],G=F.split(";");for(let D=0;D<G.length;++D)if(/^\d+$/.exec(G[D])){const j=parseInt(G[D]);X(j)&&M.push({type:2,index:j})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(F){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(F){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(F){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,h.DEFAULT_CHARSET),!0}selectCharset(F){return F.length!==2?(this.selectDefaultCharset(),!0):(F[0]==="/"||this._charsetService.setgCharset(R[F[0]],h.CHARSETS[F[1]]||h.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const F=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,F,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=g.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(F){return this._charsetService.setgLevel(F),!0}screenAlignmentPattern(){const F=new w.CellData;F.content=4194373,F.fg=this._curAttrData.fg,F.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){const G=this._activeBuffer.ybase+this._activeBuffer.y+M,D=this._activeBuffer.lines.get(G);D&&(D.fill(F),D.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(F,M){const G=this._bufferService.buffer,D=this._optionsService.rawOptions;return(j=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${j}${d.C0.ESC}\\`),!0))(F==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:F==='"p'?'P1$r61;1"p':F==="r"?`P1$r${G.scrollTop+1};${G.scrollBottom+1}r`:F==="m"?"P1$r0m":F===" q"?`P1$r${{block:2,underline:4,bar:6}[D.cursorStyle]-(D.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(F,M){this._dirtyRowTracker.markRangeDirty(F,M)}}a.InputHandler=U;let ee=class{constructor(Z){this._bufferService=Z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Z){Z<this.start?this.start=Z:Z>this.end&&(this.end=Z)}markRangeDirty(Z,F){Z>F&&(P=Z,Z=F,F=P),Z<this.start&&(this.start=Z),F>this.end&&(this.end=F)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function X(Z){return 0<=Z&&Z<256}ee=c([u(0,S.IBufferService)],ee)},844:(o,a)=>{function l(c){for(const u of c)u.dispose();c.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const u=this._disposables.indexOf(c);u!==-1&&this._disposables.splice(u,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){this._isDisposed||c===this._value||(this._value?.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},a.toDisposable=function(c){return{dispose:c}},a.disposeArray=l,a.getDisposeArrayDisposable=function(c){return{dispose:()=>l(c)}}},1505:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(u,d,h){this._data[u]||(this._data[u]={}),this._data[u][d]=h}get(u,d){return this._data[u]?this._data[u][d]:void 0}clear(){this._data={}}}a.TwoKeyMap=l,a.FourKeyMap=class{constructor(){this._data=new l}set(c,u,d,h,f){this._data.get(c,u)||this._data.set(c,u,new l),this._data.get(c,u).set(d,h,f)}get(c,u,d,h){return this._data.get(c,u)?.get(d,h)}clear(){this._data.clear()}}},6114:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof Sn<"u"&&"title"in Sn;const l=a.isNode?"node":navigator.userAgent,c=a.isNode?"node":navigator.platform;a.isFirefox=l.includes("Firefox"),a.isLegacyEdge=l.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(l),a.getSafariVersion=function(){if(!a.isSafari)return 0;const u=l.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),a.isIpad=c==="iPad",a.isIphone=c==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),a.isLinux=c.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(l)},6106:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let l=0;a.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(l=this._search(this._getKey(c)),this._array.splice(l,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const u=this._getKey(c);if(u===void 0||(l=this._search(u),l===-1)||this._getKey(this._array[l])!==u)return!1;do if(this._array[l]===c)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===u);return!1}*getKeyIterator(c){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===c)}forEachByKey(c,u){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do u(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===c)}values(){return[...this._array].values()}_search(c){let u=0,d=this._array.length-1;for(;d>=u;){let h=u+d>>1;const f=this._getKey(this._array[h]);if(f>c)d=h-1;else{if(!(f<c)){for(;h>0&&this._getKey(this._array[h-1])===c;)h--;return h}u=h+1}}return u}}},7226:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const c=l(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let p=0,m=0,g=f.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),m=Math.max(p,m),b=f.timeRemaining(),1.5*m>b)return g-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(g-p))}ms`),void this._start();g=b}this.clear()}}class d extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){const p=Date.now()+f;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}a.PriorityTaskQueue=d,a.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(h){return requestIdleCallback(h)}_cancelCallback(h){cancelIdleCallback(h)}}:d,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(h){this._queue.clear(),this._queue.enqueue(h)}flush(){this._queue.flush()}}},9282:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const c=l(643);a.updateWindowsModeWrappedState=function(u){const d=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),h=d?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&h&&(f.isWrapped=h[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&h[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new l;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}a.AttributeData=l;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,h=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=h}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=c},9092:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const c=l(6349),u=l(7226),d=l(3734),h=l(8437),f=l(4634),p=l(511),m=l(643),g=l(4863),b=l(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(v,w,_){this._hasScrollback=v,this._optionsService=w,this._bufferService=_,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=h.DEFAULT_ATTR_DATA.clone(),this.savedCharset=b.DEFAULT_CHARSET,this.markers=[],this._nullCell=p.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]),this._whitespaceCell=p.CellData.fromCharData([0,m.WHITESPACE_CELL_CHAR,m.WHITESPACE_CELL_WIDTH,m.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(v){return v?(this._nullCell.fg=v.fg,this._nullCell.bg=v.bg,this._nullCell.extended=v.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(v){return v?(this._whitespaceCell.fg=v.fg,this._whitespaceCell.bg=v.bg,this._whitespaceCell.extended=v.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(v,w){return new h.BufferLine(this._bufferService.cols,this.getNullCell(v),w)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const v=this.ybase+this.y-this.ydisp;return v>=0&&v<this._rows}_getCorrectBufferLength(v){if(!this._hasScrollback)return v;const w=v+this._optionsService.rawOptions.scrollback;return w>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:w}fillViewportRows(v){if(this.lines.length===0){v===void 0&&(v=h.DEFAULT_ATTR_DATA);let w=this._rows;for(;w--;)this.lines.push(this.getBlankLine(v))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(v,w){const _=this.getNullCell(h.DEFAULT_ATTR_DATA);let S=0;const E=this._getCorrectBufferLength(w);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<v)for(let x=0;x<this.lines.length;x++)S+=+this.lines.get(x).resize(v,_);let k=0;if(this._rows<w)for(let x=this._rows;x<w;x++)this.lines.length<w+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new h.BufferLine(v,_)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new h.BufferLine(v,_)));else for(let x=this._rows;x>w;x--)this.lines.length>w+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){const x=this.lines.length-E;x>0&&(this.lines.trimStart(x),this.ybase=Math.max(this.ybase-x,0),this.ydisp=Math.max(this.ydisp-x,0),this.savedY=Math.max(this.savedY-x,0)),this.lines.maxLength=E}this.x=Math.min(this.x,v-1),this.y=Math.min(this.y,w-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,v-1),this.scrollTop=0}if(this.scrollBottom=w-1,this._isReflowEnabled&&(this._reflow(v,w),this._cols>v))for(let k=0;k<this.lines.length;k++)S+=+this.lines.get(k).resize(v,_);this._cols=v,this._rows=w,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let v=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,v=!1);let w=0;for(;this._memoryCleanupPosition<this.lines.length;)if(w+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),w>100)return!0;return v}get _isReflowEnabled(){const v=this._optionsService.rawOptions.windowsPty;return v&&v.buildNumber?this._hasScrollback&&v.backend==="conpty"&&v.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(v,w){this._cols!==v&&(v>this._cols?this._reflowLarger(v,w):this._reflowSmaller(v,w))}_reflowLarger(v,w){const _=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,v,this.ybase+this.y,this.getNullCell(h.DEFAULT_ATTR_DATA));if(_.length>0){const S=(0,f.reflowLargerCreateNewLayout)(this.lines,_);(0,f.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(v,w,S.countRemoved)}}_reflowLargerAdjustViewport(v,w,_){const S=this.getNullCell(h.DEFAULT_ATTR_DATA);let E=_;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<w&&this.lines.push(new h.BufferLine(v,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-_,0)}_reflowSmaller(v,w){const _=this.getNullCell(h.DEFAULT_ATTR_DATA),S=[];let E=0;for(let k=this.lines.length-1;k>=0;k--){let x=this.lines.get(k);if(!x||!x.isWrapped&&x.getTrimmedLength()<=v)continue;const I=[x];for(;x.isWrapped&&k>0;)x=this.lines.get(--k),I.unshift(x);const R=this.ybase+this.y;if(R>=k&&R<k+I.length)continue;const C=I[I.length-1].getTrimmedLength(),T=(0,f.reflowSmallerGetNewLineLengths)(I,this._cols,v),O=T.length-I.length;let P;P=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const U=[];for(let G=0;G<O;G++){const D=this.getBlankLine(h.DEFAULT_ATTR_DATA,!0);U.push(D)}U.length>0&&(S.push({start:k+I.length+E,newLines:U}),E+=U.length),I.push(...U);let ee=T.length-1,X=T[ee];X===0&&(ee--,X=T[ee]);let Z=I.length-O-1,F=C;for(;Z>=0;){const G=Math.min(F,X);if(I[ee]===void 0)break;if(I[ee].copyCellsFrom(I[Z],F-G,X-G,G,!0),X-=G,X===0&&(ee--,X=T[ee]),F-=G,F===0){Z--;const D=Math.max(Z,0);F=(0,f.getWrappedLineTrimmedLength)(I,D,this._cols)}}for(let G=0;G<I.length;G++)T[G]<v&&I[G].setCell(T[G],_);let M=O-P;for(;M-- >0;)this.ybase===0?this.y<w-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-w&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+w-1)}if(S.length>0){const k=[],x=[];for(let ee=0;ee<this.lines.length;ee++)x.push(this.lines.get(ee));const I=this.lines.length;let R=I-1,C=0,T=S[C];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let O=0;for(let ee=Math.min(this.lines.maxLength-1,I+E-1);ee>=0;ee--)if(T&&T.start>R+O){for(let X=T.newLines.length-1;X>=0;X--)this.lines.set(ee--,T.newLines[X]);ee++,k.push({index:R+1,amount:T.newLines.length}),O+=T.newLines.length,T=S[++C]}else this.lines.set(ee,x[R--]);let P=0;for(let ee=k.length-1;ee>=0;ee--)k[ee].index+=P,this.lines.onInsertEmitter.fire(k[ee]),P+=k[ee].amount;const U=Math.max(0,I+E-this.lines.maxLength);U>0&&this.lines.onTrimEmitter.fire(U)}}translateBufferLineToString(v,w,_=0,S){const E=this.lines.get(v);return E?E.translateToString(w,_,S):""}getWrappedRangeForLine(v){let w=v,_=v;for(;w>0&&this.lines.get(w).isWrapped;)w--;for(;_+1<this.lines.length&&this.lines.get(_+1).isWrapped;)_++;return{first:w,last:_}}setupTabStops(v){for(v!=null?this.tabs[v]||(v=this.prevStop(v)):(this.tabs={},v=0);v<this._cols;v+=this._optionsService.rawOptions.tabStopWidth)this.tabs[v]=!0}prevStop(v){for(v==null&&(v=this.x);!this.tabs[--v]&&v>0;);return v>=this._cols?this._cols-1:v<0?0:v}nextStop(v){for(v==null&&(v=this.x);!this.tabs[++v]&&v<this._cols;);return v>=this._cols?this._cols-1:v<0?0:v}clearMarkers(v){this._isClearing=!0;for(let w=0;w<this.markers.length;w++)this.markers[w].line===v&&(this.markers[w].dispose(),this.markers.splice(w--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].dispose(),this.markers.splice(v--,1);this._isClearing=!1}addMarker(v){const w=new g.Marker(v);return this.markers.push(w),w.register(this.lines.onTrim(_=>{w.line-=_,w.line<0&&w.dispose()})),w.register(this.lines.onInsert(_=>{w.line>=_.index&&(w.line+=_.amount)})),w.register(this.lines.onDelete(_=>{w.line>=_.index&&w.line<_.index+_.amount&&w.dispose(),w.line>_.index&&(w.line-=_.amount)})),w.register(w.onDispose(()=>this._removeMarker(w))),w}_removeMarker(v){this._isClearing||this.markers.splice(this.markers.indexOf(v),1)}}},8437:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const c=l(3734),u=l(511),d=l(643),h=l(482);a.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let f=0;class p{constructor(g,b,v=!1){this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*g);const w=b||u.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let _=0;_<g;++_)this.setCell(_,w);this.length=g}get(g){const b=this._data[3*g+0],v=2097151&b;return[this._data[3*g+1],2097152&b?this._combined[g]:v?(0,h.stringFromCodePoint)(v):"",b>>22,2097152&b?this._combined[g].charCodeAt(this._combined[g].length-1):v]}set(g,b){this._data[3*g+1]=b[d.CHAR_DATA_ATTR_INDEX],b[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[g]=b[1],this._data[3*g+0]=2097152|g|b[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*g+0]=b[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(g){return this._data[3*g+0]>>22}hasWidth(g){return 12582912&this._data[3*g+0]}getFg(g){return this._data[3*g+1]}getBg(g){return this._data[3*g+2]}hasContent(g){return 4194303&this._data[3*g+0]}getCodePoint(g){const b=this._data[3*g+0];return 2097152&b?this._combined[g].charCodeAt(this._combined[g].length-1):2097151&b}isCombined(g){return 2097152&this._data[3*g+0]}getString(g){const b=this._data[3*g+0];return 2097152&b?this._combined[g]:2097151&b?(0,h.stringFromCodePoint)(2097151&b):""}isProtected(g){return 536870912&this._data[3*g+2]}loadCell(g,b){return f=3*g,b.content=this._data[f+0],b.fg=this._data[f+1],b.bg=this._data[f+2],2097152&b.content&&(b.combinedData=this._combined[g]),268435456&b.bg&&(b.extended=this._extendedAttrs[g]),b}setCell(g,b){2097152&b.content&&(this._combined[g]=b.combinedData),268435456&b.bg&&(this._extendedAttrs[g]=b.extended),this._data[3*g+0]=b.content,this._data[3*g+1]=b.fg,this._data[3*g+2]=b.bg}setCellFromCodepoint(g,b,v,w){268435456&w.bg&&(this._extendedAttrs[g]=w.extended),this._data[3*g+0]=b|v<<22,this._data[3*g+1]=w.fg,this._data[3*g+2]=w.bg}addCodepointToCell(g,b,v){let w=this._data[3*g+0];2097152&w?this._combined[g]+=(0,h.stringFromCodePoint)(b):2097151&w?(this._combined[g]=(0,h.stringFromCodePoint)(2097151&w)+(0,h.stringFromCodePoint)(b),w&=-2097152,w|=2097152):w=b|4194304,v&&(w&=-12582913,w|=v<<22),this._data[3*g+0]=w}insertCells(g,b,v){if((g%=this.length)&&this.getWidth(g-1)===2&&this.setCellFromCodepoint(g-1,0,1,v),b<this.length-g){const w=new u.CellData;for(let _=this.length-g-b-1;_>=0;--_)this.setCell(g+b+_,this.loadCell(g+_,w));for(let _=0;_<b;++_)this.setCell(g+_,v)}else for(let w=g;w<this.length;++w)this.setCell(w,v);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,v)}deleteCells(g,b,v){if(g%=this.length,b<this.length-g){const w=new u.CellData;for(let _=0;_<this.length-g-b;++_)this.setCell(g+_,this.loadCell(g+b+_,w));for(let _=this.length-b;_<this.length;++_)this.setCell(_,v)}else for(let w=g;w<this.length;++w)this.setCell(w,v);g&&this.getWidth(g-1)===2&&this.setCellFromCodepoint(g-1,0,1,v),this.getWidth(g)!==0||this.hasContent(g)||this.setCellFromCodepoint(g,0,1,v)}replaceCells(g,b,v,w=!1){if(w)for(g&&this.getWidth(g-1)===2&&!this.isProtected(g-1)&&this.setCellFromCodepoint(g-1,0,1,v),b<this.length&&this.getWidth(b-1)===2&&!this.isProtected(b)&&this.setCellFromCodepoint(b,0,1,v);g<b&&g<this.length;)this.isProtected(g)||this.setCell(g,v),g++;else for(g&&this.getWidth(g-1)===2&&this.setCellFromCodepoint(g-1,0,1,v),b<this.length&&this.getWidth(b-1)===2&&this.setCellFromCodepoint(b,0,1,v);g<b&&g<this.length;)this.setCell(g++,v)}resize(g,b){if(g===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const v=3*g;if(g>this.length){if(this._data.buffer.byteLength>=4*v)this._data=new Uint32Array(this._data.buffer,0,v);else{const w=new Uint32Array(v);w.set(this._data),this._data=w}for(let w=this.length;w<g;++w)this.setCell(w,b)}else{this._data=this._data.subarray(0,v);const w=Object.keys(this._combined);for(let S=0;S<w.length;S++){const E=parseInt(w[S],10);E>=g&&delete this._combined[E]}const _=Object.keys(this._extendedAttrs);for(let S=0;S<_.length;S++){const E=parseInt(_[S],10);E>=g&&delete this._extendedAttrs[E]}}return this.length=g,4*v*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const g=new Uint32Array(this._data.length);return g.set(this._data),this._data=g,1}return 0}fill(g,b=!1){if(b)for(let v=0;v<this.length;++v)this.isProtected(v)||this.setCell(v,g);else{this._combined={},this._extendedAttrs={};for(let v=0;v<this.length;++v)this.setCell(v,g)}}copyFrom(g){this.length!==g.length?this._data=new Uint32Array(g._data):this._data.set(g._data),this.length=g.length,this._combined={};for(const b in g._combined)this._combined[b]=g._combined[b];this._extendedAttrs={};for(const b in g._extendedAttrs)this._extendedAttrs[b]=g._extendedAttrs[b];this.isWrapped=g.isWrapped}clone(){const g=new p(0);g._data=new Uint32Array(this._data),g.length=this.length;for(const b in this._combined)g._combined[b]=this._combined[b];for(const b in this._extendedAttrs)g._extendedAttrs[b]=this._extendedAttrs[b];return g.isWrapped=this.isWrapped,g}getTrimmedLength(){for(let g=this.length-1;g>=0;--g)if(4194303&this._data[3*g+0])return g+(this._data[3*g+0]>>22);return 0}getNoBgTrimmedLength(){for(let g=this.length-1;g>=0;--g)if(4194303&this._data[3*g+0]||50331648&this._data[3*g+2])return g+(this._data[3*g+0]>>22);return 0}copyCellsFrom(g,b,v,w,_){const S=g._data;if(_)for(let k=w-1;k>=0;k--){for(let x=0;x<3;x++)this._data[3*(v+k)+x]=S[3*(b+k)+x];268435456&S[3*(b+k)+2]&&(this._extendedAttrs[v+k]=g._extendedAttrs[b+k])}else for(let k=0;k<w;k++){for(let x=0;x<3;x++)this._data[3*(v+k)+x]=S[3*(b+k)+x];268435456&S[3*(b+k)+2]&&(this._extendedAttrs[v+k]=g._extendedAttrs[b+k])}const E=Object.keys(g._combined);for(let k=0;k<E.length;k++){const x=parseInt(E[k],10);x>=b&&(this._combined[x-b+v]=g._combined[x])}}translateToString(g,b,v,w){b=b??0,v=v??this.length,g&&(v=Math.min(v,this.getTrimmedLength())),w&&(w.length=0);let _="";for(;b<v;){const S=this._data[3*b+0],E=2097151&S,k=2097152&S?this._combined[b]:E?(0,h.stringFromCodePoint)(E):d.WHITESPACE_CELL_CHAR;if(_+=k,w)for(let x=0;x<k.length;++x)w.push(b);b+=S>>22||1}return w&&w.push(b),_}}a.BufferLine=p},4841:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(l,c){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return c*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(o,a)=>{function l(c,u,d){if(u===c.length-1)return c[u].getTrimmedLength();const h=!c[u].hasContent(d-1)&&c[u].getWidth(d-1)===1,f=c[u+1].getWidth(0)===2;return h&&f?d-1:d}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(c,u,d,h,f){const p=[];for(let m=0;m<c.length-1;m++){let g=m,b=c.get(++g);if(!b.isWrapped)continue;const v=[c.get(m)];for(;g<c.length&&b.isWrapped;)v.push(b),b=c.get(++g);if(h>=m&&h<g){m+=v.length-1;continue}let w=0,_=l(v,w,u),S=1,E=0;for(;S<v.length;){const x=l(v,S,u),I=x-E,R=d-_,C=Math.min(I,R);v[w].copyCellsFrom(v[S],E,_,C,!1),_+=C,_===d&&(w++,_=0),E+=C,E===x&&(S++,E=0),_===0&&w!==0&&v[w-1].getWidth(d-1)===2&&(v[w].copyCellsFrom(v[w-1],d-1,_++,1,!1),v[w-1].setCell(d-1,f))}v[w].replaceCells(_,d,f);let k=0;for(let x=v.length-1;x>0&&(x>w||v[x].getTrimmedLength()===0);x--)k++;k>0&&(p.push(m+v.length-k),p.push(k)),m+=v.length-1}return p},a.reflowLargerCreateNewLayout=function(c,u){const d=[];let h=0,f=u[h],p=0;for(let m=0;m<c.length;m++)if(f===m){const g=u[++h];c.onDeleteEmitter.fire({index:m-p,amount:g}),m+=g-1,p+=g,f=u[++h]}else d.push(m);return{layout:d,countRemoved:p}},a.reflowLargerApplyNewLayout=function(c,u){const d=[];for(let h=0;h<u.length;h++)d.push(c.get(u[h]));for(let h=0;h<d.length;h++)c.set(h,d[h]);c.length=u.length},a.reflowSmallerGetNewLineLengths=function(c,u,d){const h=[],f=c.map((b,v)=>l(c,v,u)).reduce((b,v)=>b+v);let p=0,m=0,g=0;for(;g<f;){if(f-g<d){h.push(f-g);break}p+=d;const b=l(c,m,u);p>b&&(p-=b,m++);const v=c[m].getWidth(p-1)===2;v&&p--;const w=v?d-1:d;h.push(w),g+=w}return h},a.getWrappedLineTrimmedLength=l},5295:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const c=l(8460),u=l(844),d=l(9092);class h extends u.Disposable{constructor(p,m){super(),this._optionsService=p,this._bufferService=m,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(p){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(p),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(p,m){this._normal.resize(p,m),this._alt.resize(p,m),this.setupTabStops(p)}setupTabStops(p){this._normal.setupTabStops(p),this._alt.setupTabStops(p)}}a.BufferSet=h},511:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const c=l(482),u=l(643),d=l(3734);class h extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(p){const m=new h;return m.setFromCharData(p),m}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let m=!1;if(p[u.CHAR_DATA_CHAR_INDEX].length>2)m=!0;else if(p[u.CHAR_DATA_CHAR_INDEX].length===2){const g=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=g&&g<=56319){const b=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(g-55296)+b-56320+65536|p[u.CHAR_DATA_WIDTH_INDEX]<<22:m=!0}else m=!0}else this.content=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[u.CHAR_DATA_WIDTH_INDEX]<<22;m&&(this.combinedData=p[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=h},643:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const c=l(8460),u=l(844);class d{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}a.Marker=d,d._nextId=1},7116:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},a.CHARSETS.A={"#":""},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},a.CHARSETS.C=a.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.E=a.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},a.CHARSETS.H=a.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(o,a)=>{var l,c,u;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(l||(a.C0=l={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(c||(a.C1=c={})),function(d){d.ST=`${l.ESC}\\`}(u||(a.C1_ESCAPED=u={}))},7399:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const c=l(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(d,h,f,p){const m={type:0,cancel:!1,key:void 0},g=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?m.key=h?c.C0.ESC+"OA":c.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?m.key=h?c.C0.ESC+"OD":c.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?m.key=h?c.C0.ESC+"OC":c.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(m.key=h?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:m.key=d.ctrlKey?"\b":c.C0.DEL,d.altKey&&(m.key=c.C0.ESC+m.key);break;case 9:if(d.shiftKey){m.key=c.C0.ESC+"[Z";break}m.key=c.C0.HT,m.cancel=!0;break;case 13:m.key=d.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,m.cancel=!0;break;case 27:m.key=c.C0.ESC,d.altKey&&(m.key=c.C0.ESC+c.C0.ESC),m.cancel=!0;break;case 37:if(d.metaKey)break;g?(m.key=c.C0.ESC+"[1;"+(g+1)+"D",m.key===c.C0.ESC+"[1;3D"&&(m.key=c.C0.ESC+(f?"b":"[1;5D"))):m.key=h?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(d.metaKey)break;g?(m.key=c.C0.ESC+"[1;"+(g+1)+"C",m.key===c.C0.ESC+"[1;3C"&&(m.key=c.C0.ESC+(f?"f":"[1;5C"))):m.key=h?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(d.metaKey)break;g?(m.key=c.C0.ESC+"[1;"+(g+1)+"A",f||m.key!==c.C0.ESC+"[1;3A"||(m.key=c.C0.ESC+"[1;5A")):m.key=h?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(d.metaKey)break;g?(m.key=c.C0.ESC+"[1;"+(g+1)+"B",f||m.key!==c.C0.ESC+"[1;3B"||(m.key=c.C0.ESC+"[1;5B")):m.key=h?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(m.key=c.C0.ESC+"[2~");break;case 46:m.key=g?c.C0.ESC+"[3;"+(g+1)+"~":c.C0.ESC+"[3~";break;case 36:m.key=g?c.C0.ESC+"[1;"+(g+1)+"H":h?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:m.key=g?c.C0.ESC+"[1;"+(g+1)+"F":h?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:d.shiftKey?m.type=2:d.ctrlKey?m.key=c.C0.ESC+"[5;"+(g+1)+"~":m.key=c.C0.ESC+"[5~";break;case 34:d.shiftKey?m.type=3:d.ctrlKey?m.key=c.C0.ESC+"[6;"+(g+1)+"~":m.key=c.C0.ESC+"[6~";break;case 112:m.key=g?c.C0.ESC+"[1;"+(g+1)+"P":c.C0.ESC+"OP";break;case 113:m.key=g?c.C0.ESC+"[1;"+(g+1)+"Q":c.C0.ESC+"OQ";break;case 114:m.key=g?c.C0.ESC+"[1;"+(g+1)+"R":c.C0.ESC+"OR";break;case 115:m.key=g?c.C0.ESC+"[1;"+(g+1)+"S":c.C0.ESC+"OS";break;case 116:m.key=g?c.C0.ESC+"[15;"+(g+1)+"~":c.C0.ESC+"[15~";break;case 117:m.key=g?c.C0.ESC+"[17;"+(g+1)+"~":c.C0.ESC+"[17~";break;case 118:m.key=g?c.C0.ESC+"[18;"+(g+1)+"~":c.C0.ESC+"[18~";break;case 119:m.key=g?c.C0.ESC+"[19;"+(g+1)+"~":c.C0.ESC+"[19~";break;case 120:m.key=g?c.C0.ESC+"[20;"+(g+1)+"~":c.C0.ESC+"[20~";break;case 121:m.key=g?c.C0.ESC+"[21;"+(g+1)+"~":c.C0.ESC+"[21~";break;case 122:m.key=g?c.C0.ESC+"[23;"+(g+1)+"~":c.C0.ESC+"[23~";break;case 123:m.key=g?c.C0.ESC+"[24;"+(g+1)+"~":c.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(f&&!p||!d.altKey||d.metaKey)!f||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?m.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(m.key=c.C0.US),d.key==="@"&&(m.key=c.C0.NUL)):d.keyCode===65&&(m.type=1);else{const b=u[d.keyCode],v=b?.[d.shiftKey?1:0];if(v)m.key=c.C0.ESC+v;else if(d.keyCode>=65&&d.keyCode<=90){const w=d.ctrlKey?d.keyCode-64:d.keyCode+32;let _=String.fromCharCode(w);d.shiftKey&&(_=_.toUpperCase()),m.key=c.C0.ESC+_}else if(d.keyCode===32)m.key=c.C0.ESC+(d.ctrlKey?c.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let w=d.code.slice(3,4);d.shiftKey||(w=w.toLowerCase()),m.key=c.C0.ESC+w,m.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?m.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?m.key=c.C0.NUL:d.keyCode>=51&&d.keyCode<=55?m.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?m.key=c.C0.DEL:d.keyCode===219?m.key=c.C0.ESC:d.keyCode===220?m.key=c.C0.FS:d.keyCode===221&&(m.key=c.C0.GS)}return m}},482:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},a.utf32ToString=function(l,c=0,u=l.length){let d="";for(let h=c;h<u;++h){let f=l[h];f>65535?(f-=65536,d+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):d+=String.fromCharCode(f)}return d},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,c){const u=l.length;if(!u)return 0;let d=0,h=0;if(this._interim){const f=l.charCodeAt(h++);56320<=f&&f<=57343?c[d++]=1024*(this._interim-55296)+f-56320+65536:(c[d++]=this._interim,c[d++]=f),this._interim=0}for(let f=h;f<u;++f){const p=l.charCodeAt(f);if(55296<=p&&p<=56319){if(++f>=u)return this._interim=p,d;const m=l.charCodeAt(f);56320<=m&&m<=57343?c[d++]=1024*(p-55296)+m-56320+65536:(c[d++]=p,c[d++]=m)}else p!==65279&&(c[d++]=p)}return d}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,c){const u=l.length;if(!u)return 0;let d,h,f,p,m=0,g=0,b=0;if(this.interim[0]){let _=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let E,k=0;for(;(E=63&this.interim[++k])&&k<4;)S<<=6,S|=E;const x=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,I=x-k;for(;b<I;){if(b>=u)return 0;if(E=l[b++],(192&E)!=128){b--,_=!0;break}this.interim[k++]=E,S<<=6,S|=63&E}_||(x===2?S<128?b--:c[m++]=S:x===3?S<2048||S>=55296&&S<=57343||S===65279||(c[m++]=S):S<65536||S>1114111||(c[m++]=S)),this.interim.fill(0)}const v=u-4;let w=b;for(;w<u;){for(;!(!(w<v)||128&(d=l[w])||128&(h=l[w+1])||128&(f=l[w+2])||128&(p=l[w+3]));)c[m++]=d,c[m++]=h,c[m++]=f,c[m++]=p,w+=4;if(d=l[w++],d<128)c[m++]=d;else if((224&d)==192){if(w>=u)return this.interim[0]=d,m;if(h=l[w++],(192&h)!=128){w--;continue}if(g=(31&d)<<6|63&h,g<128){w--;continue}c[m++]=g}else if((240&d)==224){if(w>=u)return this.interim[0]=d,m;if(h=l[w++],(192&h)!=128){w--;continue}if(w>=u)return this.interim[0]=d,this.interim[1]=h,m;if(f=l[w++],(192&f)!=128){w--;continue}if(g=(15&d)<<12|(63&h)<<6|63&f,g<2048||g>=55296&&g<=57343||g===65279)continue;c[m++]=g}else if((248&d)==240){if(w>=u)return this.interim[0]=d,m;if(h=l[w++],(192&h)!=128){w--;continue}if(w>=u)return this.interim[0]=d,this.interim[1]=h,m;if(f=l[w++],(192&f)!=128){w--;continue}if(w>=u)return this.interim[0]=d,this.interim[1]=h,this.interim[2]=f,m;if(p=l[w++],(192&p)!=128){w--;continue}if(g=(7&d)<<18|(63&h)<<12|(63&f)<<6|63&p,g<65536||g>1114111)continue;c[m++]=g}}return m}}},225:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const c=l(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let h;a.UnicodeV6=class{constructor(){if(this.version="6",!h){h=new Uint8Array(65536),h.fill(1),h[0]=0,h.fill(0,1,32),h.fill(0,127,160),h.fill(2,4352,4448),h[9001]=2,h[9002]=2,h.fill(2,11904,42192),h[12351]=1,h.fill(2,44032,55204),h.fill(2,63744,64256),h.fill(2,65040,65050),h.fill(2,65072,65136),h.fill(2,65280,65377),h.fill(2,65504,65511);for(let f=0;f<u.length;++f)h.fill(0,u[f][0],u[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?h[f]:function(p,m){let g,b=0,v=m.length-1;if(p<m[0][0]||p>m[v][1])return!1;for(;v>=b;)if(g=b+v>>1,p>m[g][1])b=g+1;else{if(!(p<m[g][0]))return!0;v=g-1}return!1}(f,d)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}charProperties(f,p){let m=this.wcwidth(f),g=m===0&&p!==0;if(g){const b=c.UnicodeService.extractWidth(p);b===0?g=!1:b>m&&(m=b)}return c.UnicodeService.createPropertyValue(0,m,g)}}},5981:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const c=l(8460),u=l(844);class d extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,p){if(p!==void 0&&this._syncCalls>p)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let m;for(this._isSyncWriting=!0;m=this._writeBuffer.shift();){this._action(m);const g=this._callbacks.shift();g&&g()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,p){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(p),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(p)}_innerWrite(f=0,p=!0){const m=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const g=this._writeBuffer[this._bufferOffset],b=this._action(g,p);if(b){const w=_=>Date.now()-m>=12?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(m,_);return void b.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(w)}const v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=g.length,Date.now()-m>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=d},5941:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function u(d,h){const f=d.toString(16),p=f.length<2?"0"+f:f;switch(h){case 4:return f[0];case 8:return p;case 12:return(p+p).slice(0,3);default:return p+p}}a.parseColor=function(d){if(!d)return;let h=d.toLowerCase();if(h.indexOf("rgb:")===0){h=h.slice(4);const f=l.exec(h);if(f){const p=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/p*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/p*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/p*255)]}}else if(h.indexOf("#")===0&&(h=h.slice(1),c.exec(h)&&[3,6,9,12].includes(h.length))){const f=h.length/3,p=[0,0,0];for(let m=0;m<3;++m){const g=parseInt(h.slice(f*m,f*m+f),16);p[m]=f===1?g<<4:f===2?g:f===3?g>>4:g>>8}return p}},a.toRgbString=function(d,h=16){const[f,p,m]=d;return`rgb:${u(f,h)}/${u(p,h)}/${u(m,h)}`}},5770:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const c=l(482),u=l(8742),d=l(5770),h=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=h,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}registerHandler(p,m){this._handlers[p]===void 0&&(this._handlers[p]=[]);const g=this._handlers[p];return g.push(m),{dispose:()=>{const b=g.indexOf(m);b!==-1&&g.splice(b,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}reset(){if(this._active.length)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=h,this._ident=0}hook(p,m){if(this.reset(),this._ident=p,this._active=this._handlers[p]||h,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].hook(m);else this._handlerFb(this._ident,"HOOK",m)}put(p,m,g){if(this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].put(p,m,g);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(p,m,g))}unhook(p,m=!0){if(this._active.length){let g=!1,b=this._active.length-1,v=!1;if(this._stack.paused&&(b=this._stack.loopPosition-1,g=m,v=this._stack.fallThrough,this._stack.paused=!1),!v&&g===!1){for(;b>=0&&(g=this._active[b].unhook(p),g!==!0);b--)if(g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!1,g;b--}for(;b>=0;b--)if(g=this._active[b].unhook(!1),g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!0,g}else this._handlerFb(this._ident,"UNHOOK",p);this._active=h,this._ident=0}};const f=new u.Params;f.addParam(0),a.DcsHandler=class{constructor(p){this._handler=p,this._data="",this._params=f,this._hitLimit=!1}hook(p){this._params=p.length>1||p.params[0]?p.clone():f,this._data="",this._hitLimit=!1}put(p,m,g){this._hitLimit||(this._data+=(0,c.utf32ToString)(p,m,g),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(p){let m=!1;if(this._hitLimit)m=!1;else if(p&&(m=this._handler(this._data,this._params),m instanceof Promise))return m.then(g=>(this._params=f,this._data="",this._hitLimit=!1,g));return this._params=f,this._data="",this._hitLimit=!1,m}}},2015:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const c=l(844),u=l(8742),d=l(6242),h=l(6351);class f{constructor(b){this.table=new Uint8Array(b)}setDefault(b,v){this.table.fill(b<<4|v)}add(b,v,w,_){this.table[v<<8|b]=w<<4|_}addMany(b,v,w,_){for(let S=0;S<b.length;S++)this.table[v<<8|b[S]]=w<<4|_}}a.TransitionTable=f;const p=160;a.VT500_TRANSITION_TABLE=function(){const g=new f(4095),b=Array.apply(null,Array(256)).map((k,x)=>x),v=(k,x)=>b.slice(k,x),w=v(32,127),_=v(0,24);_.push(25),_.push.apply(_,v(28,32));const S=v(0,14);let E;for(E in g.setDefault(1,0),g.addMany(w,0,2,0),S)g.addMany([24,26,153,154],E,3,0),g.addMany(v(128,144),E,3,0),g.addMany(v(144,152),E,3,0),g.add(156,E,0,0),g.add(27,E,11,1),g.add(157,E,4,8),g.addMany([152,158,159],E,0,7),g.add(155,E,11,3),g.add(144,E,11,9);return g.addMany(_,0,3,0),g.addMany(_,1,3,1),g.add(127,1,0,1),g.addMany(_,8,0,8),g.addMany(_,3,3,3),g.add(127,3,0,3),g.addMany(_,4,3,4),g.add(127,4,0,4),g.addMany(_,6,3,6),g.addMany(_,5,3,5),g.add(127,5,0,5),g.addMany(_,2,3,2),g.add(127,2,0,2),g.add(93,1,4,8),g.addMany(w,8,5,8),g.add(127,8,5,8),g.addMany([156,27,24,26,7],8,6,0),g.addMany(v(28,32),8,0,8),g.addMany([88,94,95],1,0,7),g.addMany(w,7,0,7),g.addMany(_,7,0,7),g.add(156,7,0,0),g.add(127,7,0,7),g.add(91,1,11,3),g.addMany(v(64,127),3,7,0),g.addMany(v(48,60),3,8,4),g.addMany([60,61,62,63],3,9,4),g.addMany(v(48,60),4,8,4),g.addMany(v(64,127),4,7,0),g.addMany([60,61,62,63],4,0,6),g.addMany(v(32,64),6,0,6),g.add(127,6,0,6),g.addMany(v(64,127),6,0,0),g.addMany(v(32,48),3,9,5),g.addMany(v(32,48),5,9,5),g.addMany(v(48,64),5,0,6),g.addMany(v(64,127),5,7,0),g.addMany(v(32,48),4,9,5),g.addMany(v(32,48),1,9,2),g.addMany(v(32,48),2,9,2),g.addMany(v(48,127),2,10,0),g.addMany(v(48,80),1,10,0),g.addMany(v(81,88),1,10,0),g.addMany([89,90,92],1,10,0),g.addMany(v(96,127),1,10,0),g.add(80,1,11,9),g.addMany(_,9,0,9),g.add(127,9,0,9),g.addMany(v(28,32),9,0,9),g.addMany(v(32,48),9,9,12),g.addMany(v(48,60),9,8,10),g.addMany([60,61,62,63],9,9,10),g.addMany(_,11,0,11),g.addMany(v(32,128),11,0,11),g.addMany(v(28,32),11,0,11),g.addMany(_,10,0,10),g.add(127,10,0,10),g.addMany(v(28,32),10,0,10),g.addMany(v(48,60),10,8,10),g.addMany([60,61,62,63],10,0,11),g.addMany(v(32,48),10,9,12),g.addMany(_,12,0,12),g.add(127,12,0,12),g.addMany(v(28,32),12,0,12),g.addMany(v(32,48),12,9,12),g.addMany(v(48,64),12,0,11),g.addMany(v(64,127),12,12,13),g.addMany(v(64,127),10,12,13),g.addMany(v(64,127),9,12,13),g.addMany(_,13,13,13),g.addMany(w,13,13,13),g.add(127,13,0,13),g.addMany([27,156,24,26],13,14,0),g.add(p,0,2,0),g.add(p,8,5,8),g.add(p,6,0,6),g.add(p,11,0,11),g.add(p,13,13,13),g}();class m extends c.Disposable{constructor(b=a.VT500_TRANSITION_TABLE){super(),this._transitions=b,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(v,w,_)=>{},this._executeHandlerFb=v=>{},this._csiHandlerFb=(v,w)=>{},this._escHandlerFb=v=>{},this._errorHandlerFb=v=>v,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new h.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(b,v=[64,126]){let w=0;if(b.prefix){if(b.prefix.length>1)throw new Error("only one byte as prefix supported");if(w=b.prefix.charCodeAt(0),w&&60>w||w>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(b.intermediates){if(b.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<b.intermediates.length;++S){const E=b.intermediates.charCodeAt(S);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");w<<=8,w|=E}}if(b.final.length!==1)throw new Error("final must be a single byte");const _=b.final.charCodeAt(0);if(v[0]>_||_>v[1])throw new Error(`final must be in range ${v[0]} .. ${v[1]}`);return w<<=8,w|=_,w}identToString(b){const v=[];for(;b;)v.push(String.fromCharCode(255&b)),b>>=8;return v.reverse().join("")}setPrintHandler(b){this._printHandler=b}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(b,v){const w=this._identifier(b,[48,126]);this._escHandlers[w]===void 0&&(this._escHandlers[w]=[]);const _=this._escHandlers[w];return _.push(v),{dispose:()=>{const S=_.indexOf(v);S!==-1&&_.splice(S,1)}}}clearEscHandler(b){this._escHandlers[this._identifier(b,[48,126])]&&delete this._escHandlers[this._identifier(b,[48,126])]}setEscHandlerFallback(b){this._escHandlerFb=b}setExecuteHandler(b,v){this._executeHandlers[b.charCodeAt(0)]=v}clearExecuteHandler(b){this._executeHandlers[b.charCodeAt(0)]&&delete this._executeHandlers[b.charCodeAt(0)]}setExecuteHandlerFallback(b){this._executeHandlerFb=b}registerCsiHandler(b,v){const w=this._identifier(b);this._csiHandlers[w]===void 0&&(this._csiHandlers[w]=[]);const _=this._csiHandlers[w];return _.push(v),{dispose:()=>{const S=_.indexOf(v);S!==-1&&_.splice(S,1)}}}clearCsiHandler(b){this._csiHandlers[this._identifier(b)]&&delete this._csiHandlers[this._identifier(b)]}setCsiHandlerFallback(b){this._csiHandlerFb=b}registerDcsHandler(b,v){return this._dcsParser.registerHandler(this._identifier(b),v)}clearDcsHandler(b){this._dcsParser.clearHandler(this._identifier(b))}setDcsHandlerFallback(b){this._dcsParser.setHandlerFallback(b)}registerOscHandler(b,v){return this._oscParser.registerHandler(b,v)}clearOscHandler(b){this._oscParser.clearHandler(b)}setOscHandlerFallback(b){this._oscParser.setHandlerFallback(b)}setErrorHandler(b){this._errorHandler=b}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(b,v,w,_,S){this._parseStack.state=b,this._parseStack.handlers=v,this._parseStack.handlerPos=w,this._parseStack.transition=_,this._parseStack.chunkPos=S}parse(b,v,w){let _,S=0,E=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(w===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const x=this._parseStack.handlers;let I=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(w===!1&&I>-1){for(;I>=0&&(_=x[I](this._params),_!==!0);I--)if(_ instanceof Promise)return this._parseStack.handlerPos=I,_}this._parseStack.handlers=[];break;case 4:if(w===!1&&I>-1){for(;I>=0&&(_=x[I](),_!==!0);I--)if(_ instanceof Promise)return this._parseStack.handlerPos=I,_}this._parseStack.handlers=[];break;case 6:if(S=b[this._parseStack.chunkPos],_=this._dcsParser.unhook(S!==24&&S!==26,w),_)return _;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=b[this._parseStack.chunkPos],_=this._oscParser.end(S!==24&&S!==26,w),_)return _;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let x=k;x<v;++x){switch(S=b[x],E=this._transitions.table[this.currentState<<8|(S<160?S:p)],E>>4){case 2:for(let O=x+1;;++O){if(O>=v||(S=b[O])<32||S>126&&S<p){this._printHandler(b,x,O),x=O-1;break}if(++O>=v||(S=b[O])<32||S>126&&S<p){this._printHandler(b,x,O),x=O-1;break}if(++O>=v||(S=b[O])<32||S>126&&S<p){this._printHandler(b,x,O),x=O-1;break}if(++O>=v||(S=b[O])<32||S>126&&S<p){this._printHandler(b,x,O),x=O-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const I=this._csiHandlers[this._collect<<8|S];let R=I?I.length-1:-1;for(;R>=0&&(_=I[R](this._params),_!==!0);R--)if(_ instanceof Promise)return this._preserveStack(3,I,R,E,x),_;R<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++x<v&&(S=b[x])>47&&S<60);x--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const C=this._escHandlers[this._collect<<8|S];let T=C?C.length-1:-1;for(;T>=0&&(_=C[T](),_!==!0);T--)if(_ instanceof Promise)return this._preserveStack(4,C,T,E,x),_;T<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let O=x+1;;++O)if(O>=v||(S=b[O])===24||S===26||S===27||S>127&&S<p){this._dcsParser.put(b,x,O),x=O-1;break}break;case 14:if(_=this._dcsParser.unhook(S!==24&&S!==26),_)return this._preserveStack(6,[],0,E,x),_;S===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let O=x+1;;O++)if(O>=v||(S=b[O])<32||S>127&&S<p){this._oscParser.put(b,x,O),x=O-1;break}break;case 6:if(_=this._oscParser.end(S!==24&&S!==26),_)return this._preserveStack(5,[],0,E,x),_;S===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&E}}}a.EscapeSequenceParser=m},6242:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const c=l(5770),u=l(482),d=[];a.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(h,f){this._handlers[h]===void 0&&(this._handlers[h]=[]);const p=this._handlers[h];return p.push(f),{dispose:()=>{const m=p.indexOf(f);m!==-1&&p.splice(m,1)}}}clearHandler(h){this._handlers[h]&&delete this._handlers[h]}setHandlerFallback(h){this._handlerFb=h}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let h=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;h>=0;--h)this._active[h].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].start();else this._handlerFb(this._id,"START")}_put(h,f,p){if(this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].put(h,f,p);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(h,f,p))}start(){this.reset(),this._state=1}put(h,f,p){if(this._state!==3){if(this._state===1)for(;f<p;){const m=h[f++];if(m===59){this._state=2,this._start();break}if(m<48||57<m)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+m-48}this._state===2&&p-f>0&&this._put(h,f,p)}}end(h,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let p=!1,m=this._active.length-1,g=!1;if(this._stack.paused&&(m=this._stack.loopPosition-1,p=f,g=this._stack.fallThrough,this._stack.paused=!1),!g&&p===!1){for(;m>=0&&(p=this._active[m].end(h),p!==!0);m--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!1,p;m--}for(;m>=0;m--)if(p=this._active[m].end(!1),p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",h);this._active=d,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(h){this._handler=h,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(h,f,p){this._hitLimit||(this._data+=(0,u.utf32ToString)(h,f,p),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(h){let f=!1;if(this._hitLimit)f=!1;else if(h&&(f=this._handler(this._data),f instanceof Promise))return f.then(p=>(this._data="",this._hitLimit=!1,p));return this._data="",this._hitLimit=!1,f}}},8742:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const l=2147483647;class c{static fromArray(d){const h=new c;if(!d.length)return h;for(let f=Array.isArray(d[0])?1:0;f<d.length;++f){const p=d[f];if(Array.isArray(p))for(let m=0;m<p.length;++m)h.addSubParam(p[m]);else h.addParam(p)}return h}constructor(d=32,h=32){if(this.maxLength=d,this.maxSubParamsLength=h,h>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(h),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new c(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let h=0;h<this.length;++h){d.push(this.params[h]);const f=this._subParamsIdx[h]>>8,p=255&this._subParamsIdx[h];p-f>0&&d.push(Array.prototype.slice.call(this._subParams,f,p))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>l?l:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>l?l:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const h=this._subParamsIdx[d]>>8,f=255&this._subParamsIdx[d];return f-h>0?this._subParams.subarray(h,f):null}getSubParamsAll(){const d={};for(let h=0;h<this.length;++h){const f=this._subParamsIdx[h]>>8,p=255&this._subParamsIdx[h];p-f>0&&(d[h]=this._subParams.slice(f,p))}return d}addDigit(d){let h;if(this._rejectDigits||!(h=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const f=this._digitIsSub?this._subParams:this.params,p=f[h-1];f[h-1]=~p?Math.min(10*p+d,l):d}}a.Params=c},5741:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,c){const u={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(u),c.dispose=()=>this._wrappedAddonDispose(u),c.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let c=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===l){c=u;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(c,1)}}},8771:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const c=l(3785),u=l(511);a.BufferApiView=class{constructor(d,h){this._buffer=d,this.type=h}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const h=this._buffer.lines.get(d);if(h)return new c.BufferLineApiView(h)}getNullCell(){return new u.CellData}}},3785:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const c=l(511);a.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,d){if(!(u<0||u>=this._line.length))return d?(this._line.loadCell(u,d),d):this._line.loadCell(u,new c.CellData)}translateToString(u,d,h){return this._line.translateToString(u,d,h)}}},8285:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const c=l(8771),u=l(8460),d=l(844);class h extends d.Disposable{constructor(p){super(),this._core=p,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=h},7975:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,c){return this._core.registerCsiHandler(l,u=>c(u.toArray()))}addCsiHandler(l,c){return this.registerCsiHandler(l,c)}registerDcsHandler(l,c){return this._core.registerDcsHandler(l,(u,d)=>c(u,d.toArray()))}addDcsHandler(l,c){return this.registerDcsHandler(l,c)}registerEscHandler(l,c){return this._core.registerEscHandler(l,c)}addEscHandler(l,c){return this.registerEscHandler(l,c)}registerOscHandler(l,c){return this._core.registerOscHandler(l,c)}addOscHandler(l,c){return this.registerOscHandler(l,c)}}},7090:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(o,a,l){var c=this&&this.__decorate||function(g,b,v,w){var _,S=arguments.length,E=S<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,v):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,b,v,w);else for(var k=g.length-1;k>=0;k--)(_=g[k])&&(E=(S<3?_(E):S>3?_(b,v,E):_(b,v))||E);return S>3&&E&&Object.defineProperty(b,v,E),E},u=this&&this.__param||function(g,b){return function(v,w){b(v,w,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const d=l(8460),h=l(844),f=l(5295),p=l(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let m=a.BufferService=class extends h.Disposable{get buffer(){return this.buffers.active}constructor(g){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(g.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(g.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(g,this))}resize(g,b){this.cols=g,this.rows=b,this.buffers.resize(g,b),this._onResize.fire({cols:g,rows:b})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(g,b=!1){const v=this.buffer;let w;w=this._cachedBlankLine,w&&w.length===this.cols&&w.getFg(0)===g.fg&&w.getBg(0)===g.bg||(w=v.getBlankLine(g,b),this._cachedBlankLine=w),w.isWrapped=b;const _=v.ybase+v.scrollTop,S=v.ybase+v.scrollBottom;if(v.scrollTop===0){const E=v.lines.isFull;S===v.lines.length-1?E?v.lines.recycle().copyFrom(w):v.lines.push(w.clone()):v.lines.splice(S+1,0,w.clone()),E?this.isUserScrolling&&(v.ydisp=Math.max(v.ydisp-1,0)):(v.ybase++,this.isUserScrolling||v.ydisp++)}else{const E=S-_+1;v.lines.shiftElements(_+1,E-1,-1),v.lines.set(S,w.clone())}this.isUserScrolling||(v.ydisp=v.ybase),this._onScroll.fire(v.ydisp)}scrollLines(g,b,v){const w=this.buffer;if(g<0){if(w.ydisp===0)return;this.isUserScrolling=!0}else g+w.ydisp>=w.ybase&&(this.isUserScrolling=!1);const _=w.ydisp;w.ydisp=Math.max(Math.min(w.ydisp+g,w.ybase),0),_!==w.ydisp&&(b||this._onScroll.fire(w.ydisp))}};a.BufferService=m=c([u(0,p.IOptionsService)],m)},7994:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,c){this._charsets[l]=c,this.glevel===l&&(this.charset=c)}}},1753:function(o,a,l){var c=this&&this.__decorate||function(w,_,S,E){var k,x=arguments.length,I=x<3?_:E===null?E=Object.getOwnPropertyDescriptor(_,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(w,_,S,E);else for(var R=w.length-1;R>=0;R--)(k=w[R])&&(I=(x<3?k(I):x>3?k(_,S,I):k(_,S))||I);return x>3&&I&&Object.defineProperty(_,S,I),I},u=this&&this.__param||function(w,_){return function(S,E){_(S,E,w)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const d=l(2585),h=l(8460),f=l(844),p={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:w=>w.button!==4&&w.action===1&&(w.ctrl=!1,w.alt=!1,w.shift=!1,!0)},VT200:{events:19,restrict:w=>w.action!==32},DRAG:{events:23,restrict:w=>w.action!==32||w.button!==3},ANY:{events:31,restrict:w=>!0}};function m(w,_){let S=(w.ctrl?16:0)|(w.shift?4:0)|(w.alt?8:0);return w.button===4?(S|=64,S|=w.action):(S|=3&w.button,4&w.button&&(S|=64),8&w.button&&(S|=128),w.action===32?S|=32:w.action!==0||_||(S|=3)),S}const g=String.fromCharCode,b={DEFAULT:w=>{const _=[m(w,!1)+32,w.col+32,w.row+32];return _[0]>255||_[1]>255||_[2]>255?"":`\x1B[M${g(_[0])}${g(_[1])}${g(_[2])}`},SGR:w=>{const _=w.action===0&&w.button!==4?"m":"M";return`\x1B[<${m(w,!0)};${w.col};${w.row}${_}`},SGR_PIXELS:w=>{const _=w.action===0&&w.button!==4?"m":"M";return`\x1B[<${m(w,!0)};${w.x};${w.y}${_}`}};let v=a.CoreMouseService=class extends f.Disposable{constructor(w,_){super(),this._bufferService=w,this._coreService=_,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new h.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(p))this.addProtocol(S,p[S]);for(const S of Object.keys(b))this.addEncoding(S,b[S]);this.reset()}addProtocol(w,_){this._protocols[w]=_}addEncoding(w,_){this._encodings[w]=_}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(w){if(!this._protocols[w])throw new Error(`unknown protocol "${w}"`);this._activeProtocol=w,this._onProtocolChange.fire(this._protocols[w].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(w){if(!this._encodings[w])throw new Error(`unknown encoding "${w}"`);this._activeEncoding=w}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(w){if(w.col<0||w.col>=this._bufferService.cols||w.row<0||w.row>=this._bufferService.rows||w.button===4&&w.action===32||w.button===3&&w.action!==32||w.button!==4&&(w.action===2||w.action===3)||(w.col++,w.row++,w.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,w,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(w))return!1;const _=this._encodings[this._activeEncoding](w);return _&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(_):this._coreService.triggerDataEvent(_,!0)),this._lastEvent=w,!0}explainEvents(w){return{down:!!(1&w),up:!!(2&w),drag:!!(4&w),move:!!(8&w),wheel:!!(16&w)}}_equalEvents(w,_,S){if(S){if(w.x!==_.x||w.y!==_.y)return!1}else if(w.col!==_.col||w.row!==_.row)return!1;return w.button===_.button&&w.action===_.action&&w.ctrl===_.ctrl&&w.alt===_.alt&&w.shift===_.shift}};a.CoreMouseService=v=c([u(0,d.IBufferService),u(1,d.ICoreService)],v)},6975:function(o,a,l){var c=this&&this.__decorate||function(v,w,_,S){var E,k=arguments.length,x=k<3?w:S===null?S=Object.getOwnPropertyDescriptor(w,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,w,_,S);else for(var I=v.length-1;I>=0;I--)(E=v[I])&&(x=(k<3?E(x):k>3?E(w,_,x):E(w,_))||x);return k>3&&x&&Object.defineProperty(w,_,x),x},u=this&&this.__param||function(v,w){return function(_,S){w(_,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const d=l(1439),h=l(8460),f=l(844),p=l(2585),m=Object.freeze({insertMode:!1}),g=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let b=a.CoreService=class extends f.Disposable{constructor(v,w,_){super(),this._bufferService=v,this._logService=w,this._optionsService=_,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new h.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new h.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(m),this.decPrivateModes=(0,d.clone)(g)}reset(){this.modes=(0,d.clone)(m),this.decPrivateModes=(0,d.clone)(g)}triggerDataEvent(v,w=!1){if(this._optionsService.rawOptions.disableStdin)return;const _=this._bufferService.buffer;w&&this._optionsService.rawOptions.scrollOnUserInput&&_.ybase!==_.ydisp&&this._onRequestScrollToBottom.fire(),w&&this._onUserInput.fire(),this._logService.debug(`sending data "${v}"`,()=>v.split("").map(S=>S.charCodeAt(0))),this._onData.fire(v)}triggerBinaryEvent(v){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${v}"`,()=>v.split("").map(w=>w.charCodeAt(0))),this._onBinary.fire(v))}};a.CoreService=b=c([u(0,p.IBufferService),u(1,p.ILogService),u(2,p.IOptionsService)],b)},9074:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const c=l(8055),u=l(8460),d=l(844),h=l(6106);let f=0,p=0;class m extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new h.SortedList(v=>v?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(v){if(v.marker.isDisposed)return;const w=new g(v);if(w){const _=w.marker.onDispose(()=>w.dispose());w.onDispose(()=>{w&&(this._decorations.delete(w)&&this._onDecorationRemoved.fire(w),_.dispose())}),this._decorations.insert(w),this._onDecorationRegistered.fire(w)}return w}reset(){for(const v of this._decorations.values())v.dispose();this._decorations.clear()}*getDecorationsAtCell(v,w,_){let S=0,E=0;for(const k of this._decorations.getKeyIterator(w))S=k.options.x??0,E=S+(k.options.width??1),v>=S&&v<E&&(!_||(k.options.layer??"bottom")===_)&&(yield k)}forEachDecorationAtCell(v,w,_,S){this._decorations.forEachByKey(w,E=>{f=E.options.x??0,p=f+(E.options.width??1),v>=f&&v<p&&(!_||(E.options.layer??"bottom")===_)&&S(E)})}}a.DecorationService=m;class g extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(v){super(),this.options=v,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=v.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const c=l(2585),u=l(8343);class d{constructor(...f){this._entries=new Map;for(const[p,m]of f)this.set(p,m)}set(f,p){const m=this._entries.get(f);return this._entries.set(f,p),m}forEach(f){for(const[p,m]of this._entries.entries())f(p,m)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}a.ServiceCollection=d,a.InstantiationService=class{constructor(){this._services=new d,this._services.set(c.IInstantiationService,this)}setService(h,f){this._services.set(h,f)}getService(h){return this._services.get(h)}createInstance(h,...f){const p=(0,u.getServiceDependencies)(h).sort((b,v)=>b.index-v.index),m=[];for(const b of p){const v=this._services.get(b.id);if(!v)throw new Error(`[createInstance] ${h.name} depends on UNKNOWN service ${b.id}.`);m.push(v)}const g=p.length>0?p[0].index:f.length;if(f.length!==g)throw new Error(`[createInstance] First service dependency of ${h.name} at position ${g+1} conflicts with ${f.length} static arguments`);return new h(...f,...m)}}},7866:function(o,a,l){var c=this&&this.__decorate||function(g,b,v,w){var _,S=arguments.length,E=S<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,v):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,b,v,w);else for(var k=g.length-1;k>=0;k--)(_=g[k])&&(E=(S<3?_(E):S>3?_(b,v,E):_(b,v))||E);return S>3&&E&&Object.defineProperty(b,v,E),E},u=this&&this.__param||function(g,b){return function(v,w){b(v,w,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const d=l(844),h=l(2585),f={trace:h.LogLevelEnum.TRACE,debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF};let p,m=a.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(g){super(),this._optionsService=g,this._logLevel=h.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(g){for(let b=0;b<g.length;b++)typeof g[b]=="function"&&(g[b]=g[b]())}_log(g,b,v){this._evalLazyOptionalParams(v),g.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...v)}trace(g,...b){this._logLevel<=h.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,g,b)}debug(g,...b){this._logLevel<=h.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,g,b)}info(g,...b){this._logLevel<=h.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,g,b)}warn(g,...b){this._logLevel<=h.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,g,b)}error(g,...b){this._logLevel<=h.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,g,b)}};a.LogService=m=c([u(0,h.IOptionsService)],m),a.setTraceLogger=function(g){p=g},a.traceCall=function(g,b,v){if(typeof v.value!="function")throw new Error("not supported");const w=v.value;v.value=function(..._){if(p.logLevel!==h.LogLevelEnum.TRACE)return w.apply(this,_);p.trace(`GlyphRenderer#${w.name}(${_.map(E=>JSON.stringify(E)).join(", ")})`);const S=w.apply(this,_);return p.trace(`GlyphRenderer#${w.name} return`,S),S}}},7302:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const c=l(8460),u=l(844),d=l(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const h=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(m){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const g={...a.DEFAULT_OPTIONS};for(const b in m)if(b in g)try{const v=m[b];g[b]=this._sanitizeAndValidateOption(b,v)}catch(v){console.error(v)}this.rawOptions=g,this.options={...g},this._setupOptions(),this.register((0,u.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(m,g){return this.onOptionChange(b=>{b===m&&g(this.rawOptions[m])})}onMultipleOptionChange(m,g){return this.onOptionChange(b=>{m.indexOf(b)!==-1&&g()})}_setupOptions(){const m=b=>{if(!(b in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${b}"`);return this.rawOptions[b]},g=(b,v)=>{if(!(b in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${b}"`);v=this._sanitizeAndValidateOption(b,v),this.rawOptions[b]!==v&&(this.rawOptions[b]=v,this._onOptionChange.fire(b))};for(const b in this.rawOptions){const v={get:m.bind(this,b),set:g.bind(this,b)};Object.defineProperty(this.options,b,v)}}_sanitizeAndValidateOption(m,g){switch(m){case"cursorStyle":if(g||(g=a.DEFAULT_OPTIONS[m]),!function(b){return b==="block"||b==="underline"||b==="bar"}(g))throw new Error(`"${g}" is not a valid value for ${m}`);break;case"wordSeparator":g||(g=a.DEFAULT_OPTIONS[m]);break;case"fontWeight":case"fontWeightBold":if(typeof g=="number"&&1<=g&&g<=1e3)break;g=h.includes(g)?g:a.DEFAULT_OPTIONS[m];break;case"cursorWidth":g=Math.floor(g);case"lineHeight":case"tabStopWidth":if(g<1)throw new Error(`${m} cannot be less than 1, value: ${g}`);break;case"minimumContrastRatio":g=Math.max(1,Math.min(21,Math.round(10*g)/10));break;case"scrollback":if((g=Math.min(g,4294967295))<0)throw new Error(`${m} cannot be less than 0, value: ${g}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(g<=0)throw new Error(`${m} cannot be less than or equal to 0, value: ${g}`);break;case"rows":case"cols":if(!g&&g!==0)throw new Error(`${m} must be numeric, value: ${g}`);break;case"windowsPty":g=g??{}}return g}}a.OptionsService=f},2660:function(o,a,l){var c=this&&this.__decorate||function(f,p,m,g){var b,v=arguments.length,w=v<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,p,m,g);else for(var _=f.length-1;_>=0;_--)(b=f[_])&&(w=(v<3?b(w):v>3?b(p,m,w):b(p,m))||w);return v>3&&w&&Object.defineProperty(p,m,w),w},u=this&&this.__param||function(f,p){return function(m,g){p(m,g,f)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const d=l(2585);let h=a.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){const p=this._bufferService.buffer;if(f.id===void 0){const _=p.addMarker(p.ybase+p.y),S={data:f,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(S,_)),this._dataByLinkId.set(S.id,S),S.id}const m=f,g=this._getEntryIdKey(m),b=this._entriesWithId.get(g);if(b)return this.addLineToLink(b.id,p.ybase+p.y),b.id;const v=p.addMarker(p.ybase+p.y),w={id:this._nextId++,key:this._getEntryIdKey(m),data:m,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(w,v)),this._entriesWithId.set(w.key,w),this._dataByLinkId.set(w.id,w),w.id}addLineToLink(f,p){const m=this._dataByLinkId.get(f);if(m&&m.lines.every(g=>g.line!==p)){const g=this._bufferService.buffer.addMarker(p);m.lines.push(g),g.onDispose(()=>this._removeMarkerFromLink(m,g))}}getLinkData(f){return this._dataByLinkId.get(f)?.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,p){const m=f.lines.indexOf(p);m!==-1&&(f.lines.splice(m,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};a.OscLinkService=h=c([u(0,d.IBufferService)],h)},8343:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const l="di$target",c="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u[c]||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);const d=function(h,f,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(m,g,b){g[l]===g?g[c].push({id:m,index:b}):(g[c]=[{id:m,index:b}],g[l]=g)})(d,h,p)};return d.toString=()=>u,a.serviceRegistry.set(u,d),d}},2585:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const c=l(8343);var u;a.IBufferService=(0,c.createDecorator)("BufferService"),a.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),a.ICoreService=(0,c.createDecorator)("CoreService"),a.ICharsetService=(0,c.createDecorator)("CharsetService"),a.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(u||(a.LogLevelEnum=u={})),a.ILogService=(0,c.createDecorator)("LogService"),a.IOptionsService=(0,c.createDecorator)("OptionsService"),a.IOscLinkService=(0,c.createDecorator)("OscLinkService"),a.IUnicodeService=(0,c.createDecorator)("UnicodeService"),a.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const c=l(8460),u=l(225);class d{static extractShouldJoin(f){return(1&f)!=0}static extractWidth(f){return f>>1&3}static extractCharKind(f){return f>>3}static createPropertyValue(f,p,m=!1){return(16777215&f)<<3|(3&p)<<1|(m?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const f=new u.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let p=0,m=0;const g=f.length;for(let b=0;b<g;++b){let v=f.charCodeAt(b);if(55296<=v&&v<=56319){if(++b>=g)return p+this.wcwidth(v);const S=f.charCodeAt(b);56320<=S&&S<=57343?v=1024*(v-55296)+S-56320+65536:p+=this.wcwidth(S)}const w=this.charProperties(v,m);let _=d.extractWidth(w);d.extractShouldJoin(w)&&(_-=d.extractWidth(m)),p+=_,m=w}return p}charProperties(f,p){return this._activeProvider.charProperties(f,p)}}a.UnicodeService=d}},r={};function s(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return n[o].call(l.exports,l,l.exports,s),l.exports}var i={};return(()=>{var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const a=s(9042),l=s(3236),c=s(844),u=s(5741),d=s(8285),h=s(7975),f=s(7090),p=["cols","rows"];class m extends c.Disposable{constructor(b){super(),this._core=this.register(new l.Terminal(b)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const v=_=>this._core.options[_],w=(_,S)=>{this._checkReadonlyOptions(_),this._core.options[_]=S};for(const _ in this._core.options){const S={get:v.bind(this,_),set:w.bind(this,_)};Object.defineProperty(this._publicOptions,_,S)}}_checkReadonlyOptions(b){if(p.includes(b))throw new Error(`Option "${b}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new h.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const b=this._core.coreService.decPrivateModes;let v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:b.applicationCursorKeys,applicationKeypadMode:b.applicationKeypad,bracketedPasteMode:b.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:b.origin,reverseWraparoundMode:b.reverseWraparound,sendFocusMode:b.sendFocus,wraparoundMode:b.wraparound}}get options(){return this._publicOptions}set options(b){for(const v in b)this._publicOptions[v]=b[v]}blur(){this._core.blur()}focus(){this._core.focus()}input(b,v=!0){this._core.input(b,v)}resize(b,v){this._verifyIntegers(b,v),this._core.resize(b,v)}open(b){this._core.open(b)}attachCustomKeyEventHandler(b){this._core.attachCustomKeyEventHandler(b)}attachCustomWheelEventHandler(b){this._core.attachCustomWheelEventHandler(b)}registerLinkProvider(b){return this._core.registerLinkProvider(b)}registerCharacterJoiner(b){return this._checkProposedApi(),this._core.registerCharacterJoiner(b)}deregisterCharacterJoiner(b){this._checkProposedApi(),this._core.deregisterCharacterJoiner(b)}registerMarker(b=0){return this._verifyIntegers(b),this._core.registerMarker(b)}registerDecoration(b){return this._checkProposedApi(),this._verifyPositiveIntegers(b.x??0,b.width??0,b.height??0),this._core.registerDecoration(b)}hasSelection(){return this._core.hasSelection()}select(b,v,w){this._verifyIntegers(b,v,w),this._core.select(b,v,w)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(b,v){this._verifyIntegers(b,v),this._core.selectLines(b,v)}dispose(){super.dispose()}scrollLines(b){this._verifyIntegers(b),this._core.scrollLines(b)}scrollPages(b){this._verifyIntegers(b),this._core.scrollPages(b)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(b){this._verifyIntegers(b),this._core.scrollToLine(b)}clear(){this._core.clear()}write(b,v){this._core.write(b,v)}writeln(b,v){this._core.write(b),this._core.write(`\r
`,v)}paste(b){this._core.paste(b)}refresh(b,v){this._verifyIntegers(b,v),this._core.refresh(b,v)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(b){this._addonManager.loadAddon(this,b)}static get strings(){return a}_verifyIntegers(...b){for(const v of b)if(v===1/0||isNaN(v)||v%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...b){for(const v of b)if(v&&(v===1/0||isNaN(v)||v%1!=0||v<0))throw new Error("This API only accepts positive integers")}}o.Terminal=m})(),i})())})(Dge);var c1t=Dge.exports;const u1t=getComputedStyle(document.documentElement),Ar=t=>u1t.getPropertyValue(t)||void 0;function RN(t){return{cursor:Ar("--bolt-elements-terminal-cursorColor"),cursorAccent:Ar("--bolt-elements-terminal-cursorColorAccent"),foreground:Ar("--bolt-elements-terminal-textColor"),background:Ar("--bolt-elements-terminal-backgroundColor"),selectionBackground:Ar("--bolt-elements-terminal-selection-backgroundColor"),selectionForeground:Ar("--bolt-elements-terminal-selection-textColor"),selectionInactiveBackground:Ar("--bolt-elements-terminal-selection-backgroundColorInactive"),black:Ar("--bolt-elements-terminal-color-black"),red:Ar("--bolt-elements-terminal-color-red"),green:Ar("--bolt-elements-terminal-color-green"),yellow:Ar("--bolt-elements-terminal-color-yellow"),blue:Ar("--bolt-elements-terminal-color-blue"),magenta:Ar("--bolt-elements-terminal-color-magenta"),cyan:Ar("--bolt-elements-terminal-color-cyan"),white:Ar("--bolt-elements-terminal-color-white"),brightBlack:Ar("--bolt-elements-terminal-color-brightBlack"),brightRed:Ar("--bolt-elements-terminal-color-brightRed"),brightGreen:Ar("--bolt-elements-terminal-color-brightGreen"),brightYellow:Ar("--bolt-elements-terminal-color-brightYellow"),brightBlue:Ar("--bolt-elements-terminal-color-brightBlue"),brightMagenta:Ar("--bolt-elements-terminal-color-brightMagenta"),brightCyan:Ar("--bolt-elements-terminal-color-brightCyan"),brightWhite:Ar("--bolt-elements-terminal-color-brightWhite"),...t}}const d1t=po("Terminal"),Dq=N.memo(N.forwardRef(({className:t,theme:e,readonly:n,id:r,onTerminalReady:s,onTerminalResize:i},o)=>{const a=N.useRef(null),l=N.useRef();return N.useEffect(()=>{const c=a.current,u=new a1t.FitAddon,d=new l1t.WebLinksAddon,h=new c1t.Terminal({cursorBlink:!0,convertEol:!0,disableStdin:n,theme:RN(n?{cursor:"#00000000"}:{}),fontSize:12,fontFamily:"Menlo, courier-new, courier, monospace"});l.current=h,h.loadAddon(u),h.loadAddon(d),h.open(c);const f=new ResizeObserver(()=>{u.fit(),i?.(h.cols,h.rows)});return f.observe(c),d1t.debug(`Attach [${r}]`),s?.(h),()=>{f.disconnect(),h.dispose()}},[]),N.useEffect(()=>{const c=l.current;c.options.theme=RN(n?{cursor:"#00000000"}:{}),c.options.disableStdin=n},[e,n]),N.useImperativeHandle(o,()=>({reloadStyles:()=>{const c=l.current;c.options.theme=RN(n?{cursor:"#00000000"}:{})}}),[]),y.jsx("div",{className:t,ref:a})})),h1t=po("Terminal"),Mq=3,BL=25,f1t=N.memo(()=>{const t=Bt(It.showTerminal),e=Bt(i1),n=N.useRef([]),r=N.useRef(null),s=N.useRef(!1),[i,o]=N.useState(0),[a,l]=N.useState(1),c=()=>{a<Mq&&(l(a+1),o(a))};return N.useEffect(()=>{const{current:u}=r;if(!u)return;const d=u.isCollapsed();!t&&!d?u.collapse():t&&d&&u.resize(BL),s.current=!1},[t]),N.useEffect(()=>{const u=bhe.on("toggleTerminal",()=>{s.current=!0}),d=i1.subscribe(()=>{for(const h of Object.values(n.current))h?.reloadStyles()});return()=>{u(),d()}},[]),y.jsx(Qv,{ref:r,defaultSize:t?BL:0,minSize:10,collapsible:!0,onExpand:()=>{s.current||It.toggleTerminal(!0)},onCollapse:()=>{s.current||It.toggleTerminal(!1)},children:y.jsx("div",{className:"h-full",children:y.jsxs("div",{className:"bg-bolt-elements-terminals-background h-full flex flex-col",children:[y.jsxs("div",{className:"flex items-center bg-bolt-elements-background-depth-2 border-y border-bolt-elements-borderColor gap-1.5 min-h-[34px] p-2",children:[Array.from({length:a+1},(u,d)=>{const h=i===d;return y.jsx(ht.Fragment,{children:d==0?y.jsxs("button",{className:Ne("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary":h,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!h}),onClick:()=>o(d),children:[y.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Bolt Terminal"]},d):y.jsx(ht.Fragment,{children:y.jsxs("button",{className:Ne("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textPrimary":h,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!h}),onClick:()=>o(d),children:[y.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Terminal ",a>1&&d]},d)})},d)}),a<Mq&&y.jsx(Pr,{icon:"i-ph:plus",size:"md",onClick:c}),y.jsx(Pr,{className:"ml-auto",icon:"i-ph:caret-down",title:"Close",size:"md",onClick:()=>It.toggleTerminal(!1)})]}),Array.from({length:a+1},(u,d)=>{const h=i===d;return h1t.debug(`Starting bolt terminal [${d}]`),d==0?y.jsx(Dq,{id:`terminal_${d}`,className:Ne("h-full overflow-hidden",{hidden:!h}),ref:f=>{n.current.push(f)},onTerminalReady:f=>It.attachBoltTerminal(f),onTerminalResize:(f,p)=>It.onTerminalResize(f,p),theme:e},d):y.jsx(Dq,{id:`terminal_${d}`,className:Ne("h-full overflow-hidden",{hidden:!h}),ref:f=>{n.current.push(f)},onTerminalReady:f=>It.attachTerminal(f),onTerminalResize:(f,p)=>It.onTerminalResize(f,p),theme:e},d)})]})})})}),p1t=100-BL,m1t={tabSize:2},g1t=N.memo(({files:t,unsavedFiles:e,editorDocument:n,selectedFile:r,isStreaming:s,fileHistory:i,onFileSelect:o,onEditorChange:a,onEditorScroll:l,onFileSave:c,onFileReset:u})=>{W0.trace("EditorPanel");const d=Bt(i1),h=Bt(It.showTerminal),f=N.useMemo(()=>{if(n)return n.filePath.split("/")},[n]),p=N.useMemo(()=>n!==void 0&&e?.has(n.filePath),[n,e]);return y.jsxs(ML,{direction:"vertical",children:[y.jsx(Qv,{defaultSize:h?p1t:100,minSize:20,children:y.jsxs(ML,{direction:"horizontal",children:[y.jsx(Qv,{defaultSize:20,minSize:10,collapsible:!0,children:y.jsxs("div",{className:"flex flex-col border-r border-bolt-elements-borderColor h-full",children:[y.jsxs(Oq,{children:[y.jsx("div",{className:"i-ph:tree-structure-duotone shrink-0"}),"Files"]}),y.jsx(Nge,{className:"h-full",files:t,hideRoot:!0,unsavedFiles:e,fileHistory:i,rootFolder:Hu,selectedFile:r,onFileSelect:o})]})}),y.jsx(jL,{}),y.jsxs(Qv,{className:"flex flex-col",defaultSize:80,minSize:20,children:[y.jsx(Oq,{className:"overflow-x-auto",children:f?.length&&y.jsxs("div",{className:"flex items-center flex-1 text-sm",children:[y.jsx(o1t,{pathSegments:f,files:t,onFileSelect:o}),p&&y.jsxs("div",{className:"flex gap-1 ml-auto -mr-1.5",children:[y.jsxs(bg,{onClick:c,children:[y.jsx("div",{className:"i-ph:floppy-disk-duotone"}),"Save"]}),y.jsxs(bg,{onClick:u,children:[y.jsx("div",{className:"i-ph:clock-counter-clockwise-duotone"}),"Reset"]})]})]})}),y.jsx("div",{className:"h-full flex-1 overflow-hidden",children:y.jsx(ege,{theme:d,editable:!s&&n!==void 0,settings:m1t,doc:n,autoFocusOnDocumentChange:!wvt(),onScroll:l,onChange:a,onSave:c})})]})]})}),y.jsx(jL,{}),y.jsx(f1t,{})]})}),b1t=N.memo(({activePreviewIndex:t,setActivePreviewIndex:e,isDropdownOpen:n,setIsDropdownOpen:r,setHasSelectedPreview:s,previews:i})=>{const o=N.useRef(null),a=i.map((l,c)=>({...l,index:c})).sort((l,c)=>l.port-c.port);return N.useEffect(()=>{const l=c=>{o.current&&!o.current.contains(c.target)&&r(!1)};return n?window.addEventListener("mousedown",l):window.removeEventListener("mousedown",l),()=>{window.removeEventListener("mousedown",l)}},[n]),y.jsxs("div",{className:"relative z-port-dropdown",ref:o,children:[y.jsx(Pr,{icon:"i-ph:plug",onClick:()=>r(!n)}),n&&y.jsxs("div",{className:"absolute right-0 mt-2 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor rounded shadow-sm min-w-[140px] dropdown-animation",children:[y.jsx("div",{className:"px-4 py-2 border-b border-bolt-elements-borderColor text-sm font-semibold text-bolt-elements-textPrimary",children:"Ports"}),a.map(l=>y.jsx("div",{className:"flex items-center px-4 py-2 cursor-pointer hover:bg-bolt-elements-item-backgroundActive",onClick:()=>{e(l.index),r(!1),s(!0)},children:y.jsx("span",{className:t===l.index?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault group-hover:text-bolt-elements-item-contentActive",children:l.port})},l.port))]})]})}),y1t=N.memo(({isSelectionMode:t,setIsSelectionMode:e,containerRef:n})=>{const[r,s]=N.useState(!1),[i,o]=N.useState(null),[a,l]=N.useState(null),c=N.useRef(null),u=N.useRef(null);N.useEffect(()=>()=>{u.current&&(u.current.pause(),u.current.srcObject=null,u.current.remove(),u.current=null),c.current&&(c.current.getTracks().forEach(m=>m.stop()),c.current=null)},[]);const d=async()=>{if(!c.current)try{const m=await navigator.mediaDevices.getDisplayMedia({audio:!1,video:{displaySurface:"window",preferCurrentTab:!0,surfaceSwitching:"include",systemAudio:"exclude"}});if(m.addEventListener("inactive",()=>{u.current&&(u.current.pause(),u.current.srcObject=null,u.current.remove(),u.current=null),c.current&&(c.current.getTracks().forEach(g=>g.stop()),c.current=null),e(!1),o(null),l(null),s(!1)}),c.current=m,!u.current){const g=document.createElement("video");g.style.opacity="0",g.style.position="fixed",g.style.pointerEvents="none",g.style.zIndex="-1",document.body.appendChild(g),u.current=g}u.current.srcObject=m,await u.current.play()}catch(m){console.error("Failed to initialize stream:",m),e(!1),Ve.error("Failed to initialize screen capture")}return c.current},h=N.useCallback(async()=>{if(!(!t||!i||!a||!n.current)){s(!0);try{if(!await d()||!u.current)return;await new Promise(X=>setTimeout(X,300));const g=document.createElement("canvas");g.width=u.current.videoWidth,g.height=u.current.videoHeight;const b=g.getContext("2d");if(!b)throw new Error("Failed to get temporary canvas context");b.drawImage(u.current,0,0);const v=u.current.videoWidth/window.innerWidth,w=u.current.videoHeight/window.innerHeight,_=window.scrollX,S=window.scrollY+40,E=n.current.getBoundingClientRect(),k=-9,x=-14,I=Math.round((E.left+Math.min(i.x,a.x)+_+k)*v),R=Math.round((E.top+Math.min(i.y,a.y)+S+x)*w),C=Math.round(Math.abs(a.x-i.x)*v),T=Math.round(Math.abs(a.y-i.y)*w),O=document.createElement("canvas");O.width=Math.round(Math.abs(a.x-i.x)),O.height=Math.round(Math.abs(a.y-i.y));const P=O.getContext("2d");if(!P)throw new Error("Failed to get canvas context");P.drawImage(g,I,R,C,T,0,0,O.width,O.height);const U=await new Promise((X,Z)=>{O.toBlob(F=>{F?X(F):Z(new Error("Failed to create blob"))},"image/png")}),ee=new FileReader;ee.onload=X=>{const Z=X.target?.result;if(document.querySelector("textarea")){const M=window.__BOLT_SET_UPLOADED_FILES__,G=window.__BOLT_SET_IMAGE_DATA_LIST__,D=window.__BOLT_UPLOADED_FILES__||[],j=window.__BOLT_IMAGE_DATA_LIST__||[];if(M&&G){const W=new File([U],"screenshot.png",{type:"image/png"});M([...D,W]),G([...j,Z]),Ve.success("Screenshot captured and added to chat")}else Ve.error("Could not add screenshot to chat")}},ee.readAsDataURL(U)}catch(m){console.error("Failed to capture screenshot:",m),Ve.error("Failed to capture screenshot"),c.current&&(c.current.getTracks().forEach(g=>g.stop()),c.current=null)}finally{s(!1),o(null),l(null),e(!1)}}},[t,i,a,n,e]),f=N.useCallback(m=>{if(m.preventDefault(),m.stopPropagation(),!t)return;const g=m.currentTarget.getBoundingClientRect(),b=m.clientX-g.left,v=m.clientY-g.top;o({x:b,y:v}),l({x:b,y:v})},[t]),p=N.useCallback(m=>{if(m.preventDefault(),m.stopPropagation(),!t||!i)return;const g=m.currentTarget.getBoundingClientRect(),b=m.clientX-g.left,v=m.clientY-g.top;l({x:b,y:v})},[t,i]);return t?y.jsx("div",{className:"absolute inset-0 cursor-crosshair",onMouseDown:f,onMouseMove:p,onMouseUp:h,onMouseLeave:()=>{i&&o(null)},style:{backgroundColor:r?"transparent":"rgba(0, 0, 0, 0.1)",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"all",opacity:r?0:1,zIndex:50,transition:"opacity 0.1s ease-in-out"},children:i&&a&&!r&&y.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-200 bg-opacity-20",style:{left:Math.min(i.x,a.x),top:Math.min(i.y,a.y),width:Math.abs(a.x-i.x),height:Math.abs(a.y-i.y)}})}):null}),jq=[{name:"Mobile",width:375,height:667,icon:"i-ph:device-mobile"},{name:"Tablet",width:768,height:1024,icon:"i-ph:device-tablet"},{name:"Laptop",width:1366,height:768,icon:"i-ph:laptop"},{name:"Desktop",width:1920,height:1080,icon:"i-ph:monitor"}],v1t=N.memo(()=>{const t=N.useRef(null),e=N.useRef(null),n=N.useRef(null),[r,s]=N.useState(0),[i,o]=N.useState(!1),[a,l]=N.useState(!1),[c,u]=N.useState(!1),d=N.useRef(!1),h=Bt(It.previews),f=h[r],[p,m]=N.useState(""),[g,b]=N.useState(),[v,w]=N.useState(!1),[_,S]=N.useState(!1),[E,k]=N.useState(37.5),x=N.useRef({isResizing:!1,side:null,startX:0,startWidthPercent:37.5,windowWidth:window.innerWidth}),I=2,[R,C]=N.useState(!1),[T,O]=N.useState(jq[0]);N.useEffect(()=>{if(!f){m(""),b(void 0);return}const{baseUrl:W}=f;m(W),b(W)},[f]);const P=N.useCallback(W=>{if(!f)return!1;const{baseUrl:q}=f;return W===q?!0:W.startsWith(q)?["/","?","#"].includes(W.charAt(q.length)):!1},[f]),U=N.useCallback((W,q,ne,te)=>q.port<te[W].port?ne:W,[]);N.useEffect(()=>{if(h.length>1&&!d.current){const W=h.reduce(U,0);s(W)}},[h,U]);const ee=()=>{t.current&&(t.current.src=t.current.src)},X=async()=>{!a&&e.current?await e.current.requestFullscreen():document.fullscreenElement&&await document.exitFullscreen()};N.useEffect(()=>{const W=()=>{l(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",W),()=>{document.removeEventListener("fullscreenchange",W)}},[]);const Z=()=>{S(W=>!W)},F=(W,q)=>{_&&(document.body.style.userSelect="none",x.current.isResizing=!0,x.current.side=q,x.current.startX=W.clientX,x.current.startWidthPercent=E,x.current.windowWidth=window.innerWidth,document.addEventListener("mousemove",M),document.addEventListener("mouseup",G),W.preventDefault())},M=W=>{if(!x.current.isResizing)return;const q=W.clientX-x.current.startX,ne=x.current.windowWidth,te=q/ne*100*I;let Y=x.current.startWidthPercent;x.current.side==="right"?Y=x.current.startWidthPercent+te:x.current.side==="left"&&(Y=x.current.startWidthPercent-te),Y=Math.max(10,Math.min(Y,90)),k(Y)},G=()=>{x.current.isResizing=!1,x.current.side=null,document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",G),document.body.style.userSelect=""};N.useEffect(()=>{const W=()=>{};return window.addEventListener("resize",W),()=>{window.removeEventListener("resize",W)}},[]);const D=()=>y.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",pointerEvents:"none"},children:y.jsx("div",{style:{color:"rgba(0,0,0,0.5)",fontSize:"10px",lineHeight:"5px",userSelect:"none",marginLeft:"1px"},children:" "})}),j=W=>{if(f?.baseUrl){const q=f.baseUrl.match(/^https?:\/\/([^.]+)\.local-credentialless\.webcontainer-api\.io/);if(q){const te=`/webcontainer/preview/${q[1]}`,Y=window.open(te,"_blank",`noopener,noreferrer,width=${W.width},height=${W.height},menubar=no,toolbar=no,location=no,status=no`);Y&&Y.focus()}else console.warn("[Preview] Invalid WebContainer URL:",f.baseUrl)}};return y.jsxs("div",{ref:e,className:`w-full h-full flex flex-col relative ${c?"fixed inset-0 z-50 bg-white":""}`,children:[i&&y.jsx("div",{className:"z-iframe-overlay w-full h-full absolute",onClick:()=>o(!1)}),y.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-2 flex items-center gap-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Pr,{icon:"i-ph:arrow-clockwise",onClick:ee}),y.jsx(Pr,{icon:"i-ph:selection",onClick:()=>w(!v),className:v?"bg-bolt-elements-background-depth-3":""})]}),y.jsx("div",{className:"flex-grow flex items-center gap-1 bg-bolt-elements-preview-addressBar-background border border-bolt-elements-borderColor text-bolt-elements-preview-addressBar-text rounded-full px-3 py-1 text-sm hover:bg-bolt-elements-preview-addressBar-backgroundHover hover:focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within-border-bolt-elements-borderColorActive focus-within:text-bolt-elements-preview-addressBar-textActive",children:y.jsx("input",{title:"URL",ref:n,className:"w-full bg-transparent outline-none",type:"text",value:p,onChange:W=>{m(W.target.value)},onKeyDown:W=>{W.key==="Enter"&&P(p)&&(b(p),n.current&&n.current.blur())}})}),y.jsxs("div",{className:"flex items-center gap-2",children:[h.length>1&&y.jsx(b1t,{activePreviewIndex:r,setActivePreviewIndex:s,isDropdownOpen:i,setHasSelectedPreview:W=>d.current=W,setIsDropdownOpen:o,previews:h}),y.jsx(Pr,{icon:"i-ph:devices",onClick:Z,title:_?"Switch to Responsive Mode":"Switch to Device Mode"}),y.jsx(Pr,{icon:"i-ph:layout-light",onClick:()=>u(!c),title:c?"Show Full Interface":"Show Preview Only"}),y.jsx(Pr,{icon:a?"i-ph:arrows-in":"i-ph:arrows-out",onClick:X,title:a?"Exit Full Screen":"Full Screen"}),y.jsxs("div",{className:"flex items-center relative",children:[y.jsx(Pr,{icon:"i-ph:arrow-square-out",onClick:()=>j(T),title:`Open Preview in ${T.name} Window`}),y.jsx(Pr,{icon:"i-ph:caret-down",onClick:()=>C(!R),className:"ml-1",title:"Select Window Size"}),R&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>C(!1)}),y.jsx("div",{className:"absolute right-0 top-full mt-2 z-50 min-w-[240px] bg-white dark:bg-black rounded-xl shadow-2xl border border-[#E5E7EB] dark:border-[rgba(255,255,255,0.1)] overflow-hidden",children:jq.map(W=>y.jsxs("button",{className:"w-full px-4 py-3.5 text-left text-[#111827] dark:text-gray-300 text-sm whitespace-nowrap flex items-center gap-3 group hover:bg-[#F5EEFF] dark:hover:bg-gray-900 bg-white dark:bg-black",onClick:()=>{O(W),C(!1),j(W)},children:[y.jsx("div",{className:`${W.icon} w-5 h-5 text-[#6B7280] dark:text-gray-400 group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200`}),y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"font-medium group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200",children:W.name}),y.jsxs("span",{className:"text-xs text-[#6B7280] dark:text-gray-400 group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200",children:[W.width,"  ",W.height]})]})]},W.name))})]})]})]})]}),y.jsx("div",{className:"flex-1 border-t border-bolt-elements-borderColor flex justify-center items-center overflow-auto",children:y.jsxs("div",{style:{width:_?`${E}%`:"100%",height:"100%",overflow:"visible",background:"var(--bolt-elements-background-depth-1)",position:"relative",display:"flex"},children:[f?y.jsxs(y.Fragment,{children:[y.jsx("iframe",{ref:t,title:"preview",className:"border-none w-full h-full bg-bolt-elements-background-depth-1",src:g,sandbox:"allow-scripts allow-forms allow-popups allow-modals allow-storage-access-by-user-activation allow-same-origin",allow:"cross-origin-isolated"}),y.jsx(y1t,{isSelectionMode:v,setIsSelectionMode:w,containerRef:t})]}):y.jsx("div",{className:"flex w-full h-full justify-center items-center bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary",children:"No preview available"}),_&&y.jsxs(y.Fragment,{children:[y.jsx("div",{onMouseDown:W=>F(W,"left"),style:{position:"absolute",top:0,left:0,width:"15px",marginLeft:"-15px",height:"100%",cursor:"ew-resize",background:"rgba(255,255,255,.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",userSelect:"none"},onMouseOver:W=>W.currentTarget.style.background="rgba(255,255,255,.5)",onMouseOut:W=>W.currentTarget.style.background="rgba(255,255,255,.2)",title:"Drag to resize width",children:y.jsx(D,{})}),y.jsx("div",{onMouseDown:W=>F(W,"right"),style:{position:"absolute",top:0,right:0,width:"15px",marginRight:"-15px",height:"100%",cursor:"ew-resize",background:"rgba(255,255,255,.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",userSelect:"none"},onMouseOver:W=>W.currentTarget.style.background="rgba(255,255,255,.5)",onMouseOut:W=>W.currentTarget.style.background="rgba(255,255,255,.2)",title:"Drag to resize width",children:y.jsx(D,{})})]})]})})]})});function dE(t){const e=["B","KB","MB","GB","TB"];let n=t,r=0;for(;n>=1024&&r<e.length-1;)n/=1024,r++;return`${n.toFixed(1)} ${e[r]}`}function w1t({isOpen:t,onClose:e,onPush:n}){const[r,s]=N.useState(""),[i,o]=N.useState(!1),[a,l]=N.useState(!1),[c,u]=N.useState(null),[d,h]=N.useState([]),[f,p]=N.useState(!1),[m,g]=N.useState(!1),[b,v]=N.useState(""),[w,_]=N.useState([]);N.useEffect(()=>{if(t){const x=Zf("github_connection");x?.user&&x?.token&&(u(x.user),x.token.trim()&&S(x.token))}},[t]);const S=async x=>{if(!x){Ut.logError("No GitHub token available"),Ve.error("GitHub authentication required");return}try{p(!0);const I=await fetch("https://api.github.com/user/repos?sort=updated&per_page=5&type=all&affiliation=owner,organization_member",{headers:{Accept:"application/vnd.github.v3+json",Authorization:`Bearer ${x.trim()}`}});if(!I.ok){const C=await I.json().catch(()=>({}));I.status===401?(Ve.error("GitHub token expired. Please reconnect your account."),Zf("github_connection")&&(localStorage.removeItem("github_connection"),u(null))):(Ut.logError("Failed to fetch GitHub repositories",{status:I.status,statusText:I.statusText,error:C}),Ve.error(`Failed to fetch repositories: ${I.statusText}`));return}const R=await I.json();h(R)}catch(I){Ut.logError("Failed to fetch GitHub repositories",{error:I}),Ve.error("Failed to fetch recent repositories")}finally{p(!1)}},E=async x=>{x.preventDefault();const I=Zf("github_connection");if(!I?.token||!I?.user){Ve.error("Please connect your GitHub account in Settings > Connections first");return}if(!r.trim()){Ve.error("Repository name is required");return}l(!0);try{const R=new Goe({auth:I.token});try{if(await R.repos.get({owner:I.user.login,repo:r}),!window.confirm(`Repository "${r}" already exists. Do you want to update it? This will add or modify files in the repository.`)){l(!1);return}}catch(P){if(P instanceof Error&&"status"in P&&P.status!==404)throw P}const C=await n(r,I.user.login,I.token,i);v(C);const T=It.files.get(),O=Object.entries(T).filter(([,P])=>P?.type==="file"&&!P.isBinary).map(([P,U])=>({path:Pv(P),size:new TextEncoder().encode(U.content||"").length}));_(O),g(!0)}catch(R){console.error("Error pushing to GitHub:",R),Ve.error("Failed to push to GitHub. Please check your repository name and try again.")}finally{l(!1)}},k=()=>{s(""),o(!1),g(!1),v(""),e()};return m?y.jsx(Ea,{open:t,onOpenChange:x=>!x&&k(),children:y.jsxs(Gf,{children:[y.jsx(qf,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),y.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:y.jsx(lt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[600px] max-h-[85vh] overflow-y-auto",children:y.jsx(Kf,{className:"bg-white dark:bg-[#1E1E1E] rounded-lg border border-[#E5E5E5] dark:border-[#333333] shadow-xl",children:y.jsxs("div",{className:"p-6 space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[y.jsx("div",{className:"i-ph:check-circle w-5 h-5"}),y.jsx("h3",{className:"text-lg font-medium",children:"Successfully pushed to GitHub"})]}),y.jsx(e0,{onClick:k,className:"p-2 text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400",children:y.jsx("div",{className:"i-ph:x w-5 h-5"})})]}),y.jsxs("div",{className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg p-3 text-left",children:[y.jsx("p",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark mb-2",children:"Repository URL"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("code",{className:"flex-1 text-sm bg-bolt-elements-background dark:bg-bolt-elements-background-dark px-3 py-2 rounded border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark font-mono",children:b}),y.jsx(lt.button,{onClick:()=>{navigator.clipboard.writeText(b),Ve.success("URL copied to clipboard")},className:"p-2 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textSecondary-dark dark:hover:text-bolt-elements-textPrimary-dark",whileHover:{scale:1.1},whileTap:{scale:.9},children:y.jsx("div",{className:"i-ph:copy w-4 h-4"})})]})]}),y.jsxs("div",{className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg p-3",children:[y.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark mb-2",children:["Pushed Files (",w.length,")"]}),y.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar",children:w.map(x=>y.jsxs("div",{className:"flex items-center justify-between py-1 text-sm text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:[y.jsx("span",{className:"font-mono truncate flex-1",children:x.path}),y.jsx("span",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark ml-2",children:dE(x.size)})]},x.path))})]}),y.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[y.jsxs(lt.a,{href:b,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-lg bg-purple-500 text-white hover:bg-purple-600 text-sm inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[y.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Repository"]}),y.jsxs(lt.button,{onClick:()=>{navigator.clipboard.writeText(b),Ve.success("URL copied to clipboard")},className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#1A1A1A] text-gray-600 dark:text-gray-400 hover:bg-[#E5E5E5] dark:hover:bg-[#252525] text-sm inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[y.jsx("div",{className:"i-ph:copy w-4 h-4"}),"Copy URL"]}),y.jsx(lt.button,{onClick:k,className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#1A1A1A] text-gray-600 dark:text-gray-400 hover:bg-[#E5E5E5] dark:hover:bg-[#252525] text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Close"})]})]})})})})]})}):c?y.jsx(Ea,{open:t,onOpenChange:x=>!x&&k(),children:y.jsxs(Gf,{children:[y.jsx(qf,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),y.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:y.jsx(lt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:y.jsx(Kf,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A] shadow-xl",children:y.jsxs("div",{className:"p-6",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[y.jsx(lt.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.1},className:"w-10 h-10 rounded-xl bg-bolt-elements-background-depth-3 flex items-center justify-center text-purple-500",children:y.jsx("div",{className:"i-ph:git-branch w-5 h-5"})}),y.jsxs("div",{children:[y.jsx(QD,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Push to GitHub"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Push your code to a new or existing GitHub repository"})]}),y.jsx(e0,{className:"ml-auto p-2 text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400",onClick:k,children:y.jsx("div",{className:"i-ph:x w-5 h-5"})})]}),y.jsxs("div",{className:"flex items-center gap-3 mb-6 p-3 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg",children:[y.jsx("img",{src:c.avatar_url,alt:c.login,className:"w-10 h-10 rounded-full"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.name||c.login}),y.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",c.login]})]})]}),y.jsxs("form",{onSubmit:E,className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"repoName",className:"text-sm text-gray-600 dark:text-gray-400",children:"Repository Name"}),y.jsx("input",{id:"repoName",type:"text",value:r,onChange:x=>s(x.target.value),placeholder:"my-awesome-project",className:"w-full px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 border border-[#E5E5E5] dark:border-[#1A1A1A] text-gray-900 dark:text-white placeholder-gray-400",required:!0})]}),d.length>0&&y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recent Repositories"}),y.jsx("div",{className:"space-y-2",children:d.map(x=>y.jsxs(lt.button,{type:"button",onClick:()=>s(x.name),className:"w-full p-3 text-left rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 transition-colors group",whileHover:{scale:1.01},whileTap:{scale:.99},children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"i-ph:git-repository w-4 h-4 text-purple-500"}),y.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-purple-500",children:x.name})]}),x.private&&y.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-500/10 text-purple-500",children:"Private"})]}),x.description&&y.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:x.description}),y.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-400 dark:text-gray-500",children:[x.language&&y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:code w-3 h-3"}),x.language]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:star w-3 h-3"}),x.stargazers_count.toLocaleString()]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:git-fork w-3 h-3"}),x.forks_count.toLocaleString()]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"i-ph:clock w-3 h-3"}),new Date(x.updated_at).toLocaleDateString()]})]})]},x.full_name))})]}),f&&y.jsxs("div",{className:"flex items-center justify-center py-4 text-gray-500 dark:text-gray-400",children:[y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4 mr-2"}),"Loading repositories..."]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"checkbox",id:"private",checked:i,onChange:x=>o(x.target.checked),className:"rounded border-[#E5E5E5] dark:border-[#1A1A1A] text-purple-500 focus:ring-purple-500 dark:bg-[#0A0A0A]"}),y.jsx("label",{htmlFor:"private",className:"text-sm text-gray-600 dark:text-gray-400",children:"Make repository private"})]}),y.jsxs("div",{className:"pt-4 flex gap-2",children:[y.jsx(lt.button,{type:"button",onClick:k,className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#1A1A1A] text-gray-600 dark:text-gray-400 hover:bg-[#E5E5E5] dark:hover:bg-[#252525] text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancel"}),y.jsx(lt.button,{type:"submit",disabled:a,className:Ne("flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm inline-flex items-center justify-center gap-2",a?"opacity-50 cursor-not-allowed":""),whileHover:a?{}:{scale:1.02},whileTap:a?{}:{scale:.98},children:a?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),"Pushing..."]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:git-branch w-4 h-4"}),"Push to GitHub"]})})]})]})]})})})})]})}):y.jsx(Ea,{open:t,onOpenChange:x=>!x&&k(),children:y.jsxs(Gf,{children:[y.jsx(qf,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),y.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:y.jsx(lt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:y.jsx(Kf,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A] shadow-xl",children:y.jsxs("div",{className:"text-center space-y-4",children:[y.jsx(lt.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.1},className:"mx-auto w-12 h-12 rounded-xl bg-bolt-elements-background-depth-3 flex items-center justify-center text-purple-500",children:y.jsx("div",{className:"i-ph:github-logo w-6 h-6"})}),y.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"GitHub Connection Required"}),y.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Please connect your GitHub account in Settings ",">"," Connections to push your code to GitHub."]}),y.jsxs(lt.button,{className:"px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600 inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:k,children:[y.jsx("div",{className:"i-ph:x-circle"}),"Close"]})]})})})})]})})}const x1t={ease:Go},_1t={left:{value:"code",text:"Code"},middle:{value:"diff",text:"Diff"},right:{value:"preview",text:"Preview"}},S1t={closed:{width:0,transition:{duration:.2,ease:Go}},open:{width:"var(--workbench-width)",transition:{duration:.2,ease:Go}}},E1t=N.memo(({fileHistory:t,onSelectFile:e})=>{const n=Object.entries(t),r=n.length>0,[s,i]=N.useState(""),o=N.useMemo(()=>n.filter(([a])=>a.toLowerCase().includes(s.toLowerCase())),[n,s]);return y.jsx("div",{className:"flex items-center gap-2",children:y.jsx(oN,{className:"relative",children:({open:a})=>y.jsxs(y.Fragment,{children:[y.jsxs(oN.Button,{className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg bg-bolt-elements-background-depth-2 hover:bg-bolt-elements-background-depth-3 transition-colors text-bolt-elements-textPrimary border border-bolt-elements-borderColor",children:[y.jsx("span",{className:"font-medium",children:"File Changes"}),r&&y.jsx("span",{className:"w-5 h-5 rounded-full bg-accent-500/20 text-accent-500 text-xs flex items-center justify-center border border-accent-500/30",children:n.length})]}),y.jsx(_ht,{show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:y.jsxs(oN.Panel,{className:"absolute right-0 z-20 mt-2 w-80 origin-top-right rounded-xl bg-bolt-elements-background-depth-2 shadow-xl border border-bolt-elements-borderColor",children:[y.jsxs("div",{className:"p-2",children:[y.jsxs("div",{className:"relative mx-2 mb-2",children:[y.jsx("input",{type:"text",placeholder:"Search files...",value:s,onChange:l=>i(l.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor focus:outline-none focus:ring-2 focus:ring-blue-500/50"}),y.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-bolt-elements-textTertiary",children:y.jsx("div",{className:"i-ph:magnifying-glass"})})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto",children:o.length>0?o.map(([l,c])=>{const u=l.split(".").pop()||"",d=ofe(u);return y.jsx("button",{onClick:()=>e(l),className:"w-full px-3 py-2 text-left rounded-md hover:bg-bolt-elements-background-depth-1 transition-colors group bg-transparent",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:"shrink-0 w-5 h-5 text-bolt-elements-textTertiary",children:[["typescript","javascript","jsx","tsx"].includes(d)&&y.jsx("div",{className:"i-ph:file-js"}),["css","scss","less"].includes(d)&&y.jsx("div",{className:"i-ph:paint-brush"}),d==="html"&&y.jsx("div",{className:"i-ph:code"}),d==="json"&&y.jsx("div",{className:"i-ph:brackets-curly"}),d==="python"&&y.jsx("div",{className:"i-ph:file-text"}),d==="markdown"&&y.jsx("div",{className:"i-ph:article"}),["yaml","yml"].includes(d)&&y.jsx("div",{className:"i-ph:file-text"}),d==="sql"&&y.jsx("div",{className:"i-ph:database"}),d==="dockerfile"&&y.jsx("div",{className:"i-ph:cube"}),d==="shell"&&y.jsx("div",{className:"i-ph:terminal"}),!["typescript","javascript","css","html","json","python","markdown","yaml","yml","sql","dockerfile","shell","jsx","tsx","scss","less"].includes(d)&&y.jsx("div",{className:"i-ph:file-text"})]}),y.jsx("div",{className:"flex-1 min-w-0",children:y.jsxs("div",{className:"flex items-center justify-between gap-2",children:[y.jsxs("div",{className:"flex flex-col min-w-0",children:[y.jsx("span",{className:"truncate text-sm font-medium text-bolt-elements-textPrimary",children:l.split("/").pop()}),y.jsx("span",{className:"truncate text-xs text-bolt-elements-textTertiary",children:l})]}),(()=>{const{additions:h,deletions:f}=(()=>{if(!c.originalContent)return{additions:0,deletions:0};const m=c.originalContent.replace(/\r\n/g,`
`),g=c.versions[c.versions.length-1]?.content.replace(/\r\n/g,`
`)||"";return m===g?{additions:0,deletions:0}:b0(m,g,{newlineIsToken:!1,ignoreWhitespace:!0,ignoreCase:!1}).reduce((v,w)=>(w.added&&(v.additions+=w.value.split(`
`).length),w.removed&&(v.deletions+=w.value.split(`
`).length),v),{additions:0,deletions:0})})();return(h>0||f>0)&&y.jsxs("div",{className:"flex items-center gap-1 text-xs shrink-0",children:[h>0&&y.jsxs("span",{className:"text-green-500",children:["+",h]}),f>0&&y.jsxs("span",{className:"text-red-500",children:["-",f]})]})})()]})})]})},l)}):y.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center",children:[y.jsx("div",{className:"w-12 h-12 mb-2 text-bolt-elements-textTertiary",children:y.jsx("div",{className:"i-ph:file-dashed"})}),y.jsx("p",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:s?"No matching files":"No modified files"}),y.jsx("p",{className:"text-xs text-bolt-elements-textTertiary mt-1",children:s?"Try another search":"Changes will appear here as you edit"})]})})]}),r&&y.jsx("div",{className:"border-t border-bolt-elements-borderColor p-2",children:y.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.map(([l])=>l).join(`
`)),Ve("File list copied to clipboard",{icon:y.jsx("div",{className:"i-ph:check-circle text-accent-500"})})},className:"w-full flex items-center justify-center gap-2 px-3 py-1.5 text-sm rounded-lg bg-bolt-elements-background-depth-1 hover:bg-bolt-elements-background-depth-3 transition-colors text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary",children:"Copy File List"})})]})})]})})})}),k1t=N.memo(({chatStarted:t,isStreaming:e,actionRunner:n,metadata:r,updateChatMestaData:s})=>{W0.trace("Workbench");const[i,o]=N.useState(!1),[a,l]=N.useState(!1),[c,u]=N.useState({}),d=Bt(dD(It.previews,C=>C.length>0)),h=Bt(It.showWorkbench),f=Bt(It.selectedFile),p=Bt(It.currentDocument),m=Bt(It.unsavedFiles),g=Bt(It.files),b=Bt(It.currentView),v=vhe(1024),w=C=>{It.currentView.set(C)};N.useEffect(()=>{d&&w("preview")},[d]),N.useEffect(()=>{It.setDocuments(g)},[g]);const _=N.useCallback(C=>{It.setCurrentDocumentContent(C.content)},[]),S=N.useCallback(C=>{It.setCurrentDocumentScrollPosition(C)},[]),E=N.useCallback(C=>{It.setSelectedFile(C)},[]),k=N.useCallback(()=>{It.saveCurrentDocument().catch(()=>{Ve.error("Failed to update file content")})},[]),x=N.useCallback(()=>{It.resetCurrentDocument()},[]),I=N.useCallback(async()=>{o(!0);try{const C=await window.showDirectoryPicker();await It.syncFiles(C),Ve.success("Files synced successfully")}catch(C){console.error("Error syncing files:",C),Ve.error("Failed to sync files")}finally{o(!1)}},[]),R=N.useCallback(C=>{It.setSelectedFile(C),It.currentView.set("diff")},[]);return t&&y.jsxs(lt.div,{initial:"closed",animate:h?"open":"closed",variants:S1t,className:"z-workbench",children:[y.jsx("div",{className:Ne("fixed top-[calc(var(--header-height)+1.5rem)] bottom-6 w-[var(--workbench-inner-width)] mr-4 z-0 transition-[left,width] duration-200 bolt-ease-cubic-bezier",{"w-full":v,"left-0":h&&v,"left-[var(--workbench-left)]":h,"left-[100%]":!h}),children:y.jsx("div",{className:"absolute inset-0 px-2 lg:px-6",children:y.jsxs("div",{className:"h-full flex flex-col bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor shadow-sm rounded-lg overflow-hidden",children:[y.jsxs("div",{className:"flex items-center px-3 py-2 border-b border-bolt-elements-borderColor",children:[y.jsx(zyt,{selected:b,options:_1t,setSelected:w}),y.jsx("div",{className:"ml-auto"}),b==="code"&&y.jsxs("div",{className:"flex overflow-y-auto",children:[y.jsxs(bg,{className:"mr-1 text-sm",onClick:()=>{It.downloadZip()},children:[y.jsx("div",{className:"i-ph:code"}),"Download Code"]}),y.jsxs(bg,{className:"mr-1 text-sm",onClick:I,disabled:i,children:[i?y.jsx("div",{className:"i-ph:spinner"}):y.jsx("div",{className:"i-ph:cloud-arrow-down"}),i?"Syncing...":"Sync Files"]}),y.jsxs(bg,{className:"mr-1 text-sm",onClick:()=>{It.toggleTerminal(!It.showTerminal.get())},children:[y.jsx("div",{className:"i-ph:terminal"}),"Toggle Terminal"]}),y.jsxs(bg,{className:"mr-1 text-sm",onClick:()=>l(!0),children:[y.jsx("div",{className:"i-ph:git-branch"}),"Push to GitHub"]})]}),b==="diff"&&y.jsx(E1t,{fileHistory:c,onSelectFile:R}),y.jsx(Pr,{icon:"i-ph:x-circle",className:"-mr-1",size:"xl",onClick:()=>{It.showWorkbench.set(!1)}})]}),y.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[y.jsx(ON,{initial:{x:"0%"},animate:{x:b==="code"?"0%":"-100%"},children:y.jsx(g1t,{editorDocument:p,isStreaming:e,selectedFile:f,files:g,unsavedFiles:m,fileHistory:c,onFileSelect:E,onEditorScroll:S,onEditorChange:_,onFileSave:k,onFileReset:x})}),y.jsx(ON,{initial:{x:"100%"},animate:{x:b==="diff"?"0%":b==="code"?"100%":"-100%"},children:y.jsx(ift,{fileHistory:c,setFileHistory:u,actionRunner:n})}),y.jsx(ON,{initial:{x:"100%"},animate:{x:b==="preview"?"0%":"100%"},children:y.jsx(v1t,{})})]})]})})}),y.jsx(w1t,{isOpen:a,onClose:()=>l(!1),onPush:async(C,T,O)=>{try{const P=prompt("Please enter a commit message:","Initial commit")||"Initial commit";await It.pushToGitHub(C,P,T,O);const U=`https://github.com/${T}/${C}`;return s&&!r?.gitUrl&&s({...r||{},gitUrl:U}),U}catch(P){throw console.error("Error pushing to GitHub:",P),Ve.error("Failed to push to GitHub"),P}}})]})}),ON=N.memo(({children:t,...e})=>y.jsx(lt.div,{className:"absolute inset-0",transition:x1t,...e,children:t}));var Gj="Popover",[jge,LTt]=Fa(Gj,[eb]),mx=eb(),[C1t,jh]=jge(Gj),Fge=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=mx(e),l=N.useRef(null),[c,u]=N.useState(!1),[d=!1,h]=Lp({prop:r,defaultProp:s,onChange:i});return y.jsx(G6,{...a,children:y.jsx(C1t,{scope:e,contentId:Lu(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:c,onCustomAnchorAdd:N.useCallback(()=>u(!0),[]),onCustomAnchorRemove:N.useCallback(()=>u(!1),[]),modal:o,children:n})})};Fge.displayName=Gj;var Bge="PopoverAnchor",$ge=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=jh(Bge,n),i=mx(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return N.useEffect(()=>(o(),()=>a()),[o,a]),y.jsx(IA,{...i,...r,ref:e})});$ge.displayName=Bge;var Uge="PopoverTrigger",Hge=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=jh(Uge,n),i=mx(n),o=Jn(e,s.triggerRef),a=y.jsx(En.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Kge(s.open),...r,ref:o,onClick:Mt(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:y.jsx(IA,{asChild:!0,...i,children:a})});Hge.displayName=Uge;var qj="PopoverPortal",[A1t,T1t]=jge(qj,{forceMount:void 0}),zge=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=jh(qj,e);return y.jsx(A1t,{scope:e,forceMount:n,children:y.jsx(Js,{present:n||i.open,children:y.jsx(jw,{asChild:!0,container:s,children:r})})})};zge.displayName=qj;var L0="PopoverContent",Vge=N.forwardRef((t,e)=>{const n=T1t(L0,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=jh(L0,t.__scopePopover);return y.jsx(Js,{present:r||i.open,children:i.modal?y.jsx(P1t,{...s,ref:e}):y.jsx(N1t,{...s,ref:e})})});Vge.displayName=L0;var P1t=N.forwardRef((t,e)=>{const n=jh(L0,t.__scopePopover),r=N.useRef(null),s=Jn(e,r),i=N.useRef(!1);return N.useEffect(()=>{const o=r.current;if(o)return KD(o)},[]),y.jsx(uA,{as:lp,allowPinchZoom:!0,children:y.jsx(Wge,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mt(t.onCloseAutoFocus,o=>{o.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Mt(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Mt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),N1t=N.forwardRef((t,e)=>{const n=jh(L0,t.__scopePopover),r=N.useRef(!1),s=N.useRef(!1);return y.jsx(Wge,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Wge=N.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=jh(L0,n),f=mx(n);return qD(),y.jsx(lA,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:y.jsx(Mw,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:y.jsx(q6,{"data-state":Kge(h.open),role:"dialog",id:h.contentId,...f,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Gge="PopoverClose",I1t=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=jh(Gge,n);return y.jsx(En.button,{type:"button",...r,ref:e,onClick:Mt(t.onClick,()=>s.onOpenChange(!1))})});I1t.displayName=Gge;var R1t="PopoverArrow",qge=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=mx(n);return y.jsx(K6,{...s,...r,ref:e})});qge.displayName=R1t;function Kge(t){return t?"open":"closed"}var O1t=Fge,L1t=$ge,D1t=Hge,M1t=zge,j1t=Vge,F1t=qge;const B1t=({children:t,trigger:e,side:n,align:r})=>y.jsxs(O1t,{children:[y.jsx(D1t,{asChild:!0,children:e}),y.jsx(L1t,{}),y.jsx(M1t,{children:y.jsxs(j1t,{sideOffset:10,side:n,align:r,className:"bg-bolt-elements-background-depth-2 text-bolt-elements-item-contentAccent p-2 rounded-md shadow-xl z-workbench",children:[t,y.jsx(F1t,{className:"bg-bolt-elements-item-background-depth-2"})]})})]});function $1t(t){t=Yge(t),It.currentView.get()!=="code"&&It.currentView.set("code"),It.setSelectedFile(`${Hu}/${t}`)}function Yge(t){let e=t;return e.startsWith(Hu)&&(e=t.replace(Hu,"")),e.startsWith("/")&&(e=e.slice(1)),e}const U1t=N.memo(({content:t,annotations:e})=>{const n=e?.filter(o=>o&&typeof o=="object"&&Object.keys(o).includes("type"))||[];let r;n.find(o=>o.type==="chatSummary")&&(r=n.find(o=>o.type==="chatSummary")?.summary);let s;n.find(o=>o.type==="codeContext")&&(s=n.find(o=>o.type==="codeContext")?.files);const i=n.find(o=>o.type==="usage")?.value;return y.jsxs("div",{className:"overflow-hidden w-full",children:[y.jsx(y.Fragment,{children:y.jsxs("div",{className:" flex gap-2 items-center text-sm text-bolt-elements-textSecondary mb-2",children:[(s||r)&&y.jsxs(B1t,{side:"right",align:"start",trigger:y.jsx("div",{className:"i-ph:info"}),children:[r&&y.jsxs("div",{className:"max-w-chat",children:[y.jsxs("div",{className:"summary max-h-96 flex flex-col",children:[y.jsx("h2",{className:"border border-bolt-elements-borderColor rounded-md p4",children:"Summary"}),y.jsx("div",{style:{zoom:.7},className:"overflow-y-auto m4",children:y.jsx(_0,{children:r})})]}),s&&y.jsxs("div",{className:"code-context flex flex-col p4 border border-bolt-elements-borderColor rounded-md",children:[y.jsx("h2",{children:"Context"}),y.jsx("div",{className:"flex gap-4 mt-4 bolt",style:{zoom:.6},children:s.map(o=>{const a=Yge(o);return y.jsx(y.Fragment,{children:y.jsx("code",{className:"bg-bolt-elements-artifacts-inlineCode-background text-bolt-elements-artifacts-inlineCode-text px-1.5 py-1 rounded-md text-bolt-elements-item-contentAccent hover:underline cursor-pointer",onClick:l=>{l.preventDefault(),l.stopPropagation(),$1t(a)},children:a})})})})]})]}),y.jsx("div",{className:"context"})]}),i&&y.jsxs("div",{children:["Tokens: ",i.totalTokens," (prompt: ",i.promptTokens,", completion: ",i.completionTokens,")"]})]})}),y.jsx(_0,{html:!0,children:t})]})});function H1t({content:t}){if(Array.isArray(t)){const n=t.find(i=>i.type==="text"),r=Fq(n?.text||""),s=t.filter(i=>i.type==="image"&&i.image);return y.jsx("div",{className:"overflow-hidden pt-[4px]",children:y.jsxs("div",{className:"flex flex-col gap-4",children:[r&&y.jsx(_0,{html:!0,children:r}),s.map((i,o)=>y.jsx("img",{src:i.image,alt:`Image ${o+1}`,className:"max-w-full h-auto rounded-lg",style:{maxHeight:"512px",objectFit:"contain"}},o))]})})}const e=Fq(t);return y.jsx("div",{className:"overflow-hidden pt-[4px]",children:y.jsx(_0,{html:!0,children:e})})}function Fq(t){const e=/<boltArtifact\s+[^>]*>[\s\S]*?<\/boltArtifact>/gm;return t.replace(_De,"").replace(SDe,"").replace(e,"")}const z1t=N.forwardRef((t,e)=>{const{id:n,isStreaming:r=!1,messages:s=[]}=t,i=Rye(),o=Bt(Qd),a=c=>{const u=new URLSearchParams(i.search);u.set("rewindTo",c),window.location.search=u.toString()},l=async c=>{try{if(!An||!Lo.get()){Ve.error("Chat persistence is not available");return}const u=await TFe(An,Lo.get(),c);window.location.href=`/chat/${u}`}catch(u){Ve.error("Failed to fork chat: "+u.message)}};return y.jsxs("div",{id:n,className:t.className,ref:e,children:[s.length>0?s.map((c,u)=>{const{role:d,content:h,id:f,annotations:p}=c,m=d==="user",g=u===0,b=u===s.length-1;return p?.includes("hidden")?y.jsx(N.Fragment,{},u):y.jsxs("div",{className:Ne("flex gap-4 p-6 w-full rounded-[calc(0.75rem-1px)]",{"bg-bolt-elements-messages-background":m||!r||r&&!b,"bg-gradient-to-b from-bolt-elements-messages-background from-30% to-transparent":r&&b,"mt-4":!g}),children:[m&&y.jsx("div",{className:"flex items-center justify-center w-[40px] h-[40px] overflow-hidden bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-500 rounded-full shrink-0 self-start",children:o?.avatar?y.jsx("img",{src:o.avatar,alt:o?.username||"User",className:"w-full h-full object-cover",loading:"eager",decoding:"sync"}):y.jsx("div",{className:"i-ph:user-fill text-2xl"})}),y.jsx("div",{className:"grid grid-col-1 w-full",children:m?y.jsx(H1t,{content:h}):y.jsx(U1t,{content:h,annotations:c.annotations})}),!m&&y.jsxs("div",{className:"flex gap-2 flex-col lg:flex-row",children:[f&&y.jsx(vp,{tooltip:"Revert to this message",children:y.jsx("button",{onClick:()=>a(f),className:Ne("i-ph:arrow-u-up-left","text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors")},"i-ph:arrow-u-up-left")}),y.jsx(vp,{tooltip:"Fork chat from this message",children:y.jsx("button",{onClick:()=>l(f),className:Ne("i-ph:git-fork","text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors")},"i-ph:git-fork")})]})]},u)}):null,r&&y.jsx("div",{className:"text-center w-full text-bolt-elements-textSecondary i-svg-spinners:3-dots-fade text-4xl mt-4"})]})}),V1t=Op(.4,0,.2,1),W1t=({show:t,isStreaming:e,disabled:n,onClick:r})=>y.jsx(Ic,{children:t?y.jsx(lt.button,{className:"absolute flex justify-center items-center top-[18px] right-[22px] p-1 bg-accent-500 hover:brightness-94 color-white rounded-md w-[34px] h-[34px] transition-theme disabled:opacity-50 disabled:cursor-not-allowed",transition:{ease:V1t,duration:.17},initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},disabled:n,onClick:s=>{s.preventDefault(),n||r?.(s)},children:y.jsx("div",{className:"text-lg",children:e?y.jsx("div",{className:"i-ph:stop-circle-bold"}):y.jsx("div",{className:"i-ph:arrow-right"})})}):null}),LN={},Bq={};function BC(){const t=Zn.get("apiKeys");let e={};return t&&(e=Bq[t],e||(e=Bq[t]=JSON.parse(t))),e}const G1t=({provider:t,apiKey:e,setApiKey:n})=>{const[r,s]=N.useState(!1),[i,o]=N.useState(e),[a,l]=N.useState(!1);N.useEffect(()=>{const h=BC()[t.name]||"";o(h),n(h),s(!1)},[t.name]);const c=N.useCallback(async()=>{if(LN[t.name]!==void 0){l(LN[t.name]);return}try{const f=(await(await fetch(`/api/check-env-key?provider=${encodeURIComponent(t.name)}`)).json()).isSet;LN[t.name]=f,l(f)}catch(d){console.error("Failed to check environment API key:",d),l(!1)}},[t.name]);N.useEffect(()=>{c()},[c]);const u=()=>{n(i);const h={...BC(),[t.name]:i};Zn.set("apiKeys",JSON.stringify(h)),s(!1)};return y.jsxs("div",{className:"flex items-center justify-between py-3 px-1",children:[y.jsx("div",{className:"flex items-center gap-2 flex-1",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"text-sm font-medium text-bolt-elements-textSecondary",children:[t?.name," API Key:"]}),!r&&y.jsx("div",{className:"flex items-center gap-2",children:e?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:check-circle-fill text-green-500 w-4 h-4"}),y.jsx("span",{className:"text-xs text-green-500",children:"Set via UI"})]}):a?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:check-circle-fill text-green-500 w-4 h-4"}),y.jsx("span",{className:"text-xs text-green-500",children:"Set via environment variable"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"i-ph:x-circle-fill text-red-500 w-4 h-4"}),y.jsx("span",{className:"text-xs text-red-500",children:"Not Set (Please set via UI or ENV_VAR)"})]})})]})}),y.jsx("div",{className:"flex items-center gap-2 shrink-0",children:r?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"password",value:i,placeholder:"Enter API Key",onChange:d=>o(d.target.value),className:`w-[300px] px-3 py-1.5 text-sm rounded border border-bolt-elements-borderColor 
                        bg-bolt-elements-prompt-background text-bolt-elements-textPrimary 
                        focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus`}),y.jsx(Pr,{onClick:u,title:"Save API Key",className:"bg-green-500/10 hover:bg-green-500/20 text-green-500",children:y.jsx("div",{className:"i-ph:check w-4 h-4"})}),y.jsx(Pr,{onClick:()=>s(!1),title:"Cancel",className:"bg-red-500/10 hover:bg-red-500/20 text-red-500",children:y.jsx("div",{className:"i-ph:x w-4 h-4"})})]}):y.jsxs(y.Fragment,{children:[y.jsx(Pr,{onClick:()=>s(!0),title:"Edit API Key",className:"bg-blue-500/10 hover:bg-blue-500/20 text-blue-500",children:y.jsx("div",{className:"i-ph:pencil-simple w-4 h-4"})}),t?.getApiKeyLink&&!e&&y.jsxs(Pr,{onClick:()=>window.open(t?.getApiKeyLink),title:"Get API Key",className:"bg-purple-500/10 hover:bg-purple-500/20 text-purple-500 flex items-center gap-2",children:[y.jsx("span",{className:"text-xs whitespace-nowrap",children:t?.labelForGetApiKey||"Get API Key"}),y.jsx("div",{className:`${t?.icon||"i-ph:key"} w-4 h-4`})]})]})})]})},q1t="s",K1t="t",Y1t="u",J1t="v",X1t="w",Fy={BaseChat:q1t,Chat:K1t,PromptEffectContainer:Y1t,PromptEffectLine:J1t,PromptShine:X1t},Z1t=({exportChat:t})=>y.jsx(vp,{tooltip:"Export Chat",children:y.jsx(Pr,{title:"Export Chat",onClick:()=>t?.(),children:y.jsx("div",{className:"i-ph:download-simple text-xl"})})}),Q1t=async(t,e,n)=>{const r=await Promise.all(t.map(async u=>new Promise((d,h)=>{const f=new FileReader;f.onload=()=>{const p=f.result,m=u.webkitRelativePath.split("/").slice(1).join("/");d({content:p,path:m})},f.onerror=h,f.readAsText(u)}))),s=await AM(r),i=TM(s),o=e.length>0?`

Skipped ${e.length} binary files:
${e.map(u=>`- ${u}`).join(`
`)}`:"",a={role:"assistant",content:`I've imported the contents of the "${n}" folder.${o}

<boltArtifact id="imported-files" title="Imported Files" type="bundled" >
${r.map(u=>`<boltAction type="file" filePath="${u.path}">
${Zoe(u.content)}
</boltAction>`).join(`

`)}
</boltArtifact>`,id:Nv(),createdAt:new Date},c=[{role:"user",id:Nv(),content:`Import the "${n}" folder`,createdAt:new Date},a];return i&&(c.push({role:"user",id:Nv(),content:"Setup the codebase and Start the application"}),c.push(i)),c},ewt=Dce("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-bolt-elements-borderColor disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-bolt-elements-background text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-2",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-input bg-transparent hover:bg-bolt-elements-background-depth-2 hover:text-bolt-elements-textPrimary",secondary:"bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-2",ghost:"hover:bg-bolt-elements-background-depth-1 hover:text-bolt-elements-textPrimary",link:"text-bolt-elements-textPrimary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),HT=N.forwardRef(({className:t,variant:e,size:n,_asChild:r=!1,...s},i)=>y.jsx("button",{className:Ne(ewt({variant:e,size:n}),t),ref:i,...s}));HT.displayName="Button";const twt=({className:t,importChat:e})=>{const[n,r]=N.useState(!1),s=async i=>{const a=Array.from(i.target.files||[]).filter(u=>{const d=u.webkitRelativePath.split("/").slice(1).join("/");return jUe(d)});if(a.length===0){const u=new Error("No valid files found");Ut.logError("File import failed - no valid files",u,{folderName:"Unknown Folder"}),Ve.error("No files found in the selected folder");return}if(a.length>Q3){const u=new Error(`Too many files: ${a.length}`);Ut.logError("File import failed - too many files",u,{fileCount:a.length,maxFiles:Q3}),Ve.error(`This folder contains ${a.length.toLocaleString()} files. This product is not yet optimized for very large projects. Please select a folder with fewer than ${Q3.toLocaleString()} files.`);return}const l=a[0]?.webkitRelativePath.split("/")[0]||"Unknown Folder";r(!0);const c=Ve.loading(`Importing ${l}...`);try{const u=await Promise.all(a.map(async p=>({file:p,isBinary:await MUe(p)}))),d=u.filter(p=>!p.isBinary).map(p=>p.file),h=u.filter(p=>p.isBinary).map(p=>p.file.webkitRelativePath.split("/").slice(1).join("/"));if(d.length===0){const p=new Error("No text files found");Ut.logError("File import failed - no text files",p,{folderName:l}),Ve.error("No text files found in the selected folder");return}h.length>0&&(Ut.logWarning("Skipping binary files during import",{folderName:l,binaryCount:h.length}),Ve.info(`Skipping ${h.length} binary files`));const f=await Q1t(d,h,l);e&&await e(l,[...f]),Ut.logSystem("Folder imported successfully",{folderName:l,textFileCount:d.length,binaryFileCount:h.length}),Ve.success("Folder imported successfully")}catch(u){Ut.logError("Failed to import folder",u,{folderName:l}),console.error("Failed to import folder:",u),Ve.error("Failed to import folder")}finally{r(!1),Ve.dismiss(c),i.target.value=""}};return y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",id:"folder-import",className:"hidden",webkitdirectory:"",directory:"",onChange:s}),y.jsxs(HT,{onClick:()=>{document.getElementById("folder-import")?.click()},title:"Import Folder",variant:"outline",size:"lg",className:Ne("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out",t),disabled:n,children:[y.jsx("span",{className:"i-ph:upload-simple w-4 h-4"}),n?"Importing...":"Import Folder"]})]})};function nwt(t){return y.jsxs("div",{className:"flex flex-col items-center justify-center w-auto",children:[y.jsx("input",{type:"file",id:"chat-import",className:"hidden",accept:".json",onChange:async e=>{const n=e.target.files?.[0];if(n&&t){try{const r=new FileReader;r.onload=async s=>{try{const i=s.target?.result,o=JSON.parse(i);if(Array.isArray(o.messages)){await t(o.description||"Imported Chat",o.messages),Ve.success("Chat imported successfully");return}Ve.error("Invalid chat file format")}catch(i){i instanceof Error?Ve.error("Failed to parse chat file: "+i.message):Ve.error("Failed to parse chat file")}},r.onerror=()=>Ve.error("Failed to read chat file"),r.readAsText(n)}catch(r){Ve.error(r instanceof Error?r.message:"Failed to import chat")}e.target.value=""}else Ve.error("Something went wrong")}}),y.jsx("div",{className:"flex flex-col items-center gap-4 max-w-2xl text-center",children:y.jsxs("div",{className:"flex gap-2",children:[y.jsxs(HT,{onClick:()=>{document.getElementById("chat-import")?.click()},variant:"outline",size:"lg",className:Ne("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out"),children:[y.jsx("span",{className:"i-ph:upload-simple w-4 h-4"}),"Import Chat"]}),y.jsx(twt,{importChat:t,className:Ne("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out rounded-lg")})]})})]})}const rwt=[{text:"Build a todo app in React using Tailwind"},{text:"Build a simple blog using Astro"},{text:"Create a cookie consent form using Material UI"},{text:"Make a space invaders game"},{text:"Make a Tic Tac Toe game in html, css and js only"}];function swt(t){return y.jsx("div",{id:"examples",className:"relative flex flex-col gap-9 w-full max-w-3xl mx-auto flex justify-center mt-6",children:y.jsx("div",{className:"flex flex-wrap justify-center gap-2",style:{animation:".25s ease-out 0s 1 _fade-and-move-in_g2ptj_1 forwards"},children:rwt.map((e,n)=>y.jsx("button",{onClick:r=>{t?.(r,e.text)},className:"border border-bolt-elements-borderColor rounded-full bg-gray-50 hover:bg-gray-100 dark:bg-gray-950 dark:hover:bg-gray-900 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary px-3 py-1 text-xs transition-theme",children:e.text},n))})})}var $o=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Sn>"u"||typeof Sn.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||$o.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||$o.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||$o.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=$o.DEFAULT_MAX_PENDING};$o.DEFAULT_TIMEOUT=0;$o.DEFAULT_MAX_OCCUPATION_TIME=0;$o.DEFAULT_MAX_EXECUTION_TIME=0;$o.DEFAULT_MAX_PENDING=1e3;$o.prototype.acquire=function(t,e,n,r){if(Array.isArray(t))return this._acquireBatch(t,e,n,r);if(typeof e!="function")throw new Error("You must pass a function to execute");var s=null,i=null,o=null;typeof n!="function"&&(r=n,n=null,o=new this.Promise(function(v,w){s=v,i=w})),r=r||{};var a=!1,l=null,c=null,u=null,d=this,h=function(v,w,_){c&&(clearTimeout(c),c=null),u&&(clearTimeout(u),u=null),v&&(d.queues[t]&&d.queues[t].length===0&&delete d.queues[t],d.domainReentrant&&delete d.domains[t]),a||(o?w?i(w):s(_):typeof n=="function"&&n(w,_),a=!0),v&&d.queues[t]&&d.queues[t].length>0&&d.queues[t].shift()()},f=function(v){if(a)return h(v);l&&(clearTimeout(l),l=null),d.domainReentrant&&v&&(d.domains[t]=Sn.domain);var w=r.maxExecutionTime||d.maxExecutionTime;if(w&&(u=setTimeout(function(){d.queues[t]&&h(v,new Error("Maximum execution time is exceeded "+t))},w)),e.length===1){var _=!1;try{e(function(S,E){_||(_=!0,h(v,S,E))})}catch(S){_||(_=!0,h(v,S))}}else d._promiseTry(function(){return e()}).then(function(S){h(v,void 0,S)},function(S){h(v,S)})};d.domainReentrant&&Sn.domain&&(f=Sn.domain.bind(f));var p=r.maxPending||d.maxPending;if(!d.queues[t])d.queues[t]=[],f(!0);else if(d.domainReentrant&&Sn.domain&&Sn.domain===d.domains[t])f(!1);else if(d.queues[t].length>=p)h(!1,new Error("Too many pending tasks in queue "+t));else{var m=function(){f(!0)};r.skipQueue?d.queues[t].unshift(m):d.queues[t].push(m);var g=r.timeout||d.timeout;g&&(l=setTimeout(function(){l=null,h(!1,new Error("async-lock timed out in queue "+t))},g))}var b=r.maxOccupationTime||d.maxOccupationTime;if(b&&(c=setTimeout(function(){d.queues[t]&&h(!1,new Error("Maximum occupation time is exceeded in queue "+t))},b)),o)return o};$o.prototype._acquireBatch=function(t,e,n,r){typeof n!="function"&&(r=n,n=null);var s=this,i=function(a,l){return function(c){s.acquire(a,l,c,r)}},o=t.reduceRight(function(a,l){return i(l,a)},e);if(typeof n=="function")o(n);else return new this.Promise(function(a,l){o.length===1?o(function(c,u){c?l(c):a(u)}):a(o())})};$o.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0};$o.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(e){return this.Promise.reject(e)}};var iwt=$o,owt=iwt;const Sw=yi(owt);var $L={exports:{}};typeof Object.create=="function"?$L.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:$L.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}};var awt=$L.exports,UL={exports:{}};const lwt=Oye(uEe);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=lwt,r=n.Buffer;function s(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=i);function i(o,a,l){return r(o,a,l)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},i.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(UL,UL.exports);var Jge=UL.exports,Xge=Jge.Buffer;function zT(t,e){this._block=Xge.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}zT.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=Xge.from(t,e));for(var n=this._block,r=this._blockSize,s=t.length,i=this._len,o=0;o<s;){for(var a=i%r,l=Math.min(s-o,r-a),c=0;c<l;c++)n[a+c]=t[o+c];i+=l,o+=l,i%r===0&&this._update(n)}return this._len+=s,this};zT.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=this._len*8;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(n&4294967295)>>>0,s=(n-r)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var i=this._hash();return t?i.toString(t):i};zT.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var cwt=zT,uwt=awt,Zge=cwt,dwt=Jge.Buffer,hwt=[1518500249,1859775393,-1894007588,-899497514],fwt=new Array(80);function gx(){this.init(),this._w=fwt,Zge.call(this,64,56)}uwt(gx,Zge);gx.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function pwt(t){return t<<1|t>>>31}function mwt(t){return t<<5|t>>>27}function gwt(t){return t<<30|t>>>2}function bwt(t,e,n,r){return t===0?e&n|~e&r:t===2?e&n|e&r|n&r:e^n^r}gx.prototype._update=function(t){for(var e=this._w,n=this._a|0,r=this._b|0,s=this._c|0,i=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=pwt(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var l=0;l<80;++l){var c=~~(l/20),u=mwt(n)+bwt(c,r,s,i)+o+e[l]+hwt[c]|0;o=i,i=s,s=gwt(r),r=n,n=u}this._a=n+this._a|0,this._b=r+this._b|0,this._c=s+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0};gx.prototype._hash=function(){var t=dwt.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var ywt=gx;const Qge=yi(ywt);var e0e={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(t){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?t:{})})(function(e){e.version="1.2.2";function n(){for(var x=0,I=new Array(256),R=0;R!=256;++R)x=R,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,I[R]=x;return typeof Int32Array<"u"?new Int32Array(I):I}var r=n();function s(x){var I=0,R=0,C=0,T=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(C=0;C!=256;++C)T[C]=x[C];for(C=0;C!=256;++C)for(R=x[C],I=256+C;I<4096;I+=256)R=T[I]=R>>>8^x[R&255];var O=[];for(C=1;C!=16;++C)O[C-1]=typeof Int32Array<"u"?T.subarray(C*256,C*256+256):T.slice(C*256,C*256+256);return O}var i=s(r),o=i[0],a=i[1],l=i[2],c=i[3],u=i[4],d=i[5],h=i[6],f=i[7],p=i[8],m=i[9],g=i[10],b=i[11],v=i[12],w=i[13],_=i[14];function S(x,I){for(var R=I^-1,C=0,T=x.length;C<T;)R=R>>>8^r[(R^x.charCodeAt(C++))&255];return~R}function E(x,I){for(var R=I^-1,C=x.length-15,T=0;T<C;)R=_[x[T++]^R&255]^w[x[T++]^R>>8&255]^v[x[T++]^R>>16&255]^b[x[T++]^R>>>24]^g[x[T++]]^m[x[T++]]^p[x[T++]]^f[x[T++]]^h[x[T++]]^d[x[T++]]^u[x[T++]]^c[x[T++]]^l[x[T++]]^a[x[T++]]^o[x[T++]]^r[x[T++]];for(C+=15;T<C;)R=R>>>8^r[(R^x[T++])&255];return~R}function k(x,I){for(var R=I^-1,C=0,T=x.length,O=0,P=0;C<T;)O=x.charCodeAt(C++),O<128?R=R>>>8^r[(R^O)&255]:O<2048?(R=R>>>8^r[(R^(192|O>>6&31))&255],R=R>>>8^r[(R^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,P=x.charCodeAt(C++)&1023,R=R>>>8^r[(R^(240|O>>8&7))&255],R=R>>>8^r[(R^(128|O>>2&63))&255],R=R>>>8^r[(R^(128|P>>6&15|(O&3)<<4))&255],R=R>>>8^r[(R^(128|P&63))&255]):(R=R>>>8^r[(R^(224|O>>12&15))&255],R=R>>>8^r[(R^(128|O>>6&63))&255],R=R>>>8^r[(R^(128|O&63))&255]);return~R}e.table=r,e.bstr=S,e.buf=E,e.str=k})})(e0e);const vwt=yi(e0e);var ed={};(function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}t.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)n(a,l)&&(i[l]=a[l])}}return i},t.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,a,l,c){if(o.subarray&&i.subarray){i.set(o.subarray(a,a+l),c);return}for(var u=0;u<l;u++)i[c+u]=o[a+u]},flattenChunks:function(i){var o,a,l,c,u,d;for(l=0,o=0,a=i.length;o<a;o++)l+=i[o].length;for(d=new Uint8Array(l),c=0,o=0,a=i.length;o<a;o++)u=i[o],d.set(u,c),c+=u.length;return d}},s={arraySet:function(i,o,a,l,c){for(var u=0;u<l;u++)i[c+u]=o[a+u]},flattenChunks:function(i){return[].concat.apply([],i)}};t.setTyped=function(i){i?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(e)})(ed);var bx={},Vc={},vb={},wwt=ed,xwt=4,$q=0,Uq=1,_wt=2;function wb(t){for(var e=t.length;--e>=0;)t[e]=0}var Swt=0,t0e=1,Ewt=2,kwt=3,Cwt=258,Kj=29,yx=256,Ew=yx+1+Kj,Gg=30,Yj=19,n0e=2*Ew+1,Uf=15,DN=16,Awt=7,Jj=256,r0e=16,s0e=17,i0e=18,HL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],hE=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Twt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],o0e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Pwt=512,hu=new Array((Ew+2)*2);wb(hu);var e1=new Array(Gg*2);wb(e1);var kw=new Array(Pwt);wb(kw);var Cw=new Array(Cwt-kwt+1);wb(Cw);var Xj=new Array(Kj);wb(Xj);var $C=new Array(Gg);wb($C);function MN(t,e,n,r,s){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}var a0e,l0e,c0e;function jN(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function u0e(t){return t<256?kw[t]:kw[256+(t>>>7)]}function Aw(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function io(t,e,n){t.bi_valid>DN-n?(t.bi_buf|=e<<t.bi_valid&65535,Aw(t,t.bi_buf),t.bi_buf=e>>DN-t.bi_valid,t.bi_valid+=n-DN):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function pc(t,e,n){io(t,n[e*2],n[e*2+1])}function d0e(t,e){var n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1}function Nwt(t){t.bi_valid===16?(Aw(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function Iwt(t,e){var n=e.dyn_tree,r=e.max_code,s=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,d,h,f,p,m=0;for(h=0;h<=Uf;h++)t.bl_count[h]=0;for(n[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<n0e;c++)u=t.heap[c],h=n[n[u*2+1]*2+1]+1,h>l&&(h=l,m++),n[u*2+1]=h,!(u>r)&&(t.bl_count[h]++,f=0,u>=a&&(f=o[u-a]),p=n[u*2],t.opt_len+=p*(h+f),i&&(t.static_len+=p*(s[u*2+1]+f)));if(m!==0){do{for(h=l-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[l]--,m-=2}while(m>0);for(h=l;h!==0;h--)for(u=t.bl_count[h];u!==0;)d=t.heap[--c],!(d>r)&&(n[d*2+1]!==h&&(t.opt_len+=(h-n[d*2+1])*n[d*2],n[d*2+1]=h),u--)}}function h0e(t,e,n){var r=new Array(Uf+1),s=0,i,o;for(i=1;i<=Uf;i++)r[i]=s=s+n[i-1]<<1;for(o=0;o<=e;o++){var a=t[o*2+1];a!==0&&(t[o*2]=d0e(r[a]++,a))}}function Rwt(){var t,e,n,r,s,i=new Array(Uf+1);for(n=0,r=0;r<Kj-1;r++)for(Xj[r]=n,t=0;t<1<<HL[r];t++)Cw[n++]=r;for(Cw[n-1]=r,s=0,r=0;r<16;r++)for($C[r]=s,t=0;t<1<<hE[r];t++)kw[s++]=r;for(s>>=7;r<Gg;r++)for($C[r]=s<<7,t=0;t<1<<hE[r]-7;t++)kw[256+s++]=r;for(e=0;e<=Uf;e++)i[e]=0;for(t=0;t<=143;)hu[t*2+1]=8,t++,i[8]++;for(;t<=255;)hu[t*2+1]=9,t++,i[9]++;for(;t<=279;)hu[t*2+1]=7,t++,i[7]++;for(;t<=287;)hu[t*2+1]=8,t++,i[8]++;for(h0e(hu,Ew+1,i),t=0;t<Gg;t++)e1[t*2+1]=5,e1[t*2]=d0e(t,5);a0e=new MN(hu,HL,yx+1,Ew,Uf),l0e=new MN(e1,hE,0,Gg,Uf),c0e=new MN(new Array(0),Twt,0,Yj,Awt)}function f0e(t){var e;for(e=0;e<Ew;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Gg;e++)t.dyn_dtree[e*2]=0;for(e=0;e<Yj;e++)t.bl_tree[e*2]=0;t.dyn_ltree[Jj*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p0e(t){t.bi_valid>8?Aw(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function Owt(t,e,n,r){p0e(t),Aw(t,n),Aw(t,~n),wwt.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function Hq(t,e,n,r){var s=e*2,i=n*2;return t[s]<t[i]||t[s]===t[i]&&r[e]<=r[n]}function FN(t,e,n){for(var r=t.heap[n],s=n<<1;s<=t.heap_len&&(s<t.heap_len&&Hq(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!Hq(e,r,t.heap[s],t.depth));)t.heap[n]=t.heap[s],n=s,s<<=1;t.heap[n]=r}function zq(t,e,n){var r,s,i=0,o,a;if(t.last_lit!==0)do r=t.pending_buf[t.d_buf+i*2]<<8|t.pending_buf[t.d_buf+i*2+1],s=t.pending_buf[t.l_buf+i],i++,r===0?pc(t,s,e):(o=Cw[s],pc(t,o+yx+1,e),a=HL[o],a!==0&&(s-=Xj[o],io(t,s,a)),r--,o=u0e(r),pc(t,o,n),a=hE[o],a!==0&&(r-=$C[o],io(t,r,a)));while(i<t.last_lit);pc(t,Jj,e)}function zL(t,e){var n=e.dyn_tree,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,i=e.stat_desc.elems,o,a,l=-1,c;for(t.heap_len=0,t.heap_max=n0e,o=0;o<i;o++)n[o*2]!==0?(t.heap[++t.heap_len]=l=o,t.depth[o]=0):n[o*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,n[c*2]=1,t.depth[c]=0,t.opt_len--,s&&(t.static_len-=r[c*2+1]);for(e.max_code=l,o=t.heap_len>>1;o>=1;o--)FN(t,n,o);c=i;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],FN(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,n[c*2]=n[o*2]+n[a*2],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,n[o*2+1]=n[a*2+1]=c,t.heap[1]=c++,FN(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Iwt(t,e),h0e(n,l,t.bl_count)}function Vq(t,e,n){var r,s=-1,i,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),e[(n+1)*2+1]=65535,r=0;r<=n;r++)i=o,o=e[(r+1)*2+1],!(++a<l&&i===o)&&(a<c?t.bl_tree[i*2]+=a:i!==0?(i!==s&&t.bl_tree[i*2]++,t.bl_tree[r0e*2]++):a<=10?t.bl_tree[s0e*2]++:t.bl_tree[i0e*2]++,a=0,s=i,o===0?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))}function Wq(t,e,n){var r,s=-1,i,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=e[(r+1)*2+1],!(++a<l&&i===o)){if(a<c)do pc(t,i,t.bl_tree);while(--a!==0);else i!==0?(i!==s&&(pc(t,i,t.bl_tree),a--),pc(t,r0e,t.bl_tree),io(t,a-3,2)):a<=10?(pc(t,s0e,t.bl_tree),io(t,a-3,3)):(pc(t,i0e,t.bl_tree),io(t,a-11,7));a=0,s=i,o===0?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}}function Lwt(t){var e;for(Vq(t,t.dyn_ltree,t.l_desc.max_code),Vq(t,t.dyn_dtree,t.d_desc.max_code),zL(t,t.bl_desc),e=Yj-1;e>=3&&t.bl_tree[o0e[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function Dwt(t,e,n,r){var s;for(io(t,e-257,5),io(t,n-1,5),io(t,r-4,4),s=0;s<r;s++)io(t,t.bl_tree[o0e[s]*2+1],3);Wq(t,t.dyn_ltree,e-1),Wq(t,t.dyn_dtree,n-1)}function Mwt(t){var e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return $q;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return Uq;for(n=32;n<yx;n++)if(t.dyn_ltree[n*2]!==0)return Uq;return $q}var Gq=!1;function jwt(t){Gq||(Rwt(),Gq=!0),t.l_desc=new jN(t.dyn_ltree,a0e),t.d_desc=new jN(t.dyn_dtree,l0e),t.bl_desc=new jN(t.bl_tree,c0e),t.bi_buf=0,t.bi_valid=0,f0e(t)}function m0e(t,e,n,r){io(t,(Swt<<1)+(r?1:0),3),Owt(t,e,n)}function Fwt(t){io(t,t0e<<1,3),pc(t,Jj,hu),Nwt(t)}function Bwt(t,e,n,r){var s,i,o=0;t.level>0?(t.strm.data_type===_wt&&(t.strm.data_type=Mwt(t)),zL(t,t.l_desc),zL(t,t.d_desc),o=Lwt(t),s=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=s&&(s=i)):s=i=n+5,n+4<=s&&e!==-1?m0e(t,e,n,r):t.strategy===xwt||i===s?(io(t,(t0e<<1)+(r?1:0),3),zq(t,hu,e1)):(io(t,(Ewt<<1)+(r?1:0),3),Dwt(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),zq(t,t.dyn_ltree,t.dyn_dtree)),f0e(t),r&&p0e(t)}function $wt(t,e,n){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=n&255,t.last_lit++,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(Cw[n]+yx+1)*2]++,t.dyn_dtree[u0e(e)*2]++),t.last_lit===t.lit_bufsize-1}vb._tr_init=jwt;vb._tr_stored_block=m0e;vb._tr_flush_block=Bwt;vb._tr_tally=$wt;vb._tr_align=Fwt;function Uwt(t,e,n,r){for(var s=t&65535|0,i=t>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do s=s+e[r++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0}var g0e=Uwt;function Hwt(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e}var zwt=Hwt();function Vwt(t,e,n,r){var s=zwt,i=r+n;t^=-1;for(var o=r;o<i;o++)t=t>>>8^s[(t^e[o])&255];return t^-1}var b0e=Vwt,Zj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ni=ed,Pa=vb,y0e=g0e,Id=b0e,Wwt=Zj,Zp=0,Gwt=1,qwt=3,nh=4,qq=5,mc=0,Kq=1,Na=-2,Kwt=-3,BN=-5,Ywt=-1,Jwt=1,bS=2,Xwt=3,Zwt=4,Qwt=0,ext=2,VT=8,txt=9,nxt=15,rxt=8,sxt=29,ixt=256,VL=ixt+1+sxt,oxt=30,axt=19,lxt=2*VL+1,cxt=15,xn=3,qd=258,hl=qd+xn+1,uxt=32,WT=42,WL=69,fE=73,pE=91,mE=103,Hf=113,hv=666,ms=1,vx=2,Ap=3,xb=4,dxt=3;function Kd(t,e){return t.msg=Wwt[e],e}function Yq(t){return(t<<1)-(t>4?9:0)}function $d(t){for(var e=t.length;--e>=0;)t[e]=0}function Rd(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(Ni.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))}function qs(t,e){Pa._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Rd(t.strm)}function Mn(t,e){t.pending_buf[t.pending++]=e}function By(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function hxt(t,e,n,r){var s=t.avail_in;return s>r&&(s=r),s===0?0:(t.avail_in-=s,Ni.arraySet(e,t.input,t.next_in,s,n),t.state.wrap===1?t.adler=y0e(t.adler,e,s,n):t.state.wrap===2&&(t.adler=Id(t.adler,e,s,n)),t.next_in+=s,t.total_in+=s,s)}function v0e(t,e){var n=t.max_chain_length,r=t.strstart,s,i,o=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-hl?t.strstart-(t.w_size-hl):0,c=t.window,u=t.w_mask,d=t.prev,h=t.strstart+qd,f=c[r+o-1],p=c[r+o];t.prev_length>=t.good_match&&(n>>=2),a>t.lookahead&&(a=t.lookahead);do if(s=e,!(c[s+o]!==p||c[s+o-1]!==f||c[s]!==c[r]||c[++s]!==c[r+1])){r+=2,s++;do;while(c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&r<h);if(i=qd-(h-r),r=h-qd,i>o){if(t.match_start=e,o=i,i>=a)break;f=c[r+o-1],p=c[r+o]}}while((e=d[e&u])>l&&--n!==0);return o<=t.lookahead?o:t.lookahead}function Tp(t){var e=t.w_size,n,r,s,i,o;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-hl)){Ni.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,r=t.hash_size,n=r;do s=t.head[--n],t.head[n]=s>=e?s-e:0;while(--r);r=e,n=r;do s=t.prev[--n],t.prev[n]=s>=e?s-e:0;while(--r);i+=e}if(t.strm.avail_in===0)break;if(r=hxt(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=xn)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+xn-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<xn)););}while(t.lookahead<hl&&t.strm.avail_in!==0)}function fxt(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Tp(t),t.lookahead===0&&e===Zp)return ms;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((t.strstart===0||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,qs(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-hl&&(qs(t,!1),t.strm.avail_out===0))return ms}return t.insert=0,e===nh?(qs(t,!0),t.strm.avail_out===0?Ap:xb):(t.strstart>t.block_start&&(qs(t,!1),t.strm.avail_out===0),ms)}function $N(t,e){for(var n,r;;){if(t.lookahead<hl){if(Tp(t),t.lookahead<hl&&e===Zp)return ms;if(t.lookahead===0)break}if(n=0,t.lookahead>=xn&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+xn-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-hl&&(t.match_length=v0e(t,n)),t.match_length>=xn)if(r=Pa._tr_tally(t,t.strstart-t.match_start,t.match_length-xn),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=xn){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+xn-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=Pa._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(qs(t,!1),t.strm.avail_out===0))return ms}return t.insert=t.strstart<xn-1?t.strstart:xn-1,e===nh?(qs(t,!0),t.strm.avail_out===0?Ap:xb):t.last_lit&&(qs(t,!1),t.strm.avail_out===0)?ms:vx}function Wm(t,e){for(var n,r,s;;){if(t.lookahead<hl){if(Tp(t),t.lookahead<hl&&e===Zp)return ms;if(t.lookahead===0)break}if(n=0,t.lookahead>=xn&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+xn-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=xn-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-hl&&(t.match_length=v0e(t,n),t.match_length<=5&&(t.strategy===Jwt||t.match_length===xn&&t.strstart-t.match_start>4096)&&(t.match_length=xn-1)),t.prev_length>=xn&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-xn,r=Pa._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-xn),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+xn-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=xn-1,t.strstart++,r&&(qs(t,!1),t.strm.avail_out===0))return ms}else if(t.match_available){if(r=Pa._tr_tally(t,0,t.window[t.strstart-1]),r&&qs(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return ms}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Pa._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<xn-1?t.strstart:xn-1,e===nh?(qs(t,!0),t.strm.avail_out===0?Ap:xb):t.last_lit&&(qs(t,!1),t.strm.avail_out===0)?ms:vx}function pxt(t,e){for(var n,r,s,i,o=t.window;;){if(t.lookahead<=qd){if(Tp(t),t.lookahead<=qd&&e===Zp)return ms;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=xn&&t.strstart>0&&(s=t.strstart-1,r=o[s],r===o[++s]&&r===o[++s]&&r===o[++s])){i=t.strstart+qd;do;while(r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&s<i);t.match_length=qd-(i-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=xn?(n=Pa._tr_tally(t,1,t.match_length-xn),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Pa._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(qs(t,!1),t.strm.avail_out===0))return ms}return t.insert=0,e===nh?(qs(t,!0),t.strm.avail_out===0?Ap:xb):t.last_lit&&(qs(t,!1),t.strm.avail_out===0)?ms:vx}function mxt(t,e){for(var n;;){if(t.lookahead===0&&(Tp(t),t.lookahead===0)){if(e===Zp)return ms;break}if(t.match_length=0,n=Pa._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(qs(t,!1),t.strm.avail_out===0))return ms}return t.insert=0,e===nh?(qs(t,!0),t.strm.avail_out===0?Ap:xb):t.last_lit&&(qs(t,!1),t.strm.avail_out===0)?ms:vx}function Wl(t,e,n,r,s){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=s}var vg;vg=[new Wl(0,0,0,0,fxt),new Wl(4,4,8,4,$N),new Wl(4,5,16,8,$N),new Wl(4,6,32,32,$N),new Wl(4,4,16,16,Wm),new Wl(8,16,32,32,Wm),new Wl(8,16,128,128,Wm),new Wl(8,32,128,256,Wm),new Wl(32,128,258,1024,Wm),new Wl(32,258,258,4096,Wm)];function gxt(t){t.window_size=2*t.w_size,$d(t.head),t.max_lazy_match=vg[t.level].max_lazy,t.good_match=vg[t.level].good_length,t.nice_match=vg[t.level].nice_length,t.max_chain_length=vg[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=xn-1,t.match_available=0,t.ins_h=0}function bxt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=VT,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ni.Buf16(lxt*2),this.dyn_dtree=new Ni.Buf16((2*oxt+1)*2),this.bl_tree=new Ni.Buf16((2*axt+1)*2),$d(this.dyn_ltree),$d(this.dyn_dtree),$d(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ni.Buf16(cxt+1),this.heap=new Ni.Buf16(2*VL+1),$d(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ni.Buf16(2*VL+1),$d(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w0e(t){var e;return!t||!t.state?Kd(t,Na):(t.total_in=t.total_out=0,t.data_type=ext,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?WT:Hf,t.adler=e.wrap===2?0:1,e.last_flush=Zp,Pa._tr_init(e),mc)}function x0e(t){var e=w0e(t);return e===mc&&gxt(t.state),e}function yxt(t,e){return!t||!t.state||t.state.wrap!==2?Na:(t.state.gzhead=e,mc)}function _0e(t,e,n,r,s,i){if(!t)return Na;var o=1;if(e===Ywt&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),s<1||s>txt||n!==VT||r<8||r>15||e<0||e>9||i<0||i>Zwt)return Kd(t,Na);r===8&&(r=9);var a=new bxt;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+xn-1)/xn),a.window=new Ni.Buf8(a.w_size*2),a.head=new Ni.Buf16(a.hash_size),a.prev=new Ni.Buf16(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Ni.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=i,a.method=n,x0e(t)}function vxt(t,e){return _0e(t,e,VT,nxt,rxt,Qwt)}function wxt(t,e){var n,r,s,i;if(!t||!t.state||e>qq||e<0)return t?Kd(t,Na):Na;if(r=t.state,!t.output||!t.input&&t.avail_in!==0||r.status===hv&&e!==nh)return Kd(t,t.avail_out===0?BN:Na);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===WT)if(r.wrap===2)t.adler=0,Mn(r,31),Mn(r,139),Mn(r,8),r.gzhead?(Mn(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Mn(r,r.gzhead.time&255),Mn(r,r.gzhead.time>>8&255),Mn(r,r.gzhead.time>>16&255),Mn(r,r.gzhead.time>>24&255),Mn(r,r.level===9?2:r.strategy>=bS||r.level<2?4:0),Mn(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Mn(r,r.gzhead.extra.length&255),Mn(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Id(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=WL):(Mn(r,0),Mn(r,0),Mn(r,0),Mn(r,0),Mn(r,0),Mn(r,r.level===9?2:r.strategy>=bS||r.level<2?4:0),Mn(r,dxt),r.status=Hf);else{var o=VT+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=bS||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,o|=a<<6,r.strstart!==0&&(o|=uxt),o+=31-o%31,r.status=Hf,By(r,o),r.strstart!==0&&(By(r,t.adler>>>16),By(r,t.adler&65535)),t.adler=1}if(r.status===WL)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=Id(t.adler,r.pending_buf,r.pending-s,s)),Rd(t),s=r.pending,r.pending===r.pending_buf_size));)Mn(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=Id(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=fE)}else r.status=fE;if(r.status===fE)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=Id(t.adler,r.pending_buf,r.pending-s,s)),Rd(t),s=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,Mn(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Id(t.adler,r.pending_buf,r.pending-s,s)),i===0&&(r.gzindex=0,r.status=pE)}else r.status=pE;if(r.status===pE)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=Id(t.adler,r.pending_buf,r.pending-s,s)),Rd(t),s=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,Mn(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Id(t.adler,r.pending_buf,r.pending-s,s)),i===0&&(r.status=mE)}else r.status=mE;if(r.status===mE&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Rd(t),r.pending+2<=r.pending_buf_size&&(Mn(r,t.adler&255),Mn(r,t.adler>>8&255),t.adler=0,r.status=Hf)):r.status=Hf),r.pending!==0){if(Rd(t),t.avail_out===0)return r.last_flush=-1,mc}else if(t.avail_in===0&&Yq(e)<=Yq(n)&&e!==nh)return Kd(t,BN);if(r.status===hv&&t.avail_in!==0)return Kd(t,BN);if(t.avail_in!==0||r.lookahead!==0||e!==Zp&&r.status!==hv){var l=r.strategy===bS?mxt(r,e):r.strategy===Xwt?pxt(r,e):vg[r.level].func(r,e);if((l===Ap||l===xb)&&(r.status=hv),l===ms||l===Ap)return t.avail_out===0&&(r.last_flush=-1),mc;if(l===vx&&(e===Gwt?Pa._tr_align(r):e!==qq&&(Pa._tr_stored_block(r,0,0,!1),e===qwt&&($d(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Rd(t),t.avail_out===0))return r.last_flush=-1,mc}return e!==nh?mc:r.wrap<=0?Kq:(r.wrap===2?(Mn(r,t.adler&255),Mn(r,t.adler>>8&255),Mn(r,t.adler>>16&255),Mn(r,t.adler>>24&255),Mn(r,t.total_in&255),Mn(r,t.total_in>>8&255),Mn(r,t.total_in>>16&255),Mn(r,t.total_in>>24&255)):(By(r,t.adler>>>16),By(r,t.adler&65535)),Rd(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?mc:Kq)}function xxt(t){var e;return!t||!t.state?Na:(e=t.state.status,e!==WT&&e!==WL&&e!==fE&&e!==pE&&e!==mE&&e!==Hf&&e!==hv?Kd(t,Na):(t.state=null,e===Hf?Kd(t,Kwt):mc))}function _xt(t,e){var n=e.length,r,s,i,o,a,l,c,u;if(!t||!t.state||(r=t.state,o=r.wrap,o===2||o===1&&r.status!==WT||r.lookahead))return Na;for(o===1&&(t.adler=y0e(t.adler,e,n,0)),r.wrap=0,n>=r.w_size&&(o===0&&($d(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new Ni.Buf8(r.w_size),Ni.arraySet(u,e,n-r.w_size,r.w_size,0),e=u,n=r.w_size),a=t.avail_in,l=t.next_in,c=t.input,t.avail_in=n,t.next_in=0,t.input=e,Tp(r);r.lookahead>=xn;){s=r.strstart,i=r.lookahead-(xn-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[s+xn-1])&r.hash_mask,r.prev[s&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=s,s++;while(--i);r.strstart=s,r.lookahead=xn-1,Tp(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=xn-1,r.match_available=0,t.next_in=l,t.input=c,t.avail_in=a,r.wrap=o,mc}Vc.deflateInit=vxt;Vc.deflateInit2=_0e;Vc.deflateReset=x0e;Vc.deflateResetKeep=w0e;Vc.deflateSetHeader=yxt;Vc.deflate=wxt;Vc.deflateEnd=xxt;Vc.deflateSetDictionary=_xt;Vc.deflateInfo="pako deflate (from Nodeca project)";var Qp={},GT=ed,S0e=!0,E0e=!0;try{String.fromCharCode.apply(null,[0])}catch{S0e=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E0e=!1}var Tw=new GT.Buf8(256);for(var wd=0;wd<256;wd++)Tw[wd]=wd>=252?6:wd>=248?5:wd>=240?4:wd>=224?3:wd>=192?2:1;Tw[254]=Tw[254]=1;Qp.string2buf=function(t){var e,n,r,s,i,o=t.length,a=0;for(s=0;s<o;s++)n=t.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=t.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new GT.Buf8(a),i=0,s=0;i<a;s++)n=t.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=t.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|n&63):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|n&63):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|n&63);return e};function k0e(t,e){if(e<65534&&(t.subarray&&E0e||!t.subarray&&S0e))return String.fromCharCode.apply(null,GT.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}Qp.buf2binstring=function(t){return k0e(t,t.length)};Qp.binstring2buf=function(t){for(var e=new GT.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e};Qp.buf2string=function(t,e){var n,r,s,i,o=e||t.length,a=new Array(o*2);for(r=0,n=0;n<o;){if(s=t[n++],s<128){a[r++]=s;continue}if(i=Tw[s],i>4){a[r++]=65533,n+=i-1;continue}for(s&=i===2?31:i===3?15:7;i>1&&n<o;)s=s<<6|t[n++]&63,i--;if(i>1){a[r++]=65533;continue}s<65536?a[r++]=s:(s-=65536,a[r++]=55296|s>>10&1023,a[r++]=56320|s&1023)}return k0e(a,r)};Qp.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Tw[t[n]]>e?n:e};function Sxt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var C0e=Sxt,t1=Vc,n1=ed,GL=Qp,qL=Zj,Ext=C0e,A0e=Object.prototype.toString,kxt=0,UN=4,qg=0,Jq=1,Xq=2,Cxt=-1,Axt=0,Txt=8;function Pp(t){if(!(this instanceof Pp))return new Pp(t);this.options=n1.assign({level:Cxt,method:Txt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Axt,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ext,this.strm.avail_out=0;var n=t1.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==qg)throw new Error(qL[n]);if(e.header&&t1.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(typeof e.dictionary=="string"?r=GL.string2buf(e.dictionary):A0e.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,n=t1.deflateSetDictionary(this.strm,r),n!==qg)throw new Error(qL[n]);this._dict_set=!0}}Pp.prototype.push=function(t,e){var n=this.strm,r=this.options.chunkSize,s,i;if(this.ended)return!1;i=e===~~e?e:e===!0?UN:kxt,typeof t=="string"?n.input=GL.string2buf(t):A0e.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new n1.Buf8(r),n.next_out=0,n.avail_out=r),s=t1.deflate(n,i),s!==Jq&&s!==qg)return this.onEnd(s),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(i===UN||i===Xq))&&(this.options.to==="string"?this.onData(GL.buf2binstring(n1.shrinkBuf(n.output,n.next_out))):this.onData(n1.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&s!==Jq);return i===UN?(s=t1.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===qg):(i===Xq&&(this.onEnd(qg),n.avail_out=0),!0)};Pp.prototype.onData=function(t){this.chunks.push(t)};Pp.prototype.onEnd=function(t){t===qg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Qj(t,e){var n=new Pp(e);if(n.push(t,!0),n.err)throw n.msg||qL[n.err];return n.result}function Pxt(t,e){return e=e||{},e.raw=!0,Qj(t,e)}function Nxt(t,e){return e=e||{},e.gzip=!0,Qj(t,e)}bx.Deflate=Pp;bx.deflate=Qj;bx.deflateRaw=Pxt;bx.gzip=Nxt;var wx={},Cl={},yS=30,Ixt=12,Rxt=function(e,n){var r,s,i,o,a,l,c,u,d,h,f,p,m,g,b,v,w,_,S,E,k,x,I,R,C;r=e.state,s=e.next_in,R=e.input,i=s+(e.avail_in-5),o=e.next_out,C=e.output,a=o-(n-e.avail_out),l=o+(e.avail_out-257),c=r.dmax,u=r.wsize,d=r.whave,h=r.wnext,f=r.window,p=r.hold,m=r.bits,g=r.lencode,b=r.distcode,v=(1<<r.lenbits)-1,w=(1<<r.distbits)-1;e:do{m<15&&(p+=R[s++]<<m,m+=8,p+=R[s++]<<m,m+=8),_=g[p&v];t:for(;;){if(S=_>>>24,p>>>=S,m-=S,S=_>>>16&255,S===0)C[o++]=_&65535;else if(S&16){E=_&65535,S&=15,S&&(m<S&&(p+=R[s++]<<m,m+=8),E+=p&(1<<S)-1,p>>>=S,m-=S),m<15&&(p+=R[s++]<<m,m+=8,p+=R[s++]<<m,m+=8),_=b[p&w];n:for(;;){if(S=_>>>24,p>>>=S,m-=S,S=_>>>16&255,S&16){if(k=_&65535,S&=15,m<S&&(p+=R[s++]<<m,m+=8,m<S&&(p+=R[s++]<<m,m+=8)),k+=p&(1<<S)-1,k>c){e.msg="invalid distance too far back",r.mode=yS;break e}if(p>>>=S,m-=S,S=o-a,k>S){if(S=k-S,S>d&&r.sane){e.msg="invalid distance too far back",r.mode=yS;break e}if(x=0,I=f,h===0){if(x+=u-S,S<E){E-=S;do C[o++]=f[x++];while(--S);x=o-k,I=C}}else if(h<S){if(x+=u+h-S,S-=h,S<E){E-=S;do C[o++]=f[x++];while(--S);if(x=0,h<E){S=h,E-=S;do C[o++]=f[x++];while(--S);x=o-k,I=C}}}else if(x+=h-S,S<E){E-=S;do C[o++]=f[x++];while(--S);x=o-k,I=C}for(;E>2;)C[o++]=I[x++],C[o++]=I[x++],C[o++]=I[x++],E-=3;E&&(C[o++]=I[x++],E>1&&(C[o++]=I[x++]))}else{x=o-k;do C[o++]=C[x++],C[o++]=C[x++],C[o++]=C[x++],E-=3;while(E>2);E&&(C[o++]=C[x++],E>1&&(C[o++]=C[x++]))}}else if(S&64){e.msg="invalid distance code",r.mode=yS;break e}else{_=b[(_&65535)+(p&(1<<S)-1)];continue n}break}}else if(S&64)if(S&32){r.mode=Ixt;break e}else{e.msg="invalid literal/length code",r.mode=yS;break e}else{_=g[(_&65535)+(p&(1<<S)-1)];continue t}break}}while(s<i&&o<l);E=m>>3,s-=E,m-=E<<3,p&=(1<<m)-1,e.next_in=s,e.next_out=o,e.avail_in=s<i?5+(i-s):5-(s-i),e.avail_out=o<l?257+(l-o):257-(o-l),r.hold=p,r.bits=m},Zq=ed,Gm=15,Qq=852,eK=592,tK=0,HN=1,nK=2,Oxt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Lxt=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Dxt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Mxt=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],jxt=function(e,n,r,s,i,o,a,l){var c=l.bits,u=0,d=0,h=0,f=0,p=0,m=0,g=0,b=0,v=0,w=0,_,S,E,k,x,I=null,R=0,C,T=new Zq.Buf16(Gm+1),O=new Zq.Buf16(Gm+1),P=null,U=0,ee,X,Z;for(u=0;u<=Gm;u++)T[u]=0;for(d=0;d<s;d++)T[n[r+d]]++;for(p=c,f=Gm;f>=1&&T[f]===0;f--);if(p>f&&(p=f),f===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<f&&T[h]===0;h++);for(p<h&&(p=h),b=1,u=1;u<=Gm;u++)if(b<<=1,b-=T[u],b<0)return-1;if(b>0&&(e===tK||f!==1))return-1;for(O[1]=0,u=1;u<Gm;u++)O[u+1]=O[u]+T[u];for(d=0;d<s;d++)n[r+d]!==0&&(a[O[n[r+d]]++]=d);if(e===tK?(I=P=a,C=19):e===HN?(I=Oxt,R-=257,P=Lxt,U-=257,C=256):(I=Dxt,P=Mxt,C=-1),w=0,d=0,u=h,x=o,m=p,g=0,E=-1,v=1<<p,k=v-1,e===HN&&v>Qq||e===nK&&v>eK)return 1;for(;;){ee=u-g,a[d]<C?(X=0,Z=a[d]):a[d]>C?(X=P[U+a[d]],Z=I[R+a[d]]):(X=96,Z=0),_=1<<u-g,S=1<<m,h=S;do S-=_,i[x+(w>>g)+S]=ee<<24|X<<16|Z|0;while(S!==0);for(_=1<<u-1;w&_;)_>>=1;if(_!==0?(w&=_-1,w+=_):w=0,d++,--T[u]===0){if(u===f)break;u=n[r+a[d]]}if(u>p&&(w&k)!==E){for(g===0&&(g=p),x+=h,m=u-g,b=1<<m;m+g<f&&(b-=T[m+g],!(b<=0));)m++,b<<=1;if(v+=1<<m,e===HN&&v>Qq||e===nK&&v>eK)return 1;E=w&k,i[E]=p<<24|m<<16|x-o|0}}return w!==0&&(i[x+w]=u-g<<24|64<<16|0),l.bits=p,0},Uo=ed,KL=g0e,Gl=b0e,Fxt=Rxt,r1=jxt,Bxt=0,T0e=1,P0e=2,rK=4,$xt=5,vS=6,Np=0,Uxt=1,Hxt=2,ja=-2,N0e=-3,I0e=-4,zxt=-5,sK=8,R0e=1,iK=2,oK=3,aK=4,lK=5,cK=6,uK=7,dK=8,hK=9,fK=10,UC=11,su=12,zN=13,pK=14,VN=15,mK=16,gK=17,bK=18,yK=19,wS=20,xS=21,vK=22,wK=23,xK=24,_K=25,SK=26,WN=27,EK=28,kK=29,wr=30,O0e=31,Vxt=32,Wxt=852,Gxt=592,qxt=15,Kxt=qxt;function CK(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function Yxt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uo.Buf16(320),this.work=new Uo.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function L0e(t){var e;return!t||!t.state?ja:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=R0e,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Uo.Buf32(Wxt),e.distcode=e.distdyn=new Uo.Buf32(Gxt),e.sane=1,e.back=-1,Np)}function D0e(t){var e;return!t||!t.state?ja:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,L0e(t))}function M0e(t,e){var n,r;return!t||!t.state||(r=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?ja:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,D0e(t))}function j0e(t,e){var n,r;return t?(r=new Yxt,t.state=r,r.window=null,n=M0e(t,e),n!==Np&&(t.state=null),n):ja}function Jxt(t){return j0e(t,Kxt)}var AK=!0,GN,qN;function Xxt(t){if(AK){var e;for(GN=new Uo.Buf32(512),qN=new Uo.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(r1(T0e,t.lens,0,288,GN,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;r1(P0e,t.lens,0,32,qN,0,t.work,{bits:5}),AK=!1}t.lencode=GN,t.lenbits=9,t.distcode=qN,t.distbits=5}function F0e(t,e,n,r){var s,i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uo.Buf8(i.wsize)),r>=i.wsize?(Uo.arraySet(i.window,e,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),Uo.arraySet(i.window,e,n-r,s,i.wnext),r-=s,r?(Uo.arraySet(i.window,e,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0}function Zxt(t,e){var n,r,s,i,o,a,l,c,u,d,h,f,p,m,g=0,b,v,w,_,S,E,k,x,I=new Uo.Buf8(4),R,C,T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return ja;n=t.state,n.mode===su&&(n.mode=zN),o=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,d=a,h=l,x=Np;e:for(;;)switch(n.mode){case R0e:if(n.wrap===0){n.mode=zN;break}for(;u<16;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,I[0]=c&255,I[1]=c>>>8&255,n.check=Gl(n.check,I,2,0),c=0,u=0,n.mode=iK;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=wr;break}if((c&15)!==sK){t.msg="unknown compression method",n.mode=wr;break}if(c>>>=4,u-=4,k=(c&15)+8,n.wbits===0)n.wbits=k;else if(k>n.wbits){t.msg="invalid window size",n.mode=wr;break}n.dmax=1<<k,t.adler=n.check=1,n.mode=c&512?fK:su,c=0,u=0;break;case iK:for(;u<16;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==sK){t.msg="unknown compression method",n.mode=wr;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=wr;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,n.check=Gl(n.check,I,2,0)),c=0,u=0,n.mode=oK;case oK:for(;u<32;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,I[2]=c>>>16&255,I[3]=c>>>24&255,n.check=Gl(n.check,I,4,0)),c=0,u=0,n.mode=aK;case aK:for(;u<16;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,n.check=Gl(n.check,I,2,0)),c=0,u=0,n.mode=lK;case lK:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,n.check=Gl(n.check,I,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=cK;case cK:if(n.flags&1024&&(f=n.length,f>a&&(f=a),f&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Uo.arraySet(n.head.extra,r,i,f,k)),n.flags&512&&(n.check=Gl(n.check,r,f,i)),a-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=uK;case uK:if(n.flags&2048){if(a===0)break e;f=0;do k=r[i+f++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k));while(k&&f<a);if(n.flags&512&&(n.check=Gl(n.check,r,f,i)),a-=f,i+=f,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=dK;case dK:if(n.flags&4096){if(a===0)break e;f=0;do k=r[i+f++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k));while(k&&f<a);if(n.flags&512&&(n.check=Gl(n.check,r,f,i)),a-=f,i+=f,k)break e}else n.head&&(n.head.comment=null);n.mode=hK;case hK:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=wr;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=su;break;case fK:for(;u<32;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}t.adler=n.check=CK(c),c=0,u=0,n.mode=UC;case UC:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,n.hold=c,n.bits=u,Hxt;t.adler=n.check=1,n.mode=su;case su:if(e===$xt||e===vS)break e;case zN:if(n.last){c>>>=u&7,u-=u&7,n.mode=WN;break}for(;u<3;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=pK;break;case 1:if(Xxt(n),n.mode=wS,e===vS){c>>>=2,u-=2;break e}break;case 2:n.mode=gK;break;case 3:t.msg="invalid block type",n.mode=wr}c>>>=2,u-=2;break;case pK:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=wr;break}if(n.length=c&65535,c=0,u=0,n.mode=VN,e===vS)break e;case VN:n.mode=mK;case mK:if(f=n.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;Uo.arraySet(s,r,i,f,o),a-=f,i+=f,l-=f,o+=f,n.length-=f;break}n.mode=su;break;case gK:for(;u<14;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=wr;break}n.have=0,n.mode=bK;case bK:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.lens[T[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},x=r1(Bxt,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,x){t.msg="invalid code lengths set",n.mode=wr;break}n.have=0,n.mode=yK;case yK:for(;n.have<n.nlen+n.ndist;){for(;g=n.lencode[c&(1<<n.lenbits)-1],b=g>>>24,v=g>>>16&255,w=g&65535,!(b<=u);){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(w<16)c>>>=b,u-=b,n.lens[n.have++]=w;else{if(w===16){for(C=b+2;u<C;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(c>>>=b,u-=b,n.have===0){t.msg="invalid bit length repeat",n.mode=wr;break}k=n.lens[n.have-1],f=3+(c&3),c>>>=2,u-=2}else if(w===17){for(C=b+3;u<C;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}c>>>=b,u-=b,k=0,f=3+(c&7),c>>>=3,u-=3}else{for(C=b+7;u<C;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}c>>>=b,u-=b,k=0,f=11+(c&127),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=wr;break}for(;f--;)n.lens[n.have++]=k}}if(n.mode===wr)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=wr;break}if(n.lenbits=9,R={bits:n.lenbits},x=r1(T0e,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,x){t.msg="invalid literal/lengths set",n.mode=wr;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},x=r1(P0e,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,x){t.msg="invalid distances set",n.mode=wr;break}if(n.mode=wS,e===vS)break e;case wS:n.mode=xS;case xS:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,n.hold=c,n.bits=u,Fxt(t,h),o=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,n.mode===su&&(n.back=-1);break}for(n.back=0;g=n.lencode[c&(1<<n.lenbits)-1],b=g>>>24,v=g>>>16&255,w=g&65535,!(b<=u);){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(v&&!(v&240)){for(_=b,S=v,E=w;g=n.lencode[E+((c&(1<<_+S)-1)>>_)],b=g>>>24,v=g>>>16&255,w=g&65535,!(_+b<=u);){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=b,u-=b,n.back+=b,n.length=w,v===0){n.mode=SK;break}if(v&32){n.back=-1,n.mode=su;break}if(v&64){t.msg="invalid literal/length code",n.mode=wr;break}n.extra=v&15,n.mode=vK;case vK:if(n.extra){for(C=n.extra;u<C;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=wK;case wK:for(;g=n.distcode[c&(1<<n.distbits)-1],b=g>>>24,v=g>>>16&255,w=g&65535,!(b<=u);){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(!(v&240)){for(_=b,S=v,E=w;g=n.distcode[E+((c&(1<<_+S)-1)>>_)],b=g>>>24,v=g>>>16&255,w=g&65535,!(_+b<=u);){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=b,u-=b,n.back+=b,v&64){t.msg="invalid distance code",n.mode=wr;break}n.offset=w,n.extra=v&15,n.mode=xK;case xK:if(n.extra){for(C=n.extra;u<C;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=wr;break}n.mode=_K;case _K:if(l===0)break e;if(f=h-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=wr;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=s,p=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do s[o++]=m[p++];while(--f);n.length===0&&(n.mode=xS);break;case SK:if(l===0)break e;s[o++]=n.length,l--,n.mode=xS;break;case WN:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[i++]<<u,u+=8}if(h-=l,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=n.flags?Gl(n.check,s,h,o-h):KL(n.check,s,h,o-h)),h=l,(n.flags?c:CK(c))!==n.check){t.msg="incorrect data check",n.mode=wr;break}c=0,u=0}n.mode=EK;case EK:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=wr;break}c=0,u=0}n.mode=kK;case kK:x=Uxt;break e;case wr:x=N0e;break e;case O0e:return I0e;case Vxt:default:return ja}return t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,n.hold=c,n.bits=u,(n.wsize||h!==t.avail_out&&n.mode<wr&&(n.mode<WN||e!==rK))&&F0e(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=n.flags?Gl(n.check,s,h,t.next_out-h):KL(n.check,s,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===su?128:0)+(n.mode===wS||n.mode===VN?256:0),(d===0&&h===0||e===rK)&&x===Np&&(x=zxt),x}function Qxt(t){if(!t||!t.state)return ja;var e=t.state;return e.window&&(e.window=null),t.state=null,Np}function e_t(t,e){var n;return!t||!t.state||(n=t.state,!(n.wrap&2))?ja:(n.head=e,e.done=!1,Np)}function t_t(t,e){var n=e.length,r,s,i;return!t||!t.state||(r=t.state,r.wrap!==0&&r.mode!==UC)?ja:r.mode===UC&&(s=1,s=KL(s,e,n,0),s!==r.check)?N0e:(i=F0e(t,e,n,n),i?(r.mode=O0e,I0e):(r.havedict=1,Np))}Cl.inflateReset=D0e;Cl.inflateReset2=M0e;Cl.inflateResetKeep=L0e;Cl.inflateInit=Jxt;Cl.inflateInit2=j0e;Cl.inflate=Zxt;Cl.inflateEnd=Qxt;Cl.inflateGetHeader=e_t;Cl.inflateSetDictionary=t_t;Cl.inflateInfo="pako inflate (from Nodeca project)";var B0e={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function n_t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var r_t=n_t,Kg=Cl,s1=ed,gE=Qp,Ur=B0e,YL=Zj,s_t=C0e,i_t=r_t,$0e=Object.prototype.toString;function Ip(t){if(!(this instanceof Ip))return new Ip(t);this.options=s1.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s_t,this.strm.avail_out=0;var n=Kg.inflateInit2(this.strm,e.windowBits);if(n!==Ur.Z_OK)throw new Error(YL[n]);if(this.header=new i_t,Kg.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=gE.string2buf(e.dictionary):$0e.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Kg.inflateSetDictionary(this.strm,e.dictionary),n!==Ur.Z_OK)))throw new Error(YL[n])}Ip.prototype.push=function(t,e){var n=this.strm,r=this.options.chunkSize,s=this.options.dictionary,i,o,a,l,c,u=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?Ur.Z_FINISH:Ur.Z_NO_FLUSH,typeof t=="string"?n.input=gE.binstring2buf(t):$0e.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new s1.Buf8(r),n.next_out=0,n.avail_out=r),i=Kg.inflate(n,Ur.Z_NO_FLUSH),i===Ur.Z_NEED_DICT&&s&&(i=Kg.inflateSetDictionary(this.strm,s)),i===Ur.Z_BUF_ERROR&&u===!0&&(i=Ur.Z_OK,u=!1),i!==Ur.Z_STREAM_END&&i!==Ur.Z_OK)return this.onEnd(i),this.ended=!0,!1;n.next_out&&(n.avail_out===0||i===Ur.Z_STREAM_END||n.avail_in===0&&(o===Ur.Z_FINISH||o===Ur.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=gE.utf8border(n.output,n.next_out),l=n.next_out-a,c=gE.buf2string(n.output,a),n.next_out=l,n.avail_out=r-l,l&&s1.arraySet(n.output,n.output,a,l,0),this.onData(c)):this.onData(s1.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(u=!0)}while((n.avail_in>0||n.avail_out===0)&&i!==Ur.Z_STREAM_END);return i===Ur.Z_STREAM_END&&(o=Ur.Z_FINISH),o===Ur.Z_FINISH?(i=Kg.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Ur.Z_OK):(o===Ur.Z_SYNC_FLUSH&&(this.onEnd(Ur.Z_OK),n.avail_out=0),!0)};Ip.prototype.onData=function(t){this.chunks.push(t)};Ip.prototype.onEnd=function(t){t===Ur.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function eF(t,e){var n=new Ip(e);if(n.push(t,!0),n.err)throw n.msg||YL[n.err];return n.result}function o_t(t,e){return e=e||{},e.raw=!0,eF(t,e)}wx.Inflate=Ip;wx.inflate=eF;wx.inflateRaw=o_t;wx.ungzip=eF;var a_t=ed.assign,l_t=bx,c_t=wx,u_t=B0e,U0e={};a_t(U0e,l_t,c_t,u_t);var d_t=U0e;const tF=yi(d_t),TK=(t,e)=>function(...n){const r=e.promiseModule;return new r((s,i)=>{e.multiArgs?n.push((...o)=>{e.errorFirst?o[0]?i(o):(o.shift(),s(o)):s(o)}):e.errorFirst?n.push((o,a)=>{o?i(o):s(a)}):n.push(s),t.apply(this,n)})};var h_t=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const n=typeof t;if(!(t!==null&&(n==="object"||n==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":n}\``);const r=i=>{const o=a=>typeof a=="string"?i===a:a.test(i);return e.include?e.include.some(o):!e.exclude.some(o)};let s;n==="function"?s=function(...i){return e.excludeMain?t(...i):TK(t,e).apply(this,i)}:s=Object.create(Object.getPrototypeOf(t));for(const i in t){const o=t[i];s[i]=typeof o=="function"&&r(i)?TK(o,e):o}return s};const KN=yi(h_t);var PK={};function NK(t){return Array.isArray(t)?t:[t]}const JL="",IK=" ",YN="\\",f_t=/^\s+$/,p_t=/(?:[^\\]|^)\\$/,m_t=/^\\!/,g_t=/^\\#/,b_t=/\r?\n/g,y_t=/^\.*\/|^\.+$/,JN="/";let H0e="node-ignore";typeof Symbol<"u"&&(H0e=Symbol.for("node-ignore"));const RK=H0e,v_t=(t,e,n)=>Object.defineProperty(t,e,{value:n}),w_t=/([0-z])-([0-z])/g,z0e=()=>!1,x_t=t=>t.replace(w_t,(e,n,r)=>n.charCodeAt(0)<=r.charCodeAt(0)?e:JL),__t=t=>{const{length:e}=t;return t.slice(0,e-e%2)},S_t=[[/^\uFEFF/,()=>JL],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,n)=>e+(n.indexOf("\\")===0?IK:JL)],[/(\\+?)\s/g,(t,e)=>{const{length:n}=e;return e.slice(0,n-n%2)+IK}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,n)=>e+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,n)=>{const r=n.replace(/\\\*/g,"[^\\/]*");return e+r}],[/\\\\\\(?=[$.|*+(){^])/g,()=>YN],[/\\\\/g,()=>YN],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,n,r,s)=>e===YN?`\\[${n}${__t(r)}${s}`:s==="]"&&r.length%2===0?`[${x_t(n)}${r}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],OK=Object.create(null),E_t=(t,e)=>{let n=OK[t];return n||(n=S_t.reduce((r,[s,i])=>r.replace(s,i.bind(t)),t),OK[t]=n),e?new RegExp(n,"i"):new RegExp(n)},nF=t=>typeof t=="string",k_t=t=>t&&nF(t)&&!f_t.test(t)&&!p_t.test(t)&&t.indexOf("#")!==0,C_t=t=>t.split(b_t);class A_t{constructor(e,n,r,s){this.origin=e,this.pattern=n,this.negative=r,this.regex=s}}const T_t=(t,e)=>{const n=t;let r=!1;t.indexOf("!")===0&&(r=!0,t=t.substr(1)),t=t.replace(m_t,"!").replace(g_t,"#");const s=E_t(t,e);return new A_t(n,t,r,s)},P_t=(t,e)=>{throw new e(t)},Ju=(t,e,n)=>nF(t)?t?Ju.isNotRelative(t)?n(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:n("path must not be empty",TypeError):n(`path must be a string, but got \`${e}\``,TypeError),V0e=t=>y_t.test(t);Ju.isNotRelative=V0e;Ju.convert=t=>t;class N_t{constructor({ignorecase:e=!0,ignoreCase:n=e,allowRelativePaths:r=!1}={}){v_t(this,RK,!0),this._rules=[],this._ignoreCase=n,this._allowRelativePaths=r,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[RK]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(k_t(e)){const n=T_t(e,this._ignoreCase);this._added=!0,this._rules.push(n)}}add(e){return this._added=!1,NK(nF(e)?C_t(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,n){let r=!1,s=!1;return this._rules.forEach(i=>{const{negative:o}=i;if(s===o&&r!==s||o&&!r&&!s&&!n)return;i.regex.test(e)&&(r=!o,s=o)}),{ignored:r,unignored:s}}_test(e,n,r,s){const i=e&&Ju.convert(e);return Ju(i,e,this._allowRelativePaths?z0e:P_t),this._t(i,n,r,s)}_t(e,n,r,s){if(e in n)return n[e];if(s||(s=e.split(JN)),s.pop(),!s.length)return n[e]=this._testOne(e,r);const i=this._t(s.join(JN)+JN,n,r,s);return n[e]=i.ignored?i:this._testOne(e,r)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return NK(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}}const HC=t=>new N_t(t),I_t=t=>Ju(t&&Ju.convert(t),t,z0e);HC.isPathValid=I_t;HC.default=HC;var R_t=HC;if(typeof Sn<"u"&&(PK&&PK.IGNORE_TEST_WIN32||Sn.platform==="win32")){const t=n=>/^\\\\\?\\/.test(n)||/["<>|\u0000-\u001F]+/u.test(n)?n:n.replace(/\\/g,"/");Ju.convert=t;const e=/^[a-z]:\//i;Ju.isNotRelative=n=>e.test(n)||V0e(n)}const O_t=yi(R_t);function L_t(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ql(t,e,n){return e=e instanceof RegExp?e:new RegExp(L_t(e),"g"),t.replace(e,n)}var D_t={clean:function(e){if(typeof e!="string")throw new Error("Expected a string, received: "+e);return e=ql(e,"./","/"),e=ql(e,"..","."),e=ql(e," ","-"),e=ql(e,/^[~^:?*\\\-]/g,""),e=ql(e,/[~^:?*\\]/g,"-"),e=ql(e,/[~^:?*\\\-]$/g,""),e=ql(e,"@{","-"),e=ql(e,/\.$/g,""),e=ql(e,/\/$/g,""),e=ql(e,/\.lock$/g,""),e}},M_t=D_t;const _c=yi(M_t);var j_t=function(t,e){var n=t,r=e,s=n.length,i=r.length,o=!1,a=null,l=s+1,c=[],u=[],d=[],h="",f=-1,p=0,m=1,g,b,v=function(){s>=i&&(g=n,b=s,n=r,r=g,s=i,i=b,o=!0,l=s+1)},w=function(k,x,I){return{x:k,y:x,k:I}},_=function(k,x){return{elem:k,t:x}},S=function(k,x,I){var R,C,T;for(x>I?R=c[k-1+l]:R=c[k+1+l],T=Math.max(x,I),C=T-k;C<s&&T<i&&n[C]===r[T];)++C,++T;return c[k+l]=u.length,u[u.length]=new w(C,T,R),T},E=function(k){var x,I,R;for(x=I=0,R=k.length-1;R>=0;--R)for(;x<k[R].x||I<k[R].y;)k[R].y-k[R].x>I-x?(o?d[d.length]=new _(r[I],f):d[d.length]=new _(r[I],m),++I):k[R].y-k[R].x<I-x?(o?d[d.length]=new _(n[x],m):d[d.length]=new _(n[x],f),++x):(d[d.length]=new _(n[x],p),h+=n[x],++x,++I)};return v(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return a},getlcs:function(){return h},getses:function(){return d},compose:function(){var k,x,I,R,C,T,O,P;for(k=i-s,x=s+i+3,I={},O=0;O<x;++O)I[O]=-1,c[O]=-1;R=-1;do{for(++R,P=-R;P<=k-1;++P)I[P+l]=S(P,I[P-1+l]+1,I[P+1+l]);for(P=k+R;P>=k+1;--P)I[P+l]=S(P,I[P-1+l]+1,I[P+1+l]);I[k+l]=S(k,I[k-1+l]+1,I[k+1+l])}while(I[k+l]!==i);for(a=k+2*R,C=c[k+l],T=[];C!==-1;)T[T.length]=new w(u[C].x,u[C].y,null),C=u[C].k;E(T)}}},F_t=j_t;function B_t(t,e){var n=new F_t(t,e);n.compose();for(var r=n.getses(),s,i,o=t.length-1,a=e.length-1,l=r.length-1;l>=0;--l)r[l].t===n.SES_COMMON?(i?(i.chain={file1index:o,file2index:a,chain:null},i=i.chain):(s={file1index:o,file2index:a,chain:null},i=s),o--,a--):r[l].t===n.SES_DELETE?o--:r[l].t===n.SES_ADD&&a--;var c={file1index:-1,file2index:-1,chain:null};return i?(i.chain=c,s):c}function LK(t,e){for(var n=[],r=t.length,s=e.length,i=B_t(t,e);i!==null;i=i.chain){var o=r-i.file1index-1,a=s-i.file2index-1;r=i.file1index,s=i.file2index,(o||a)&&n.push({file1:[r+1,o],file2:[s+1,a]})}return n.reverse(),n}function $_t(t,e,n){var r,s=LK(e,t),i=LK(e,n),o=[];function a(O,P){o.push([O.file1[0],P,O.file1[1],O.file2[0],O.file2[1]])}for(r=0;r<s.length;r++)a(s[r],0);for(r=0;r<i.length;r++)a(i[r],2);o.sort(function(O,P){return O[0]-P[0]});var l=[],c=0;function u(O){O>c&&(l.push([1,c,O-c]),c=O)}for(var d=0;d<o.length;d++){for(var h=d,f=o[d],p=f[0],m=p+f[2];d<o.length-1;){var g=o[d+1],b=g[0];if(b>m)break;m=Math.max(m,b+g[2]),d++}if(u(p),h==d)f[4]>0&&l.push([f[1],f[3],f[4]]);else{var v={0:[t.length,-1,e.length,-1],2:[n.length,-1,e.length,-1]};for(r=h;r<=d;r++){f=o[r];var w=f[1],_=v[w],S=f[0],E=S+f[2],k=f[3],x=k+f[4];_[0]=Math.min(k,_[0]),_[1]=Math.max(x,_[1]),_[2]=Math.min(S,_[2]),_[3]=Math.max(E,_[3])}var I=v[0][0]+(p-v[0][2]),R=v[0][1]+(m-v[0][3]),C=v[2][0]+(p-v[2][2]),T=v[2][1]+(m-v[2][3]);l.push([-1,I,R-I,p,m-p,C,T-C])}c=m}return u(e.length),l}function U_t(t,e,n){var r=[],s=[t,e,n],i=$_t(t,e,n),o=[];function a(){o.length&&r.push({ok:o}),o=[]}function l(f){for(var p=0;p<f.length;p++)o.push(f[p])}function c(f){if(f[2]!=f[6])return!0;for(var p=f[1],m=f[5],g=0;g<f[2];g++)if(t[g+p]!=n[g+m])return!0;return!1}for(var u=0;u<i.length;u++){var d=i[u],h=d[0];h==-1?c(d)?(a(),r.push({conflict:{a:t.slice(d[1],d[1]+d[2]),aIndex:d[1],o:e.slice(d[3],d[3]+d[4]),oIndex:d[3],b:n.slice(d[5],d[5]+d[6]),bIndex:d[5]}})):l(s[0].slice(d[1],d[1]+d[2])):l(s[h].slice(d[1],d[1]+d[2]))}return a(),r}var H_t=U_t;const z_t=yi(H_t);class Rn extends Error{constructor(e){super(e),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(e){const n=new Rn(e.message);return n.code=e.code,n.data=e.data,n.caller=e.caller,n.stack=e.stack,n}get isIsomorphicGitError(){return!0}}class xx extends Rn{constructor(e){super(`Modifying the index is not possible because you have unmerged files: ${e.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=xx.code,this.data={filepaths:e}}}xx.code="UnmergedPathsError";class nn extends Rn{constructor(e){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${e}`),this.code=this.name=nn.code,this.data={message:e}}}nn.code="InternalError";class _b extends Rn{constructor(e){super(`The filepath "${e}" contains unsafe character sequences`),this.code=this.name=_b.code,this.data={filepath:e}}}_b.code="UnsafeFilepathError";class gc{constructor(e){this.buffer=e,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(e){this._start=e}slice(e){const n=this.buffer.slice(this._start,this._start+e);return this._start+=e,n}toString(e,n){const r=this.buffer.toString(e,this._start,this._start+n);return this._start+=n,r}write(e,n,r){const s=this.buffer.write(e,this._start,n,r);return this._start+=n,s}copy(e,n,r){const s=e.copy(this.buffer,this._start,n,r);return this._start+=s,s}readUInt8(){const e=this.buffer.readUInt8(this._start);return this._start+=1,e}writeUInt8(e){const n=this.buffer.writeUInt8(e,this._start);return this._start+=1,n}readUInt16BE(){const e=this.buffer.readUInt16BE(this._start);return this._start+=2,e}writeUInt16BE(e){const n=this.buffer.writeUInt16BE(e,this._start);return this._start+=2,n}readUInt32BE(){const e=this.buffer.readUInt32BE(this._start);return this._start+=4,e}writeUInt32BE(e){const n=this.buffer.writeUInt32BE(e,this._start);return this._start+=4,n}}function qT(t,e){return-(t<e)||+(t>e)}function W0e(t,e){return qT(t.path,e.path)}function G0e(t){let e=t>0?t>>12:0;e!==4&&e!==8&&e!==10&&e!==14&&(e=8);let n=t&511;return n&73?n=493:n=420,e!==8&&(n=0),(e<<12)+n}const Kl=2**32;function DK(t,e,n,r){if(t!==void 0&&e!==void 0)return[t,e];n===void 0&&(n=r.valueOf());const s=Math.floor(n/1e3),i=(n-s*1e3)*1e6;return[s,i]}function D0(t){const[e,n]=DK(t.ctimeSeconds,t.ctimeNanoseconds,t.ctimeMs,t.ctime),[r,s]=DK(t.mtimeSeconds,t.mtimeNanoseconds,t.mtimeMs,t.mtime);return{ctimeSeconds:e%Kl,ctimeNanoseconds:n%Kl,mtimeSeconds:r%Kl,mtimeNanoseconds:s%Kl,dev:t.dev%Kl,ino:t.ino%Kl,mode:G0e(t.mode%Kl),uid:t.uid%Kl,gid:t.gid%Kl,size:t.size>-1?t.size%Kl:0}}function V_t(t){let e="";for(const n of new Uint8Array(t))n<16&&(e+="0"),e+=n.toString(16);return e}let XN=null;async function Xu(t){return XN===null&&(XN=await G_t()),XN?q0e(t):W_t(t)}function W_t(t){return new Qge().update(t).digest("hex")}async function q0e(t){const e=await crypto.subtle.digest("SHA-1",t);return V_t(e)}async function G_t(){try{if(await q0e(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function q_t(t){return{assumeValid:!!(t&32768),extended:!!(t&16384),stage:(t&12288)>>12,nameLength:t&4095}}function K_t(t){const e=t.flags;return e.extended=!1,e.nameLength=Math.min(_t.from(t.path).length,4095),(e.assumeValid?32768:0)+(e.extended?16384:0)+((e.stage&3)<<12)+(e.nameLength&4095)}class Ef{constructor(e,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=e||new Map}_addEntry(e){if(e.flags.stage===0)e.stages=[e],this._entries.set(e.path,e),this._unmergedPaths.delete(e.path);else{let n=this._entries.get(e.path);n||(this._entries.set(e.path,e),n=e),n.stages[e.flags.stage]=e,this._unmergedPaths.add(e.path)}}static async from(e){if(_t.isBuffer(e))return Ef.fromBuffer(e);if(e===null)return new Ef(null);throw new nn("invalid type passed to GitIndex.from")}static async fromBuffer(e){if(e.length===0)throw new nn("Index file is empty (.git/index)");const n=new Ef,r=new gc(e),s=r.toString("utf8",4);if(s!=="DIRC")throw new nn(`Invalid dircache magic file number: ${s}`);const i=await Xu(e.slice(0,-20)),o=e.slice(-20).toString("hex");if(o!==i)throw new nn(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const a=r.readUInt32BE();if(a!==2)throw new nn(`Unsupported dircache version: ${a}`);const l=r.readUInt32BE();let c=0;for(;!r.eof()&&c<l;){const u={};u.ctimeSeconds=r.readUInt32BE(),u.ctimeNanoseconds=r.readUInt32BE(),u.mtimeSeconds=r.readUInt32BE(),u.mtimeNanoseconds=r.readUInt32BE(),u.dev=r.readUInt32BE(),u.ino=r.readUInt32BE(),u.mode=r.readUInt32BE(),u.uid=r.readUInt32BE(),u.gid=r.readUInt32BE(),u.size=r.readUInt32BE(),u.oid=r.slice(20).toString("hex");const d=r.readUInt16BE();u.flags=q_t(d);const h=e.indexOf(0,r.tell()+1)-r.tell();if(h<1)throw new nn(`Got a path length of: ${h}`);if(u.path=r.toString("utf8",h),u.path.includes("..\\")||u.path.includes("../"))throw new _b(u.path);let f=8-(r.tell()-12)%8;for(f===0&&(f=8);f--;){const p=r.readUInt8();if(p!==0)throw new nn(`Expected 1-8 null characters but got '${p}' after ${u.path}`);if(r.eof())throw new nn("Unexpected end of file")}u.stages=[],n._addEntry(u),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(W0e)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(e=>e.stages.length>1?e.stages.filter(n=>n):e)}*[Symbol.iterator](){for(const e of this.entries)yield e}insert({filepath:e,stats:n,oid:r,stage:s=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=D0(n);const i=_t.from(e),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:e,oid:r,flags:{assumeValid:!1,extended:!1,stage:s,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:e}){if(this._entries.has(e))this._entries.delete(e);else for(const n of this._entries.keys())n.startsWith(e+"/")&&this._entries.delete(n);this._unmergedPaths.has(e)&&this._unmergedPaths.delete(e),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:e}){return this._entries.has(e)}render(){return this.entries.map(e=>`${e.mode.toString(8)} ${e.oid}    ${e.path}`).join(`
`)}static async _entryToBuffer(e){const n=_t.from(e.path),r=Math.ceil((62+n.length+1)/8)*8,s=_t.alloc(r),i=new gc(s),o=D0(e);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(e.oid,20,"hex"),i.writeUInt16BE(K_t(e)),i.write(e.path,n.length,"utf8"),s}async toObject(){const e=_t.alloc(12),n=new gc(e);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const a of this.entries)if(r.push(Ef._entryToBuffer(a)),a.stages.length>1)for(const l of a.stages)l&&l!==a&&r.push(Ef._entryToBuffer(l));r=await Promise.all(r);const s=_t.concat(r),i=_t.concat([e,s]),o=await Xu(i);return _t.concat([i,_t.from(o,"hex")])}}function zC(t,e,n=!0,r=!0){const s=D0(t),i=D0(e);return n&&s.mode!==i.mode||s.mtimeSeconds!==i.mtimeSeconds||s.ctimeSeconds!==i.ctimeSeconds||s.uid!==i.uid||s.gid!==i.gid||r&&s.ino!==i.ino||s.size!==i.size}let ZN=null;const qm=Symbol("IndexCache");function Y_t(){return{map:new Map,stats:new Map}}async function J_t(t,e,n){const r=await t.lstat(e),s=await t.read(e),i=await Ef.from(s);n.map.set(e,i),n.stats.set(e,r)}async function X_t(t,e,n){const r=n.stats.get(e);if(r===void 0)return!0;const s=await t.lstat(e);return r===null||s===null?!1:zC(r,s)}class Os{static async acquire({fs:e,gitdir:n,cache:r,allowUnmerged:s=!0},i){r[qm]||(r[qm]=Y_t());const o=`${n}/index`;ZN===null&&(ZN=new Sw({maxPending:1/0}));let a,l=[];return await ZN.acquire(o,async()=>{await X_t(e,o,r[qm])&&await J_t(e,o,r[qm]);const c=r[qm].map.get(o);if(l=c.unmergedPaths,l.length&&!s)throw new xx(l);if(a=await i(c),c._dirty){const u=await c.toObject();await e.write(o,u),r[qm].stats.set(o,await e.lstat(o)),c._dirty=!1}}),a}}function VC(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e>-1&&(t=t.slice(e+1)),t}function M0(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e===-1?".":e===0?"/":t.slice(0,e)}function K0e(t){const e=new Map,n=function(s){if(!e.has(s)){const i={type:"tree",fullpath:s,basename:VC(s),metadata:{},children:[]};e.set(s,i),i.parent=n(M0(s)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return e.get(s)},r=function(s,i){if(!e.has(s)){const o={type:"blob",fullpath:s,basename:VC(s),metadata:i,parent:n(M0(s)),children:[]};o.parent&&o.parent.children.push(o),e.set(s,o)}return e.get(s)};n(".");for(const s of t)r(s.path,s);return e}function Z_t(t){switch(t){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new nn(`Unexpected GitTree entry mode: ${t.toString(8)}`)}class Q_t{constructor({fs:e,gitdir:n,cache:r}){this.treePromise=Os.acquire({fs:e,gitdir:n,cache:r},async function(i){return K0e(i.entries)});const s=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(e){const n=e._fullpath,s=(await this.treePromise).get(n);if(!s||s.type==="blob")return null;if(s.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=s.children.map(o=>o.fullpath);return i.sort(qT),i}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const r=(await this.treePromise).get(e._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);const s=r.type==="tree"?{}:D0(r.metadata);e._type=r.type==="tree"?"tree":Z_t(s.mode),e._mode=s.mode,r.type==="tree"?e._stat=void 0:e._stat=s}return e._stat}async content(e){}async oid(e){if(e._oid===!1){const r=(await this.treePromise).get(e._fullpath);e._oid=r.metadata.oid}return e._oid}}const KT=Symbol("GitWalkSymbol");function Sb(){const t=Object.create(null);return Object.defineProperty(t,KT,{value:function({fs:e,gitdir:n,cache:r}){return new Q_t({fs:e,gitdir:n,cache:r})}}),Object.freeze(t),t}class Qn extends Rn{constructor(e){super(`Could not find ${e}.`),this.code=this.name=Qn.code,this.data={what:e}}}Qn.code="NotFoundError";class Hi extends Rn{constructor(e,n,r,s){super(`Object ${e} ${s?`at ${s}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Hi.code,this.data={oid:e,actual:n,expected:r,filepath:s}}}Hi.code="ObjectTypeError";class Eh extends Rn{constructor(e){super(`Expected a 40-char hex object id but saw "${e}".`),this.code=this.name=Eh.code,this.data={value:e}}}Eh.code="InvalidOidError";class _x extends Rn{constructor(e){super(`Could not find a fetch refspec for remote "${e}". Make sure the config file has an entry like the following:
[remote "${e}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=_x.code,this.data={remote:e}}}_x.code="NoRefspecError";class WC{constructor(e){if(this.refs=new Map,this.parsedConfig=[],e){let n=null;this.parsedConfig=e.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const s=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,s);return n=r.slice(s+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(e){return new WC(e)}delete(e){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==e),this.refs.delete(e)}toString(){return this.parsedConfig.map(({line:e})=>e).join(`
`)+`
`}}class GC{constructor({remotePath:e,localPath:n,force:r,matchPrefix:s}){Object.assign(this,{remotePath:e,localPath:n,force:r,matchPrefix:s})}static from(e){const[n,r,s,i,o]=e.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),a=n==="+",l=s==="*";if(l!==(o==="*"))throw new nn("Invalid refspec");return new GC({remotePath:r,localPath:i,force:a,matchPrefix:l})}translate(e){if(this.matchPrefix){if(e.startsWith(this.remotePath))return this.localPath+e.replace(this.remotePath,"")}else if(e===this.remotePath)return this.localPath;return null}reverseTranslate(e){if(this.matchPrefix){if(e.startsWith(this.localPath))return this.remotePath+e.replace(this.localPath,"")}else if(e===this.localPath)return this.remotePath;return null}}class rF{constructor(e=[]){this.rules=e}static from(e){const n=[];for(const r of e)n.push(GC.from(r));return new rF(n)}add(e){const n=GC.from(e);this.rules.push(n)}translate(e){const n=[];for(const r of this.rules)for(const s of e){const i=r.translate(s);i&&n.push([s,i])}return n}translateOne(e){let n=null;for(const r of this.rules){const s=r.translate(e);s&&(n=s)}return n}localNamespaces(){return this.rules.filter(e=>e.matchPrefix).map(e=>e.localPath.replace(/\/$/,""))}}function e2t(t,e){const n=t.replace(/\^\{\}$/,""),r=e.replace(/\^\{\}$/,""),s=-(n<r)||+(n>r);return s===0?t.endsWith("^{}")?1:-1:s}const t2t=t=>{t=t.toLowerCase();let e=parseInt(t);return t.endsWith("k")&&(e*=1024),t.endsWith("m")&&(e*=1024*1024),t.endsWith("g")&&(e*=1024*1024*1024),e},$y=t=>{if(t=t.trim().toLowerCase(),t==="true"||t==="yes"||t==="on")return!0;if(t==="false"||t==="no"||t==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${t}`)},MK={core:{filemode:$y,bare:$y,logallrefupdates:$y,symlinks:$y,ignorecase:$y,bigFileThreshold:t2t}},n2t=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,r2t=/^[A-Za-z0-9-.]+$/,s2t=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,i2t=/^[A-Za-z][A-Za-z-]*$/,o2t=/^(.*?)( *[#;].*)$/,a2t=t=>{const e=n2t.exec(t);if(e!=null){const[n,r]=e.slice(1);return[n,r]}return null},l2t=t=>{const e=s2t.exec(t);if(e!=null){const[n,r="true"]=e.slice(1),s=c2t(r),i=u2t(s);return[n,i]}return null},c2t=t=>{const e=o2t.exec(t);if(e==null)return t;const[n,r]=e.slice(1);return jK(n)&&jK(r)?`${n}${r}`:n},jK=t=>(t.match(/(?:^|[^\\])"/g)||[]).length%2!==0,u2t=t=>t.split("").reduce((e,n,r,s)=>{const i=n==='"'&&s[r-1]!=="\\",o=n==="\\"&&s[r+1]==='"';return i||o?e:e+n},""),FK=t=>t!=null?t.toLowerCase():null,XL=(t,e,n)=>[FK(t),e,FK(n)].filter(r=>r!=null).join("."),BK=t=>{const e=t.split("."),n=e.shift(),r=e.pop(),s=e.length?e.join("."):void 0;return{section:n,subsection:s,name:r,path:XL(n,s,r),sectionPath:XL(n,s,null)}},d2t=(t,e)=>t.reduce((n,r,s)=>e(r)?s:n,-1);class sF{constructor(e){let n=null,r=null;this.parsedConfig=e?e.split(`
`).map(s=>{let i=null,o=null;const a=s.trim(),l=a2t(a),c=l!=null;if(c)[n,r]=l;else{const d=l2t(a);d!=null&&([i,o]=d)}const u=XL(n,r,i);return{line:s,isSection:c,section:n,subsection:r,name:i,value:o,path:u}}):[]}static from(e){return new sF(e)}async get(e,n=!1){const r=BK(e).path,s=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:a})=>{const l=MK[i]&&MK[i][o];return l?l(a):a});return n?s:s.pop()}async getall(e){return this.get(e,!0)}async getSubsections(e){return this.parsedConfig.filter(n=>n.section===e&&n.isSection).map(n=>n.subsection)}async deleteSection(e,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===e&&r.subsection===n))}async append(e,n){return this.set(e,n,!0)}async set(e,n,r=!1){const{section:s,subsection:i,name:o,path:a,sectionPath:l}=BK(e),c=d2t(this.parsedConfig,u=>u.path===a);if(n==null)c!==-1&&this.parsedConfig.splice(c,1);else if(c!==-1){const u=this.parsedConfig[c],d=Object.assign({},u,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(c+1,0,d):this.parsedConfig[c]=d}else{const u=this.parsedConfig.findIndex(h=>h.path===l),d={section:s,subsection:i,name:o,value:n,modified:!0,path:a};if(r2t.test(s)&&i2t.test(o))if(u>=0)this.parsedConfig.splice(u+1,0,d);else{const h={section:s,subsection:i,modified:!0,path:l};this.parsedConfig.push(h,d)}}}toString(){return this.parsedConfig.map(({line:e,section:n,subsection:r,name:s,value:i,modified:o=!1})=>o?s!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${s} = "${i}"`:`	${s} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:e).join(`
`)}}class Yr{static async get({fs:e,gitdir:n}){const r=await e.read(`${n}/config`,{encoding:"utf8"});return sF.from(r)}static async save({fs:e,gitdir:n,config:r}){await e.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const _S=t=>[`${t}`,`refs/${t}`,`refs/tags/${t}`,`refs/heads/${t}`,`refs/remotes/${t}`,`refs/remotes/${t}/HEAD`],h2t=["config","description","index","shallow","commondir"];let QN;async function xd(t,e){return QN===void 0&&(QN=new Sw),QN.acquire(t,e)}class mt{static async updateRemoteRefs({fs:e,gitdir:n,remote:r,refs:s,symrefs:i,tags:o,refspecs:a=void 0,prune:l=!1,pruneTags:c=!1}){for(const g of s.values())if(!g.match(/[0-9a-f]{40}/))throw new Eh(g);const u=await Yr.get({fs:e,gitdir:n});if(!a){if(a=await u.getall(`remote.${r}.fetch`),a.length===0)throw new _x(r);a.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const d=rF.from(a),h=new Map;if(c){const g=await mt.listRefs({fs:e,gitdir:n,filepath:"refs/tags"});await mt.deleteRefs({fs:e,gitdir:n,refs:g.map(b=>`refs/tags/${b}`)})}if(o){for(const g of s.keys())if(g.startsWith("refs/tags")&&!g.endsWith("^{}")&&!await mt.exists({fs:e,gitdir:n,ref:g})){const b=s.get(g);h.set(g,b)}}const f=d.translate([...s.keys()]);for(const[g,b]of f){const v=s.get(g);h.set(b,v)}const p=d.translate([...i.keys()]);for(const[g,b]of p){const v=i.get(g),w=d.translateOne(v);w&&h.set(b,`ref: ${w}`)}const m=[];if(l){for(const g of d.localNamespaces()){const b=(await mt.listRefs({fs:e,gitdir:n,filepath:g})).map(v=>`${g}/${v}`);for(const v of b)h.has(v)||m.push(v)}m.length>0&&await mt.deleteRefs({fs:e,gitdir:n,refs:m})}for(const[g,b]of h)await xd(g,async()=>e.write(it.join(n,g),`${b.trim()}
`,"utf8"));return{pruned:m}}static async writeRef({fs:e,gitdir:n,ref:r,value:s}){if(!s.match(/[0-9a-f]{40}/))throw new Eh(s);await xd(r,async()=>e.write(it.join(n,r),`${s.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:e,gitdir:n,ref:r,value:s}){await xd(r,async()=>e.write(it.join(n,r),`ref: ${s.trim()}
`,"utf8"))}static async deleteRef({fs:e,gitdir:n,ref:r}){return mt.deleteRefs({fs:e,gitdir:n,refs:[r]})}static async deleteRefs({fs:e,gitdir:n,refs:r}){await Promise.all(r.map(a=>e.rm(it.join(n,a))));let s=await xd("packed-refs",async()=>e.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=WC.from(s),o=i.refs.size;for(const a of r)i.refs.has(a)&&i.delete(a);i.refs.size<o&&(s=i.toString(),await xd("packed-refs",async()=>e.write(`${n}/packed-refs`,s,{encoding:"utf8"})))}static async resolve({fs:e,gitdir:n,ref:r,depth:s=void 0}){if(s!==void 0&&(s--,s===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),mt.resolve({fs:e,gitdir:n,ref:r,depth:s});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await mt.packedRefs({fs:e,gitdir:n}),o=_S(r).filter(a=>!h2t.includes(a));for(const a of o){const l=await xd(a,async()=>await e.read(`${n}/${a}`,{encoding:"utf8"})||i.get(a));if(l)return mt.resolve({fs:e,gitdir:n,ref:l.trim(),depth:s})}throw new Qn(r)}static async exists({fs:e,gitdir:n,ref:r}){try{return await mt.expand({fs:e,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:e,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const s=await mt.packedRefs({fs:e,gitdir:n}),i=_S(r);for(const o of i)if(await xd(o,async()=>e.exists(`${n}/${o}`))||s.has(o))return o;throw new Qn(r)}static async expandAgainstMap({ref:e,map:n}){const r=_S(e);for(const s of r)if(await n.has(s))return s;throw new Qn(e)}static resolveAgainstMap({ref:e,fullref:n=e,depth:r=void 0,map:s}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:e};if(e.startsWith("ref: "))return e=e.slice(5),mt.resolveAgainstMap({ref:e,fullref:n,depth:r,map:s});if(e.length===40&&/[0-9a-f]{40}/.test(e))return{fullref:n,oid:e};const i=_S(e);for(const o of i){const a=s.get(o);if(a)return mt.resolveAgainstMap({ref:a.trim(),fullref:o,depth:r,map:s})}throw new Qn(e)}static async packedRefs({fs:e,gitdir:n}){const r=await xd("packed-refs",async()=>e.read(`${n}/packed-refs`,{encoding:"utf8"}));return WC.from(r).refs}static async listRefs({fs:e,gitdir:n,filepath:r}){const s=mt.packedRefs({fs:e,gitdir:n});let i=null;try{i=await e.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await s).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(e2t),i}static async listBranches({fs:e,gitdir:n,remote:r}){return r?mt.listRefs({fs:e,gitdir:n,filepath:`refs/remotes/${r}`}):mt.listRefs({fs:e,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:e,gitdir:n}){return(await mt.listRefs({fs:e,gitdir:n,filepath:"refs/tags"})).filter(s=>!s.endsWith("^{}"))}}function f2t(t,e){return qT($K(t),$K(e))}function $K(t){return t.mode==="040000"?t.path+"/":t.path}function Y0e(t){switch(t){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new nn(`Unexpected GitTree entry mode: ${t}`)}function p2t(t){const e=[];let n=0;for(;n<t.length;){const r=t.indexOf(32,n);if(r===-1)throw new nn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const s=t.indexOf(0,n);if(s===-1)throw new nn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=t.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=Y0e(i),a=t.slice(r+1,s).toString("utf8");if(a.includes("\\")||a.includes("/"))throw new _b(a);const l=t.slice(s+1,s+21).toString("hex");n=s+21,e.push({mode:i,path:a,oid:l,type:o})}return e}function m2t(t){if(typeof t=="number"&&(t=t.toString(8)),t.match(/^0?4.*/))return"040000";if(t.match(/^1006.*/))return"100644";if(t.match(/^1007.*/))return"100755";if(t.match(/^120.*/))return"120000";if(t.match(/^160.*/))return"160000";throw new nn(`Could not understand file mode: ${t}`)}function g2t(t){return!t.oid&&t.sha&&(t.oid=t.sha),t.mode=m2t(t.mode),t.type||(t.type=Y0e(t.mode)),t}class fo{constructor(e){if(_t.isBuffer(e))this._entries=p2t(e);else if(Array.isArray(e))this._entries=e.map(g2t);else throw new nn("invalid type passed to GitTree constructor");this._entries.sort(W0e)}static from(e){return new fo(e)}render(){return this._entries.map(e=>`${e.mode} ${e.type} ${e.oid}    ${e.path}`).join(`
`)}toObject(){const e=[...this._entries];return e.sort(f2t),_t.concat(e.map(n=>{const r=_t.from(n.mode.replace(/^0/,"")),s=_t.from(" "),i=_t.from(n.path,"utf8"),o=_t.from([0]),a=_t.from(n.oid,"hex");return _t.concat([r,s,i,o,a])}))}entries(){return this._entries}*[Symbol.iterator](){for(const e of this._entries)yield e}}class Eb{static wrap({type:e,object:n}){return _t.concat([_t.from(`${e} ${n.byteLength.toString()}\0`),_t.from(n)])}static unwrap(e){const n=e.indexOf(32),r=e.indexOf(0),s=e.slice(0,n).toString("utf8"),i=e.slice(n+1,r).toString("utf8"),o=e.length-(r+1);if(parseInt(i)!==o)throw new nn(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:s,object:_t.from(e.slice(r+1))}}}async function J0e({fs:t,gitdir:e,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,s=await t.read(`${e}/${r}`);return s?{object:s,format:"deflated",source:r}:null}function b2t(t,e){const n=new gc(t),r=UK(n);if(r!==e.byteLength)throw new nn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${e.length} bytes`);const s=UK(n);let i;const o=zK(n,e);if(o.byteLength===s)i=o;else{i=_t.alloc(s);const a=new gc(i);for(a.copy(o);!n.eof();)a.copy(zK(n,e));const l=a.tell();if(s!==l)throw new nn(`applyDelta expected target buffer to be ${s} bytes but the resulting buffer was ${l} bytes`)}return i}function UK(t){let e=0,n=0,r=null;do r=t.readUInt8(),e|=(r&127)<<n,n+=7;while(r&128);return e}function HK(t,e,n){let r=0,s=0;for(;n--;)e&1&&(r|=t.readUInt8()<<s),e>>=1,s+=8;return r}function zK(t,e){const n=t.readUInt8(),r=128,s=15,i=112;if(n&r){const o=HK(t,n&s,4);let a=HK(t,(n&i)>>4,3);return a===0&&(a=65536),e.slice(o,o+a)}else return t.slice(n)}function y2t(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function X0e(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:y2t(t)}class Z0e{constructor(e){if(typeof _t>"u")throw new Error("Missing Buffer dependency");this.stream=X0e(e),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(e){if(!this.eof())return this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e),this.buffer.slice(this.undoCursor,this.cursor)}async skip(e){this.eof()||(this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:e,value:n}=await this.stream.next();return e&&(this._ended=!0,!n)?_t.alloc(0):(n&&(n=_t.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(e){this.undoCursor=this.cursor,this.cursor+=e,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(e){if(this._ended)return;const n=[this.buffer];for(;this.cursor+e>v2t(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=_t.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function v2t(t){return t.reduce((e,n)=>e+n.length,0)}async function w2t(t,e){const n=new Z0e(t);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new nn(`Invalid PACK header '${r}'`);let s=await n.read(4);if(s=s.readUInt32BE(0),s!==2)throw new nn(`Invalid packfile version: ${s}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:a,length:l,ofs:c,reference:u}=await x2t(n),d=new tF.Inflate;for(;!d.result;){const h=await n.chunk();if(!h)break;if(d.push(h,!1),d.err)throw new nn(`Pako error: ${d.msg}`);if(d.result){if(d.result.length!==l)throw new nn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(h.length-d.strm.avail_in);const f=n.tell();await e({data:d.result,type:a,num:i,offset:o,end:f,reference:u,ofs:c})}}}}async function x2t(t){let e=await t.byte();const n=e>>4&7;let r=e&15;if(e&128){let o=4;do e=await t.byte(),r|=(e&127)<<o,o+=7;while(e&128)}let s,i;if(n===6){let o=0;s=0;const a=[];do e=await t.byte(),s|=(e&127)<<o,o+=7,a.push(e);while(e&128);i=_t.from(a)}return n===7&&(i=await t.read(20)),{type:n,length:r,ofs:s,reference:i}}async function Q0e(t){return tF.inflate(t)}function _2t(t){const e=[];let n=0,r=0;do{n=t.readUInt8();const s=n&127;e.push(s),r=n&128}while(r);return e.reduce((s,i)=>s+1<<7|i,-1)}function S2t(t,e){let n=e,r=4,s=null;do s=t.readUInt8(),n|=(s&127)<<r,r+=7;while(s&128);return n}class j0{constructor(e){Object.assign(this,e),this.offsetCache={}}static async fromIdx({idx:e,getExternalRefDelta:n}){const r=new gc(e);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new nn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(e.byteLength>2048*1024*1024)throw new nn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),a=[];for(let u=0;u<o;u++){const d=r.slice(20).toString("hex");a[u]=d}r.seek(r.tell()+4*o);const l=new Map;for(let u=0;u<o;u++)l.set(a[u],r.readUInt32BE());const c=r.slice(20).toString("hex");return new j0({hashes:a,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:e,getExternalRefDelta:n,onProgress:r}){const s={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=e.slice(-20).toString("hex"),a=[],l={},c=new Map;let u=null,d=null;await w2t([e],async({data:g,type:b,reference:v,offset:w,num:_})=>{u===null&&(u=_);const S=Math.floor((u-_)*100/u);S!==d&&r&&await r({phase:"Receiving objects",loaded:u-_,total:u}),d=S,b=s[b],["commit","tree","blob","tag"].includes(b)?i[w]={type:b,offset:w}:b==="ofs-delta"?i[w]={type:b,offset:w}:b==="ref-delta"&&(i[w]={type:b,offset:w})});const h=Object.keys(i).map(Number);for(const[g,b]of h.entries()){const v=g+1===h.length?e.byteLength-20:h[g+1],w=i[b],_=vwt.buf(e.slice(b,v))>>>0;w.end=v,w.crc=_}const f=new j0({pack:Promise.resolve(e),packfileSha:o,crcs:l,hashes:a,offsets:c,getExternalRefDelta:n});d=null;let p=0;const m=[0,0,0,0,0,0,0,0,0,0,0,0];for(let g in i){g=Number(g);const b=Math.floor(p*100/u);b!==d&&r&&await r({phase:"Resolving deltas",loaded:p,total:u}),p++,d=b;const v=i[g];if(!v.oid)try{f.readDepth=0,f.externalReadDepth=0;const{type:w,object:_}=await f.readSlice({start:g});m[f.readDepth]+=1;const S=await Xu(Eb.wrap({type:w,object:_}));v.oid=S,a.push(S),c.set(S,g),l[S]=v.crc}catch{continue}}return a.sort(),f}async toBuffer(){const e=[],n=(c,u)=>{e.push(_t.from(c,u))};n("ff744f63","hex"),n("00000002","hex");const r=new gc(_t.alloc(256*4));for(let c=0;c<256;c++){let u=0;for(const d of this.hashes)parseInt(d.slice(0,2),16)<=c&&u++;r.writeUInt32BE(u)}e.push(r.buffer);for(const c of this.hashes)n(c,"hex");const s=new gc(_t.alloc(this.hashes.length*4));for(const c of this.hashes)s.writeUInt32BE(this.crcs[c]);e.push(s.buffer);const i=new gc(_t.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));e.push(i.buffer),n(this.packfileSha,"hex");const o=_t.concat(e),a=await Xu(o),l=_t.alloc(20);return l.write(a,"hex"),_t.concat([o,l])}async load({pack:e}){this.pack=e}async unload(){this.pack=null}async read({oid:e}){if(!this.offsets.get(e)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(e);throw new nn(`Could not read object ${e} from packfile`)}const n=this.offsets.get(e);return this.readSlice({start:n})}async readSlice({start:e}){if(this.offsetCache[e])return Object.assign({},this.offsetCache[e]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new nn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(e),s=new gc(r),i=s.readUInt8(),o=i&112;let a=n[o];if(a===void 0)throw new nn("Unrecognized type: 0b"+o.toString(2));const l=i&15;let c=l;i&128&&(c=S2t(s,l));let d=null,h=null;if(a==="ofs_delta"){const p=_2t(s),m=e-p;({object:d,type:a}=await this.readSlice({start:m}))}if(a==="ref_delta"){const p=s.slice(20).toString("hex");({object:d,type:a}=await this.read({oid:p}))}const f=r.slice(s.tell());if(h=_t.from(await Q0e(f)),h.byteLength!==c)throw new nn(`Packfile told us object would have length ${c} but it had length ${h.byteLength}`);return d&&(h=_t.from(b2t(h,d))),this.readDepth>3&&(this.offsetCache[e]={type:a,object:h}),{type:a,format:"content",object:h}}}const SS=Symbol("PackfileCache");async function E2t({fs:t,filename:e,getExternalRefDelta:n,emitter:r,emitterPrefix:s}){const i=await t.read(e);return j0.fromIdx({idx:i,getExternalRefDelta:n})}function iF({fs:t,cache:e,filename:n,getExternalRefDelta:r,emitter:s,emitterPrefix:i}){e[SS]||(e[SS]=new Map);let o=e[SS].get(n);return o||(o=E2t({fs:t,filename:n,getExternalRefDelta:r,emitter:s,emitterPrefix:i}),e[SS].set(n,o)),o}async function k2t({fs:t,cache:e,gitdir:n,oid:r,format:s="content",getExternalRefDelta:i}){let o=await t.readdir(it.join(n,"objects/pack"));o=o.filter(a=>a.endsWith(".idx"));for(const a of o){const l=`${n}/objects/pack/${a}`,c=await iF({fs:t,cache:e,filename:l,getExternalRefDelta:i});if(c.error)throw new nn(c.error);if(c.offsets.has(r)){if(!c.pack){const d=l.replace(/idx$/,"pack");c.pack=t.read(d)}const u=await c.read({oid:r,getExternalRefDelta:i});return u.format="content",u.source=`objects/pack/${a.replace(/idx$/,"pack")}`,u}}return null}async function kr({fs:t,cache:e,gitdir:n,oid:r,format:s="content"}){const i=u=>kr({fs:t,cache:e,gitdir:n,oid:u});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:_t.from("tree 0\0")}),o||(o=await J0e({fs:t,gitdir:n,oid:r})),!o){if(o=await k2t({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new Qn(r);return o}if(s==="deflated"||(o.format==="deflated"&&(o.object=_t.from(await Q0e(o.object)),o.format="wrapped"),s==="wrapped"))return o;const a=await Xu(o.object);if(a!==r)throw new nn(`SHA check failed! Expected ${r}, computed ${a}`);const{object:l,type:c}=Eb.unwrap(o.object);if(o.type=c,o.object=l,o.format="content",s==="content")return o;throw new nn(`invalid requested format "${s}"`)}class Al extends Rn{constructor(e,n,r=!0){super(`Failed to create ${e} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${e}.)`:""}`),this.code=this.name=Al.code,this.data={noun:e,where:n,canForce:r}}}Al.code="AlreadyExistsError";class Sx extends Rn{constructor(e,n,r){super(`Found multiple ${e} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=Sx.code,this.data={nouns:e,short:n,matches:r}}}Sx.code="AmbiguousError";class Ex extends Rn{constructor(e){super(`Your local changes to the following files would be overwritten by checkout: ${e.join(", ")}`),this.code=this.name=Ex.code,this.data={filepaths:e}}}Ex.code="CheckoutConflictError";class kx extends Rn{constructor(e,n){super(`Failed to checkout "${e}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=kx.code,this.data={ref:e,oid:n}}}kx.code="CommitNotFetchedError";class Cx extends Rn{constructor(){super("Empty response from git server."),this.code=this.name=Cx.code,this.data={}}}Cx.code="EmptyServerResponseError";class Ax extends Rn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=Ax.code,this.data={}}}Ax.code="FastForwardError";class Tx extends Rn{constructor(e,n){super(`One or more branches were not updated: ${e}`),this.code=this.name=Tx.code,this.data={prettyDetails:e,result:n}}}Tx.code="GitPushError";class F0 extends Rn{constructor(e,n,r){super(`HTTP Error: ${e} ${n}`),this.code=this.name=F0.code,this.data={statusCode:e,statusMessage:n,response:r}}}F0.code="HttpError";class kh extends Rn{constructor(e){let n="invalid filepath";e==="leading-slash"||e==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':e==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=kh.code,this.data={reason:e}}}kh.code="InvalidFilepathError";class vl extends Rn{constructor(e,n){super(`"${e}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=vl.code,this.data={ref:e,suggestion:n}}}vl.code="InvalidRefNameError";class Px extends Rn{constructor(e){super(`Maximum search depth of ${e} exceeded.`),this.code=this.name=Px.code,this.data={depth:e}}}Px.code="MaxDepthError";class kb extends Rn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=kb.code,this.data={}}}kb.code="MergeNotSupportedError";class Cb extends Rn{constructor(e,n,r,s){super(`Automatic merge failed with one or more merge conflicts in the following files: ${e.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Cb.code,this.data={filepaths:e,bothModified:n,deleteByUs:r,deleteByTheirs:s}}}Cb.code="MergeConflictError";class bi extends Rn{constructor(e){super(`No name was provided for ${e} in the argument or in the .git/config file.`),this.code=this.name=bi.code,this.data={role:e}}}bi.code="MissingNameError";class ao extends Rn{constructor(e){super(`The function requires a "${e}" parameter but none was provided.`),this.code=this.name=ao.code,this.data={parameter:e}}}ao.code="MissingParameterError";class Nx extends Rn{constructor(e){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=Nx.code,this.data={errors:e},this.errors=e}}Nx.code="MultipleGitError";class em extends Rn{constructor(e,n){super(`Expected "${e}" but received "${n}".`),this.code=this.name=em.code,this.data={expected:e,actual:n}}}em.code="ParseError";class B0 extends Rn{constructor(e){let n="";e==="not-fast-forward"?n=" because it was not a simple fast-forward":e==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=B0.code,this.data={reason:e}}}B0.code="PushRejectedError";class Yd extends Rn{constructor(e,n){super(`Remote does not support the "${e}" so the "${n}" parameter cannot be used.`),this.code=this.name=Yd.code,this.data={capability:e,parameter:n}}}Yd.code="RemoteCapabilityError";class Ix extends Rn{constructor(e,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${e}`),this.code=this.name=Ix.code,this.data={preview:e,response:n}}}Ix.code="SmartHttpError";class Rx extends Rn{constructor(e,n,r){super(`Git remote "${e}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=Rx.code,this.data={url:e,transport:n,suggestion:r}}}Rx.code="UnknownTransportError";class Ox extends Rn{constructor(e){super(`Cannot parse remote URL: "${e}"`),this.code=this.name=Ox.code,this.data={url:e}}}Ox.code="UrlParseError";class Ab extends Rn{constructor(){super("The operation was canceled."),this.code=this.name=Ab.code,this.data={}}}Ab.code="UserCanceledError";class Lx extends Rn{constructor(e){super(`Could not merge index: Entry for '${e}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=Lx.code,this.data={filepath:e}}}Lx.code="IndexResetError";class Dx extends Rn{constructor(e){super(`"${e}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Dx.code,this.data={ref:e}}}Dx.code="NoCommitError";var C2t=Object.freeze({__proto__:null,AlreadyExistsError:Al,AmbiguousError:Sx,CheckoutConflictError:Ex,CommitNotFetchedError:kx,EmptyServerResponseError:Cx,FastForwardError:Ax,GitPushError:Tx,HttpError:F0,InternalError:nn,InvalidFilepathError:kh,InvalidOidError:Eh,InvalidRefNameError:vl,MaxDepthError:Px,MergeNotSupportedError:kb,MergeConflictError:Cb,MissingNameError:bi,MissingParameterError:ao,MultipleGitError:Nx,NoRefspecError:_x,NotFoundError:Qn,ObjectTypeError:Hi,ParseError:em,PushRejectedError:B0,RemoteCapabilityError:Yd,SmartHttpError:Ix,UnknownTransportError:Rx,UnsafeFilepathError:_b,UrlParseError:Ox,UserCanceledError:Ab,UnmergedPathsError:xx,IndexResetError:Lx,NoCommitError:Dx});function ZL({name:t,email:e,timestamp:n,timezoneOffset:r}){return r=A2t(r),`${t} <${e}> ${n} ${r}`}function A2t(t){const e=T2t(P2t(t));t=Math.abs(t);const n=Math.floor(t/60);t-=n*60;let r=String(n),s=String(t);return r.length<2&&(r="0"+r),s.length<2&&(s="0"+s),(e===-1?"-":"+")+r+s}function T2t(t){return Math.sign(t)||(Object.is(t,-0)?-1:1)}function P2t(t){return t===0?t:-t}function fu(t){return t=t.replace(/\r/g,""),t=t.replace(/^\n+/,""),t=t.replace(/\n+$/,"")+`
`,t}function qC(t){const[,e,n,r,s]=t.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:e,email:n,timestamp:Number(r),timezoneOffset:N2t(s)}}function N2t(t){let[,e,n,r]=t.match(/(\+|-)(\d\d)(\d\d)/);return r=(e==="+"?1:-1)*(Number(n)*60+Number(r)),I2t(r)}function I2t(t){return t===0?t:-t}class Mi{constructor(e){if(typeof e=="string")this._tag=e;else if(_t.isBuffer(e))this._tag=e.toString("utf8");else if(typeof e=="object")this._tag=Mi.render(e);else throw new nn("invalid type passed to GitAnnotatedTag constructor")}static from(e){return new Mi(e)}static render(e){return`object ${e.object}
type ${e.type}
tag ${e.tag}
tagger ${ZL(e.tagger)}

${e.message}
${e.gpgsig?e.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const e=this.withoutSignature();return e.slice(e.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const e=this.justHeaders().split(`
`),n=[];for(const s of e)s[0]===" "?n[n.length-1]+=`
`+s.slice(1):n.push(s);const r={};for(const s of n){const i=s.slice(0,s.indexOf(" ")),o=s.slice(s.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=qC(r.tagger)),r.committer&&(r.committer=qC(r.committer)),r}withoutSignature(){const e=fu(this._tag);return e.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?e:e.slice(0,e.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const e=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return fu(e)}payload(){return this.withoutSignature()+`
`}toObject(){return _t.from(this._tag,"utf8")}static async sign(e,n,r){const s=e.payload();let{signature:i}=await n({payload:s,secretKey:r});i=fu(i);const o=s+i;return Mi.from(o)}}function eI(t){return t.trim().split(`
`).map(e=>" "+e).join(`
`)+`
`}function R2t(t){return t.split(`
`).map(e=>e.replace(/^ /,"")).join(`
`)}class _r{constructor(e){if(typeof e=="string")this._commit=e;else if(_t.isBuffer(e))this._commit=e.toString("utf8");else if(typeof e=="object")this._commit=_r.render(e);else throw new nn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:e,signature:n}){const r=_r.justHeaders(e),s=_r.justMessage(e),i=fu(r+`
gpgsig`+eI(n)+`
`+s);return new _r(i)}static from(e){return new _r(e)}toObject(){return _t.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return _r.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(e){return fu(e.slice(e.indexOf(`

`)+2))}static justHeaders(e){return e.slice(0,e.indexOf(`

`))}parseHeaders(){const e=_r.justHeaders(this._commit).split(`
`),n=[];for(const s of e)s[0]===" "?n[n.length-1]+=`
`+s.slice(1):n.push(s);const r={parent:[]};for(const s of n){const i=s.slice(0,s.indexOf(" ")),o=s.slice(s.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=qC(r.author)),r.committer&&(r.committer=qC(r.committer)),r}static renderHeaders(e){let n="";if(e.tree?n+=`tree ${e.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,e.parent){if(e.parent.length===void 0)throw new nn("commit 'parent' property should be an array");for(const i of e.parent)n+=`parent ${i}
`}const r=e.author;n+=`author ${ZL(r)}
`;const s=e.committer||e.author;return n+=`committer ${ZL(s)}
`,e.gpgsig&&(n+="gpgsig"+eI(e.gpgsig)),n}static render(e){return _r.renderHeaders(e)+`
`+fu(e.message)}render(){return this._commit}withoutSignature(){const e=fu(this._commit);if(e.indexOf(`
gpgsig`)===-1)return e;const n=e.slice(0,e.indexOf(`
gpgsig`)),r=e.slice(e.indexOf(`-----END PGP SIGNATURE-----
`)+28);return fu(n+`
`+r)}isolateSignature(){const e=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return R2t(e)}static async sign(e,n,r){const s=e.withoutSignature(),i=_r.justMessage(e._commit);let{signature:o}=await n({payload:s,secretKey:r});o=fu(o);const l=_r.justHeaders(e._commit)+`
gpgsig`+eI(o)+`
`+i;return _r.from(l)}}async function $0({fs:t,cache:e,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:fo.from([]),oid:r};const{type:s,object:i}=await kr({fs:t,cache:e,gitdir:n,oid:r});if(s==="tag")return r=Mi.from(i).parse().object,$0({fs:t,cache:e,gitdir:n,oid:r});if(s==="commit")return r=_r.from(i).parse().tree,$0({fs:t,cache:e,gitdir:n,oid:r});if(s!=="tree")throw new Hi(r,s,"tree");return{tree:fo.from(i),oid:r}}class O2t{constructor({fs:e,gitdir:n,ref:r,cache:s}){this.fs=e,this.cache=s,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let a;try{a=await mt.resolve({fs:e,gitdir:n,ref:r})}catch(c){c instanceof Qn&&(a="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await $0({fs:e,cache:this.cache,gitdir:n,oid:a});return l.type="tree",l.mode="40000",o.set(".",l),o})();const i=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){const n=e._fullpath,{fs:r,cache:s,gitdir:i}=this,o=await this.mapPromise,a=o.get(n);if(!a)throw new Error(`No obj for ${n}`);const l=a.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(a)}`);if(a.type!=="tree")return null;const{type:c,object:u}=await kr({fs:r,cache:s,gitdir:i,oid:l});if(c!==a.type)throw new Hi(l,c,a.type);const d=fo.from(u);for(const h of d)o.set(it.join(n,h.path),h);return d.entries().map(h=>it.join(n,h.path))}async type(e){if(e._type===!1){const n=await this.mapPromise,{type:r}=n.get(e._fullpath);e._type=r}return e._type}async mode(e){if(e._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(e._fullpath);e._mode=G0e(parseInt(r,8))}return e._mode}async stat(e){}async content(e){if(e._content===!1){const n=await this.mapPromise,{fs:r,cache:s,gitdir:i}=this,a=n.get(e._fullpath).oid,{type:l,object:c}=await kr({fs:r,cache:s,gitdir:i,oid:a});l!=="blob"?e._content=void 0:e._content=new Uint8Array(c)}return e._content}async oid(e){if(e._oid===!1){const r=(await this.mapPromise).get(e._fullpath);e._oid=r.oid}return e._oid}}function Sa({ref:t="HEAD"}={}){const e=Object.create(null);return Object.defineProperty(e,KT,{value:function({fs:n,gitdir:r,cache:s}){return new O2t({fs:n,gitdir:r,ref:t,cache:s})}}),Object.freeze(e),e}class L2t{constructor({fs:e,dir:n,gitdir:r,cache:s}){this.fs=e,this.cache=s,this.dir=n,this.gitdir=r;const i=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){const n=e._fullpath,{fs:r,dir:s}=this,i=await r.readdir(it.join(s,n));return i===null?null:i.map(o=>it.join(n,o))}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const{fs:n,dir:r}=this;let s=await n.lstat(`${r}/${e._fullpath}`);if(!s)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);let i=s.isDirectory()?"tree":"blob";i==="blob"&&!s.isFile()&&!s.isSymbolicLink()&&(i="special"),e._type=i,s=D0(s),e._mode=s.mode,s.size===-1&&e._actualSize&&(s.size=e._actualSize),e._stat=s}return e._stat}async content(e){if(e._content===!1){const{fs:n,dir:r,gitdir:s}=this;if(await e.type()==="tree")e._content=void 0;else{const o=await(await Yr.get({fs:n,gitdir:s})).get("core.autocrlf"),a=await n.read(`${r}/${e._fullpath}`,{autocrlf:o});e._actualSize=a.length,e._stat&&e._stat.size===-1&&(e._stat.size=e._actualSize),e._content=new Uint8Array(a)}}return e._content}async oid(e){if(e._oid===!1){const{fs:n,gitdir:r,cache:s}=this;let i;await Os.acquire({fs:n,gitdir:r,cache:s},async function(o){const a=o.entriesMap.get(e._fullpath),l=await e.stat(),u=await(await Yr.get({fs:n,gitdir:r})).get("core.filemode"),d=typeof Sn<"u"?Sn.platform!=="win32":!0;!a||zC(l,a,u,d)?await e.content()===void 0?i=void 0:(i=await Xu(Eb.wrap({type:"blob",object:await e.content()})),a&&i===a.oid&&(!u||l.mode===a.mode)&&zC(l,a,u,d)&&o.insert({filepath:e._fullpath,stats:l,oid:i})):i=a.oid}),e._oid=i}return e._oid}}function Mx(){const t=Object.create(null);return Object.defineProperty(t,KT,{value:function({fs:e,dir:n,gitdir:r,cache:s}){return new L2t({fs:e,dir:n,gitdir:r,cache:s})}}),Object.freeze(t),t}function D2t(t,e){const n=e-t;return Array.from({length:n},(r,s)=>t+s)}const ebe=typeof Array.prototype.flat>"u"?t=>t.reduce((e,n)=>e.concat(n),[]):t=>t.flat();class M2t{constructor(){this.value=null}consider(e){e!=null&&(this.value===null?this.value=e:e<this.value&&(this.value=e))}reset(){this.value=null}}function*j2t(t){const e=new M2t;let n;const r=[],s=t.length;for(let i=0;i<s;i++)r[i]=t[i].next().value,r[i]!==void 0&&e.consider(r[i]);if(e.value!==null)for(;;){const i=[];n=e.value,e.reset();for(let o=0;o<s;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=t[o].next().value):i[o]=null,r[o]!==void 0&&e.consider(r[o]);if(yield i,e.value===null)return}}async function Ch({fs:t,cache:e,dir:n,gitdir:r,trees:s,map:i=async(l,c)=>c,reduce:o=async(l,c)=>{const u=ebe(c);return l!==void 0&&u.unshift(l),u},iterate:a=(l,c)=>Promise.all([...c].map(l))}){const l=s.map(f=>f[KT]({fs:t,dir:n,gitdir:r,cache:e})),c=new Array(l.length).fill("."),u=D2t(0,l.length),d=async f=>{u.map(g=>{f[g]=f[g]&&new l[g].ConstructEntry(f[g])});const m=(await Promise.all(u.map(g=>f[g]?l[g].readdir(f[g]):[]))).map(g=>g===null?[]:g).map(g=>g[Symbol.iterator]());return{entries:f,children:j2t(m)}},h=async f=>{const{entries:p,children:m}=await d(f),g=p.find(v=>v&&v._fullpath)._fullpath,b=await i(g,p);if(b!==null){let v=await a(h,m);return v=v.filter(w=>w!==void 0),o(b,v)}};return h(c)}async function QL(t,e){const n=await t.readdir(e);n==null?await t.rm(e):n.length?await Promise.all(n.map(r=>{const s=it.join(e,r);return t.lstat(s).then(i=>{if(i)return i.isDirectory()?QL(t,s):t.rm(s)})})).then(()=>t.rmdir(e)):await t.rmdir(e)}function F2t(t){return B2t(t)&&VK(t.then)&&VK(t.catch)}function B2t(t){return t&&typeof t=="object"}function VK(t){return typeof t=="function"}function WK(t){return F2t((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(t))}const GK=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function qK(t,e){if(WK(e))for(const n of GK)t[`_${n}`]=e[n].bind(e);else for(const n of GK)t[`_${n}`]=KN(e[n].bind(e));WK(e)?e.rm?t._rm=e.rm.bind(e):e.rmdir.length>1?t._rm=e.rmdir.bind(e):t._rm=QL.bind(null,t):e.rm?t._rm=KN(e.rm.bind(e)):e.rmdir.length>2?t._rm=KN(e.rmdir.bind(e)):t._rm=QL.bind(null,t)}class jt{constructor(e){if(typeof e._original_unwrapped_fs<"u")return e;const n=Object.getOwnPropertyDescriptor(e,"promises");n&&n.enumerable?qK(this,e.promises):qK(this,e),this._original_unwrapped_fs=e}async exists(e,n={}){try{return await this._stat(e),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(e,n={}){try{let r=await this._readFile(e,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=_t.from(r)),r}catch{return null}}async write(e,n,r={}){try{await this._writeFile(e,n,r);return}catch{await this.mkdir(M0(e)),await this._writeFile(e,n,r)}}async mkdir(e,n=!1){try{await this._mkdir(e);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const s=M0(e);if(s==="."||s==="/"||s===e)throw r;await this.mkdir(s),await this.mkdir(e,!0)}}}async rm(e){try{await this._unlink(e)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(e,n){try{n&&n.recursive?await this._rm(e,n):await this._rmdir(e)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(e){try{const n=await this._readdir(e);return n.sort(qT),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(e){const n=await this._readdir(e);return(await Promise.all(n.map(async s=>{const i=e+"/"+s;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((s,i)=>s.concat(i),[])}async lstat(e){try{return await this._lstat(e)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(e,n={encoding:"buffer"}){try{const r=await this._readlink(e,n);return _t.isBuffer(r)?r:_t.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(e,n){return this._symlink(n.toString("utf8"),e)}}function je(t,e){if(e===void 0)throw new ao(t)}async function KC(t,e){return!t&&!e?!1:t&&!e||!t&&e?!0:!(await t.type()==="tree"&&await e.type()==="tree"||await t.type()===await e.type()&&await t.mode()===await e.mode()&&await t.oid()===await e.oid())}async function $2t({fs:t,dir:e,gitdir:n=it.join(e,".git"),commit:r="HEAD",cache:s={}}){try{je("fs",t),je("dir",e),je("gitdir",n);const i=new jt(t),o=[Sa({ref:r}),Mx(),Sb()];let a=[];await Os.acquire({fs:i,gitdir:n,cache:s},async function(c){a=c.unmergedPaths});const l=await Ch({fs:i,cache:s,dir:e,gitdir:n,trees:o,map:async function(c,[u,d,h]){const f=!await KC(d,h),p=a.includes(c),m=!await KC(h,u);if(f||p)return u?{path:c,mode:await u.mode(),oid:await u.oid(),type:await u.type(),content:await u.content()}:void 0;if(m)return!1;throw new Lx(c)}});await Os.acquire({fs:i,gitdir:n,cache:s},async function(c){for(const u of l)if(u!==!1){if(!u){await i.rmdir(`${e}/${u.path}`,{recursive:!0}),c.delete({filepath:u.path});continue}if(u.type==="blob"){const d=new TextDecoder().decode(u.content);await i.write(`${e}/${u.path}`,d,{mode:u.mode}),c.insert({filepath:u.path,oid:u.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class Tb{static async isIgnored({fs:e,dir:n,gitdir:r=it.join(n,".git"),filepath:s}){if(VC(s)===".git")return!0;if(s===".")return!1;let i="";const o=it.join(r,"info","exclude");await e.exists(o)&&(i=await e.read(o,"utf8"));const a=[{gitignore:it.join(n,".gitignore"),filepath:s}],l=s.split("/").filter(Boolean);for(let u=1;u<l.length;u++){const d=l.slice(0,u).join("/"),h=l.slice(u).join("/");a.push({gitignore:it.join(n,d,".gitignore"),filepath:h})}let c=!1;for(const u of a){let d;try{d=await e.read(u.gitignore,"utf8")}catch(p){if(p.code==="NOENT")continue}const h=O_t().add(i);h.add(d);const f=M0(u.filepath);if(f!=="."&&h.ignores(f))return!0;c?c=!h.test(u.filepath).unignored:c=h.test(u.filepath).ignored}return c}}async function U2t({fs:t,gitdir:e,object:n,format:r,oid:s}){const i=`objects/${s.slice(0,2)}/${s.slice(2)}`,o=`${e}/${i}`;await t.exists(o)||await t.write(o,n)}let tI=null;async function tbe(t){return tI===null&&(tI=z2t()),tI?H2t(t):tF.deflate(t)}async function H2t(t){const e=new CompressionStream("deflate"),n=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(n).arrayBuffer())}function z2t(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function wo({fs:t,gitdir:e,type:n,object:r,format:s="content",oid:i=void 0,dryRun:o=!1}){return s!=="deflated"&&(s!=="wrapped"&&(r=Eb.wrap({type:n,object:r})),i=await Xu(r),r=_t.from(await tbe(r))),o||await U2t({fs:t,gitdir:e,object:r,format:"deflated",oid:i}),i}function nbe(t){let e;for(;~(e=t.indexOf(92));)t[e]=47;return t}async function V2t({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r,cache:s={},force:i=!1,parallel:o=!0}){try{je("fs",t),je("dir",e),je("gitdir",n),je("filepath",r);const a=new jt(t);await Os.acquire({fs:a,gitdir:n,cache:s},async l=>eD({dir:e,gitdir:n,fs:a,filepath:r,index:l,force:i,parallel:o}))}catch(a){throw a.caller="git.add",a}}async function eD({dir:t,gitdir:e,fs:n,filepath:r,index:s,force:i,parallel:o}){r=Array.isArray(r)?r:[r];const a=r.map(async d=>{if(!i&&await Tb.isIgnored({fs:n,dir:t,gitdir:e,filepath:d}))return;const h=await n.lstat(it.join(t,d));if(!h)throw new Qn(d);if(h.isDirectory()){const f=await n.readdir(it.join(t,d));if(o){const p=f.map(m=>eD({dir:t,gitdir:e,fs:n,filepath:[it.join(d,m)],index:s,force:i,parallel:o}));await Promise.all(p)}else for(const p of f)await eD({dir:t,gitdir:e,fs:n,filepath:[it.join(d,p)],index:s,force:i,parallel:o})}else{const p=await(await Yr.get({fs:n,gitdir:e})).get("core.autocrlf"),m=h.isSymbolicLink()?await n.readlink(it.join(t,d)).then(nbe):await n.read(it.join(t,d),{autocrlf:p});if(m===null)throw new Qn(d);const g=await wo({fs:n,gitdir:e,type:"blob",object:m});s.insert({filepath:d,stats:h,oid:g})}}),l=await Promise.allSettled(a),c=l.filter(d=>d.status==="rejected").map(d=>d.reason);if(c.length>1)throw new Nx(c);if(c.length===1)throw c[0];return l.filter(d=>d.status==="fulfilled"&&d.value).map(d=>d.value)}async function Pw({fs:t,gitdir:e,path:n}){return(await Yr.get({fs:t,gitdir:e})).get(n)}function rbe(t,...e){for(const n of e)if(n)for(const r of Object.keys(n)){const s=n[r];s!==void 0&&(t[r]=s)}return t}async function Ah({fs:t,gitdir:e,author:n,commit:r}){const s=Math.floor(Date.now()/1e3),i={name:await Pw({fs:t,gitdir:e,path:"user.name"}),email:await Pw({fs:t,gitdir:e,path:"user.email"})||"",timestamp:s,timezoneOffset:new Date(s*1e3).getTimezoneOffset()},o=rbe({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function U0({fs:t,gitdir:e,author:n,committer:r,commit:s}){const i=Math.floor(Date.now()/1e3),o={name:await Pw({fs:t,gitdir:e,path:"user.name"}),email:await Pw({fs:t,gitdir:e,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},a=rbe({},o,s?s.committer:void 0,n,r);if(a.name!==void 0)return a}async function sbe({fs:t,cache:e,gitdir:n,oid:r}){const{type:s,object:i}=await kr({fs:t,cache:e,gitdir:n,oid:r});if(s==="tag")return r=Mi.from(i).parse().object,sbe({fs:t,cache:e,gitdir:n,oid:r});if(s!=="commit")throw new Hi(r,s,"commit");return{commit:_r.from(i),oid:r}}async function H0({fs:t,cache:e,gitdir:n,oid:r}){const{commit:s,oid:i}=await sbe({fs:t,cache:e,gitdir:n,oid:r});return{oid:i,commit:s.parse(),payload:s.withoutSignature()}}async function YT({fs:t,cache:e,onSign:n,gitdir:r,message:s,author:i,committer:o,signingKey:a,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:d,parent:h,tree:f}){let p=!1;d||(d=await mt.resolve({fs:t,gitdir:r,ref:"HEAD",depth:2}));let m,g;try{m=await mt.resolve({fs:t,gitdir:r,ref:d}),g=await H0({fs:t,gitdir:r,oid:m,cache:{}})}catch{p=!0}if(l&&p)throw new Dx(d);const b=l?await Ah({fs:t,gitdir:r,author:i,commit:g.commit}):await Ah({fs:t,gitdir:r,author:i});if(!b)throw new bi("author");const v=l?await U0({fs:t,gitdir:r,author:b,committer:o,commit:g.commit}):await U0({fs:t,gitdir:r,author:b,committer:o});if(!v)throw new bi("committer");return Os.acquire({fs:t,gitdir:r,cache:e,allowUnmerged:!1},async function(w){const S=K0e(w.entries).get(".");if(f||(f=await ibe({fs:t,gitdir:r,inode:S,dryRun:c})),h?h=await Promise.all(h.map(x=>mt.resolve({fs:t,gitdir:r,ref:x}))):l?h=g.commit.parent:h=m?[m]:[],!s)if(l)s=g.commit.message;else throw new ao("message");let E=_r.from({tree:f,parent:h,author:b,committer:v,message:s});a&&(E=await _r.sign(E,n,a));const k=await wo({fs:t,gitdir:r,type:"commit",object:E.toObject(),dryRun:c});return!u&&!c&&await mt.writeRef({fs:t,gitdir:r,ref:d,value:k}),k})}async function ibe({fs:t,gitdir:e,inode:n,dryRun:r}){const s=n.children;for(const l of s)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await ibe({fs:t,gitdir:e,inode:l,dryRun:r}));const i=s.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),o=fo.from(i);return await wo({fs:t,gitdir:e,type:"tree",object:o.toObject(),dryRun:r})}async function jx({fs:t,cache:e,gitdir:n,oid:r,filepath:s}){if(s.startsWith("/"))throw new kh("leading-slash");if(s.endsWith("/"))throw new kh("trailing-slash");const i=r,o=await $0({fs:t,cache:e,gitdir:n,oid:r}),a=o.tree;if(s==="")r=o.oid;else{const l=s.split("/");r=await obe({fs:t,cache:e,gitdir:n,tree:a,pathArray:l,oid:i,filepath:s})}return r}async function obe({fs:t,cache:e,gitdir:n,tree:r,pathArray:s,oid:i,filepath:o}){const a=s.shift();for(const l of r)if(l.path===a){if(s.length===0)return l.oid;{const{type:c,object:u}=await kr({fs:t,cache:e,gitdir:n,oid:l.oid});if(c!=="tree")throw new Hi(i,c,"tree",o);return r=fo.from(u),obe({fs:t,cache:e,gitdir:n,tree:r,pathArray:s,oid:i,filepath:o})}}throw new Qn(`file or directory found at "${i}:${o}"`)}async function Pb({fs:t,cache:e,gitdir:n,oid:r,filepath:s=void 0}){s!==void 0&&(r=await jx({fs:t,cache:e,gitdir:n,oid:r,filepath:s}));const{tree:i,oid:o}=await $0({fs:t,cache:e,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function Fx({fs:t,gitdir:e,tree:n}){const r=fo.from(n).toObject();return await wo({fs:t,gitdir:e,type:"tree",object:r,format:"content"})}async function W2t({fs:t,cache:e,onSign:n,gitdir:r,ref:s,oid:i,note:o,force:a,author:l,committer:c,signingKey:u}){let d;try{d=await mt.resolve({gitdir:r,fs:t,ref:s})}catch(b){if(!(b instanceof Qn))throw b}let f=(await Pb({fs:t,cache:e,gitdir:r,oid:d||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(a)f=f.filter(b=>b.path!==i);else for(const b of f)if(b.path===i)throw new Al("note",i);typeof o=="string"&&(o=_t.from(o,"utf8"));const p=await wo({fs:t,gitdir:r,type:"blob",object:o,format:"content"});f.push({mode:"100644",path:i,oid:p,type:"blob"});const m=await Fx({fs:t,gitdir:r,tree:f});return await YT({fs:t,cache:e,onSign:n,gitdir:r,ref:s,tree:m,parent:d&&[d],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:c,signingKey:u})}async function G2t({fs:t,onSign:e,dir:n,gitdir:r=it.join(n,".git"),ref:s="refs/notes/commits",oid:i,note:o,force:a,author:l,committer:c,signingKey:u,cache:d={}}){try{je("fs",t),je("gitdir",r),je("oid",i),je("note",o),u&&je("onSign",e);const h=new jt(t),f=await Ah({fs:h,gitdir:r,author:l});if(!f)throw new bi("author");const p=await U0({fs:h,gitdir:r,author:f,committer:c});if(!p)throw new bi("committer");return await W2t({fs:new jt(h),cache:d,onSign:e,gitdir:r,ref:s,oid:i,note:o,force:a,author:f,committer:p,signingKey:u})}catch(h){throw h.caller="git.addNote",h}}async function abe({fs:t,gitdir:e,remote:n,url:r,force:s}){if(n!==_c.clean(n))throw new vl(n,_c.clean(n));const i=await Yr.get({fs:t,gitdir:e});if(!s&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new Al("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await Yr.save({fs:t,gitdir:e,config:i})}async function q2t({fs:t,dir:e,gitdir:n=it.join(e,".git"),remote:r,url:s,force:i=!1}){try{return je("fs",t),je("gitdir",n),je("remote",r),je("url",s),await abe({fs:new jt(t),gitdir:n,remote:r,url:s,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function K2t({fs:t,cache:e,onSign:n,gitdir:r,ref:s,tagger:i,message:o=s,gpgsig:a,object:l,signingKey:c,force:u=!1}){if(s=s.startsWith("refs/tags/")?s:`refs/tags/${s}`,!u&&await mt.exists({fs:t,gitdir:r,ref:s}))throw new Al("tag",s);const d=await mt.resolve({fs:t,gitdir:r,ref:l||"HEAD"}),{type:h}=await kr({fs:t,cache:e,gitdir:r,oid:d});let f=Mi.from({object:d,type:h,tag:s.replace("refs/tags/",""),tagger:i,message:o,gpgsig:a});c&&(f=await Mi.sign(f,n,c));const p=await wo({fs:t,gitdir:r,type:"tag",object:f.toObject()});await mt.writeRef({fs:t,gitdir:r,ref:s,value:p})}async function Y2t({fs:t,onSign:e,dir:n,gitdir:r=it.join(n,".git"),ref:s,tagger:i,message:o=s,gpgsig:a,object:l,signingKey:c,force:u=!1,cache:d={}}){try{je("fs",t),je("gitdir",r),je("ref",s),c&&je("onSign",e);const h=new jt(t),f=await Ah({fs:h,gitdir:r,author:i});if(!f)throw new bi("tagger");return await K2t({fs:h,cache:d,onSign:e,gitdir:r,ref:s,tagger:f,message:o,gpgsig:a,object:l,signingKey:c,force:u})}catch(h){throw h.caller="git.annotatedTag",h}}async function J2t({fs:t,gitdir:e,ref:n,object:r,checkout:s=!1,force:i=!1}){if(n!==_c.clean(n))throw new vl(n,_c.clean(n));const o=`refs/heads/${n}`;if(!i&&await mt.exists({fs:t,gitdir:e,ref:o}))throw new Al("branch",n,!1);let a;try{a=await mt.resolve({fs:t,gitdir:e,ref:r||"HEAD"})}catch{}a&&await mt.writeRef({fs:t,gitdir:e,ref:o,value:a}),s&&await mt.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:o})}async function X2t({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,object:s,checkout:i=!1,force:o=!1}){try{return je("fs",t),je("gitdir",n),je("ref",r),await J2t({fs:new jt(t),gitdir:n,ref:r,object:s,checkout:i,force:o})}catch(a){throw a.caller="git.branch",a}}const lbe=(t,e)=>t==="."||e==null||e.length===0||e==="."?!0:e.length>=t.length?e.startsWith(t):t.startsWith(e);async function oF({fs:t,cache:e,onProgress:n,onPostCheckout:r,dir:s,gitdir:i,remote:o,ref:a,filepaths:l,noCheckout:c,noUpdateHead:u,dryRun:d,force:h,track:f=!0}){let p;if(r)try{p=await mt.resolve({fs:t,gitdir:i,ref:"HEAD"})}catch{p="0000000000000000000000000000000000000000"}let m;try{m=await mt.resolve({fs:t,gitdir:i,ref:a})}catch(g){if(a==="HEAD")throw g;const b=`${o}/${a}`;if(m=await mt.resolve({fs:t,gitdir:i,ref:b}),f){const v=await Yr.get({fs:t,gitdir:i});await v.set(`branch.${a}.remote`,o),await v.set(`branch.${a}.merge`,`refs/heads/${a}`),await Yr.save({fs:t,gitdir:i,config:v})}await mt.writeRef({fs:t,gitdir:i,ref:`refs/heads/${a}`,value:m})}if(!c){let g;try{g=await Z2t({fs:t,cache:e,onProgress:n,dir:s,gitdir:i,ref:a,force:h,filepaths:l})}catch(S){throw S instanceof Qn&&S.data.what===m?new kx(a,m):S}const b=g.filter(([S])=>S==="conflict").map(([S,E])=>E);if(b.length>0)throw new Ex(b);const v=g.filter(([S])=>S==="error").map(([S,E])=>E);if(v.length>0)throw new nn(v.join(", "));if(d){r&&await r({previousHead:p,newHead:m,type:l!=null&&l.length>0?"file":"branch"});return}let w=0;const _=g.length;await Os.acquire({fs:t,gitdir:i,cache:e},async function(S){await Promise.all(g.filter(([E])=>E==="delete"||E==="delete-index").map(async function([E,k]){const x=`${s}/${k}`;E==="delete"&&await t.rm(x),S.delete({filepath:k}),n&&await n({phase:"Updating workdir",loaded:++w,total:_})}))}),await Os.acquire({fs:t,gitdir:i,cache:e},async function(S){for(const[E,k]of g)if(E==="rmdir"||E==="rmdir-index"){const x=`${s}/${k}`;try{E==="rmdir-index"&&S.delete({filepath:k}),await t.rmdir(x),n&&await n({phase:"Updating workdir",loaded:++w,total:_})}catch(I){if(I.code==="ENOTEMPTY")console.log(`Did not delete ${k} because directory is not empty`);else throw I}}}),await Promise.all(g.filter(([S])=>S==="mkdir"||S==="mkdir-index").map(async function([S,E]){const k=`${s}/${E}`;await t.mkdir(k),n&&await n({phase:"Updating workdir",loaded:++w,total:_})})),await Os.acquire({fs:t,gitdir:i,cache:e},async function(S){await Promise.all(g.filter(([E])=>E==="create"||E==="create-index"||E==="update"||E==="mkdir-index").map(async function([E,k,x,I,R]){const C=`${s}/${k}`;try{if(E!=="create-index"&&E!=="mkdir-index"){const{object:O}=await kr({fs:t,cache:e,gitdir:i,oid:x});if(R&&await t.rm(C),I===33188)await t.write(C,O);else if(I===33261)await t.write(C,O,{mode:511});else if(I===40960)await t.writelink(C,O);else throw new nn(`Invalid mode 0o${I.toString(8)} detected in blob ${x}`)}const T=await t.lstat(C);I===33261&&(T.mode=493),E==="mkdir-index"&&(T.mode=57344),S.insert({filepath:k,stats:T,oid:x}),n&&await n({phase:"Updating workdir",loaded:++w,total:_})}catch(T){console.log(T)}}))}),r&&await r({previousHead:p,newHead:m,type:l!=null&&l.length>0?"file":"branch"})}if(!u){const g=await mt.expand({fs:t,gitdir:i,ref:a});g.startsWith("refs/heads")?await mt.writeSymbolicRef({fs:t,gitdir:i,ref:"HEAD",value:g}):await mt.writeRef({fs:t,gitdir:i,ref:"HEAD",value:m})}}async function Z2t({fs:t,cache:e,onProgress:n,dir:r,gitdir:s,ref:i,force:o,filepaths:a}){let l=0;return Ch({fs:t,cache:e,dir:r,gitdir:s,trees:[Sa({ref:i}),Mx(),Sb()],map:async function(c,[u,d,h]){if(c===".")return;if(a&&!a.some(p=>lbe(c,p)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!h,!!u,!!d].map(Number).join("")){case"000":return;case"001":return o&&a&&a.includes(c)?["delete",c]:void 0;case"010":switch(await u.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await u.oid(),await u.mode()];case"commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`new entry Unhandled type ${await u.type()}`]}case"011":switch(`${await u.type()}-${await d.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await u.oid()!==await d.oid()?o?["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()]:["conflict",c]:await u.mode()!==await d.mode()?o?["update",c,await u.oid(),await u.mode(),!0]:["conflict",c]:["create-index",c,await u.oid(),await u.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${u.type}`]}case"100":return["delete-index",c];case"101":switch(await h.type()){case"tree":return["rmdir",c];case"blob":return await h.oid()!==await d.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await h.type()}`]}case"110":case"111":switch(`${await h.type()}-${await u.type()}`){case"tree-tree":return;case"blob-blob":{if(await h.oid()===await u.oid()&&await h.mode()===await u.mode()&&!o)return;if(d){if(await d.oid()!==await h.oid()&&await d.oid()!==await u.oid())return o?["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()]:["conflict",c]}else if(o)return["update",c,await u.oid(),await u.mode(),await u.mode()!==await h.mode()];return await u.mode()!==await h.mode()?["update",c,await u.oid(),await u.mode(),!0]:await u.oid()!==await h.oid()?["update",c,await u.oid(),await u.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await u.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`update entry Unhandled type ${await h.type()}-${await u.type()}`]}}},reduce:async function(c,u){return u=ebe(u),c?c&&c[0]==="rmdir"?(u.push(c),u):(u.unshift(c),u):u}})}async function cbe({fs:t,onProgress:e,onPostCheckout:n,dir:r,gitdir:s=it.join(r,".git"),remote:i="origin",ref:o,filepaths:a,noCheckout:l=!1,noUpdateHead:c=o===void 0,dryRun:u=!1,force:d=!1,track:h=!0,cache:f={}}){try{je("fs",t),je("dir",r),je("gitdir",s);const p=o||"HEAD";return await oF({fs:new jt(t),cache:f,onProgress:e,onPostCheckout:n,dir:r,gitdir:s,remote:i,ref:p,filepaths:a,noCheckout:l,noUpdateHead:c,dryRun:u,force:d,track:h})}catch(p){throw p.caller="git.checkout",p}}const Q2t=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function zf(t){const e=Q2t.exec(t);return e?e[1]==="remotes/"&&t.endsWith("/HEAD")?e[2].slice(0,-5):e[2]:t}async function Fh({fs:t,gitdir:e,fullname:n=!1,test:r=!1}){const s=await mt.resolve({fs:t,gitdir:e,ref:"HEAD",depth:2});if(r)try{await mt.resolve({fs:t,gitdir:e,ref:s})}catch{return}if(s.startsWith("refs/"))return n?s:zf(s)}function eSt(t){return t=t.replace(/^git@([^:]+):/,"https://$1/"),t=t.replace(/^ssh:\/\//,"https://"),t}function ube({username:t="",password:e=""}){return`Basic ${_t.from(`${t}:${e}`).toString("base64")}`}async function Bx(t,e){const n=X0e(t);for(;;){const{value:r,done:s}=await n.next();if(r&&await e(r),s)break}n.return&&n.return()}async function YC(t){let e=0;const n=[];await Bx(t,i=>{n.push(i),e+=i.byteLength});const r=new Uint8Array(e);let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}function KK(t){let e=t.match(/^https?:\/\/([^/]+)@/);if(e==null)return{url:t,auth:{}};e=e[1];const[n,r]=e.split(":");return t=t.replace(`${e}@`,""),{url:t,auth:{username:n,password:r}}}function tD(t,e){const n=e.toString(16);return"0".repeat(t-n.length)+n}class zr{static flush(){return _t.from("0000","utf8")}static delim(){return _t.from("0001","utf8")}static encode(e){typeof e=="string"&&(e=_t.from(e));const n=e.length+4,r=tD(4,n);return _t.concat([_t.from(r,"utf8"),e])}static streamReader(e){const n=new Z0e(e);return async function(){try{let s=await n.read(4);if(s==null)return!0;if(s=parseInt(s.toString("utf8"),16),s===0||s===1)return null;const i=await n.read(s-4);return i??!0}catch(s){return e.error=s,!0}}}}async function YK(t){const e={};let n;for(;n=await t(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const s=n.slice(0,r),i=n.slice(r+1);e[s]=i}else e[n]=!0}return{protocolVersion:2,capabilities2:e}}async function JK(t,{service:e}){const n=new Set,r=new Map,s=new Map,i=zr.streamReader(t);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new Cx;if(o.includes("version 2"))return YK(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${e}`)throw new em(`# service=${e}\\n`,o.toString("utf8"));let a=await i();for(;a===null;)a=await i();if(a===!0)return{capabilities:n,refs:r,symrefs:s};if(a=a.toString("utf8"),a.includes("version 2"))return YK(i);const[l,c]=nI(a,"\0","\\x00");if(c.split(" ").map(u=>n.add(u)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[u,d]=nI(l," "," ");for(r.set(d,u);;){const h=await i();if(h===!0)break;if(h!==null){const[f,p]=nI(h.toString("utf8")," "," ");r.set(p,f)}}}for(const u of n)if(u.startsWith("symref=")){const d=u.match(/symref=([^:]+):(.*)/);d.length===3&&s.set(d[1],d[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:s}}function nI(t,e,n){const r=t.trim().split(e);if(r.length!==2)throw new em(`Two strings separated by '${n}'`,t.toString("utf8"));return r}const XK=(t,e)=>t.endsWith("?")?`${t}${e}`:`${t}/${e.replace(/^https?:\/\//,"")}`,ZK=(t,e)=>{(e.username||e.password)&&(t.Authorization=ube(e)),e.headers&&Object.assign(t,e.headers)},rI=async t=>{try{const e=_t.from(await YC(t.body)),n=e.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:e}}catch{return{}}};class JC{static async capabilities(){return["discover","connect"]}static async discover({http:e,onProgress:n,onAuth:r,onAuthSuccess:s,onAuthFailure:i,corsProxy:o,service:a,url:l,headers:c,protocolVersion:u}){let{url:d,auth:h}=KK(l);const f=o?XK(o,d):d;(h.username||h.password)&&(c.Authorization=ube(h)),u===2&&(c["Git-Protocol"]="version=2");let p,m,g=!1;do if(p=await e.request({onProgress:n,method:"GET",url:`${f}/info/refs?service=${a}`,headers:c}),m=!1,p.statusCode===401||p.statusCode===203){const b=g?i:r;if(b){if(h=await b(d,{...h,headers:{...c}}),h&&h.cancel)throw new Ab;h&&(ZK(c,h),g=!0,m=!0)}}else p.statusCode===200&&g&&s&&await s(d,h);while(m);if(p.statusCode!==200){const{response:b}=await rI(p);throw new F0(p.statusCode,p.statusMessage,b)}if(p.headers["content-type"]===`application/x-${a}-advertisement`){const b=await JK(p.body,{service:a});return b.auth=h,b}else{const{preview:b,response:v,data:w}=await rI(p);try{const _=await JK([w],{service:a});return _.auth=h,_}catch{throw new Ix(b,v)}}}static async connect({http:e,onProgress:n,corsProxy:r,service:s,url:i,auth:o,body:a,headers:l}){const c=KK(i);c&&(i=c.url),r&&(i=XK(r,i)),l["content-type"]=`application/x-${s}-request`,l.accept=`application/x-${s}-result`,ZK(l,o);const u=await e.request({onProgress:n,method:"POST",url:`${i}/${s}`,body:a,headers:l});if(u.statusCode!==200){const{response:d}=rI(u);throw new F0(u.statusCode,u.statusMessage,d)}return u}}function tSt({url:t}){if(t.startsWith("git@"))return{transport:"ssh",address:t};const e=t.match(/(\w+)(:\/\/|::)(.*)/);if(e!==null){if(e[2]==="://")return{transport:e[1],address:e[0]};if(e[2]==="::")return{transport:e[1],address:e[3]}}}class JT{static getRemoteHelperFor({url:e}){const n=new Map;n.set("http",JC),n.set("https",JC);const r=tSt({url:e});if(!r)throw new Ox(e);if(n.has(r.transport))return n.get(r.transport);throw new Rx(e,r.transport,r.transport==="ssh"?eSt(e):void 0)}}let lf=null;class Nw{static async read({fs:e,gitdir:n}){lf===null&&(lf=new Sw);const r=it.join(n,"shallow"),s=new Set;return await lf.acquire(r,async function(){const i=await e.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return s;i.trim().split(`
`).map(o=>s.add(o))}),s}static async write({fs:e,gitdir:n,oids:r}){lf===null&&(lf=new Sw);const s=it.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await lf.acquire(s,async function(){await e.write(s,i,{encoding:"utf8"})})}else await lf.acquire(s,async function(){await e.rm(s)})}}async function nSt({fs:t,gitdir:e,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return t.exists(`${e}/${r}`)}async function rSt({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:s}){let i=await t.readdir(it.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const a=`${n}/objects/pack/${o}`,l=await iF({fs:t,cache:e,filename:a,getExternalRefDelta:s});if(l.error)throw new nn(l.error);if(l.offsets.has(r))return!0}return!1}async function QK({fs:t,cache:e,gitdir:n,oid:r,format:s="content"}){const i=a=>kr({fs:t,cache:e,gitdir:n,oid:a});let o=await nSt({fs:t,gitdir:n,oid:r});return o||(o=await rSt({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:i})),o}function sSt(t){const s="5041434b"+"00000002"+"00000000";return t.slice(0,12).toString("hex")===s}function dbe(t,e){const n=t.map(r=>r.split("=",1)[0]);return e.filter(r=>{const s=r.split("=",1)[0];return n.includes(s)})}const XT={name:"isomorphic-git",version:"1.29.0",agent:"git/isomorphic-git@1.29.0"};class bE{constructor(){this._queue=[]}write(e){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:e})}else this._queue.push(e)}end(){if(this._ended=!0,this._waiting){const e=this._waiting;this._waiting=null,e({done:!0})}}destroy(e){this.error=e,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(e=>{this._waiting=e})}}function iSt(t){const e=t.indexOf("\r"),n=t.indexOf(`
`);return e===-1&&n===-1?-1:e===-1?n+1:n===-1?e+1:n===e+1?n+1:Math.min(e,n)+1}function hbe(t){const e=new bE;let n="";return(async()=>(await Bx(t,r=>{for(r=r.toString("utf8"),n+=r;;){const s=iSt(n);if(s===-1)break;e.write(n.slice(0,s)),n=n.slice(s)}}),n.length>0&&e.write(n),e.end()))(),e}class fbe{static demux(e){const n=zr.streamReader(e),r=new bE,s=new bE,i=new bE,o=async function(){const a=await n();if(a===null)return o();if(a===!0){r.end(),i.end(),e.error?s.destroy(e.error):s.end();return}switch(a[0]){case 1:{s.write(a.slice(1));break}case 2:{i.write(a.slice(1));break}case 3:{const l=a.slice(1);i.write(l),r.end(),i.end(),s.destroy(new Error(l.toString("utf8")));return}default:r.write(a)}o()};return o(),{packetlines:r,packfile:s,progress:i}}}async function oSt(t){const{packetlines:e,packfile:n,progress:r}=fbe.demux(t),s=[],i=[],o=[];let a=!1,l=!1;return new Promise((c,u)=>{Bx(e,d=>{const h=d.toString("utf8").trim();if(h.startsWith("shallow")){const f=h.slice(-41).trim();f.length!==40&&u(new Eh(f)),s.push(f)}else if(h.startsWith("unshallow")){const f=h.slice(-41).trim();f.length!==40&&u(new Eh(f)),i.push(f)}else if(h.startsWith("ACK")){const[,f,p]=h.split(" ");o.push({oid:f,status:p}),p||(l=!0)}else h.startsWith("NAK")?(a=!0,l=!0):(l=!0,a=!0);l&&(t.error?u(t.error):c({shallows:s,unshallows:i,acks:o,nak:a,packfile:n,progress:r}))}).finally(()=>{l||(t.error?u(t.error):c({shallows:s,unshallows:i,acks:o,nak:a,packfile:n,progress:r}))})})}function aSt({capabilities:t=[],wants:e=[],haves:n=[],shallows:r=[],depth:s=null,since:i=null,exclude:o=[]}){const a=[];e=[...new Set(e)];let l=` ${t.join(" ")}`;for(const c of e)a.push(zr.encode(`want ${c}${l}
`)),l="";for(const c of r)a.push(zr.encode(`shallow ${c}
`));s!==null&&a.push(zr.encode(`deepen ${s}
`)),i!==null&&a.push(zr.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)a.push(zr.encode(`deepen-not ${c}
`));a.push(zr.flush());for(const c of n)a.push(zr.encode(`have ${c}
`));return a.push(zr.encode(`done
`)),a}async function aF({fs:t,cache:e,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,gitdir:l,ref:c,remoteRef:u,remote:d,url:h,corsProxy:f,depth:p=null,since:m=null,exclude:g=[],relative:b=!1,tags:v=!1,singleBranch:w=!1,headers:_={},prune:S=!1,pruneTags:E=!1}){const k=c||await Fh({fs:t,gitdir:l,test:!0}),x=await Yr.get({fs:t,gitdir:l}),I=d||k&&await x.get(`branch.${k}.remote`)||"origin",R=h||await x.get(`remote.${I}.url`);if(typeof R>"u")throw new ao("remote OR url");const C=u||k&&await x.get(`branch.${k}.merge`)||c||"HEAD";f===void 0&&(f=await x.get("http.corsProxy"));const T=JT.getRemoteHelperFor({url:R}),O=await T.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:a,corsProxy:f,service:"git-upload-pack",url:R,headers:_,protocolVersion:1}),P=O.auth,U=O.refs;if(U.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(p!==null&&!O.capabilities.has("shallow"))throw new Yd("shallow","depth");if(m!==null&&!O.capabilities.has("deepen-since"))throw new Yd("deepen-since","since");if(g.length>0&&!O.capabilities.has("deepen-not"))throw new Yd("deepen-not","exclude");if(b===!0&&!O.capabilities.has("deepen-relative"))throw new Yd("deepen-relative","relative");const{oid:ee,fullref:X}=mt.resolveAgainstMap({ref:C,map:U});for(const Ae of U.keys())Ae===X||Ae==="HEAD"||Ae.startsWith("refs/heads/")||v&&Ae.startsWith("refs/tags/")||U.delete(Ae);const Z=dbe([...O.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${XT.agent}`]);b&&Z.push("deepen-relative");const F=w?[ee]:U.values(),M=w?[k]:await mt.listRefs({fs:t,gitdir:l,filepath:"refs"});let G=[];for(let Ae of M)try{Ae=await mt.expand({fs:t,gitdir:l,ref:Ae});const Pe=await mt.resolve({fs:t,gitdir:l,ref:Ae});await QK({fs:t,cache:e,gitdir:l,oid:Pe})&&G.push(Pe)}catch{}G=[...new Set(G)];const D=await Nw.read({fs:t,gitdir:l}),j=O.capabilities.has("shallow")?[...D]:[],W=aSt({capabilities:Z,wants:F,haves:G,shallows:j,depth:p,since:m,exclude:g}),q=_t.from(await YC(W)),ne=await T.connect({http:n,onProgress:r,corsProxy:f,service:"git-upload-pack",url:R,auth:P,body:[q],headers:_}),te=await oSt(ne.body);ne.headers&&(te.headers=ne.headers);for(const Ae of te.shallows)if(!D.has(Ae))try{const{object:Pe}=await kr({fs:t,cache:e,gitdir:l,oid:Ae}),K=new _r(Pe),ge=await Promise.all(K.headers().parent.map(le=>QK({fs:t,cache:e,gitdir:l,oid:le})));ge.length===0||ge.every(le=>le)||D.add(Ae)}catch{D.add(Ae)}for(const Ae of te.unshallows)D.delete(Ae);if(await Nw.write({fs:t,gitdir:l,oids:D}),w){const Ae=new Map([[X,ee]]),Pe=new Map;let K=10,ge=X;for(;K--;){const se=O.symrefs.get(ge);if(se===void 0)break;Pe.set(ge,se),ge=se}const re=U.get(ge);re&&Ae.set(ge,re);const{pruned:le}=await mt.updateRemoteRefs({fs:t,gitdir:l,remote:I,refs:Ae,symrefs:Pe,tags:v,prune:S});S&&(te.pruned=le)}else{const{pruned:Ae}=await mt.updateRemoteRefs({fs:t,gitdir:l,remote:I,refs:U,symrefs:O.symrefs,tags:v,prune:S,pruneTags:E});S&&(te.pruned=Ae)}if(te.HEAD=O.symrefs.get("HEAD"),te.HEAD===void 0){const{oid:Ae}=mt.resolveAgainstMap({ref:"HEAD",map:U});for(const[Pe,K]of U.entries())if(Pe!=="HEAD"&&K===Ae){te.HEAD=Pe;break}}const Y=X.startsWith("refs/tags")?"tag":"branch";if(te.FETCH_HEAD={oid:ee,description:`${Y} '${zf(X)}' of ${R}`},r||s){const Ae=hbe(te.progress);Bx(Ae,async Pe=>{if(s&&await s(Pe),r){const K=Pe.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);K&&await r({phase:K[1].trim(),loaded:parseInt(K[2],10),total:parseInt(K[3],10)})}})}const de=_t.from(await YC(te.packfile));if(ne.body.error)throw ne.body.error;const Se=de.slice(-20).toString("hex"),xe={defaultBranch:te.HEAD,fetchHead:te.FETCH_HEAD.oid,fetchHeadDescription:te.FETCH_HEAD.description};if(te.headers&&(xe.headers=te.headers),S&&(xe.pruned=te.pruned),Se!==""&&!sSt(de)){xe.packfile=`objects/pack/pack-${Se}.pack`;const Ae=it.join(l,xe.packfile);await t.write(Ae,de);const Pe=ge=>kr({fs:t,cache:e,gitdir:l,oid:ge}),K=await j0.fromPack({pack:de,getExternalRefDelta:Pe,onProgress:r});await t.write(Ae.replace(/\.pack$/,".idx"),await K.toBuffer())}return xe}async function pbe({fs:t,bare:e=!1,dir:n,gitdir:r=e?n:it.join(n,".git"),defaultBranch:s="master"}){if(await t.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await t.mkdir(o);await t.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${e}
`+(e?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await t.write(r+"/HEAD",`ref: refs/heads/${s}
`)}async function lSt({fs:t,cache:e,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,onPostCheckout:l,dir:c,gitdir:u,url:d,corsProxy:h,ref:f,remote:p,depth:m,since:g,exclude:b,relative:v,singleBranch:w,noCheckout:_,noTags:S,headers:E}){try{if(await pbe({fs:t,gitdir:u}),await abe({fs:t,gitdir:u,remote:p,url:d,force:!1}),h){const I=await Yr.get({fs:t,gitdir:u});await I.set("http.corsProxy",h),await Yr.save({fs:t,gitdir:u,config:I})}const{defaultBranch:k,fetchHead:x}=await aF({fs:t,cache:e,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,gitdir:u,ref:f,remote:p,corsProxy:h,depth:m,since:g,exclude:b,relative:v,singleBranch:w,headers:E,tags:!S});if(x===null)return;f=f||k,f=f.replace("refs/heads/",""),await oF({fs:t,cache:e,onProgress:r,onPostCheckout:l,dir:c,gitdir:u,ref:f,remote:p,noCheckout:_})}catch(k){throw await t.rmdir(u,{recursive:!0,maxRetries:10}).catch(()=>{}),k}}async function cSt({fs:t,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:a,dir:l,gitdir:c=it.join(l,".git"),url:u,corsProxy:d=void 0,ref:h=void 0,remote:f="origin",depth:p=void 0,since:m=void 0,exclude:g=[],relative:b=!1,singleBranch:v=!1,noCheckout:w=!1,noTags:_=!1,headers:S={},cache:E={}}){try{return je("fs",t),je("http",e),je("gitdir",c),w||je("dir",l),je("url",u),await lSt({fs:new jt(t),cache:E,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:a,dir:l,gitdir:c,url:u,corsProxy:d,ref:h,remote:f,depth:p,since:m,exclude:g,relative:b,singleBranch:v,noCheckout:w,noTags:_,headers:S})}catch(k){throw k.caller="git.clone",k}}async function uSt({fs:t,onSign:e,dir:n,gitdir:r=it.join(n,".git"),message:s,author:i,committer:o,signingKey:a,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:d,parent:h,tree:f,cache:p={}}){try{je("fs",t),l||je("message",s),a&&je("onSign",e);const m=new jt(t);return await YT({fs:m,cache:p,onSign:e,gitdir:r,message:s,author:i,committer:o,signingKey:a,amend:l,dryRun:c,noUpdateBranch:u,ref:d,parent:h,tree:f})}catch(m){throw m.caller="git.commit",m}}async function dSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),fullname:r=!1,test:s=!1}){try{return je("fs",t),je("gitdir",n),await Fh({fs:new jt(t),gitdir:n,fullname:r,test:s})}catch(i){throw i.caller="git.currentBranch",i}}async function hSt({fs:t,gitdir:e,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await mt.exists({fs:t,gitdir:e,ref:n}))throw new Qn(n);const s=await mt.expand({fs:t,gitdir:e,ref:n}),i=await Fh({fs:t,gitdir:e,fullname:!0});if(s===i){const l=await mt.resolve({fs:t,gitdir:e,ref:s});await mt.writeRef({fs:t,gitdir:e,ref:"HEAD",value:l})}await mt.deleteRef({fs:t,gitdir:e,ref:s});const o=zf(n),a=await Yr.get({fs:t,gitdir:e});await a.deleteSection("branch",o),await Yr.save({fs:t,gitdir:e,config:a})}async function fSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r}){try{return je("fs",t),je("ref",r),await hSt({fs:new jt(t),gitdir:n,ref:r})}catch(s){throw s.caller="git.deleteBranch",s}}async function pSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r}){try{je("fs",t),je("ref",r),await mt.deleteRef({fs:new jt(t),gitdir:n,ref:r})}catch(s){throw s.caller="git.deleteRef",s}}async function mSt({fs:t,gitdir:e,remote:n}){const r=await Yr.get({fs:t,gitdir:e});await r.deleteSection("remote",n),await Yr.save({fs:t,gitdir:e,config:r})}async function gSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),remote:r}){try{return je("fs",t),je("remote",r),await mSt({fs:new jt(t),gitdir:n,remote:r})}catch(s){throw s.caller="git.deleteRemote",s}}async function bSt({fs:t,gitdir:e,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await mt.deleteRef({fs:t,gitdir:e,ref:n})}async function ySt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r}){try{return je("fs",t),je("ref",r),await bSt({fs:new jt(t),gitdir:n,ref:r})}catch(s){throw s.caller="git.deleteTag",s}}async function vSt({fs:t,gitdir:e,oid:n}){const r=n.slice(0,2);return(await t.readdir(`${e}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function wSt({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:s}){const i=[];let o=await t.readdir(it.join(n,"objects/pack"));o=o.filter(a=>a.endsWith(".idx"));for(const a of o){const l=`${n}/objects/pack/${a}`,c=await iF({fs:t,cache:e,filename:l,getExternalRefDelta:s});if(c.error)throw new nn(c.error);for(const u of c.offsets.keys())u.startsWith(r)&&i.push(u)}return i}async function xSt({fs:t,cache:e,gitdir:n,oid:r}){const s=a=>kr({fs:t,cache:e,gitdir:n,oid:a}),i=await vSt({fs:t,gitdir:n,oid:r}),o=await wSt({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:s});for(const a of o)i.indexOf(a)===-1&&i.push(a);if(i.length===1)return i[0];throw i.length>1?new Sx("oids",r,i):new Qn(`an object matching "${r}"`)}async function _St({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,cache:s={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),await xSt({fs:new jt(t),cache:s,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function SSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r}){try{return je("fs",t),je("gitdir",n),je("ref",r),await mt.expand({fs:new jt(t),gitdir:n,ref:r})}catch(s){throw s.caller="git.expandRef",s}}async function lF({fs:t,cache:e,gitdir:n,oids:r}){const s={},i=r.length;let o=r.map((a,l)=>({index:l,oid:a}));for(;o.length;){const a=new Set;for(const{oid:c,index:u}of o)s[c]||(s[c]=new Set),s[c].add(u),s[c].size===i&&a.add(c);if(a.size>0)return[...a];const l=new Map;for(const{oid:c,index:u}of o)try{const{object:d}=await kr({fs:t,cache:e,gitdir:n,oid:c}),h=_r.from(d),{parent:f}=h.parseHeaders();for(const p of f)(!s[p]||!s[p].has(u))&&l.set(p+":"+u,{oid:p,index:u})}catch{}o=Array.from(l.values())}return[]}const sI=/^.*(\r?\n|$)/gm;function ESt({branches:t,contents:e}){const n=t[1],r=t[2],s=e[0],i=e[1],o=e[2],a=i.match(sI),l=s.match(sI),c=o.match(sI),u=z_t(a,l,c),d=7;let h="",f=!0;for(const p of u)p.ok&&(h+=p.ok.join("")),p.conflict&&(f=!1,h+=`${"<".repeat(d)} ${n}
`,h+=p.conflict.a.join(""),h+=`${"=".repeat(d)}
`,h+=p.conflict.b.join(""),h+=`${">".repeat(d)} ${r}
`);return{cleanMerge:f,mergedText:h}}async function kSt({fs:t,cache:e,dir:n,gitdir:r=it.join(n,".git"),index:s,ourOid:i,baseOid:o,theirOid:a,ourName:l="ours",baseName:c="base",theirName:u="theirs",dryRun:d=!1,abortOnConflict:h=!0,mergeDriver:f}){const p=Sa({ref:i}),m=Sa({ref:o}),g=Sa({ref:a}),b=[],v=[],w=[],_=[],S=await Ch({fs:t,cache:e,dir:n,gitdir:r,trees:[p,m,g],map:async function(E,[k,x,I]){const R=VC(E),C=await KC(k,x),T=await KC(I,x);switch(`${C}-${T}`){case"false-false":return{mode:await x.mode(),path:R,oid:await x.oid(),type:await x.type()};case"false-true":return I?{mode:await I.mode(),path:R,oid:await I.oid(),type:await I.type()}:void 0;case"true-false":return k?{mode:await k.mode(),path:R,oid:await k.oid(),type:await k.type()}:void 0;case"true-true":{if(k&&x&&I&&await k.type()==="blob"&&await x.type()==="blob"&&await I.type()==="blob")return CSt({fs:t,gitdir:r,path:R,ours:k,base:x,theirs:I,ourName:l,baseName:c,theirName:u,mergeDriver:f}).then(async O=>{if(O.cleanMerge)h||s.insert({filepath:E,oid:O.mergeResult.oid,stage:0});else if(b.push(E),v.push(E),!h){const P=await x.oid(),U=await k.oid(),ee=await I.oid();s.delete({filepath:E}),s.insert({filepath:E,oid:P,stage:1}),s.insert({filepath:E,oid:U,stage:2}),s.insert({filepath:E,oid:ee,stage:3})}return O.mergeResult});if(x&&!k&&I&&await x.type()==="blob"&&await I.type()==="blob"){if(b.push(E),w.push(E),!h){const O=await x.oid(),P=await I.oid();s.delete({filepath:E}),s.insert({filepath:E,oid:O,stage:1}),s.insert({filepath:E,oid:P,stage:3})}return{mode:await I.mode(),oid:await I.oid(),type:"blob",path:R}}if(x&&k&&!I&&await x.type()==="blob"&&await k.type()==="blob"){if(b.push(E),_.push(E),!h){const O=await x.oid(),P=await k.oid();s.delete({filepath:E}),s.insert({filepath:E,oid:O,stage:1}),s.insert({filepath:E,oid:P,stage:2})}return{mode:await k.mode(),oid:await k.oid(),type:"blob",path:R}}if(x&&!k&&!I&&await x.type()==="blob")return;throw new kb}}},reduce:b.length!==0&&(!n||h)?void 0:async(E,k)=>{const x=k.filter(Boolean);if(E&&!(E&&E.type==="tree"&&x.length===0)){if(x.length>0){const R=new fo(x).toObject(),C=await wo({fs:t,gitdir:r,type:"tree",object:R,dryRun:d});E.oid=C}return E}}});return b.length!==0?(n&&!h&&await Ch({fs:t,cache:e,dir:n,gitdir:r,trees:[Sa({ref:S.oid})],map:async function(E,[k]){const x=`${n}/${E}`;if(await k.type()==="blob"){const I=await k.mode(),R=new TextDecoder().decode(await k.content());await t.write(x,R,{mode:I})}return!0}}),new Cb(b,v,w,_)):S.oid}async function CSt({fs:t,gitdir:e,path:n,ours:r,base:s,theirs:i,ourName:o,theirName:a,baseName:l,dryRun:c,mergeDriver:u=ESt}){const d="blob",h=await s.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:h,path:n,oid:await r.oid(),type:d}};if(await r.oid()===await s.oid())return{cleanMerge:!0,mergeResult:{mode:h,path:n,oid:await i.oid(),type:d}};if(await i.oid()===await s.oid())return{cleanMerge:!0,mergeResult:{mode:h,path:n,oid:await r.oid(),type:d}};const f=_t.from(await r.content()).toString("utf8"),p=_t.from(await s.content()).toString("utf8"),m=_t.from(await i.content()).toString("utf8"),{mergedText:g,cleanMerge:b}=await u({branches:[l,o,a],contents:[p,f,m],path:n}),v=await wo({fs:t,gitdir:e,type:"blob",object:_t.from(g,"utf8"),dryRun:c});return{cleanMerge:b,mergeResult:{mode:h,path:n,oid:v,type:d}}}async function mbe({fs:t,cache:e,dir:n,gitdir:r,ours:s,theirs:i,fastForward:o=!0,fastForwardOnly:a=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:d,author:h,committer:f,signingKey:p,onSign:m,mergeDriver:g}){s===void 0&&(s=await Fh({fs:t,gitdir:r,fullname:!0})),s=await mt.expand({fs:t,gitdir:r,ref:s}),i=await mt.expand({fs:t,gitdir:r,ref:i});const b=await mt.resolve({fs:t,gitdir:r,ref:s}),v=await mt.resolve({fs:t,gitdir:r,ref:i}),w=await lF({fs:t,cache:e,gitdir:r,oids:[b,v]});if(w.length!==1)throw new kb;const _=w[0];if(_===v)return{oid:b,alreadyMerged:!0};if(o&&_===b)return!l&&!c&&await mt.writeRef({fs:t,gitdir:r,ref:s,value:v}),{oid:v,fastForward:!0};{if(a)throw new Ax;const S=await Os.acquire({fs:t,gitdir:r,cache:e,allowUnmerged:!1},async k=>kSt({fs:t,cache:e,dir:n,gitdir:r,index:k,ourOid:b,theirOid:v,baseOid:_,ourName:zf(s),baseName:"base",theirName:zf(i),dryRun:l,abortOnConflict:u,mergeDriver:g}));if(S instanceof Cb)throw S;return d||(d=`Merge branch '${zf(i)}' into ${zf(s)}`),{oid:await YT({fs:t,cache:e,gitdir:r,message:d,ref:s,tree:S,parent:[b,v],author:h,committer:f,signingKey:p,onSign:m,dryRun:l,noUpdateBranch:c}),tree:S,mergeCommit:!0}}}async function gbe({fs:t,cache:e,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,dir:l,gitdir:c,ref:u,url:d,remote:h,remoteRef:f,prune:p,pruneTags:m,fastForward:g,fastForwardOnly:b,corsProxy:v,singleBranch:w,headers:_,author:S,committer:E,signingKey:k}){try{if(!u){const R=await Fh({fs:t,gitdir:c});if(!R)throw new ao("ref");u=R}const{fetchHead:x,fetchHeadDescription:I}=await aF({fs:t,cache:e,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,gitdir:c,corsProxy:v,ref:u,url:d,remote:h,remoteRef:f,singleBranch:w,headers:_,prune:p,pruneTags:m});await mbe({fs:t,cache:e,gitdir:c,ours:u,theirs:x,fastForward:g,fastForwardOnly:b,message:`Merge ${I}`,author:S,committer:E,signingKey:k,dryRun:!1,noUpdateBranch:!1}),await oF({fs:t,cache:e,onProgress:r,dir:l,gitdir:c,ref:u,remote:h,noCheckout:!1})}catch(x){throw x.caller="git.pull",x}}async function ASt({fs:t,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,dir:a,gitdir:l=it.join(a,".git"),ref:c,url:u,remote:d,remoteRef:h,corsProxy:f,singleBranch:p,headers:m={},cache:g={}}){try{je("fs",t),je("http",e),je("gitdir",l);const b={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await gbe({fs:new jt(t),cache:g,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,dir:a,gitdir:l,ref:c,url:u,remote:d,remoteRef:h,fastForwardOnly:!0,corsProxy:f,singleBranch:p,headers:m,author:b,committer:b})}catch(b){throw b.caller="git.fastForward",b}}async function TSt({fs:t,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,dir:a,gitdir:l=it.join(a,".git"),ref:c,remote:u,remoteRef:d,url:h,corsProxy:f,depth:p=null,since:m=null,exclude:g=[],relative:b=!1,tags:v=!1,singleBranch:w=!1,headers:_={},prune:S=!1,pruneTags:E=!1,cache:k={}}){try{return je("fs",t),je("http",e),je("gitdir",l),await aF({fs:new jt(t),cache:k,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,gitdir:l,ref:c,remote:u,remoteRef:d,url:h,corsProxy:f,depth:p,since:m,exclude:g,relative:b,tags:v,singleBranch:w,headers:_,prune:S,pruneTags:E})}catch(x){throw x.caller="git.fetch",x}}async function PSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),oids:r,cache:s={}}){try{return je("fs",t),je("gitdir",n),je("oids",r),await lF({fs:new jt(t),cache:s,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function bbe({fs:t,filepath:e}){if(await t.exists(it.join(e,".git")))return e;{const n=M0(e);if(n===e)throw new Qn(`git root for ${e}`);return bbe({fs:t,filepath:n})}}async function NSt({fs:t,filepath:e}){try{return je("fs",t),je("filepath",e),await bbe({fs:new jt(t),filepath:e})}catch(n){throw n.caller="git.findRoot",n}}async function ISt({fs:t,dir:e,gitdir:n=it.join(e,".git"),path:r}){try{return je("fs",t),je("gitdir",n),je("path",r),await Pw({fs:new jt(t),gitdir:n,path:r})}catch(s){throw s.caller="git.getConfig",s}}async function RSt({fs:t,gitdir:e,path:n}){return(await Yr.get({fs:t,gitdir:e})).getall(n)}async function OSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),path:r}){try{return je("fs",t),je("gitdir",n),je("path",r),await RSt({fs:new jt(t),gitdir:n,path:r})}catch(s){throw s.caller="git.getConfigAll",s}}async function LSt({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,url:i,headers:o={},forPush:a=!1}){try{je("http",t),je("url",i);const c=await JT.getRemoteHelperFor({url:i}).discover({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,service:a?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),u={capabilities:[...c.capabilities]};for(const[d,h]of c.refs){const f=d.split("/"),p=f.pop();let m=u;for(const g of f)m[g]=m[g]||{},m=m[g];m[p]=h}for(const[d,h]of c.symrefs){const f=d.split("/"),p=f.pop();let m=u;for(const g of f)m[g]=m[g]||{},m=m[g];m[p]=h}return u}catch(l){throw l.caller="git.getRemoteInfo",l}}function ybe(t,e,n,r){const s=[];for(const[i,o]of t.refs){if(e&&!i.startsWith(e))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),c=s[s.length-1],u=c.ref===l?c:s.find(d=>d.ref===l);if(u===void 0)throw new Error("I did not expect this to happen");u.peeled=o}continue}const a={ref:i,oid:o};n&&t.symrefs.has(i)&&(a.target=t.symrefs.get(i)),s.push(a)}return s}async function DSt({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,url:i,headers:o={},forPush:a=!1,protocolVersion:l=2}){try{je("http",t),je("url",i);const u=await JT.getRemoteHelperFor({url:i}).discover({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,service:a?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:l});if(u.protocolVersion===2)return{protocolVersion:u.protocolVersion,capabilities:u.capabilities2};const d={};for(const h of u.capabilities){const[f,p]=h.split("=");p?d[f]=p:d[f]=!0}return{protocolVersion:1,capabilities:d,refs:ybe(u,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function MSt({type:t,object:e,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(e=Eb.wrap({type:t,object:e})),r=await Xu(e)),{oid:r,object:e}}async function jSt({object:t}){try{je("object",t),typeof t=="string"?t=_t.from(t,"utf8"):t=_t.from(t);const e="blob",{oid:n,object:r}=await MSt({type:"blob",format:"content",object:t});return{oid:n,type:e,object:new Uint8Array(r),format:"wrapped"}}catch(e){throw e.caller="git.hashBlob",e}}async function FSt({fs:t,cache:e,onProgress:n,dir:r,gitdir:s,filepath:i}){try{i=it.join(r,i);const o=await t.read(i),a=c=>kr({fs:t,cache:e,gitdir:s,oid:c}),l=await j0.fromPack({pack:o,getExternalRefDelta:a,onProgress:n});return await t.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function BSt({fs:t,onProgress:e,dir:n,gitdir:r=it.join(n,".git"),filepath:s,cache:i={}}){try{return je("fs",t),je("dir",n),je("gitdir",n),je("filepath",s),await FSt({fs:new jt(t),cache:i,onProgress:e,dir:n,gitdir:r,filepath:s})}catch(o){throw o.caller="git.indexPack",o}}async function $St({fs:t,bare:e=!1,dir:n,gitdir:r=e?n:it.join(n,".git"),defaultBranch:s="master"}){try{return je("fs",t),je("gitdir",r),e||je("dir",n),await pbe({fs:new jt(t),bare:e,dir:n,gitdir:r,defaultBranch:s})}catch(i){throw i.caller="git.init",i}}async function vbe({fs:t,cache:e,gitdir:n,oid:r,ancestor:s,depth:i}){const o=await Nw.read({fs:t,gitdir:n});if(!r)throw new ao("oid");if(!s)throw new ao("ancestor");if(r===s)return!1;const a=[r],l=new Set;let c=0;for(;a.length;){if(c++===i)throw new Px(i);const u=a.shift(),{type:d,object:h}=await kr({fs:t,cache:e,gitdir:n,oid:u});if(d!=="commit")throw new Hi(u,d,"commit");const f=_r.from(h).parse();for(const p of f.parent)if(p===s)return!0;if(!o.has(u))for(const p of f.parent)l.has(p)||(a.push(p),l.add(p))}return!1}async function USt({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,ancestor:s,depth:i=-1,cache:o={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),je("ancestor",s),await vbe({fs:new jt(t),cache:o,gitdir:n,oid:r,ancestor:s,depth:i})}catch(a){throw a.caller="git.isDescendent",a}}async function HSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r}){try{return je("fs",t),je("dir",e),je("gitdir",n),je("filepath",r),Tb.isIgnored({fs:new jt(t),dir:e,gitdir:n,filepath:r})}catch(s){throw s.caller="git.isIgnored",s}}async function zSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),remote:r}){try{return je("fs",t),je("gitdir",n),mt.listBranches({fs:new jt(t),gitdir:n,remote:r})}catch(s){throw s.caller="git.listBranches",s}}async function VSt({fs:t,gitdir:e,ref:n,cache:r}){if(n){const s=await mt.resolve({gitdir:e,fs:t,ref:n}),i=[];return await wbe({fs:t,cache:r,gitdir:e,oid:s,filenames:i,prefix:""}),i}else return Os.acquire({fs:t,gitdir:e,cache:r},async function(s){return s.entries.map(i=>i.path)})}async function wbe({fs:t,cache:e,gitdir:n,oid:r,filenames:s,prefix:i}){const{tree:o}=await Pb({fs:t,cache:e,gitdir:n,oid:r});for(const a of o)a.type==="tree"?await wbe({fs:t,cache:e,gitdir:n,oid:a.oid,filenames:s,prefix:it.join(i,a.path)}):s.push(it.join(i,a.path))}async function WSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,cache:s={}}){try{return je("fs",t),je("gitdir",n),await VSt({fs:new jt(t),cache:s,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function GSt({fs:t,cache:e,gitdir:n,ref:r}){let s;try{s=await mt.resolve({gitdir:n,fs:t,ref:r})}catch(a){if(a instanceof Qn)return[]}return(await Pb({fs:t,cache:e,gitdir:n,oid:s})).tree.map(a=>({target:a.path,note:a.oid}))}async function qSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r="refs/notes/commits",cache:s={}}){try{return je("fs",t),je("gitdir",n),je("ref",r),await GSt({fs:new jt(t),cache:s,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function KSt({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r}){try{return je("fs",t),je("gitdir",n),mt.listRefs({fs:new jt(t),gitdir:n,filepath:r})}catch(s){throw s.caller="git.listRefs",s}}async function YSt({fs:t,gitdir:e}){const n=await Yr.get({fs:t,gitdir:e}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function JSt({fs:t,dir:e,gitdir:n=it.join(e,".git")}){try{return je("fs",t),je("gitdir",n),await YSt({fs:new jt(t),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function XSt(t){const e=zr.streamReader(t),n=[];let r;for(;r=await e(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[s,i,...o]=r.split(" "),a={ref:i,oid:s};for(const l of o){const[c,u]=l.split(":");c==="symref-target"?a.target=u:c==="peeled"&&(a.peeled=u)}n.push(a)}return n}async function ZSt({prefix:t,symrefs:e,peelTags:n}){const r=[];return r.push(zr.encode(`command=ls-refs
`)),r.push(zr.encode(`agent=${XT.agent}
`)),(n||e||t)&&r.push(zr.delim()),n&&r.push(zr.encode("peel")),e&&r.push(zr.encode("symrefs")),t&&r.push(zr.encode(`ref-prefix ${t}`)),r.push(zr.flush()),r}async function QSt({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,url:i,headers:o={},forPush:a=!1,protocolVersion:l=2,prefix:c,symrefs:u,peelTags:d}){try{je("http",t),je("url",i);const h=await JC.discover({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,service:a?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:l});if(h.protocolVersion===1)return ybe(h,c,u,d);const f=await ZSt({prefix:c,symrefs:u,peelTags:d}),p=await JC.connect({http:t,auth:h.auth,headers:o,corsProxy:s,service:a?"git-receive-pack":"git-upload-pack",url:i,body:f});return XSt(p.body)}catch(h){throw h.caller="git.listServerRefs",h}}async function eEt({fs:t,dir:e,gitdir:n=it.join(e,".git")}){try{return je("fs",t),je("gitdir",n),mt.listTags({fs:new jt(t),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function tEt(t,e){return t.committer.timestamp-e.committer.timestamp}const nEt="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function eY({fs:t,cache:e,gitdir:n,oid:r,fileId:s}){if(s===nEt)return;const i=r;let o;const a=await $0({fs:t,cache:e,gitdir:n,oid:r}),l=a.tree;return s===a.oid?o=a.path:(o=await xbe({fs:t,cache:e,gitdir:n,tree:l,fileId:s,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function xbe({fs:t,cache:e,gitdir:n,tree:r,fileId:s,oid:i,filepaths:o=[],parentPath:a=""}){const l=r.entries().map(function(c){let u;return c.oid===s?(u=it.join(a,c.path),o.push(u)):c.type==="tree"&&(u=kr({fs:t,cache:e,gitdir:n,oid:c.oid}).then(function({object:d}){return xbe({fs:t,cache:e,gitdir:n,tree:fo.from(d),fileId:s,oid:i,filepaths:o,parentPath:it.join(a,c.path)})})),u});return await Promise.all(l),o}async function rEt({fs:t,cache:e,gitdir:n,filepath:r,ref:s,depth:i,since:o,force:a,follow:l}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),u=[],d=await Nw.read({fs:t,gitdir:n}),h=await mt.resolve({fs:t,gitdir:n,ref:s}),f=[await H0({fs:t,cache:e,gitdir:n,oid:h})];let p,m,g;function b(v){g&&r&&u.push(v)}for(;f.length>0;){const v=f.pop();if(c!==void 0&&v.commit.committer.timestamp<=c)break;if(r){let w;try{w=await jx({fs:t,cache:e,gitdir:n,oid:v.commit.tree,filepath:r}),m&&p!==w&&u.push(m),p=w,m=v,g=!0}catch(_){if(_ instanceof Qn){let S=l&&p;if(S&&(S=await eY({fs:t,cache:e,gitdir:n,oid:v.commit.tree,fileId:p}),S))if(Array.isArray(S)){if(m){const E=await eY({fs:t,cache:e,gitdir:n,oid:m.commit.tree,fileId:p});if(Array.isArray(E))if(S=S.filter(k=>E.indexOf(k)===-1),S.length===1)S=S[0],r=S,m&&u.push(m);else{S=!1,m&&u.push(m);break}}}else r=S,m&&u.push(m);if(!S){if(g&&p&&(u.push(m),!a))break;if(!a&&!l)throw _}m=v,g=!1}else throw _}}else u.push(v);if(i!==void 0&&u.length===i){b(v);break}if(!d.has(v.oid))for(const w of v.commit.parent){const _=await H0({fs:t,cache:e,gitdir:n,oid:w});f.map(S=>S.oid).includes(_.oid)||f.push(_)}f.length===0&&b(v),f.sort((w,_)=>tEt(w.commit,_.commit))}return u}async function sEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r,ref:s="HEAD",depth:i,since:o,force:a,follow:l,cache:c={}}){try{return je("fs",t),je("gitdir",n),je("ref",s),await rEt({fs:new jt(t),cache:c,gitdir:n,filepath:r,ref:s,depth:i,since:o,force:a,follow:l})}catch(u){throw u.caller="git.log",u}}async function iEt({fs:t,onSign:e,dir:n,gitdir:r=it.join(n,".git"),ours:s,theirs:i,fastForward:o=!0,fastForwardOnly:a=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:d,author:h,committer:f,signingKey:p,cache:m={},mergeDriver:g}){try{je("fs",t),p&&je("onSign",e);const b=new jt(t),v=await Ah({fs:b,gitdir:r,author:h});if(!v&&(!a||!o))throw new bi("author");const w=await U0({fs:b,gitdir:r,author:v,committer:f});if(!w&&(!a||!o))throw new bi("committer");return await mbe({fs:b,cache:m,dir:n,gitdir:r,ours:s,theirs:i,fastForward:o,fastForwardOnly:a,dryRun:l,noUpdateBranch:c,abortOnConflict:u,message:d,author:v,committer:w,signingKey:p,onSign:e,mergeDriver:g})}catch(b){throw b.caller="git.merge",b}}const oEt={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function _be({fs:t,cache:e,dir:n,gitdir:r=it.join(n,".git"),oids:s}){const i=new Qge,o=[];function a(u,d){const h=_t.from(u,d);o.push(h),i.update(h)}async function l({stype:u,object:d}){const h=oEt[u];let f=d.length,p=f>15?128:0;const m=f&15;f=f>>>4;let g=(p|h|m).toString(16);for(a(g,"hex");p;)p=f>127?128:0,g=p|f&127,a(tD(2,g),"hex"),f=f>>>7;a(_t.from(await tbe(d)))}a("PACK"),a("00000002","hex"),a(tD(8,s.length),"hex");for(const u of s){const{type:d,object:h}=await kr({fs:t,cache:e,gitdir:r,oid:u});await l({object:h,stype:d})}const c=i.digest();return o.push(c),o}async function aEt({fs:t,cache:e,gitdir:n,oids:r,write:s}){const i=await _be({fs:t,cache:e,gitdir:n,oids:r}),o=_t.from(await YC(i)),l=`pack-${o.slice(-20).toString("hex")}.pack`;return s?(await t.write(it.join(n,`objects/pack/${l}`),o),{filename:l}):{filename:l,packfile:new Uint8Array(o)}}async function lEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),oids:r,write:s=!1,cache:i={}}){try{return je("fs",t),je("gitdir",n),je("oids",r),await aEt({fs:new jt(t),cache:i,gitdir:n,oids:r,write:s})}catch(o){throw o.caller="git.packObjects",o}}async function cEt({fs:t,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,dir:a,gitdir:l=it.join(a,".git"),ref:c,url:u,remote:d,remoteRef:h,prune:f=!1,pruneTags:p=!1,fastForward:m=!0,fastForwardOnly:g=!1,corsProxy:b,singleBranch:v,headers:w={},author:_,committer:S,signingKey:E,cache:k={}}){try{je("fs",t),je("gitdir",l);const x=new jt(t),I=await Ah({fs:x,gitdir:l,author:_});if(!I)throw new bi("author");const R=await U0({fs:x,gitdir:l,author:I,committer:S});if(!R)throw new bi("committer");return await gbe({fs:x,cache:k,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,dir:a,gitdir:l,ref:c,url:u,remote:d,remoteRef:h,fastForward:m,fastForwardOnly:g,corsProxy:b,singleBranch:v,headers:w,author:I,committer:R,signingKey:E,prune:f,pruneTags:p})}catch(x){throw x.caller="git.pull",x}}async function uEt({fs:t,cache:e,dir:n,gitdir:r=it.join(n,".git"),start:s,finish:i}){const o=await Nw.read({fs:t,gitdir:r}),a=new Set,l=new Set;for(const d of s)a.add(await mt.resolve({fs:t,gitdir:r,ref:d}));for(const d of i)try{const h=await mt.resolve({fs:t,gitdir:r,ref:d});l.add(h)}catch{}const c=new Set;async function u(d){c.add(d);const{type:h,object:f}=await kr({fs:t,cache:e,gitdir:r,oid:d});if(h==="tag"){const m=Mi.from(f).headers().object;return u(m)}if(h!=="commit")throw new Hi(d,h,"commit");if(!o.has(d)){const m=_r.from(f).headers().parent;for(d of m)!l.has(d)&&!c.has(d)&&await u(d)}}for(const d of a)await u(d);return c}async function iI({fs:t,cache:e,dir:n,gitdir:r=it.join(n,".git"),oids:s}){const i=new Set;async function o(a){if(i.has(a))return;i.add(a);const{type:l,object:c}=await kr({fs:t,cache:e,gitdir:r,oid:a});if(l==="tag"){const d=Mi.from(c).headers().object;await o(d)}else if(l==="commit"){const d=_r.from(c).headers().tree;await o(d)}else if(l==="tree"){const u=fo.from(c);for(const d of u)d.type==="blob"&&i.add(d.oid),d.type==="tree"&&await o(d.oid)}}for(const a of s)await o(a);return i}async function dEt(t){const e={};let n="";const r=zr.streamReader(t);let s=await r();for(;s!==!0;)s!==null&&(n+=s.toString("utf8")+`
`),s=await r();const i=n.toString("utf8").split(`
`);if(s=i.shift(),!s.startsWith("unpack "))throw new em('unpack ok" or "unpack [error message]',s);e.ok=s==="unpack ok",e.ok||(e.error=s.slice(7)),e.refs={};for(const o of i){if(o.trim()==="")continue;const a=o.slice(0,2),l=o.slice(3);let c=l.indexOf(" ");c===-1&&(c=l.length);const u=l.slice(0,c),d=l.slice(c+1);e.refs[u]={ok:a==="ok",error:d}}return e}async function hEt({capabilities:t=[],triplets:e=[]}){const n=[];let r=`\0 ${t.join(" ")}`;for(const s of e)n.push(zr.encode(`${s.oldoid} ${s.oid} ${s.fullRef}${r}
`)),r="";return n.push(zr.flush()),n}async function fEt({fs:t,cache:e,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,onPrePush:l,gitdir:c,ref:u,remoteRef:d,remote:h,url:f,force:p=!1,delete:m=!1,corsProxy:g,headers:b={}}){const v=u||await Fh({fs:t,gitdir:c});if(typeof v>"u")throw new ao("ref");const w=await Yr.get({fs:t,gitdir:c});h=h||await w.get(`branch.${v}.pushRemote`)||await w.get("remote.pushDefault")||await w.get(`branch.${v}.remote`)||"origin";const _=f||await w.get(`remote.${h}.pushurl`)||await w.get(`remote.${h}.url`);if(typeof _>"u")throw new ao("remote OR url");const S=d||await w.get(`branch.${v}.merge`);if(typeof _>"u")throw new ao("remoteRef");g===void 0&&(g=await w.get("http.corsProxy"));const E=await mt.expand({fs:t,gitdir:c,ref:v}),k=m?"0000000000000000000000000000000000000000":await mt.resolve({fs:t,gitdir:c,ref:E}),x=JT.getRemoteHelperFor({url:_}),I=await x.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:a,corsProxy:g,service:"git-receive-pack",url:_,headers:b,protocolVersion:1}),R=I.auth;let C;if(!S)C=E;else try{C=await mt.expandAgainstMap({ref:S,map:I.refs})}catch(D){if(D instanceof Qn)C=S.startsWith("refs/")?S:`refs/heads/${S}`;else throw D}const T=I.refs.get(C)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:h,url:_,localRef:{ref:m?"(delete)":E,oid:k},remoteRef:{ref:C,oid:T}}))throw new Ab;const O=!I.capabilities.has("no-thin");let P=new Set;if(!m){const D=[...I.refs.values()];let j=new Set;if(T!=="0000000000000000000000000000000000000000"){const W=await lF({fs:t,cache:e,gitdir:c,oids:[k,T]});for(const q of W)D.push(q);O&&(j=await iI({fs:t,cache:e,gitdir:c,oids:W}))}if(!D.includes(k)){const W=await uEt({fs:t,cache:e,gitdir:c,start:[k],finish:D});P=await iI({fs:t,cache:e,gitdir:c,oids:W})}if(O){try{const W=await mt.resolve({fs:t,gitdir:c,ref:`refs/remotes/${h}/HEAD`,depth:2}),{oid:q}=await mt.resolveAgainstMap({ref:W.replace(`refs/remotes/${h}/`,""),fullref:W,map:I.refs}),ne=[q];for(const te of await iI({fs:t,cache:e,gitdir:c,oids:ne}))j.add(te)}catch{}for(const W of j)P.delete(W)}if(k===T&&(p=!0),!p){if(E.startsWith("refs/tags")&&T!=="0000000000000000000000000000000000000000")throw new B0("tag-exists");if(k!=="0000000000000000000000000000000000000000"&&T!=="0000000000000000000000000000000000000000"&&!await vbe({fs:t,cache:e,gitdir:c,oid:k,ancestor:T,depth:-1}))throw new B0("not-fast-forward")}}const U=dbe([...I.capabilities],["report-status","side-band-64k",`agent=${XT.agent}`]),ee=await hEt({capabilities:U,triplets:[{oldoid:T,oid:k,fullRef:C}]}),X=m?[]:await _be({fs:t,cache:e,gitdir:c,oids:[...P]}),Z=await x.connect({http:n,onProgress:r,corsProxy:g,service:"git-receive-pack",url:_,auth:R,headers:b,body:[...ee,...X]}),{packfile:F,progress:M}=await fbe.demux(Z.body);if(s){const D=hbe(M);Bx(D,async j=>{await s(j)})}const G=await dEt(F);if(Z.headers&&(G.headers=Z.headers),h&&G.ok&&G.refs[C].ok&&!E.startsWith("refs/tags")){const D=`refs/remotes/${h}/${C.replace("refs/heads","")}`;m?await mt.deleteRef({fs:t,gitdir:c,ref:D}):await mt.writeRef({fs:t,gitdir:c,ref:D,value:k})}if(G.ok&&Object.values(G.refs).every(D=>D.ok))return G;{const D=Object.entries(G.refs).filter(([j,W])=>!W.ok).map(([j,W])=>`
  - ${j}: ${W.error}`).join("");throw new Tx(D,G)}}async function pEt({fs:t,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,onPrePush:a,dir:l,gitdir:c=it.join(l,".git"),ref:u,remoteRef:d,remote:h="origin",url:f,force:p=!1,delete:m=!1,corsProxy:g,headers:b={},cache:v={}}){try{return je("fs",t),je("http",e),je("gitdir",c),await fEt({fs:new jt(t),cache:v,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,onPrePush:a,gitdir:c,ref:u,remoteRef:d,remote:h,url:f,force:p,delete:m,corsProxy:g,headers:b})}catch(w){throw w.caller="git.push",w}}async function Sbe({fs:t,cache:e,gitdir:n,oid:r}){const{type:s,object:i}=await kr({fs:t,cache:e,gitdir:n,oid:r});if(s==="tag")return r=Mi.from(i).parse().object,Sbe({fs:t,cache:e,gitdir:n,oid:r});if(s!=="blob")throw new Hi(r,s,"blob");return{oid:r,blob:new Uint8Array(i)}}async function Ebe({fs:t,cache:e,gitdir:n,oid:r,filepath:s=void 0}){return s!==void 0&&(r=await jx({fs:t,cache:e,gitdir:n,oid:r,filepath:s})),await Sbe({fs:t,cache:e,gitdir:n,oid:r})}async function mEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,filepath:s,cache:i={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),await Ebe({fs:new jt(t),cache:i,gitdir:n,oid:r,filepath:s})}catch(o){throw o.caller="git.readBlob",o}}async function kbe({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,cache:s={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),await H0({fs:new jt(t),cache:s,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function gEt({fs:t,cache:e,gitdir:n,ref:r="refs/notes/commits",oid:s}){const i=await mt.resolve({gitdir:n,fs:t,ref:r}),{blob:o}=await Ebe({fs:t,cache:e,gitdir:n,oid:i,filepath:s});return o}async function bEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r="refs/notes/commits",oid:s,cache:i={}}){try{return je("fs",t),je("gitdir",n),je("ref",r),je("oid",s),await gEt({fs:new jt(t),cache:i,gitdir:n,ref:r,oid:s})}catch(o){throw o.caller="git.readNote",o}}async function yEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,format:s="parsed",filepath:i=void 0,encoding:o=void 0,cache:a={}}){try{je("fs",t),je("gitdir",n),je("oid",r);const l=new jt(t);i!==void 0&&(r=await jx({fs:l,cache:a,gitdir:n,oid:r,filepath:i}));const u=await kr({fs:l,cache:a,gitdir:n,oid:r,format:s==="parsed"?"content":s});if(u.oid=r,s==="parsed")switch(u.format="parsed",u.type){case"commit":u.object=_r.from(u.object).parse();break;case"tree":u.object=fo.from(u.object).entries();break;case"blob":o?u.object=u.object.toString(o):(u.object=new Uint8Array(u.object),u.format="content");break;case"tag":u.object=Mi.from(u.object).parse();break;default:throw new Hi(u.oid,u.type,"blob|commit|tag|tree")}else(u.format==="deflated"||u.format==="wrapped")&&(u.type=u.format);return u}catch(l){throw l.caller="git.readObject",l}}async function vEt({fs:t,cache:e,gitdir:n,oid:r}){const{type:s,object:i}=await kr({fs:t,cache:e,gitdir:n,oid:r,format:"content"});if(s!=="tag")throw new Hi(r,s,"tag");const o=Mi.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function wEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,cache:s={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),await vEt({fs:new jt(t),cache:s,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function xEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),oid:r,filepath:s=void 0,cache:i={}}){try{return je("fs",t),je("gitdir",n),je("oid",r),await Pb({fs:new jt(t),cache:i,gitdir:n,oid:r,filepath:s})}catch(o){throw o.caller="git.readTree",o}}async function _Et({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r,cache:s={}}){try{je("fs",t),je("gitdir",n),je("filepath",r),await Os.acquire({fs:new jt(t),gitdir:n,cache:s},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function SEt({fs:t,cache:e,onSign:n,gitdir:r,ref:s="refs/notes/commits",oid:i,author:o,committer:a,signingKey:l}){let c;try{c=await mt.resolve({gitdir:r,fs:t,ref:s})}catch(p){if(!(p instanceof Qn))throw p}let d=(await Pb({fs:t,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;d=d.filter(p=>p.path!==i);const h=await Fx({fs:t,gitdir:r,tree:d});return await YT({fs:t,cache:e,onSign:n,gitdir:r,ref:s,tree:h,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:a,signingKey:l})}async function EEt({fs:t,onSign:e,dir:n,gitdir:r=it.join(n,".git"),ref:s="refs/notes/commits",oid:i,author:o,committer:a,signingKey:l,cache:c={}}){try{je("fs",t),je("gitdir",r),je("oid",i);const u=new jt(t),d=await Ah({fs:u,gitdir:r,author:o});if(!d)throw new bi("author");const h=await U0({fs:u,gitdir:r,author:d,committer:a});if(!h)throw new bi("committer");return await SEt({fs:u,cache:c,onSign:e,gitdir:r,ref:s,oid:i,author:d,committer:h,signingKey:l})}catch(u){throw u.caller="git.removeNote",u}}async function kEt({fs:t,gitdir:e,oldref:n,ref:r,checkout:s=!1}){if(r!==_c.clean(r))throw new vl(r,_c.clean(r));if(n!==_c.clean(n))throw new vl(n,_c.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await mt.exists({fs:t,gitdir:e,ref:o}))throw new Al("branch",r,!1);const l=await mt.resolve({fs:t,gitdir:e,ref:i,depth:1});await mt.writeRef({fs:t,gitdir:e,ref:o,value:l}),await mt.deleteRef({fs:t,gitdir:e,ref:i});const u=await Fh({fs:t,gitdir:e,fullname:!0})===i;(s||u)&&await mt.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:o})}async function CEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,oldref:s,checkout:i=!1}){try{return je("fs",t),je("gitdir",n),je("ref",r),je("oldref",s),await kEt({fs:new jt(t),gitdir:n,ref:r,oldref:s,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function Cbe({gitdir:t,type:e,object:n}){return Xu(Eb.wrap({type:e,object:n}))}async function AEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r,ref:s,cache:i={}}){try{je("fs",t),je("gitdir",n),je("filepath",r);const o=new jt(t);let a,l;try{a=await mt.resolve({fs:o,gitdir:n,ref:s||"HEAD"})}catch(d){if(s)throw d}if(a)try{a=await jx({fs:o,cache:i,gitdir:n,oid:a,filepath:r})}catch{a=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const u=e&&await o.read(it.join(e,r));u&&(l=await Cbe({gitdir:n,type:"blob",object:u}),a===l&&(c=await o.lstat(it.join(e,r)))),await Os.acquire({fs:o,gitdir:n,cache:i},async function(d){d.delete({filepath:r}),a&&d.insert({filepath:r,stats:c,oid:a})})}catch(o){throw o.caller="git.reset",o}}async function TEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,depth:s}){try{return je("fs",t),je("gitdir",n),je("ref",r),await mt.resolve({fs:new jt(t),gitdir:n,ref:r,depth:s})}catch(i){throw i.caller="git.resolveRef",i}}async function PEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),path:r,value:s,append:i=!1}){try{je("fs",t),je("gitdir",n),je("path",r);const o=new jt(t),a=await Yr.get({fs:o,gitdir:n});i?await a.append(r,s):await a.set(r,s),await Yr.save({fs:o,gitdir:n,config:a})}catch(o){throw o.caller="git.setConfig",o}}async function Abe({fs:t,gitdir:e,commit:n}){const r=_r.from(n).toObject();return await wo({fs:t,gitdir:e,type:"commit",object:r,format:"content"})}class XC{static get timezoneOffsetForRefLogEntry(){const e=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(e/60)),r=Math.abs(e%60).toString().padStart(2,"0");return`${e>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(e,n,r){const s=e.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),a=XC.timezoneOffsetForRefLogEntry;return`${i} ${n} ${s} ${e.email} ${o} ${a}	${r}
`}static getStashReflogEntry(e,n=!1){return e.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const NEt={stage:Sb,workdir:Mx};let oI;async function z0(t,e){return oI===void 0&&(oI=new Sw),oI.acquire(t,e)}async function IEt(t,e,n,r,s=null){const i=it.join(n,r),o=await t.lstat(i);if(!o)throw new Qn(i);if(o.isDirectory())throw new nn(`${i}: file expected, but found directory`);const a=s?await J0e({fs:t,gitdir:e,oid:s}):void 0;let l=a?s:void 0;return a||await z0({fs:t,gitdir:e,currentFilepath:i},async()=>{const c=o.isSymbolicLink()?await t.readlink(i).then(nbe):await t.read(i);if(c===null)throw new Qn(i);l=await wo({fs:t,gitdir:e,type:"blob",object:c})}),l}async function REt({fs:t,dir:e,gitdir:n,entries:r}){async function s(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(s));i.oid=await Fx({fs:t,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await IEt(t,n,e,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(s))}async function tY({fs:t,dir:e,gitdir:n,treePair:r}){const s=r[1]==="stage",i=r.map(f=>typeof f=="string"?NEt[f]():f),o=[],u=await Ch({fs:t,cache:{},dir:e,gitdir:n,trees:i,map:async(f,[p,m])=>{if(!(f==="."||await Tb.isIgnored({fs:t,dir:e,gitdir:n,filepath:f}))&&m)return(!p||await p.oid()!==await m.oid()&&await m.oid()!==void 0)&&o.push([p,m]),{mode:await m.mode(),path:f,oid:await m.oid(),type:await m.type()}},reduce:async(f,p)=>(p=p.filter(Boolean),f?(f.children=p,f):p.length>0?p:void 0),iterate:async(f,p)=>{const m=[];for(const g of p){const[b,v]=g;s?v&&(await t.exists(`${e}/${v.toString()}`)?m.push(g):o.push([null,v])):b&&(v?m.push(g):o.push([b,null]))}return m.length?Promise.all(m.map(f)):[]}});if(o.length===0||u.length===0)return null;const h=(await REt({fs:t,dir:e,gitdir:n,entries:u})).filter(Boolean).map(f=>({mode:f.mode,path:f.path,oid:f.oid,type:f.type}));return Fx({fs:t,gitdir:n,tree:h})}async function OEt({fs:t,dir:e,gitdir:n,stashCommit:r,parentCommit:s,wasStaged:i}){const o=[],a=[],l=await Ch({fs:t,cache:{},dir:e,gitdir:n,trees:[Sa({ref:s}),Sa({ref:r})],map:async(c,[u,d])=>{if(c==="."||await Tb.isIgnored({fs:t,dir:e,gitdir:n,filepath:c}))return;const h=d?await d.type():await u.type();if(h!=="tree"&&h!=="blob")return;if(!d&&u){const p=h==="tree"?"rmdir":"rm";return h==="tree"&&o.push(c),h==="blob"&&i&&a.push({filepath:c,oid:await u.oid()}),{method:p,filepath:c}}const f=await d.oid();if(!u||await u.oid()!==f)return h==="tree"?{method:"mkdir",filepath:c}:(i&&a.push({filepath:c,oid:f,stats:await t.lstat(it.join(e,c))}),{method:"write",filepath:c,oid:f})}});await z0({fs:t,gitdir:n,dirRemoved:o,ops:l},async()=>{for(const c of l){const u=it.join(e,c.filepath);switch(c.method){case"rmdir":await t.rmdir(u);break;case"mkdir":await t.mkdir(u);break;case"rm":await t.rm(u);break;case"write":if(!o.some(d=>u.startsWith(d))){const{object:d}=await kr({fs:t,cache:{},gitdir:n,oid:c.oid});await t.exists(u)&&await t.rm(u),await t.write(u,d)}break}}}),await Os.acquire({fs:t,gitdir:n,cache:{}},async c=>{a.forEach(({filepath:u,stats:d,oid:h})=>{c.insert({filepath:u,stats:d,oid:h})})})}class Fu{constructor({fs:e,dir:n,gitdir:r=it.join(n,".git")}){Object.assign(this,{fs:e,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return it.join(this.gitdir,Fu.refStash)}get refLogsStashPath(){return it.join(this.gitdir,Fu.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Ah({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new bi("author");return this._author}async getStashSHA(e,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[e].split(" ")[1]:null}async writeStashCommit({message:e,tree:n,parent:r}){return Abe({fs:this.fs,gitdir:this.gitdir,commit:{message:e,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(e){const n=await this.readStashReflogs({parsed:!1});if(e!==0&&(e<0||e>n.length-1))throw new vl(`stash@${e}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(e,n);return r?H0({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(e){return mt.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Fu.refStash,value:e})}async writeStashReflogEntry({stashCommit:e,message:n}){const r=await this.getAuthor(),s=XC.createStashReflogEntry(r,e,n),i=this.refLogsStashPath;await z0({filepath:i,entry:s},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+s,"utf8")})}async readStashReflogs({parsed:e=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return XC.getStashReflogEntry(r,e)}}async function LEt({fs:t,dir:e,gitdir:n,message:r=""}){const s=new Fu({fs:t,dir:e,gitdir:n});await s.getAuthor();const i=await Fh({fs:t,gitdir:n,fullname:!1}),o=await mt.resolve({fs:t,gitdir:n,ref:"HEAD"}),l=(await kbe({fs:t,dir:e,gitdir:n,oid:o})).commit.message,c=[o];let u=null,d=Sa({ref:"HEAD"});const h=await tY({fs:t,dir:e,gitdir:n,treePair:[Sa({ref:"HEAD"}),"stage"]});if(h){const g=await s.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:h,parent:c});c.push(g),u=h,d=Sb()}const f=await tY({fs:t,dir:e,gitdir:n,treePair:[d,"workdir"]});if(f){const g=await s.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:f,parent:[c[c.length-1]]});c.push(g),u=f}if(!u||!h&&!f)throw new Qn("changes, nothing to stash");const p=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${l}`,m=await s.writeStashCommit({message:p,tree:u,parent:c});return await s.writeStashRef(m),await s.writeStashReflogEntry({stashCommit:m,message:p}),await cbe({fs:t,dir:e,gitdir:n,ref:i,track:!1,force:!0}),m}async function Tbe({fs:t,dir:e,gitdir:n,refIdx:r=0}){const i=await new Fu({fs:t,dir:e,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let a=0;a<o.length-1;a++){const c=(await H0({fs:t,cache:{},gitdir:n,oid:o[a+1]})).commit.message.startsWith("stash-Index");await OEt({fs:t,dir:e,gitdir:n,stashCommit:o[a+1],parentCommit:o[a],wasStaged:c})}}async function Pbe({fs:t,dir:e,gitdir:n,refIdx:r=0}){const s=new Fu({fs:t,dir:e,gitdir:n});if(!(await s.readStashCommit(r)).commit)return;const o=s.refStashPath;await z0(o,async()=>{await t.exists(o)&&await t.rm(o)});const a=await s.readStashReflogs({parsed:!1});if(!a.length)return;a.splice(r,1);const l=s.refLogsStashPath;await z0({reflogEntries:a,stashReflogPath:l,stashMgr:s},async()=>{if(a.length){await t.write(l,a.join(`
`),"utf8");const c=a[a.length-1].split(" ")[1];await s.writeStashRef(c)}else await t.rm(l)})}async function DEt({fs:t,dir:e,gitdir:n}){return new Fu({fs:t,dir:e,gitdir:n}).readStashReflogs({parsed:!0})}async function MEt({fs:t,dir:e,gitdir:n}){const r=new Fu({fs:t,dir:e,gitdir:n}),s=[r.refStashPath,r.refLogsStashPath];await z0(s,async()=>{await Promise.all(s.map(async i=>{if(await t.exists(i))return t.rm(i)}))})}async function jEt({fs:t,dir:e,gitdir:n,refIdx:r=0}){await Tbe({fs:t,dir:e,gitdir:n,refIdx:r}),await Pbe({fs:t,dir:e,gitdir:n,refIdx:r})}async function FEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),op:r="push",message:s="",refIdx:i=0}){je("fs",t),je("dir",e),je("gitdir",n),je("op",r);const o={push:LEt,apply:Tbe,drop:Pbe,list:DEt,clear:MEt,pop:jEt},a=["apply","drop","pop"];try{const l=new jt(t);["refs","logs","logs/refs"].map(d=>it.join(n,d)).forEach(async d=>{await l.exists(d)||await l.mkdir(d)});const u=o[r];if(u){if(a.includes(r)&&i<0)throw new vl(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await u({fs:l,dir:e,gitdir:n,message:s,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function BEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),filepath:r,cache:s={}}){try{je("fs",t),je("gitdir",n),je("filepath",r);const i=new jt(t);if(await Tb.isIgnored({fs:i,gitdir:n,dir:e,filepath:r}))return"ignored";const a=await $Et({fs:i,cache:s,gitdir:n}),l=await Nbe({fs:i,cache:s,gitdir:n,tree:a,path:r}),c=await Os.acquire({fs:i,gitdir:n,cache:s},async function(m){for(const g of m)if(g.path===r)return g;return null}),u=await i.lstat(it.join(e,r)),d=l!==null,h=c!==null,f=u!==null,p=async()=>{if(h&&!zC(c,u))return c.oid;{const m=await i.read(it.join(e,r)),g=await Cbe({gitdir:n,type:"blob",object:m});return h&&c.oid===g&&u.size!==-1&&Os.acquire({fs:i,gitdir:n,cache:s},async function(b){b.insert({filepath:r,stats:u,oid:g})}),g}};if(!d&&!f&&!h)return"absent";if(!d&&!f&&h)return"*absent";if(!d&&f&&!h)return"*added";if(!d&&f&&h)return await p()===c.oid?"added":"*added";if(d&&!f&&!h)return"deleted";if(d&&!f&&h)return l===c.oid,"*deleted";if(d&&f&&!h)return await p()===l?"*undeleted":"*undeletemodified";if(d&&f&&h){const m=await p();return m===l?m===c.oid?"unmodified":"*unmodified":m===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function Nbe({fs:t,cache:e,gitdir:n,tree:r,path:s}){typeof s=="string"&&(s=s.split("/"));const i=s.shift();for(const o of r)if(o.path===i){if(s.length===0)return o.oid;const{type:a,object:l}=await kr({fs:t,cache:e,gitdir:n,oid:o.oid});if(a==="tree"){const c=fo.from(l);return Nbe({fs:t,cache:e,gitdir:n,tree:c,path:s})}if(a==="blob")throw new Hi(o.oid,a,"blob",s.join("/"))}return null}async function $Et({fs:t,cache:e,gitdir:n}){let r;try{r=await mt.resolve({fs:t,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof Qn)return[]}const{tree:s}=await Pb({fs:t,cache:e,gitdir:n,oid:r});return s}async function UEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r="HEAD",filepaths:s=["."],filter:i,cache:o={},ignored:a=!1}){try{je("fs",t),je("gitdir",n),je("ref",r);const l=new jt(t);return await Ch({fs:l,cache:o,dir:e,gitdir:n,trees:[Sa({ref:r}),Mx(),Sb()],map:async function(c,[u,d,h]){if(!u&&!h&&d&&!a&&await Tb.isIgnored({fs:l,dir:e,filepath:c})||!s.some(E=>lbe(c,E)))return null;if(i&&!i(c))return;const[f,p,m]=await Promise.all([u&&u.type(),d&&d.type(),h&&h.type()]),g=[f,p,m].includes("blob");if((f==="tree"||f==="special")&&!g)return;if(f==="commit")return null;if((p==="tree"||p==="special")&&!g)return;if(m==="commit")return null;if((m==="tree"||m==="special")&&!g)return;const b=f==="blob"?await u.oid():void 0,v=m==="blob"?await h.oid():void 0;let w;f!=="blob"&&p==="blob"&&m!=="blob"?w="42":p==="blob"&&(w=await d.oid());const _=[void 0,b,w,v],S=_.map(E=>_.indexOf(E));return S.shift(),[c,...S]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function HEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,object:s,force:i=!1}){try{je("fs",t),je("gitdir",n),je("ref",r);const o=new jt(t);if(r===void 0)throw new ao("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const a=await mt.resolve({fs:o,gitdir:n,ref:s||"HEAD"});if(!i&&await mt.exists({fs:o,gitdir:n,ref:r}))throw new Al("tag",r);await mt.writeRef({fs:o,gitdir:n,ref:r,value:a})}catch(o){throw o.caller="git.tag",o}}async function zEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),cache:r={},filepath:s,oid:i,mode:o,add:a,remove:l,force:c}){try{je("fs",t),je("gitdir",n),je("filepath",s);const u=new jt(t);if(l)return await Os.acquire({fs:u,gitdir:n,cache:r},async function(h){let f;if(!c&&(f=await u.lstat(it.join(e,s)),f)){if(f.isDirectory())throw new kh("directory");return}h.has({filepath:s})&&h.delete({filepath:s})});let d;if(!i){if(d=await u.lstat(it.join(e,s)),!d)throw new Qn(`file at "${s}" on disk and "remove" not set`);if(d.isDirectory())throw new kh("directory")}return await Os.acquire({fs:u,gitdir:n,cache:r},async function(h){if(!a&&!h.has({filepath:s}))throw new Qn(`file at "${s}" in index and "add" not set`);let f={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};if(!i){f=d;const p=f.isSymbolicLink()?await u.readlink(it.join(e,s)):await u.read(it.join(e,s));i=await wo({fs:u,gitdir:n,type:"blob",format:"content",object:p})}return h.insert({filepath:s,oid:i,stats:f}),i})}catch(u){throw u.caller="git.updateIndex",u}}function VEt(){try{return XT.version}catch(t){throw t.caller="git.version",t}}async function WEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),trees:r,map:s,reduce:i,iterate:o,cache:a={}}){try{return je("fs",t),je("gitdir",n),je("trees",r),await Ch({fs:new jt(t),cache:a,dir:e,gitdir:n,trees:r,map:s,reduce:i,iterate:o})}catch(l){throw l.caller="git.walk",l}}async function GEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),blob:r}){try{return je("fs",t),je("gitdir",n),je("blob",r),await wo({fs:new jt(t),gitdir:n,type:"blob",object:r,format:"content"})}catch(s){throw s.caller="git.writeBlob",s}}async function qEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),commit:r}){try{return je("fs",t),je("gitdir",n),je("commit",r),await Abe({fs:new jt(t),gitdir:n,commit:r})}catch(s){throw s.caller="git.writeCommit",s}}async function KEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),type:r,object:s,format:i="parsed",oid:o,encoding:a=void 0}){try{const l=new jt(t);if(i==="parsed"){switch(r){case"commit":s=_r.from(s).toObject();break;case"tree":s=fo.from(s).toObject();break;case"blob":s=_t.from(s,a);break;case"tag":s=Mi.from(s).toObject();break;default:throw new Hi(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await wo({fs:l,gitdir:n,type:r,object:s,oid:o,format:i}),o}catch(l){throw l.caller="git.writeObject",l}}async function YEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),ref:r,value:s,force:i=!1,symbolic:o=!1}){try{je("fs",t),je("gitdir",n),je("ref",r),je("value",s);const a=new jt(t);if(r!==_c.clean(r))throw new vl(r,_c.clean(r));if(!i&&await mt.exists({fs:a,gitdir:n,ref:r}))throw new Al("ref",r);o?await mt.writeSymbolicRef({fs:a,gitdir:n,ref:r,value:s}):(s=await mt.resolve({fs:a,gitdir:n,ref:s}),await mt.writeRef({fs:a,gitdir:n,ref:r,value:s}))}catch(a){throw a.caller="git.writeRef",a}}async function JEt({fs:t,gitdir:e,tag:n}){const r=Mi.from(n).toObject();return await wo({fs:t,gitdir:e,type:"tag",object:r,format:"content"})}async function XEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),tag:r}){try{return je("fs",t),je("gitdir",n),je("tag",r),await JEt({fs:new jt(t),gitdir:n,tag:r})}catch(s){throw s.caller="git.writeTag",s}}async function ZEt({fs:t,dir:e,gitdir:n=it.join(e,".git"),tree:r}){try{return je("fs",t),je("gitdir",n),je("tree",r),await Fx({fs:new jt(t),gitdir:n,tree:r})}catch(s){throw s.caller="git.writeTree",s}}var QEt={Errors:C2t,STAGE:Sb,TREE:Sa,WORKDIR:Mx,add:V2t,abortMerge:$2t,addNote:G2t,addRemote:q2t,annotatedTag:Y2t,branch:X2t,checkout:cbe,clone:cSt,commit:uSt,getConfig:ISt,getConfigAll:OSt,setConfig:PEt,currentBranch:dSt,deleteBranch:fSt,deleteRef:pSt,deleteRemote:gSt,deleteTag:ySt,expandOid:_St,expandRef:SSt,fastForward:ASt,fetch:TSt,findMergeBase:PSt,findRoot:NSt,getRemoteInfo:LSt,getRemoteInfo2:DSt,hashBlob:jSt,indexPack:BSt,init:$St,isDescendent:USt,isIgnored:HSt,listBranches:zSt,listFiles:WSt,listNotes:qSt,listRefs:KSt,listRemotes:JSt,listServerRefs:QSt,listTags:eEt,log:sEt,merge:iEt,packObjects:lEt,pull:cEt,push:pEt,readBlob:mEt,readCommit:kbe,readNote:bEt,readObject:yEt,readTag:wEt,readTree:xEt,remove:_Et,removeNote:EEt,renameBranch:CEt,resetIndex:AEt,updateIndex:zEt,resolveRef:TEt,status:BEt,statusMatrix:UEt,tag:HEt,version:VEt,walk:WEt,writeBlob:GEt,writeCommit:qEt,writeObject:KEt,writeRef:YEt,writeTag:XEt,writeTree:ZEt,stash:FEt};function ekt(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function tkt(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:ekt(t)}async function nkt(t,e){const n=tkt(t);for(;;){const{value:r,done:s}=await n.next();if(r&&await e(r),s)break}n.return&&n.return()}async function rkt(t){let e=0;const n=[];await nkt(t,i=>{n.push(i),e+=i.byteLength});const r=new Uint8Array(e);let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}function skt(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{next(){return e.read()},return(){return e.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function ikt({onProgress:t,url:e,method:n="GET",headers:r={},body:s}){s&&(s=await rkt(s));const i=await fetch(e,{method:n,headers:r,body:s}),o=i.body&&i.body.getReader?skt(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[a,l]of i.headers.entries())r[a]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var okt={request:ikt};const nY=t=>{const e=t.split("/")[2],n=Zn.get(`git:${e}`);if(!n)return null;try{const{username:r,password:s}=JSON.parse(n||"{}");return{username:r,password:s}}catch(r){return console.log(`Failed to parse Git Cookie ${r}`),null}},akt=(t,e)=>{const n=t.split("/")[2];Zn.set(`git:${n}`,JSON.stringify(e))};function lkt(){const[t,e]=N.useState(!1),[n,r]=N.useState(),[s,i]=N.useState(),o=N.useRef({});N.useEffect(()=>{Su.then(l=>{o.current={},r(l),i(Ibe(l,o)),e(!0)})},[]);const a=N.useCallback(async l=>{if(!n||!s||!t)throw"Webcontainer not initialized";o.current={};const c={"User-Agent":"bolt.diy"},u=nY(l);u&&(c.Authorization=`Basic ${_t.from(`${u.username}:${u.password}`).toString("base64")}`);try{await QEt.clone({fs:s,http:okt,dir:n.workdir,url:l,depth:1,singleBranch:!0,corsProxy:"/api/git-proxy",headers:c,onAuth:h=>{let f=nY(h);return f||(confirm("This repo is password protected. Ready to enter a username & password?")?(f={username:prompt("Enter username"),password:prompt("Enter password")},f):{cancel:!0})},onAuthFailure:(h,f)=>{throw Ve.error(`Error Authenticating with ${h.split("/")[2]}`),`Error Authenticating with ${h.split("/")[2]}`},onAuthSuccess:(h,f)=>{akt(h,f)}});const d={};for(const[h,f]of Object.entries(o.current))d[h]=f;return{workdir:n.workdir,data:d}}catch(d){throw console.error("Git clone error:",d),d}},[n,s,t]);return{ready:t,gitClone:a}}const Ibe=(t,e)=>({promises:{readFile:async(n,r)=>{const s=r?.encoding,i=Yl.relative(t.workdir,n);try{return await t.fs.readFile(i,s)}catch(o){throw o}},writeFile:async(n,r,s)=>{const i=s.encoding,o=Yl.relative(t.workdir,n);e.current&&(e.current[o]={data:r,encoding:i});try{return await t.fs.writeFile(o,r,{...s,encoding:i})}catch(a){throw a}},mkdir:async(n,r)=>{const s=Yl.relative(t.workdir,n);try{return await t.fs.mkdir(s,{...r,recursive:!0})}catch(i){throw i}},readdir:async(n,r)=>{const s=Yl.relative(t.workdir,n);try{return await t.fs.readdir(s,r)}catch(i){throw i}},rm:async(n,r)=>{const s=Yl.relative(t.workdir,n);try{return await t.fs.rm(s,{...r||{}})}catch(i){throw i}},rmdir:async(n,r)=>{const s=Yl.relative(t.workdir,n);try{return await t.fs.rm(s,{recursive:!0,...r})}catch(i){throw i}},unlink:async n=>{const r=Yl.relative(t.workdir,n);try{return await t.fs.rm(r,{recursive:!1})}catch(s){throw s}},stat:async n=>{try{const r=Yl.relative(t.workdir,n),s=await t.fs.readdir(Yl.dirname(r),{withFileTypes:!0}),i=Yl.basename(r),o=s.find(a=>a.name==i);if(!o)throw new Error(`ENOENT: no such file or directory, stat '${n}'`);return{isFile:()=>o.isFile(),isDirectory:()=>o.isDirectory(),isSymbolicLink:()=>!1,size:1,mode:438,mtimeMs:Date.now(),uid:1e3,gid:1e3}}catch(r){console.log(r?.message);const s=new Error(`ENOENT: no such file or directory, stat '${n}'`);throw s.code="ENOENT",s.errno=-2,s.syscall="stat",s.path=n,s}},lstat:async n=>await Ibe(t,e).promises.stat(n),readlink:async n=>{throw new Error(`EINVAL: invalid argument, readlink '${n}'`)},symlink:async(n,r)=>{throw new Error(`EPERM: operation not permitted, symlink '${n}' -> '${r}'`)},chmod:async(n,r)=>await Promise.resolve()}}),Yl={dirname:t=>!t||!t.includes("/")?".":(t=t.replace(/\/+$/,""),t.split("/").slice(0,-1).join("/")||"/"),basename:(t,e)=>{t=t.replace(/\/+$/,"");const n=t.split("/").pop()||"";return e&&n.endsWith(e)?n.slice(0,-e.length):n},relative:(t,e)=>{if(!t||!e)return".";const n=u=>u.replace(/\/+$/,"").split("/").filter(Boolean),r=n(t),s=n(e);let i=0;const o=Math.min(r.length,s.length);for(let u=0;u<o&&r[u]===s[u];u++)i++;const a=r.length-i,l=s.slice(i),c=[...Array(a).fill(".."),...l];return c.length===0?".":c.join("/")}},ckt=({message:t="Loading...",progress:e,progressText:n})=>y.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/80 z-50 backdrop-blur-sm",children:y.jsxs("div",{className:"relative flex flex-col items-center gap-4 p-8 rounded-lg bg-bolt-elements-background-depth-2 shadow-lg",children:[y.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress",style:{fontSize:"2rem"}}),y.jsx("p",{className:"text-lg text-bolt-elements-textTertiary",children:t}),e!==void 0&&y.jsxs("div",{className:"w-64 flex flex-col gap-2",children:[y.jsx("div",{className:"w-full h-2 bg-bolt-elements-background-depth-1 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-bolt-elements-loader-progress transition-all duration-300 ease-out rounded-full",style:{width:`${Math.min(100,Math.max(0,e))}%`}})}),n&&y.jsx("p",{className:"text-sm text-bolt-elements-textTertiary text-center",children:n})]})]})}),Rbe=N.forwardRef(({className:t,type:e,...n},r)=>y.jsx("input",{type:e,className:Ne("flex h-10 w-full rounded-md border border-bolt-elements-border bg-bolt-elements-background px-3 py-2 text-sm ring-offset-bolt-elements-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-bolt-elements-textSecondary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-bolt-elements-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Rbe.displayName="Input";function ukt({isOpen:t,onClose:e,onConfirm:n,stats:r,isLargeRepo:s}){return y.jsx(Ea,{open:t,onOpenChange:i=>!i&&e(),children:y.jsxs(Gf,{children:[y.jsx(qf,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),y.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:y.jsx(lt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:y.jsxs(Kf,{className:"bg-white dark:bg-[#1E1E1E] rounded-lg border border-[#E5E5E5] dark:border-[#333333] shadow-xl",children:[y.jsx("div",{className:"p-6 space-y-4",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-[#111111] dark:text-white",children:"Repository Overview"}),y.jsxs("div",{className:"mt-4 space-y-2",children:[y.jsx("p",{className:"text-sm text-[#666666] dark:text-[#999999]",children:"Repository Statistics:"}),y.jsxs("div",{className:"space-y-2 text-sm text-[#111111] dark:text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"i-ph:files text-purple-500 w-4 h-4"}),y.jsxs("span",{children:["Total Files: ",r.totalFiles]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"i-ph:database text-purple-500 w-4 h-4"}),y.jsxs("span",{children:["Total Size: ",dE(r.totalSize)]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"i-ph:code text-purple-500 w-4 h-4"}),y.jsxs("span",{children:["Languages:"," ",Object.entries(r.languages).sort(([,i],[,o])=>o-i).slice(0,3).map(([i,o])=>`${i} (${dE(o)})`).join(", ")]})]}),r.hasPackageJson&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"i-ph:package text-purple-500 w-4 h-4"}),y.jsx("span",{children:"Has package.json"})]}),r.hasDependencies&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"i-ph:tree-structure text-purple-500 w-4 h-4"}),y.jsx("span",{children:"Has dependencies"})]})]})]}),s&&y.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-500/10 rounded-lg text-sm flex items-start gap-2",children:[y.jsx("span",{className:"i-ph:warning text-yellow-600 dark:text-yellow-500 w-4 h-4 flex-shrink-0 mt-0.5"}),y.jsxs("div",{className:"text-yellow-800 dark:text-yellow-500",children:["This repository is quite large (",dE(r.totalSize),"). Importing it might take a while and could impact performance."]})]})]})}),y.jsxs("div",{className:"border-t border-[#E5E5E5] dark:border-[#333333] p-4 flex justify-end gap-3 bg-[#F9F9F9] dark:bg-[#252525] rounded-b-lg",children:[y.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#333333] text-[#666666] hover:text-[#111111] dark:text-[#999999] dark:hover:text-white transition-colors",children:"Cancel"}),y.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg bg-purple-500 text-white hover:bg-purple-600 transition-colors",children:"OK"})]})]})})})]})})}function dkt({isOpen:t,onClose:e,onSelect:n}){const[r,s]=N.useState(null),[i,o]=N.useState(!1),[a,l]=N.useState([]),[c,u]=N.useState(""),[d,h]=N.useState([]),[f,p]=N.useState("my-repos"),[m,g]=N.useState(""),[b,v]=N.useState([]),[w,_]=N.useState(""),[S,E]=N.useState({}),[k,x]=N.useState(null),[I,R]=N.useState(!1),[C,T]=N.useState(null),[O,P]=N.useState("");N.useEffect(()=>{t&&f==="my-repos"&&U()},[t,f]);const U=async()=>{const q=Zf("github_connection");if(!q?.token){Ve.error("Please connect your GitHub account first");return}o(!0);try{const ne=await fetch("https://api.github.com/user/repos?sort=updated&per_page=100&type=all",{headers:{Authorization:`Bearer ${q.token}`}});if(!ne.ok)throw new Error("Failed to fetch repositories");const te=await ne.json();if(Array.isArray(te)&&te.every(Y=>typeof Y=="object"&&Y!==null&&"full_name"in Y))l(te);else throw new Error("Invalid repository data format")}catch(ne){console.error("Error fetching repos:",ne),Ve.error("Failed to fetch your repositories")}finally{o(!1)}},ee=async q=>{o(!0),h([]);try{let ne=q;S.language&&(ne+=` language:${S.language}`),S.stars&&(ne+=` stars:>${S.stars}`),S.forks&&(ne+=` forks:>${S.forks}`);const te=await fetch(`https://api.github.com/search/repositories?q=${encodeURIComponent(ne)}&sort=stars&order=desc`,{headers:{Accept:"application/vnd.github.v3+json"}});if(!te.ok)throw new Error("Failed to search repositories");const Y=await te.json();if(typeof Y=="object"&&Y!==null&&"items"in Y&&Array.isArray(Y.items))h(Y.items);else throw new Error("Invalid search results format")}catch(ne){console.error("Error searching repos:",ne),Ve.error("Failed to search repositories")}finally{o(!1)}},X=async q=>{o(!0);try{const ne=await fetch(`https://api.github.com/repos/${q.full_name}/branches`,{headers:{Authorization:`Bearer ${Zf("github_connection")?.token}`}});if(!ne.ok)throw new Error("Failed to fetch branches");const te=await ne.json();if(Array.isArray(te)&&te.every(Y=>typeof Y=="object"&&Y!==null&&"name"in Y))v(te.map(Y=>({name:Y.name,default:Y.name===q.default_branch})));else throw new Error("Invalid branch data format")}catch(ne){console.error("Error fetching branches:",ne),Ve.error("Failed to fetch branches")}finally{o(!1)}},Z=async q=>{s(q),await X(q)},F=q=>`${q.replace(/\/tree\/[^/]+/,"").replace(/\/$/,"").replace(/\.git$/,"")}.git`,M=async q=>{try{const[ne,te]=q.replace(/\.git$/,"").split("/").slice(-2),Y=Zf("github_connection"),de=Y?.token?{Authorization:`Bearer ${Y.token}`}:{},xe=await(await fetch(`https://api.github.com/repos/${ne}/${te}`,{headers:de})).json();if(!xe.default_branch)throw new Error("Failed to fetch repository branch");const Ae=xe.default_branch,Pe=await fetch(`https://api.github.com/repos/${ne}/${te}/git/trees/${Ae}?recursive=1`,{headers:de});if(!Pe.ok)throw new Error("Failed to fetch repository structure");const K=await Pe.json();let ge=0,re=0;const le={};let se=!1,fe=!1;for(const Ie of K.tree)if(Ie.type==="blob"){if(re++,Ie.size&&(ge+=Ie.size),Ie.path==="package.json"){se=!0;const Ue=await fetch(`https://api.github.com/repos/${ne}/${te}/contents/package.json`,{headers:de});if(Ue.ok){const Fe=await Ue.json(),Be=JSON.parse(_t.from(Fe.content,"base64").toString());fe=!!(Be.dependencies||Be.devDependencies||Be.peerDependencies)}}const we=Ie.path.split(".").pop()?.toLowerCase();we&&(le[we]=(le[we]||0)+(Ie.size||0))}const Ce={totalFiles:re,totalSize:ge,languages:le,hasPackageJson:se,hasDependencies:fe};return x(Ce),Ce}catch(ne){return console.error("Error verifying repository:",ne),Ve.error("Failed to verify repository"),null}},G=async()=>{try{let q;if(f==="url"&&m)q=F(m);else if(r)q=F(r.html_url),w&&(q=`${q}#${w}`);else return;const ne=await M(q);if(!ne)return;T(ne),P(q),R(!0)}catch(q){console.error("Error preparing repository:",q),Ve.error("Failed to prepare repository. Please try again.")}},D=()=>{R(!1),O&&(n(O),e())},j=(q,ne)=>{let te=ne;(q==="stars"||q==="forks")&&(te=ne?parseInt(ne,10):void 0),E(Y=>({...Y,[q]:te})),ee(c)},W=()=>{o(!1),u(""),h([]),e()};return y.jsxs(Ea,{open:t,onOpenChange:q=>{q||W()},children:[y.jsxs(Gf,{children:[y.jsx(qf,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),y.jsxs(Kf,{className:"fixed top-[50%] left-[50%] -translate-x-1/2 -translate-y-1/2 w-[90vw] md:w-[600px] max-h-[85vh] overflow-hidden bg-white dark:bg-[#1A1A1A] rounded-xl shadow-xl z-[51] border border-[#E5E5E5] dark:border-[#333333]",children:[y.jsxs("div",{className:"p-4 border-b border-[#E5E5E5] dark:border-[#333333] flex items-center justify-between",children:[y.jsx(QD,{className:"text-lg font-semibold text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"Import GitHub Repository"}),y.jsxs(e0,{onClick:W,className:Ne("p-2 rounded-lg transition-all duration-200 ease-in-out","text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary","dark:text-bolt-elements-textTertiary-dark dark:hover:text-bolt-elements-textPrimary-dark","hover:bg-bolt-elements-background-depth-2 dark:hover:bg-bolt-elements-background-depth-3","focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark"),children:[y.jsx("span",{className:"i-ph:x block w-5 h-5","aria-hidden":"true"}),y.jsx("span",{className:"sr-only",children:"Close dialog"})]})]}),y.jsxs("div",{className:"p-4",children:[y.jsxs("div",{className:"flex gap-2 mb-4",children:[y.jsxs(aI,{active:f==="my-repos",onClick:()=>p("my-repos"),children:[y.jsx("span",{className:"i-ph:book-bookmark"}),"My Repos"]}),y.jsxs(aI,{active:f==="search",onClick:()=>p("search"),children:[y.jsx("span",{className:"i-ph:magnifying-glass"}),"Search"]}),y.jsxs(aI,{active:f==="url",onClick:()=>p("url"),children:[y.jsx("span",{className:"i-ph:link"}),"URL"]})]}),f==="url"?y.jsxs("div",{className:"space-y-4",children:[y.jsx(Rbe,{placeholder:"Enter repository URL",value:m,onChange:q=>g(q.target.value),className:Ne("w-full",{"border-red-500":!1})}),y.jsx("button",{onClick:G,disabled:!m,className:"w-full h-10 px-4 py-2 rounded-lg bg-purple-500 text-white hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2 justify-center",children:"Import Repository"})]}):y.jsxs(y.Fragment,{children:[f==="search"&&y.jsxs("div",{className:"space-y-4 mb-4",children:[y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",placeholder:"Search repositories...",value:c,onChange:q=>{u(q.target.value),ee(q.target.value)},className:"flex-1 px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333] text-bolt-elements-textPrimary"}),y.jsx("button",{onClick:()=>E({}),className:"px-3 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#252525] text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary",children:y.jsx("span",{className:"i-ph:funnel-simple"})})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsx("input",{type:"text",placeholder:"Filter by language...",value:S.language||"",onChange:q=>{E({...S,language:q.target.value}),ee(c)},className:"px-3 py-1.5 text-sm rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333]"}),y.jsx("input",{type:"number",placeholder:"Min stars...",value:S.stars||"",onChange:q=>j("stars",q.target.value),className:"px-3 py-1.5 text-sm rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333]"})]}),y.jsx("input",{type:"number",placeholder:"Min forks...",value:S.forks||"",onChange:q=>j("forks",q.target.value),className:"px-3 py-1.5 text-sm rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333]"})]}),y.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:r?y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:()=>s(null),className:"p-1.5 rounded-lg hover:bg-[#F5F5F5] dark:hover:bg-[#252525]",children:y.jsx("span",{className:"i-ph:arrow-left w-4 h-4"})}),y.jsx("h3",{className:"font-medium",children:r.full_name})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-sm text-bolt-elements-textSecondary",children:"Select Branch"}),y.jsx("select",{value:w,onChange:q=>_(q.target.value),className:"w-full px-3 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark",children:b.map(q=>y.jsxs("option",{value:q.name,className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:[q.name," ",q.default?"(default)":""]},q.name))}),y.jsx("button",{onClick:G,className:"w-full h-10 px-4 py-2 rounded-lg bg-purple-500 text-white hover:bg-purple-600 transition-all duration-200 flex items-center gap-2 justify-center",children:"Import Selected Branch"})]})]}):y.jsx(hkt,{repos:f==="my-repos"?a:d,isLoading:i,onSelect:Z,activeTab:f})})]})]})]})]}),C&&y.jsx(ukt,{isOpen:I,onClose:D,onConfirm:D,stats:C,isLargeRepo:C.totalSize>50*1024*1024})]})}function aI({active:t,onClick:e,children:n}){return y.jsx("button",{onClick:e,className:Ne("px-4 py-2 h-10 rounded-lg transition-all duration-200 flex items-center gap-2 min-w-[120px] justify-center",t?"bg-purple-500 text-white hover:bg-purple-600":"bg-[#F5F5F5] dark:bg-[#252525] text-bolt-elements-textPrimary dark:text-white hover:bg-[#E5E5E5] dark:hover:bg-[#333333] border border-[#E5E5E5] dark:border-[#333333]"),children:n})}function hkt({repos:t,isLoading:e,onSelect:n,activeTab:r}){return e?y.jsxs("div",{className:"flex items-center justify-center py-8 text-bolt-elements-textSecondary",children:[y.jsx("span",{className:"i-ph:spinner animate-spin mr-2"}),"Loading repositories..."]}):t.length===0?y.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-bolt-elements-textSecondary",children:[y.jsx("span",{className:"i-ph:folder-simple-dashed w-12 h-12 mb-2 opacity-50"}),y.jsx("p",{children:r==="my-repos"?"No repositories found":"Search for repositories"})]}):t.map(s=>y.jsx(fkt,{repo:s,onSelect:()=>n(s)},s.full_name))}function fkt({repo:t,onSelect:e}){return y.jsxs("div",{className:"p-4 rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333] hover:border-purple-500/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"i-ph:git-repository text-bolt-elements-textTertiary"}),y.jsx("h3",{className:"font-medium text-bolt-elements-textPrimary dark:text-white",children:t.name})]}),y.jsxs("button",{onClick:e,className:"px-4 py-2 h-10 rounded-lg bg-purple-500 text-white hover:bg-purple-600 transition-all duration-200 flex items-center gap-2 min-w-[120px] justify-center",children:[y.jsx("span",{className:"i-ph:download-simple w-4 h-4"}),"Import"]})]}),t.description&&y.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mb-3",children:t.description}),y.jsxs("div",{className:"flex items-center gap-4 text-sm text-bolt-elements-textTertiary",children:[t.language&&y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"i-ph:code"}),t.language]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"i-ph:star"}),t.stargazers_count.toLocaleString()]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"i-ph:clock"}),new Date(t.updated_at).toLocaleDateString()]})]})]})}const pkt=["node_modules/**",".git/**",".github/**",".vscode/**","dist/**","build/**",".next/**","coverage/**",".cache/**",".idea/**","**/*.log","**/.DS_Store","**/npm-debug.log*","**/yarn-debug.log*","**/yarn-error.log*","**/*lock.json","**/*lock.yaml"],mkt=CM().add(pkt),gkt=100*1024,bkt=500*1024;function ykt({importChat:t,className:e}){const{ready:n,gitClone:r}=lkt(),[s,i]=N.useState(!1),[o,a]=N.useState(!1),l=async c=>{if(n){i(!0);try{const{workdir:u,data:d}=await r(c);if(t){const h=Object.keys(d).filter(S=>!mkt.ignores(S)),f=new TextDecoder("utf-8");let p=0;const m=[],g=[];for(const S of h){const{data:E,encoding:k}=d[S];if(E instanceof Uint8Array&&!S.match(/\.(txt|md|astro|mjs|js|jsx|ts|tsx|json|html|css|scss|less|yml|yaml|xml|svg)$/i)){m.push(S);continue}try{const x=k==="utf8"?E:E instanceof Uint8Array?f.decode(E):"";if(!x)continue;const I=new TextEncoder().encode(x).length;if(I>gkt){m.push(`${S} (too large: ${Math.round(I/1024)}KB)`);continue}if(p+I>bkt){m.push(`${S} (would exceed total size limit)`);continue}p+=I,g.push({path:S,content:x})}catch(x){m.push(`${S} (error: ${x.message})`)}}const b=await AM(g),v=TM(b),_=[{role:"assistant",content:`Cloning the repo ${c} into ${u}
${m.length>0?`
Skipped files (${m.length}):
${m.map(S=>`- ${S}`).join(`
`)}`:""}

<boltArtifact id="imported-files" title="Git Cloned Files" type="bundled">
${g.map(S=>`<boltAction type="file" filePath="${S.path}">
${Zoe(S.content)}
</boltAction>`).join(`
`)}
</boltArtifact>`,id:Nv(),createdAt:new Date}];v&&_.push(v),await t(`Git Project:${c.split("/").slice(-1)[0]}`,_)}}catch(u){console.error("Error during import:",u),Ve.error("Failed to import repository")}finally{i(!1)}}};return y.jsxs(y.Fragment,{children:[y.jsxs(HT,{onClick:()=>a(!0),title:"Clone a Git Repo",variant:"outline",size:"lg",className:Ne("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out",e),disabled:!n||s,children:[y.jsx("span",{className:"i-ph:git-branch w-4 h-4"}),"Clone a Git Repo"]}),y.jsx(dkt,{isOpen:o,onClose:()=>a(!1),onSelect:l}),s&&y.jsx(ckt,{message:"Please wait while we clone the repository..."})]})}const vkt=({files:t,imageDataList:e,onRemove:n})=>!t||t.length===0?null:y.jsx("div",{className:"flex flex-row overflow-x-auto -mt-2",children:t.map((r,s)=>y.jsx("div",{className:"mr-2 relative",children:e[s]&&y.jsxs("div",{className:"relative pt-4 pr-4",children:[y.jsx("img",{src:e[s],alt:r.name,className:"max-h-20"}),y.jsx("button",{onClick:()=>n(s),className:"absolute top-1 right-1 z-10 bg-black rounded-full w-5 h-5 shadow-md hover:bg-gray-900 transition-colors flex items-center justify-center",children:y.jsx("div",{className:"i-ph:x w-3 h-3 text-gray-200"})})]})},r.name+r.size))}),wkt=({model:t,setModel:e,provider:n,setProvider:r,modelList:s,providerList:i,modelLoading:o})=>{const[a,l]=N.useState(""),[c,u]=N.useState(!1),[d,h]=N.useState(-1),f=N.useRef(null),p=N.useRef([]),m=N.useRef(null);N.useEffect(()=>{const v=w=>{m.current&&!m.current.contains(w.target)&&(u(!1),l(""))};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const g=[...s].filter(v=>v.provider===n?.name&&v.name).filter(v=>v.label.toLowerCase().includes(a.toLowerCase())||v.name.toLowerCase().includes(a.toLowerCase()));N.useEffect(()=>{h(-1)},[a,c]),N.useEffect(()=>{c&&f.current&&f.current.focus()},[c]);const b=v=>{if(c)switch(v.key){case"ArrowDown":v.preventDefault(),h(w=>{const _=w+1;return _>=g.length?0:_});break;case"ArrowUp":v.preventDefault(),h(w=>{const _=w-1;return _<0?g.length-1:_});break;case"Enter":if(v.preventDefault(),d>=0&&d<g.length){const w=g[d];e?.(w.name),u(!1),l("")}break;case"Escape":v.preventDefault(),u(!1),l("");break;case"Tab":!v.shiftKey&&d===g.length-1&&u(!1);break}};return N.useEffect(()=>{d>=0&&p.current[d]&&p.current[d]?.scrollIntoView({block:"nearest"})},[d]),N.useEffect(()=>{if(i.length!==0&&n&&!i.map(v=>v.name).includes(n.name)){const v=i[0];r?.(v);const w=s.find(_=>_.provider===v.name);w&&e?.(w.name)}},[i,n,r,s,e]),i.length===0?y.jsx("div",{className:"mb-2 p-4 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary",children:y.jsx("p",{className:"text-center",children:"No providers are currently enabled. Please enable at least one provider in the settings to start using the chat."})}):y.jsxs("div",{className:"mb-2 flex gap-2 flex-col sm:flex-row",children:[y.jsx("select",{value:n?.name??"",onChange:v=>{const w=i.find(S=>S.name===v.target.value);w&&r&&r(w);const _=[...s].find(S=>S.provider===v.target.value);_&&e&&e(_.name)},className:"flex-1 p-2 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus transition-all",children:i.map(v=>y.jsx("option",{value:v.name,children:v.name},v.name))}),y.jsxs("div",{className:"relative flex-1 lg:max-w-[70%]",onKeyDown:b,ref:m,children:[y.jsx("div",{className:Ne("w-full p-2 rounded-lg border border-bolt-elements-borderColor","bg-bolt-elements-prompt-background text-bolt-elements-textPrimary","focus-within:outline-none focus-within:ring-2 focus-within:ring-bolt-elements-focus","transition-all cursor-pointer",c?"ring-2 ring-bolt-elements-focus":void 0),onClick:()=>u(!c),onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),u(!c))},role:"combobox","aria-expanded":c,"aria-controls":"model-listbox","aria-haspopup":"listbox",tabIndex:0,children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"truncate",children:s.find(v=>v.name===t)?.label||"Select model"}),y.jsx("div",{className:Ne("i-ph:caret-down w-4 h-4 text-bolt-elements-textSecondary opacity-75",c?"rotate-180":void 0)})]})}),c&&y.jsxs("div",{className:"absolute z-10 w-full mt-1 py-1 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-background-depth-2  shadow-lg",role:"listbox",id:"model-listbox",children:[y.jsx("div",{className:"px-2 pb-2",children:y.jsxs("div",{className:"relative",children:[y.jsx("input",{ref:f,type:"text",value:a,onChange:v=>l(v.target.value),placeholder:"Search models...",className:Ne("w-full pl-8 pr-3 py-1.5 rounded-md text-sm","bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder:text-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus","transition-all"),onClick:v=>v.stopPropagation(),role:"searchbox","aria-label":"Search models"}),y.jsx("div",{className:"absolute left-2.5 top-1/2 -translate-y-1/2",children:y.jsx("span",{className:"i-ph:magnifying-glass text-bolt-elements-textTertiary"})})]})}),y.jsx("div",{className:Ne("max-h-60 overflow-y-auto","sm:scrollbar-none","[&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar]:h-2","[&::-webkit-scrollbar-thumb]:bg-bolt-elements-borderColor","[&::-webkit-scrollbar-thumb]:hover:bg-bolt-elements-borderColorHover","[&::-webkit-scrollbar-thumb]:rounded-full","[&::-webkit-scrollbar-track]:bg-bolt-elements-background-depth-2","[&::-webkit-scrollbar-track]:rounded-full","sm:[&::-webkit-scrollbar]:w-1.5 sm:[&::-webkit-scrollbar]:h-1.5","sm:hover:[&::-webkit-scrollbar-thumb]:bg-bolt-elements-borderColor/50","sm:hover:[&::-webkit-scrollbar-thumb:hover]:bg-bolt-elements-borderColor","sm:[&::-webkit-scrollbar-track]:bg-transparent"),children:o==="all"||o===n?.name?y.jsx("div",{className:"px-3 py-2 text-sm text-bolt-elements-textTertiary",children:"Loading..."}):g.length===0?y.jsx("div",{className:"px-3 py-2 text-sm text-bolt-elements-textTertiary",children:"No models found"}):g.map((v,w)=>y.jsx("div",{ref:_=>p.current[w]=_,role:"option","aria-selected":t===v.name,className:Ne("px-3 py-2 text-sm cursor-pointer","hover:bg-bolt-elements-background-depth-3","text-bolt-elements-textPrimary","outline-none",t===v.name||d===w?"bg-bolt-elements-background-depth-2":void 0,d===w?"ring-1 ring-inset ring-bolt-elements-focus":void 0),onClick:_=>{_.stopPropagation(),e?.(v.name),u(!1),l("")},tabIndex:d===w?0:-1,children:v.label},w))})]})]})]})},xkt=({isListening:t,onStart:e,onStop:n,disabled:r})=>y.jsx(Pr,{title:t?"Stop listening":"Start speech recognition",disabled:r,className:Ne("transition-all",{"text-bolt-elements-item-contentAccent":t}),onClick:t?n:e,children:t?y.jsx("div",{className:"i-ph:microphone-slash text-xl"}):y.jsx("div",{className:"i-ph:microphone text-xl"})}),_kt=({setUploadedFiles:t,setImageDataList:e,uploadedFiles:n,imageDataList:r})=>(N.useEffect(()=>(t&&e&&(window.__BOLT_SET_UPLOADED_FILES__=t,window.__BOLT_SET_IMAGE_DATA_LIST__=e,window.__BOLT_UPLOADED_FILES__=n,window.__BOLT_IMAGE_DATA_LIST__=r),()=>{delete window.__BOLT_SET_UPLOADED_FILES__,delete window.__BOLT_SET_IMAGE_DATA_LIST__,delete window.__BOLT_UPLOADED_FILES__,delete window.__BOLT_IMAGE_DATA_LIST__}),[t,e,n,r]),null),Skt=({template:t})=>y.jsx("a",{href:`/git?url=https://github.com/${t.githubRepo}.git`,"data-state":"closed","data-discover":"true",className:"items-center justify-center",children:y.jsx("div",{className:`inline-block ${t.icon} w-8 h-8 text-4xl transition-theme opacity-25 hover:opacity-100 hover:text-purple-500 dark:text-white dark:opacity-50 dark:hover:opacity-100 dark:hover:text-purple-400 transition-all`,title:t.label})}),Ekt=()=>(ht.useEffect(()=>{console.log("Available templates:",hk.map(t=>({name:t.name,icon:t.icon})))},[]),y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx("span",{className:"text-sm text-gray-500",children:"or start a blank app with your favorite stack"}),y.jsx("div",{className:"flex justify-center",children:y.jsx("div",{className:"flex w-70 flex-wrap items-center justify-center gap-4",children:hk.map(t=>y.jsx(Skt,{template:t},t.name))})})]}));function kkt({alert:t,clearAlert:e,postMessage:n}){const{description:r,content:s,source:i}=t,o=i==="preview",a=o?"Preview Error":"Terminal Error",l=o?"We encountered an error while running the preview. Would you like Bolt to analyze and help resolve this issue?":"We encountered an error while running terminal commands. Would you like Bolt to analyze and help resolve this issue?";return y.jsx(Ic,{children:y.jsx(lt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-background-depth-2 p-4 mb-2",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx(lt.div,{className:"flex-shrink-0",initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:y.jsx("div",{className:"i-ph:warning-duotone text-xl text-bolt-elements-button-danger-text"})}),y.jsxs("div",{className:"ml-3 flex-1",children:[y.jsx(lt.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm font-medium text-bolt-elements-textPrimary",children:a}),y.jsxs(lt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-2 text-sm text-bolt-elements-textSecondary",children:[y.jsx("p",{children:l}),r&&y.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary p-2 bg-bolt-elements-background-depth-3 rounded mt-4 mb-4",children:["Error: ",r]})]}),y.jsx(lt.div,{className:"mt-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:y.jsxs("div",{className:Ne(" flex gap-2"),children:[y.jsxs("button",{onClick:()=>n(`*Fix this ${o?"preview":"terminal"} error* 
\`\`\`${o?"js":"sh"}
${s}
\`\`\`
`),className:Ne("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-primary-background","hover:bg-bolt-elements-button-primary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-danger-background","text-bolt-elements-button-primary-text","flex items-center gap-1.5"),children:[y.jsx("div",{className:"i-ph:chat-circle-duotone"}),"Ask Bolt"]}),y.jsx("button",{onClick:e,className:Ne("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-secondary-background","hover:bg-bolt-elements-button-secondary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-secondary-background","text-bolt-elements-button-secondary-text"),children:"Dismiss"})]})})]})]})})})}function Ckt({data:t}){const[e,n]=ht.useState([]),[r,s]=N.useState(!1);return ht.useEffect(()=>{if(!t||t.length==0){n([]);return}const i=new Map;t.forEach(a=>{const l=i.get(a.label);l&&l.status==="complete"||i.set(a.label,a)});const o=Array.from(i.values());o.sort((a,l)=>a.order-l.order),n(o)},[t]),e.length===0?y.jsx(y.Fragment,{}):y.jsx(Ic,{children:y.jsx("div",{className:Ne("bg-bolt-elements-background-depth-2","border border-bolt-elements-borderColor","shadow-lg rounded-lg  relative w-full max-w-chat mx-auto z-prompt","p-1"),children:y.jsxs("div",{className:Ne("bg-bolt-elements-item-backgroundAccent","p-1 rounded-lg text-bolt-elements-item-contentAccent","flex "),children:[y.jsx("div",{className:"flex-1",children:y.jsx(Ic,{children:r?y.jsx(lt.div,{className:"actions",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:e.map((i,o)=>y.jsx(rY,{progress:i},o))}):y.jsx(rY,{progress:e.slice(-1)[0]})})}),y.jsx(lt.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:Go},className:" p-1 rounded-lg bg-bolt-elements-item-backgroundAccent hover:bg-bolt-elements-artifacts-backgroundHover",onClick:()=>s(i=>!i),children:y.jsx("div",{className:r?"i-ph:caret-up-bold":"i-ph:caret-down-bold"})})]})})})}const rY=({progress:t})=>y.jsxs(lt.div,{className:Ne("flex text-sm gap-3"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:[y.jsx("div",{className:"flex items-center gap-1.5 ",children:y.jsx("div",{children:t.status==="in-progress"?y.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"}):t.status==="complete"?y.jsx("div",{className:"i-ph:check"}):null})}),t.message]}),Akt=76,Tkt=ht.forwardRef(({textareaRef:t,messageRef:e,scrollRef:n,showChat:r=!0,chatStarted:s=!1,isStreaming:i=!1,onStreamingChange:o,model:a,setModel:l,provider:c,setProvider:u,providerList:d,input:h="",enhancingPrompt:f,handleInputChange:p,enhancePrompt:m,sendMessage:g,handleStop:b,importChat:v,exportChat:w,uploadedFiles:_=[],setUploadedFiles:S,imageDataList:E=[],setImageDataList:k,messages:x,actionAlert:I,clearAlert:R,data:C,actionRunner:T},O)=>{const P=s?400:200,[U,ee]=N.useState(BC()),[X,Z]=N.useState([]),[F,M]=N.useState(!1),[G,D]=N.useState(!1),[j,W]=N.useState(null),[q,ne]=N.useState(""),[te,Y]=N.useState("all"),[de,Se]=N.useState([]);N.useEffect(()=>{if(C){const se=C.filter(fe=>typeof fe=="object"&&fe.type==="progress");Se(se)}},[C]),N.useEffect(()=>{console.log(q)},[q]),N.useEffect(()=>{o?.(i)},[i,o]),N.useEffect(()=>{if(typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)){const se=window.SpeechRecognition||window.webkitSpeechRecognition,fe=new se;fe.continuous=!0,fe.interimResults=!0,fe.onresult=Ce=>{const Ie=Array.from(Ce.results).map(we=>we[0]).map(we=>we.transcript).join("");ne(Ie),p&&p({target:{value:Ie}})},fe.onerror=Ce=>{console.error("Speech recognition error:",Ce.error),D(!1)},W(fe)}},[]),N.useEffect(()=>{if(typeof window<"u"){let se={};try{se=BC(),ee(se)}catch(fe){console.error("Error loading API keys from cookies:",fe),Zn.remove("apiKeys")}Y("all"),fetch("/api/models").then(fe=>fe.json()).then(fe=>{Z(fe.modelList)}).catch(fe=>{console.error("Error fetching model list:",fe)}).finally(()=>{Y(void 0)})}},[d,c]);const xe=async(se,fe)=>{const Ce={...U,[se]:fe};ee(Ce),Zn.set("apiKeys",JSON.stringify(Ce)),Y(se);let Ie=[];try{Ie=(await(await fetch(`/api/models/${encodeURIComponent(se)}`)).json()).modelList}catch(we){console.error("Error loading dynamic models for:",se,we)}Z(we=>[...we.filter(Fe=>Fe.provider!==se),...Ie]),Y(void 0)},Ae=()=>{j&&(j.start(),D(!0))},Pe=()=>{j&&(j.stop(),D(!1))},K=(se,fe)=>{g&&(g(se,fe),j&&(j.abort(),ne(""),D(!1),p&&p({target:{value:""}})))},ge=()=>{const se=document.createElement("input");se.type="file",se.accept="image/*",se.onchange=async fe=>{const Ce=fe.target.files?.[0];if(Ce){const Ie=new FileReader;Ie.onload=we=>{const Ue=we.target?.result;S?.([..._,Ce]),k?.([...E,Ue])},Ie.readAsDataURL(Ce)}},se.click()},re=async se=>{const fe=se.clipboardData?.items;if(fe){for(const Ce of fe)if(Ce.type.startsWith("image/")){se.preventDefault();const Ie=Ce.getAsFile();if(Ie){const we=new FileReader;we.onload=Ue=>{const Fe=Ue.target?.result;S?.([..._,Ie]),k?.([...E,Fe])},we.readAsDataURL(Ie)}break}}},le=y.jsxs("div",{ref:O,className:Ne(Fy.BaseChat,"relative flex h-full w-full overflow-hidden"),"data-chat-visible":r,children:[y.jsx(lu,{children:()=>y.jsx(gut,{})}),y.jsxs("div",{ref:n,className:"flex flex-col lg:flex-row overflow-y-auto w-full h-full",children:[y.jsxs("div",{className:Ne(Fy.Chat,"flex flex-col flex-grow lg:min-w-[var(--chat-min-width)] h-full"),children:[!s&&y.jsxs("div",{id:"intro",className:"mt-[16vh] max-w-chat mx-auto text-center px-4 lg:px-0",children:[y.jsx("h1",{className:"text-3xl lg:text-6xl font-bold text-bolt-elements-textPrimary mb-4 animate-fade-in",children:"Where ideas begin"}),y.jsx("p",{className:"text-md lg:text-xl mb-8 text-bolt-elements-textSecondary animate-fade-in animation-delay-200",children:"Bring ideas to life in seconds or get help on existing projects."})]}),y.jsxs("div",{className:Ne("pt-6 px-2 sm:px-6",{"h-full flex flex-col":s}),ref:n,children:[y.jsx(lu,{children:()=>s?y.jsx(z1t,{ref:e,className:"flex flex-col w-full flex-1 max-w-chat pb-6 mx-auto z-1",messages:x,isStreaming:i}):null}),y.jsxs("div",{className:Ne("flex flex-col gap-4 w-full max-w-chat mx-auto z-prompt mb-6",{"sticky bottom-2":s}),children:[y.jsx("div",{className:"bg-bolt-elements-background-depth-2",children:I&&y.jsx(kkt,{alert:I,clearAlert:()=>R?.(),postMessage:se=>{g?.({},se),R?.()}})}),de&&y.jsx(Ckt,{data:de}),y.jsxs("div",{className:Ne("bg-bolt-elements-background-depth-2 p-3 rounded-lg border border-bolt-elements-borderColor relative w-full max-w-chat mx-auto z-prompt"),children:[y.jsxs("svg",{className:Ne(Fy.PromptEffectContainer),children:[y.jsxs("defs",{children:[y.jsxs("linearGradient",{id:"line-gradient",x1:"20%",y1:"0%",x2:"-14%",y2:"10%",gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(-45)",children:[y.jsx("stop",{offset:"0%",stopColor:"#b44aff",stopOpacity:"0%"}),y.jsx("stop",{offset:"40%",stopColor:"#b44aff",stopOpacity:"80%"}),y.jsx("stop",{offset:"50%",stopColor:"#b44aff",stopOpacity:"80%"}),y.jsx("stop",{offset:"100%",stopColor:"#b44aff",stopOpacity:"0%"})]}),y.jsxs("linearGradient",{id:"shine-gradient",children:[y.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0%"}),y.jsx("stop",{offset:"40%",stopColor:"#ffffff",stopOpacity:"80%"}),y.jsx("stop",{offset:"50%",stopColor:"#ffffff",stopOpacity:"80%"}),y.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0%"})]})]}),y.jsx("rect",{className:Ne(Fy.PromptEffectLine),pathLength:"100",strokeLinecap:"round"}),y.jsx("rect",{className:Ne(Fy.PromptShine),x:"48",y:"24",width:"70",height:"1"})]}),y.jsx("div",{children:y.jsx(lu,{children:()=>y.jsxs("div",{className:F?"hidden":"",children:[y.jsx(wkt,{model:a,setModel:l,modelList:X,provider:c,setProvider:u,providerList:d||AA,apiKeys:U,modelLoading:te},c?.name+":"+X.length),(d||[]).length>0&&c&&(!D6.includes(c.name)||"OpenAILike")&&y.jsx(G1t,{provider:c,apiKey:U[c.name]||"",setApiKey:se=>{xe(c.name,se)}})]})})}),y.jsx(vkt,{files:_,imageDataList:E,onRemove:se=>{S?.(_.filter((fe,Ce)=>Ce!==se)),k?.(E.filter((fe,Ce)=>Ce!==se))}}),y.jsx(lu,{children:()=>y.jsx(_kt,{setUploadedFiles:S,setImageDataList:k,uploadedFiles:_,imageDataList:E})}),y.jsxs("div",{className:Ne("relative shadow-xs border border-bolt-elements-borderColor backdrop-blur rounded-lg"),children:[y.jsx("textarea",{ref:t,className:Ne("w-full pl-4 pt-4 pr-16 outline-none resize-none text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary bg-transparent text-sm","transition-all duration-200","hover:border-bolt-elements-focus"),onDragEnter:se=>{se.preventDefault(),se.currentTarget.style.border="2px solid #1488fc"},onDragOver:se=>{se.preventDefault(),se.currentTarget.style.border="2px solid #1488fc"},onDragLeave:se=>{se.preventDefault(),se.currentTarget.style.border="1px solid var(--bolt-elements-borderColor)"},onDrop:se=>{se.preventDefault(),se.currentTarget.style.border="1px solid var(--bolt-elements-borderColor)",Array.from(se.dataTransfer.files).forEach(Ce=>{if(Ce.type.startsWith("image/")){const Ie=new FileReader;Ie.onload=we=>{const Ue=we.target?.result;S?.([..._,Ce]),k?.([...E,Ue])},Ie.readAsDataURL(Ce)}})},onKeyDown:se=>{if(se.key==="Enter"){if(se.shiftKey)return;if(se.preventDefault(),i){b?.();return}if(se.nativeEvent.isComposing)return;K?.(se)}},value:h,onChange:se=>{p?.(se)},onPaste:re,style:{minHeight:Akt,maxHeight:P},placeholder:"How can Bolt help you today?",translate:"no"}),y.jsx(lu,{children:()=>y.jsx(W1t,{show:h.length>0||i||_.length>0,isStreaming:i,disabled:!d||d.length===0,onClick:se=>{if(i){b?.();return}(h.length>0||_.length>0)&&K?.(se)}})}),y.jsxs("div",{className:"flex justify-between items-center text-sm p-4 pt-2",children:[y.jsxs("div",{className:"flex gap-1 items-center",children:[y.jsx(Pr,{title:"Upload file",className:"transition-all",onClick:()=>ge(),children:y.jsx("div",{className:"i-ph:paperclip text-xl"})}),y.jsx(Pr,{title:"Enhance prompt",disabled:h.length===0||f,className:Ne("transition-all",f?"opacity-100":""),onClick:()=>{m?.(),Ve.success("Prompt enhanced!")},children:f?y.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress text-xl animate-spin"}):y.jsx("div",{className:"i-bolt:stars text-xl"})}),y.jsx(xkt,{isListening:G,onStart:Ae,onStop:Pe,disabled:i}),s&&y.jsx(lu,{children:()=>y.jsx(Z1t,{exportChat:w})}),y.jsxs(Pr,{title:"Model Settings",className:Ne("transition-all flex items-center gap-1",{"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":F,"bg-bolt-elements-item-backgroundDefault text-bolt-elements-item-contentDefault":!F}),onClick:()=>M(!F),disabled:!d||d.length===0,children:[y.jsx("div",{className:`i-ph:caret-${F?"right":"down"} text-lg`}),F?y.jsx("span",{className:"text-xs",children:a}):y.jsx("span",{})]})]}),h.length>3?y.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary",children:["Use ",y.jsx("kbd",{className:"kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2",children:"Shift"})," ","+ ",y.jsx("kbd",{className:"kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2",children:"Return"})," ","a new line"]}):null]})]})]})]})]}),y.jsxs("div",{className:"flex flex-col justify-center gap-5",children:[!s&&y.jsxs("div",{className:"flex justify-center gap-2",children:[nwt(v),y.jsx(ykt,{importChat:v})]}),!s&&swt((se,fe)=>{if(i){b?.();return}K?.(se,fe)}),!s&&y.jsx(Ekt,{})]})]}),y.jsx(lu,{children:()=>y.jsx(k1t,{actionRunner:T??{},chatStarted:s,isStreaming:i})})]})]});return y.jsx(X6,{delayDuration:200,children:le})});var Obe={exports:{}},Lbe={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0=N;function Pkt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nkt=typeof Object.is=="function"?Object.is:Pkt,Ikt=V0.useState,Rkt=V0.useEffect,Okt=V0.useLayoutEffect,Lkt=V0.useDebugValue;function Dkt(t,e){var n=e(),r=Ikt({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Okt(function(){s.value=n,s.getSnapshot=e,lI(s)&&i({inst:s})},[t,n,e]),Rkt(function(){return lI(s)&&i({inst:s}),t(function(){lI(s)&&i({inst:s})})},[t]),Lkt(n),n}function lI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nkt(t,n)}catch{return!0}}function Mkt(t,e){return e()}var jkt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Mkt:Dkt;Lbe.useSyncExternalStore=V0.useSyncExternalStore!==void 0?V0.useSyncExternalStore:jkt;Obe.exports=Lbe;var Fkt=Obe.exports;const Dbe=0,Mbe=1,jbe=2,sY=3;var iY=Object.prototype.hasOwnProperty;function nD(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&nD(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(iY.call(t,n)&&++r&&!iY.call(e,n)||!(n in e)||!nD(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Tu=new WeakMap,Jd=()=>{},Ii=Jd(),rD=Object,Ln=t=>t===Ii,bc=t=>typeof t=="function",Th=(t,e)=>({...t,...e}),Fbe=t=>bc(t.then),cI={},ES={},cF="undefined",$x=typeof window!=cF,sD=typeof document!=cF,Bkt=$x&&"Deno"in window,$kt=()=>$x&&typeof window.requestAnimationFrame!=cF,Bbe=(t,e)=>{const n=Tu.get(t);return[()=>!Ln(e)&&t.get(e)||cI,r=>{if(!Ln(e)){const s=t.get(e);e in ES||(ES[e]=s),n[5](e,Th(s,r),s||cI)}},n[6],()=>!Ln(e)&&e in ES?ES[e]:!Ln(e)&&t.get(e)||cI]};let iD=!0;const Ukt=()=>iD,[oD,aD]=$x&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Jd,Jd],Hkt=()=>{const t=sD&&document.visibilityState;return Ln(t)||t!=="hidden"},zkt=t=>(sD&&document.addEventListener("visibilitychange",t),oD("focus",t),()=>{sD&&document.removeEventListener("visibilitychange",t),aD("focus",t)}),Vkt=t=>{const e=()=>{iD=!0,t()},n=()=>{iD=!1};return oD("online",e),oD("offline",n),()=>{aD("online",e),aD("offline",n)}},Wkt={isOnline:Ukt,isVisible:Hkt},Gkt={initFocus:zkt,initReconnect:Vkt},oY=!ht.useId,Iw=!$x||Bkt,qkt=t=>$kt()?window.requestAnimationFrame(t):setTimeout(t,1),uI=Iw?N.useEffect:N.useLayoutEffect,dI=typeof navigator<"u"&&navigator.connection,aY=!Iw&&dI&&(["slow-2g","2g"].includes(dI.effectiveType)||dI.saveData),kS=new WeakMap,hI=(t,e)=>rD.prototype.toString.call(t)===`[object ${e}]`;let Kkt=0;const lD=t=>{const e=typeof t,n=hI(t,"Date"),r=hI(t,"RegExp"),s=hI(t,"Object");let i,o;if(rD(t)===t&&!n&&!r){if(i=kS.get(t),i)return i;if(i=++Kkt+"~",kS.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=lD(t[o])+",";kS.set(t,i)}if(s){i="#";const a=rD.keys(t).sort();for(;!Ln(o=a.pop());)Ln(t[o])||(i+=o+":"+lD(t[o])+",");kS.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},uF=t=>{if(bc(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?lD(t):"",[t,e]};let Ykt=0;const cD=()=>++Ykt;async function $be(...t){const[e,n,r,s]=t,i=Th({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let l=i.optimisticData;const c=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(bc(n)){const h=n,f=[],p=e.keys();for(const m of p)!/^\$(inf|sub)\$/.test(m)&&h(e.get(m)._k)&&f.push(m);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=uF(h);if(!f)return;const[p,m]=Bbe(e,f),[g,b,v,w]=Tu.get(e),_=()=>{const O=g[f];return(bc(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete v[f],delete w[f],O&&O[0])?O[0](jbe).then(()=>p().data):p().data};if(t.length<3)return _();let S=r,E;const k=cD();b[f]=[k,0];const x=!Ln(l),I=p(),R=I.data,C=I._c,T=Ln(C)?R:C;if(x&&(l=bc(l)?l(T,R):l,m({data:l,_c:T})),bc(S))try{S=S(T)}catch(O){E=O}if(S&&Fbe(S))if(S=await S.catch(O=>{E=O}),k!==b[f][0]){if(E)throw E;return S}else E&&x&&c(E)&&(o=!0,m({data:T,_c:Ii}));if(o&&!E)if(bc(o)){const O=o(S,T);m({data:O,error:Ii,_c:Ii})}else m({data:S,error:Ii,_c:Ii});if(b[f][1]=cD(),Promise.resolve(_()).then(()=>{m({_c:Ii})}),E){if(u)throw E;return}return S}}const lY=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Jkt=(t,e)=>{if(!Tu.has(t)){const n=Th(Gkt,e),r=Object.create(null),s=$be.bind(Ii,t);let i=Jd;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},l=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},c=()=>{if(!Tu.has(t)&&(Tu.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,l,a]),!Iw)){const u=n.initFocus(setTimeout.bind(Ii,lY.bind(Ii,r,Dbe))),d=n.initReconnect(setTimeout.bind(Ii,lY.bind(Ii,r,Mbe)));i=()=>{u&&u(),d&&d(),Tu.delete(t)}}};return c(),[t,s,c,i]}return[t,Tu.get(t)[4]]},Xkt=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Ln(i)&&o>i||setTimeout(r,a,s)},Zkt=nD,[Ube,Qkt]=Jkt(new Map),eCt=Th({onLoadingSlow:Jd,onSuccess:Jd,onError:Jd,onErrorRetry:Xkt,onDiscarded:Jd,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:aY?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:aY?5e3:3e3,compare:Zkt,isPaused:()=>!1,cache:Ube,mutate:Qkt,fallback:{}},Wkt),tCt=(t,e)=>{const n=Th(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Th(s,o))}return n},nCt=N.createContext({}),rCt="$inf$",Hbe=$x&&window.__SWR_DEVTOOLS_USE__,sCt=Hbe?window.__SWR_DEVTOOLS_USE__:[],iCt=()=>{Hbe&&(window.__SWR_DEVTOOLS_REACT__=ht)},oCt=t=>bc(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],aCt=()=>Th(eCt,N.useContext(nCt)),lCt=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=uF(e),[,,,a]=Tu.get(Ube);if(o.startsWith(rCt))return n(...i);const l=a[o];return Ln(l)?n(...i):(delete a[o],l)}),r),cCt=sCt.concat(lCt),uCt=t=>function(...n){const r=aCt(),[s,i,o]=oCt(n),a=tCt(r,o);let l=t;const{use:c}=a,u=(c||[]).concat(cCt);for(let d=u.length;d--;)l=u[d](l);return l(s,i||a.fetcher||null,a)},dCt=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};iCt();const fI=ht.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),pI={dedupe:!0},hCt=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,m,g]=Tu.get(r),[b,v]=uF(t),w=N.useRef(!1),_=N.useRef(!1),S=N.useRef(b),E=N.useRef(e),k=N.useRef(n),x=()=>k.current,I=()=>x().isVisible()&&x().isOnline(),[R,C,T,O]=Bbe(r,b),P=N.useRef({}).current,U=Ln(o)?Ln(n.fallback)?Ii:n.fallback[b]:o,ee=(Pe,K)=>{for(const ge in P){const re=ge;if(re==="data"){if(!s(Pe[re],K[re])&&(!Ln(Pe[re])||!s(q,K[re])))return!1}else if(K[re]!==Pe[re])return!1}return!0},X=N.useMemo(()=>{const Pe=!b||!e?!1:Ln(a)?x().isPaused()||i?!1:l!==!1:a,K=Ce=>{const Ie=Th(Ce);return delete Ie._k,Pe?{isValidating:!0,isLoading:!0,...Ie}:Ie},ge=R(),re=O(),le=K(ge),se=ge===re?le:K(re);let fe=le;return[()=>{const Ce=K(R());return ee(Ce,fe)?(fe.data=Ce.data,fe.isLoading=Ce.isLoading,fe.isValidating=Ce.isValidating,fe.error=Ce.error,fe):(fe=Ce,Ce)},()=>se]},[r,b]),Z=Fkt.useSyncExternalStore(N.useCallback(Pe=>T(b,(K,ge)=>{ee(ge,K)||Pe()}),[r,b]),X[0],X[1]),F=!w.current,M=f[b]&&f[b].length>0,G=Z.data,D=Ln(G)?U&&Fbe(U)?fI(U):U:G,j=Z.error,W=N.useRef(D),q=h?Ln(G)?Ln(W.current)?D:W.current:G:D,ne=M&&!Ln(j)?!1:F&&!Ln(a)?a:x().isPaused()?!1:i?Ln(D)?!1:l:Ln(D)||l,te=!!(b&&e&&F&&ne),Y=Ln(Z.isValidating)?te:Z.isValidating,de=Ln(Z.isLoading)?te:Z.isLoading,Se=N.useCallback(async Pe=>{const K=E.current;if(!b||!K||_.current||x().isPaused())return!1;let ge,re,le=!0;const se=Pe||{},fe=!m[b]||!se.dedupe,Ce=()=>oY?!_.current&&b===S.current&&w.current:b===S.current,Ie={isValidating:!1,isLoading:!1},we=()=>{C(Ie)},Ue=()=>{const Be=m[b];Be&&Be[1]===re&&delete m[b]},Fe={isValidating:!0};Ln(R().data)&&(Fe.isLoading=!0);try{if(fe&&(C(Fe),n.loadingTimeout&&Ln(R().data)&&setTimeout(()=>{le&&Ce()&&x().onLoadingSlow(b,n)},n.loadingTimeout),m[b]=[K(v),cD()]),[ge,re]=m[b],ge=await ge,fe&&setTimeout(Ue,n.dedupingInterval),!m[b]||m[b][1]!==re)return fe&&Ce()&&x().onDiscarded(b),!1;Ie.error=Ii;const Be=p[b];if(!Ln(Be)&&(re<=Be[0]||re<=Be[1]||Be[1]===0))return we(),fe&&Ce()&&x().onDiscarded(b),!1;const ke=R().data;Ie.data=s(ke,ge)?ke:ge,fe&&Ce()&&x().onSuccess(ge,b,n)}catch(Be){Ue();const ke=x(),{shouldRetryOnError:Je}=ke;ke.isPaused()||(Ie.error=Be,fe&&Ce()&&(ke.onError(Be,b,ke),(Je===!0||bc(Je)&&Je(Be))&&(!x().revalidateOnFocus||!x().revalidateOnReconnect||I())&&ke.onErrorRetry(Be,b,ke,Xe=>{const nt=f[b];nt&&nt[0]&&nt[0](sY,Xe)},{retryCount:(se.retryCount||0)+1,dedupe:!0})))}return le=!1,we(),!0},[b,r]),xe=N.useCallback((...Pe)=>$be(r,S.current,...Pe),[]);if(uI(()=>{E.current=e,k.current=n,Ln(G)||(W.current=G)}),uI(()=>{if(!b)return;const Pe=Se.bind(Ii,pI);let K=0;x().revalidateOnFocus&&(K=Date.now()+x().focusThrottleInterval);const re=dCt(b,f,(le,se={})=>{if(le==Dbe){const fe=Date.now();x().revalidateOnFocus&&fe>K&&I()&&(K=fe+x().focusThrottleInterval,Pe())}else if(le==Mbe)x().revalidateOnReconnect&&I()&&Pe();else{if(le==jbe)return Se();if(le==sY)return Se(se)}});return _.current=!1,S.current=b,w.current=!0,C({_k:v}),ne&&(Ln(D)||Iw?Pe():qkt(Pe)),()=>{_.current=!0,re()}},[b]),uI(()=>{let Pe;function K(){const re=bc(c)?c(R().data):c;re&&Pe!==-1&&(Pe=setTimeout(ge,re))}function ge(){!R().error&&(u||x().isVisible())&&(d||x().isOnline())?Se(pI).then(K):K()}return K(),()=>{Pe&&(clearTimeout(Pe),Pe=-1)}},[c,u,d,b]),N.useDebugValue(q),i&&Ln(D)&&b){if(!oY&&Iw)throw new Error("Fallback data is required when using Suspense in SSR.");E.current=e,k.current=n,_.current=!1;const Pe=g[b];if(!Ln(Pe)){const K=xe(Pe);fI(K)}if(Ln(j)){const K=Se(pI);Ln(q)||(K.status="fulfilled",K.value=!0),fI(K)}else throw j}return{mutate:xe,get data(){return P.data=!0,q},get error(){return P.error=!0,j},get isValidating(){return P.isValidating=!0,Y},get isLoading(){return P.isLoading=!0,de}}},CS=uCt(hCt);function fCt(t,e){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let n,r=0;return function(...i){clearTimeout(n);const o=Date.now(),a=o-r,l=e-a;l<=0?(r=o,t.apply(this,i)):n=setTimeout(()=>{r=Date.now(),t.apply(this,i)},l)}}var pCt=fCt;const mCt=yi(pCt);function cY(t,e){return e!=null?mCt(t,e):t}function gCt(t){const[e,n]=N.useState(t);return N.useEffect(()=>{pR(t,e)||n(t)},[t,e]),e}function bCt({api:t="/api/chat",id:e,initialMessages:n,initialInput:r="",sendExtraMessageFields:s,onToolCall:i,experimental_prepareRequestBody:o,maxSteps:a=1,streamProtocol:l="data",onResponse:c,onFinish:u,onError:d,credentials:h,headers:f,body:p,generateId:m=fM,fetch:g,keepLastMessageOnError:b=!0,experimental_throttle:v}={}){const[w]=N.useState(m),_=e??w,S=typeof t=="string"?[t,_]:_,E=gCt(n??[]),k=N.useMemo(()=>z3(E),[E]),{data:x,mutate:I}=CS([S,"messages"],null,{fallbackData:k}),R=N.useRef(x||[]);N.useEffect(()=>{R.current=x||[]},[x]);const{data:C,mutate:T}=CS([S,"streamData"],null),O=N.useRef(C);N.useEffect(()=>{O.current=C},[C]);const{data:P="ready",mutate:U}=CS([S,"status"],null),{data:ee=void 0,mutate:X}=CS([S,"error"],null),Z=N.useRef(null),F=N.useRef({credentials:h,headers:f,body:p});N.useEffect(()=>{F.current={credentials:h,headers:f,body:p}},[h,f,p]);const M=N.useCallback(async xe=>{var Ae,Pe;U("submitted"),X(void 0);const K=z3(xe.messages),ge=K.length,re=fR((Ae=K[K.length-1])==null?void 0:Ae.toolInvocations);try{const se=new AbortController;Z.current=se;const fe=cY(I,v),Ce=cY(T,v),Ie=R.current;fe(K,!1);const we=s?K:K.map(({role:Fe,content:Be,experimental_attachments:ke,data:Je,annotations:Xe,toolInvocations:nt,parts:ie})=>({role:Fe,content:Be,...ke!==void 0&&{experimental_attachments:ke},...Je!==void 0&&{data:Je},...Xe!==void 0&&{annotations:Xe},...nt!==void 0&&{toolInvocations:nt},...ie!==void 0&&{parts:ie}})),Ue=O.current;await b7e({api:t,body:(Pe=o?.({id:_,messages:K,requestData:xe.data,requestBody:xe.body}))!=null?Pe:{id:_,messages:we,data:xe.data,...F.current.body,...xe.body},streamProtocol:l,credentials:F.current.credentials,headers:{...F.current.headers,...xe.headers},abortController:()=>Z.current,restoreMessagesOnFailure(){b||fe(Ie,!1)},onResponse:c,onUpdate({message:Fe,data:Be,replaceLastMessage:ke}){U("streaming"),fe([...ke?K.slice(0,K.length-1):K,Fe],!1),Be?.length&&Ce([...Ue??[],...Be],!1)},onToolCall:i,onFinish:u,generateId:m,fetch:g,lastMessage:K[K.length-1]}),Z.current=null,U("ready")}catch(se){if(se.name==="AbortError")return Z.current=null,U("ready"),null;d&&se instanceof Error&&d(se),X(se),U("error")}const le=R.current;_7e({originalMaxToolInvocationStep:re,originalMessageCount:ge,maxSteps:a,messages:le})&&await M({messages:le})},[I,U,t,F,c,u,d,X,T,O,l,s,o,i,a,R,Z,m,g,b,v,_]),G=N.useCallback(async(xe,{data:Ae,headers:Pe,body:K,experimental_attachments:ge}={})=>{var re,le;const se=await K9(ge),fe=R.current.concat({...xe,id:(re=xe.id)!=null?re:m(),createdAt:(le=xe.createdAt)!=null?le:new Date,experimental_attachments:se.length>0?se:void 0,parts:coe(xe)});return M({messages:fe,headers:Pe,body:K,data:Ae})},[M,m]),D=N.useCallback(async({data:xe,headers:Ae,body:Pe}={})=>{const K=R.current;if(K.length===0)return null;const ge=K[K.length-1];return M({messages:ge.role==="assistant"?K.slice(0,-1):K,headers:Ae,body:Pe,data:xe})},[M]),j=N.useCallback(()=>{Z.current&&(Z.current.abort(),Z.current=null)},[]),W=N.useCallback(xe=>{typeof xe=="function"&&(xe=xe(R.current));const Ae=z3(xe);I(Ae,!1),R.current=Ae},[I]),q=N.useCallback(xe=>{typeof xe=="function"&&(xe=xe(O.current)),T(xe,!1),O.current=xe},[T]),[ne,te]=N.useState(r),Y=N.useCallback(async(xe,Ae={},Pe)=>{var K;if((K=xe?.preventDefault)==null||K.call(xe),!ne&&!Ae.allowEmptySubmit)return;Pe&&(F.current={...F.current,...Pe});const ge=await K9(Ae.experimental_attachments),le={messages:R.current.concat({id:m(),createdAt:new Date,role:"user",content:ne,experimental_attachments:ge.length>0?ge:void 0,parts:[{type:"text",text:ne}]}),headers:Ae.headers,body:Ae.body,data:Ae.data};M(le),te("")},[ne,m,M]),de=xe=>{te(xe.target.value)},Se=N.useCallback(({toolCallId:xe,result:Ae})=>{const Pe=R.current;E7e({messages:Pe,toolCallId:xe,toolResult:Ae}),I(Pe,!1);const K=Pe[Pe.length-1];uoe(K)&&M({messages:Pe})},[I,M]);return{messages:x??[],id:_,setMessages:W,data:C,setData:q,error:ee,append:G,reload:D,stop:j,input:ne,setInput:te,handleInputChange:de,handleSubmit:Y,isLoading:P==="submitted"||P==="streaming",status:P,addToolResult:Se}}var yCt=bCt;const Pu=Ph({started:!1,aborted:!1,showChat:!0}),vCt=t=>`
You are an experienced developer who helps people choose the best starter template for their projects.

Available templates:
<template>
  <name>blank</name>
  <description>Empty starter for simple scripts and trivial tasks that don't require a full template setup</description>
  <tags>basic, script</tags>
</template>
${t.map(e=>`
<template>
  <name>${e.name}</name>
  <description>${e.description}</description>
  ${e.tags?`<tags>${e.tags.join(", ")}</tags>`:""}
</template>
`).join(`
`)}

Response Format:
<selection>
  <templateName>{selected template name}</templateName>
  <title>{a proper title for the project}</title>
</selection>

Examples:

<example>
User: I need to build a todo app
Response:
<selection>
  <templateName>react-basic-starter</templateName>
  <title>Simple React todo application</title>
</selection>
</example>

<example>
User: Write a script to generate numbers from 1 to 100
Response:
<selection>
  <templateName>blank</templateName>
  <title>script to generate numbers from 1 to 100</title>
</selection>
</example>

Instructions:
1. For trivial tasks and simple scripts, always recommend the blank template
2. For more complex projects, recommend templates from the provided list
3. Follow the exact XML format
4. Consider both technical requirements and tags
5. If no perfect match exists, recommend the closest option

Important: Provide only the selection tags in your response, no additional text.
MOST IMPORTANT: YOU DONT HAVE TIME TO THINK JUST START RESPONDING BASED ON HUNCH 
`,wCt=hk.filter(t=>!t.name.includes("shadcn")),xCt=t=>{try{const e=t.match(/<templateName>(.*?)<\/templateName>/),n=t.match(/<title>(.*?)<\/title>/);return e?{template:e[1].trim(),title:n?.[1].trim()||"Untitled Project"}:null}catch(e){return console.error("Error parsing template selection:",e),null}},_Ct=async t=>{const{message:e,model:n,provider:r}=t,s={message:e,model:n,provider:r,system:vCt(wCt)},o=await(await fetch("/api/llmcall",{method:"POST",body:JSON.stringify(s)})).json();console.log(o);const{text:a}=o,l=xCt(a);return l||(console.log("No template selected, using blank template"),{template:"blank",title:""})},zbe=async(t,e="")=>{const n="https://api.github.com";try{const r=Zn.get("githubToken")||void 0,s={Accept:"application/vnd.github.v3+json"};r&&(s.Authorization="token "+r);const i=await fetch(`${n}/repos/${t}/contents/${e}`,{headers:s});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.json();if(!Array.isArray(o)&&o.type==="file"){const l=atob(o.content);return[{name:o.name,path:o.path,content:l}]}return(await Promise.all(o.map(async l=>{if(l.type==="dir")return await zbe(t,l.path);if(l.type==="file"){const u=await(await fetch(l.url,{headers:s})).json(),d=atob(u.content);return[{name:l.name,path:l.path,content:d}]}return[]}))).flat()}catch(r){throw console.error("Error fetching repo contents:",r),r}};async function SCt(t,e){const n=hk.find(h=>h.name==t);if(!n)return null;const r=n.githubRepo,s=await zbe(r);let i=s;i=i.filter(h=>h.path.startsWith(".git")==!1);const o=["package-lock.json","yarn.lock","pnpm-lock.yaml"];i=i.filter(h=>o.includes(h.name)==!1),i=i.filter(h=>h.path.startsWith(".bolt")==!1);const a=s.find(h=>h.path.startsWith(".bolt")&&h.name=="ignore"),l={files:i,ignoreFile:[]};if(a){const h=a.content.split(`
`).map(m=>m.trim()),f=CM().add(h),p=i.filter(m=>f.ignores(m.path));l.files=i,l.ignoreFile=p}const c=`
<boltArtifact id="imported-files" title="${e||"Importing Starter Files"}" type="bundled">
${l.files.map(h=>`<boltAction type="file" filePath="${h.path}">
${h.content}
</boltAction>`).join(`
`)}
</boltArtifact>
`;let u="";const d=s.filter(h=>h.path.startsWith(".bolt")).find(h=>h.name=="prompt");return d&&(u=`
TEMPLATE INSTRUCTIONS:
${d.content}

IMPORTANT: Dont Forget to install the dependencies before running the app
---
`),l.ignoreFile.length>0&&(u=u+`
STRICT FILE ACCESS RULES - READ CAREFULLY:

The following files are READ-ONLY and must never be modified:
${l.ignoreFile.map(h=>`- ${h.path}`).join(`
`)}

Permitted actions:
 Import these files as dependencies
 Read from these files
 Reference these files

Strictly forbidden actions:
 Modify any content within these files
 Delete these files
 Rename these files
 Move these files
 Create new versions of these files
 Suggest changes to these files

Any attempt to modify these protected files will result in immediate termination of the operation.

If you need to make changes to functionality, create new files instead of modifying the protected ones listed above.
---
`),u+=`
---
template import is done, and you can now use the imported files,
edit only the files that need to be changed, and you can create new files as needed.
NO NOT EDIT/WRITE ANY FILES THAT ALREADY EXIST IN THE PROJECT AND DOES NOT NEED TO BE MODIFIED
---
Now that the Template is imported please continue with my original request
`,{assistantMessage:c,userMessage:u}}const Vbe=yr(!1),ECt=Dw({enter:"animated fadeInRight",exit:"animated fadeOutRight"}),uY=po("Chat");function FTt(){W0.trace("Chat");const{ready:t,initialMessages:e,storeMessageHistory:n,importChat:r,exportChat:s}=Qoe(),i=Bt(uc);return N.useEffect(()=>{It.setReloadedMessages(e.map(o=>o.id))},[e]),y.jsxs(y.Fragment,{children:[t&&y.jsx(CCt,{description:i,initialMessages:e,exportChat:s,storeMessageHistory:n,importChat:r}),y.jsx(F_e,{closeButton:({closeToast:o})=>y.jsx("button",{className:"Toastify__close-button",onClick:o,children:y.jsx("div",{className:"i-ph:x text-lg"})}),icon:({type:o})=>{switch(o){case"success":return y.jsx("div",{className:"i-ph:check-bold text-bolt-elements-icon-success text-2xl"});case"error":return y.jsx("div",{className:"i-ph:warning-circle-bold text-bolt-elements-icon-error text-2xl"})}},position:"bottom-right",pauseOnFocusLoss:!0,transition:ECt})]})}const kCt=qoe(t=>{const{messages:e,initialMessages:n,isLoading:r,parseMessages:s,storeMessageHistory:i}=t;s(e,r),e.length>n.length&&i(e).catch(o=>Ve.error(o.message))},50),CCt=N.memo(({description:t,initialMessages:e,storeMessageHistory:n,importChat:r,exportChat:s})=>{lut();const i=N.useRef(null),[o,a]=N.useState(e.length>0),[l,c]=N.useState([]),[u,d]=N.useState([]),[h,f]=dY(),[p,m]=N.useState(!1),g=Bt(It.files),b=Bt(It.alert),{activeProviders:v,promptId:w,autoSelectTemplate:_,contextOptimizationEnabled:S}=Rh(),[E,k]=N.useState(()=>Zn.get("selectedModel")||EDe),[x,I]=N.useState(()=>{const Fe=Zn.get("selectedProvider");return AA.find(Be=>Be.name===Fe)||kDe}),{showChat:R}=Bt(Pu),[C,T]=C_e(),[O,P]=N.useState({}),{messages:U,isLoading:ee,input:X,handleInputChange:Z,setInput:F,stop:M,append:G,setMessages:D,reload:j,error:W,data:q,setData:ne}=yCt({api:"/api/chat",body:{apiKeys:O,files:g,promptId:w,contextOptimization:S},sendExtraMessageFields:!0,onError:Fe=>{uY.error(`Request failed

`,Fe,W),Ut.logError("Chat request failed",Fe,{component:"Chat",action:"request",error:Fe.message}),Ve.error("There was an error processing your request: "+(Fe.message?Fe.message:"No details were returned"))},onFinish:(Fe,Be)=>{const ke=Be.usage;ne(void 0),ke&&(console.log("Token usage:",ke),Ut.logProvider("Chat response completed",{component:"Chat",action:"response",model:E,provider:x.name,usage:ke,messageLength:Fe.content.length})),uY.debug("Finished streaming")},initialMessages:e,initialInput:Zn.get(uy)||""});N.useEffect(()=>{const Fe=h.get("prompt");Fe&&(f({}),re(),G({role:"user",content:[{type:"text",text:`[Model: ${E}]

[Provider: ${x.name}]

${Fe}`}]}))},[E,x,h]);const{enhancingPrompt:te,promptEnhanced:Y,enhancePrompt:de,resetEnhancer:Se}=iut(),{parsedMessages:xe,parseMessages:Ae}=sut(),Pe=o?400:200;N.useEffect(()=>{Pu.setKey("started",e.length>0)},[]),N.useEffect(()=>{kCt({messages:U,initialMessages:e,isLoading:ee,parseMessages:Ae,storeMessageHistory:n})},[U,ee,Ae]);const K=()=>{const Fe=i.current;Fe&&(Fe.scrollTop=Fe.scrollHeight)},ge=()=>{M(),Pu.setKey("aborted",!0),It.abortAllActions(),Ut.logProvider("Chat response aborted",{component:"Chat",action:"abort",model:E,provider:x.name})};N.useEffect(()=>{const Fe=i.current;if(Fe){Fe.style.height="auto";const Be=Fe.scrollHeight;Fe.style.height=`${Math.min(Be,Pe)}px`,Fe.style.overflowY=Be>Pe?"auto":"hidden"}},[X,i]);const re=async()=>{o||(await Promise.all([T("#examples",{opacity:0,display:"none"},{duration:.1}),T("#intro",{opacity:0,flex:1},{duration:.2,ease:Go})]),Pu.setKey("started",!0),a(!0))},le=async(Fe,Be)=>{const ke=Be||X;if(!ke?.trim())return;if(ee){ge();return}if(re(),!o){if(m(!0),_){const{template:Xe,title:nt}=await _Ct({message:ke,model:E,provider:x});if(Xe!=="blank"){const ie=await SCt(Xe,nt).catch(z=>(z.message.includes("rate limit")?Ve.warning(`Rate limit exceeded. Skipping starter template
 Continuing with blank template`):Ve.warning(`Failed to import starter template
 Continuing with blank template`),null));if(ie){const{assistantMessage:z,userMessage:J}=ie;D([{id:`1-${new Date().getTime()}`,role:"user",content:[{type:"text",text:`[Model: ${E}]

[Provider: ${x.name}]

${ke}`},...u.map(pe=>({type:"image",image:pe}))]},{id:`2-${new Date().getTime()}`,role:"assistant",content:z},{id:`3-${new Date().getTime()}`,role:"user",content:`[Model: ${E}]

[Provider: ${x.name}]

${J}`,annotations:["hidden"]}]),j(),F(""),Zn.remove(uy),c([]),d([]),Se(),i.current?.blur(),m(!1);return}}}D([{id:`${new Date().getTime()}`,role:"user",content:[{type:"text",text:`[Model: ${E}]

[Provider: ${x.name}]

${ke}`},...u.map(Xe=>({type:"image",image:Xe}))]}]),j(),m(!1),F(""),Zn.remove(uy),c([]),d([]),Se(),i.current?.blur();return}W!=null&&D(U.slice(0,-1));const Je=It.getModifiedFiles();if(Pu.setKey("aborted",!1),Je!==void 0){const Xe=FUe(Je,`${Date.now()}`);G({role:"user",content:[{type:"text",text:`[Model: ${E}]

[Provider: ${x.name}]

${Xe}${ke}`},...u.map(nt=>({type:"image",image:nt}))]}),It.resetAllFileModifications()}else G({role:"user",content:[{type:"text",text:`[Model: ${E}]

[Provider: ${x.name}]

${ke}`},...u.map(Xe=>({type:"image",image:Xe}))]});F(""),Zn.remove(uy),c([]),d([]),Se(),i.current?.blur()},se=Fe=>{Z(Fe)},fe=N.useCallback(Vw(Fe=>{const Be=Fe.target.value.trim();Zn.set(uy,Be,{expires:30})},1e3),[]),[Ce,Ie]=cut();N.useEffect(()=>{const Fe=Zn.get("apiKeys");Fe&&P(JSON.parse(Fe))},[]);const we=Fe=>{k(Fe),Zn.set("selectedModel",Fe,{expires:30})},Ue=Fe=>{I(Fe),Zn.set("selectedProvider",Fe.name,{expires:30})};return y.jsx(Tkt,{ref:C,textareaRef:i,input:X,showChat:R,chatStarted:o,isStreaming:ee||p,onStreamingChange:Fe=>{Vbe.set(Fe)},enhancingPrompt:te,promptEnhanced:Y,sendMessage:le,model:E,setModel:we,provider:x,setProvider:Ue,providerList:v,messageRef:Ce,scrollRef:Ie,handleInputChange:Fe=>{se(Fe),fe(Fe)},handleStop:ge,description:t,importChat:r,exportChat:s,messages:U.map((Fe,Be)=>Fe.role==="user"?Fe:{...Fe,content:xe[Be]||""}),enhancePrompt:()=>{de(X,Fe=>{F(Fe),K()},E,x,O)},uploadedFiles:l,setUploadedFiles:c,imageDataList:u,setImageDataList:d,actionAlert:b,clearAlert:()=>It.clearAlert(),data:q})});function ACt(){const t=Bt(S0),e=Bt(Lo);N.useEffect(()=>{t.token&&e&&wO(t.token)},[t.token,e]);const n=t.stats?.sites?.find(r=>r.name.includes(`bolt-diy-${e}`));return n?y.jsx(X6,{children:y.jsxs(Z6,{children:[y.jsx(Q6,{asChild:!0,children:y.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-8 h-8 rounded hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textSecondary hover:text-[#00AD9F] z-50",onClick:r=>{r.stopPropagation()},children:y.jsx("div",{className:"i-ph:rocket-launch w-5 h-5"})})}),y.jsx(eM,{children:y.jsxs(tM,{className:"px-3 py-2 rounded bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary text-xs z-50",sideOffset:5,children:[n.url,y.jsx(nM,{className:"fill-bolt-elements-background-depth-3"})]})})]})}):null}function TCt({}){const t=Bt(It.showWorkbench),{showChat:e}=Bt(Pu),n=Bt(S0),[r]=N.useState(0),i=Bt(It.previews)[r],[o,a]=N.useState(!1),l=vhe(1024),c=t||!e,[u,d]=N.useState(!1),h=N.useRef(null),f=Bt(Vbe);N.useEffect(()=>{function g(b){h.current&&!h.current.contains(b.target)&&d(!1)}return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const p=Bt(Lo),m=async()=>{if(!n.user||!n.token){Ve.error("Please connect to Netlify first in the settings tab!");return}if(!p){Ve.error("No active chat found");return}try{a(!0);const g=It.firstArtifact;if(!g)throw new Error("No active project found");const b="build-"+Date.now(),v={messageId:"netlify build",artifactId:g.id,actionId:b,action:{type:"build",content:"npm run build"}};if(g.runner.addAction(v),await g.runner.runAction(v),!g.runner.buildOutput)throw new Error("Build failed");const w=await Su,_=g.runner.buildOutput.path.replace("/home/project","");async function S(O){const P={},U=await w.fs.readdir(O,{withFileTypes:!0});for(const ee of U){const X=Af.join(O,ee.name);if(ee.isFile()){const Z=await w.fs.readFile(X,"utf-8"),F=X.replace(_,"");P[F]=Z}else if(ee.isDirectory()){const Z=await S(X);Object.assign(P,Z)}}return P}const E=await S(_),k=localStorage.getItem(`netlify-site-${p}`),x=await fetch("/api/deploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:k||void 0,files:E,token:n.token,chatId:p})}),I=await x.json();if(!x.ok||!I.deploy||!I.site)throw console.error("Invalid deploy response:",I),new Error(I.error||"Invalid deployment response");const R=20;let C=0,T;for(;C<R;)try{if(T=await(await fetch(`https://api.netlify.com/api/v1/sites/${I.site.id}/deploys/${I.deploy.id}`,{headers:{Authorization:`Bearer ${n.token}`}})).json(),T.state==="ready"||T.state==="uploaded")break;if(T.state==="error")throw new Error("Deployment failed: "+(T.error_message||"Unknown error"));C++,await new Promise(P=>setTimeout(P,1e3))}catch(O){console.error("Status check error:",O),C++,await new Promise(P=>setTimeout(P,2e3))}if(C>=R)throw new Error("Deployment timed out");I.site&&localStorage.setItem(`netlify-site-${p}`,I.site.id),Ve.success(y.jsxs("div",{children:["Deployed successfully!"," ",y.jsx("a",{href:T.ssl_url||T.url,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"View site"})]}))}catch(g){console.error("Deploy error:",g),Ve.error(g instanceof Error?g.message:"Deployment failed")}finally{a(!1)}};return y.jsxs("div",{className:"flex",children:[y.jsxs("div",{className:"relative",ref:h,children:[y.jsx("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden mr-2 text-sm",children:y.jsxs(Km,{active:!0,disabled:o||!i||f,onClick:()=>d(!u),className:"px-4 hover:bg-bolt-elements-item-backgroundActive flex items-center gap-2",children:[o?"Deploying...":"Deploy",y.jsx("div",{className:Ne("i-ph:caret-down w-4 h-4 transition-transform",u?"rotate-180":"")})]})}),u&&y.jsxs("div",{className:"absolute right-2 flex flex-col gap-1 z-50 p-1 mt-1 min-w-[13.5rem] bg-bolt-elements-background-depth-2 rounded-md shadow-lg bg-bolt-elements-backgroundDefault border border-bolt-elements-borderColor",children:[y.jsxs(Km,{active:!0,onClick:()=>{m(),d(!1)},disabled:o||!i||!n.user,className:"flex items-center w-full px-4 py-2 text-sm text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive gap-2 rounded-md group relative",children:[y.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/netlify"}),y.jsx("span",{className:"mx-auto",children:n.user?"Deploy to Netlify":"No Account Connected"}),n.user&&y.jsx(ACt,{})]}),y.jsxs(Km,{active:!1,disabled:!0,className:"flex items-center w-full rounded-md px-4 py-2 text-sm text-bolt-elements-textTertiary gap-2",children:[y.jsx("span",{className:"sr-only",children:"Coming Soon"}),y.jsx("img",{className:"w-5 h-5 bg-black p-1 rounded",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/vercel/white",alt:"vercel"}),y.jsx("span",{className:"mx-auto",children:"Deploy to Vercel (Coming Soon)"})]}),y.jsxs(Km,{active:!1,disabled:!0,className:"flex items-center w-full rounded-md px-4 py-2 text-sm text-bolt-elements-textTertiary gap-2",children:[y.jsx("span",{className:"sr-only",children:"Coming Soon"}),y.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/cloudflare",alt:"vercel"}),y.jsx("span",{className:"mx-auto",children:"Deploy to Cloudflare (Coming Soon)"})]})]})]}),y.jsxs("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden",children:[y.jsx(Km,{active:e,disabled:!c||l,onClick:()=>{c&&Pu.setKey("showChat",!e)},children:y.jsx("div",{className:"i-bolt:chat text-sm"})}),y.jsx("div",{className:"w-[1px] bg-bolt-elements-borderColor"}),y.jsx(Km,{active:t,onClick:()=>{t&&!e&&Pu.setKey("showChat",!0),It.showWorkbench.set(!t)},children:y.jsx("div",{className:"i-ph:code-bold"})})]})]})}function Km({active:t=!1,disabled:e=!1,children:n,onClick:r,className:s}){return y.jsx("button",{className:Ne("flex items-center p-1.5",{"bg-bolt-elements-item-backgroundDefault hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!t,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":t&&!e,"bg-bolt-elements-item-backgroundDefault text-alpha-gray-20 dark:text-alpha-white-20 cursor-not-allowed":e},s),onClick:r,children:n})}function PCt(){const t=Bt(uc),{editing:e,handleChange:n,handleBlur:r,handleSubmit:s,handleKeyDown:i,currentDescription:o,toggleEditMode:a}=yhe({initialDescription:t,syncWithGlobalStore:!0});return t?y.jsx("div",{className:"flex items-center justify-center",children:e?y.jsxs("form",{onSubmit:s,className:"flex items-center justify-center",children:[y.jsx("input",{type:"text",className:"bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary rounded px-2 mr-2 w-fit",autoFocus:!0,value:o,onChange:n,onBlur:r,onKeyDown:i,style:{width:`${Math.max(o.length*8,100)}px`}}),y.jsx(yk,{children:y.jsx(vp,{tooltip:"Save title",children:y.jsx("div",{className:"flex justify-between items-center p-2 rounded-md bg-bolt-elements-item-backgroundAccent",children:y.jsx("button",{type:"submit",className:"i-ph:check-bold scale-110 hover:text-bolt-elements-item-contentAccent",onMouseDown:s})})})})]}):y.jsxs(y.Fragment,{children:[o,y.jsx(yk,{children:y.jsx(vp,{tooltip:"Rename chat",children:y.jsx("div",{className:"flex justify-between items-center p-2 rounded-md bg-bolt-elements-item-backgroundAccent ml-2",children:y.jsx("button",{type:"button",className:"i-ph:pencil-fill scale-110 hover:text-bolt-elements-item-contentAccent",onClick:l=>{l.preventDefault(),a()}})})})})]})}):null}function BTt(){const t=Bt(Pu);return y.jsxs("header",{className:Ne("flex items-center p-5 border-b h-[var(--header-height)]",{"border-transparent":!t.started,"border-bolt-elements-borderColor":t.started}),children:[y.jsxs("div",{className:"flex items-center gap-2 z-logo text-bolt-elements-textPrimary cursor-pointer",children:[y.jsx("div",{className:"i-ph:sidebar-simple-duotone text-xl"}),y.jsxs("a",{href:"/",className:"text-2xl font-semibold text-accent flex items-center",children:[y.jsx("img",{src:"/logo-light-styled.png",alt:"logo",className:"w-[90px] inline-block dark:hidden"}),y.jsx("img",{src:"/logo-dark-styled.png",alt:"logo",className:"w-[90px] inline-block hidden dark:block"})]})]}),t.started&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"flex-1 px-4 truncate text-center text-bolt-elements-textPrimary",children:y.jsx(lu,{children:()=>y.jsx(PCt,{})})}),y.jsx(lu,{children:()=>y.jsx("div",{className:"mr-1",children:y.jsx(TCt,{})})})]})]})}export{STt as $,Ys as A,Ve as B,lu as C,jmt as D,ot as E,CT as F,Dh as G,BTt as H,Nr as I,IT as J,mb as K,SL as L,mg as M,Mpe as N,Zpe as O,Vmt as P,Tn as Q,$s as R,EC as S,gs as T,Rt as U,zgt as V,RTt as W,ITt as X,Jgt as Y,TTt as Z,lgt as _,CTt as a,Yn as a0,NTt as b,ho as c,ATt as d,vn as e,_gt as f,lkt as g,FTt as h,hgt as i,ckt as j,Tkt as k,CM as l,AM as m,TM as n,BFe as o,ETt as p,Zoe as q,J8e as r,ngt as s,qe as t,Qoe as u,PTt as v,ba as w,ll as x,agt as y,xgt as z};
